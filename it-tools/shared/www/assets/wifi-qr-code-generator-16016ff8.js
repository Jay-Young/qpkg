import{A as c,ag as F,a1 as d,ab as u,d as N,k as W,w as A,a0 as B,o as g,b as w,f as p,g as l,e as S,ac as E,c as U,ar as H,a2 as q,n as K}from"./index-648e106a.js";import{b as L}from"./browser-e933942f.js";import{u as V}from"./downloadBase64-eff7ba23.js";import{_ as z}from"./Checkbox-d577666b.js";import{_ as O}from"./ColorPicker-839dd6c7.js";import{_ as R}from"./FormItem-a3e0acf0.js";import{_ as Y}from"./Form-b91cdebc.js";import"./index-c38fd5c5.js";import"./___vite-browser-external_commonjs-proxy-3610b844.js";import"./use-form-item-d249922d.js";import"./Input-0d060766.js";import"./Button-ed56b767.js";import"./use-locale-173d951d.js";import"./InputGroup-6581753b.js";const Q=["MD5","POTP","GTC","TLS","IKEv2","SIM","AKA","AKA'","TTLS","PWD","LEAP","PSK","FAST","TEAP","EKE","NOOB","PEAP"],G=["None","MSCHAPV2"];function h(P){return P.replace(/([\\;,:"])/g,"\\$1")}function j(P){const{ssid:t,password:n,encryption:a,eapMethod:s,isHiddenSSID:m,eapAnonymous:_,eapIdentity:f,eapPhase2Method:i}=P;if(!t)return null;if(a==="nopass")return`WIFI:S:${h(t)};;`;if(a!=="WPA2-EAP"&&n)return`WIFI:S:${h(t)};T:${a};P:${h(n)};${m?"H:true":""};`;if(a==="WPA2-EAP"&&n&&s){if(!f&&!_||s==="PEAP"&&!i)return null;const b=_?"A:anon":`I:${h(f)}`,v=i!=="None"?`PH2:${i};`:"";return`WIFI:S:${h(t)};T:WPA2-EAP;P:${h(n)};E:${s};${v}${b};${m?"H:true":""};`}return null}function J({ssid:P,password:t,eapMethod:n,isHiddenSSID:a,eapAnonymous:s,eapIdentity:m,eapPhase2Method:_,color:{background:f,foreground:i},options:b}){const v=c(""),r=c("WPA");return F([P,t,r,n,a,s,m,_,f,i].filter(d),async()=>{const x=j({ssid:u(P),password:u(t),encryption:u(r),eapMethod:u(n),isHiddenSSID:u(a),eapAnonymous:u(s),eapIdentity:u(m),eapPhase2Method:u(_)});x&&(v.value=await L.toDataURL(u(x).trim(),{color:{dark:u(i),light:u(f),...b?.color},errorCorrectionLevel:"M",...b}))},{immediate:!0}),{qrcode:v,encryption:r}}const X={grid:"","grid-cols-1":"","gap-12":""},Z={class:"mb-6 flex flex-row items-center gap-2"},ee={key:2,class:"mb-6 flex flex-row items-center gap-2"},oe={key:0},le={flex:"","flex-col":"","items-center":"","gap-3":""},te=["src"],Ae=N({__name:"wifi-qr-code-generator",setup(P){const t=c("#000000ff"),n=c("#ffffffff"),a=c(),s=c(),m=c(),_=c(!1),f=c(!1),i=c(),b=c(),{qrcode:v,encryption:r}=J({ssid:a,password:s,eapMethod:m,isHiddenSSID:_,eapAnonymous:f,eapIdentity:i,eapPhase2Method:b,color:{background:n,foreground:t},options:{width:1024}}),{download:x}=V({source:v,filename:"qr-code.png"});return(ne,o)=>{const k=H,y=q,$=z,I=O,T=R,C=Y,D=K,M=B;return g(),W(M,null,{default:A(()=>[w("div",X,[w("div",null,[p(k,{value:l(r),"onUpdate:value":o[0]||(o[0]=e=>d(r)?r.value=e:null),"mb-4":"",label:"Encryption method","default-value":"WPA","label-position":"left","label-width":"130px","label-align":"right",options:[{label:"No password",value:"nopass"},{label:"WPA/WPA2",value:"WPA"},{label:"WEP",value:"WEP"},{label:"WPA2-EAP",value:"WPA2-EAP"}]},null,8,["value"]),w("div",Z,[p(y,{value:l(a),"onUpdate:value":o[1]||(o[1]=e=>d(a)?a.value=e:null),"label-position":"left","label-width":"130px","label-align":"right",label:"SSID:",rows:"1",autosize:"",placeholder:"Your WiFi SSID...","mb-6":""},null,8,["value"]),p($,{checked:l(_),"onUpdate:checked":o[2]||(o[2]=e=>d(_)?_.value=e:null)},{default:A(()=>[S(" Hidden SSID ")]),_:1},8,["checked"])]),l(r)!=="nopass"?(g(),W(y,{key:0,value:l(s),"onUpdate:value":o[3]||(o[3]=e=>d(s)?s.value=e:null),"label-position":"left","label-width":"130px","label-align":"right",label:"Password:",rows:"1",autosize:"",type:"password",placeholder:"Your WiFi Password...","mb-6":""},null,8,["value"])):E("",!0),l(r)==="WPA2-EAP"?(g(),W(k,{key:1,value:l(m),"onUpdate:value":o[4]||(o[4]=e=>d(m)?m.value=e:null),label:"EAP method","label-position":"left","label-width":"130px","label-align":"right",options:l(Q).map(e=>({label:e,value:e})),searchable:"","mb-4":""},null,8,["value","options"])):E("",!0),l(r)==="WPA2-EAP"?(g(),U("div",ee,[p(y,{value:l(i),"onUpdate:value":o[5]||(o[5]=e=>d(i)?i.value=e:null),"label-position":"left","label-width":"130px","label-align":"right",label:"Identity:",rows:"1",autosize:"",placeholder:"Your EAP Identity...","mb-6":""},null,8,["value"]),p($,{checked:l(f),"onUpdate:checked":o[6]||(o[6]=e=>d(f)?f.value=e:null)},{default:A(()=>[S(" Anonymous? ")]),_:1},8,["checked"])])):E("",!0),l(r)==="WPA2-EAP"?(g(),W(k,{key:3,value:l(b),"onUpdate:value":o[7]||(o[7]=e=>d(b)?b.value=e:null),label:"EAP Phase 2 method","label-position":"left","label-width":"130px","label-align":"right",options:l(G).map(e=>({label:e,value:e})),searchable:"","mb-4":""},null,8,["value","options"])):E("",!0),p(C,{"label-width":"130","label-placement":"left"},{default:A(()=>[p(T,{label:"Foreground color:"},{default:A(()=>[p(I,{value:l(t),"onUpdate:value":o[8]||(o[8]=e=>d(t)?t.value=e:null),modes:["hex"]},null,8,["value"])]),_:1}),p(T,{label:"Background color:"},{default:A(()=>[p(I,{value:l(n),"onUpdate:value":o[9]||(o[9]=e=>d(n)?n.value=e:null),modes:["hex"]},null,8,["value"])]),_:1})]),_:1})]),l(v)?(g(),U("div",oe,[w("div",le,[w("img",{alt:"wifi-qrcode",src:l(v),width:"200"},null,8,te),p(D,{onClick:l(x)},{default:A(()=>[S(" Download qr-code ")]),_:1},8,["onClick"])])])):E("",!0)])]),_:1})}}});export{Ae as default};
