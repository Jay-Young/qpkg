import{_ as D}from"./FormatTransformer.vue_vue_type_script_setup_true_lang-b76e73c9.js";import{bt as k,bC as F,d as R,ab as X,j as B,q as P,k as C,w as T,F as I,o as V,n as M,B as L}from"./index-3141604a.js";import{w as $}from"./defaults-4d6daddf.js";import{_ as z}from"./FormItem-5c7797ea.js";import{_ as U}from"./Switch-b79fae12.js";import{_ as W}from"./InputNumber-79182b44.js";import"./TextareaCopyable-e98362fd.js";import"./copy-2e0173a3.js";import"./Copy-40bfe2ab.js";import"./Scrollbar-a3829e4f.js";import"./use-form-item-7ba2c55f.js";import"./use-locale-c06c4986.js";import"./Input-a67f8393.js";import"./Button-090519e0.js";import"./Remove-a5f09906.js";import"./Add-89bc6dbc.js";var O={exports:{}},j={exports:{}};(function(p,a){Object.defineProperty(a,"__esModule",{value:!0}),a.ParsingError=void 0;class f extends Error{constructor(n,l){super(n),this.cause=l}}a.ParsingError=f;let i;function h(){return g(!1)||t()||m()||v()}function c(){return r(/\s*/),g(!0)||m()||b()||w(!1)}function _(){const o=w(!0),n=[];let l,u=c();for(;u;){if(u.node.type==="Element"){if(l)throw new Error("Found multiple root nodes");l=u.node}u.excluded||n.push(u.node),u=c()}if(!l)throw new f("Failed to parse XML","Root Element not found");if(i.xml.length!==0)throw new f("Failed to parse XML","Not Well-Formed XML");return{declaration:o?o.node:null,root:l,children:n}}function w(o){const n=r(o?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!n)return;const l={name:n[1],type:"ProcessingInstruction",attributes:{}};for(;!(x()||d("?>"));){const u=e();if(u)l.attributes[u.name]=u.value;else return}return r(/\?>/),{excluded:o?!1:i.options.filter(l)===!1,node:l}}function g(o){const n=r(/^<([^?!</>\s]+)\s*/);if(!n)return;const l={type:"Element",name:n[1],attributes:{},children:[]},u=o?!1:i.options.filter(l)===!1;for(;!(x()||d(">")||d("?>")||d("/>"));){const S=e();if(S)l.attributes[S.name]=S.value;else return}if(r(/^\s*\/>/))return l.children=null,{excluded:u,node:l};r(/\??>/);let E=h();for(;E;)E.excluded||l.children.push(E.node),E=h();return r(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/),{excluded:u,node:l}}function b(){const o=r(/^<!DOCTYPE\s+[^>]*>/);if(o){const n={type:"DocumentType",content:o[0]};return{excluded:i.options.filter(n)===!1,node:n}}}function v(){if(i.xml.startsWith("<![CDATA[")){const o=i.xml.indexOf("]]>");if(o>-1){const n=o+3,l={type:"CDATA",content:i.xml.substring(0,n)};return i.xml=i.xml.slice(n),{excluded:i.options.filter(l)===!1,node:l}}}}function m(){const o=r(/^<!--[\s\S]*?-->/);if(o){const n={type:"Comment",content:o[0]};return{excluded:i.options.filter(n)===!1,node:n}}}function t(){const o=r(/^([^<]+)/);if(o){const n={type:"Text",content:o[1]};return{excluded:i.options.filter(n)===!1,node:n}}}function e(){const o=r(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(o)return{name:o[1].trim(),value:s(o[2].trim())}}function s(o){return o.replace(/^['"]|['"]$/g,"")}function r(o){const n=i.xml.match(o);if(n)return i.xml=i.xml.slice(n[0].length),n}function x(){return i.xml.length===0}function d(o){return i.xml.indexOf(o)===0}function y(o,n={}){o=o.trim();const l=n.filter||(()=>!0);return i={xml:o,options:Object.assign(Object.assign({},n),{filter:l})},_()}p.exports=y,a.default=y})(j,j.exports);var q=j.exports;(function(p,a){var f=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const i=f(q);function h(t){if(!t.options.indentation&&!t.options.lineSeparator)return;t.content+=t.options.lineSeparator;let e;for(e=0;e<t.level;e++)t.content+=t.options.indentation}function c(t,e){t.content+=e}function _(t,e,s){if(typeof t.content=="string")w(t.content,e,s);else if(t.type==="Element")g(t,e,s);else if(t.type==="ProcessingInstruction")v(t,e);else throw new Error("Unknown node type: "+t.type)}function w(t,e,s){if(!s){const r=t.trim();(e.options.lineSeparator||r.length===0)&&(t=r)}t.length>0&&(!s&&e.content.length>0&&h(e),c(e,t))}function g(t,e,s){if(!s&&e.content.length>0&&h(e),c(e,"<"+t.name),b(e,t.attributes),t.children===null){const r=e.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";c(e,r)}else if(t.children.length===0)c(e,"></"+t.name+">");else{const r=t.children;c(e,">"),e.level++;let x=t.attributes["xml:space"]==="preserve";if(!x&&e.options.collapseContent){let d=!1,y=!1,o=!1;r.forEach(function(n,l){n.type==="Text"?(n.content.includes(`
`)?(y=!0,n.content=n.content.trim()):(l===0||l===r.length-1)&&n.content.trim().length===0&&(n.content=""),n.content.trim().length>0&&(d=!0)):n.type==="CDATA"?d=!0:o=!0}),d&&(!o||!y)&&(x=!0)}r.forEach(function(d){_(d,e,s||x)}),e.level--,!s&&!x&&h(e),c(e,"</"+t.name+">")}}function b(t,e){Object.keys(e).forEach(function(s){const r=e[s].replace(/"/g,"&quot;");c(t," "+s+'="'+r+'"')})}function v(t,e){e.content.length>0&&h(e),c(e,"<?"+t.name),b(e,t.attributes),c(e,"?>")}function m(t,e={}){e.indentation="indentation"in e?e.indentation:"    ",e.collapseContent=e.collapseContent===!0,e.lineSeparator="lineSeparator"in e?e.lineSeparator:`\r
`,e.whiteSpaceAtEndOfSelfclosingTag=e.whiteSpaceAtEndOfSelfclosingTag===!0,e.throwOnFailure=e.throwOnFailure!==!1;try{const s=(0,i.default)(t,{filter:e.filter}),r={content:"",level:0,options:e};return s.declaration&&v(s.declaration,r),s.children.forEach(function(x){_(x,r,!1)}),e.lineSeparator?r.content.replace(/\r\n/g,`
`).replace(/\n/g,e.lineSeparator):r.content}catch(s){if(e.throwOnFailure)throw s;return t}}m.minify=(t,e={})=>m(t,Object.assign(Object.assign({},e),{indentation:"",lineSeparator:""})),p.exports=m,a.default=m})(O,O.exports);var Y=O.exports;const N=k(Y);function A(p){return p.trim()}function G(p,a){return $(()=>N(A(p),a)??"","")}function Q(p){const a=A(p);if(a==="")return!0;try{return N(a),!0}catch{return!1}}const H={"important:flex-full":"","important:flex-shrink-0":"","important:flex-grow-0":""},J={flex:"","justify-center":""},K="<hello><world>foo</world><world>bar</world></hello>",he=R({__name:"xml-formatter",setup(p){const a=X("xml-formatter:indent-size",2),f=X("xml-formatter:collapse-content",!0);function i(c){return G(c,{indentation:" ".repeat(a.value),collapseContent:f.value,lineSeparator:`
`})}const h=[{validator:Q,message:"Provided XML is not valid."}];return(c,_)=>{const w=U,g=z,b=W,v=D;return V(),B(I,null,[P("div",H,[P("div",J,[C(g,{label:"Collapse content:","label-placement":"left"},{default:T(()=>[C(w,{value:M(f),"onUpdate:value":_[0]||(_[0]=m=>L(f)?f.value=m:null)},null,8,["value"])]),_:1}),C(g,{label:"Indent size:","label-placement":"left","label-width":"100","show-feedback":!1},{default:T(()=>[C(b,{value:M(a),"onUpdate:value":_[1]||(_[1]=m=>L(a)?a.value=m:null),min:"0",max:"10","w-100px":""},null,8,["value"])]),_:1})])]),C(v,{"input-label":"Your XML","input-placeholder":"Paste your XML here...","output-label":"Formatted XML from your XML","output-language":"xml","input-validation-rules":h,transformer:i,"input-default":K})],64)}}});export{he as default};
