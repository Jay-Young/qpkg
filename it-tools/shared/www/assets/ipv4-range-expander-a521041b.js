import{d as f,o as p,c as v,au as T,a9 as L,i as g,b as d,t as j,g as o,f as u,m as D,a7 as V,Y as S,a1 as x,k as I,w as m,ac as F,a2 as M,F as U,j as Y,e as q,a3 as G,n as H}from"./index-648e106a.js";import{i as k,a as $}from"./ipv4-address-converter.service-7304a59c.js";import{c as N}from"./integer-base-converter.model-81b950ae.js";import{_ as C}from"./SpanCopyable.vue_vue_type_script_setup_true_lang-2f323d56.js";import{_ as J}from"./Alert-48775a0c.js";import{_ as K}from"./Table-9bd51be6.js";const Q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},W=T('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="5" cy="18" r="2"></circle><circle cx="19" cy="6" r="2"></circle><path d="M19 8v5a5 5 0 0 1-5 5h-3l3-3m0 6l-3-3"></path><path d="M5 16v-5a5 5 0 0 1 5-5h3l-3-3m0 6l3-3"></path></g>',1),X=[W],Z=f({name:"Exchange",render:function(e,a){return p(),v("svg",Q,X)}});function E(t){return`${t>>>24}.${t>>16&255}.${t>>8&255}.${t&255}`}function w(t,e){return t==null||e==null?-1:1+Number.parseInt(e,2)-Number.parseInt(t,2)}function ee(t,e){if(t==null||e==null||w(t,e)<1)return null;let l=32;for(let i=0;i<32;i++)if(t[i]!==e[i]){l=i;break}const r=t.substring(0,l)+"0".repeat(32-l),n=e.substring(0,l)+"1".repeat(32-l);return{start:r,end:n,mask:l}}function te({startIp:t,endIp:e}){const a=N({value:k({ip:t}).toString(),fromBase:10,toBase:2}).padStart(32,"0"),l=N({value:k({ip:e}).toString(),fromBase:10,toBase:2}).padStart(32,"0"),r=ee(a,l);if(r!=null){const n={};return n.newEnd=E(Number.parseInt(r.end,2)),n.newStart=E(Number.parseInt(r.start,2)),n.newCidr=`${n.newStart}/${r.mask}`,n.newSize=w(r.start,r.end),n.oldSize=w(a,l),n}}const ae={"font-bold":""},ne=["data-test-id"],se=["data-test-id"],le=f({__name:"result-row",props:{label:{default:""},oldValue:{default:""},newValue:{default:""}},setup(t){const e=t,{label:a,oldValue:l,newValue:r}=L(e),n=g(()=>D.kebabCase(a.value));return(i,h)=>(p(),v("tr",null,[d("td",ae,j(o(a)),1),d("td",{"data-test-id":`${o(n)}.old`},[u(C,{value:o(l),class:"monospace"},null,8,["value"])],8,ne),d("td",{"data-test-id":`${o(n)}.new`},[u(C,{value:o(r)},null,8,["value"])],8,se)]))}}),oe={"mb-4":"",flex:"","gap-4":""},re=d("thead",null,[d("tr",null,[d("th",{scope:"col"}," Â  "),d("th",{scope:"col"}," old value "),d("th",{scope:"col"}," new value ")])],-1),de=d("div",{"my-3":"","op-70":""}," The end IPv4 address is lower than the start IPv4 address. This is not valid and no result could be calculated. In the most cases the solution to solve this problem is to change start and end address. ",-1),me=f({__name:"ipv4-range-expander",setup(t){const e=V("ipv4-range-expander:startAddress","192.168.1.1"),a=V("ipv4-range-expander:endAddress","192.168.6.255"),l=g(()=>te({startIp:e.value,endIp:a.value})),r=[{label:"Start address",getOldValue:()=>e.value,getNewValue:s=>s?.newStart},{label:"End address",getOldValue:()=>a.value,getNewValue:s=>s?.newEnd},{label:"Addresses in range",getOldValue:s=>s?.oldSize?.toLocaleString(),getNewValue:s=>s?.newSize?.toLocaleString()},{label:"CIDR",getOldValue:()=>"",getNewValue:s=>s?.newCidr}],n=S({source:e,rules:[{message:"Invalid ipv4 address",validator:s=>$({ip:s})}]}),i=S({source:a,rules:[{message:"Invalid ipv4 address",validator:s=>$({ip:s})}]}),h=g(()=>i.isValid&&n.isValid&&l.value!==void 0);function B(){const s=e.value;e.value=a.value,a.value=s}return(s,_)=>{const b=M,y=K,z=G,P=H,A=J;return p(),v("div",null,[d("div",oe,[u(b,{value:o(e),"onUpdate:value":_[0]||(_[0]=c=>x(e)?e.value=c:null),label:"Start address",placeholder:"Start IPv4 address...",validation:o(n),clearable:""},null,8,["value","validation"]),u(b,{value:o(a),"onUpdate:value":_[1]||(_[1]=c=>x(a)?a.value=c:null),label:"End address",placeholder:"End IPv4 address...",validation:o(i),clearable:""},null,8,["value","validation"])]),o(h)?(p(),I(y,{key:0,"data-test-id":"result"},{default:m(()=>[re,d("tbody",null,[(p(),v(U,null,Y(r,({label:c,getOldValue:R,getNewValue:O})=>u(le,{key:c,label:c,"old-value":R(o(l)),"new-value":O(o(l))},null,8,["label","old-value","new-value"])),64))])]),_:1})):o(n).isValid&&o(i).isValid?(p(),I(A,{key:1,title:"Invalid combination of start and end IPv4 address",type:"error"},{default:m(()=>[de,u(P,{onClick:B},{default:m(()=>[u(z,{"mr-2":"",component:o(Z),depth:"3",size:"22"},null,8,["component"]),q(" Switch start and end IPv4 address ")]),_:1})]),_:1})):F("",!0)])}}});export{me as default};
