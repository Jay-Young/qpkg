import{p as De}from"./purify.es-CEVJ7K31.js";import{f as _,a4 as Ue,u as R,I as F,J as u,n as ne,L as t,x as U,m as e,S,R as T,N as D,O as h,Q as B,Z as Ve,e as N,T as Y,F as I,X as W,q as L,U as ke,b as q,r as se,M as oe,P as ce,G as be,W as ie,a1 as fe}from"./vue-D52l2THz.js";import{aq as j,ar as Se,s as G,as as re,a1 as Te,at as _e,j as z,k as A,E as Ee,o as Le,au as Ne,C as ue,x as pe,w as H,ab as Me,av as Oe,a as ve,R as M,aw as Ie,u as X,c as Fe,d as K,e as x,f as ee,g as Re,V as P,i as de,l as te,F as le,ax as Pe,ak as Ae,ag as Z,ay as Be,r as J,q as O,az as qe,J as me,K as he,aA as je,aB as Ge,aC as ze,aD as ge,ac as He}from"./index-StHCUEkb.js";import{a as Ke}from"./vuetify-CWphNKul.js";var E=(f=>(f[f.LOADING=0]="LOADING",f[f.ERROR=1]="ERROR",f[f.UNREAD=2]="UNREAD",f[f.READ=3]="READ",f))(E||{});const Je={class:"d-flex"},Qe={key:0},We={key:0},Xe={key:1},Ze={class:"d-flex flex-column"},Ye=_({__name:"Article",props:{value:{}},emits:["click","markAsRead","open","download"],setup(f){const p=j();return(r,s)=>Ue((u(),F(G,{class:ne({"rss-read":r.value.isRead}),"data-custom-context-menu":"",onClick:s[3]||(s[3]=l=>r.$emit("click")),onContextmenu:s[4]||(s[4]=l=>r.$emit("markAsRead"))},{default:t(()=>[U("div",Je,[U("div",null,[e(re,{class:"d-flex align-center ga-3 wrap-anywhere",style:{"white-space":"unset"}},{default:t(()=>[r.value.isRead?T("",!0):(u(),S("div",Qe,[e(Te,{color:"accent",variant:"outlined"},{default:t(()=>[D(h(r.$t("rssArticles.feeds.item.new")),1)]),_:1})])),U("div",null,h(r.value.title),1)]),_:1}),e(_e,{class:"d-block mt-3"},{default:t(()=>[U("div",null,h(r.value.parsedDate.toLocaleString()),1),U("div",null,h(r.$t("rssArticles.feeds.item.feedName",{name:R(p).getFeedNames(r.value.id).join(" | ")})),1),r.value.author?(u(),S("div",We,h(r.$t("rssArticles.feeds.item.author",{author:r.value.author})),1)):T("",!0),r.value.category?(u(),S("div",Xe,h(r.$t("rssArticles.feeds.item.category",{category:r.value.category})),1)):T("",!0)]),_:1})]),e(z),U("div",Ze,[e(A,{icon:"mdi-open-in-new",variant:"text",onClick:s[0]||(s[0]=B(l=>r.$emit("open"),["stop"]))}),e(A,{color:"accent",icon:"mdi-check",variant:"text",onClick:s[1]||(s[1]=B(l=>r.$emit("markAsRead"),["stop"]))}),e(A,{icon:"mdi-download",variant:"text",onClick:s[2]||(s[2]=B(l=>r.$emit("download"),["stop"]))})])])]),_:1},8,["class"])),[[R(Se),()=>r.$emit("markAsRead")]])}}),$e=_({__name:"ArticleList",props:{height:{}},emits:["articleClicked"],setup(f){const p=Ve(),r=Ee(),s=j(),l=Le(),v=N(()=>p.params.feedId),n=N(()=>s.filteredArticles.filter(a=>!v.value||v.value===a.feedId).sort((a,o)=>Number(o.parsedDate)-Number(a.parsedDate))),{paginatedResults:m,currentPage:y,pageCount:d}=Ne(n,15);function C(a){const o=l.useIdForRssLinks?a.id:a.link;Me(o)}function V(a){r.pushTorrentToQueue(a.torrentURL)}async function i(a){await s.markArticleAsRead(a.id)}return(a,o)=>(u(),F(ue,{height:a.height},{default:t(()=>[n.value.length?(u(),F(G,{key:0},{default:t(()=>[e(pe,{modelValue:R(y),"onUpdate:modelValue":o[0]||(o[0]=c=>Y(y)?y.value=c:null),length:R(d),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},null,8,["modelValue","length"])]),_:1})):T("",!0),(u(!0),S(I,null,W(R(m),(c,g)=>(u(),S(I,{key:g},[g>0?(u(),F(H,{key:0})):T("",!0),e(Ye,{value:c,onClick:w=>a.$emit("articleClicked",c),onMarkAsRead:w=>i(c),onOpen:w=>C(c),onDownload:w=>V(c)},null,8,["value","onClick","onMarkAsRead","onOpen","onDownload"])],64))),128)),n.value.length===0?(u(),F(G,{key:1},{default:t(()=>[D(h(a.$t("common.emptyList")),1)]),_:1})):T("",!0),n.value.length?(u(),F(G,{key:2},{default:t(()=>[e(pe,{modelValue:R(y),"onUpdate:modelValue":o[1]||(o[1]=c=>Y(y)?y.value=c:null),length:R(d),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},null,8,["modelValue","length"])]),_:1})):T("",!0)]),_:1},8,["height"]))}}),xe={class:"mr-2"},Ce=_({__name:"FeedIcon",props:{state:{}},setup(f){return(p,r)=>(u(),S("span",xe,[p.state===R(E).LOADING?(u(),F(Oe,{key:0,size:"24",width:"3",indeterminate:""})):p.state===R(E).ERROR?(u(),F(ve,{key:1,icon:"mdi-alert-circle-outline",color:"error"})):p.state===R(E).UNREAD?(u(),F(ve,{key:2,icon:"mdi-email"})):T("",!0)]))}}),et={class:"d-flex align-center"},tt=_({__name:"Feed",props:{title:{},state:{},unreadCount:{}},emits:["readFeed","refreshFeed","editFeed","deleteFeed"],setup(f){const p=f,r=N(()=>p.state===E.LOADING);return(s,l)=>(u(),S("div",et,[e(Ce,{state:s.state},null,8,["state"]),e(re,null,{default:t(()=>[D(h(s.title),1)]),_:1}),e(z),e(M,{text:s.$t("rssArticles.feeds.markAsRead"),location:"top"},{activator:t(({props:v})=>[s.unreadCount>0?(u(),F(A,L({key:0},v,{icon:"mdi-email-open",density:"comfortable",variant:"plain",onClick:l[0]||(l[0]=B(n=>s.$emit("readFeed"),["stop"]))}),null,16)):T("",!0)]),_:1},8,["text"]),e(M,{text:s.$t("common.refresh"),location:"top"},{activator:t(({props:v})=>[r.value?T("",!0):(u(),F(A,L({key:0},v,{icon:"mdi-sync",density:"comfortable",variant:"plain",onClick:l[1]||(l[1]=B(n=>s.$emit("refreshFeed"),["stop"]))}),null,16))]),_:1},8,["text"]),e(M,{text:s.$t("common.edit"),location:"top"},{activator:t(({props:v})=>[e(A,L(v,{icon:"mdi-pencil",density:"comfortable",variant:"plain",onClick:l[2]||(l[2]=B(n=>s.$emit("editFeed"),["stop"]))}),null,16)]),_:1},8,["text"]),e(M,{text:s.$t("common.delete"),location:"top"},{activator:t(({props:v})=>[e(A,L(v,{icon:"mdi-delete",color:"red",density:"comfortable",variant:"plain",onClick:l[3]||(l[3]=B(n=>s.$emit("deleteFeed"),["stop"]))}),null,16)]),_:1},8,["text"])]))}}),lt={class:"d-flex align-center"},ye=_({__name:"FeedList",props:{height:{}},emits:["update","createFeed","editFeed","deleteFeed","refreshFeed"],setup(f,{emit:p}){const r=p,s=ke(),l=j(),v=N({get:()=>s.currentRoute.value.params.feedId,set(o){s.replace({name:"rssArticles",params:{tab:"feeds",feedId:o}}).then(()=>r("update",o))}}),n=Ie(()=>l.filteredArticles.map(o=>o.feedId));function m(o){return o?(o.articles??[]).reduce((c,g)=>c+ +!g.isRead,0):l.unreadArticles.length}function y(o){v.value=v.value!==o.uid?o.uid:void 0}async function d(o){await l.markFeedAsRead(o)}async function C(){await l.refreshAllFeeds(),l.resumeFeedTimer()}function V(o){const c=m(o);return(c?`${c} | `:"")+`${o?o.name:"All"}`}const i=N(()=>l.feeds.reduce((o,c)=>Math.min(o,a(c)),E.READ));function a(o){return o.isLoading?E.LOADING:o.hasError?E.ERROR:o.articles?.some(c=>!c.isRead)?E.UNREAD:E.READ}return(o,c)=>(u(),F(ue,{height:o.height},{default:t(()=>[e(G,{active:!v.value,color:"accent",variant:"text",onClick:c[3]||(c[3]=g=>v.value=void 0)},{default:t(()=>[U("div",lt,[e(Ce,{state:i.value},null,8,["state"]),e(re,null,{default:t(()=>[D(h(V()),1)]),_:1}),e(z),e(M,{text:o.$t("rssArticles.feeds.markAllAsRead"),location:"top"},{activator:t(({props:g})=>[m()>0?(u(),F(A,L({key:0},g,{icon:"mdi-email-open",density:"comfortable",variant:"plain",onClick:c[0]||(c[0]=w=>R(l).markAllAsRead())}),null,16)):T("",!0)]),_:1},8,["text"]),e(M,{text:o.$t("rssArticles.feeds.refreshAllFeeds"),location:"top"},{activator:t(({props:g})=>[i.value!==R(E).LOADING?(u(),F(A,L({key:0},g,{icon:"mdi-sync",density:"comfortable",variant:"plain",onClick:c[1]||(c[1]=w=>C())}),null,16)):T("",!0)]),_:1},8,["text"]),e(M,{text:o.$t("rssArticles.feeds.empty.action"),location:"top"},{activator:t(({props:g})=>[e(A,L(g,{icon:"mdi-plus",density:"comfortable",variant:"plain",onClick:c[2]||(c[2]=w=>o.$emit("createFeed"))}),null,16)]),_:1},8,["text"])])]),_:1},8,["active"]),e(H,{thickness:"3"}),(u(!0),S(I,null,W(R(l).feeds,g=>(u(),S(I,null,[(!R(l).filters.unread||m(g)>0)&&(R(l).filters.title==""||!R(n).length||R(n).includes(g.uid))?(u(),F(G,{key:g.uid,active:v.value===g.uid,class:ne(m(g)>0?"text-accent":""),color:"accent",variant:"text",onClick:w=>y(g)},{default:t(()=>[e(tt,{title:V(g),state:a(g),"unread-count":m(g),onReadFeed:w=>d(g),onRefreshFeed:w=>o.$emit("refreshFeed",g),onEditFeed:w=>o.$emit("editFeed",g),onDeleteFeed:w=>o.$emit("deleteFeed",g)},null,8,["title","state","unread-count","onReadFeed","onRefreshFeed","onEditFeed","onDeleteFeed"])]),_:2},1032,["active","class","onClick"])):T("",!0)],64))),256))]),_:1},8,["height"]))}}),at=_({__name:"RssFeedDialog",props:{guid:{},initialFeed:{}},setup(f){const p=f,{t:r}=X(),{isOpened:s}=Fe(p.guid),l=j(),v=q(),n=q(!1),m=se({name:"",url:""}),y=[i=>!!i||r("dialogs.rss.feed.rules.name_required")],d=[i=>!!i||r("dialogs.rss.feed.rules.url_required")];async function C(){await v.value?.validate(),n.value&&(p.initialFeed?(m.url!==p.initialFeed.url&&await l.setFeedUrl(p.initialFeed.name,m.url),m.name!==p.initialFeed.name&&await l.renameFeed(p.initialFeed.name,m.name)):await l.createFeed(m.name,m.url),await l.fetchFeeds(),V())}function V(){s.value=!1}return oe(()=>{p.initialFeed&&(m.name=p.initialFeed.name,m.url=p.initialFeed.url)}),(i,a)=>(u(),F(te,{modelValue:R(s),"onUpdate:modelValue":a[4]||(a[4]=o=>Y(s)?s.value=o:null)},{default:t(()=>[e(K,null,{default:t(()=>[e(x,null,{default:t(()=>[D(h(i.$t(`dialogs.rss.feed.title.${i.initialFeed?"edit":"create"}`)),1)]),_:1}),e(ee,null,{default:t(()=>[e(R(Re),{ref_key:"form",ref:v,modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=o=>n.value=o),onSubmit:a[3]||(a[3]=B(()=>{},["prevent"]))},{default:t(()=>[e(P,{modelValue:m.name,"onUpdate:modelValue":a[0]||(a[0]=o=>m.name=o),rules:y,label:i.$t("dialogs.rss.feed.name"),onKeydown:ce(C,["enter"])},null,8,["modelValue","label"]),e(P,{modelValue:m.url,"onUpdate:modelValue":a[1]||(a[1]=o=>m.url=o),rules:d,label:i.$t("dialogs.rss.feed.url"),onKeydown:ce(C,["enter"])},null,8,["modelValue","label"])]),_:1},8,["modelValue"])]),_:1}),e(de,null,{default:t(()=>[e(z),e(A,{color:"error",onClick:V},{default:t(()=>[D(h(i.$t("common.cancel")),1)]),_:1}),e(A,{color:"accent",disabled:!n.value,onClick:C},{default:t(()=>[D(h(i.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),nt=_({__name:"Feeds",props:{height:{},mobile:{type:Boolean}},emits:["openArticle"],setup(f){const p=f,{t:r}=X(),s=le(),l=j(),v=q(!1),n=N(()=>p.height-56-16-56-12*2),m=N({get:()=>l.filters.title,set:Pe(V=>{l.filters.title=V??""},300)});function y(V){s.createDialog(at,{initialFeed:V},l.resumeFeedTimer)}async function d(V){await l.refreshFeed(V.name),l.resumeFeedTimer()}function C(V){s.confirmAction({title:r("dialogs.confirm.deleteFeed"),text:V.name,yesColor:"error",onConfirm:async()=>{await l.deleteFeed(V.name),l.resumeFeedTimer()}})}return be(()=>{l.resumeFeedTimer()}),ie(()=>{l.pauseFeedTimer()}),(V,i)=>R(l).feeds.length?(u(),F(K,{key:1,id:"rss-articles",class:"pa-3",height:V.height},{default:t(()=>[e(P,{modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=a=>m.value=a),label:V.$t("rssArticles.feeds.filters.title"),clearable:"","hide-details":""},null,8,["modelValue","label"]),e(Z,{modelValue:R(l).filters.unread,"onUpdate:modelValue":i[2]||(i[2]=a=>R(l).filters.unread=a),label:V.$t("rssArticles.feeds.filters.unread"),"hide-details":""},null,8,["modelValue","label"]),V.mobile?(u(),S(I,{key:0},[e($e,{height:n.value,onArticleClicked:i[3]||(i[3]=a=>V.$emit("openArticle",a))},null,8,["height"]),e(Be,{modelValue:v.value,"onUpdate:modelValue":i[9]||(i[9]=a=>v.value=a),"max-height":"550"},{activator:t(({props:a})=>[e(A,L({class:"fab"},a,{color:"accent",icon:"mdi-format-list-bulleted",size:"large"}),null,16)]),default:t(()=>[e(ye,{onUpdate:i[4]||(i[4]=a=>v.value=!1),onCreateFeed:i[5]||(i[5]=()=>y()),onEditFeed:i[6]||(i[6]=a=>y(a)),onDeleteFeed:i[7]||(i[7]=a=>C(a)),onRefreshFeed:i[8]||(i[8]=a=>d(a))})]),_:1},8,["modelValue"])],64)):(u(),F(J,{key:1},{default:t(()=>[e(O,{cols:"4"},{default:t(()=>[e(ye,{height:n.value,onCreateFeed:i[10]||(i[10]=()=>y()),onEditFeed:i[11]||(i[11]=a=>y(a)),onDeleteFeed:i[12]||(i[12]=a=>C(a)),onRefreshFeed:i[13]||(i[13]=a=>d(a))},null,8,["height"])]),_:1}),e(O,{cols:"8"},{default:t(()=>[e($e,{height:n.value,onArticleClicked:i[14]||(i[14]=a=>V.$emit("openArticle",a))},null,8,["height"])]),_:1})]),_:1}))]),_:1},8,["height"])):(u(),F(K,{key:0,height:V.height},{default:t(()=>[e(Ae,{title:V.$t("rssArticles.feeds.empty.value"),icon:"mdi-rss-off"},{actions:t(()=>[e(A,{text:V.$t("rssArticles.feeds.empty.action"),color:"accent",onClick:i[0]||(i[0]=a=>y())},null,8,["text"])]),_:1},8,["title"])]),_:1},8,["height"]))}}),st={class:"pl-4"},ot=_({__name:"Rule",props:{value:{}},emits:["openRule"],setup(f){const{t:p}=X(),r=le(),s=j();async function l(n){await s.setRule(n.name,{...n,enabled:!n.enabled}),s.resumeRuleTimer()}function v(n){r.confirmAction({title:p("dialogs.confirm.deleteRule"),text:n.name,yesColor:"error",onConfirm:async()=>{await s.deleteRule(n.name),s.resumeRuleTimer()}})}return(n,m)=>(u(),F(qe,{rounded:"xl",class:"d-flex align-center"},{default:t(()=>[U("div",st,h(n.value.name),1),e(z),U("div",null,[e(A,{class:"my-2 mr-2",icon:n.value.enabled?"mdi-check":"mdi-cancel",color:n.value.enabled?"accent":"red",variant:"plain",density:"compact",onClick:m[0]||(m[0]=y=>l(n.value))},null,8,["icon","color"]),e(M,{text:n.$t("common.edit"),location:"top"},{activator:t(({props:y})=>[e(A,L(y,{class:"my-2 mr-2",icon:"mdi-pencil",variant:"plain",density:"compact",onClick:m[1]||(m[1]=d=>n.$emit("openRule",n.value))}),null,16)]),_:1},8,["text"]),e(M,{text:n.$t("common.delete"),location:"top"},{activator:t(({props:y})=>[e(A,L(y,{class:"my-2 mr-2",icon:"mdi-delete",color:"red",variant:"plain",density:"compact",onClick:m[2]||(m[2]=d=>v(n.value))}),null,16)]),_:1},8,["text"])])]),_:1}))}}),it=_({__name:"AddTorrentParamsDialog",props:{modelValue:{required:!0},modelModifiers:{},isOpened:{type:Boolean},isOpenedModifiers:{}},emits:["update:modelValue","update:isOpened"],setup(f){const p=fe(f,"modelValue"),r=fe(f,"isOpened"),{t:s}=X(),l=q();function v(){l.value?.saveFields(),r.value=!1}return(n,m)=>(u(),F(te,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=y=>r.value=y),class:ne(n.$vuetify.display.mobile?"":"w-75"),fullscreen:n.$vuetify.display.mobile,scrollable:""},{default:t(()=>[e(K,null,{default:t(()=>[e(x,{class:"ios-margin"},{default:t(()=>[e(me,{color:"transparent"},{default:t(()=>[e(he,null,{default:t(()=>[D(h(R(s)("dialogs.add.params.title")),1)]),_:1}),e(A,{icon:"mdi-close",onClick:v})]),_:1})]),_:1}),e(ee,null,{default:t(()=>[e(je,{modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=y=>p.value=y)},null,8,["modelValue"])]),_:1}),e(de,{class:"mb-2"},{default:t(()=>[e(z),e(A,{text:n.$t("common.close"),color:"",variant:"flat",onClick:v},null,8,["text"])]),_:1})]),_:1})]),_:1},8,["modelValue","class","fullscreen"]))}});function rt(f){return{save_path:f?.save_path??"",skip_checking:!1,add_to_top_of_queue:f?.add_to_top_of_queue??!1,content_layout:f?.torrent_content_layout,stop_condition:f?.torrent_stop_condition,download_limit:f?.dl_limit,upload_limit:f?.up_limit,use_download_path:!!f?.temp_path,download_path:f?.temp_path?f?.temp_path:"",stopped:f?.add_stopped_enabled??f?.start_paused_enabled,use_auto_tmm:f?.auto_tmm_enabled,ratio_limit:-2,seeding_time_limit:-2,inactive_seeding_time_limit:-2}}const ut={class:"d-flex"},dt={class:"d-flex align-center"},mt={class:"v-card-title pa-0"},ct=_({__name:"RssRuleDialog",props:{guid:{},initialRule:{}},setup(f){const p=f,r=N(()=>!!(p.initialRule&&p.initialRule.name)),{isOpened:s}=Fe(p.guid),{t:l}=X(),v=Ge(),n=j(),m=q(),y=q(!1),d=se(a()),C=q(""),V=q([]),i=N(()=>{if(d.lastMatch==="")return l("dialogs.rss.rule.lastMatch.unknownValue").toString();const k=new Date().getTime()-new Date(d.lastMatch).getTime();return l("dialogs.rss.rule.lastMatch.knownValue",Math.floor(k/(1e3*60*60*24)))});function a(){return{affectedFeeds:[],enabled:!0,episodeFilter:"",ignoreDays:0,lastMatch:"",mustContain:"",mustNotContain:"",name:"",priority:0,smartFilter:!1,useRegex:!1,previouslyMatchedEpisodes:r.value?p.initialRule.previouslyMatchedEpisodes:[],torrentParams:rt(v.preferences)}}async function o(){if(C.value==="")return;const k=[],b=await n.fetchMatchingArticles(C.value);for(const $ in b){const Q=b[$];k.length>0&&k.push({type:"divider"}),k.push({type:"subheader",value:$}),Q.forEach(we=>k.push({type:"item",value:we}))}V.value=k}async function c(){y.value&&((r.value||C.value!=="")&&C.value!==d.name&&await n.renameRule(C.value,d.name),await n.setRule(d.name,d),C.value=d.name,await n.fetchRules(),await o())}function g(){d.affectedFeeds=[]}function w(){d.affectedFeeds=n.feeds.map(k=>k.url)}function ae(){s.value=!1}return oe(async()=>{await n.fetchFeeds(),r.value&&(C.value=p.initialRule.name,Object.assign(d,p.initialRule)),await o()}),(k,b)=>(u(),F(te,{modelValue:R(s),"onUpdate:modelValue":b[13]||(b[13]=$=>Y(s)?s.value=$:null)},{default:t(()=>[e(K,null,{default:t(()=>[e(x,null,{default:t(()=>[e(me,{color:"transparent",title:k.$t(`dialogs.rss.rule.title.${k.initialRule?"edit":"create"}`)},{default:t(()=>[e(A,{icon:"mdi-close",onClick:ae})]),_:1},8,["title"])]),_:1}),e(ee,null,{default:t(()=>[e(R(Re),{ref_key:"form",ref:m,modelValue:y.value,"onUpdate:modelValue":b[11]||(b[11]=$=>y.value=$),onSubmit:b[12]||(b[12]=B(()=>{},["prevent"]))},{default:t(()=>[e(J,null,{default:t(()=>[e(O,{cols:"12",sm:"6",class:"scrollable-col"},{default:t(()=>[e(P,{modelValue:d.name,"onUpdate:modelValue":b[0]||(b[0]=$=>d.name=$),autofocus:"",required:"",label:k.$t("dialogs.rss.rule.name")},null,8,["modelValue","label"]),U("div",ut,[e(ze,{modelValue:d.enabled,"onUpdate:modelValue":b[1]||(b[1]=$=>d.enabled=$),color:"accent",inset:"","hide-details":"",label:k.$t("dialogs.rss.rule.enabled")},null,8,["modelValue","label"]),e(z),U("div",dt,[e(A,{class:"d-flex align-center justify-center",color:"accent"},{default:t(()=>[D(h(k.$t("dialogs.add.params.title"))+" ",1),e(it,{modelValue:d.torrentParams,"onUpdate:modelValue":b[2]||(b[2]=$=>d.torrentParams=$),activator:"parent"},null,8,["modelValue"])]),_:1})])]),e(H),e(Z,{modelValue:d.useRegex,"onUpdate:modelValue":b[3]||(b[3]=$=>d.useRegex=$),"hide-details":"",label:k.$t("dialogs.rss.rule.useRegex")},null,8,["modelValue","label"]),e(P,{modelValue:d.mustContain,"onUpdate:modelValue":b[4]||(b[4]=$=>d.mustContain=$),label:k.$t("dialogs.rss.rule.mustContain")},null,8,["modelValue","label"]),e(P,{modelValue:d.mustNotContain,"onUpdate:modelValue":b[5]||(b[5]=$=>d.mustNotContain=$),label:k.$t("dialogs.rss.rule.mustNotContain")},null,8,["modelValue","label"]),e(Z,{modelValue:d.smartFilter,"onUpdate:modelValue":b[6]||(b[6]=$=>d.smartFilter=$),"hide-details":"",label:k.$t("dialogs.rss.rule.smartFilter")},null,8,["modelValue","label"]),e(P,{modelValue:d.episodeFilter,"onUpdate:modelValue":b[7]||(b[7]=$=>d.episodeFilter=$),placeholder:k.$t("dialogs.rss.rule.episodeFilterPlaceholder"),label:k.$t("dialogs.rss.rule.episodeFilter")},null,8,["modelValue","placeholder","label"]),e(H,{class:"mb-4"}),e(P,{modelValue:d.ignoreDays,"onUpdate:modelValue":b[8]||(b[8]=$=>d.ignoreDays=$),modelModifiers:{number:!0},type:"number",hint:k.$t("dialogs.rss.rule.ignoreDaysHint"),label:k.$t("dialogs.rss.rule.ignoreDays")},null,8,["modelValue","hint","label"]),e(P,{modelValue:i.value,"onUpdate:modelValue":b[9]||(b[9]=$=>i.value=$),disabled:"",label:k.$t("dialogs.rss.rule.lastMatch.label")},null,8,["modelValue","label"]),e(H),e(ge,null,{default:t(()=>[D(h(k.$t("dialogs.rss.rule.affectedFeedsSubheader")),1)]),_:1}),e(J,null,{default:t(()=>[e(O,{cols:"6",class:"d-flex align-center justify-center"},{default:t(()=>[e(A,{color:"accent",onClick:w},{default:t(()=>[D(h(k.$t("common.selectAll")),1)]),_:1})]),_:1}),e(O,{cols:"6",class:"d-flex align-center justify-center"},{default:t(()=>[e(A,{color:"primary",onClick:g},{default:t(()=>[D(h(k.$t("common.selectNone")),1)]),_:1})]),_:1})]),_:1}),(u(!0),S(I,null,W(R(n).feeds,$=>(u(),F(Z,{key:$.uid,modelValue:d.affectedFeeds,"onUpdate:modelValue":b[10]||(b[10]=Q=>d.affectedFeeds=Q),multiple:"","hide-details":"",label:$.name,value:$.url},null,8,["modelValue","label","value"]))),128))]),_:1}),e(H,{vertical:!k.$vuetify.display.mobile},null,8,["vertical"]),e(O,{cols:"12",sm:"6",class:"scrollable-col"},{default:t(()=>[U("div",mt,h(k.$t("dialogs.rss.rule.matchingArticles.title")),1),e(ue,null,{default:t(()=>[(u(!0),S(I,null,W(V.value,($,Q)=>(u(),S(I,{key:Q},[$.type==="divider"?(u(),F(H,{key:0})):$.type==="subheader"?(u(),F(ge,{key:1,inset:""},{default:t(()=>[D(h($.value),1)]),_:2},1024)):(u(),F(G,{key:2,class:"mb-3"},{default:t(()=>[D(h($.value),1)]),_:2},1024))],64))),128)),V.value.length===0?(u(),F(G,{key:0,title:k.$t("dialogs.rss.rule.matchingArticles.noMatch")},null,8,["title"])):T("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(de,null,{default:t(()=>[e(z),e(A,{color:"error",onClick:ae},{default:t(()=>[D(h(k.$t("common.close")),1)]),_:1}),e(A,{color:"accent",onClick:c},{default:t(()=>[D(h(k.$t("common.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ft=He(ct,[["__scopeId","data-v-be2853a6"]]),pt={key:1,id:"rss-rules",class:"pa-3"},vt=_({__name:"Rules",props:{height:{}},setup(f){const p=le(),r=j();function s(l){p.createDialog(ft,{initialRule:l},r.resumeRuleTimer)}return oe(()=>{r.resumeRuleTimer()}),ie(()=>{r.pauseRuleTimer()}),(l,v)=>R(r).rules.length?(u(),S("div",pt,[e(J,{class:"mt-2"},{default:t(()=>[(u(!0),S(I,null,W(R(r).rules,n=>(u(),F(O,{key:n.name,cols:"12",sm:"6",lg:"3"},{default:t(()=>[e(ot,{value:n,onOpenRule:s},null,8,["value"])]),_:2},1024))),128))]),_:1}),e(J,null,{default:t(()=>[e(O,{cols:"12",class:"d-flex align-center justify-center"},{default:t(()=>[e(A,{color:"accent",onClick:v[1]||(v[1]=n=>s())},{default:t(()=>[D(h(l.$t("rssArticles.rules.empty.action")),1)]),_:1})]),_:1})]),_:1})])):(u(),F(K,{key:0,height:l.height},{default:t(()=>[e(Ae,{title:l.$t("rssArticles.rules.empty.value"),icon:"mdi-rss-off"},{actions:t(()=>[e(A,{text:l.$t("rssArticles.rules.empty.action"),color:"accent",onClick:v[0]||(v[0]=n=>s())},null,8,["text"])]),_:1},8,["title"])]),_:1},8,["height"]))}}),gt={class:"pa-3"},$t={class:"subtitle-1 ml-2",style:{"font-size":"1.6em !important"}},yt={class:"d-flex justify-end"},Vt=["innerHTML"],At=_({__name:"RssArticles",setup(f){const{height:p,mobile:r}=Ke({mobileBreakpoint:"md"}),s=Ve(),l=ke(),v=le(),n=j(),m=q(!1),y=se({title:"",content:""}),d=N(()=>s.params.tab!=="rules"),C=N(()=>p.value-64-12*2-48);function V(c){c.description&&(y.title=c.title.trim(),y.content=c.description.trim(),m.value=!0)}function i(){const c=s.params.tab==="rules"?"feeds":"rules";l.replace({name:"rssArticles",params:{tab:c}}).then(()=>n.lastView=c)}function a(){l.push({name:"dashboard"})}function o(c){if(v.hasActiveDialog||m.value)return!1;c.key==="Escape"&&a()}return be(()=>{document.addEventListener("keydown",o)}),ie(()=>{document.removeEventListener("keydown",o)}),(c,g)=>(u(),S(I,null,[U("div",gt,[e(J,{align:"center",justify:"center","no-gutters":""},{default:t(()=>[e(O,null,{default:t(()=>[U("h1",$t,h(d.value?c.$t("rssArticles.feeds.title"):c.$t("rssArticles.rules.title")),1)]),_:1}),e(O,null,{default:t(()=>[U("div",yt,[e(M,{text:c.$t(d.value?"rssArticles.toggle.rules":"rssArticles.toggle.feeds"),location:"top"},{activator:t(({props:w})=>[e(A,L(w,{icon:"mdi-auto-download",variant:"plain",onClick:g[0]||(g[0]=ae=>i())}),null,16)]),_:1},8,["text"]),e(A,{icon:"mdi-close",variant:"plain",onClick:g[1]||(g[1]=w=>a())})])]),_:1})]),_:1}),d.value?(u(),F(nt,{key:0,height:C.value,mobile:R(r),onOpenArticle:V},null,8,["height","mobile"])):(u(),F(vt,{key:1,height:C.value},null,8,["height"]))]),e(te,{modelValue:m.value,"onUpdate:modelValue":g[3]||(g[3]=w=>m.value=w)},{default:t(()=>[e(K,null,{default:t(()=>[e(x,null,{default:t(()=>[e(me,{color:"transparent"},{default:t(()=>[e(he,null,{default:t(()=>[D(h(y.title),1)]),_:1}),e(A,{icon:"mdi-close",onClick:g[2]||(g[2]=w=>m.value=!1)})]),_:1})]),_:1}),e(ee,null,{default:t(()=>[U("div",{class:"description-container",innerHTML:R(De).sanitize(y.content)},null,8,Vt)]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{At as default};
