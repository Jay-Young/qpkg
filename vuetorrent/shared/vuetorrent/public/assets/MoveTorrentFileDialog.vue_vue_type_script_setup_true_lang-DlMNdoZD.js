import{j as D,D as I,f as i,r as S,E as h,x as g,G as F,H as T,I as t,n as l,J as m,K as f,u as V,L as x,M as B,N as M,O}from"./vue-Bn6wizpW.js";import{u as $,a as K,V as U,b as R,c as _,d as b,e as j,f as q,g as C,h as A,i as E,__tla as __tla_0}from"./index-CjN-J9MH.js";let J;let __tla=Promise.all([(()=>{try{return __tla_0}catch{}})()]).then(async()=>{J=D({__name:"MoveTorrentFileDialog",props:{guid:{},hash:{},isFolder:{type:Boolean},oldName:{}},setup(k){const o=k,{isOpened:r}=$(o.guid),{t:c}=I(),N=K(),p=i(),u=i(),d=i(!1),n=S({newName:""}),y=[e=>!!e||c("dialogs.moveTorrent.required")];async function v(){await p.value?.validate(),d.value&&(o.isFolder?await N.renameTorrentFolder(o.hash,o.oldName,n.newName):await N.renameTorrentFile(o.hash,o.oldName,n.newName),w())}const w=()=>{r.value=!1};return h(()=>{if(n.newName=o.oldName,o.isFolder)g(()=>u.value?.select());else{const e=n.newName.lastIndexOf("/"),a=n.newName.lastIndexOf(".");g(()=>{u.value?.setSelectionRange(e+1,a==-1?n.newName.length:a)})}}),(e,a)=>(F(),T(E,{modelValue:V(r),"onUpdate:modelValue":a[3]||(a[3]=s=>O(r)?r.value=s:null)},{default:t(()=>[l(A,null,{default:t(()=>[l(U,null,{default:t(()=>[m(f(V(c)("dialogs.moveTorrentFile.title",1+Number(e.isFolder))),1)]),_:1}),l(R,null,{default:t(()=>[l(V(_),{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=s=>d.value=s),ref_key:"form",ref:p,onSubmit:a[2]||(a[2]=x(()=>{},["prevent"]))},{default:t(()=>[e.oldName?(F(),T(b,{key:0,"model-value":e.oldName,disabled:"",label:e.$t("dialogs.moveTorrentFile.oldName")},null,8,["model-value","label"])):B("",!0),l(b,{modelValue:n.newName,"onUpdate:modelValue":a[0]||(a[0]=s=>n.newName=s),ref_key:"input",ref:u,rules:y,autofocus:"",label:e.$t("dialogs.moveTorrent.newPath"),onKeydown:M(v,["enter"])},null,8,["modelValue","label"])]),_:1},8,["modelValue"])]),_:1}),l(j,null,{default:t(()=>[l(q),l(C,{color:"error",onClick:w},{default:t(()=>[m(f(e.$t("common.cancel")),1)]),_:1}),l(C,{color:"accent",disabled:!d.value,onClick:v},{default:t(()=>[m(f(e.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}})});export{J as _,__tla};