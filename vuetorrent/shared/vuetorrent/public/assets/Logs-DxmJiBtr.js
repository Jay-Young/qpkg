import{u as K,__tla as __tla_0}from"./ArrayPagination-C54Dd5Tu.js";import{l as Q,m as J,T as X,L as l,n as Y,o as Z,p as A,q as ee,r as f,h as te,s as m,t as le,v as ae,w as c,e as se,x as R,y as ne,z as oe,A as ue,g as re,B as ie,C as de,__tla as __tla_1}from"./index-C0tfT_Qc.js";import{j as me,S as ce,E as pe,c as p,f as T,G as ge,T as fe,H as r,Q as k,n as e,J as a,U as v,L as i,u as n,I as y,P as b,N as V,F,V as ve,W as B,K as E}from"./vue-CfSjRv-x.js";import{a as ye}from"./vuetify-PctCzU6r.js";let xe;let __tla=Promise.all([(()=>{try{return __tla_0}catch{}})(),(()=>{try{return __tla_1}catch{}})()]).then(async()=>{let Ve,he,Le,_e,Te;Ve={class:"pa-3"};he={style:{"font-size":"1.6em !important"},class:"subtitle-1 ml-2"};Le={class:"d-flex justify-end"};_e={class:"d-flex mr-8 overflow-hidden"};Te={class:"d-flex"};xe=me({__name:"Logs",setup(ke){const P=ce(),{t:O}=pe(),{current:U}=ye(),h=Q(),$=J(),j=p(()=>({light:{normal:"black",info:"blue",warning:"orange",critical:"red"},dark:{normal:"white",info:"deepskyblue",warning:"darkorange",critical:new X("darkred").lighten(12).toString()}})),L=T([{title:l[l.NORMAL],value:l.NORMAL},{title:l[l.INFO],value:l.INFO},{title:l[l.WARNING],value:l.WARNING},{title:l[l.CRITICAL],value:l.CRITICAL}]),u=T([l.NORMAL,l.INFO,l.WARNING,l.CRITICAL]),_=T(""),G=p(()=>h.logs),M=p(()=>G.value.filter(t=>u.value.includes(t.type))),C=p(()=>u.value.length>0),N=p(()=>u.value.length===L.value.length),{results:I}=Y(M,_,t=>t.message),{paginatedResults:W,currentPage:d,pageCount:g}=K(I,30),w=()=>{P.push({name:"dashboard"})},x=t=>`color: ${j.value[U.value.dark?"dark":"light"][l[t.type].toLowerCase()]}`,q=t=>l[t.type],z=t=>de(t.timestamp*1e3).format($.dateFormat),D=()=>{N.value?u.value=[]:u.value=L.value.map(t=>t.value)},S=t=>{t.key==="Escape"&&w()};return ge(async()=>{document.addEventListener("keydown",S),await h.cleanAndFetchLogs(),Z(h.fetchLogs,15e3)}),fe(()=>{document.removeEventListener("keydown",S)}),(t,o)=>(r(),k("div",Ve,[e(A,{"no-gutters":"",align:"center",justify:"center"},{default:a(()=>[e(f,null,{default:a(()=>[v("h1",he,i(n(O)("logs.title")),1)]),_:1}),e(f,null,{default:a(()=>[v("div",Le,[e(te,{icon:"mdi-close",variant:"plain",onClick:w})])]),_:1})]),_:1}),e(ee,null,{default:a(()=>[e(m,null,{default:a(()=>[e(A,null,{default:a(()=>[e(f,{cols:"6"},{default:a(()=>[e(le,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),items:L.value,label:t.$t("logs.filters.type"),"hide-details":"",multiple:"",chips:""},{"prepend-item":a(()=>[e(m,{title:t.$t("common.selectAll"),onClick:D},{prepend:a(()=>[e(ae,{indeterminate:C.value&&!N.value,"model-value":C.value},null,8,["indeterminate","model-value"])]),_:1},8,["title"]),e(c)]),_:1},8,["modelValue","items","label"])]),_:1}),e(f,{cols:"6"},{default:a(()=>[e(se,{modelValue:_.value,"onUpdate:modelValue":o[1]||(o[1]=s=>_.value=s),label:t.$t("logs.filters.query"),"hide-details":"",clearable:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(c,{class:"my-3",thickness:"5"}),n(g)>1?(r(),y(m,{key:0},{default:a(()=>[e(R,{modelValue:n(d),"onUpdate:modelValue":o[2]||(o[2]=s=>b(d)?d.value=s:null),length:n(g),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):V("",!0),e(c),(r(!0),k(F,null,ve(n(W),(s,H)=>(r(),k(F,null,[H>0?(r(),y(c,{key:0})):V("",!0),e(m,{class:"pa-0"},{default:a(()=>[e(ne,{class:"p-0"},{default:a(()=>[e(oe,{class:"pa-0"},{default:a(()=>[e(ue,{class:"text-no-wrap",style:B(x(s))},{default:a(()=>[v("div",_e,"["+i(s.id)+"] "+i(s.message),1),e(re),v("div",Te,i(z(s)),1)]),_:2},1032,["style"]),e(ie,{class:"wrap-word text-select",style:B(x(s))},{default:a(()=>[E(" ["+i(q(s))+"] "+i(s.message),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),256)),n(I).length===0?(r(),y(m,{key:1},{default:a(()=>[E(i(t.$t("logs.emptyLogList")),1)]),_:1})):V("",!0),e(c),n(g)>1?(r(),y(m,{key:2},{default:a(()=>[e(R,{modelValue:n(d),"onUpdate:modelValue":o[3]||(o[3]=s=>b(d)?d.value=s:null),length:n(g),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):V("",!0)]),_:1})]))}})});export{xe as default,__tla};