import{e as P,a1 as u,a5 as B,aa as p,Y as m,W as L,c as I,a2 as C,a3 as a,F as J,a6 as ae,u as n,k as t,S as tt,m as N,a4 as qe,ad as at,a7 as K,ae as Ge,af as je,K as Ie,b as E,r as Ye,M as pe,x as Xe,X as z,an as ce,B as te,$ as We,ao as ot,ap as lt,a0 as Ne,j as nt,q as st,aq as rt,A as Fe,N as $e,P as we}from"./vue-15fc29be.js";import{V as Oe,_ as Le,u as oe,f as it,a as dt,T as U,b as ut,c as ct,d as mt,e as pt,g as me,h as Je,i as ve,j as q,k as Ce,D as M,l as xe,m as he,n as Qe,o as Pe,p as ee,q as Ee,r as le,s as Ae,t as G,v as Ue,w as A,x as Me,y as _e,z as vt,A as Be,B as De,C as ue,E as Se,F as Ze,G as ht,H,I as et,J as Ke,K as _t,L as ft,M as He}from"./index-c5d19115.js";import{_ as bt}from"./MoveTorrentDialog.vue_vue_type_script_setup_true_lang-07453e87.js";import{d as Re}from"./dayjs.min-26db5b34.js";import"./faker-c43f92d4.js";import{u as gt}from"./ArrayPagination-f9b29a18.js";import{d as yt}from"./index-1edd5138.js";import{ac as kt}from"./vuetify-47497518.js";const Tt={class:"d-flex flex-column"},Vt={class:"text-caption text-grey"},$t={class:"text-caption text-grey"},wt=P({__name:"ItemAmount",props:{torrent:{},title:{},value:{},total:{}},setup(V){return(e,o)=>(u(),B("div",Tt,[p("div",Vt,m(e.$t(`torrent.properties.${e.title}`)),1),p("div",null,[L(m(e.torrent[e.value])+" ",1),p("span",$t," / "+m(e.torrent[e.total]),1)])]))}}),xt={class:"d-flex flex-column"},Bt={class:"text-caption text-grey"},St={class:"d-flex flex-row gap"},Ct=P({__name:"ItemChip",props:{torrent:{},title:{},value:{},color:{}},setup(V){const e=V,o=I(()=>{const i=e.torrent[e.value],s=typeof i;if(s==="string")return i.length>0?[i]:[];if(s==="object")return i});return(i,s)=>(u(),B("div",xt,[p("div",Bt,m(i.$t(`torrent.properties.${i.title}`)),1),p("div",St,[!o.value||o.value.length<1?(u(),C(Oe,{key:0,color:i.color.replace("$1",i.torrent[i.value]),variant:"flat"},{default:a(()=>[L(m(i.$t(`torrent.properties.empty_${i.value}`)),1)]),_:1},8,["color"])):(u(!0),B(J,{key:1},ae(o.value,y=>(u(),C(Oe,{color:i.color.replace("$1",i.torrent.state),variant:"flat"},{default:a(()=>[L(m(y),1)]),_:2},1032,["color"]))),256))])]))}});const Dt=Le(Ct,[["__scopeId","data-v-8eb4906a"]]),It={class:"d-flex flex-column"},Lt={class:"text-caption text-grey"},Pt={class:"text-caption text-grey"},Et=P({__name:"ItemData",props:{torrent:{},title:{},value:{}},setup(V){const e=oe();return(o,i)=>(u(),B("div",It,[p("div",Lt,m(o.$t(`torrent.properties.${o.title}`)),1),p("div",null,[L(m(n(it)(o.torrent[o.value],n(e).useBinarySize))+" ",1),p("span",Pt,m(n(dt)(o.torrent[o.value],n(e).useBinarySize)),1)])]))}}),At={class:"d-flex flex-column"},Ut={class:"text-caption text-grey"},Mt={key:0},Rt={key:1},Nt=P({__name:"ItemDateTime",props:{torrent:{},title:{},value:{}},setup(V){const e=oe();return(o,i)=>(u(),B("div",At,[p("div",Ut,m(o.$t(`torrent.properties.${o.title}`)),1),p("div",null,[o.torrent[o.value]>0?(u(),B("span",Mt,m(n(Re)(o.torrent[o.value]*1e3).format(n(e).dateFormat??"DD/MM/YYYY, HH:mm:ss")),1)):(u(),B("span",Rt,m(o.$t("dashboard.not_complete")),1))])]))}}),Ft={class:"d-flex flex-column"},Ot={class:"text-caption text-grey"},Kt={key:0},Ht={key:1},zt="D[d] H[h] m[m] s[s]",qt=P({__name:"ItemDuration",props:{torrent:{},title:{},value:{}},setup(V){return(e,o)=>(u(),B("div",Ft,[p("div",Ot,m(e.$t(`torrent.properties.${e.title}`)),1),p("div",null,[e.torrent[e.value]>0?(u(),B("span",Kt,m(n(Re).duration(e.torrent[e.value],"seconds").format(zt)),1)):(u(),B("span",Ht,m(e.$t("dashboard.not_complete")),1))])]))}}),Gt={class:"d-flex flex-column"},jt={class:"text-caption text-grey"},Yt=P({__name:"ItemPercent",props:{torrent:{},title:{},value:{}},setup(V){const e=V,o=I(()=>[U.UPLOADING,U.CHECKING_UP,U.FORCED_UP,U.ALLOCATING,U.DOWNLOADING,U.META_DL,U.CHECKING_DL,U.FORCED_DL,U.CHECKING_RESUME_DATA,U.MOVING].includes(e.torrent.state));return(i,s)=>(u(),B("div",Gt,[p("div",jt,m(i.$t(`torrent.properties.${i.title}`)),1),t(ct,{"model-value":i.torrent[i.value],max:1,striped:o.value,height:20,color:`torrent-${i.torrent.state}`,rounded:"sm",style:{width:"10em"}},{default:a(()=>[L(m(n(ut)(i.torrent[i.value])),1)]),_:1},8,["model-value","striped","color"])]))}}),Xt={class:"d-flex flex-column"},Wt={class:"text-caption text-grey"},Jt=P({__name:"ItemRelativeTime",props:{torrent:{},title:{},value:{}},setup(V){return(e,o)=>(u(),B("div",Xt,[p("div",Wt,m(e.$t(`torrent.properties.${e.title}`)),1),p("div",null,[p("span",null,m(n(Re)(e.torrent[e.value]*1e3).fromNow()),1)])]))}}),Qt={class:"d-flex flex-column"},Zt={class:"text-caption text-grey"},ea={class:"text-caption text-grey"},ta=P({__name:"ItemSpeed",props:{torrent:{},title:{},value:{}},setup(V){const e=oe();return(o,i)=>(u(),B("div",Qt,[p("div",Zt,m(o.$t(`torrent.properties.${o.title}`)),1),p("div",null,[L(m(n(mt)(o.torrent[o.value],n(e).useBitSpeed))+" ",1),p("span",ea,m(n(pt)(o.torrent[o.value],n(e).useBitSpeed)),1)])]))}}),aa={class:"d-flex flex-column"},oa={class:"text-caption text-grey"},la=P({__name:"ItemText",props:{torrent:{},title:{},value:{}},setup(V){return(e,o)=>(u(),B("div",aa,[p("div",oa,m(e.$t(`torrent.properties.${e.title}`)),1),p("div",null,m(e.torrent[e.value]),1)]))}}),na={class:"d-flex gap flex-wrap"},sa=P({__name:"Torrent",props:{torrent:{}},setup(V){const e=V,o=me(),i=oe(),s=I(()=>(e.torrent.progress===1?i.doneTorrentProperties:i.busyTorrentProperties).filter(b=>b.active).sort((b,c)=>b.order-c.order));function y(r){r.shiftKey?o.spanTorrentSelection(e.torrent.hash):(Ce(r)||o.isSelectionMultiple)&&(o.isSelectionMultiple=!0,o.toggleSelect(e.torrent.hash))}const f=r=>{switch(r){case M.AMOUNT:return wt;case M.CHIP:return Dt;case M.DATA:return Et;case M.DATETIME:return Nt;case M.DURATION:return qt;case M.PERCENT:return Yt;case M.RELATIVE:return Jt;case M.SPEED:return ta;case M.TEXT:default:return la}},$=I(()=>o.isTorrentInSelection(e.torrent.hash));return(r,b)=>(u(),C(q,{class:qe(`sideborder ${r.torrent.state} pointer`),color:$.value?`torrent-${r.torrent.state}-darken-3`:void 0,width:"100%",onClick:y},{default:a(()=>[t(Je,{class:"text-wrap text-subtitle-1 pt-1 pb-0"},{default:a(()=>[L(m(r.torrent.name),1)]),_:1}),t(ve,{class:"pa-2 pt-0"},{default:a(()=>[p("div",na,[(u(!0),B(J,null,ae(s.value,c=>(u(),C(tt(f(c.type)),N({torrent:r.torrent},c.props),null,16,["torrent"]))),256))])]),_:1})]),_:1},8,["class","color"]))}});const ra=Le(sa,[["__scopeId","data-v-2203dbac"]]),ia={class:"d-flex"},da={key:2},ua={key:3},ca=P({__name:"RightClickMenuEntry",props:{text:{},icon:{},action:{type:Function},hidden:{type:Boolean},disabled:{type:Boolean},disabledText:{},disabledIcon:{},divider:{type:Boolean},children:{}},setup(V){return(e,o)=>{const i=at("RightClickMenuEntry",!0);return e.hidden?K("",!0):(u(),C(ee,{key:0,class:"px-3 pointer",disabled:e.disabled,onClick:e.action},{default:a(()=>[p("div",ia,[e.disabled&&e.disabledIcon?(u(),C(xe,{key:0,class:"mr-2"},{default:a(()=>[L(m(e.disabledIcon),1)]),_:1})):e.icon?(u(),C(xe,{key:1,class:"mr-2"},{default:a(()=>[L(m(e.icon),1)]),_:1})):K("",!0),e.disabled&&e.disabledText?(u(),B("span",da,m(e.disabledText),1)):(u(),B("span",ua,m(e.text),1)),t(he),!e.disabled&&e.children?(u(),C(xe,{key:4},{default:a(()=>[L("mdi-chevron-right")]),_:1})):K("",!0)]),e.children?(u(),C(Qe,{key:0,activator:"parent","open-on-hover":!0,"open-on-click":!0,"close-delay":"0","open-delay":"0",location:"right"},{default:a(()=>[t(Pe,null,{default:a(()=>[(u(!0),B(J,null,ae(e.children,s=>(u(),C(i,Ge(je(s)),null,16))),256))]),_:1})]),_:1})):K("",!0)]),_:1},8,["disabled","onClick"]))}}}),ma=P({__name:"RenameTorrentDialog",props:{guid:{},hash:{}},setup(V){const e=V,{isOpened:o}=Ee(e.guid),{t:i}=Ie(),s=le(),y=E(),f=E(),$=E(!1),r=Ye({newName:""}),b=[w=>!!w||i("dialogs.renameTorrent.required"),w=>w!==k.value||i("dialogs.renameTorrent.sameName")],c=I(()=>s.getTorrentByHash(e.hash)),k=I(()=>c.value?.name);async function D(){await f.value?.validate(),$.value&&(await s.renameTorrent(e.hash,r.newName),h())}const h=()=>{o.value=!1};return pe(()=>{r.newName=c.value?.name||""}),Xe(()=>{y.value?.select()}),(w,x)=>(u(),C(Me,{modelValue:n(o),"onUpdate:modelValue":x[3]||(x[3]=g=>te(o)?o.value=g:null)},{default:a(()=>[t(q,null,{default:a(()=>[t(Je,null,{default:a(()=>[L(m(w.$t("dialogs.renameTorrent.title")),1)]),_:1}),t(ve,null,{default:a(()=>[t(n(Ae),{modelValue:$.value,"onUpdate:modelValue":x[1]||(x[1]=g=>$.value=g),ref_key:"form",ref:f,onSubmit:x[2]||(x[2]=z(()=>{},["prevent"]))},{default:a(()=>[k.value?(u(),C(G,{key:0,"model-value":k.value,disabled:"",label:w.$t("dialogs.renameTorrent.oldName")},null,8,["model-value","label"])):K("",!0),t(G,{modelValue:r.newName,"onUpdate:modelValue":x[0]||(x[0]=g=>r.newName=g),ref_key:"field",ref:y,rules:b,autofocus:"",label:w.$t("dialogs.renameTorrent.newName"),onKeydown:ce(D,["enter"])},null,8,["modelValue","label","onKeydown"])]),_:1},8,["modelValue"])]),_:1}),t(Ue,null,{default:a(()=>[t(he),t(A,{color:"error",onClick:h},{default:a(()=>[L(m(w.$t("common.cancel")),1)]),_:1}),t(A,{color:"accent",disabled:!$.value,onClick:D},{default:a(()=>[L(m(w.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),W=-2,R=-1,pa=P({__name:"ShareLimitDialog",props:{guid:{},hashes:{}},setup(V){const e=V,{isOpened:o}=Ee(e.guid),i=_e(),s=le(),y=E(!1),f=E("global"),$=E(!1),r=E(0),b=E(!1),c=E(0),k=E(!1),D=E(0),h=I(()=>f.value!=="enabled");function w(){o.value=!1}async function x(){switch(f.value){case"global":await i.setShareLimit(e.hashes,W,W,W);break;case"disabled":await i.setShareLimit(e.hashes,R,R,R);break;case"enabled":await i.setShareLimit(e.hashes,$.value?r.value:R,b.value?c.value:R,k.value?D.value:R);break}w()}return pe(async()=>{const g=s.getTorrentByHash(e.hashes[0]);if(!g)return w();const v=g.ratio_limit,T=g.seeding_time_limit,F=g.inactive_seeding_time_limit;v===W&&T===W&&F===W?f.value="global":v===R&&T===R&&F===R?f.value="disabled":(f.value="enabled",$.value=v>=0,r.value=$.value?v:0,b.value=T>=0,c.value=b.value?T:0,k.value=F>=0,D.value=k.value?F:0)}),(g,v)=>(u(),C(Me,{modelValue:n(o),"onUpdate:modelValue":v[9]||(v[9]=T=>te(o)?o.value=T:null),"max-width":"500"},{default:a(()=>[t(q,{title:g.$t("dialogs.share_limit.title")},{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,{modelValue:y.value,"onUpdate:modelValue":v[7]||(v[7]=T=>y.value=T),onSubmit:v[8]||(v[8]=z(()=>{},["prevent"])),onKeydown:ce(z(x,["prevent"]),["enter"])},{default:a(()=>[t(vt,{modelValue:f.value,"onUpdate:modelValue":v[0]||(v[0]=T=>f.value=T)},{default:a(()=>[t(Be,{label:g.$t("dialogs.share_limit.global"),value:"global"},null,8,["label"]),t(Be,{label:g.$t("dialogs.share_limit.disabled"),value:"disabled"},null,8,["label"]),t(Be,{label:g.$t("dialogs.share_limit.enabled"),value:"enabled"},null,8,["label"])]),_:1},8,["modelValue"]),t(De,null,{default:a(()=>[t(ue,{cols:"12",class:"d-flex align-center"},{default:a(()=>[p("span",null,[t(Se,{modelValue:$.value,"onUpdate:modelValue":v[1]||(v[1]=T=>$.value=T),disabled:h.value},null,8,["modelValue","disabled"])]),t(G,{modelValue:r.value,"onUpdate:modelValue":v[2]||(v[2]=T=>r.value=T),disabled:h.value||!$.value,density:"compact","hide-details":"",label:g.$t("dialogs.share_limit.ratio_limit")},null,8,["modelValue","disabled","label"])]),_:1}),t(ue,{cols:"12",class:"d-flex align-center"},{default:a(()=>[p("span",null,[t(Se,{modelValue:b.value,"onUpdate:modelValue":v[3]||(v[3]=T=>b.value=T),disabled:h.value},null,8,["modelValue","disabled"])]),t(G,{modelValue:c.value,"onUpdate:modelValue":v[4]||(v[4]=T=>c.value=T),disabled:h.value||!b.value,density:"compact","hide-details":"",label:g.$t("dialogs.share_limit.seeding_time_limit")},null,8,["modelValue","disabled","label"])]),_:1}),t(ue,{cols:"12",class:"d-flex align-center"},{default:a(()=>[p("span",null,[t(Se,{modelValue:k.value,"onUpdate:modelValue":v[5]||(v[5]=T=>k.value=T),disabled:h.value},null,8,["modelValue","disabled"])]),t(G,{modelValue:D.value,"onUpdate:modelValue":v[6]||(v[6]=T=>D.value=T),disabled:h.value||!k.value,density:"compact","hide-details":"",label:g.$t("dialogs.share_limit.inactive_seeding_time_limit")},null,8,["modelValue","disabled","label"])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),t(Ue,null,{default:a(()=>[t(he),t(A,{color:"error",onClick:w},{default:a(()=>[L(m(g.$t("common.cancel")),1)]),_:1}),t(A,{color:"accent",disabled:!y.value,onClick:x},{default:a(()=>[L(m(g.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]))}}),ze=P({__name:"SpeedLimitDialog",props:{guid:{},hashes:{},mode:{}},setup(V){const e=V,{isOpened:o}=Ee(e.guid),i=_e(),s=le(),y=E(!1),f=E(0);function $(){o.value=!1}async function r(){const b=Math.max(0,f.value)*1e3;switch(e.mode){case"download":await i.setDownloadLimit(b,e.hashes);break;case"upload":await i.setUploadLimit(b,e.hashes);break}$()}return pe(async()=>{const b=s.getTorrentByHash(e.hashes[0]);if(!b)return $();switch(e.mode){case"download":f.value=Math.max(0,Math.round(b.dl_limit/1e3));break;case"upload":f.value=Math.max(0,Math.round(b.up_limit/1e3));break}}),(b,c)=>(u(),C(Me,{modelValue:n(o),"onUpdate:modelValue":c[3]||(c[3]=k=>te(o)?o.value=k:null)},{default:a(()=>[t(q,{title:b.$t(`dialogs.speed_limit.${b.mode}`)},{default:a(()=>[t(ve,null,{default:a(()=>[t(Ae,{modelValue:y.value,"onUpdate:modelValue":c[1]||(c[1]=k=>y.value=k),onSubmit:c[2]||(c[2]=z(()=>{},["prevent"])),onKeydown:ce(z(r,["prevent"]),["enter"])},{default:a(()=>[t(G,{modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=k=>f.value=k),type:"number",autofocus:"",clearable:"",label:b.$t("dialogs.speed_limit.label"),"prepend-inner-icon":"mdi-speedometer",suffix:"kB/s",onKeydown:ce(z(r,["prevent"]),["enter"])},null,8,["modelValue","label","onKeydown"])]),_:1},8,["modelValue","onKeydown"])]),_:1}),t(Ue,null,{default:a(()=>[t(he),t(A,{color:"error",onClick:$},{default:a(()=>[L(m(b.$t("common.cancel")),1)]),_:1}),t(A,{color:"accent",disabled:!y.value,onClick:r},{default:a(()=>[L(m(b.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]))}}),fe=V=>(ot("data-v-5de016bc"),V=V(),lt(),V),va={class:"d-flex justify-space-around"},ha=fe(()=>p("span",null,"Resume",-1)),_a=fe(()=>p("span",null,"Force Resume",-1)),fa=fe(()=>p("span",null,"Pause",-1)),ba=fe(()=>p("span",null,"Delete",-1)),ga=P({__name:"RightClickMenu",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(V,{emit:e}){const o=V,i=e,{t:s}=Ie(),y=We(),f=me(),$=Ze(),r=_e(),b=ht(),c=le(),k=I({get:()=>o.modelValue,set:l=>i("update:modelValue",l)}),D=I(()=>f.selectedTorrents.length>1),h=I(()=>f.selectedTorrents),w=I(()=>h.value[0]),x=I(()=>c.getTorrentByHash(w.value)),g=I(()=>f.selectedTorrents.map(c.getTorrentByHash).filter(l=>!!l)),v=I(()=>[{name:""},...r.categories]);async function T(){await c.resumeTorrents(h)}async function F(){await c.forceResumeTorrents(h)}async function O(){await c.pauseTorrents(h)}function ne(){$.createDialog(et,{hashes:[...f.selectedTorrents]})}function be(){$.createDialog(bt,{hashes:[...f.selectedTorrents]})}function se(){$.createDialog(ma,{hash:f.selectedTorrents[0]})}async function j(){await c.recheckTorrents(h)}async function ge(){await r.reannounceTorrents(h)}async function ye(){await r.toggleSeqDl(h)}async function ke(){await r.toggleFLPiecePrio(h)}async function Q(){await r.toggleAutoTmm(h,!x.value?.auto_tmm)}function re(l){return g.value.every(d=>d&&d.tags&&d.tags.includes(l))}async function Te(l){re(l)?await c.removeTorrentTags(h.value,[l]):await c.addTorrentTags(h.value,[l])}async function Y(l){await navigator.clipboard.writeText(l)}function ie(){$.createDialog(ze,{hashes:h.value,mode:"download"})}function de(){$.createDialog(ze,{hashes:h.value,mode:"upload"})}function Ve(){$.createDialog(pa,{hashes:h.value})}async function Z(){h.value.forEach(l=>{c.exportTorrent(l).then(d=>{const S=window.URL.createObjectURL(d),X=document.createElement("a");X.href=S,X.style.opacity="0",X.setAttribute("download",`${l}.torrent`),document.body.appendChild(X),X.click(),document.body.removeChild(X)})})}const _=I(()=>[{text:s("dashboard.right_click.advanced.title"),icon:"mdi-head-cog",children:[{text:s("dashboard.right_click.advanced.change_location"),icon:"mdi-folder",action:be},{text:s("dashboard.right_click.advanced.rename"),icon:"mdi-rename-box",hidden:D.value,action:se},{text:s("dashboard.right_click.advanced.recheck"),icon:"mdi-playlist-check",action:j},{text:s("dashboard.right_click.advanced.reannounce"),icon:"mdi-bullhorn",action:ge},{text:s("dashboard.right_click.advanced.seq_dl"),icon:x.value?.seq_dl?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:ye},{text:s("dashboard.right_click.advanced.f_l_prio"),icon:x.value?.f_l_piece_prio?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:ke},{text:s("dashboard.right_click.advanced.auto_tmm"),icon:x.value?.auto_tmm?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:Q}]},{text:s("dashboard.right_click.priority.title"),icon:"mdi-priority-high",hidden:!b.preferences.queueing_enabled,children:[{text:s("dashboard.right_click.priority.top"),icon:"mdi-priority-high",action:async()=>await c.setTorrentPriority(h.value,"topPrio")},{text:s("dashboard.right_click.priority.increase"),icon:"mdi-arrow-up",action:async()=>await c.setTorrentPriority(h.value,"increasePrio")},{text:s("dashboard.right_click.priority.decrease"),icon:"mdi-arrow-down",action:async()=>await c.setTorrentPriority(h.value,"decreasePrio")},{text:s("dashboard.right_click.priority.bottom"),icon:"mdi-priority-low",action:async()=>await c.setTorrentPriority(h.value,"bottomPrio")}]},{text:s("dashboard.right_click.tags.title"),icon:"mdi-tag",disabled:r.tags.length===0,disabledText:s("dashboard.right_click.tags.disabled_title"),disabledIcon:"mdi-tag-off",children:r.tags.map(l=>({text:l,icon:re(l)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:async()=>await Te(l)}))},{text:s("dashboard.right_click.category.title"),icon:"mdi-label",disabled:r.categories.length===0,disabledText:s("dashboard.right_click.category.disabled_title"),disabledIcon:"mdi-label-off",children:v.value.map(l=>({text:l.name===""?s("dashboard.right_click.category.clear"):l.name,action:async()=>await c.setTorrentCategory(h.value,l.name)}))},{text:s("dashboard.right_click.speed_limit.title"),icon:"mdi-speedometer-slow",children:[{text:s("dashboard.right_click.speed_limit.download"),icon:"mdi-download",action:ie},{text:s("dashboard.right_click.speed_limit.upload"),icon:"mdi-upload",action:de},{text:s("dashboard.right_click.speed_limit.share"),icon:"mdi-account-group",action:Ve}]},{text:s("dashboard.right_click.copy.title"),icon:"mdi-content-copy",hidden:D.value,children:[{text:s("dashboard.right_click.copy.name"),icon:"mdi-alphabetical-variant",action:async()=>x.value&&await Y(x.value.name)},{text:s("dashboard.right_click.copy.hash"),icon:"mdi-pound",action:async()=>await Y(w.value)},{text:s("dashboard.right_click.copy.magnet"),icon:"mdi-magnet",action:async()=>x.value&&await Y(x.value.magnet)}]},{text:s("dashboard.right_click.export",f.selectedTorrents.length),icon:D.value?"mdi-download-multiple":"mdi-download",action:Z},{text:s("dashboard.right_click.info"),icon:"mdi-information",hidden:D.value,action:()=>y.push({name:"torrentDetail",params:{hash:w.value}})}]);return(l,d)=>k.value?(u(),C(Qe,{key:0,modelValue:k.value,"onUpdate:modelValue":d[0]||(d[0]=S=>k.value=S),activator:"parent","close-on-content-click":!0,transition:"slide-y-transition","scroll-strategy":"none"},{default:a(()=>[t(Pe,null,{default:a(()=>[t(ee,null,{default:a(()=>[p("div",va,[t(H,{location:"top"},{activator:a(({props:S})=>[t(A,N({density:"compact",variant:"plain",icon:"mdi-play"},S,{onClick:T}),null,16)]),default:a(()=>[ha]),_:1}),t(H,{location:"top"},{activator:a(({props:S})=>[t(A,N({density:"compact",variant:"plain",icon:"mdi-fast-forward"},S,{onClick:F}),null,16)]),default:a(()=>[_a]),_:1}),t(H,{location:"top"},{activator:a(({props:S})=>[t(A,N({density:"compact",variant:"plain",icon:"mdi-pause"},S,{onClick:O}),null,16)]),default:a(()=>[fa]),_:1}),t(H,{location:"top"},{activator:a(({props:S})=>[t(A,N({color:"red",density:"compact",variant:"plain",icon:"mdi-delete-forever"},S,{onClick:ne}),null,16)]),default:a(()=>[ba]),_:1})])]),_:1}),(u(!0),B(J,null,ae(_.value,S=>(u(),C(ca,Ge(je(S)),null,16))),256))]),_:1})]),_:1},8,["modelValue"])):K("",!0)}});const ya=Le(ga,[["__scopeId","data-v-5de016bc"]]),ka={class:"pt-4 px-1 px-sm-5"},Ta={class:"pa-0",style:{width:"10em"}},Va={class:"text-uppercase",style:{float:"right","font-size":"0.8em"}},$a={class:"text-grey"},wa={key:0,class:"mt-5 text-xs-center"},xa={class:"text-grey"},Ba={key:1},Sa={class:"d-flex align-center"},Ma=P({__name:"Dashboard",setup(V){const{t:e}=Ie(),o=We(),i=kt(),{currentPage:s,isSelectionMultiple:y,selectedTorrents:f,torrentCountString:$}=Ne(me()),r=me(),b=Ze(),c=_e(),k=le(),{filteredTorrents:D,sortOptions:h}=Ne(k),w=oe(),x=[{value:"added_on",title:e("dashboard.sortBy.added_on")},{value:"amount_left",title:e("dashboard.sortBy.amount_left")},{value:"auto_tmm",title:e("dashboard.sortBy.auto_tmm")},{value:"availability",title:e("dashboard.sortBy.availability")},{value:"avg_download_speed",title:e("dashboard.sortBy.avg_download_speed")},{value:"avg_upload_speed",title:e("dashboard.sortBy.avg_upload_speed")},{value:"category",title:e("dashboard.sortBy.category")},{value:"completed",title:e("dashboard.sortBy.completed")},{value:"completion_on",title:e("dashboard.sortBy.completion_on")},{value:"content_path",title:e("dashboard.sortBy.content_path")},{value:"dl_limit",title:e("dashboard.sortBy.dl_limit")},{value:"dlspeed",title:e("dashboard.sortBy.dlspeed")},{value:"download_path",title:e("dashboard.sortBy.download_path")},{value:"downloaded",title:e("dashboard.sortBy.downloaded")},{value:"downloaded_session",title:e("dashboard.sortBy.downloaded_session")},{value:"eta",title:e("dashboard.sortBy.eta")},{value:"f_l_piece_prio",title:e("dashboard.sortBy.f_l_piece_prio")},{value:"force_start",title:e("dashboard.sortBy.force_start")},{value:"globalSpeed",title:e("dashboard.sortBy.globalSpeed")},{value:"globalVolume",title:e("dashboard.sortBy.globalVolume")},{value:"hash",title:e("dashboard.sortBy.hash")},{value:"infohash_v1",title:e("dashboard.sortBy.infohash_v1")},{value:"infohash_v2",title:e("dashboard.sortBy.infohash_v2")},{value:"last_activity",title:e("dashboard.sortBy.last_activity")},{value:"magnet_uri",title:e("dashboard.sortBy.magnet_uri")},{value:"max_ratio",title:e("dashboard.sortBy.max_ratio")},{value:"max_seeding_time",title:e("dashboard.sortBy.max_seeding_time")},{value:"name",title:e("dashboard.sortBy.name")},{value:"num_complete",title:e("dashboard.sortBy.num_complete")},{value:"num_incomplete",title:e("dashboard.sortBy.num_incomplete")},{value:"num_leechs",title:e("dashboard.sortBy.num_leechs")},{value:"num_seeds",title:e("dashboard.sortBy.num_seeds")},{value:"priority",title:e("dashboard.sortBy.priority")},{value:"progress",title:e("dashboard.sortBy.progress")},{value:"ratio",title:e("dashboard.sortBy.ratio")},{value:"ratio_limit",title:e("dashboard.sortBy.ratio_limit")},{value:"save_path",title:e("dashboard.sortBy.save_path")},{value:"seeding_time",title:e("dashboard.sortBy.seeding_time")},{value:"seeding_time_limit",title:e("dashboard.sortBy.seeding_time_limit")},{value:"seen_complete",title:e("dashboard.sortBy.seen_complete")},{value:"seq_dl",title:e("dashboard.sortBy.seq_dl")},{value:"size",title:e("dashboard.sortBy.size")},{value:"state",title:e("dashboard.sortBy.state")},{value:"super_seeding",title:e("dashboard.sortBy.super_seeding")},{value:"tags",title:e("dashboard.sortBy.tags")},{value:"time_active",title:e("dashboard.sortBy.time_active")},{value:"total_size",title:e("dashboard.sortBy.total_size")},{value:"tracker",title:e("dashboard.sortBy.tracker")},{value:"trackers_count",title:e("dashboard.sortBy.trackers_count")},{value:"up_limit",title:e("dashboard.sortBy.up_limit")},{value:"uploaded",title:e("dashboard.sortBy.uploaded")},{value:"uploaded_session",title:e("dashboard.sortBy.uploaded_session")},{value:"upspeed",title:e("dashboard.sortBy.upspeed")}].sort((_,l)=>_.title.localeCompare(l.title));x.splice(0,0,{value:"",title:e("dashboard.sortBy.default")});const g=E(!1),v=Ye({isVisible:!1,offset:[0,0]}),T=I({get:()=>k.textFilter,set:yt(_=>{k.textFilter=_??""},300)}),{paginatedResults:F,currentPage:O,pageCount:ne}=gt(D,w.paginationSize,s),be=I(()=>!!k.textFilter&&k.textFilter.length>0),se=I(()=>D.value.length<=f.value.length);function j(_){g.value=_??!g.value,g.value&&Fe(()=>{document.getElementById("searchInput")?.focus()})}function ge(_){r.toggleSelect(_)}function ye(_){y.value||o.push({name:"torrentDetail",params:{hash:_}})}function ke(){k.textFilter=""}function Q(){window.scrollTo({top:0,behavior:"smooth"})}function re(){y.value&&r.unselectAllTorrents(),y.value=!y.value}function Te(){se.value?r.unselectAllTorrents():r.selectTorrents(...D.value.map(_=>_.hash))}async function Y(_,l){_.preventDefault(),v.isVisible&&(v.isVisible=!1,await Fe()),v.isVisible=!0,v.offset=[_.pageX,_.pageY],y.value?f.value.length===0&&r.selectTorrent(l.hash):(r.unselectAllTorrents(),r.selectTorrent(l.hash))}nt(()=>v.isVisible,_=>{!_&&!y.value&&r.unselectAllTorrents()});function ie(_){if(b.hasActiveDialog)return!1;const l=_.target;if(Ce(_)&&_.key==="a"&&l.tagName!=="INPUT")return r.unselectAllTorrents(),r.selectTorrents(...D.value.map(d=>d.hash)),_.preventDefault(),!0;if(Ce(_)&&_.key==="f"){const d=document.getElementById("searchInput");if(document.activeElement!==d)return j(!0),_.preventDefault(),!0}if(_.key==="Escape"){const d=document.getElementById("searchInput");return document.activeElement===d||g.value?j(!1):(y.value=!1,r.unselectAllTorrents()),_.preventDefault(),!0}if(_.key==="Delete")return f.value.length===0?void 0:(b.createDialog(et,{hashes:f.value}),_.preventDefault(),!0);if(_.key==="/"){const d=document.getElementById("searchInput");return document.activeElement!==d&&!g.value&&(o.push({name:"searchEngine"}),_.preventDefault()),!0}}pe(async()=>{await c.fetchCategories(),await c.fetchTags(),j(be.value)}),Xe(()=>{document.addEventListener("keydown",ie),y.value=!1,Q()}),st(()=>{document.removeEventListener("keydown",ie)});const de=E();function Ve(_,l){de.value=setTimeout(()=>{Y(_,l)},500)}function Z(){clearTimeout(de.value)}return(_,l)=>(u(),B(J,null,[p("div",ka,[t(De,{class:"ma-0 pa-0 mb-2"},{default:a(()=>[t(Ke,null,{default:a(()=>[$e(t(q,{color:"transparent"},{default:a(()=>[t(G,{id:"searchInput",modelValue:T.value,"onUpdate:modelValue":l[0]||(l[0]=d=>T.value=d),label:n(e)("dashboard.searchInputLabel"),clearable:"",density:"compact","hide-details":"","prepend-inner-icon":"mdi-magnify",rounded:"pill","single-line":"",style:{width:"200px"},variant:"solo","onClick:clear":l[1]||(l[1]=d=>ke())},null,8,["modelValue","label"])]),_:1},512),[[we,g.value]])]),_:1}),t(H,{text:n(e)("dashboard.toggleSearchFilter"),location:"top"},{activator:a(({props:d})=>[t(A,N({icon:g.value?"mdi-chevron-left-circle":"mdi-text-box-search"},d,{variant:"plain",onClick:l[2]||(l[2]=S=>j())}),null,16,["icon"])]),_:1},8,["text"]),t(H,{text:n(e)("dashboard.toggleSelectMode"),location:"top"},{activator:a(({props:d})=>[t(A,N({icon:n(y)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline"},d,{variant:"plain",onClick:re}),null,16,["icon"])]),_:1},8,["text"]),t(H,{text:n(e)("dashboard.toggleSortOrder"),location:"top"},{activator:a(({props:d})=>[t(A,N({icon:n(h).reverseOrder?"mdi-arrow-up-thin":"mdi-arrow-down-thin"},d,{variant:"plain",onClick:l[3]||(l[3]=S=>n(h).reverseOrder=!n(h).reverseOrder)}),null,16,["icon"])]),_:1},8,["text"]),p("div",Ta,[t(_t,{modelValue:n(h).sortBy,"onUpdate:modelValue":l[4]||(l[4]=d=>n(h).sortBy=d),items:n(x),label:n(e)("dashboard.sortLabel"),"auto-select-first":"",density:"compact","hide-details":"",variant:"solo-filled"},null,8,["modelValue","items","label"])]),t(ue,{class:"align-center justify-center"},{default:a(()=>[p("span",Va,m(n($)),1)]),_:1})]),_:1}),t(De,{class:"ma-0 pa-0"},{default:a(()=>[t(ft,null,{default:a(()=>[$e(t(q,{color:"transparent"},{default:a(()=>[t(H,{text:n(e)("common.selectAll"),location:"bottom"},{activator:a(({props:d})=>[t(A,N({icon:se.value?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",class:"text-grey",color:"transparent",style:{left:"-8px"}},d,{onClick:Te}),null,16,["icon"])]),_:1},8,["text"]),p("span",$a,m(n(e)("dashboard.selectAll")),1)]),_:1},512),[[we,n(y)]])]),_:1})]),_:1}),n(D).length===0?(u(),B("div",wa,[p("p",xa,m(n(e)("common.emptyList")),1)])):(u(),B("div",Ba,[t(Pe,{id:"torrentList",class:"pa-0",color:"transparent"},{default:a(()=>[n(w).isPaginationOnTop&&!n(w).isInfiniteScrollActive?(u(),C(ee,{key:0},{default:a(()=>[t(He,{modelValue:n(O),"onUpdate:modelValue":l[5]||(l[5]=d=>te(O)?O.value=d:null),length:n(ne),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",onInput:Q},null,8,["modelValue","length"])]),_:1})):K("",!0),(u(!0),B(J,null,ae(n(F),d=>(u(),C(ee,{id:`torrent-${d.hash}`,class:qe([n(i).mobile?"mb-2":"mb-4","pa-0"]),onContextmenu:S=>Y(S,d),onTouchcancel:Z,onTouchend:Z,onTouchmove:Z,onTouchstart:S=>Ve(S,d),onDblclick:z(S=>ye(d.hash),["prevent"])},{default:a(()=>[p("div",Sa,[t(Ke,null,{default:a(()=>[$e(t(q,{class:"mr-3",color:"transparent"},{default:a(()=>[t(A,{icon:n(r).isTorrentInSelection(d.hash)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",color:"transparent",variant:"flat",onClick:S=>ge(d.hash)},null,8,["icon","onClick"])]),_:2},1536),[[we,n(y)]])]),_:2},1024),t(ra,{torrent:d},null,8,["torrent"])])]),_:2},1032,["id","class","onContextmenu","onTouchstart","onDblclick"]))),256)),!n(w).isPaginationOnTop&&!n(w).isInfiniteScrollActive?(u(),C(ee,{key:1},{default:a(()=>[t(He,{modelValue:n(O),"onUpdate:modelValue":l[6]||(l[6]=d=>te(O)?O.value=d:null),length:n(ne),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",onInput:Q},null,8,["modelValue","length"])]),_:1})):K("",!0)]),_:1})]))]),p("div",{style:rt(`position: absolute; left: ${v.offset[0]}px; top: ${v.offset[1]}px;`)},[t(ya,{modelValue:v.isVisible,"onUpdate:modelValue":l[7]||(l[7]=d=>v.isVisible=d)},null,8,["modelValue"])],4)],64))}});export{Ma as default};
