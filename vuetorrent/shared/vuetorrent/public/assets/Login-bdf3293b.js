import{e as b,K as v,$ as h,a9 as q,r as x,b as C,x as k,w as S,a1 as K,a2 as A,a3 as s,k as e,W as m,Y as p,u as l,X as f,an as _,a8 as y}from"./vue-15fc29be.js";import{_ as T}from"./PasswordField.vue_vue_type_script_setup_true_lang-fd7144c7.js";import{aN as B,aO as F,h as N,aG as O,i as U,s as I,t as L,l as M,v as R,w as $,j}from"./index-c5d19115.js";import"./faker-c43f92d4.js";import"./vuetify-47497518.js";const z=b({__name:"Login",setup(D){const{t:a}=v(),w=h(),o=q(),u=B(),r=x({username:"",password:""}),c=C(!1),V={username:[d=>!!d||a("login.rules.username_required")],password:[d=>!!d||a("login.rules.password_required")]},i=async()=>{c.value&&(await u.login(r.username,r.password),u.isAuthenticated?(y.success(a("login.success")),g()):y.error(a("login.error")))},g=()=>{o.query.redirect?w.push(o.query.redirect):w.push({name:"dashboard"})};return k(async()=>{o.query.username&&o.query.password&&await u.login(o.query.username,o.query.password)}),S(()=>{u.isAuthenticated&&g()}),(d,t)=>(K(),A(F,{class:"mt-16"},{default:s(()=>[e(j,{class:"mx-auto",rounded:"lg","min-width":"250"},{default:s(()=>[e(N,null,{default:s(()=>[m(p(l(a)("login.title")),1)]),_:1}),e(O,null,{default:s(()=>[m(p(l(a)("login.subtitle")),1)]),_:1}),e(U,null,{default:s(()=>[e(I,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=n=>c.value=n),onSubmit:f(i,["prevent"])},{default:s(()=>[e(L,{modelValue:r.username,"onUpdate:modelValue":t[0]||(t[0]=n=>r.username=n),label:l(a)("login.username"),autofocus:"",rules:V.username,onKeydown:_(f(i,["prevent"]),["enter"]),variant:"outlined"},{prepend:s(()=>[e(M,{color:"accent",icon:"mdi-account"})]),_:1},8,["modelValue","label","rules","onKeydown"]),e(T,{modelValue:r.password,"onUpdate:modelValue":t[1]||(t[1]=n=>r.password=n),label:l(a)("login.password"),rules:V.password,"prepend-icon":"mdi-lock",onKeydown:_(f(i,["prevent"]),["enter"]),variant:"outlined"},null,8,["modelValue","label","rules","onKeydown"])]),_:1},8,["modelValue","onSubmit"])]),_:1}),e(R,null,{default:s(()=>[e($,{variant:"elevated",block:"",color:"accent",onClick:i},{default:s(()=>[m(p(l(a)("login.submit")),1)]),_:1})]),_:1})]),_:1})]),_:1}))}});export{z as default};
