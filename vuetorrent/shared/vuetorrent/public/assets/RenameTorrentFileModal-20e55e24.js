import{M as i}from"./Modal-f5e0cc6c.js";import{G as r,Q as s,s as m,t as c,V as d,v as _,z as u,I as o,J as p,K as h,M as f,a as x,L as w,E as g,x as l}from"./index-f9553022.js";import{F as N}from"./FullScreenModal-b7264cb2.js";import{d as v}from"./vue-b220ace6.js";import{_ as C}from"./VDialog-a94128dd.js";const y=v({name:"RenameTorrentFileModal",mixins:[i,N],props:{hash:String,isFolder:Boolean,oldName:String},data(){return{newName:"",mdiFile:r}},computed:{torrentHash(){return this.hash}},created(){this.newName=this.oldName},mounted(){const a=document.getElementById("newPathInput"),e=this.newName.lastIndexOf("/"),t=this.newName.lastIndexOf(".");a&&a.setSelectionRange(e+1,t==-1?this.newName.length:t)},methods:{async rename(){let a;this.isFolder?a=s.renameFolder(this.torrentHash,this.oldName,this.newName):a=s.renameFile(this.torrentHash,this.oldName,this.newName),a.then(()=>this.close(),()=>this.$toast.error(this.$t("modals.rename.errorConflict")))},close(){this.dialog=!1}}});var F=function(){var e=this,t=e._self._c;return e._self._setupProxy,t(C,{attrs:{scrollable:"","max-width":"750px","content-class":e.phoneLayout?"rounded-0":"rounded-form",fullscreen:e.phoneLayout},on:{keydown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.preventDefault(),e.rename.apply(null,arguments))}},model:{value:e.dialog,callback:function(n){e.dialog=n},expression:"dialog"}},[t(c,[t(d,{staticClass:"pa-0"},[t(_,{staticClass:"ma-4 primarytext--text"},[t("h3",[e._v(e._s(e.$t("modals.rename.title")))])])],1),t(u,[t(o,[t(p,[t(h,{staticClass:"caption"},[e._v(e._s(e.$t("modals.rename.oldPath")))]),t(f,[e._v(e._s(e.oldName))])],1)],1),t(o,[t(x,{attrs:{id:"newPathInput",label:e.$t("modals.rename.newPath"),autofocus:"","prepend-inner-icon":e.mdiFile},model:{value:e.newName,callback:function(n){e.newName=n},expression:"newName"}})],1)],1),t(w),t(g,{staticClass:"justify-end"},[t(l,{staticClass:"accent white--text elevation-0 px-4",on:{click:e.rename}},[e._v(" "+e._s(e.$t("save"))+" ")]),t(l,{staticClass:"error white--text elevation-0 px-4",on:{click:e.close}},[e._v(" "+e._s(e.$t("cancel"))+" ")])],1)],1)],1)},I=[],k=m(y,F,I,!1,null,null,null,null);const P=k.exports;export{P as default};
