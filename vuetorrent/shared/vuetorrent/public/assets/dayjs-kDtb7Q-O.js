import{h as K,f as W,d as z,i as Z,j as ie,k as de,r as ue,b as le,l as he,m as ce,n as me,V as fe,aK as pe,aL as ye,o as ve,g as U,p as $e,q as ge}from"./index-z3dneNLh.js";import{g as L,ae as Me,a3 as $,a4 as C,a5 as h,ab as be,W as E,Z as N,aa as F,a8 as O,m as k,a9 as G,af as J,ag as Q,F as X,av as ke,aw as Ve,a6 as Te,K as we,d as x,r as Se,c as q,N as De,u as A,Y as Ce,ap as Pe,D as Ye,at as ee,ad as te}from"./vue-7zd71vkt.js";import{d as se}from"./dayjs.min-cr8_29QK.js";const _e={class:"d-flex"},He={key:2},Be={key:3},Ne=L({__name:"RightClickMenuEntry",props:{text:{},icon:{},action:{type:Function},hidden:{type:Boolean},disabled:{type:Boolean},disabledText:{},disabledIcon:{},children:{}},setup(P){const c=P,a=()=>{c.action&&c.action()};return(s,m)=>{const f=Me("RightClickMenuEntry",!0);return s.hidden?F("",!0):($(),C(ie,{key:0,class:"px-3",disabled:s.disabled,onClick:a},{default:h(()=>[be("div",_e,[s.disabled&&s.disabledIcon?($(),C(K,{key:0,class:"mr-2"},{default:h(()=>[E(N(s.disabledIcon),1)]),_:1})):s.icon?($(),C(K,{key:1,class:"mr-2"},{default:h(()=>[E(N(s.icon),1)]),_:1})):F("",!0),s.disabled&&s.disabledText?($(),O("span",He,N(s.disabledText),1)):($(),O("span",Be,N(s.text),1)),k(W),!s.disabled&&s.children?($(),C(K,{key:4},{default:h(()=>[E("mdi-chevron-right")]),_:1})):F("",!0)]),s.children?($(),C(z,{key:0,activator:"parent","open-on-hover":"","open-on-click":"","close-delay":"10","open-delay":"0",location:"right"},{default:h(()=>[k(Z,null,{default:h(()=>[($(!0),O(X,null,G(s.children,V=>($(),C(f,J(Q(V)),null,16))),256))]),_:1})]),_:1})):F("",!0)]),_:1},8,["disabled"]))}}}),Ae=L({__name:"RightClickMenu",props:ke({menuData:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(P){const c=Ve(P,"modelValue");return(a,s)=>c.value?($(),C(z,{key:0,modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=m=>c.value=m),activator:"parent","close-on-content-click":!0,transition:"slide-y-transition","scroll-strategy":"none"},{default:h(()=>[k(Z,null,{default:h(()=>[Te(a.$slots,"top"),($(!0),O(X,null,G(a.menuData,m=>($(),C(Ne,J(Q(m)),null,16))),256))]),_:3})]),_:3},8,["modelValue"])):F("",!0)}}),Le=L({__name:"MoveTorrentDialog",props:{guid:{},hashes:{},mode:{}},setup(P){const c=P,{isOpened:a}=de(c.guid),{t:s}=we(),m=ue(),f=le(),V=x(),Y=x(),_=x(!1),r=Se({newPath:""}),y=[i=>!!i||s("dialogs.moveTorrent.required")],w=q(()=>c.hashes.map(f.getTorrentByHash)),g=q(()=>{switch(c.mode){case"dl":return w.value[0]?.download_path;case"save":return w.value[0]?.savePath}});async function S(){await V.value?.validate(),_.value&&(await m.toggleAutoTmm(c.hashes,!1),await f.moveTorrents(c.mode,c.hashes,r.newPath),Y.value?.saveValueToHistory(),b())}const b=()=>{a.value=!1};return De(()=>{r.newPath=g.value||""}),(i,p)=>($(),C(ge,{modelValue:A(a),"onUpdate:modelValue":p[3]||(p[3]=l=>Ye(a)?a.value=l:null)},{default:h(()=>[k($e,null,{default:h(()=>[k(he,null,{default:h(()=>[E(N(i.$t(`dialogs.moveTorrent.${i.mode}.title`)),1)]),_:1}),k(ce,null,{default:h(()=>[k(A(me),{modelValue:_.value,"onUpdate:modelValue":p[1]||(p[1]=l=>_.value=l),ref_key:"form",ref:V,onSubmit:p[2]||(p[2]=Ce(()=>{},["prevent"]))},{default:h(()=>[g.value?($(),C(fe,{key:0,"model-value":g.value,disabled:"",label:i.$t("dialogs.moveTorrent.oldPath")},null,8,["model-value","label"])):F("",!0),k(pe,{modelValue:r.newPath,"onUpdate:modelValue":p[0]||(p[0]=l=>r.newPath=l),historyKey:A(ye).TORRENT_PATH,ref_key:"field",ref:Y,rules:y,autofocus:"",label:i.$t("dialogs.moveTorrent.newPath"),onKeydown:Pe(S,["enter"])},null,8,["modelValue","historyKey","label"])]),_:1},8,["modelValue"])]),_:1}),k(ve,null,{default:h(()=>[k(W),k(U,{color:"error",onClick:b},{default:h(()=>[E(N(i.$t("common.cancel")),1)]),_:1}),k(U,{color:"accent",disabled:!_.value,onClick:S},{default:h(()=>[E(N(i.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});var ne={exports:{}};(function(P,c){(function(a,s){P.exports=s()})(ee,function(){var a,s,m=1e3,f=6e4,V=36e5,Y=864e5,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,r=31536e6,y=2628e6,w=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,g={years:r,months:y,days:Y,hours:V,minutes:f,seconds:m,milliseconds:1,weeks:6048e5},S=function(n){return n instanceof B},b=function(n,t,e){return new B(n,e,t.$l)},i=function(n){return s.p(n)+"s"},p=function(n){return n<0},l=function(n){return p(n)?Math.ceil(n):Math.floor(n)},I=function(n){return Math.abs(n)},H=function(n,t){return n?p(n)?{negative:!0,format:""+I(n)+t}:{negative:!1,format:""+n+t}:{negative:!1,format:""}},B=function(){function n(e,o,u){var d=this;if(this.$d={},this.$l=u,e===void 0&&(this.$ms=0,this.parseFromMilliseconds()),o)return b(e*g[i(o)],this);if(typeof e=="number")return this.$ms=e,this.parseFromMilliseconds(),this;if(typeof e=="object")return Object.keys(e).forEach(function(D){d.$d[i(D)]=e[D]}),this.calMilliseconds(),this;if(typeof e=="string"){var v=e.match(w);if(v){var M=v.slice(2).map(function(D){return D!=null?Number(D):0});return this.$d.years=M[0],this.$d.months=M[1],this.$d.weeks=M[2],this.$d.days=M[3],this.$d.hours=M[4],this.$d.minutes=M[5],this.$d.seconds=M[6],this.calMilliseconds(),this}}return this}var t=n.prototype;return t.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce(function(o,u){return o+(e.$d[u]||0)*g[u]},0)},t.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=l(e/r),e%=r,this.$d.months=l(e/y),e%=y,this.$d.days=l(e/Y),e%=Y,this.$d.hours=l(e/V),e%=V,this.$d.minutes=l(e/f),e%=f,this.$d.seconds=l(e/m),e%=m,this.$d.milliseconds=e},t.toISOString=function(){var e=H(this.$d.years,"Y"),o=H(this.$d.months,"M"),u=+this.$d.days||0;this.$d.weeks&&(u+=7*this.$d.weeks);var d=H(u,"D"),v=H(this.$d.hours,"H"),M=H(this.$d.minutes,"M"),D=this.$d.seconds||0;this.$d.milliseconds&&(D+=this.$d.milliseconds/1e3,D=Math.round(1e3*D)/1e3);var R=H(D,"S"),re=e.negative||o.negative||d.negative||v.negative||M.negative||R.negative,ae=v.format||M.format||R.format?"T":"",j=(re?"-":"")+"P"+e.format+o.format+d.format+ae+v.format+M.format+R.format;return j==="P"||j==="-P"?"P0D":j},t.toJSON=function(){return this.toISOString()},t.format=function(e){var o=e||"YYYY-MM-DDTHH:mm:ss",u={Y:this.$d.years,YY:s.s(this.$d.years,2,"0"),YYYY:s.s(this.$d.years,4,"0"),M:this.$d.months,MM:s.s(this.$d.months,2,"0"),D:this.$d.days,DD:s.s(this.$d.days,2,"0"),H:this.$d.hours,HH:s.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:s.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:s.s(this.$d.seconds,2,"0"),SSS:s.s(this.$d.milliseconds,3,"0")};return o.replace(_,function(d,v){return v||String(u[d])})},t.as=function(e){return this.$ms/g[i(e)]},t.get=function(e){var o=this.$ms,u=i(e);return u==="milliseconds"?o%=1e3:o=u==="weeks"?l(o/g[u]):this.$d[u],o||0},t.add=function(e,o,u){var d;return d=o?e*g[i(o)]:S(e)?e.$ms:b(e,this).$ms,b(this.$ms+d*(u?-1:1),this)},t.subtract=function(e,o){return this.add(e,o,!0)},t.locale=function(e){var o=this.clone();return o.$l=e,o},t.clone=function(){return b(this.$ms,this)},t.humanize=function(e){return a().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},t.valueOf=function(){return this.asMilliseconds()},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},n}(),T=function(n,t,e){return n.add(t.years()*e,"y").add(t.months()*e,"M").add(t.days()*e,"d").add(t.hours()*e,"h").add(t.minutes()*e,"m").add(t.seconds()*e,"s").add(t.milliseconds()*e,"ms")};return function(n,t,e){a=e,s=e().$utils(),e.duration=function(d,v){var M=e.locale();return b(d,{$l:M},v)},e.isDuration=S;var o=t.prototype.add,u=t.prototype.subtract;t.prototype.add=function(d,v){return S(d)?T(this,d,1):o.bind(this)(d,v)},t.prototype.subtract=function(d,v){return S(d)?T(this,d,-1):u.bind(this)(d,v)}}})})(ne);var Fe=ne.exports;const Ee=te(Fe);var oe={exports:{}};(function(P,c){(function(a,s){P.exports=s()})(ee,function(){return function(a,s,m){a=a||{};var f=s.prototype,V={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Y(r,y,w,g){return f.fromToBase(r,y,w,g)}m.en.relativeTime=V,f.fromToBase=function(r,y,w,g,S){for(var b,i,p,l=w.$locale().relativeTime||V,I=a.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],H=I.length,B=0;B<H;B+=1){var T=I[B];T.d&&(b=g?m(r).diff(w,T.d,!0):w.diff(r,T.d,!0));var n=(a.rounding||Math.round)(Math.abs(b));if(p=b>0,n<=T.r||!T.r){n<=1&&B>0&&(T=I[B-1]);var t=l[T.l];S&&(n=S(""+n)),i=typeof t=="string"?t.replace("%d",n):t(n,y,T.l,p);break}}if(y)return i;var e=p?l.future:l.past;return typeof e=="function"?e(i):e.replace("%s",i)},f.to=function(r,y){return Y(r,y,this,!0)},f.from=function(r,y){return Y(r,y,this)};var _=function(r){return r.$u?m.utc():m()};f.toNow=function(r){return this.to(_(this),r)},f.fromNow=function(r){return this.from(_(this),r)}}})})(oe);var Ie=oe.exports;const Oe=te(Ie),Re={thresholds:[{l:"s",r:1},{l:"m",r:1},{l:"mm",r:59,d:"minute"},{l:"h",r:1},{l:"hh",r:23,d:"hour"},{l:"d",r:1},{l:"dd",r:29,d:"day"},{l:"M",r:1},{l:"MM",r:11,d:"month"},{l:"y",r:1},{l:"yy",d:"year"}],rounding:Math.floor};se.extend(Ee);se.extend(Oe,Re);export{Le as _,Ae as a};
