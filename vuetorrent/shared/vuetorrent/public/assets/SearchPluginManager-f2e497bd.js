import{d as _,a as p}from"./vue-b220ace6.js";import{F as m}from"./FullScreenModal-b7264cb2.js";import{M as h}from"./Modal-f5e0cc6c.js";import{U as f,Q as n,s as P,t as o,V as u,v,D as i,x as s,z as c,a as x,E as r,y as k,L as y}from"./index-f9553022.js";import{_ as g}from"./VDialog-a94128dd.js";import{_ as b}from"./VDataTable-b2bb81b5.js";const w=_({name:"SearchPluginManager",mixins:[h,m],data(){return{headers:[{text:"Name",value:"fullName"},{text:"Version",value:"version"},{text:"URL",value:"url"},{text:"Actions",value:"actions"}],enabledPlugins:[],loading:!1,installDialog:!1,installInput:"",mdiDelete:f}},computed:{...p(["searchPlugins"])},mounted(){this.loading=!0,this.updatePluginList(),this.loading=!1},methods:{async updatePluginList(){await this.$store.dispatch("FETCH_SEARCH_PLUGINS"),this.enabledPlugins=this.searchPlugins.filter(e=>e.enabled)},async onTogglePlugin(e){this.loading=!0,await n.enableSearchPlugin([e.item.name],e.value),this.loading=!1},async onToggleAllPlugins(e){this.loading=!0,await n.enableSearchPlugin(e.items.map(a=>a.name),e.value),this.loading=!1},async installNewPlugin(){this.loading=!0,this.closeInstallDialog(),await n.installSearchPlugin([this.installInput]),this.installInput="",await this.updatePluginList(),this.loading=!1},async checkForPluginUpdates(){this.loading=!0,await n.updateSearchPlugins(),await this.updatePluginList(),this.loading=!1},async uninstallPlugin(e){this.loading=!0,await n.uninstallSearchPlugin([e.name]),await this.updatePluginList(),this.loading=!1},close(){this.dialog=!1},closeInstallDialog(){this.installDialog=!1}}});var S=function(){var a=this,l=a._self._c;return a._self._setupProxy,l(g,{attrs:{scrollable:"",width:a.dialogWidth,fullscreen:a.phoneLayout},on:{keydown:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.preventDefault(),a.close.apply(null,arguments))}},model:{value:a.dialog,callback:function(t){a.dialog=t},expression:"dialog"}},[l(o,[l(u,{staticClass:"pa-0"},[l(v,{staticClass:"ma-4 primarytext--text"},[l("h3",[a._v(a._s(a.$t("modals.searchPluginManager.title")))])]),l(i),l(g,{attrs:{"max-width":"500px"},scopedSlots:a._u([{key:"activator",fn:function({on:t,attrs:d}){return[l(s,a._g({staticClass:"primary white--text elevation-0 px-4 ma-4"},t),[a._v("Install")])]}}]),model:{value:a.installDialog,callback:function(t){a.installDialog=t},expression:"installDialog"}},[l(o,[l(u,[l("h5",[a._v(a._s(a.$t("modals.searchPluginManager.install.title")))])]),l(c,[l(x,{attrs:{label:a.$t("modals.searchPluginManager.install.label"),autofocus:"",required:""},model:{value:a.installInput,callback:function(t){a.installInput=t},expression:"installInput"}})],1),l(r,[l(i),l(s,{attrs:{color:"accent darken-1",text:""},on:{click:a.closeInstallDialog}},[a._v(a._s(a.$t("cancel")))]),l(s,{attrs:{color:"accent darken-1",text:""},on:{click:a.installNewPlugin}},[a._v(a._s(a.$t("ok")))])],1)],1)],1)],1),l(c,[l(b,{staticStyle:{width:"100%"},attrs:{"item-key":"name",headers:a.headers,items:a.searchPlugins,"disable-pagination":"","hide-default-footer":"","show-select":"","sort-by":"name",loading:a.loading},on:{"item-selected":a.onTogglePlugin,"toggle-select-all":a.onToggleAllPlugins},scopedSlots:a._u([{key:"item.actions",fn:function({item:t}){return[l(k,{attrs:{color:"red",small:""},on:{click:function(d){return a.uninstallPlugin(t)}}},[a._v(" "+a._s(a.mdiDelete)+" ")])]}}]),model:{value:a.enabledPlugins,callback:function(t){a.enabledPlugins=t},expression:"enabledPlugins"}})],1),l(y),l(r,[l(i),l(s,{staticClass:"white--text elevation-0 px-4",on:{click:a.checkForPluginUpdates}},[a._v(" "+a._s(a.$t("modals.searchPluginManager.checkForUpdates"))+" ")]),l(s,{staticClass:"accent white--text elevation-0 px-4",on:{click:a.close}},[a._v(" "+a._s(a.$t("close"))+" ")])],1)],1)],1)},C=[],D=P(w,S,C,!1,null,null,null,null);const V=D.exports;export{V as default};
