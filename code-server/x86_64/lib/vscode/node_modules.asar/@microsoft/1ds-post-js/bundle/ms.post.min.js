/*!
 * 1DS JS SDK POST plugin, 3.2.3
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
var n=this,e=function(s){"use strict";var l="function",Q="object",J="undefined",a="prototype",f="hasOwnProperty",t=Object,n=t[a],C=t.assign,e=(t.create,t.defineProperty),v=n[f],r=null;function T(n){return void 0===n&&(n=!0),r&&n||(typeof globalThis!==J&&globalThis&&(r=globalThis),typeof self!==J&&self&&(r=self),typeof window!==J&&window&&(r=window),typeof global!==J&&global&&(r=global)),r}function _(n){throw new TypeError(n)}(T()||{}).Symbol,(T()||{}).Reflect;var S=function(n,e){return(S=t.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e[f](t)&&(n[t]=e[t])})(n,e)},E="constructor",g="prototype",P="function",R="_dynInstFuncs",L="_isDynProxy",p="_dynClass",M="_dynInstChk",N=M,k="_dfOpts",O="_unknown_",K="__proto__",I="_dyn"+K,A="_dynInstProto",B="useBaseInst",H="setInstFuncs",q=Object,U=q.getPrototypeOf,z=q.getOwnPropertyNames,D=0;function h(n,e){return n&&q[g].hasOwnProperty.call(n,e)}function j(n){return n&&(n===q[g]||n===Array[g])}function F(n){return j(n)||n===Function[g]}function y(n){if(n){if(U)return U(n);var e=n[K]||n[g]||(n[E]?n[E][g]:null),t=n[I]||e;h(n,I)||(delete n[A],t=n[I]=n[A]||n[I],n[A]=e)}return t}function X(n,e){var t=[];if(z)t=z(n);else for(var r in n)"string"==typeof r&&h(n,r)&&t.push(r);if(t&&0<t.length)for(var i=0;i<t.length;i++)e(t[i])}function nn(n,e,t){return e!==E&&typeof n[e]===P&&(t||h(n,e))}function fn(n){throw new TypeError("DynamicProto: "+n)}function dn(n,e){for(var t=n.length-1;0<=t;t--)if(n[t]===e)return 1}function vn(n,e){return h(n,g)?n.name||e||O:((n||{})[E]||{}).name||e||O}function m(n,r,e,t){h(n,g)||fn("theClass is an invalid class definition.");var i,o,a,u,c,s,l=n[g],f=(function(n){if(!U)return 1;for(var e=[],t=y(r);t&&!F(t)&&!dn(e,t);){if(t===n)return 1;e.push(t),t=y(t)}}(l)||fn("["+vn(n)+"] is not in class hierarchy of ["+vn(r)+"]"),null),n=(h(l,p)?f=l[p]:(f="_dynCls$"+vn(n,"_")+"$"+D,D++,l[p]=f),m[k]),d=!!n[B],v=(d&&t&&t[B]!==undefined&&(d=!!t[B]),o={},X(i=r,function(n){!o[n]&&nn(i,n,!1)&&(o[n]=i[n])}),o),d=(e(r,function(n,e,t,o){function r(n,e,t){var r,i=e[t];return i[L]&&o&&!1!==(r=n[R]||{})[N]&&(i=(r[e[p]]||{})[t]||i),function(){return i.apply(n,arguments)}}for(var i={},a=(X(t,function(n){i[n]=r(e,t,n)}),y(n)),u=[];a&&!F(a)&&!dn(u,a);)X(a,function(n){!i[n]&&nn(a,n,!U)&&(i[n]=r(e,a,n))}),u.push(a),a=y(a);return i}(l,r,v,d)),!!U&&!!n[H]);a=l,e=f,u=r,c=v,n=!1!==(d=d&&t?!!t[H]:d),j(a)||(l=u[R]=u[R]||{},s=l[e]=l[e]||{},!1!==l[N]&&(l[N]=!!n),X(u,function(n){var t,r,i;nn(u,n,!1)&&u[n]!==c[n]&&(s[n]=u[n],delete u[n],h(a,n)&&(!a[n]||a[n][L])||(a[n]=(t=a,r=n,(i=function(){var n,e;return(function(n,e,t,r){var i=null;if(n&&h(t,p)){var o=n[R]||{};if((i=(o[t[p]]||{})[e])||fn("Missing ["+e+"] "+P),!i[M]&&!1!==o[N]){for(var a=!h(n,e),u=y(n),c=[];a&&u&&!F(u)&&!dn(c,u);){var s=u[e];if(s){a=s===r;break}c.push(u),u=y(u)}try{a&&(n[e]=i),i[M]=1}catch(l){o[N]=!1}}}return i}(this,r,t,i)||(typeof(e=(e=t[n=r])===i?y(t)[n]:e)!==P&&fn("["+n+"] is not a "+P),e)).apply(this,arguments)})[L]=1,i)))}))}m[k]={setInstFuncs:!0,useBaseInst:!0};var d="",gn="isInitialized",pn="teardown",b="core",hn="update",yn="disabled",mn="_doTeardown",bn="startsWith",xn="indexOf",wn="trim",Cn="toString",Tn="constructor",_n=e,Sn=t.freeze,En=t.keys,i=String[a],Pn=i[wn],Rn=i[bn],i=Array.isArray,Ln=n[Cn],Mn=v[Cn],Nn=Mn.call(t),kn=/-([a-z])/g,On=/([^\w\d_$])/g,Kn=/^(\d+[\w\d_$])/,In=Object.getPrototypeOf;function W(n){return n===undefined||typeof n===J}function $(n){return null===n||W(n)}function An(n,e){return n&&v.call(n,e)}function Bn(n){return!(!n||typeof n!==Q)}function x(n){return!(!n||typeof n!==l)}function Hn(n){var e=n;return n&&zn(n)?(e=(e=n.replace(kn,function(n,e){return e.toUpperCase()})).replace(On,"_")).replace(Kn,function(n,e){return"_"+e}):e}function en(n,e){if(n)for(var t in n)v.call(n,t)&&e.call(n,t,n[t])}function qn(n,e){var t=!1;if(n&&e&&!(t=n===e)){if(Rn)return n[bn](e);var r=n,i=e,n=!1,o=i?i.length:0;if(r&&o&&r.length>=o&&!(n=r===i)){for(var a=0;a<o;a++)if(r[a]!==i[a])return!1;n=!0}return n}return t}function Un(n,e){return!(!n||!e||!~n.indexOf(e))}var tn=i||function(n){return!(!n||"[object Array]"!==Ln.call(n))};function zn(n){return"string"==typeof n}function Dn(n){return"number"==typeof n}function jn(n){return"boolean"==typeof n}function Fn(n){return n&&"object"==typeof n&&(!(n=(In||function(n){if(n){if(In)return In(n);n=n.__proto__||n[a]||n[Tn];if(n)return n}return null})(n))||typeof(n=n[Tn]&&v.call(n,Tn)?n[Tn]:n)===l&&Mn.call(n)===Nn)}function rn(n,e,t){var r=n.length;try{for(var i=0;i<r&&!(i in n&&-1===e.call(t||n,n[i],i,n));i++);}catch(o){}}function Xn(n,e,t){if(n){if(n[xn])return n[xn](e,t);var r=n.length,t=t||0;try{for(var i=Math.max(0<=t?t:r-Math.abs(t),0);i<r;i++)if(i in n&&n[i]===e)return i}catch(o){}}return-1}function V(n){return n&&(Pn&&n[wn]?n[wn]():n.replace?n.replace(/^\s+|\s+$/g,""):n)}var Qn=!{toString:null}.propertyIsEnumerable("toString"),Jn=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Wn(n){var e=typeof n;if(e===l||e===Q&&null!==n||_("objKeys called on non-object"),!Qn&&En)return En(n);var t,r=[];for(t in n)n&&v.call(n,t)&&r.push(t);if(Qn)for(var i=Jn.length,o=0;o<i;o++)n&&v.call(n,Jn[o])&&r.push(Jn[o]);return r}function $n(n,e,t,r){if(_n)try{var i={enumerable:!0,configurable:!0};return t&&(i.get=t),r&&(i.set=r),_n(n,e,i),!0}catch(o){}return!1}var Vn=Sn||function(n){return n};function G(){var n=Date;return n.now?n.now():(new n).getTime()}function Gn(n){return n&&C?t(C({},n)):n}Yn={},en({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},function(n,e){Yn[n]=e,Yn[e]=n}),n=Yn,Sn&&en(n,function(n,e){(tn(e)||Bn(e))&&Sn(e)});var Yn,on=Vn(n),Zn="window",ne="document",ee="navigator",te="location",re="JSON",ie="ReactNative",oe="XMLHttpRequest",ae=null,ue=null,ce=null,se=null;function le(n,e){var t,r=!1;if(n){try{(r=e in n)||(t=n[a])&&(r=e in t)}catch(i){}if(!r)try{r=!W((new n)[e])}catch(i){}}return r}function an(n){var e=T();return e&&e[n]?e[n]:n===Zn&&fe()?window:null}function fe(){return typeof window===Q&&window}function de(){return fe()?window:an(Zn)}function ve(){return typeof document===Q&&document?document:an(ne)}function ge(){return!(typeof navigator!==Q||!navigator)}function pe(){return ge()?navigator:an(ee)}function he(){return typeof JSON===Q&&JSON||null!==an(re)}function ye(){return he()?JSON||an(re):null}function me(){var n=pe();return n&&n.product&&n.product===ie}function Y(n){var e=Object[a].toString.call(n),t=d;return"[object Error]"===e?t="{ stack: '"+n.stack+"', message: '"+n.message+"', name: '"+n.name+"'":he()&&(t=ye().stringify(n)),e+t}function be(){return se=null===se?ge()&&!!pe().sendBeacon:se}function xe(){var n=!1;try{n=!!an(oe)}catch(e){}return n}var we=null;function Ce(n){return n?'"'+n.replace(/\"/g,d)+'"':d}function Te(n,e){var t,r=typeof console!==J?console:an("console");r&&(t="log",x(r[t=r[n]?n:t])&&r[t](e))}Se.dataType="MessageData";var _e=Se;function Se(n,e,t,r){void 0===t&&(t=!1),this.messageId=n,this.message=(t?"AI: ":"AI (Internal): ")+n;t=d,he()&&(t=ye().stringify(r)),n=(e?" message:"+Ce(e):d)+(r?" props:"+Ce(t):d);this.message+=n}var Ee=function Sr(i){this.identifier="DiagnosticLogger",this.queue=[];var u=0,c={};m(Sr,this,function(o){function n(n,e){n=i[n];return $(n)?e:n}function a(n,e){var t,r=(t=(t=we)||!0===i.disableDbgExt?t:we||(r=an("Microsoft"),we=r?r.ApplicationInsights:we))?t.ChromeDbgExt:null;r&&r.diagLog&&r.diagLog(n,e)}$(i)&&(i={}),o.consoleLoggingLevel=function(){return n("loggingLevelConsole",0)},o.telemetryLoggingLevel=function(){return n("loggingLevelTelemetry",1)},o.maxInternalMessageLimit=function(){return n("maxMessageLimit",25)},o.enableDebugExceptions=function(){return n("enableDebugExceptions",!1)},o.throwInternal=function(n,e,t,r,i){e=new _e(e,t,i=void 0!==i&&i,r);if(o.enableDebugExceptions())throw Y(e);t=1===n?"errorToConsole":"warnToConsole";W(e.message)?a("throw"+(1===n?"Critical":"Warning"),e):(r=o.consoleLoggingLevel(),i?(i=+e.messageId,!c[i]&&n<=r&&(o[t](e.message),c[i]=!0)):n<=r&&o[t](e.message),o.logInternalMessage(n,e))},o.warnToConsole=function(n){Te("warn",n),a("warning",n)},o.errorToConsole=function(n){Te("error",n),a("error",n)},o.resetInternalMessageCount=function(){u=0,c={}},o.logInternalMessage=function(n,e){var t,r;u>=o.maxInternalMessageLimit()||(r=!0,t="AITR_"+e.messageId,c[t]?r=!1:c[t]=!0,r&&(n<=o.telemetryLoggingLevel()&&(o.queue.push(e),u++,a(1===n?"error":"warn",e)),u===o.maxInternalMessageLimit()&&(r=new _e(23,t="Internal events throttle limit per PageView reached for this app.",!1),o.queue.push(r),1===n?o.errorToConsole(t):o.warnToConsole(t))))}})};function un(n,e,t,r,i,o){void 0===o&&(o=!1),(n||new Ee).throwInternal(e,t,r,i,o)}u.ParentContextKey="parent",u.ChildrenContextKey="childEvts";var Pe=u;function u(n,i,e){var t,o=this,a=!1;o.start=G(),o.name=n,o.isAsync=e,o.isChildEvt=function(){return!1},x(i)&&(a=$n(o,"payload",function(){return!t&&x(i)&&(t=i(),i=null),t})),o.getCtx=function(n){return n?(n===u.ParentContextKey||n===u.ChildrenContextKey?o:o.ctx||{})[n]:null},o.setCtx=function(n,e){n&&(n===u.ParentContextKey?(o[n]||(o.isChildEvt=function(){return!0}),o[n]=e):n===u.ChildrenContextKey?o[n]=e:(o.ctx=o.ctx||{})[n]=e)},o.complete=function(){var n=0,e=o.getCtx(u.ChildrenContextKey);if(tn(e))for(var t=0;t<e.length;t++){var r=e[t];r&&(n+=r.time)}o.time=G()-o.start,o.exTime=o.time-n,o.complete=function(){},!a&&x(i)&&(o.payload=i())}}var Re="CoreUtils.doPerf";function cn(n,e,t,r,i){if(n)if(n=x(n.getPerfMgr)?n.getPerfMgr():n){var o,a=void 0,u=n.getCtx(Re);try{if(a=n.create(e(),r,i))return u&&a.setCtx&&(a.setCtx(Pe.ParentContextKey,u),u.getCtx&&u.setCtx&&((o=u.getCtx(Pe.ChildrenContextKey))||(o=[],u.setCtx(Pe.ChildrenContextKey,o)),o.push(a))),n.setCtx(Re,a),t(a)}catch(c){a&&a.setCtx&&a.setCtx("exception",c)}finally{a&&n.fire(a),n.setCtx(Re,u)}}return t()}var Le=4294967296,c=4294967295,Me=!1,Ne=123456789,ke=987654321;function Oe(n){var e,t=0,r=an("crypto")||an("msCrypto");if(0===(t=r&&r.getRandomValues?r.getRandomValues(new Uint32Array(1))[0]&c:t)&&(!(r=pe())||r.userAgent===ue&&null!==ae||(r=((ue=r.userAgent)||d).toLowerCase(),ae=Un(r,"msie")||Un(r,"trident/")),ae)){if(!Me)try{var i=2147483647&G();(e=(Math.random()*Le^i)+i)<0&&(e>>>=0),Ne=123456789+e&c,ke=987654321-e&c,Me=!0}catch(o){}r=((ke=36969*(65535&ke)+(ke>>16)&c)<<16)+(65535&(Ne=18e3*(65535&Ne)+(Ne>>16)&c))>>>0&c|0,t=(r>>>=0)&c}return 0===t&&(t=Math.floor(Le*Math.random()|0)),n||(t>>>=0),t}var Ke=e,Ie="."+function(n){void 0===n&&(n=22);for(var e=Oe()>>>0,t=0,r=d;r.length<n;)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|63&e]||"",e>>>=6,5==++t&&(e=(Oe()<<2&4294967295|3&e)>>>0,t=0);return r}(6),Ae=0;function Be(n){return 1===n.nodeType||9===n.nodeType||!+n.nodeType}function He(n,e){return Hn(n+Ae+++((e=void 0!==e&&e)?".2.8.4":"")+Ie)}function qe(n){var o={id:He("_aiData-"+(n||"")+".2.8.4"),accept:Be,get:function(n,e,t,r){var i=n[o.id];return i?i[Hn(e)]:(r&&((i=function(n,e){var t=e[n.id];if(!t){t={};try{Be(e)&&!function(n,e,t){if(Ke)try{return Ke(n,e,{value:t,enumerable:!1,configurable:!0}),1}catch(r){}}(e,n.id,t)&&(e[n.id]=t)}catch(r){}}return t}(o,n))[Hn(e)]=t),t)},kill:function(n,e){if(n&&n[e])try{delete n[e]}catch(t){}}};return o}var Ue="attachEvent",ze="addEventListener",De="detachEvent",je="removeEventListener",Fe="events",Xe="visibilitychange",Qe="pagehide",Je="pageshow",We="beforeunload",$e=He("aiEvtPageHide"),Ve=He("aiEvtPageShow"),Ge=/\.[\.]+/g,Ye=/[\.]+$/,Ze=1,nt=qe("events"),et=/^([^.]*)(?:\.(.+)|)/;function tt(n){return n&&n.replace?n.replace(/^\s*\.*|\.*\s*$/g,""):n}function rt(n,e){e&&(t="",tn(e)?(t="",rn(e,function(n){(n=tt(n))&&("."!==n[0]&&(n="."+n),t+=n)})):t=tt(e),t&&(n=(n||"")+(t="."!==t[0]?"."+t:t)));var t,e=et.exec(n||"")||[];return{type:e[1],ns:(e[2]||"").replace(Ge,".").replace(Ye,"").split(".").sort().join(".")}}function it(n,e,t){n=nt.get(n,Fe,{},t=void 0===t||t);return n[e]||(n[e]=[])}function ot(n,e,t,r){n&&e&&e.type&&(n[je]?n[je](e.type,t,r):n[De]&&n[De]("on"+e.type,t))}function at(n,e,t,r){for(var i=e.length;i--;){var o=e[i];!o||t.ns&&t.ns!==o.evtName.ns||r&&!r(o)||(ot(n,o.evtName,o.handler,o.capture),e.splice(i,1))}}function ut(n,e){return e?rt("xx",tn(e)?[n].concat(e):[n,e]).ns.split("."):n}function ct(n,e,t,r,i){void 0===i&&(i=!1);var o,a=!1;if(n)try{var u,c=rt(e,r),s=c,l=t,f=i,d=!1;(o=n)&&s&&s.type&&l&&(o[ze]?(o[ze](s.type,l,f),d=!0):o[Ue]&&(o[Ue]("on"+s.type,l),d=!0)),(a=d)&&nt.accept(n)&&(u={guid:Ze++,evtName:c,handler:t,capture:i},it(n,c.type).push(u))}catch(v){}return a}function st(n,e,t,r,i){if(void 0===i&&(i=!1),n)try{var o=rt(e,r),a=!1,u=n,c=function(n){return!((!o.ns||t)&&n.handler!==t)&&(a=!0)};(s=o).type?at(u,it(u,s.type),s,c):(en(l=nt.get(u,Fe,{}),function(n,e){at(u,e,s,c)}),0===Wn(l).length&&nt.kill(u,Fe)),a||ot(n,o,t,i)}catch(f){}var s,l}function lt(n,o,a,u){var c=!1;return o&&n&&0<n.length&&rn(n,function(n){var e,t,r,i;!n||a&&-1!==Xn(a,n)||(n=n,e=o,t=u,r=!1,(i=de())&&(r=ct(i,n,e,t),r=ct(i.body,n,e,t)||r),i=ve(),c=(r=i&&ct(i,n,e,t)||r)||c)}),c}function ft(n,i,o){n&&tn(n)&&rn(n,function(n){var e,t,r;n&&(n=n,e=i,t=o,(r=de())&&(st(r,n,e,t),st(r.body,n,e,t)),(r=ve())&&st(r,n,e,t))})}var dt=qe("plugin");function vt(n){return dt.get(n,"state",{},!0)}var gt="TelemetryPluginChain",pt="_hasRun",ht="_getTelCtx",yt=0;function mt(n,a,t,e){var r=null,i=[],o=(null!==e&&(r=e?function(n,e,t){for(;n;){if(n.getPlugin()===t)return n;n=n.getNext()}return xt([t],e.config||{},e)}(n,t,e):n),{_next:function(){var n,e=r;return r=e?e.getNext():null,e||(n=i)&&0<n.length&&(rn(n,function(n){try{n.func.call(n.self,n.args)}catch(e){un(t.logger,2,73,"Unexpected Exception during onComplete - "+Y(e))}}),i=[]),e},ctx:{core:function(){return t},diagLog:function(){return(t||{}).logger||new Ee(a)},getCfg:function(){return a},getExtCfg:u,getConfig:function(n,e,t){void 0===t&&(t=!1);var r,n=u(n,null);return n&&!$(n[e])?r=n[e]:a&&!$(a[e])&&(r=a[e]),$(r)?t:r},hasNext:function(){return!!r},getNext:function(){return r},setNext:function(n){r=n},iterate:function(n){for(;e=o._next();){var e=e.getPlugin();e&&n(e)}},onComplete:function(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];n&&i.push({func:n,self:W(e)?o.ctx:e,args:t})}}});function u(n,e,t){var r,i,o;return void 0===e&&(e={}),void 0===t&&(t=0),(r=a&&(i=a.extensionConfig)&&n?i[n]:r)?Bn(e)&&0!==t&&(o=function d(){var n=arguments,e=n[0]||{},t=n.length,r=!1,i=1;for(0<t&&jn(e)&&(r=e,e=n[i]||{},i++),Bn(e)||(e={});i<t;i++){var o,a,u,c,s=n[i],l=tn(s),f=Bn(s);for(o in s)(l&&o in s||f&&v.call(s,o))&&(a=s[o],u=void 0,r&&a&&((u=tn(a))||Fn(a))&&(c=e[o],u?tn(c)||(c=[]):Fn(c)||(c={}),a=d(r,c,a)),a!==undefined&&(e[o]=a))}return e}(!0,e,r),a&&2===t&&en(e,function(n){var e;$(o[n])&&!$(e=a[n])&&(o[n]=e)}),r=o):r=e,r}return o}function bt(n,t,r,e){var i=mt(n,t,r,e),o=i.ctx;return o.processNext=function(n){var e=i._next();return e&&e.processTelemetry(n,o),!e},o.createNew=function(n,e){return bt((n=tn(n=void 0===n?null:n)?xt(n,t,r,e):n)||o.getNext(),t,r,e)},o}function xt(n,e,t,r){var i,o=null,a=!r;return tn(n)&&0<n.length&&(i=null,rn(n,function(n){(a=!a&&r===n||a)&&n&&x(n.processTelemetry)&&(n=wt(n,e,t),o=o||n,i&&i._setNext(n),i=n)})),r&&!o?xt([r],e,t):o}function wt(c,r,i){var s=null,o=x(c.processTelemetry),a=x(c.setNextPlugin),l=c?c.identifier+"-"+c.priority+"-"+yt++:"Unknown-0-"+yt++,u={getPlugin:function(){return c},getNext:function(){return s},processTelemetry:function(t,n){var e;f(n=n||(e=(e=c&&x(c[ht])?c[ht]():e)||bt(u,r,i)),function(n){if(!c||!o)return!1;var e=vt(c);return!e.teardown&&!e[yn]&&(a&&c.setNextPlugin(s),c.processTelemetry(t,n),!0)},"processTelemetry",function(){return{item:t}},!t.sync)||n.processNext(t)},unload:function(r,i){f(r,function(){var n,e,t=!1;return c&&(n=vt(c),e=c[b]||n.core,!c||e&&e!==r[b]()||n[pn]||(n[b]=null,n[pn]=!0,n[gn]=!1,c[pn]&&!0===c[pn](r,i)&&(t=!0))),t},"unload",function(){},i.isAsync)||r.processNext(i)},update:function(r,i){f(r,function(){var n,e,t=!1;return c&&(n=vt(c),e=c[b]||n.core,!c||e&&e!==r[b]()||n[pn]||c[hn]&&!0===c[hn](r,i)&&(t=!0)),t},"update",function(){},!1)||r.processNext(i)},_id:l,_setNext:function(n){s=n}};function f(t,r,i,n,e){var o=!1,a=c?c.identifier:gt,u=(u=t[pt])||(t[pt]={});return t.setNext(s),c&&cn(t[b](),function(){return a+":"+i},function(){u[l]=!0;try{var n=s?s._id:d;n&&(u[n]=!1),o=r(t)}catch(e){n=!s||u[s._id];n&&(o=!0),s&&n||un(t.diagLog(),1,73,"Plugin ["+a+"] failed during "+i+" - "+Y(e)+", run flags: "+Y(u))}},n,e),o}return Vn(u)}function Ct(){var e=[];return{add:function(n){n&&e.push(n)},run:function(t,r){rn(e,function(n){try{n(t,r)}catch(e){un(t.diagLog(),2,73,"Unexpected error calling unload handler - "+Y(e))}}),e=[]}}}var w="getPlugin",Cn=function Er(){var o,a,l,f,d,u=this;function e(n){var e,n=n=void 0===n?null:n;return n||(e=a||bt(null,{},u.core),n=l&&l[w]?e.createNew(null,l[w]):e.createNew(null,l)),n}function c(n,e,t){n&&(o="extensionConfig",i=r=[],n&&(i=n[o])!==r&&$(i)&&(n[o]=i=r)),!t&&e&&(t=e.getProcessTelContext().getNext());var r,i,o=l;l&&l[w]&&(o=l[w]()),u.core=e,a=bt(t,n,e,o)}function v(){o=!1,u.core=null,l=a=null,d=[],f=Ct()}v(),m(Er,u,function(s){var n,e,t,r,i;s.initialize=function(n,e,t,r){c(n,e,r),o=!0},s.teardown=function(n,e){var t,r,i,o,a=s.core;if(a&&(!n||a===n.core()))return r=!1,i=n||function c(n,t,e){var r=t.config||{},i=mt(n,r,t,e),o=i.ctx;return o.processNext=function(n){var e=i._next();return e&&e.unload(o,n),!e},o.createNew=function(n,e){return c((n=tn(n=void 0===n?null:n)?xt(n,r,t,e):n)||o.getNext(),t,e)},o}(null,a,l&&l[w]?l[w]():l),o=e||{reason:0,isAsync:!1},s[mn]&&!0===s[mn](i,o,u)?t=!0:u(),t;function u(){r||(r=!0,f.run(i,e),rn(d,function(n){n.rm()}),d=[],!0===t&&i.processNext(o),v())}},s.update=function(n,e){var t,r,i,o=s.core;if(o&&(!n||o===n.core()))return r=!1,i=n||function u(n,t,e){var r=t.config||{},i=mt(n,r,t,e).ctx;return i.processNext=function(e){return i.iterate(function(n){x(n.update)&&n.update(i,e)})},i.createNew=function(n,e){return u((n=tn(n=void 0===n?null:n)?xt(n,r,t,e):n)||i.getNext(),t,e)},i}(null,o,l&&l[w]?l[w]():l),s._doUpdate&&!0===s._doUpdate(i,e||{reason:0},a)?t=!0:a(),t;function a(){r||(r=!0,c(i.getCfg(),i.core(),i.getNext()))}},s._addHook=function(n){n&&(tn(n)?d=d.concat(n):d.push(n))},t="_addUnloadCb",e=function(){return f},(n=s)&&e&&(n[t]=(i=r=null,x(t=e)?r=t:i=t,function(){var n=arguments;if(i=r?r():i)return i.add.apply(i,n)}))}),u.diagLog=function(n){return e(n).diagLog()},u[gn]=function(){return o},u.setInitialized=function(n){o=n},u.setNextPlugin=function(n){l=n},u.processNext=function(n,e){e?e.processNext(n):l&&x(l.processTelemetry)&&l.processTelemetry(n,null)},u._getTelCtx=e},Tt="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",_t="withCredentials",St="timeout",Et=((i={})[0]=0,i[2]=6,i[1]=1,i[3]=7,i[4098]=6,i[4097]=1,i[4099]=7,i);function sn(n){return""!==n&&!$(n)}function Pt(n,e,t){var r=-1;return W(n)||(0<e&&(32===e?r=8192:e<=13&&(r=e<<5)),0<=t&&t<=9?(-1===r&&(r=0),r|=t):(e=Et[function i(n){var e,t=0;return null!==n&&n!==undefined&&("string"==(e=typeof n)?t=1:"number"==e?t=2:"boolean"==e?t=3:e===Q&&(t=4,tn(n)?(t=4096,0<n.length&&(t|=i(n[0]))):An(n,"value")&&(t=8192|i(n.value)))),t}(n)]||-1,-1!==r&&-1!==e?r|=e:6===e&&(r=e))),r}function Rt(){var r={},e=!1,n=0,t=arguments.length,i=Object[a],o=arguments;for("[object Boolean]"===i.toString.call(o[0])&&(e=o[0],n++);n<t;n++)en(o[n],function(t,n){e&&n&&Bn(n)?tn(n)?(r[t]=r[t]||[],rn(n,function(n,e){n&&Bn(n)?r[t][e]=Rt(!0,r[t][e],n):r[t][e]=n})):r[t]=Rt(!0,r[t],n):r[t]=n});return r}ve(),de();var Z=function(){var n=an("performance");return n&&n.now?n.now():G()};function Lt(n,e){n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[e]=Z()}var Mt="REAL_TIME",Nt="POST",kt="drop",n="requeue",Ot="application/x-json-stream",Kt="cache-control",It="content-type",At="kill-duration",Bt="time-delta-millis",Ht="client-version",qt="client-id",Ut="time-delta-to-apply-millis",zt="upload-time",Dt="apikey",jt="AuthMsaDeviceTicket",e="AuthXToken",Ft="msfpc";function Xt(n){n=(n.ext||{}).intweb;return n&&sn(n[Ft])?n[Ft]:null}function Qt(n){for(var e=null,t=0;null===e&&t<n.length;t++)e=Xt(n[t]);return e}Wt.create=function(n,e){return new Wt(n,e)};var Jt=Wt;function Wt(r,n){var i=n?[].concat(n):[],n=this,o=Qt(i);n.iKey=function(){return r},n.Msfpc=function(){return o||""},n.count=function(){return i.length},n.events=function(){return i},n.addEvent=function(n){return!!n&&(i.push(n),o=o||Xt(n),!0)},n.split=function(n,e){var t;return n<i.length&&(t=i.length-n,$(e)||(t=e<t?e:t),t=i.splice(n,t),o=Qt(i)),new Wt(r,t)}}var $t="metadata",Vt=/\./,Gt=function Pr(e,n,b,t){var o="baseData",x=!!t,w=n,C={};m(Pr,this,function(y){function m(n,f,d,v,g,p,h){en(n,function(n,e){if(e||sn(e)){var t,r=d,i=n,o=g,a=f;if(x&&!v&&Vt.test(n)){var u=n.split("."),c=u.length;if(1<c){for(var o=o&&o.slice(),s=0;s<c-1;s++){var l=u[s],a=a[l]=a[l]||{};r+="."+l,o&&o.push(l)}i=u[c-1]}}(n=v&&((t=C[n=r])===undefined&&(7<=n.length&&(t=qn(n,"ext.metadata")||qn(n,"ext.web")),C[n]=t),t)||!w||!w.handleField(r,i)?function(n,e){if(!n&&!sn(n)||"string"!=typeof i)return null;var t=typeof n;if("string"==t||"number"==t||"boolean"==t||tn(n))n={value:n};else if("object"!=t||n.hasOwnProperty("value")){if($(n.value)||""===n.value||!zn(n.value)&&!Dn(n.value)&&!jn(n.value)&&!tn(n.value))return null}else n={value:e?JSON.stringify(n):n};if(tn(n.value)&&!(0<n.value.length))return null;if(!$(n.kind)){if(tn(n.value)||!(0===(t=n.kind)||0<t&&t<=13||32===t))return null;n.value=n.value.toString()}return n}(e,b):w.value(r,i,e,b))&&(t=n.value,a[i]=t,p&&p(o,i,n),h&&"object"==typeof t&&!tn(t)&&((n=o)&&(n=o.slice()).push(i),m(e,t,r+"."+i,v,n,p,h)))}})}y.createPayload=function(n,e,t,r,i,o){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:n,isTeardown:e,isSync:t,isBeacon:r,sendType:o,sendReason:i}},y.appendPayload=function(g,p,h){var n=g&&p&&!g.overflow;return n&&cn(e,function(){return"Serializer:appendPayload"},function(){for(var n=p.events(),e=g.payloadBlob,t=g.numEvents,r=!1,i=[],o=[],a=g.isBeacon,u=a?65e3:3984588,c=a?65e3:2e6,s=0,l=0;s<n.length;){var f=n[s];if(f){if(h<=t){g.overflow=p.split(s);break}var d=y.getEventBlob(f);if(d&&d.length<=c){var v=d.length;if(u<e.length+v){g.overflow=p.split(s);break}e&&(e+="\n"),e+=d,20<++l&&(e.substr(0,1),l=0),r=!0,t++}else(d?i:o).push(f),n.splice(s,1),s--}s++}i&&0<i.length&&g.sizeExceed.push(Jt.create(p.iKey(),i)),o&&0<o.length&&g.failedEvts.push(Jt.create(p.iKey(),o)),r&&(g.batches.push(p),g.payloadBlob=e,g.numEvents=t,a=p.iKey(),-1===Xn(g.apiKeys,a)&&g.apiKeys.push(a))},function(){return{payload:g,theBatch:{iKey:p.iKey(),evts:p.events()},max:h}}),n},y.getEventBlob=function(i){try{return cn(e,function(){return"Serializer.getEventBlob"},function(){var n={},r=(n.name=i.name,n.time=i.time,n.ver=i.ver,n.iKey="o:"+function(n){if(n){var e=n.indexOf("-");if(-1<e)return n.substring(0,e)}return""}(i.iKey),{}),e=i.ext,e=(e&&(n.ext=r,en(e,function(n,e){m(e,r[n]={},"ext."+n,!0,null,null,!0)})),n.data={}),t=(e.baseType=i.baseType,e[o]={});return m(i.baseData,t,o,!1,[o],function(n,e,t){Yt(r,n,e,t)},!0),m(i.data,e,"data",!1,[],function(n,e,t){Yt(r,n,e,t)},!0),JSON.stringify(n)},function(){return{item:i}})}catch(n){return null}}})};function Yt(n,e,t,r){if(r&&n){var i=Pt(r.value,r.kind,r.propertyType);if(-1<i){var o=n[$t],a=(a=(o=o||(n[$t]={f:{}})).f)||(o.f={});if(e)for(var u=0;u<e.length;u++)var c=e[u],a=(a[c]||(a[c]={f:{}}),a[c].f||(a[c].f={}));a=a[t]={},tn(r.value)?a.a={t:i}:a.t=i}}}var Zt=.8,nr=1.2,er=3e3,tr=6e5;function rr(n){var e=er*Zt;return Math.min(Math.pow(2,n)*(Math.floor(Math.random()*(er*nr-e))+e),tr)}var ir=function Rr(){var c={};m(Rr,this,function(n){n.setKillSwitchTenants=function(n,e){if(n&&e)try{o=n.split(","),a=[],o&&rn(o,function(n){a.push(V(n))});var t=a;if("this-request-only"===e)return t;for(var r=1e3*parseInt(e,10),i=0;i<t.length;++i)c[t[i]]=G()+r}catch(u){return[]}var o,a;return[]},n.isTenantKilled=function(n){var e=c,n=V(n);return e[n]!==undefined&&e[n]>G()||(delete e[n],!1)}})},or=function Lr(){var e=!0,t=!0,r=!0,i="use-collector-delta",o=!1;m(Lr,this,function(n){n.allowRequestSending=function(){return e},n.firstRequestSent=function(){r&&(r=!1,o||(e=!1))},n.shouldAddClockSkewHeaders=function(){return t},n.getClockSkewHeaderValue=function(){return i},n.setClockSkew=function(n){o||(n?(i=n,o=t=!0):t=!1,e=!0)}})},ar="sendAttempt",ur="&NoResponseBody=true",cr=((i={})[1]=n,i[100]=n,i[200]="sent",i[8004]=kt,i[8003]=kt,i),sr={},lr={};function o(n,e,t){sr[n]=e,!1!==t&&(lr[e]=n)}function fr(n){try{return n.responseText}catch(e){}return""}function dr(n,e){var t=!1;if(n&&e){var r=Wn(n);if(r&&0<r.length)for(var i=e.toLowerCase(),o=0;o<r.length;o++){var a=r[o];if(a&&An(e,a)&&a.toLowerCase()==i){t=!0;break}}}return t}function vr(n,e,t,r){e&&t&&0<t.length&&(r&&sr[e]?(n.hdrs[sr[e]]=t,n.useHdrs=!0):n.url+="&"+e+"="+t)}o(jt,jt,!1),o(Ht,Ht),o(qt,"Client-Id"),o(Dt,Dt),o(Ut,Ut),o(zt,zt),o(e,e);var gr=function Mr(_,n,S,l,f){this._responseHandlers=[];var E,P,R,L,M,N,k="?cors=true&content-type="+Ot,O=new ir,K=!1,I=new or,A=!1,B=0,H=!0,q=[],U={},z=[],D=null,j=!1,F=!1,X=!1;m(Mr,this,function(h){var v=!0;function a(n,e){for(var t=0,r=null,i=0;null==r&&i<n.length;)1===(t=n[i])?(ce=null===ce&&(ce=typeof XDomainRequest!==J)&&xe()?ce&&!le(an(oe),"withCredentials"):ce)?r=o:xe()&&(r=c):2===t&&function(n){var e=!1;try{var e=!!an("fetch"),t=an("Request");e&&n&&t&&(e=le(t,"keepalive"))}catch(r){}return e}(e)?r=u:A&&3===t&&be()&&(r=s),i++;return r?{_transport:t,_isSync:e,sendPOST:r}:null}function o(n,e,t){var r=new XDomainRequest;r.open(Nt,n.urlString),n.timeout&&(r.timeout=n.timeout),r.onload=function(){var n=fr(r);y(e,200,{},n),C(n)},r.onerror=function(){y(e,400,{})},r.ontimeout=function(){y(e,500,{})},r.onprogress=function(){},t?r.send(n.data):f.set(function(){r.send(n.data)},0)}function u(n,r,e){var t,i=n.urlString,o=!1,a=!1;(t={body:n.data,method:Nt}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0;e&&(t.keepalive=!0,2===n._sendReason&&(o=!0,i+=ur)),v&&(t.credentials="include"),n.headers&&0<Wn(n.headers).length&&(t.headers=n.headers),fetch(i,t).then(function(n){var t={},e="";n.headers&&n.headers.forEach(function(n,e){t[e]=n}),n.body&&n.text().then(function(n){e=n}),a||(a=!0,y(r,n.status,t,e),C(e))})["catch"](function(n){a||(a=!0,y(r,0,{}))}),o&&!a&&(a=!0,y(r,200,{})),!a&&0<n.timeout&&f.set(function(){a||(a=!0,y(r,500,{}))},n.timeout)}function c(n,o,e){var t=n.urlString;function a(n,e,t){return!n[t]&&e&&e.getResponseHeader&&(e=e.getResponseHeader(t))&&(n[t]=V(e)),n}function r(n,e){var t,r,i;y(o,n.status,(i={},(n=n).getAllResponseHeaders?(t=n.getAllResponseHeaders(),r={},zn(t)&&rn(V(t).split(/[\r\n]+/),function(n){var e,t;n&&(-1!=(t=n.indexOf(": "))?(e=V(n.substring(0,t)).toLowerCase(),t=V(n.substring(1+t)),r[e]=t):r[V(n)]=1)}),r):(i=a(i,n,Bt),i=a(i,n,At),a(i,n,"kill-duration-seconds"))),e)}e&&n.disableXhrSync&&(e=!1),i=Nt,t=t,u=v,e=e,s=n.timeout,c=!0,void 0===e&&(e=!1),l=new XMLHttpRequest,c&&d(l,Tt,c),u&&d(l,_t,u),l.open(i,t,!e),u&&d(l,_t,u),!e&&s&&d(l,St,s);var i,u,c,s,l,f=l;function d(n,e,t){try{n[e]=t}catch(r){}}en(n.headers,function(n,e){f.setRequestHeader(n,e)}),f.onload=function(){var n=fr(f);r(f,n),C(n)},f.onerror=function(){r(f)},f.ontimeout=function(){r(f)},f.send(n.data)}function y(n,e,t,r){try{n(e,t,r)}catch(i){un(E.diagLog(),2,518,Y(i))}}function s(n,e,t){var r=200,i=n._thePayload,o=n.urlString+ur;try{var a,u=pe();u.sendBeacon(o,n.data)||(i?(a=[],rn(i.batches,function(n){if(a&&n&&0<n.count()){for(var e=n.events(),t=0;t<e.length;t++)if(!u.sendBeacon(o,D.getEventBlob(e[t]))){a.push(n.split(t));break}}else a.push(n.split(0))}),T(a,8003,i.sendType,!0)):r=0)}catch(c){E.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+Y(c)),r=0}finally{y(e,r,{},"")}}function m(n){return 2===n||3===n}function r(n){return F&&m(n)?2:n}function i(){return!K&&B<n}function t(){var n=z;return z=[],n}function d(n,e,t){return n&&0<n.length&&!K&&P[e]&&D&&(0!==e||i()&&(0<t||I.allowRequestSending()))}function g(n){var t={};return n&&rn(n,function(n,e){t[e]={iKey:n.iKey(),evts:n.events()}}),t}function b(a,u,c,s,l){if(a&&0!==a.length)if(K)T(a,1,s);else{s=r(s);try{var n=a,f=0!==s;cn(R,function(){return"HttpManager:_sendBatches"},function(n){n&&(a=a.slice(0));for(var e=[],t=null,r=Z(),n=P[s]||(f?P[1]:P[0]),i=(F||m(s)||n&&3===n._transport)&&!H&&A&&be();d(a,s,u);){var o=a.shift();o&&0<o.count()&&(O.isTenantKilled(o.iKey())?e.push(o):(t=t||D.createPayload(u,c,f,i,l,s),D.appendPayload(t,o,_)?null!==t.overflow&&(a=[t.overflow].concat(a),t.overflow=null,p(t,r,Z(),l),r=Z(),t=null):(p(t,r,Z(),l),r=Z(),a=[o].concat(a),t=null)))}t&&p(t,r,Z(),l),0<a.length&&(z=a.concat(z)),T(e,8004,s)},function(){return{batches:g(n),retryCount:u,isTeardown:c,isSynchronous:f,sendReason:l,useSendBeacon:m(s),sendType:s}},!f)}catch(e){un(E.diagLog(),2,48,"Unexpected Exception sending batch: "+Y(e))}}}function x(n,e,t){n[e]=n[e]||{},n[e][E.identifier]=t}function p(v,u,c,g){var s,l,f,d,p;v&&v.payloadBlob&&0<v.payloadBlob.length&&(s=!!h.sendHook,l=P[v.sendType],!m(v.sendType)&&v.isBeacon&&2===v.sendReason&&(l=P[2]||P[3]||l),d=X,!v.isBeacon&&3!==l._transport||(d=!1),f=function(n,e){var t={url:k,hdrs:{},useHdrs:!1},r=(e?(t.hdrs=Rt(t.hdrs,U),t.useHdrs=0<Wn(t.hdrs).length):en(U,function(n,e){lr[n]?vr(t,lr[n],e,!1):(t.hdrs[n]=e,t.useHdrs=!0)}),vr(t,qt,"NO_AUTH",e),vr(t,Ht,"1DS-Web-JS-3.2.3",e),""),n=(rn(n.apiKeys,function(n){0<r.length&&(r+=","),r+=n}),vr(t,Dt,r,e),vr(t,zt,G().toString(),e),function(n){for(var e=0;e<n.batches.length;e++){var t=n.batches[e].Msfpc();if(t)return encodeURIComponent(t)}return""}(n));sn(n)&&(t.url+="&ext.intweb.msfpc="+n),I.shouldAddClockSkewHeaders()&&vr(t,Ut,I.getClockSkewHeaderValue(),e),R.getWParam&&0<=(n=R.getWParam())&&(t.url+="&w="+n);for(var i=0;i<q.length;i++)t.url+="&"+q[i].name+"="+q[i].value;return t}(v,d),d=d||f.useHdrs,p=Z(),cn(R,function(){return"HttpManager:_doPayloadSend"},function(){for(var n=0;n<v.batches.length;n++)for(var e=v.batches[n].events(),t=0;t<e.length;t++){var r,i=e[t];j&&(x(r=i.timings=i.timings||{},"sendEventStart",p),x(r,"serializationStart",u),x(r,"serializationCompleted",c)),0<i[ar]?i[ar]++:i[ar]=1}T(v.batches,1e3+(g||0),v.sendType,!0);var o={data:v.payloadBlob,urlString:f.url,headers:f.hdrs,_thePayload:v,_sendReason:g,timeout:M},a=(W(N)||(o.disableXhrSync=!!N),d&&(dr(o.headers,Kt)||(o.headers[Kt]="no-cache, no-store"),dr(o.headers,It)||(o.headers[It]=Ot)),null);l&&(a=function(n){I.firstRequestSent();var e=function(n,e){var t,r,i=v,o=g,a=9e3,u=null,c=!1,s=!1;try{var l,f=!0;if(typeof n!==J){if(e&&(I.setClockSkew(e[Bt]),d=e[At]||e["kill-duration-seconds"],rn(O.setKillSwitchTenants(e["kill-tokens"],d),function(e){rn(i.batches,function(n){n.iKey()===e&&(u=u||[],n=n.split(0),i.numEvents-=n.count(),u.push(n))})})),200==n||204==n)return void(a=200);(300<=n&&n<500&&408!=n&&429!=n||501==n||505==n||i.numEvents<=0)&&(f=!1),a=9e3+n%1e3}f&&(a=100,l=i.retryCnt,0===i.sendType&&(l<S?(c=!0,w(function(){0===i.sendType&&B--,b(i.batches,l+1,i.isTeardown,F?2:i.sendType,5)},F,rr(l))):(s=!0,F&&(a=8001))))}finally{if(!c){I.setClockSkew();var e=i,d=a,n=o,f=s;try{f&&E._backOffTransmission(),200===d&&(f||e.isSync||E._clearBackOff(),t=e.batches,j&&(r=Z(),rn(t,function(n){var e;n&&0<n.count()&&(n=n.events(),e=r,j&&rn(n,function(n){x(n.timings=n.timings||{},"sendEventCompleted",e)}))}))),T(e.batches,d,e.sendType,!0)}finally{0===e.sendType&&(B--,5!==n&&h.sendQueuedRequests(e.sendType,n))}}T(u,8004,i.sendType)}},t=v.isTeardown||v.isSync;try{l.sendPOST(n,e,t),h.sendListener&&h.sendListener(o,n,t,v.isBeacon)}catch(r){E.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+Y(r)),y(e,0,{})}}),cn(R,function(){return"HttpManager:_doPayloadSend.sender"},function(){var e,t;a&&(0===v.sendType&&B++,s&&!v.isBeacon&&3!==l._transport?(e={data:o.data,urlString:o.urlString,headers:Rt({},o.headers),timeout:o.timeout,disableXhrSync:o.disableXhrSync},t=!1,cn(R,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{h.sendHook(e,function(n){t=!0,H||n._thePayload||(n._thePayload=n._thePayload||o._thePayload,n._sendReason=n._sendReason||o._sendReason),a(n)},v.isSync||v.isTeardown)}catch(n){t||a(o)}})):a(o))})},function(){return{thePayload:v,serializationStart:u,serializationCompleted:c,sendReason:g}},v.isSync)),v.sizeExceed&&0<v.sizeExceed.length&&T(v.sizeExceed,8003,v.sendType),v.failedEvts&&0<v.failedEvts.length&&T(v.failedEvts,8002,v.sendType)}function w(n,e,t){e?n():f.set(n,t)}function C(n){var e=h._responseHandlers;try{for(var t,r=0;r<e.length;r++)try{e[r](n)}catch(i){un(E.diagLog(),1,519,"Response handler failed: "+i)}n&&sn((t=JSON.parse(n)).webResult)&&sn(t.webResult[Ft])&&L.set("MSFPC",t.webResult[Ft],31536e3)}catch(o){}}function T(e,t,r,n){var i,o,a;e&&0<e.length&&l&&(i=l[sn(a=cr[t])||(a="oth",9e3<=t&&t<=9999?a="rspFail":8e3<=t&&t<=8999?a=kt:1e3<=t&&t<=1999&&(a="send")),a])&&cn(R,function(){return"HttpManager:_sendBatchesNotification"},function(){w(function(){try{i.call(l,e,t,o,r)}catch(n){un(E.diagLog(),1,74,"send request notification failed: "+n)}},n||o,0)},function(){return{batches:g(e),reason:t,isSync:o,sendSync:n,sendType:r}},!(o=0!==r))}h.initialize=function(n,e,t,r,i){k=n+k,X=!!W((i=i||{}).avoidOptions)||!i.avoidOptions,L=(R=e).getCookieMgr(),j=!R.config.disableEventTimings;var o,n=!!R.config.enableCompoundKey,e=(E=t,i.valueSanitizer),t=i.stringifyObjects,e=(W(i.enableCompoundKey)||(n=!!i.enableCompoundKey),M=i.xhrTimeout,N=i.disableXhrSync,A=!me(),D=new Gt(R,e,t,n),r),t=i.alwaysUseXhrOverride?r:null,n=i.alwaysUseXhrOverride?r:null;r||(H=!1,(o=typeof location===Q&&location?location:an(te))&&o.protocol&&"file:"==o.protocol.toLowerCase()&&(v=!1),o=[],o=me()?[2,1]:[1,2,3],(i=i.transports)&&(Dn(i)?o=[i].concat(o):tn(i)&&(o=i.concat(o))),r=a(o,!1),e=a(o,!0),r||E.diagLog().warnToConsole("No available transport to send events")),(i={})[0]=r,i[1]=e||a([1,2,3],!0),i[2]=t||a([3,2],!0)||e||a([1],!0),i[3]=n||a([2,3],!0)||e||a([1],!0),P=i},h._getDbgPlgTargets=function(){return[P[0],O,D,P]},h.addQueryStringParameter=function(n,e){for(var t=0;t<q.length;t++)if(q[t].name===n)return void(q[t].value=e);q.push({name:n,value:e})},h.addHeader=function(n,e){U[n]=e},h.canSendRequest=function(){return i()&&I.allowRequestSending()},h.sendQueuedRequests=function(n,e){W(n)&&(n=0),F&&(n=r(n),e=2),d(z,n,0)&&b(t(),0,!1,n,e||0)},h.isCompletelyIdle=function(){return!K&&0===B&&0===z.length},h.setUnloading=function(n){F=n},h.addBatch=function(n){if(n&&0<n.count()){if(O.isTenantKilled(n.iKey()))return!1;z.push(n)}return!0},h.teardown=function(){0<z.length&&b(t(),0,!0,2,2)},h.pause=function(){K=!0},h.resume=function(){K=!1,h.sendQueuedRequests(0,4)},h.sendSynchronousBatch=function(n,e,t){n&&0<n.count()&&($(e)&&(e=1),F&&(e=r(e),t=2),b([n],0,!1,e,t||0))}})};function pr(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return setTimeout(n,e,t)}function hr(n){clearTimeout(n)}function yr(n,e){return{set:n||pr,clear:e||hr}}var mr,br,ln="eventsDiscarded",xr="overrideInstrumentationKey",wr="maxEventRetryAttempts",Cr="maxUnloadEventRetryAttempts";function Tr(){var P,R,L,M,N,k,O,K,n=mr.call(this)||this,I=(n.identifier="PostChannel",n.priority=1011,!(n.version="3.2.3")),A=[],B=null,H=!1,q=0,U=500,z=0,D=1e4,j={},F=Mt,X=null,Q=null,J=0,W=0,$={},V=-1,G=!0,Y=!1,Z=6,nn=2;return m(Tr,n,function(p,h){function y(n){"beforeunload"!==(n||de().event).type&&(Y=!0,L.setUnloading(Y)),s(2,2)}function m(n){Y=!1,L.setUnloading(Y)}function i(n,e){if(n.sendAttempt||(n.sendAttempt=0),n.latency||(n.latency=1),n.ext&&n.ext.trace&&delete n.ext.trace,n.ext&&n.ext.user&&n.ext.user.id&&delete n.ext.user.id,G&&(n.ext=Gn(n.ext),n.baseData&&(n.baseData=Gn(n.baseData)),n.data&&(n.data=Gn(n.data))),n.sync)if(J||H)n.latency=3,n.sync=!1;else if(L)return G&&(n=Gn(n)),L.sendSynchronousBatch(Jt.create(n.iKey,[n]),!0===n.sync?1:n.sync,3);var t=n.latency,r=z,i=D,o=(4===t&&(r=q,i=U),!1);r<i?o=!d(n,e):(r=1,i=20,4===t&&(r=4,i=1),o=!0,function(n,e,t,r){for(;t<=e;){var i=l(n,e,!0);if(i&&0<i.count()){var i=i.split(0,r),o=i.count();if(0<o)return 4===t?q-=o:z-=o,w(ln,[i],on.QueueFull),1}t++}return v(),0}(n.iKey,n.latency,r,i)&&(o=!d(n,e))),o&&x(ln,[n],on.QueueFull)}function o(n,e,t){g(n,e,t),L.sendQueuedRequests(e,t)}function a(){0<=V&&g(V,0,k)&&L.sendQueuedRequests(0,k),0<q&&!Q&&!H&&0<=(n=j[F][2])&&(Q=u(function(){Q=null,o(4,0,1),a()},n));var n=j[F][1];!X&&!B&&0<=n&&!H&&(0<z?X=u(function(){X=null,o(0===W?3:1,0,1),W++,W%=2,a()},n):W=0)}function r(){I=!1,H=!(A=[]),U=500,D=1e4,j={},F=Mt,W=J=z=q=0,R=Q=X=B=P=null,$={},M=undefined,N=0,V=-1,Y=!(G=!(k=null)),Z=6,O=null,K=yr(),L=new gr(500,nn=2,1,{requeue:n,send:t,sent:C,drop:T,rspFail:_,oth:S},K),e(),$[4]={batches:[],iKeyMap:{}},$[3]={batches:[],iKeyMap:{}},$[2]={batches:[],iKeyMap:{}},$[1]={batches:[],iKeyMap:{}},E()}function u(n,e){0===e&&J&&(e=1);var t=1e3;return J&&(t=rr(J-1)),K.set(n,e*t)}function c(){return null!==X&&(K.clear(X),X=null,!(W=0))}function s(n,e){c(),B&&(K.clear(B),B=null),H||o(1,n,e)}function l(n,e,t){var r=$[e],e=(r=r||$[e=1]).iKeyMap[n];return!e&&t&&(e=Jt.create(n),r.batches.push(e),r.iKeyMap[n]=e),e}function f(n,e){L.canSendRequest()&&!J&&(e=0<M&&M<z||e)&&null==B&&p.flush(n,null,20)}function d(n,e){var t=(n=G?Gn(n):n).latency,r=l(n.iKey,t,!0);return r.addEvent(n)&&(4!==t?(z++,e&&0===n.sendAttempt&&f(!n.sync,0<N&&r.count()>=N)):q++,1)}function v(){for(var t=0,r=0,n=1;n<=4;n++)!function(e){var n=$[e];n&&n.batches&&rn(n.batches,function(n){4===e?t+=n.count():r+=n.count()})}(n);z=r,q=t}function g(r,n,e){var i=!1,t=0===n;return!t||L.canSendRequest()?cn(p.core,function(){return"PostChannel._queueBatches"},function(){for(var e=[],t=4;r<=t;){var n=$[t];n&&n.batches&&0<n.batches.length&&(rn(n.batches,function(n){L.addBatch(n)?i=i||n&&0<n.count():e=e.concat(n.events()),4===t?q-=n.count():z-=n.count()}),n.batches=[],n.iKeyMap={}),t--}0<e.length&&x(ln,e,on.KillSwitch),i&&r<=V&&(V=-1,k=0)},function(){return{latency:r,sendType:n,sendReason:e}},!t):(V=0<=V?Math.min(V,r):r,k=Math.max(k,e)),i}function e(){j={REAL_TIME:[2,1,0],NEAR_REAL_TIME:[6,3,0],BEST_EFFORT:[18,9,0]}}function n(n,e){var t=[],r=Y?nn:Z;rn(n,function(n){n&&0<n.count()&&rn(n.events(),function(n){n&&(n.sync&&(n.latency=4,n.sync=!1),n.sendAttempt<r?(Lt(n,p.identifier),i(n,!1)):t.push(n))})}),0<t.length&&x(ln,t,on.NonRetryableStatus),Y&&s(2,2)}function b(n,e){var t=p._notificationManager||{},r=t[n];if(r)try{r.apply(t,e)}catch(i){un(p.diagLog(),1,74,n+" notification failed: "+i)}}function x(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];e&&0<e.length&&b(n,[e].concat(t))}function w(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];n&&0<n.length&&rn(n,function(n){n&&0<n.count()&&b(e,[n.events()].concat(t))})}function t(n,e,t){n&&0<n.length&&b("eventsSendRequest",[1e3<=e&&e<=1999?e-1e3:0,!0!==t])}function C(n,e){w("eventsSent",n,e),a()}function T(n,e){w(ln,n,8e3<=e&&e<=8999?e-8e3:on.Unknown)}function _(n){w(ln,n,on.NonRetryableStatus),a()}function S(n,e){w(ln,n,on.Unknown),a()}function E(){N=P&&P.disableAutoBatchFlushLimit?0:Math.max(1500,D/6)}r(),p._getDbgPlgTargets=function(){return[L]},p.initialize=function(d,v,g){cn(v,function(){return"PostChannel:initialize"},function(){var e,n=v;h.initialize(d,v,g);try{v.addUnloadCb,O=ut(He(p.identifier),v.evtNamespace&&v.evtNamespace());var t,r=p._getTelCtx(),i=(d.extensionConfig[p.identifier]=d.extensionConfig[p.identifier]||{},P=r.getExtCfg(p.identifier),K=yr(P.setTimeoutOverride,P.clearTimeoutOverride),G=!P.disableOptimizeObj&&!!an("chrome"),e=n.getWParam,n.getWParam=function(){var n=0;return P.ignoreMc1Ms0CookieProcessing&&(n|=2),n|e()},0<P.eventsLimitInMem&&(D=P.eventsLimitInMem),0<P.immediateEventLimit&&(U=P.immediateEventLimit),0<P.autoFlushEventsLimit&&(M=P.autoFlushEventsLimit),Dn(P[wr])&&(Z=P[wr]),Dn(P[Cr])&&(nn=P[Cr]),E(),P.httpXHROverride&&P.httpXHROverride.sendPOST&&(R=P.httpXHROverride),sn(d.anonCookieName)&&L.addQueryStringParameter("anoncknm",d.anonCookieName),L.sendHook=P.payloadPreprocessor,L.sendListener=P.payloadListener,P.overrideEndpointUrl||d.endpointUrl),o=(p._notificationManager=d.extensionConfig.NotificationManager,L.initialize(i,p.core,p,R,P),d.disablePageUnloadEvents||[]),a=o,u=O,c=y;tn(t=[We,"unload",Qe])&&!lt(t,c,a,u)&&a&&0<a.length&&lt(t,c,null,u),function s(t,n,e){var r=ut($e,e),i=lt([Qe],t,n,r);return!(i=(!n||-1===Xn(n,Xe))&&lt([Xe],function(n){var e=ve();t&&e&&"hidden"===e.visibilityState&&t(n)},n,r)||i)&&n?s(t,null,e):i}(y,o,O),function l(t,n,e){var r=ut(Ve,e),i=lt([Je],t,n,r);return!(i=lt([Xe],function(n){var e=ve();t&&e&&"visible"===e.visibilityState&&t(n)},n,r)||i)&&n?l(t,null,e):i}(m,d.disablePageShowEvents,O)}catch(f){throw p.setInitialized(!1),f}},function(){return{coreConfig:d,core:v,extensions:g}})},p.processTelemetry=function(n,e){Lt(n,p.identifier);var t=(e=p._getTelCtx(e)).getExtCfg(p.identifier),r=!!P.disableTelemetry;(r=t?r||!!t.disableTelemetry:r)||I||(P[xr]&&(n.iKey=P[xr]),t&&t[xr]&&(n.iKey=t[xr]),i(n,!0),Y?s(2,2):a()),p.processNext(n,e)},p._doTeardown=function(n,e){var t;s(2,2),I=!0,L.teardown(),ft([We,"unload",Qe],null,O),t=ut($e,O),ft([Qe],null,t),ft([Xe],null,t),t=ut(Ve,O),ft([Je],null,t),ft([Xe],null,t),r()},p.setEventQueueLimits=function(n,e){D=0<n?n:1e4,M=0<e?e:0,E();var t=n<z;if(!t&&0<N)for(var r=1;!t&&r<=3;r++){var i=$[r];i&&i.batches&&rn(i.batches,function(n){n&&n.count()>=N&&(t=!0)})}f(!0,t)},p.pause=function(){c(),H=!0,L.pause()},p.resume=function(){H=!1,L.resume(),a()},p.addResponseHandler=function(n){L._responseHandlers.push(n)},p._loadTransmitProfiles=function(n){c(),e(),F=Mt,a(),en(n,function(n,e){var t,r=e.length;2<=r&&(t=2<r?e[2]:0,e.splice(0,r-2),e[1]<0&&(e[0]=-1),0<e[1]&&0<e[0]&&(r=e[0]/e[1],e[0]=Math.ceil(r)*e[1]),0<=t&&0<=e[1]&&t>e[1]&&(t=e[1]),e.push(t),j[n]=e)})},p.flush=function(n,e,t){void 0===n&&(n=!0),H||(t=t||1,n?null==B?(c(),g(1,0,t),B=u(function(){B=null,function r(n,e){o(1,0,e),v(),function t(n){L.isCompletelyIdle()?n():B=u(function(){B=null,t(n)},.25)}(function(){n&&n(),0<A.length?B=u(function(){B=null,r(A.shift(),e)},0):(B=null,a())})}(e,t)},0)):A.push(e):(n=c(),o(1,1,t),null!==e&&e!==undefined&&e(),n&&a()))},p.setMsaAuthTicket=function(n){L.addHeader(jt,n)},p.hasEvents=function(){return 0<z},p._setTransmitProfile=function(n){F!==n&&j[n]!==undefined&&(c(),F=n,a())},p._backOffTransmission=function(){J<4&&(J++,c(),a())},p._clearBackOff=function(){J&&(J=0,c(),a())},$n(p,"_setTimeoutOverride",function(){return K.set},function(n){K=yr(n,K.clear)}),$n(p,"_clearTimeoutOverride",function(){return K.clear},function(n){K=yr(K.set,n)})}),n}function _r(){this.constructor=br}br=Tr,typeof(n=mr=Cn)!==l&&null!==n&&_("Class extends value "+n+" is not a constructor or null"),S(br,n),br[a]=(_r[a]=n[a],new _r);i=Tr,s.BE_PROFILE="BEST_EFFORT",s.NRT_PROFILE="NEAR_REAL_TIME",s.PostChannel=i,s.RT_PROFILE=Mt,e=s,Cn="__esModule",n={value:!0},i=Object.defineProperty;if(i)try{return void i(e,Cn,n)}catch(Nr){}typeof n.value!==undefined&&(e[Cn]=n.value)};"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n="undefined"!=typeof globalThis?globalThis:n||self).oneDS=n.oneDS||{});
//# sourceMappingURL=ms.post.min.js.map
