"use strict";/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/path","vs/base/common/buffer","vs/base/common/errors","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/map","vs/base/common/mime","vs/base/common/stream","vs/base/common/symbols","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/eolCounter","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/base/common/arrays","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ie=function(te){for(var e=[],U=0,F=te.length;U<F;U++)e[U]=ne[te[U]];return e};define(ne[13],ie([0,1]),function(te,e){"use strict";var U,F,j;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function C(f,r,s){let o=f.get(r);return o===void 0&&(o=s,f.set(r,o)),o}e.getOrSet=C;function D(f){const r=[];return f.forEach((s,o)=>{r.push(`${o} => ${s}`)}),`Map(${f.size}) {${r.join(", ")}}`}e.mapToString=D;function V(f){const r=[];return f.forEach(s=>{r.push(s)}),`Set(${f.size}) {${r.join(", ")}}`}e.setToString=V;class ${constructor(r,s){this.uri=r,this.value=s}}class E{constructor(r,s){this[U]="ResourceMap",r instanceof E?(this.b=new Map(r.b),this.c=s??E.a):(this.b=new Map,this.c=r??E.a)}set(r,s){return this.b.set(this.c(r),new $(r,s)),this}get(r){return this.b.get(this.c(r))?.value}has(r){return this.b.has(this.c(r))}get size(){return this.b.size}clear(){this.b.clear()}delete(r){return this.b.delete(this.c(r))}forEach(r,s){typeof s<"u"&&(r=r.bind(s));for(const[o,t]of this.b)r(t.value,t.uri,this)}*values(){for(const r of this.b.values())yield r.value}*keys(){for(const r of this.b.values())yield r.uri}*entries(){for(const r of this.b.values())yield[r.uri,r.value]}*[(U=Symbol.toStringTag,Symbol.iterator)](){for(const[,r]of this.b)yield[r.uri,r.value]}}E.a=f=>f.toString(),e.ResourceMap=E;class L{constructor(r,s){this[F]="ResourceSet",!r||typeof r=="function"?this.a=new E(r):(this.a=new E(s),r.forEach(this.add,this))}get size(){return this.a.size}add(r){return this.a.set(r,r),this}clear(){this.a.clear()}delete(r){return this.a.delete(r)}forEach(r,s){this.a.forEach((o,t)=>r.call(s,t,t,this))}has(r){return this.a.has(r)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(F=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=L;var A;(function(f){f[f.None=0]="None",f[f.AsOld=1]="AsOld",f[f.AsNew=2]="AsNew"})(A=e.Touch||(e.Touch={}));class m{constructor(){this[j]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(r){return this.a.has(r)}get(r,s=0){const o=this.a.get(r);if(!!o)return s!==0&&this.j(o,s),o.value}set(r,s,o=0){let t=this.a.get(r);if(t)t.value=s,o!==0&&this.j(t,o);else{switch(t={key:r,value:s,next:void 0,previous:void 0},o){case 0:this.h(t);break;case 1:this.g(t);break;case 2:this.h(t);break;default:this.h(t);break}this.a.set(r,t),this.d++}return this}delete(r){return!!this.remove(r)}remove(r){const s=this.a.get(r);if(!!s)return this.a.delete(r),this.i(s),this.d--,s.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const r=this.b;return this.a.delete(r.key),this.i(r),this.d--,r.value}forEach(r,s){const o=this.e;let t=this.b;for(;t;){if(s?r.bind(s)(t.value,t.key,this):r(t.value,t.key,this),this.e!==o)throw new Error("LinkedMap got modified during iteration.");t=t.next}}keys(){const r=this,s=this.e;let o=this.b;const t={[Symbol.iterator](){return t},next(){if(r.e!==s)throw new Error("LinkedMap got modified during iteration.");if(o){const a={value:o.key,done:!1};return o=o.next,a}else return{value:void 0,done:!0}}};return t}values(){const r=this,s=this.e;let o=this.b;const t={[Symbol.iterator](){return t},next(){if(r.e!==s)throw new Error("LinkedMap got modified during iteration.");if(o){const a={value:o.value,done:!1};return o=o.next,a}else return{value:void 0,done:!0}}};return t}entries(){const r=this,s=this.e;let o=this.b;const t={[Symbol.iterator](){return t},next(){if(r.e!==s)throw new Error("LinkedMap got modified during iteration.");if(o){const a={value:[o.key,o.value],done:!1};return o=o.next,a}else return{value:void 0,done:!0}}};return t}[(j=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(r){if(r>=this.size)return;if(r===0){this.clear();return}let s=this.b,o=this.size;for(;s&&o>r;)this.a.delete(s.key),s=s.next,o--;this.b=s,this.d=o,s&&(s.previous=void 0),this.e++}g(r){if(!this.b&&!this.c)this.c=r;else if(this.b)r.next=this.b,this.b.previous=r;else throw new Error("Invalid list");this.b=r,this.e++}h(r){if(!this.b&&!this.c)this.b=r;else if(this.c)r.previous=this.c,this.c.next=r;else throw new Error("Invalid list");this.c=r,this.e++}i(r){if(r===this.b&&r===this.c)this.b=void 0,this.c=void 0;else if(r===this.b){if(!r.next)throw new Error("Invalid list");r.next.previous=void 0,this.b=r.next}else if(r===this.c){if(!r.previous)throw new Error("Invalid list");r.previous.next=void 0,this.c=r.previous}else{const s=r.next,o=r.previous;if(!s||!o)throw new Error("Invalid list");s.previous=o,o.next=s}r.next=void 0,r.previous=void 0,this.e++}j(r,s){if(!this.b||!this.c)throw new Error("Invalid list");if(!(s!==1&&s!==2)){if(s===1){if(r===this.b)return;const o=r.next,t=r.previous;r===this.c?(t.next=void 0,this.c=t):(o.previous=t,t.next=o),r.previous=void 0,r.next=this.b,this.b.previous=r,this.b=r,this.e++}else if(s===2){if(r===this.c)return;const o=r.next,t=r.previous;r===this.b?(o.previous=void 0,this.b=o):(o.previous=t,t.next=o),r.next=void 0,r.previous=this.c,this.c.next=r,this.c=r,this.e++}}}toJSON(){const r=[];return this.forEach((s,o)=>{r.push([o,s])}),r}fromJSON(r){this.clear();for(const[s,o]of r)this.set(s,o)}}e.LinkedMap=m;class T extends m{constructor(r,s=1){super(),this.k=r,this.l=Math.min(Math.max(0,s),1)}get limit(){return this.k}set limit(r){this.k=r,this.m()}get ratio(){return this.l}set ratio(r){this.l=Math.min(Math.max(0,r),1),this.m()}get(r,s=2){return super.get(r,s)}peek(r){return super.get(r,0)}set(r,s){return super.set(r,s,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}e.LRUCache=T}),define(ne[14],ie([0,1,4]),function(te,e,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeMimeType=e.getExtensionForMimeType=e.getMediaMime=e.getMediaOrTextMime=e.Mimes=void 0,e.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const F={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},j={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function C(L){const A=(0,U.extname)(L),m=F[A.toLowerCase()];return m!==void 0?m:D(L)}e.getMediaOrTextMime=C;function D(L){const A=(0,U.extname)(L);return j[A.toLowerCase()]}e.getMediaMime=D;function V(L){for(const A in j)if(j[A]===L)return A}e.getExtensionForMimeType=V;const $=/^(.+)\/(.+?)(;.+)?$/;function E(L,A){const m=$.exec(L);return m?`${m[1].toLowerCase()}/${m[2].toLowerCase()}${m[3]??""}`:A?void 0:L}e.normalizeMimeType=E}),define(ne[15],ie([0,1,6,7]),function(te,e,U,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function j(n){const l=n;return l?typeof l.read=="function":!1}e.isReadable=j;function C(n){const l=n;return l?[l.on,l.pause,l.resume,l.destroy].every(c=>typeof c=="function"):!1}e.isReadableStream=C;function D(n){const l=n;return l?C(l.stream)&&Array.isArray(l.buffer)&&typeof l.ended=="boolean":!1}e.isReadableBufferedStream=D;function V(n,l){return new $(n,l)}e.newWriteableStream=V;class ${constructor(l,c){this.e=l,this.f=c,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(l){if(!this.a.destroyed){if(this.a.flowing)this.g(l);else if(this.b.data.push(l),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(c=>this.d.push(c))}}error(l){this.a.destroyed||(this.a.flowing?this.h(l):this.b.error.push(l))}end(l){this.a.destroyed||(typeof l<"u"&&this.write(l),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(l){this.c.data.slice(0).forEach(c=>c(l))}h(l){this.c.error.length===0?(0,U.onUnexpectedError)(l):this.c.error.slice(0).forEach(c=>c(l))}i(){this.c.end.slice(0).forEach(l=>l())}on(l,c){if(!this.a.destroyed)switch(l){case"data":this.c.data.push(c),this.resume();break;case"end":this.c.end.push(c),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(c),this.a.flowing&&this.k();break}}removeListener(l,c){if(this.a.destroyed)return;let p;switch(l){case"data":p=this.c.data;break;case"end":p=this.c.end;break;case"error":p=this.c.error;break}if(p){const v=p.indexOf(c);v>=0&&p.splice(v,1)}}j(){if(this.b.data.length>0){const l=this.e(this.b.data);this.g(l),this.b.data.length=0;const c=[...this.d];this.d.length=0,c.forEach(p=>p())}}k(){if(this.c.error.length>0){for(const l of this.b.error)this.h(l);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function E(n,l){const c=[];let p;for(;(p=n.read())!==null;)c.push(p);return l(c)}e.consumeReadable=E;function L(n,l,c){const p=[];let v;for(;(v=n.read())!==null&&p.length<c;)p.push(v);return v===null&&p.length>0?l(p):{read:()=>{if(p.length>0)return p.shift();if(typeof v<"u"){const P=v;return v=void 0,P}return n.read()}}}e.peekReadable=L;function A(n,l){return new Promise((c,p)=>{const v=[];m(n,{onData:P=>{l&&v.push(P)},onError:P=>{l?p(P):c(void 0)},onEnd:()=>{c(l?l(v):void 0)}})})}e.consumeStream=A;function m(n,l){let c=!1;return n.on("error",p=>{c||l.onError(p)}),n.on("end",()=>{c||l.onEnd()}),n.on("data",p=>{c||l.onData(p)}),(0,F.toDisposable)(()=>c=!0)}e.listenStream=m;function T(n,l){return new Promise((c,p)=>{const v=new F.DisposableStore,P=[],g=d=>{if(P.push(d),P.length>l)return v.dispose(),n.pause(),c({stream:n,buffer:P,ended:!1})},S=d=>p(d),w=()=>c({stream:n,buffer:P,ended:!0});v.add((0,F.toDisposable)(()=>n.removeListener("error",S))),n.on("error",S),v.add((0,F.toDisposable)(()=>n.removeListener("end",w))),n.on("end",w),v.add((0,F.toDisposable)(()=>n.removeListener("data",g))),n.on("data",g)})}e.peekStream=T;function f(n,l){const c=V(l);return c.end(n),c}e.toStream=f;function r(){const n=V(()=>{throw new Error("not supported")});return n.end(),n}e.emptyStream=r;function s(n){let l=!1;return{read:()=>l?null:(l=!0,n)}}e.toReadable=s;function o(n,l,c){const p=V(c);return m(n,{onData:v=>p.write(l.data(v)),onError:v=>p.error(l.error?l.error(v):v),onEnd:()=>p.end()}),p}e.transform=o;function t(n,l,c){let p=!1;return{read:()=>{const v=l.read();return p?v:(p=!0,v!==null?c([n,v]):n)}}}e.prefixedReadable=t;function a(n,l,c){let p=!1;const v=V(c);return m(l,{onData:P=>p?v.write(P):(p=!0,v.write(c([n,P]))),onError:P=>v.error(P),onEnd:()=>{p||(p=!0,v.write(n)),v.end()}}),v}e.prefixedStream=a}),define(ne[5],ie([0,1,15]),function(te,e,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const F=typeof Buffer<"u";let j,C;class D{static alloc(d){return F?new D(Buffer.allocUnsafe(d)):new D(new Uint8Array(d))}static wrap(d){return F&&!Buffer.isBuffer(d)&&(d=Buffer.from(d.buffer,d.byteOffset,d.byteLength)),new D(d)}static fromString(d,N){return!(N?.dontUseNodeBuffer||!1)&&F?new D(Buffer.from(d)):(j||(j=new TextEncoder),new D(j.encode(d)))}static fromByteArray(d){const N=D.alloc(d.length);for(let z=0,Y=d.length;z<Y;z++)N.buffer[z]=d[z];return N}static concat(d,N){if(typeof N>"u"){N=0;for(let J=0,_=d.length;J<_;J++)N+=d[J].byteLength}const z=D.alloc(N);let Y=0;for(let J=0,_=d.length;J<_;J++){const M=d[J];z.set(M,Y),Y+=M.byteLength}return z}constructor(d){this.buffer=d,this.byteLength=this.buffer.byteLength}clone(){const d=D.alloc(this.byteLength);return d.set(this),d}toString(){return F?this.buffer.toString():(C||(C=new TextDecoder),C.decode(this.buffer))}slice(d,N){return new D(this.buffer.subarray(d,N))}set(d,N){if(d instanceof D)this.buffer.set(d.buffer,N);else if(d instanceof Uint8Array)this.buffer.set(d,N);else if(d instanceof ArrayBuffer)this.buffer.set(new Uint8Array(d),N);else if(ArrayBuffer.isView(d))this.buffer.set(new Uint8Array(d.buffer,d.byteOffset,d.byteLength),N);else throw new Error("Unknown argument 'array'")}readUInt32BE(d){return E(this.buffer,d)}writeUInt32BE(d,N){L(this.buffer,d,N)}readUInt32LE(d){return A(this.buffer,d)}writeUInt32LE(d,N){m(this.buffer,d,N)}readUInt8(d){return T(this.buffer,d)}writeUInt8(d,N){f(this.buffer,d,N)}}e.VSBuffer=D;function V(w,d){return w[d+0]<<0>>>0|w[d+1]<<8>>>0}e.readUInt16LE=V;function $(w,d,N){w[N+0]=d&255,d=d>>>8,w[N+1]=d&255}e.writeUInt16LE=$;function E(w,d){return w[d]*2**24+w[d+1]*2**16+w[d+2]*2**8+w[d+3]}e.readUInt32BE=E;function L(w,d,N){w[N+3]=d,d=d>>>8,w[N+2]=d,d=d>>>8,w[N+1]=d,d=d>>>8,w[N]=d}e.writeUInt32BE=L;function A(w,d){return w[d+0]<<0>>>0|w[d+1]<<8>>>0|w[d+2]<<16>>>0|w[d+3]<<24>>>0}e.readUInt32LE=A;function m(w,d,N){w[N+0]=d&255,d=d>>>8,w[N+1]=d&255,d=d>>>8,w[N+2]=d&255,d=d>>>8,w[N+3]=d&255}e.writeUInt32LE=m;function T(w,d){return w[d]}e.readUInt8=T;function f(w,d,N){w[N]=d}e.writeUInt8=f;function r(w){return U.consumeReadable(w,d=>D.concat(d))}e.readableToBuffer=r;function s(w){return U.toReadable(w)}e.bufferToReadable=s;function o(w){return U.consumeStream(w,d=>D.concat(d))}e.streamToBuffer=o;async function t(w){return w.ended?D.concat(w.buffer):D.concat([...w.buffer,await o(w.stream)])}e.bufferedStreamToBuffer=t;function a(w){return U.toStream(w,d=>D.concat(d))}e.bufferToStream=a;function n(w){return U.transform(w,{data:d=>typeof d=="string"?D.fromString(d):D.wrap(d)},d=>D.concat(d))}e.streamToBufferReadableStream=n;function l(w){return U.newWriteableStream(d=>D.concat(d),w)}e.newWriteableBufferStream=l;function c(w,d){return U.prefixedReadable(w,d,N=>D.concat(N))}e.prefixedBufferReadable=c;function p(w,d){return U.prefixedStream(w,d,N=>D.concat(N))}e.prefixedBufferStream=p;function v(w){let d=0,N=0,z=0;const Y=new Uint8Array(Math.floor(w.length/4*3)),J=M=>{switch(N){case 3:Y[z++]=d|M,N=0;break;case 2:Y[z++]=d|M>>>2,d=M<<6,N=3;break;case 1:Y[z++]=d|M>>>4,d=M<<4,N=2;break;default:d=M<<2,N=1}};for(let M=0;M<w.length;M++){const i=w.charCodeAt(M);if(i>=65&&i<=90)J(i-65);else if(i>=97&&i<=122)J(i-97+26);else if(i>=48&&i<=57)J(i-48+52);else if(i===43||i===45)J(62);else if(i===47||i===95)J(63);else{if(i===61)break;throw new SyntaxError(`Unexpected base64 character ${w[M]}`)}}const _=z;for(;N>0;)J(0);return D.wrap(Y).slice(0,_)}e.decodeBase64=v;const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function S({buffer:w},d=!0,N=!1){const z=N?g:P;let Y="";const J=w.byteLength%3;let _=0;for(;_<w.byteLength-J;_+=3){const M=w[_+0],i=w[_+1],b=w[_+2];Y+=z[M>>>2],Y+=z[(M<<4|i>>>4)&63],Y+=z[(i<<2|b>>>6)&63],Y+=z[b&63]}if(J===1){const M=w[_+0];Y+=z[M>>>2],Y+=z[M<<4&63],d&&(Y+="==")}else if(J===2){const M=w[_+0],i=w[_+1];Y+=z[M>>>2],Y+=z[(M<<4|i>>>4)&63],Y+=z[i<<2&63],d&&(Y+="=")}return Y}e.encodeBase64=S}),define(ne[16],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MicrotaskDelay=void 0,e.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(ne[8],ie([0,1,4,2,3,31]),function(te,e,U,F,j,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function D(g){return g===47||g===92}e.isPathSeparator=D;function V(g){return g.replace(/[\\/]/g,U.posix.sep)}e.toSlashes=V;function $(g){return g.indexOf("/")===-1&&(g=V(g)),/^[a-zA-Z]:(\/|$)/.test(g)&&(g="/"+g),g}e.toPosixPath=$;function E(g,S=U.posix.sep){if(!g)return"";const w=g.length,d=g.charCodeAt(0);if(D(d)){if(D(g.charCodeAt(1))&&!D(g.charCodeAt(2))){let z=3;const Y=z;for(;z<w&&!D(g.charCodeAt(z));z++);if(Y!==z&&!D(g.charCodeAt(z+1))){for(z+=1;z<w;z++)if(D(g.charCodeAt(z)))return g.slice(0,z+1).replace(/[\\/]/g,S)}}return S}else if(o(d)&&g.charCodeAt(1)===58)return D(g.charCodeAt(2))?g.slice(0,2)+S:g.slice(0,2);let N=g.indexOf("://");if(N!==-1){for(N+=3;N<w;N++)if(D(g.charCodeAt(N)))return g.slice(0,N+1)}return""}e.getRoot=E;function L(g){if(!F.isWindows||!g||g.length<5)return!1;let S=g.charCodeAt(0);if(S!==92||(S=g.charCodeAt(1),S!==92))return!1;let w=2;const d=w;for(;w<g.length&&(S=g.charCodeAt(w),S!==92);w++);return!(d===w||(S=g.charCodeAt(w+1),isNaN(S)||S===92))}e.isUNC=L;const A=/[\\/:\*\?"<>\|]/g,m=/[\\/]/g,T=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function f(g,S=F.isWindows){const w=S?A:m;return!(!g||g.length===0||/^\s+$/.test(g)||(w.lastIndex=0,w.test(g))||S&&T.test(g)||g==="."||g===".."||S&&g[g.length-1]==="."||S&&g.length!==g.trim().length||g.length>255)}e.isValidBasename=f;function r(g,S,w){const d=g===S;return!w||d?d:!g||!S?!1:(0,j.equalsIgnoreCase)(g,S)}e.isEqual=r;function s(g,S,w,d=U.sep){if(g===S)return!0;if(!g||!S||S.length>g.length)return!1;if(w){if(!(0,j.startsWithIgnoreCase)(g,S))return!1;if(S.length===g.length)return!0;let z=S.length;return S.charAt(S.length-1)===d&&z--,g.charAt(z)===d}return S.charAt(S.length-1)!==d&&(S+=d),g.indexOf(S)===0}e.isEqualOrParent=s;function o(g){return g>=65&&g<=90||g>=97&&g<=122}e.isWindowsDriveLetter=o;function t(g,S){return F.isWindows&&g.endsWith(":")&&(g+=U.sep),(0,U.isAbsolute)(g)||(g=(0,U.join)(S,g)),g=(0,U.normalize)(g),F.isWindows?(g=(0,j.rtrim)(g,U.sep),g.endsWith(":")&&(g+=U.sep)):(g=(0,j.rtrim)(g,U.sep),g||(g=U.sep)),g}e.sanitizeFilePath=t;function a(g){const S=(0,U.normalize)(g);return F.isWindows?g.length>3?!1:n(S)&&(g.length===2||S.charCodeAt(2)===92):S===U.posix.sep}e.isRootOrDriveLetter=a;function n(g,S=F.isWindows){return S?o(g.charCodeAt(0))&&g.charCodeAt(1)===58:!1}e.hasDriveLetter=n;function l(g){return n(g)?g[0]:void 0}e.getDriveLetter=l;function c(g,S,w){return S.length>g.length?-1:g===S?0:(w&&(g=g.toLowerCase(),S=S.toLowerCase()),g.indexOf(S))}e.indexOfPath=c;function p(g){const S=g.split(":");let w,d,N;for(const z of S){const Y=Number(z);(0,C.isNumber)(Y)?d===void 0?d=Y:N===void 0&&(N=Y):w=w?[w,z].join(":"):z}if(!w)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:w,line:d!==void 0?d:void 0,column:N!==void 0?N:d!==void 0?1:void 0}}e.parseLineAndColumnAware=p;const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function P(g,S,w=8){let d="";for(let z=0;z<w;z++)d+=v.charAt(Math.floor(Math.random()*v.length));let N;return S?N=`${S}-${d}`:N=d,g?(0,U.join)(g,N):N}e.randomPath=P}),define(ne[9],ie([0,1,6,2,10]),function(te,e,U,F,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var C;(function(E){E.inMemory="inmemory",E.vscode="vscode",E.internal="private",E.walkThrough="walkThrough",E.walkThroughSnippet="walkThroughSnippet",E.http="http",E.https="https",E.file="file",E.mailto="mailto",E.untitled="untitled",E.data="data",E.command="command",E.vscodeRemote="vscode-remote",E.vscodeRemoteResource="vscode-remote-resource",E.vscodeUserData="vscode-userdata",E.vscodeCustomEditor="vscode-custom-editor",E.vscodeNotebookCell="vscode-notebook-cell",E.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",E.vscodeNotebookCellOutput="vscode-notebook-cell-output",E.vscodeInteractive="vscode-interactive",E.vscodeInteractiveInput="vscode-interactive-input",E.vscodeSettings="vscode-settings",E.vscodeWorkspaceTrust="vscode-workspace-trust",E.vscodeTerminal="vscode-terminal",E.webviewPanel="webview-panel",E.vscodeWebview="vscode-webview",E.extension="extension",E.vscodeFileResource="vscode-file",E.tmp="tmp",E.vsls="vsls",E.vscodeSourceControl="vscode-scm"})(C=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class D{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${C.vscodeRemoteResource}`}setPreferredWebSchema(L){this.d=L}setDelegate(L){this.e=L}setServerRootPath(L){this.f=`${L}/${C.vscodeRemoteResource}`}set(L,A,m){this.a[L]=A,this.b[L]=m}setConnectionToken(L,A){this.c[L]=A}getPreferredWebSchema(){return this.d}rewrite(L){if(this.e)try{return this.e(L)}catch(s){return U.onUnexpectedError(s),L}const A=L.authority;let m=this.a[A];m&&m.indexOf(":")!==-1&&m.indexOf("[")===-1&&(m=`[${m}]`);const T=this.b[A],f=this.c[A];let r=`path=${encodeURIComponent(L.path)}`;return typeof f=="string"&&(r+=`&${e.connectionTokenQueryName}=${encodeURIComponent(f)}`),j.URI.from({scheme:F.isWeb?this.d:C.vscodeRemoteResource,authority:`${m}:${T}`,path:F.isWeb?(window.location.pathname+"/"+this.f).replace(/\/\/+/g,"/"):this.f,query:r})}}e.RemoteAuthorities=new D,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class V{asBrowserUri(L){const A=this.b(L,te);return this.uriToBrowserUri(A)}uriToBrowserUri(L){return L.scheme===C.vscodeRemote?e.RemoteAuthorities.rewrite(L):L.scheme===C.file&&(F.isNative||F.isWebWorker&&F.globals.origin===`${C.vscodeFileResource}://${V.a}`)?L.with({scheme:C.vscodeFileResource,authority:L.authority||V.a,query:null,fragment:null}):L}asFileUri(L){const A=this.b(L,te);return this.uriToFileUri(A)}uriToFileUri(L){return L.scheme===C.vscodeFileResource?L.with({scheme:C.file,authority:L.authority!==V.a?L.authority:null,query:null,fragment:null}):L}b(L,A){return j.URI.isUri(L)?L:j.URI.parse(A.toUrl(L))}}V.a="vscode-app",e.FileAccess=new V;var $;(function(E){const L=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);E.CoopAndCoep=Object.freeze(L.get("3"));const A="vscode-coi";function m(f){let r;typeof f=="string"?r=new URL(f).searchParams:f instanceof URL?r=f.searchParams:j.URI.isUri(f)&&(r=new URL(f.toString(!0)).searchParams);const s=r?.get(A);if(!!s)return L.get(s)}E.getHeadersFromQuery=m;function T(f,r,s){if(!globalThis.crossOriginIsolated)return;const o=r&&s?"3":s?"2":"1";f instanceof URLSearchParams?f.set(A,o):f[A]=o}E.addSearchParam=T})($=e.COI||(e.COI={}))}),define(ne[17],ie([0,1,8,9,4,2,3,10]),function(te,e,U,F,j,C,D,V){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function $(T){return(0,V.uriToFsPath)(T,!0)}e.originalFSPath=$;class E{constructor(f){this.a=f}compare(f,r,s=!1){return f===r?0:(0,D.compare)(this.getComparisonKey(f,s),this.getComparisonKey(r,s))}isEqual(f,r,s=!1){return f===r?!0:!f||!r?!1:this.getComparisonKey(f,s)===this.getComparisonKey(r,s)}getComparisonKey(f,r=!1){return f.with({path:this.a(f)?f.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(f){return this.a(f)}isEqualOrParent(f,r,s=!1){if(f.scheme===r.scheme){if(f.scheme===F.Schemas.file)return U.isEqualOrParent($(f),$(r),this.a(f))&&f.query===r.query&&(s||f.fragment===r.fragment);if((0,e.isEqualAuthority)(f.authority,r.authority))return U.isEqualOrParent(f.path,r.path,this.a(f),"/")&&f.query===r.query&&(s||f.fragment===r.fragment)}return!1}joinPath(f,...r){return V.URI.joinPath(f,...r)}basenameOrAuthority(f){return(0,e.basename)(f)||f.authority}basename(f){return j.posix.basename(f.path)}extname(f){return j.posix.extname(f.path)}dirname(f){if(f.path.length===0)return f;let r;return f.scheme===F.Schemas.file?r=V.URI.file(j.dirname($(f))).path:(r=j.posix.dirname(f.path),f.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${f.toString})) resulted in a relative path`),r="/")),f.with({path:r})}normalizePath(f){if(!f.path.length)return f;let r;return f.scheme===F.Schemas.file?r=V.URI.file(j.normalize($(f))).path:r=j.posix.normalize(f.path),f.with({path:r})}relativePath(f,r){if(f.scheme!==r.scheme||!(0,e.isEqualAuthority)(f.authority,r.authority))return;if(f.scheme===F.Schemas.file){const t=j.relative($(f),$(r));return C.isWindows?U.toSlashes(t):t}let s=f.path||"/";const o=r.path||"/";if(this.a(f)){let t=0;for(const a=Math.min(s.length,o.length);t<a&&!(s.charCodeAt(t)!==o.charCodeAt(t)&&s.charAt(t).toLowerCase()!==o.charAt(t).toLowerCase());t++);s=o.substr(0,t)+s.substr(t)}return j.posix.relative(s,o)}resolvePath(f,r){if(f.scheme===F.Schemas.file){const s=V.URI.file(j.resolve($(f),r));return f.with({authority:s.authority,path:s.path})}return r=U.toPosixPath(r),f.with({path:j.posix.resolve(f.path,r)})}isAbsolutePath(f){return!!f.path&&f.path[0]==="/"}isEqualAuthority(f,r){return f===r||f!==void 0&&r!==void 0&&(0,D.equalsIgnoreCase)(f,r)}hasTrailingPathSeparator(f,r=j.sep){if(f.scheme===F.Schemas.file){const s=$(f);return s.length>U.getRoot(s).length&&s[s.length-1]===r}else{const s=f.path;return s.length>1&&s.charCodeAt(s.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(f.fsPath)}}removeTrailingPathSeparator(f,r=j.sep){return(0,e.hasTrailingPathSeparator)(f,r)?f.with({path:f.path.substr(0,f.path.length-1)}):f}addTrailingPathSeparator(f,r=j.sep){let s=!1;if(f.scheme===F.Schemas.file){const o=$(f);s=o!==void 0&&o.length===U.getRoot(o).length&&o[o.length-1]===r}else{r="/";const o=f.path;s=o.length===1&&o.charCodeAt(o.length-1)===47}return!s&&!(0,e.hasTrailingPathSeparator)(f,r)?f.with({path:f.path+"/"}):f}}e.ExtUri=E,e.extUri=new E(()=>!1),e.extUriBiasedIgnorePathCase=new E(T=>T.scheme===F.Schemas.file?!C.isLinux:!0),e.extUriIgnorePathCase=new E(T=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function L(T,f){const r=[];for(let s=0;s<T.length;s++){const o=f(T[s]);T.some((t,a)=>a===s?!1:(0,e.isEqualOrParent)(o,f(t)))||r.push(T[s])}return r}e.distinctParents=L;var A;(function(T){T.META_DATA_LABEL="label",T.META_DATA_DESCRIPTION="description",T.META_DATA_SIZE="size",T.META_DATA_MIME="mime";function f(r){const s=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(a=>{const[n,l]=a.split(":");n&&l&&s.set(n,l)});const t=r.path.substring(0,r.path.indexOf(";"));return t&&s.set(T.META_DATA_MIME,t),s}T.parseMetaData=f})(A=e.DataUri||(e.DataUri={}));function m(T,f,r){if(f){let s=T.path;return s&&s[0]!==j.posix.sep&&(s=j.posix.sep+s),T.with({scheme:r,authority:f,path:s})}return T.with({scheme:r})}e.toLocalResource=m}),define(ne[18],ie([0,1,32,6,19,7,17,2,16]),function(te,e,U,F,j,C,D,V,$){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function E(y){return!!y&&typeof y.then=="function"}e.isThenable=E;function L(y){const u=new U.CancellationTokenSource,I=y(u.token),R=new Promise((W,X)=>{const ee=u.token.onCancellationRequested(()=>{ee.dispose(),u.dispose(),X(new F.CancellationError)});Promise.resolve(I).then(re=>{ee.dispose(),u.dispose(),W(re)},re=>{ee.dispose(),u.dispose(),X(re)})});return new class{cancel(){u.cancel()}then(W,X){return R.then(W,X)}catch(W){return this.then(void 0,W)}finally(W){return R.finally(W)}}}e.createCancelablePromise=L;function A(y,u,I){return new Promise((R,W)=>{const X=u.onCancellationRequested(()=>{X.dispose(),R(I)});y.then(R,W).finally(()=>X.dispose())})}e.raceCancellation=A;function m(y,u){return new Promise((I,R)=>{const W=u.onCancellationRequested(()=>{W.dispose(),R(new F.CancellationError)});y.then(I,R).finally(()=>W.dispose())})}e.raceCancellationError=m;async function T(y){let u=-1;const I=y.map((W,X)=>W.then(ee=>(u=X,ee))),R=await Promise.race(I);return y.forEach((W,X)=>{X!==u&&W.cancel()}),R}e.raceCancellablePromises=T;function f(y,u,I){let R;const W=setTimeout(()=>{R?.(void 0),I?.()},u);return Promise.race([y.finally(()=>clearTimeout(W)),new Promise(X=>R=X)])}e.raceTimeout=f;function r(y){return new Promise((u,I)=>{const R=y();E(R)?R.then(u,I):u(R)})}e.asPromise=r;class s{constructor(){this.a=null,this.b=null,this.d=null}queue(u){if(this.a){if(this.d=u,!this.b){const I=()=>{this.b=null;const R=this.queue(this.d);return this.d=null,R};this.b=new Promise(R=>{this.a.then(I,I).then(R)})}return new Promise((I,R)=>{this.b.then(I,R)})}return this.a=u(),new Promise((I,R)=>{this.a.then(W=>{this.a=null,I(W)},W=>{this.a=null,R(W)})})}}e.Throttler=s;class o{constructor(){this.a=Promise.resolve(null)}queue(u){return this.a=this.a.then(()=>u(),()=>u())}}e.Sequencer=o;class t{constructor(){this.a=new Map}queue(u,I){const W=(this.a.get(u)??Promise.resolve()).catch(()=>{}).then(I).finally(()=>{this.a.get(u)===W&&this.a.delete(u)});return this.a.set(u,W),W}}e.SequencerByKey=t;const a=(y,u)=>{let I=!0;const R=setTimeout(()=>{I=!1,u()},y);return{isTriggered:()=>I,dispose:()=>{clearTimeout(R),I=!1}}},n=y=>{let u=!0;return queueMicrotask(()=>{u&&(u=!1,y())}),{isTriggered:()=>u,dispose:()=>{u=!1}}};class l{constructor(u){this.defaultDelay=u,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(u,I=this.defaultDelay){this.g=u,this.h(),this.b||(this.b=new Promise((W,X)=>{this.d=W,this.f=X}).then(()=>{if(this.b=null,this.d=null,this.g){const W=this.g;return this.g=null,W()}}));const R=()=>{this.a=null,this.d?.(null)};return this.a=I===$.MicrotaskDelay?n(R):a(I,R),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new F.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.Delayer=l;class c{constructor(u){this.a=new l(u),this.b=new s}trigger(u,I){return this.a.trigger(()=>this.b.queue(u),I)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.ThrottledDelayer=c;class p{constructor(){this.a=!1,this.b=new Promise((u,I)=>{this.d=u})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.Barrier=p;class v extends p{constructor(u){super(),this.f=setTimeout(()=>this.open(),u)}open(){clearTimeout(this.f),super.open()}}e.AutoOpenBarrier=v;function P(y,u){return u?new Promise((I,R)=>{const W=setTimeout(()=>{X.dispose(),I()},y),X=u.onCancellationRequested(()=>{clearTimeout(W),X.dispose(),R(new F.CancellationError)})}):L(I=>P(y,I))}e.timeout=P;function g(y,u=0){const I=setTimeout(y,u);return(0,C.toDisposable)(()=>clearTimeout(I))}e.disposableTimeout=g;function S(y){const u=[];let I=0;const R=y.length;function W(){return I<R?y[I++]():null}function X(ee){ee!=null&&u.push(ee);const re=W();return re?re.then(X):Promise.resolve(u)}return Promise.resolve(null).then(X)}e.sequence=S;function w(y,u=R=>!!R,I=null){let R=0;const W=y.length,X=()=>{if(R>=W)return Promise.resolve(I);const ee=y[R++];return Promise.resolve(ee()).then(se=>u(se)?Promise.resolve(se):X())};return X()}e.first=w;function d(y,u=R=>!!R,I=null){if(y.length===0)return Promise.resolve(I);let R=y.length;const W=()=>{R=-1;for(const X of y)X.cancel?.()};return new Promise((X,ee)=>{for(const re of y)re.then(se=>{--R>=0&&u(se)?(W(),X(se)):R===0&&X(I)}).catch(se=>{--R>=0&&(W(),ee(se))})})}e.firstParallel=d;class N{constructor(u){this.a=0,this.d=u,this.f=[],this.b=0,this.g=new j.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(u){return this.a++,new Promise((I,R)=>{this.f.push({factory:u,c:I,e:R}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const u=this.f.shift();this.b++;const I=u.factory();I.then(u.c,u.e),I.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.Limiter=N;class z extends N{constructor(){super(1)}}e.Queue=z;class Y{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const u=new q;return this.b.add(u),u.p}d(){for(const[,u]of this.a)if(u.size>0)return!1;return!0}queueFor(u,I=D.extUri){const R=I.getComparisonKey(u);let W=this.a.get(R);return W||(W=new z,j.Event.once(W.onDrained)(()=>{W?.dispose(),this.a.delete(R),this.f()}),this.a.set(R,W)),W}f(){!this.d()||this.g()}g(){for(const u of this.b)u.complete();this.b.clear()}dispose(){for(const[,u]of this.a)u.dispose();this.a.clear(),this.g()}}e.ResourceQueue=Y;class J{constructor(u,I){this.a=-1,typeof u=="function"&&typeof I=="number"&&this.setIfNotSet(u,I)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(u,I){this.cancel(),this.a=setTimeout(()=>{this.a=-1,u()},I)}setIfNotSet(u,I){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,u()},I))}}e.TimeoutTimer=J;class _{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(u,I){this.cancel(),this.a=setInterval(()=>{u()},I)}}e.IntervalTimer=_;class M{constructor(u,I){this.b=-1,this.a=u,this.d=I,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(u=this.d){this.cancel(),this.b=setTimeout(this.f,u)}get delay(){return this.d}set delay(u){this.d=u}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.RunOnceScheduler=M;class i{constructor(u,I){I%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${I}ms is not a multiple of 1000ms.`),this.a=u,this.b=I,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(u=this.b){u%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${u}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(u/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.ProcessTimeRunOnceScheduler=i;class b extends M{constructor(u,I){super(u,I),this.j=[]}work(u){this.j.push(u),this.isScheduled()||this.schedule()}h(){const u=this.j;this.j=[],this.a?.(u)}dispose(){this.j=[],super.dispose()}}e.RunOnceWorker=b;class O extends C.Disposable{constructor(u,I){super(),this.g=u,this.h=I,this.a=[],this.b=this.B(new C.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(u){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+u.length>this.g.maxBufferedWork)return!1}else if(this.pending+u.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const I of u)this.a.push(I);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new M(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.ThrottledWorker=O,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=y=>{(0,V.setTimeout0)(()=>{if(u)return;const I=Date.now()+15;y(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,I-Date.now())}}))});let u=!1;return{dispose(){u||(u=!0)}}}:e.runWhenIdle=(y,u)=>{const I=requestIdleCallback(y,typeof u=="number"?{timeout:u}:void 0);let R=!1;return{dispose(){R||(R=!0,cancelIdleCallback(I))}}}}();class h{constructor(u){this.d=!1,this.a=()=>{try{this.f=u()}catch(I){this.g=I}finally{this.d=!0}},this.b=(0,e.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.IdleValue=h;async function Q(y,u,I){let R;for(let W=0;W<I;W++)try{return await y()}catch(X){R=X,await P(u)}throw R}e.retry=Q;class K{hasPending(u){return this.a?typeof u=="number"?this.a.taskId===u:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(u,I,R){return this.a={taskId:u,cancel:()=>R?.(),promise:I},I.then(()=>this.d(u),()=>this.d(u)),I}d(u){this.a&&u===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const u=this.b;this.b=void 0,u.run().then(u.promiseResolve,u.promiseReject)}}setNext(u){if(this.b)this.b.run=u;else{let I,R;const W=new Promise((X,ee)=>{I=X,R=ee});this.b={run:u,promise:W,promiseResolve:I,promiseReject:R}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.TaskSequentializer=K;class k{constructor(u,I=()=>Date.now()){this.d=u,this.f=I,this.a=0,this.b=0}increment(){const u=this.f();return u-this.a>this.d&&(this.a=u,this.b=0),this.b++,this.b}}e.IntervalCounter=k;class q{get isRejected(){return this.d}get isResolved(){return this.f}get isSettled(){return this.d||this.f}constructor(){this.d=!1,this.f=!1,this.p=new Promise((u,I)=>{this.a=u,this.b=I})}complete(u){return new Promise(I=>{this.a(u),this.f=!0,I()})}error(u){return new Promise(I=>{this.b(u),this.d=!0,I()})}cancel(){new Promise(u=>{this.b(new F.CancellationError),this.d=!0,u()})}}e.DeferredPromise=q;var B;(function(y){async function u(R){let W;const X=await Promise.all(R.map(ee=>ee.then(re=>re,re=>{W||(W=re)})));if(typeof W<"u")throw W;return X}y.settled=u;function I(R){return new Promise(async(W,X)=>{try{await R(W,X)}catch(ee){X(ee)}})}y.withAsyncBody=I})(B=e.Promises||(e.Promises={}));var G;(function(y){y[y.Initial=0]="Initial",y[y.DoneOK=1]="DoneOK",y[y.DoneError=2]="DoneError"})(G||(G={}));class H{static fromArray(u){return new H(I=>{I.emitMany(u)})}static fromPromise(u){return new H(async I=>{I.emitMany(await u)})}static fromPromises(u){return new H(async I=>{await Promise.all(u.map(async R=>I.emitOne(await R)))})}static merge(u){return new H(async I=>{await Promise.all(u.map(async R=>{for await(const W of R)I.emitOne(W)}))})}constructor(u){this.a=0,this.b=[],this.d=null,this.f=new j.Emitter,queueMicrotask(async()=>{const I={emitOne:R=>this.g(R),emitMany:R=>this.h(R),reject:R=>this.k(R)};try{await Promise.resolve(u(I)),this.j()}catch(R){this.k(R)}finally{I.emitOne=void 0,I.emitMany=void 0,I.reject=void 0}})}[Symbol.asyncIterator](){let u=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(u<this.b.length)return{done:!1,value:this.b[u++]};if(this.a===1)return{done:!0,value:void 0};await j.Event.toPromise(this.f.event)}while(!0)}}}static map(u,I){return new H(async R=>{for await(const W of u)R.emitOne(I(W))})}map(u){return H.map(this,u)}static filter(u,I){return new H(async R=>{for await(const W of u)I(W)&&R.emitOne(W)})}filter(u){return H.filter(this,u)}static coalesce(u){return H.filter(u,I=>!!I)}coalesce(){return H.coalesce(this)}static async toPromise(u){const I=[];for await(const R of u)I.push(R);return I}toPromise(){return H.toPromise(this)}g(u){this.a===0&&(this.b.push(u),this.f.fire())}h(u){this.a===0&&(this.b=this.b.concat(u),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(u){this.a===0&&(this.a=2,this.d=u,this.f.fire())}}H.EMPTY=H.fromArray([]),e.AsyncIterableObject=H;class Z extends H{constructor(u,I){super(I),this.l=u}cancel(){this.l.cancel()}}e.CancelableAsyncIterableObject=Z;function x(y){const u=new U.CancellationTokenSource,I=y(u.token);return new Z(u,async R=>{const W=u.token.onCancellationRequested(()=>{W.dispose(),u.dispose(),R.reject(new F.CancellationError)});try{for await(const X of I){if(u.token.isCancellationRequested)return;R.emitOne(X)}W.dispose(),u.dispose()}catch(X){W.dispose(),u.dispose(),R.reject(X)}})}e.createCancelableAsyncIterable=x}),define(ne[20],ie([0,1,33,18,8,13,4,2,3]),function(te,e,U,F,j,C,D,V,$){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function E(){return Object.create(null)}e.getEmptyExpression=E,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const L="[/\\\\]",A="[^/\\\\]",m=/\//g;function T(k,q){switch(k){case 0:return"";case 1:return`${A}*?`;default:return`(?:${L}|${A}+${L}${q?`|${L}${A}+`:""})*?`}}function f(k,q){if(!k)return[];const B=[];let G=!1,H=!1,Z="";for(const x of k){switch(x){case q:if(!G&&!H){B.push(Z),Z="";continue}break;case"{":G=!0;break;case"}":G=!1;break;case"[":H=!0;break;case"]":H=!1;break}Z+=x}return Z&&B.push(Z),B}e.splitGlobAware=f;function r(k){if(!k)return"";let q="";const B=f(k,e.GLOB_SPLIT);if(B.every(G=>G===e.GLOBSTAR))q=".*";else{let G=!1;B.forEach((H,Z)=>{if(H===e.GLOBSTAR){if(G)return;q+=T(2,Z===B.length-1)}else{let x=!1,y="",u=!1,I="";for(const R of H){if(R!=="}"&&x){y+=R;continue}if(u&&(R!=="]"||!I)){let W;R==="-"?W=R:(R==="^"||R==="!")&&!I?W="^":R===e.GLOB_SPLIT?W="":W=(0,$.escapeRegExpCharacters)(R),I+=W;continue}switch(R){case"{":x=!0;continue;case"[":u=!0;continue;case"}":{q+=`(?:${f(y,",").map(ee=>r(ee)).join("|")})`,x=!1,y="";break}case"]":{q+="["+I+"]",u=!1,I="";break}case"?":q+=A;continue;case"*":q+=T(1);continue;default:q+=(0,$.escapeRegExpCharacters)(R)}}Z<B.length-1&&(B[Z+1]!==e.GLOBSTAR||Z+2<B.length)&&(q+=L)}G=H===e.GLOBSTAR})}return q}const s=/^\*\*\/\*\.[\w\.-]+$/,o=/^\*\*\/([\w\.-]+)\/?$/,t=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,a=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,n=/^\*\*((\/[\w\.-]+)+)\/?$/,l=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,c=new C.LRUCache(1e4),p=function(){return!1},v=function(){return null};function P(k,q){if(!k)return v;let B;typeof k!="string"?B=k.pattern:B=k,B=B.trim();const G=`${B}_${!!q.trimForExclusions}`;let H=c.get(G);if(H)return g(H,k);let Z;return s.test(B)?H=w(B.substr(4),B):(Z=o.exec(S(B,q)))?H=d(Z[1],B):(q.trimForExclusions?a:t).test(B)?H=N(B,q):(Z=n.exec(S(B,q)))?H=z(Z[1].substr(1),B,!0):(Z=l.exec(S(B,q)))?H=z(Z[1],B,!1):H=Y(B),c.set(G,H),g(H,k)}function g(k,q){if(typeof q=="string")return k;const B=function(G,H){return(0,j.isEqualOrParent)(G,q.base,!V.isLinux)?k((0,$.ltrim)(G.substr(q.base.length),D.sep),H):null};return B.allBasenames=k.allBasenames,B.allPaths=k.allPaths,B.basenames=k.basenames,B.patterns=k.patterns,B}function S(k,q){return q.trimForExclusions&&k.endsWith("/**")?k.substr(0,k.length-2):k}function w(k,q){return function(B,G){return typeof B=="string"&&B.endsWith(k)?q:null}}function d(k,q){const B=`/${k}`,G=`\\${k}`,H=function(x,y){return typeof x!="string"?null:y?y===k?q:null:x===k||x.endsWith(B)||x.endsWith(G)?q:null},Z=[k];return H.basenames=Z,H.patterns=[q],H.allBasenames=Z,H}function N(k,q){const B=Q(k.slice(1,-1).split(",").map(y=>P(y,q)).filter(y=>y!==v),k),G=B.length;if(!G)return v;if(G===1)return B[0];const H=function(y,u){for(let I=0,R=B.length;I<R;I++)if(B[I](y,u))return k;return null},Z=B.find(y=>!!y.allBasenames);Z&&(H.allBasenames=Z.allBasenames);const x=B.reduce((y,u)=>u.allPaths?y.concat(u.allPaths):y,[]);return x.length&&(H.allPaths=x),H}function z(k,q,B){const G=D.sep===D.posix.sep,H=G?k:k.replace(m,D.sep),Z=D.sep+H,x=D.posix.sep+k;let y;return B?y=function(u,I){return typeof u=="string"&&(u===H||u.endsWith(Z)||!G&&(u===k||u.endsWith(x)))?q:null}:y=function(u,I){return typeof u=="string"&&(u===H||!G&&u===k)?q:null},y.allPaths=[(B?"*/":"./")+k],y}function Y(k){try{const q=new RegExp(`^${r(k)}$`);return function(B){return q.lastIndex=0,typeof B=="string"&&q.test(B)?k:null}}catch{return v}}function J(k,q,B){return!k||typeof q!="string"?!1:_(k)(q,void 0,B)}e.match=J;function _(k,q={}){if(!k)return p;if(typeof k=="string"||M(k)){const B=P(k,q);if(B===v)return p;const G=function(H,Z){return!!B(H,Z)};return B.allBasenames&&(G.allBasenames=B.allBasenames),B.allPaths&&(G.allPaths=B.allPaths),G}return O(k,q)}e.parse=_;function M(k){const q=k;return q?typeof q.base=="string"&&typeof q.pattern=="string":!1}e.isRelativePattern=M;function i(k){return k.allBasenames||[]}e.getBasenameTerms=i;function b(k){return k.allPaths||[]}e.getPathTerms=b;function O(k,q){const B=Q(Object.getOwnPropertyNames(k).map(y=>h(y,k[y],q)).filter(y=>y!==v)),G=B.length;if(!G)return v;if(!B.some(y=>!!y.requiresSiblings)){if(G===1)return B[0];const y=function(R,W){let X;for(let ee=0,re=B.length;ee<re;ee++){const se=B[ee](R,W);if(typeof se=="string")return se;(0,F.isThenable)(se)&&(X||(X=[]),X.push(se))}return X?(async()=>{for(const ee of X){const re=await ee;if(typeof re=="string")return re}return null})():null},u=B.find(R=>!!R.allBasenames);u&&(y.allBasenames=u.allBasenames);const I=B.reduce((R,W)=>W.allPaths?R.concat(W.allPaths):R,[]);return I.length&&(y.allPaths=I),y}const H=function(y,u,I){let R,W;for(let X=0,ee=B.length;X<ee;X++){const re=B[X];re.requiresSiblings&&I&&(u||(u=(0,D.basename)(y)),R||(R=u.substr(0,u.length-(0,D.extname)(y).length)));const se=re(y,u,R,I);if(typeof se=="string")return se;(0,F.isThenable)(se)&&(W||(W=[]),W.push(se))}return W?(async()=>{for(const X of W){const ee=await X;if(typeof ee=="string")return ee}return null})():null},Z=B.find(y=>!!y.allBasenames);Z&&(H.allBasenames=Z.allBasenames);const x=B.reduce((y,u)=>u.allPaths?y.concat(u.allPaths):y,[]);return x.length&&(H.allPaths=x),H}function h(k,q,B){if(q===!1)return v;const G=P(k,B);if(G===v)return v;if(typeof q=="boolean")return G;if(q){const H=q.when;if(typeof H=="string"){const Z=(x,y,u,I)=>{if(!I||!G(x,y))return null;const R=H.replace("$(basename)",()=>u),W=I(R);return(0,F.isThenable)(W)?W.then(X=>X?k:null):W?k:null};return Z.requiresSiblings=!0,Z}}return G}function Q(k,q){const B=k.filter(y=>!!y.basenames);if(B.length<2)return k;const G=B.reduce((y,u)=>{const I=u.basenames;return I?y.concat(I):y},[]);let H;if(q){H=[];for(let y=0,u=G.length;y<u;y++)H.push(q)}else H=B.reduce((y,u)=>{const I=u.patterns;return I?y.concat(I):y},[]);const Z=function(y,u){if(typeof y!="string")return null;if(!u){let R;for(R=y.length;R>0;R--){const W=y.charCodeAt(R-1);if(W===47||W===92)break}u=y.substr(R)}const I=G.indexOf(u);return I!==-1?H[I]:null};Z.basenames=G,Z.patterns=H,Z.allBasenames=G;const x=k.filter(y=>!y.basenames);return x.push(Z),x}function K(k,q){return(0,U.equals)(k,q,(B,G)=>typeof B=="string"&&typeof G=="string"?B===G:typeof B!="string"&&typeof G!="string"?B.base===G.base&&B.pattern===G.pattern:!1)}e.patternsEquals=K}),define(ne[21],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var U;(function(j){j[j.Unknown=0]="Unknown",j[j.Invalid=3]="Invalid",j[j.LF=1]="LF",j[j.CRLF=2]="CRLF"})(U=e.StringEOL||(e.StringEOL={}));function F(j){let C=0,D=0,V=0,$=0;for(let E=0,L=j.length;E<L;E++){const A=j.charCodeAt(E);A===13?(C===0&&(D=E),C++,E+1<L&&j.charCodeAt(E+1)===10?($|=2,E++):$|=3,V=E+1):A===10&&($|=1,C===0&&(D=E),C++,V=E+1)}return C===0&&(D=j.length),[C,D,j.length-V,$]}e.countEOL=F}),define(ne[22],ie([0,1,3,2,5]),function(te,e,U,F,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringBuilder=e.decodeUTF16LE=e.getPlatformTextDecoder=void 0;let C;function D(){return C||(C=new TextDecoder("UTF-16LE")),C}let V;function $(){return V||(V=new TextDecoder("UTF-16BE")),V}let E;function L(){return E||(E=F.isLittleEndian()?D():$()),E}e.getPlatformTextDecoder=L;function A(f,r,s){const o=new Uint16Array(f.buffer,r,s);return s>0&&(o[0]===65279||o[0]===65534)?m(f,r,s):D().decode(o)}e.decodeUTF16LE=A;function m(f,r,s){const o=[];let t=0;for(let a=0;a<s;a++){const n=j.readUInt16LE(f,r);r+=2,o[t++]=String.fromCharCode(n)}return o.join("")}class T{constructor(r){this.a=r|0,this.b=new Uint16Array(this.a),this.c=null,this.d=0}reset(){this.c=null,this.d=0}build(){return this.c!==null?(this.f(),this.c.join("")):this.e()}e(){if(this.d===0)return"";const r=new Uint16Array(this.b.buffer,0,this.d);return L().decode(r)}f(){const r=this.e();this.d=0,this.c===null?this.c=[r]:this.c[this.c.length]=r}appendCharCode(r){const s=this.a-this.d;s<=1&&(s===0||U.isHighSurrogate(r))&&this.f(),this.b[this.d++]=r}appendASCIICharCode(r){this.d===this.a&&this.f(),this.b[this.d++]=r}appendString(r){const s=r.length;if(this.d+s>=this.a){this.f(),this.c[this.c.length]=r;return}for(let o=0;o<s;o++)this.b[this.d++]=r.charCodeAt(o)}}e.StringBuilder=T}),define(ne[23],ie([0,1,5,22]),function(te,e,U,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressConsecutiveTextChanges=e.TextChange=void 0;function j($){return $.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class C{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(E,L,A,m){this.oldPosition=E,this.oldText=L,this.newPosition=A,this.newText=m}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${j(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${j(this.oldText)}")`:`(replace@${this.oldPosition} "${j(this.oldText)}" with "${j(this.newText)}")`}static a(E){return 4+2*E.length}static c(E,L,A){const m=L.length;U.writeUInt32BE(E,m,A),A+=4;for(let T=0;T<m;T++)U.writeUInt16LE(E,L.charCodeAt(T),A),A+=2;return A}static d(E,L){const A=U.readUInt32BE(E,L);return L+=4,(0,F.decodeUTF16LE)(E,L,A)}writeSize(){return 4+4+C.a(this.oldText)+C.a(this.newText)}write(E,L){return U.writeUInt32BE(E,this.oldPosition,L),L+=4,U.writeUInt32BE(E,this.newPosition,L),L+=4,L=C.c(E,this.oldText,L),L=C.c(E,this.newText,L),L}static read(E,L,A){const m=U.readUInt32BE(E,L);L+=4;const T=U.readUInt32BE(E,L);L+=4;const f=C.d(E,L);L+=C.a(f);const r=C.d(E,L);return L+=C.a(r),A.push(new C(m,f,T,r)),L}}e.TextChange=C;function D($,E){return $===null||$.length===0?E:new V($,E).compress()}e.compressConsecutiveTextChanges=D;class V{constructor(E,L){this.a=E,this.c=L,this.d=[],this.e=0,this.f=this.a.length,this.g=0,this.h=this.c.length,this.j=0}compress(){let E=0,L=0,A=this.n(E),m=this.l(L);for(;E<this.f||L<this.h;){if(A===null){this.k(m),m=this.l(++L);continue}if(m===null){this.m(A),A=this.n(++E);continue}if(m.oldEnd<=A.newPosition){this.k(m),m=this.l(++L);continue}if(A.newEnd<=m.oldPosition){this.m(A),A=this.n(++E);continue}if(m.oldPosition<A.newPosition){const[o,t]=V.r(m,A.newPosition-m.oldPosition);this.k(o),m=t;continue}if(A.newPosition<m.oldPosition){const[o,t]=V.q(A,m.oldPosition-A.newPosition);this.m(o),A=t;continue}let r,s;if(m.oldEnd===A.newEnd)r=A,s=m,A=this.n(++E),m=this.l(++L);else if(m.oldEnd<A.newEnd){const[o,t]=V.q(A,m.oldLength);r=o,s=m,A=t,m=this.l(++L)}else{const[o,t]=V.r(m,A.newLength);r=A,s=o,A=this.n(++E),m=t}this.d[this.e++]=new C(r.oldPosition,r.oldText,s.newPosition,s.newText),this.g+=r.newLength-r.oldLength,this.j+=s.newLength-s.oldLength}const T=V.s(this.d);return V.t(T)}k(E){this.d[this.e++]=V.o(this.g,E),this.j+=E.newLength-E.oldLength}l(E){return E<this.h?this.c[E]:null}m(E){this.d[this.e++]=V.p(this.j,E),this.g+=E.newLength-E.oldLength}n(E){return E<this.f?this.a[E]:null}static o(E,L){return new C(L.oldPosition-E,L.oldText,L.newPosition,L.newText)}static p(E,L){return new C(L.oldPosition,L.oldText,L.newPosition+E,L.newText)}static q(E,L){const A=E.newText.substr(0,L),m=E.newText.substr(L);return[new C(E.oldPosition,E.oldText,E.newPosition,A),new C(E.oldEnd,"",E.newPosition+L,m)]}static r(E,L){const A=E.oldText.substr(0,L),m=E.oldText.substr(L);return[new C(E.oldPosition,A,E.newPosition,E.newText),new C(E.oldPosition+L,m,E.newEnd,"")]}static s(E){if(E.length===0)return E;const L=[];let A=0,m=E[0];for(let T=1;T<E.length;T++){const f=E[T];m.oldEnd===f.oldPosition?m=new C(m.oldPosition,m.oldText+f.oldText,m.newPosition,m.newText+f.newText):(L[A++]=m,m=f)}return L[A++]=m,L}static t(E){if(E.length===0)return E;const L=[];let A=0;for(let m=0;m<E.length;m++){const T=E[m];T.oldText!==T.newText&&(L[A++]=T)}return L}}}),define(ne[24],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recomputeTreeMetadata=e.updateTreeMetadata=e.fixInsert=e.rbDelete=e.rightRotate=e.leftRotate=e.righttest=e.leftest=e.SENTINEL=e.NodeColor=e.TreeNode=void 0;class U{constructor(s,o){this.piece=s,this.color=o,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==e.SENTINEL)return j(this.right);let s=this;for(;s.parent!==e.SENTINEL&&s.parent.left!==s;)s=s.parent;return s.parent===e.SENTINEL?e.SENTINEL:s.parent}prev(){if(this.left!==e.SENTINEL)return C(this.left);let s=this;for(;s.parent!==e.SENTINEL&&s.parent.right!==s;)s=s.parent;return s.parent===e.SENTINEL?e.SENTINEL:s.parent}detach(){this.parent=null,this.left=null,this.right=null}}e.TreeNode=U;var F;(function(r){r[r.Black=0]="Black",r[r.Red=1]="Red"})(F=e.NodeColor||(e.NodeColor={})),e.SENTINEL=new U(null,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,e.SENTINEL.color=0;function j(r){for(;r.left!==e.SENTINEL;)r=r.left;return r}e.leftest=j;function C(r){for(;r.right!==e.SENTINEL;)r=r.right;return r}e.righttest=C;function D(r){return r===e.SENTINEL?0:r.size_left+r.piece.length+D(r.right)}function V(r){return r===e.SENTINEL?0:r.lf_left+r.piece.lineFeedCnt+V(r.right)}function $(){e.SENTINEL.parent=e.SENTINEL}function E(r,s){const o=s.right;o.size_left+=s.size_left+(s.piece?s.piece.length:0),o.lf_left+=s.lf_left+(s.piece?s.piece.lineFeedCnt:0),s.right=o.left,o.left!==e.SENTINEL&&(o.left.parent=s),o.parent=s.parent,s.parent===e.SENTINEL?r.root=o:s.parent.left===s?s.parent.left=o:s.parent.right=o,o.left=s,s.parent=o}e.leftRotate=E;function L(r,s){const o=s.left;s.left=o.right,o.right!==e.SENTINEL&&(o.right.parent=s),o.parent=s.parent,s.size_left-=o.size_left+(o.piece?o.piece.length:0),s.lf_left-=o.lf_left+(o.piece?o.piece.lineFeedCnt:0),s.parent===e.SENTINEL?r.root=o:s===s.parent.right?s.parent.right=o:s.parent.left=o,o.right=s,s.parent=o}e.rightRotate=L;function A(r,s){let o,t;if(s.left===e.SENTINEL?(t=s,o=t.right):s.right===e.SENTINEL?(t=s,o=t.left):(t=j(s.right),o=t.right),t===r.root){r.root=o,o.color=0,s.detach(),$(),r.root.parent=e.SENTINEL;return}const a=t.color===1;if(t===t.parent.left?t.parent.left=o:t.parent.right=o,t===s?(o.parent=t.parent,f(r,o)):(t.parent===s?o.parent=t:o.parent=t.parent,f(r,o),t.left=s.left,t.right=s.right,t.parent=s.parent,t.color=s.color,s===r.root?r.root=t:s===s.parent.left?s.parent.left=t:s.parent.right=t,t.left!==e.SENTINEL&&(t.left.parent=t),t.right!==e.SENTINEL&&(t.right.parent=t),t.size_left=s.size_left,t.lf_left=s.lf_left,f(r,t)),s.detach(),o.parent.left===o){const l=D(o),c=V(o);if(l!==o.parent.size_left||c!==o.parent.lf_left){const p=l-o.parent.size_left,v=c-o.parent.lf_left;o.parent.size_left=l,o.parent.lf_left=c,T(r,o.parent,p,v)}}if(f(r,o.parent),a){$();return}let n;for(;o!==r.root&&o.color===0;)o===o.parent.left?(n=o.parent.right,n.color===1&&(n.color=0,o.parent.color=1,E(r,o.parent),n=o.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,o=o.parent):(n.right.color===0&&(n.left.color=0,n.color=1,L(r,n),n=o.parent.right),n.color=o.parent.color,o.parent.color=0,n.right.color=0,E(r,o.parent),o=r.root)):(n=o.parent.left,n.color===1&&(n.color=0,o.parent.color=1,L(r,o.parent),n=o.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,o=o.parent):(n.left.color===0&&(n.right.color=0,n.color=1,E(r,n),n=o.parent.left),n.color=o.parent.color,o.parent.color=0,n.left.color=0,L(r,o.parent),o=r.root));o.color=0,$()}e.rbDelete=A;function m(r,s){for(f(r,s);s!==r.root&&s.parent.color===1;)if(s.parent===s.parent.parent.left){const o=s.parent.parent.right;o.color===1?(s.parent.color=0,o.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.right&&(s=s.parent,E(r,s)),s.parent.color=0,s.parent.parent.color=1,L(r,s.parent.parent))}else{const o=s.parent.parent.left;o.color===1?(s.parent.color=0,o.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.left&&(s=s.parent,L(r,s)),s.parent.color=0,s.parent.parent.color=1,E(r,s.parent.parent))}r.root.color=0}e.fixInsert=m;function T(r,s,o,t){for(;s!==r.root&&s!==e.SENTINEL;)s.parent.left===s&&(s.parent.size_left+=o,s.parent.lf_left+=t),s=s.parent}e.updateTreeMetadata=T;function f(r,s){let o=0,t=0;if(s!==r.root){for(;s!==r.root&&s===s.parent.right;)s=s.parent;if(s!==r.root)for(s=s.parent,o=D(s.left)-s.size_left,t=V(s.left)-s.lf_left,s.size_left+=o,s.lf_left+=t;s!==r.root&&(o!==0||t!==0);)s.parent.left===s&&(s.parent.size_left+=o,s.parent.lf_left+=t),s=s.parent}}e.recomputeTreeMetadata=f}),define(ne[11],ie([0,1,34,12,25,24,35]),function(te,e,U,F,j,C,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeBase=e.StringBuffer=e.Piece=e.createLineStarts=e.createLineStartsFast=void 0;const V=65535;function $(o){let t;return o[o.length-1]<65536?t=new Uint16Array(o.length):t=new Uint32Array(o.length),t.set(o,0),t}class E{constructor(t,a,n,l,c){this.lineStarts=t,this.cr=a,this.lf=n,this.crlf=l,this.isBasicASCII=c}}function L(o,t=!0){const a=[0];let n=1;for(let l=0,c=o.length;l<c;l++){const p=o.charCodeAt(l);p===13?l+1<c&&o.charCodeAt(l+1)===10?(a[n++]=l+2,l++):a[n++]=l+1:p===10&&(a[n++]=l+1)}return t?$(a):a}e.createLineStartsFast=L;function A(o,t){o.length=0,o[0]=0;let a=1,n=0,l=0,c=0,p=!0;for(let P=0,g=t.length;P<g;P++){const S=t.charCodeAt(P);S===13?P+1<g&&t.charCodeAt(P+1)===10?(c++,o[a++]=P+2,P++):(n++,o[a++]=P+1):S===10?(l++,o[a++]=P+1):p&&S!==9&&(S<32||S>126)&&(p=!1)}const v=new E($(o),n,l,c,p);return o.length=0,v}e.createLineStarts=A;class m{constructor(t,a,n,l,c){this.bufferIndex=t,this.start=a,this.end=n,this.lineFeedCnt=l,this.length=c}}e.Piece=m;class T{constructor(t,a){this.buffer=t,this.lineStarts=a}}e.StringBuffer=T;class f{constructor(t,a){this.a=[],this.c=t,this.d=a,this.b=0,t.root!==C.SENTINEL&&t.iterate(t.root,n=>(n!==C.SENTINEL&&this.a.push(n.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}}class r{constructor(t){this.a=t,this.b=[]}get(t){for(let a=this.b.length-1;a>=0;a--){const n=this.b[a];if(n.nodeStartOffset<=t&&n.nodeStartOffset+n.node.piece.length>=t)return n}return null}get2(t){for(let a=this.b.length-1;a>=0;a--){const n=this.b[a];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<t&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=t)return n}return null}set(t){this.b.length>=this.a&&this.b.shift(),this.b.push(t)}validate(t){let a=!1;const n=this.b;for(let l=0;l<n.length;l++){const c=n[l];if(c.node.parent===null||c.nodeStartOffset>=t){n[l]=null,a=!0;continue}}if(a){const l=[];for(const c of n)c!==null&&l.push(c);this.b=l}}}class s{constructor(t,a,n){this.create(t,a,n)}create(t,a,n){this.a=[new T("",[0])],this.g={line:0,column:0},this.root=C.SENTINEL,this.b=1,this.c=0,this.d=a,this.e=a.length,this.f=n;let l=null;for(let c=0,p=t.length;c<p;c++)if(t[c].buffer.length>0){t[c].lineStarts||(t[c].lineStarts=L(t[c].buffer));const v=new m(c+1,{line:0,column:0},{line:t[c].lineStarts.length-1,column:t[c].buffer.length-t[c].lineStarts[t[c].lineStarts.length-1]},t[c].lineStarts.length-1,t[c].buffer.length);this.a.push(t[c]),l=this.S(l,v)}this.h=new r(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(t){const a=V,n=a-Math.floor(a/3),l=n*2;let c="",p=0;const v=[];if(this.iterate(this.root,P=>{const g=this.R(P),S=g.length;if(p<=n||p+S<l)return c+=g,p+=S,!0;const w=c.replace(/\r\n|\r|\n/g,t);return v.push(new T(w,L(w))),c=g,p=S,!0}),p>0){const P=c.replace(/\r\n|\r|\n/g,t);v.push(new T(P,L(P)))}this.create(v,t,!0)}getEOL(){return this.d}setEOL(t){this.d=t,this.e=this.d.length,this.normalizeEOL(t)}createSnapshot(t){return new f(this,t)}equal(t){if(this.getLength()!==t.getLength()||this.getLineCount()!==t.getLineCount())return!1;const a=0;return this.iterate(this.root,l=>{if(l===C.SENTINEL)return!0;const c=this.R(l),p=c.length,v=t.G(a),P=t.G(a+p),g=t.getValueInRange2(v,P);return c===g})}getOffsetAt(t,a){let n=0,l=this.root;for(;l!==C.SENTINEL;)if(l.left!==C.SENTINEL&&l.lf_left+1>=t)l=l.left;else{if(l.lf_left+l.piece.lineFeedCnt+1>=t)return n+=l.size_left,n+=this.B(l,t-l.lf_left-2)+a-1;t-=l.lf_left+l.piece.lineFeedCnt,n+=l.size_left+l.piece.length,l=l.right}return n}getPositionAt(t){t=Math.floor(t),t=Math.max(0,t);let a=this.root,n=0;const l=t;for(;a!==C.SENTINEL;)if(a.size_left!==0&&a.size_left>=t)a=a.left;else if(a.size_left+a.piece.length>=t){const c=this.A(a,t-a.size_left);if(n+=a.lf_left+c.index,c.index===0){const p=this.getOffsetAt(n+1,1),v=l-p;return new U.Position(n+1,v+1)}return new U.Position(n+1,c.remainder+1)}else if(t-=a.size_left+a.piece.length,n+=a.lf_left+a.piece.lineFeedCnt,a.right===C.SENTINEL){const c=this.getOffsetAt(n+1,1),p=l-t-c;return new U.Position(n+1,p+1)}else a=a.right;return new U.Position(1,1)}getValueInRange(t,a){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return"";const n=this.H(t.startLineNumber,t.startColumn),l=this.H(t.endLineNumber,t.endColumn),c=this.getValueInRange2(n,l);return a?a!==this.d||!this.f?c.replace(/\r\n|\r|\n/g,a):a===this.getEOL()&&this.f?c:c.replace(/\r\n|\r|\n/g,a):c}getValueInRange2(t,a){if(t.node===a.node){const v=t.node,P=this.a[v.piece.bufferIndex].buffer,g=this.u(v.piece.bufferIndex,v.piece.start);return P.substring(g+t.remainder,g+a.remainder)}let n=t.node;const l=this.a[n.piece.bufferIndex].buffer,c=this.u(n.piece.bufferIndex,n.piece.start);let p=l.substring(c+t.remainder,c+n.piece.length);for(n=n.next();n!==C.SENTINEL;){const v=this.a[n.piece.bufferIndex].buffer,P=this.u(n.piece.bufferIndex,n.piece.start);if(n===a.node){p+=v.substring(P,P+a.remainder);break}else p+=v.substr(P,n.piece.length);n=n.next()}return p}getLinesContent(){const t=[];let a=0,n="",l=!1;return this.iterate(this.root,c=>{if(c===C.SENTINEL)return!0;const p=c.piece;let v=p.length;if(v===0)return!0;const P=this.a[p.bufferIndex].buffer,g=this.a[p.bufferIndex].lineStarts,S=p.start.line,w=p.end.line;let d=g[S]+p.start.column;if(l&&(P.charCodeAt(d)===10&&(d++,v--),t[a++]=n,n="",l=!1,v===0))return!0;if(S===w)return!this.f&&P.charCodeAt(d+v-1)===13?(l=!0,n+=P.substr(d,v-1)):n+=P.substr(d,v),!0;n+=this.f?P.substring(d,Math.max(d,g[S+1]-this.e)):P.substring(d,g[S+1]).replace(/(\r\n|\r|\n)$/,""),t[a++]=n;for(let N=S+1;N<w;N++)n=this.f?P.substring(g[N],g[N+1]-this.e):P.substring(g[N],g[N+1]).replace(/(\r\n|\r|\n)$/,""),t[a++]=n;return!this.f&&P.charCodeAt(g[w]+p.end.column-1)===13?(l=!0,p.end.column===0?a--:n=P.substr(g[w],p.end.column-1)):n=P.substr(g[w],p.end.column),!0}),l&&(t[a++]=n,n=""),t[a++]=n,t}getLength(){return this.c}getLineCount(){return this.b}getLineContent(t){return this.j.lineNumber===t?this.j.value:(this.j.lineNumber=t,t===this.b?this.j.value=this.getLineRawContent(t):this.f?this.j.value=this.getLineRawContent(t,this.e):this.j.value=this.getLineRawContent(t).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(t){if(t.remainder===t.node.piece.length){const a=t.node.next();if(!a)return 0;const n=this.a[a.piece.bufferIndex],l=this.u(a.piece.bufferIndex,a.piece.start);return n.buffer.charCodeAt(l)}else{const a=this.a[t.node.piece.bufferIndex],l=this.u(t.node.piece.bufferIndex,t.node.piece.start)+t.remainder;return a.buffer.charCodeAt(l)}}getLineCharCode(t,a){const n=this.H(t,a+1);return this.l(n)}getLineLength(t){if(t===this.getLineCount()){const a=this.getOffsetAt(t,1);return this.getLength()-a}return this.getOffsetAt(t+1,1)-this.getOffsetAt(t,1)-this.e}getCharCode(t){const a=this.G(t);return this.l(a)}findMatchesInNode(t,a,n,l,c,p,v,P,g,S,w){const d=this.a[t.piece.bufferIndex],N=this.u(t.piece.bufferIndex,t.piece.start),z=this.u(t.piece.bufferIndex,c),Y=this.u(t.piece.bufferIndex,p);let J;const _={line:0,column:0};let M,i;a._wordSeparators?(M=d.buffer.substring(z,Y),i=b=>b+z,a.reset(0)):(M=d.buffer,i=b=>b,a.reset(z));do if(J=a.next(M),J){if(i(J.index)>=Y)return S;this.s(t,i(J.index)-N,_);const b=this.t(t.piece.bufferIndex,c,_),O=_.line===c.line?_.column-c.column+l:_.column+1,h=O+J[0].length;if(w[S++]=(0,D.createFindMatch)(new F.Range(n+b,O,n+b,h),J,P),i(J.index)+J[0].length>=Y||S>=g)return S}while(J);return S}findMatchesLineByLine(t,a,n,l){const c=[];let p=0;const v=new D.Searcher(a.wordSeparators,a.regex);let P=this.H(t.startLineNumber,t.startColumn);if(P===null)return[];const g=this.H(t.endLineNumber,t.endColumn);if(g===null)return[];let S=this.s(P.node,P.remainder);const w=this.s(g.node,g.remainder);if(P.node===g.node)return this.findMatchesInNode(P.node,v,t.startLineNumber,t.startColumn,S,w,a,n,l,p,c),c;let d=t.startLineNumber,N=P.node;for(;N!==g.node;){const Y=this.t(N.piece.bufferIndex,S,N.piece.end);if(Y>=1){const _=this.a[N.piece.bufferIndex].lineStarts,M=this.u(N.piece.bufferIndex,N.piece.start),i=_[S.line+Y],b=d===t.startLineNumber?t.startColumn:1;if(p=this.findMatchesInNode(N,v,d,b,S,this.s(N,i-M),a,n,l,p,c),p>=l)return c;d+=Y}const J=d===t.startLineNumber?t.startColumn-1:0;if(d===t.endLineNumber){const _=this.getLineContent(d).substring(J,t.endColumn-1);return p=this.n(a,v,_,t.endLineNumber,J,p,c,n,l),c}if(p=this.n(a,v,this.getLineContent(d).substr(J),d,J,p,c,n,l),p>=l)return c;d++,P=this.H(d,1),N=P.node,S=this.s(P.node,P.remainder)}if(d===t.endLineNumber){const Y=d===t.startLineNumber?t.startColumn-1:0,J=this.getLineContent(d).substring(Y,t.endColumn-1);return p=this.n(a,v,J,t.endLineNumber,Y,p,c,n,l),c}const z=d===t.startLineNumber?t.startColumn:1;return p=this.findMatchesInNode(g.node,v,d,z,S,w,a,n,l,p,c),c}n(t,a,n,l,c,p,v,P,g){const S=t.wordSeparators;if(!P&&t.simpleSearch){const d=t.simpleSearch,N=d.length,z=n.length;let Y=-N;for(;(Y=n.indexOf(d,Y+N))!==-1;)if((!S||(0,D.isValidMatch)(S,n,z,Y,N))&&(v[p++]=new j.FindMatch(new F.Range(l,Y+1+c,l,Y+1+N+c),null),p>=g))return p;return p}let w;a.reset(0);do if(w=a.next(n),w&&(v[p++]=(0,D.createFindMatch)(new F.Range(l,w.index+1+c,l,w.index+1+w[0].length+c),w,P),p>=g))return p;while(w);return p}insert(t,a,n=!1){if(this.f=this.f&&n,this.j.lineNumber=0,this.j.value="",this.root!==C.SENTINEL){const{node:l,remainder:c,nodeStartOffset:p}=this.G(t),v=l.piece,P=v.bufferIndex,g=this.s(l,c);if(l.piece.bufferIndex===0&&v.end.line===this.g.line&&v.end.column===this.g.column&&p+v.length===t&&a.length<V){this.F(l,a),this.y();return}if(p===t)this.o(a,l),this.h.validate(t);else if(p+l.piece.length>t){const S=[];let w=new m(v.bufferIndex,g,v.end,this.t(v.bufferIndex,g,v.end),this.u(P,v.end)-this.u(P,g));if(this.K()&&this.M(a)&&this.I(l,c)===10){const Y={line:w.start.line+1,column:0};w=new m(w.bufferIndex,Y,w.end,this.t(w.bufferIndex,Y,w.end),w.length-1),a+=`
`}if(this.K()&&this.L(a))if(this.I(l,c-1)===13){const Y=this.s(l,c-1);this.C(l,Y),a="\r"+a,l.piece.length===0&&S.push(l)}else this.C(l,g);else this.C(l,g);const d=this.w(a);w.length>0&&this.S(l,w);let N=l;for(let z=0;z<d.length;z++)N=this.S(N,d[z]);this.v(S)}else this.q(a,l)}else{const l=this.w(a);let c=this.T(null,l[0]);for(let p=1;p<l.length;p++)c=this.S(c,l[p])}this.y()}delete(t,a){if(this.j.lineNumber=0,this.j.value="",a<=0||this.root===C.SENTINEL)return;const n=this.G(t),l=this.G(t+a),c=n.node,p=l.node;if(c===p){const d=this.s(c,n.remainder),N=this.s(c,l.remainder);if(n.nodeStartOffset===t){if(a===c.piece.length){const z=c.next();(0,C.rbDelete)(this,c),this.N(z),this.y();return}this.D(c,N),this.h.validate(t),this.N(c),this.y();return}if(n.nodeStartOffset+c.piece.length===t+a){this.C(c,d),this.O(c),this.y();return}this.E(c,d,N),this.y();return}const v=[],P=this.s(c,n.remainder);this.C(c,P),this.h.validate(t),c.piece.length===0&&v.push(c);const g=this.s(p,l.remainder);this.D(p,g),p.piece.length===0&&v.push(p);const S=c.next();for(let d=S;d!==C.SENTINEL&&d!==p;d=d.next())v.push(d);const w=c.piece.length===0?c.prev():c;this.v(v),this.O(w),this.y()}o(t,a){const n=[];if(this.K()&&this.M(t)&&this.L(a)){const p=a.piece,v={line:p.start.line+1,column:0},P=new m(p.bufferIndex,v,p.end,this.t(p.bufferIndex,v,p.end),p.length-1);a.piece=P,t+=`
`,(0,C.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&n.push(a)}const l=this.w(t);let c=this.T(a,l[l.length-1]);for(let p=l.length-2;p>=0;p--)c=this.T(c,l[p]);this.N(c),this.v(n)}q(t,a){this.Q(t,a)&&(t+=`
`);const n=this.w(t),l=this.S(a,n[0]);let c=l;for(let p=1;p<n.length;p++)c=this.S(c,n[p]);this.N(l)}s(t,a,n){const l=t.piece,c=t.piece.bufferIndex,p=this.a[c].lineStarts,P=p[l.start.line]+l.start.column+a;let g=l.start.line,S=l.end.line,w=0,d=0,N=0;for(;g<=S&&(w=g+(S-g)/2|0,N=p[w],w!==S);)if(d=p[w+1],P<N)S=w-1;else if(P>=d)g=w+1;else break;return n?(n.line=w,n.column=P-N,null):{line:w,column:P-N}}t(t,a,n){if(n.column===0)return n.line-a.line;const l=this.a[t].lineStarts;if(n.line===l.length-1)return n.line-a.line;const c=l[n.line+1],p=l[n.line]+n.column;if(c>p+1)return n.line-a.line;const v=p-1;return this.a[t].buffer.charCodeAt(v)===13?n.line-a.line+1:n.line-a.line}u(t,a){return this.a[t].lineStarts[a.line]+a.column}v(t){for(let a=0;a<t.length;a++)(0,C.rbDelete)(this,t[a])}w(t){if(t.length>V){const S=[];for(;t.length>V;){const d=t.charCodeAt(V-1);let N;d===13||d>=55296&&d<=56319?(N=t.substring(0,V-1),t=t.substring(V-1)):(N=t.substring(0,V),t=t.substring(V));const z=L(N);S.push(new m(this.a.length,{line:0,column:0},{line:z.length-1,column:N.length-z[z.length-1]},z.length-1,N.length)),this.a.push(new T(N,z))}const w=L(t);return S.push(new m(this.a.length,{line:0,column:0},{line:w.length-1,column:t.length-w[w.length-1]},w.length-1,t.length)),this.a.push(new T(t,w)),S}let a=this.a[0].buffer.length;const n=L(t,!1);let l=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===a&&a!==0&&this.L(t)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},l=this.g;for(let S=0;S<n.length;S++)n[S]+=a+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(n.slice(1)),this.a[0].buffer+="_"+t,a+=1}else{if(a!==0)for(let S=0;S<n.length;S++)n[S]+=a;this.a[0].lineStarts=this.a[0].lineStarts.concat(n.slice(1)),this.a[0].buffer+=t}const c=this.a[0].buffer.length,p=this.a[0].lineStarts.length-1,v=c-this.a[0].lineStarts[p],P={line:p,column:v},g=new m(0,l,P,this.t(0,l,P),c-a);return this.g=P,[g]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(t,a=0){let n=this.root,l="";const c=this.h.get2(t);if(c){n=c.node;const p=this.B(n,t-c.nodeStartLineNumber-1),v=this.a[n.piece.bufferIndex].buffer,P=this.u(n.piece.bufferIndex,n.piece.start);if(c.nodeStartLineNumber+n.piece.lineFeedCnt===t)l=v.substring(P+p,P+n.piece.length);else{const g=this.B(n,t-c.nodeStartLineNumber);return v.substring(P+p,P+g-a)}}else{let p=0;const v=t;for(;n!==C.SENTINEL;)if(n.left!==C.SENTINEL&&n.lf_left>=t-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>t-1){const P=this.B(n,t-n.lf_left-2),g=this.B(n,t-n.lf_left-1),S=this.a[n.piece.bufferIndex].buffer,w=this.u(n.piece.bufferIndex,n.piece.start);return p+=n.size_left,this.h.set({node:n,nodeStartOffset:p,nodeStartLineNumber:v-(t-1-n.lf_left)}),S.substring(w+P,w+g-a)}else if(n.lf_left+n.piece.lineFeedCnt===t-1){const P=this.B(n,t-n.lf_left-2),g=this.a[n.piece.bufferIndex].buffer,S=this.u(n.piece.bufferIndex,n.piece.start);l=g.substring(S+P,S+n.piece.length);break}else t-=n.lf_left+n.piece.lineFeedCnt,p+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==C.SENTINEL;){const p=this.a[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const v=this.B(n,0),P=this.u(n.piece.bufferIndex,n.piece.start);return l+=p.substring(P,P+v-a),l}else{const v=this.u(n.piece.bufferIndex,n.piece.start);l+=p.substr(v,n.piece.length)}n=n.next()}return l}y(){let t=this.root,a=1,n=0;for(;t!==C.SENTINEL;)a+=t.lf_left+t.piece.lineFeedCnt,n+=t.size_left+t.piece.length,t=t.right;this.b=a,this.c=n,this.h.validate(this.c)}A(t,a){const n=t.piece,l=this.s(t,a),c=l.line-n.start.line;if(this.u(n.bufferIndex,n.end)-this.u(n.bufferIndex,n.start)===a){const p=this.t(t.piece.bufferIndex,n.start,l);if(p!==c)return{index:p,remainder:0}}return{index:c,remainder:l.column}}B(t,a){if(a<0)return 0;const n=t.piece,l=this.a[n.bufferIndex].lineStarts,c=n.start.line+a+1;return c>n.end.line?l[n.end.line]+n.end.column-l[n.start.line]-n.start.column:l[c]-l[n.start.line]-n.start.column}C(t,a){const n=t.piece,l=n.lineFeedCnt,c=this.u(n.bufferIndex,n.end),p=a,v=this.u(n.bufferIndex,p),P=this.t(n.bufferIndex,n.start,p),g=P-l,S=v-c,w=n.length+S;t.piece=new m(n.bufferIndex,n.start,p,P,w),(0,C.updateTreeMetadata)(this,t,S,g)}D(t,a){const n=t.piece,l=n.lineFeedCnt,c=this.u(n.bufferIndex,n.start),p=a,v=this.t(n.bufferIndex,p,n.end),P=this.u(n.bufferIndex,p),g=v-l,S=c-P,w=n.length+S;t.piece=new m(n.bufferIndex,p,n.end,v,w),(0,C.updateTreeMetadata)(this,t,S,g)}E(t,a,n){const l=t.piece,c=l.start,p=l.end,v=l.length,P=l.lineFeedCnt,g=a,S=this.t(l.bufferIndex,l.start,g),w=this.u(l.bufferIndex,a)-this.u(l.bufferIndex,c);t.piece=new m(l.bufferIndex,l.start,g,S,w),(0,C.updateTreeMetadata)(this,t,w-v,S-P);const d=new m(l.bufferIndex,n,p,this.t(l.bufferIndex,n,p),this.u(l.bufferIndex,p)-this.u(l.bufferIndex,n)),N=this.S(t,d);this.N(N)}F(t,a){this.Q(a,t)&&(a+=`
`);const n=this.K()&&this.L(a)&&this.M(t),l=this.a[0].buffer.length;this.a[0].buffer+=a;const c=L(a,!1);for(let N=0;N<c.length;N++)c[N]+=l;if(n){const N=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:l-N}}this.a[0].lineStarts=this.a[0].lineStarts.concat(c.slice(1));const p=this.a[0].lineStarts.length-1,v=this.a[0].buffer.length-this.a[0].lineStarts[p],P={line:p,column:v},g=t.piece.length+a.length,S=t.piece.lineFeedCnt,w=this.t(0,t.piece.start,P),d=w-S;t.piece=new m(t.piece.bufferIndex,t.piece.start,P,w,g),this.g=P,(0,C.updateTreeMetadata)(this,t,a.length,d)}G(t){let a=this.root;const n=this.h.get(t);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:t-n.nodeStartOffset};let l=0;for(;a!==C.SENTINEL;)if(a.size_left>t)a=a.left;else if(a.size_left+a.piece.length>=t){l+=a.size_left;const c={node:a,remainder:t-a.size_left,nodeStartOffset:l};return this.h.set(c),c}else t-=a.size_left+a.piece.length,l+=a.size_left+a.piece.length,a=a.right;return null}H(t,a){let n=this.root,l=0;for(;n!==C.SENTINEL;)if(n.left!==C.SENTINEL&&n.lf_left>=t-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>t-1){const c=this.B(n,t-n.lf_left-2),p=this.B(n,t-n.lf_left-1);return l+=n.size_left,{node:n,remainder:Math.min(c+a-1,p),nodeStartOffset:l}}else if(n.lf_left+n.piece.lineFeedCnt===t-1){const c=this.B(n,t-n.lf_left-2);if(c+a-1<=n.piece.length)return{node:n,remainder:c+a-1,nodeStartOffset:l};a-=n.piece.length-c;break}else t-=n.lf_left+n.piece.lineFeedCnt,l+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==C.SENTINEL;){if(n.piece.lineFeedCnt>0){const c=this.B(n,0),p=this.J(n);return{node:n,remainder:Math.min(a-1,c),nodeStartOffset:p}}else if(n.piece.length>=a-1){const c=this.J(n);return{node:n,remainder:a-1,nodeStartOffset:c}}else a-=n.piece.length;n=n.next()}return null}I(t,a){if(t.piece.lineFeedCnt<1)return-1;const n=this.a[t.piece.bufferIndex],l=this.u(t.piece.bufferIndex,t.piece.start)+a;return n.buffer.charCodeAt(l)}J(t){if(!t)return 0;let a=t.size_left;for(;t!==this.root;)t.parent.right===t&&(a+=t.parent.size_left+t.parent.piece.length),t=t.parent;return a}K(){return!(this.f&&this.d===`
`)}L(t){if(typeof t=="string")return t.charCodeAt(0)===10;if(t===C.SENTINEL||t.piece.lineFeedCnt===0)return!1;const a=t.piece,n=this.a[a.bufferIndex].lineStarts,l=a.start.line,c=n[l]+a.start.column;return l===n.length-1||n[l+1]>c+1?!1:this.a[a.bufferIndex].buffer.charCodeAt(c)===10}M(t){return typeof t=="string"?t.charCodeAt(t.length-1)===13:t===C.SENTINEL||t.piece.lineFeedCnt===0?!1:this.I(t,t.piece.length-1)===13}N(t){if(this.K()&&this.L(t)){const a=t.prev();this.M(a)&&this.P(a,t)}}O(t){if(this.K()&&this.M(t)){const a=t.next();this.L(a)&&this.P(t,a)}}P(t,a){const n=[],l=this.a[t.piece.bufferIndex].lineStarts;let c;t.piece.end.column===0?c={line:t.piece.end.line-1,column:l[t.piece.end.line]-l[t.piece.end.line-1]-1}:c={line:t.piece.end.line,column:t.piece.end.column-1};const p=t.piece.length-1,v=t.piece.lineFeedCnt-1;t.piece=new m(t.piece.bufferIndex,t.piece.start,c,v,p),(0,C.updateTreeMetadata)(this,t,-1,-1),t.piece.length===0&&n.push(t);const P={line:a.piece.start.line+1,column:0},g=a.piece.length-1,S=this.t(a.piece.bufferIndex,P,a.piece.end);a.piece=new m(a.piece.bufferIndex,P,a.piece.end,S,g),(0,C.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&n.push(a);const w=this.w(`\r
`);this.S(t,w[0]);for(let d=0;d<n.length;d++)(0,C.rbDelete)(this,n[d])}Q(t,a){if(this.K()&&this.M(t)){const n=a.next();if(this.L(n)){if(t+=`
`,n.piece.length===1)(0,C.rbDelete)(this,n);else{const l=n.piece,c={line:l.start.line+1,column:0},p=l.length-1,v=this.t(l.bufferIndex,c,l.end);n.piece=new m(l.bufferIndex,c,l.end,v,p),(0,C.updateTreeMetadata)(this,n,-1,-1)}return!0}}return!1}iterate(t,a){if(t===C.SENTINEL)return a(C.SENTINEL);const n=this.iterate(t.left,a);return n&&a(t)&&this.iterate(t.right,a)}R(t){if(t===C.SENTINEL)return"";const a=this.a[t.piece.bufferIndex],n=t.piece,l=this.u(n.bufferIndex,n.start),c=this.u(n.bufferIndex,n.end);return a.buffer.substring(l,c)}getPieceContent(t){const a=this.a[t.bufferIndex],n=this.u(t.bufferIndex,t.start),l=this.u(t.bufferIndex,t.end);return a.buffer.substring(n,l)}S(t,a){const n=new C.TreeNode(a,1);if(n.left=C.SENTINEL,n.right=C.SENTINEL,n.parent=C.SENTINEL,n.size_left=0,n.lf_left=0,this.root===C.SENTINEL)this.root=n,n.color=0;else if(t.right===C.SENTINEL)t.right=n,n.parent=t;else{const c=(0,C.leftest)(t.right);c.left=n,n.parent=c}return(0,C.fixInsert)(this,n),n}T(t,a){const n=new C.TreeNode(a,1);if(n.left=C.SENTINEL,n.right=C.SENTINEL,n.parent=C.SENTINEL,n.size_left=0,n.lf_left=0,this.root===C.SENTINEL)this.root=n,n.color=0;else if(t.left===C.SENTINEL)t.left=n,n.parent=t;else{const l=(0,C.righttest)(t.left);l.right=n,n.parent=l}return(0,C.fixInsert)(this,n),n}U(t){let a="";return this.iterate(t,n=>(a+=this.R(n),!0)),a}}e.PieceTreeBase=s}),define(ne[26],ie([0,1,19,3,12,25,11,21,23,7]),function(te,e,U,F,j,C,D,V,$,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBuffer=void 0;class L extends E.Disposable{constructor(m,T,f,r,s,o,t){super(),this.k=this.B(new U.Emitter),this.onDidChangeContent=this.k.event,this.f=T,this.j=!o,this.g=r,this.h=s,this.c=new D.PieceTreeBase(m,f,t)}equals(m){return!(m instanceof L)||this.f!==m.f||this.getEOL()!==m.getEOL()?!1:this.c.equal(m.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(m){return this.c.createSnapshot(m?this.f:"")}getOffsetAt(m,T){return this.c.getOffsetAt(m,T)}getPositionAt(m){return this.c.getPositionAt(m)}getRangeAt(m,T){const f=m+T,r=this.getPositionAt(m),s=this.getPositionAt(f);return new j.Range(r.lineNumber,r.column,s.lineNumber,s.column)}getValueInRange(m,T=0){if(m.isEmpty())return"";const f=this.l(T);return this.c.getValueInRange(m,f)}getValueLengthInRange(m,T=0){if(m.isEmpty())return 0;if(m.startLineNumber===m.endLineNumber)return m.endColumn-m.startColumn;const f=this.getOffsetAt(m.startLineNumber,m.startColumn),r=this.getOffsetAt(m.endLineNumber,m.endColumn);let s=0;const o=this.l(T),t=this.getEOL();if(o.length!==t.length){const a=o.length-t.length,n=m.endLineNumber-m.startLineNumber;s=a*n}return r-f+s}getCharacterCountInRange(m,T=0){if(this.j){let f=0;const r=m.startLineNumber,s=m.endLineNumber;for(let o=r;o<=s;o++){const t=this.getLineContent(o),a=o===r?m.startColumn-1:0,n=o===s?m.endColumn-1:t.length;for(let l=a;l<n;l++)F.isHighSurrogate(t.charCodeAt(l))?(f=f+1,l=l+1):f=f+1}return f+=this.l(T).length*(s-r),f}return this.getValueLengthInRange(m,T)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(m){return this.c.getLineContent(m)}getLineCharCode(m,T){return this.c.getLineCharCode(m,T)}getCharCode(m){return this.c.getCharCode(m)}getLineLength(m){return this.c.getLineLength(m)}getLineMinColumn(m){return 1}getLineMaxColumn(m){return this.getLineLength(m)+1}getLineFirstNonWhitespaceColumn(m){const T=F.firstNonWhitespaceIndex(this.getLineContent(m));return T===-1?0:T+1}getLineLastNonWhitespaceColumn(m){const T=F.lastNonWhitespaceIndex(this.getLineContent(m));return T===-1?0:T+2}l(m){switch(m){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(m){this.c.setEOL(m)}applyEdits(m,T,f){let r=this.g,s=this.h,o=this.j,t=!0,a=[];for(let g=0;g<m.length;g++){const S=m[g];t&&S._isTracked&&(t=!1);const w=S.range;if(S.text){let J=!0;o||(J=!F.isBasicASCII(S.text),o=J),!r&&J&&(r=F.containsRTL(S.text)),!s&&J&&(s=F.containsUnusualLineTerminators(S.text))}let d="",N=0,z=0,Y=0;if(S.text){let J;[N,z,Y,J]=(0,V.countEOL)(S.text);const _=this.getEOL();J===0||J===(_===`\r
`?2:1)?d=S.text:d=S.text.replace(/\r\n|\r|\n/g,_)}a[g]={sortIndex:g,identifier:S.identifier||null,range:w,rangeOffset:this.getOffsetAt(w.startLineNumber,w.startColumn),rangeLength:this.getValueLengthInRange(w),text:d,eolCount:N,firstLineLength:z,lastLineLength:Y,forceMoveMarkers:Boolean(S.forceMoveMarkers),isAutoWhitespaceEdit:S.isAutoWhitespaceEdit||!1}}a.sort(L.p);let n=!1;for(let g=0,S=a.length-1;g<S;g++){const w=a[g].range.getEndPosition(),d=a[g+1].range.getStartPosition();if(d.isBeforeOrEqual(w)){if(d.isBefore(w))throw new Error("Overlapping ranges are not allowed!");n=!0}}t&&(a=this.m(a));const l=f||T?L._getInverseEditRanges(a):[],c=[];if(T)for(let g=0;g<a.length;g++){const S=a[g],w=l[g];if(S.isAutoWhitespaceEdit&&S.range.isEmpty())for(let d=w.startLineNumber;d<=w.endLineNumber;d++){let N="";d===w.startLineNumber&&(N=this.getLineContent(S.range.startLineNumber),F.firstNonWhitespaceIndex(N)!==-1)||c.push({lineNumber:d,oldContent:N})}}let p=null;if(f){let g=0;p=[];for(let S=0;S<a.length;S++){const w=a[S],d=l[S],N=this.getValueInRange(w.range),z=w.rangeOffset+g;g+=w.text.length-N.length,p[S]={sortIndex:w.sortIndex,identifier:w.identifier,range:d,text:N,textChange:new $.TextChange(w.rangeOffset,N,z,w.text)}}n||p.sort((S,w)=>S.sortIndex-w.sortIndex)}this.g=r,this.h=s,this.j=o;const v=this.n(a);let P=null;if(T&&c.length>0){c.sort((g,S)=>S.lineNumber-g.lineNumber),P=[];for(let g=0,S=c.length;g<S;g++){const w=c[g].lineNumber;if(g>0&&c[g-1].lineNumber===w)continue;const d=c[g].oldContent,N=this.getLineContent(w);N.length===0||N===d||F.firstNonWhitespaceIndex(N)!==-1||P.push(w)}}return this.k.fire(),new C.ApplyEditsResult(p,v,P)}m(m){return m.length<1e3?m:[this._toSingleEditOperation(m)]}_toSingleEditOperation(m){let T=!1;const f=m[0].range,r=m[m.length-1].range,s=new j.Range(f.startLineNumber,f.startColumn,r.endLineNumber,r.endColumn);let o=f.startLineNumber,t=f.startColumn;const a=[];for(let v=0,P=m.length;v<P;v++){const g=m[v],S=g.range;T=T||g.forceMoveMarkers,a.push(this.getValueInRange(new j.Range(o,t,S.startLineNumber,S.startColumn))),g.text.length>0&&a.push(g.text),o=S.endLineNumber,t=S.endColumn}const n=a.join(""),[l,c,p]=(0,V.countEOL)(n);return{sortIndex:0,identifier:m[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:n,eolCount:l,firstLineLength:c,lastLineLength:p,forceMoveMarkers:T,isAutoWhitespaceEdit:!1}}n(m){m.sort(L.s);const T=[];for(let f=0;f<m.length;f++){const r=m[f],s=r.range.startLineNumber,o=r.range.startColumn,t=r.range.endLineNumber,a=r.range.endColumn;if(s===t&&o===a&&r.text.length===0)continue;r.text?(this.c.delete(r.rangeOffset,r.rangeLength),this.c.insert(r.rangeOffset,r.text,!0)):this.c.delete(r.rangeOffset,r.rangeLength);const n=new j.Range(s,o,t,a);T.push({range:n,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return T}findMatchesLineByLine(m,T,f,r){return this.c.findMatchesLineByLine(m,T,f,r)}getPieceTree(){return this.c}static _getInverseEditRange(m,T){const f=m.startLineNumber,r=m.startColumn,[s,o,t]=(0,V.countEOL)(T);let a;if(T.length>0){const n=s+1;n===1?a=new j.Range(f,r,f,r+o):a=new j.Range(f,r,f+n-1,t+1)}else a=new j.Range(f,r,f,r);return a}static _getInverseEditRanges(m){const T=[];let f=0,r=0,s=null;for(let o=0,t=m.length;o<t;o++){const a=m[o];let n,l;s?s.range.endLineNumber===a.range.startLineNumber?(n=f,l=r+(a.range.startColumn-s.range.endColumn)):(n=f+(a.range.startLineNumber-s.range.endLineNumber),l=a.range.startColumn):(n=a.range.startLineNumber,l=a.range.startColumn);let c;if(a.text.length>0){const p=a.eolCount+1;p===1?c=new j.Range(n,l,n,l+a.firstLineLength):c=new j.Range(n,l,n+p-1,a.lastLineLength+1)}else c=new j.Range(n,l,n,l);f=c.endLineNumber,r=c.endColumn,T.push(c),s=a}return T}static p(m,T){const f=j.Range.compareRangesUsingEnds(m.range,T.range);return f===0?m.sortIndex-T.sortIndex:f}static s(m,T){const f=j.Range.compareRangesUsingEnds(m.range,T.range);return f===0?T.sortIndex-m.sortIndex:-f}}e.PieceTreeTextBuffer=L}),define(ne[27],ie([0,1,3,11,26]),function(te,e,U,F,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBufferBuilder=void 0;class C{constructor($,E,L,A,m,T,f,r,s){this.a=$,this.b=E,this.c=L,this.d=A,this.e=m,this.f=T,this.g=f,this.h=r,this.j=s}k($){const E=this.c+this.d+this.e,L=this.c+this.e;return E===0?$===1?`
`:`\r
`:L>E/2?`\r
`:`
`}create($){const E=this.k($),L=this.a;if(this.j&&(E===`\r
`&&(this.c>0||this.d>0)||E===`
`&&(this.c>0||this.e>0)))for(let m=0,T=L.length;m<T;m++){const f=L[m].buffer.replace(/\r\n|\r|\n/g,E),r=(0,F.createLineStartsFast)(f);L[m]=new F.StringBuffer(f,r)}const A=new j.PieceTreeTextBuffer(L,this.b,E,this.f,this.g,this.h,this.j);return{textBuffer:A,disposable:A}}getFirstLineText($){return this.a[0].buffer.substr(0,$).split(/\r\n|\r|\n/)[0]}}class D{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk($){if($.length===0)return;this.a.length===0&&U.startsWithUTF8BOM($)&&(this.b=U.UTF8_BOM_CHARACTER,$=$.substr(1));const E=$.charCodeAt($.length-1);E===13||E>=55296&&E<=56319?(this.m($.substr(0,$.length-1),!1),this.c=!0,this.d=E):(this.m($,!1),this.c=!1,this.d=E)}m($,E){!E&&$.length===0||(this.c?this.n(String.fromCharCode(this.d)+$):this.n($))}n($){const E=(0,F.createLineStarts)(this.e,$);this.a.push(new F.StringBuffer($,E.lineStarts)),this.f+=E.cr,this.g+=E.lf,this.h+=E.crlf,this.l&&(this.l=E.isBasicASCII),!this.l&&!this.j&&(this.j=U.containsRTL($)),!this.l&&!this.k&&(this.k=U.containsUnusualLineTerminators($))}finish($=!0){return this.o(),new C(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,$)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const $=this.a[this.a.length-1];$.buffer+=String.fromCharCode(this.d);const E=(0,F.createLineStartsFast)($.buffer);$.lineStarts=E,this.d===13&&this.f++}}}e.PieceTreeTextBufferBuilder=D}),define(ne[28],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var U;(function(D){D.serviceIds=new Map,D.DI_TARGET="$di$target",D.DI_DEPENDENCIES="$di$dependencies";function V($){return $[D.DI_DEPENDENCIES]||[]}D.getServiceDependencies=V})(U=e._util||(e._util={})),e.IInstantiationService=j("instantiationService");function F(D,V,$){V[U.DI_TARGET]===V?V[U.DI_DEPENDENCIES].push({id:D,index:$}):(V[U.DI_DEPENDENCIES]=[{id:D,index:$}],V[U.DI_TARGET]=V)}function j(D){if(U.serviceIds.has(D))return U.serviceIds.get(D);const V=function($,E,L){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");F(V,$,L)};return V.toString=()=>D,U.serviceIds.set(D,V),V}e.createDecorator=j;function C(D){return D}e.refineServiceDecorator=C}),define(ne[29],ie([0,1,2,3,28]),function(te,e,U,F,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.implies=e.IContextKeyService=e.RawContextKey=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.expressionsAreEqualWithConstantSubstitution=e.ContextKeyExpr=e.ContextKeyExprType=void 0;const C=new Map;C.set("false",!1),C.set("true",!0),C.set("isMac",U.isMacintosh),C.set("isLinux",U.isLinux),C.set("isWindows",U.isWindows),C.set("isWeb",U.isWeb),C.set("isMacNative",U.isMacintosh&&!U.isWeb),C.set("isEdge",U.isEdge),C.set("isFirefox",U.isFirefox),C.set("isChrome",U.isChrome),C.set("isSafari",U.isSafari);const D=Object.prototype.hasOwnProperty;var V;(function(M){M[M.False=0]="False",M[M.True=1]="True",M[M.Defined=2]="Defined",M[M.Not=3]="Not",M[M.Equals=4]="Equals",M[M.NotEquals=5]="NotEquals",M[M.And=6]="And",M[M.Regex=7]="Regex",M[M.NotRegex=8]="NotRegex",M[M.Or=9]="Or",M[M.In=10]="In",M[M.NotIn=11]="NotIn",M[M.Greater=12]="Greater",M[M.GreaterEquals=13]="GreaterEquals",M[M.Smaller=14]="Smaller",M[M.SmallerEquals=15]="SmallerEquals"})(V=e.ContextKeyExprType||(e.ContextKeyExprType={}));class ${static false(){return A.INSTANCE}static true(){return m.INSTANCE}static has(i){return T.create(i)}static equals(i,b){return f.create(i,b)}static notEquals(i,b){return o.create(i,b)}static regex(i,b){return v.create(i,b)}static in(i,b){return r.create(i,b)}static notIn(i,b){return s.create(i,b)}static not(i){return t.create(i)}static and(...i){return S.create(i,null,!0)}static or(...i){return w.create(i,null,!0)}static greater(i,b){return n.create(i,b)}static greaterEquals(i,b){return l.create(i,b)}static smaller(i,b){return c.create(i,b)}static smallerEquals(i,b){return p.create(i,b)}static deserialize(i,b=!1){if(!!i)return this.c(i,b)}static c(i,b){const O=i.split("||");return w.create(O.map(h=>this.d(h,b)),null,!0)}static d(i,b){const O=i.split("&&");return S.create(O.map(h=>this.f(h,b)),null,!0)}static f(i,b){if(i=i.trim(),i.indexOf("!=")>=0){const O=i.split("!=");return o.create(O[0].trim(),this.g(O[1],b))}if(i.indexOf("==")>=0){const O=i.split("==");return f.create(O[0].trim(),this.g(O[1],b))}if(i.indexOf("=~")>=0){const O=i.split("=~");return v.create(O[0].trim(),this.h(O[1],b))}if(i.indexOf(" not in ")>=0){const O=i.split(" not in ");return s.create(O[0].trim(),this.g(O[1],b))}if(i.indexOf(" in ")>=0){const O=i.split(" in ");return r.create(O[0].trim(),this.g(O[1],b))}if(/^[^<=>]+>=[^<=>]+$/.test(i)){const O=i.split(">=");return l.create(O[0].trim(),O[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(i)){const O=i.split(">");return n.create(O[0].trim(),O[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(i)){const O=i.split("<=");return p.create(O[0].trim(),O[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(i)){const O=i.split("<");return c.create(O[0].trim(),O[1].trim())}return/^\!\s*/.test(i)?t.create(i.substr(1).trim()):T.create(i)}static g(i,b){if(i=i.trim(),i==="true")return!0;if(i==="false")return!1;const O=/^'([^']*)'$/.exec(i);return O?O[1].trim():i}static h(i,b){if((0,F.isFalsyOrWhitespace)(i)){if(b)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const O=i.indexOf("/"),h=i.lastIndexOf("/");if(O===h||O<0){if(b)throw new Error(`bad regexp-value '${i}', missing /-enclosure`);return console.warn(`bad regexp-value '${i}', missing /-enclosure`),null}const Q=i.slice(O+1,h),K=i[h+1]==="i"?"i":"";try{return new RegExp(Q,K)}catch(k){if(b)throw new Error(`bad regexp-value '${i}', parse error: ${k}`);return console.warn(`bad regexp-value '${i}', parse error: ${k}`),null}}}e.ContextKeyExpr=$;function E(M,i){const b=M?M.substituteConstants():void 0,O=i?i.substituteConstants():void 0;return!b&&!O?!0:!b||!O?!1:b.equals(O)}e.expressionsAreEqualWithConstantSubstitution=E;function L(M,i){return M.cmp(i)}class A{constructor(){this.type=0}cmp(i){return this.type-i.type}equals(i){return i.type===this.type}substituteConstants(){return this}evaluate(i){return!1}serialize(){return"false"}keys(){return[]}map(i){return this}negate(){return m.INSTANCE}}A.INSTANCE=new A,e.ContextKeyFalseExpr=A;class m{constructor(){this.type=1}cmp(i){return this.type-i.type}equals(i){return i.type===this.type}substituteConstants(){return this}evaluate(i){return!0}serialize(){return"true"}keys(){return[]}map(i){return this}negate(){return A.INSTANCE}}m.INSTANCE=new m,e.ContextKeyTrueExpr=m;class T{static create(i,b=null){const O=C.get(i);return typeof O=="boolean"?O?m.INSTANCE:A.INSTANCE:new T(i,b)}constructor(i,b){this.key=i,this.c=b,this.type=2}cmp(i){return i.type!==this.type?this.type-i.type:N(this.key,i.key)}equals(i){return i.type===this.type?this.key===i.key:!1}substituteConstants(){const i=C.get(this.key);return typeof i=="boolean"?i?m.INSTANCE:A.INSTANCE:this}evaluate(i){return!!i.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(i){return i.mapDefined(this.key)}negate(){return this.c||(this.c=t.create(this.key,this)),this.c}}e.ContextKeyDefinedExpr=T;class f{static create(i,b,O=null){if(typeof b=="boolean")return b?T.create(i,O):t.create(i,O);const h=C.get(i);return typeof h=="boolean"?b===(h?"true":"false")?m.INSTANCE:A.INSTANCE:new f(i,b,O)}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=4}cmp(i){return i.type!==this.type?this.type-i.type:z(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){const i=C.get(this.c);if(typeof i=="boolean"){const b=i?"true":"false";return this.d===b?m.INSTANCE:A.INSTANCE}return this}evaluate(i){return i.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(i){return i.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=o.create(this.c,this.d,this)),this.f}}e.ContextKeyEqualsExpr=f;class r{static create(i,b){return new r(i,b)}constructor(i,b){this.d=i,this.f=b,this.type=10,this.c=null}cmp(i){return i.type!==this.type?this.type-i.type:z(this.d,this.f,i.d,i.f)}equals(i){return i.type===this.type?this.d===i.d&&this.f===i.f:!1}substituteConstants(){return this}evaluate(i){const b=i.getValue(this.f),O=i.getValue(this.d);return Array.isArray(b)?b.includes(O):typeof O=="string"&&typeof b=="object"&&b!==null?D.call(b,O):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(i){return i.mapIn(this.d,this.f)}negate(){return this.c||(this.c=s.create(this.d,this.f)),this.c}}e.ContextKeyInExpr=r;class s{static create(i,b){return new s(i,b)}constructor(i,b){this.d=i,this.f=b,this.type=11,this.c=r.create(i,b)}cmp(i){return i.type!==this.type?this.type-i.type:this.c.cmp(i.c)}equals(i){return i.type===this.type?this.c.equals(i.c):!1}substituteConstants(){return this}evaluate(i){return!this.c.evaluate(i)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(i){return i.mapNotIn(this.d,this.f)}negate(){return this.c}}e.ContextKeyNotInExpr=s;class o{static create(i,b,O=null){if(typeof b=="boolean")return b?t.create(i,O):T.create(i,O);const h=C.get(i);return typeof h=="boolean"?b===(h?"true":"false")?A.INSTANCE:m.INSTANCE:new o(i,b,O)}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=5}cmp(i){return i.type!==this.type?this.type-i.type:z(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){const i=C.get(this.c);if(typeof i=="boolean"){const b=i?"true":"false";return this.d===b?A.INSTANCE:m.INSTANCE}return this}evaluate(i){return i.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(i){return i.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=f.create(this.c,this.d,this)),this.f}}e.ContextKeyNotEqualsExpr=o;class t{static create(i,b=null){const O=C.get(i);return typeof O=="boolean"?O?A.INSTANCE:m.INSTANCE:new t(i,b)}constructor(i,b){this.c=i,this.d=b,this.type=3}cmp(i){return i.type!==this.type?this.type-i.type:N(this.c,i.c)}equals(i){return i.type===this.type?this.c===i.c:!1}substituteConstants(){const i=C.get(this.c);return typeof i=="boolean"?i?A.INSTANCE:m.INSTANCE:this}evaluate(i){return!i.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(i){return i.mapNot(this.c)}negate(){return this.d||(this.d=T.create(this.c,this)),this.d}}e.ContextKeyNotExpr=t;function a(M,i){if(typeof M=="string"){const b=parseFloat(M);isNaN(b)||(M=b)}return typeof M=="string"||typeof M=="number"?i(M):A.INSTANCE}class n{static create(i,b,O=null){return a(b,h=>new n(i,h,O))}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=12}cmp(i){return i.type!==this.type?this.type-i.type:z(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){return this}evaluate(i){return typeof this.d=="string"?!1:parseFloat(i.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(i){return i.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=p.create(this.c,this.d,this)),this.f}}e.ContextKeyGreaterExpr=n;class l{static create(i,b,O=null){return a(b,h=>new l(i,h,O))}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=13}cmp(i){return i.type!==this.type?this.type-i.type:z(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){return this}evaluate(i){return typeof this.d=="string"?!1:parseFloat(i.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(i){return i.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=c.create(this.c,this.d,this)),this.f}}e.ContextKeyGreaterEqualsExpr=l;class c{static create(i,b,O=null){return a(b,h=>new c(i,h,O))}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=14}cmp(i){return i.type!==this.type?this.type-i.type:z(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){return this}evaluate(i){return typeof this.d=="string"?!1:parseFloat(i.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(i){return i.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=l.create(this.c,this.d,this)),this.f}}e.ContextKeySmallerExpr=c;class p{static create(i,b,O=null){return a(b,h=>new p(i,h,O))}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=15}cmp(i){return i.type!==this.type?this.type-i.type:z(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){return this}evaluate(i){return typeof this.d=="string"?!1:parseFloat(i.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(i){return i.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=n.create(this.c,this.d,this)),this.f}}e.ContextKeySmallerEqualsExpr=p;class v{static create(i,b){return new v(i,b)}constructor(i,b){this.d=i,this.f=b,this.type=7,this.c=null}cmp(i){if(i.type!==this.type)return this.type-i.type;if(this.d<i.d)return-1;if(this.d>i.d)return 1;const b=this.f?this.f.source:"",O=i.f?i.f.source:"";return b<O?-1:b>O?1:0}equals(i){if(i.type===this.type){const b=this.f?this.f.source:"",O=i.f?i.f.source:"";return this.d===i.d&&b===O}return!1}substituteConstants(){return this}evaluate(i){const b=i.getValue(this.d);return this.f?this.f.test(b):!1}serialize(){const i=this.f?`/${this.f.source}/${this.f.ignoreCase?"i":""}`:"/invalid/";return`${this.d} =~ ${i}`}keys(){return[this.d]}map(i){return i.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=P.create(this)),this.c}}e.ContextKeyRegexExpr=v;class P{static create(i){return new P(i)}constructor(i){this.c=i,this.type=8}cmp(i){return i.type!==this.type?this.type-i.type:this.c.cmp(i.c)}equals(i){return i.type===this.type?this.c.equals(i.c):!1}substituteConstants(){return this}evaluate(i){return!this.c.evaluate(i)}serialize(){throw new Error("Method not implemented.")}keys(){return this.c.keys()}map(i){return new P(this.c.map(i))}negate(){return this.c}}e.ContextKeyNotRegexExpr=P;function g(M){let i=null;for(let b=0,O=M.length;b<O;b++){const h=M[b].substituteConstants();if(M[b]!==h&&i===null){i=[];for(let Q=0;Q<b;Q++)i[Q]=M[Q]}i!==null&&(i[b]=h)}return i===null?M:i}class S{static create(i,b,O){return S.d(i,b,O)}constructor(i,b){this.expr=i,this.c=b,this.type=6}cmp(i){if(i.type!==this.type)return this.type-i.type;if(this.expr.length<i.expr.length)return-1;if(this.expr.length>i.expr.length)return 1;for(let b=0,O=this.expr.length;b<O;b++){const h=L(this.expr[b],i.expr[b]);if(h!==0)return h}return 0}equals(i){if(i.type===this.type){if(this.expr.length!==i.expr.length)return!1;for(let b=0,O=this.expr.length;b<O;b++)if(!this.expr[b].equals(i.expr[b]))return!1;return!0}return!1}substituteConstants(){const i=g(this.expr);return i===this.expr?this:S.create(i,this.c,!1)}evaluate(i){for(let b=0,O=this.expr.length;b<O;b++)if(!this.expr[b].evaluate(i))return!1;return!0}static d(i,b,O){const h=[];let Q=!1;for(const K of i)if(!!K){if(K.type===1){Q=!0;continue}if(K.type===0)return A.INSTANCE;if(K.type===6){h.push(...K.expr);continue}h.push(K)}if(h.length===0&&Q)return m.INSTANCE;if(h.length!==0){if(h.length===1)return h[0];h.sort(L);for(let K=1;K<h.length;K++)h[K-1].equals(h[K])&&(h.splice(K,1),K--);if(h.length===1)return h[0];for(;h.length>1;){const K=h[h.length-1];if(K.type!==9)break;h.pop();const k=h.pop(),q=h.length===0,B=w.create(K.expr.map(G=>S.create([G,k],null,O)),null,q);B&&(h.push(B),h.sort(L))}if(h.length===1)return h[0];if(O){for(let K=0;K<h.length;K++)for(let k=K+1;k<h.length;k++)if(h[K].negate().equals(h[k]))return A.INSTANCE;if(h.length===1)return h[0]}return new S(h,b)}}serialize(){return this.expr.map(i=>i.serialize()).join(" && ")}keys(){const i=[];for(const b of this.expr)i.push(...b.keys());return i}map(i){return new S(this.expr.map(b=>b.map(i)),null)}negate(){if(!this.c){const i=[];for(const b of this.expr)i.push(b.negate());this.c=w.create(i,this,!0)}return this.c}}class w{static create(i,b,O){return w.d(i,b,O)}constructor(i,b){this.expr=i,this.c=b,this.type=9}cmp(i){if(i.type!==this.type)return this.type-i.type;if(this.expr.length<i.expr.length)return-1;if(this.expr.length>i.expr.length)return 1;for(let b=0,O=this.expr.length;b<O;b++){const h=L(this.expr[b],i.expr[b]);if(h!==0)return h}return 0}equals(i){if(i.type===this.type){if(this.expr.length!==i.expr.length)return!1;for(let b=0,O=this.expr.length;b<O;b++)if(!this.expr[b].equals(i.expr[b]))return!1;return!0}return!1}substituteConstants(){const i=g(this.expr);return i===this.expr?this:w.create(i,this.c,!1)}evaluate(i){for(let b=0,O=this.expr.length;b<O;b++)if(this.expr[b].evaluate(i))return!0;return!1}static d(i,b,O){let h=[],Q=!1;if(i){for(let K=0,k=i.length;K<k;K++){const q=i[K];if(!!q){if(q.type===0){Q=!0;continue}if(q.type===1)return m.INSTANCE;if(q.type===9){h=h.concat(q.expr);continue}h.push(q)}}if(h.length===0&&Q)return A.INSTANCE;h.sort(L)}if(h.length!==0){if(h.length===1)return h[0];for(let K=1;K<h.length;K++)h[K-1].equals(h[K])&&(h.splice(K,1),K--);if(h.length===1)return h[0];if(O){for(let K=0;K<h.length;K++)for(let k=K+1;k<h.length;k++)if(h[K].negate().equals(h[k]))return m.INSTANCE;if(h.length===1)return h[0]}return new w(h,b)}}serialize(){return this.expr.map(i=>i.serialize()).join(" || ")}keys(){const i=[];for(const b of this.expr)i.push(...b.keys());return i}map(i){return new w(this.expr.map(b=>b.map(i)),null)}negate(){if(!this.c){const i=[];for(const b of this.expr)i.push(b.negate());for(;i.length>1;){const b=i.shift(),O=i.shift(),h=[];for(const Q of _(b))for(const K of _(O))h.push(S.create([Q,K],null,!1));i.unshift(w.create(h,null,!1))}this.c=w.create(i,this,!0)}return this.c}}class d extends T{static all(){return d.d.values()}constructor(i,b,O){super(i,null),this.f=b,typeof O=="object"?d.d.push({...O,key:i}):O!==!0&&d.d.push({key:i,description:O,type:b!=null?typeof b:void 0})}bindTo(i){return i.createKey(this.key,this.f)}getValue(i){return i.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(i){return f.create(this.key,i)}notEqualsTo(i){return o.create(this.key,i)}}d.d=[],e.RawContextKey=d,e.IContextKeyService=(0,j.createDecorator)("contextKeyService");function N(M,i){return M<i?-1:M>i?1:0}function z(M,i,b,O){return M<b?-1:M>b?1:i<O?-1:i>O?1:0}function Y(M,i){if(M.type===0||i.type===1)return!0;if(M.type===9)return i.type===9?J(M.expr,i.expr):!1;if(i.type===9){for(const b of i.expr)if(Y(M,b))return!0;return!1}if(M.type===6){if(i.type===6)return J(i.expr,M.expr);for(const b of M.expr)if(Y(b,i))return!0;return!1}return M.equals(i)}e.implies=Y;function J(M,i){let b=0,O=0;for(;b<M.length&&O<i.length;){const h=M[b].cmp(i[O]);if(h<0)return!1;h===0&&b++,O++}return b===M.length}function _(M){return M.type===9?M.expr:[M]}}),define(ne[30],ie([0,1,5,20,36,14,9,4,2,29]),function(te,e,U,F,j,C,D,V,$,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressOutputItemStreams=e.isTextStreamMime=e.NotebookWorkingCopyTypeIdentifier=e.CellStatusbarAlignment=e.NotebookSetting=e.notebookDocumentFilterMatch=e.isDocumentExcludePattern=e.NotebookEditorPriority=e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=e.diff=e.MimeTypeDisplayOrder=e.CellUri=e.CellEditType=e.SelectionStateType=e.NotebookCellsChangeType=e.RendererMessagingSpec=e.NotebookRendererMatch=e.NotebookCellExecutionState=e.NotebookRunState=e.RENDERER_NOT_AVAILABLE=e.RENDERER_EQUIVALENT_EXTENSIONS=e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=e.NOTEBOOK_DISPLAY_ORDER=e.CellKind=e.INTERACTIVE_WINDOW_EDITOR_ID=e.NOTEBOOK_DIFF_EDITOR_ID=e.NOTEBOOK_EDITOR_ID=void 0,e.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",e.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor",e.INTERACTIVE_WINDOW_EDITOR_ID="workbench.editor.interactive";var L;(function(h){h[h.Markup=1]="Markup",h[h.Code=2]="Code"})(L=e.CellKind||(e.CellKind={})),e.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",C.Mimes.latex,C.Mimes.markdown,"image/png","image/jpeg",C.Mimes.text],e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[C.Mimes.latex,C.Mimes.markdown,"application/json",C.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],e.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),e.RENDERER_NOT_AVAILABLE="_notAvailable";var A;(function(h){h[h.Running=1]="Running",h[h.Idle=2]="Idle"})(A=e.NotebookRunState||(e.NotebookRunState={}));var m;(function(h){h[h.Unconfirmed=1]="Unconfirmed",h[h.Pending=2]="Pending",h[h.Executing=3]="Executing"})(m=e.NotebookCellExecutionState||(e.NotebookCellExecutionState={}));var T;(function(h){h[h.WithHardKernelDependency=0]="WithHardKernelDependency",h[h.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",h[h.Pure=2]="Pure",h[h.Never=3]="Never"})(T=e.NotebookRendererMatch||(e.NotebookRendererMatch={}));var f;(function(h){h.Always="always",h.Never="never",h.Optional="optional"})(f=e.RendererMessagingSpec||(e.RendererMessagingSpec={}));var r;(function(h){h[h.ModelChange=1]="ModelChange",h[h.Move=2]="Move",h[h.ChangeCellLanguage=5]="ChangeCellLanguage",h[h.Initialize=6]="Initialize",h[h.ChangeCellMetadata=7]="ChangeCellMetadata",h[h.Output=8]="Output",h[h.OutputItem=9]="OutputItem",h[h.ChangeCellContent=10]="ChangeCellContent",h[h.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",h[h.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",h[h.ChangeCellMime=13]="ChangeCellMime",h[h.Unknown=100]="Unknown"})(r=e.NotebookCellsChangeType||(e.NotebookCellsChangeType={}));var s;(function(h){h[h.Handle=0]="Handle",h[h.Index=1]="Index"})(s=e.SelectionStateType||(e.SelectionStateType={}));var o;(function(h){h[h.Replace=1]="Replace",h[h.Output=2]="Output",h[h.Metadata=3]="Metadata",h[h.CellLanguage=4]="CellLanguage",h[h.DocumentMetadata=5]="DocumentMetadata",h[h.Move=6]="Move",h[h.OutputItems=7]="OutputItems",h[h.PartialMetadata=8]="PartialMetadata",h[h.PartialInternalMetadata=9]="PartialInternalMetadata"})(o=e.CellEditType||(e.CellEditType={}));var t;(function(h){h.scheme=D.Schemas.vscodeNotebookCell;const Q=["W","X","Y","Z","a","b","c","d","e","f"],K=new RegExp(`^[${Q.join("")}]+`),k=7;function q(y,u){const I=u.toString(k),W=`${I.length<Q.length?Q[I.length-1]:"z"}${I}s${(0,U.encodeBase64)(U.VSBuffer.fromString(y.scheme),!0,!0)}`;return y.with({scheme:h.scheme,fragment:W})}h.generate=q;function B(y){if(y.scheme!==h.scheme)return;const u=y.fragment.indexOf("s");if(u<0)return;const I=parseInt(y.fragment.substring(0,u).replace(K,""),k),R=(0,U.decodeBase64)(y.fragment.substring(u+1)).toString();if(!isNaN(I))return{handle:I,notebook:y.with({scheme:R,fragment:null})}}h.parse=B;function G(y,u){return y.with({scheme:D.Schemas.vscodeNotebookCellOutput,fragment:`op${u??""},${y.scheme!==D.Schemas.file?y.scheme:""}`})}h.generateCellOutputUri=G;function H(y){if(y.scheme!==D.Schemas.vscodeNotebookCellOutput)return;const u=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(y.fragment);if(!u)return;const I=u[1]&&u[1]!==""?u[1]:void 0,R=u[2];return{outputId:I,notebook:y.with({scheme:R||D.Schemas.file,fragment:null})}}h.parseCellOutputUri=H;function Z(y,u,I){return h.generate(y,u).with({scheme:I})}h.generateCellPropertyUri=Z;function x(y,u){if(y.scheme===u)return h.parse(y.with({scheme:h.scheme}))}h.parseCellPropertyUri=x})(t=e.CellUri||(e.CellUri={}));const a=h=>$.isWindows?h.replace(/\//g,"\\"):h;class n{constructor(Q=[],K=e.NOTEBOOK_DISPLAY_ORDER){this.e=K,this.d=[...new Set(Q)].map(k=>({pattern:k,matches:F.parse(a(k))}))}sort(Q){const K=new Map(j.Iterable.map(Q,q=>[q,a(q)]));let k=[];for(const{matches:q}of this.d)for(const[B,G]of K)if(q(G)){k.push(B),K.delete(B);break}return K.size&&(k=k.concat([...K.keys()].sort((q,B)=>this.e.indexOf(q)-this.e.indexOf(B)))),k}prioritize(Q,K){const k=this.f(Q);if(k===-1){this.d.unshift({pattern:Q,matches:F.parse(a(Q))});return}const q=new Set(K.map(G=>this.f(G,k)));q.delete(-1);const B=Array.from(q).sort();this.d.splice(k+1,0,...B.map(G=>this.d[G]));for(let G=B.length-1;G>=0;G--)this.d.splice(B[G],1)}toArray(){return this.d.map(Q=>Q.pattern)}f(Q,K=this.d.length){const k=a(Q);for(let q=0;q<K;q++)if(this.d[q].matches(k))return q;return-1}}e.MimeTypeDisplayOrder=n;function l(h,Q,K,k=(q,B)=>q===B){const q=[];function B(Z,x,y){if(x===0&&y.length===0)return;const u=q[q.length-1];u&&u.start+u.deleteCount===Z?(u.deleteCount+=x,u.toInsert.push(...y)):q.push({start:Z,deleteCount:x,toInsert:y})}let G=0,H=0;for(;;){if(G===h.length){B(G,0,Q.slice(H));break}if(H===Q.length){B(G,h.length-G,[]);break}const Z=h[G],x=Q[H];if(k(Z,x)){G+=1,H+=1;continue}K(x)?(B(G,1,[]),G+=1):(B(G,0,[x]),H+=1)}return q}e.diff=l,e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new E.RawContextKey("notebookEditorCursorAtBoundary","none");var c;(function(h){h.default="default",h.option="option"})(c=e.NotebookEditorPriority||(e.NotebookEditorPriority={}));function p(h){const Q=h;return!!((typeof Q.include=="string"||F.isRelativePattern(Q.include))&&(typeof Q.exclude=="string"||F.isRelativePattern(Q.exclude)))}e.isDocumentExcludePattern=p;function v(h,Q,K){if(Array.isArray(h.viewType)&&h.viewType.indexOf(Q)>=0||h.viewType===Q)return!0;if(h.filenamePattern){const k=p(h.filenamePattern)?h.filenamePattern.include:h.filenamePattern,q=p(h.filenamePattern)?h.filenamePattern.exclude:void 0;if(F.match(k,(0,V.basename)(K.fsPath).toLowerCase()))return!(q&&F.match(q,(0,V.basename)(K.fsPath).toLowerCase()))}return!1}e.notebookDocumentFilterMatch=v,e.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputLineHeight:"notebook.outputLineHeight",outputFontSize:"notebook.outputFontSize",outputFontFamily:"notebook.outputFontFamily",kernelPickerType:"notebook.kernelPicker.type",outputScrolling:"notebook.experimental.outputScrolling",logging:"notebook.logging"};var P;(function(h){h[h.Left=1]="Left",h[h.Right=2]="Right"})(P=e.CellStatusbarAlignment||(e.CellStatusbarAlignment={}));class g{static create(Q){return`${g.d}${Q}`}static parse(Q){if(Q.startsWith(g.d))return Q.substring(g.d.length)}}g.d="notebook/",e.NotebookWorkingCopyTypeIdentifier=g;function S(h){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(h)}e.isTextStreamMime=S;const w=new TextDecoder;function d(h){const Q=[];let K=!1;for(const k of h)(Q.length===0||K)&&(Q.push(k),K=!0);return J(Q),O(U.VSBuffer.concat(Q.map(k=>U.VSBuffer.wrap(k))))}e.compressOutputItemStreams=d;const N=`${String.fromCharCode(27)}[A`,z=N.split("").map(h=>h.charCodeAt(0)),Y=10;function J(h){h.forEach((Q,K)=>{if(K===0||Q.length<N.length)return;const k=h[K-1],q=Q.subarray(0,N.length);if(q[0]===z[0]&&q[1]===z[1]&&q[2]===z[2]){const B=k.lastIndexOf(Y);if(B===-1)return;h[K-1]=k.subarray(0,B),h[K]=Q.subarray(N.length)}})}function _(h){let Q=h;do h=Q,Q=h.replace(/[^\n]\x08/gm,"");while(Q.length<h.length);return h}function M(h){for(h=h.replace(/\r+\n/gm,`
`);h.search(/\r[^$]/g)>-1;){const Q=h.match(/^(.*)\r+/m)[1];let K=h.match(/\r+(.*)$/m)[1];K=K+Q.slice(K.length,Q.length),h=h.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,K)}return h}const i="\b".charCodeAt(0),b="\r".charCodeAt(0);function O(h){return!h.buffer.includes(i)&&!h.buffer.includes(b)?h:U.VSBuffer.fromString(M(_(w.decode(h.buffer))))}}),define(ne[37],ie([0,1,38,39,10,27,30,12]),function(te,e,U,F,j,C,D,V){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.NotebookEditorSimpleWorker=void 0;function $(f){let r=(0,F.numberHash)(104579,0);for(let s=0;s<f.buffer.length;s++)r=(0,F.doHash)(f.buffer[s],r);return r}class E{get textBuffer(){if(this.a)return this.a;const r=new C.PieceTreeTextBufferBuilder;r.acceptChunk(Array.isArray(this.d)?this.d.join(`
`):this.d);const s=r.finish(!0);return this.a=s.create(1).textBuffer,this.a}primaryKey(){return this.b===void 0&&(this.b=(0,F.hash)(this.getValue())),this.b}constructor(r,s,o,t,a,n,l){this.handle=r,this.d=s,this.language=o,this.cellKind=t,this.outputs=a,this.metadata=n,this.internalMetadata=l,this.b=null,this.c=null}getFullModelRange(){const r=this.textBuffer.getLineCount();return new V.Range(1,1,r,this.textBuffer.getLineLength(r)+1)}getValue(){const r=this.getFullModelRange();return this.textBuffer.getValueInRange(r,1)}getComparisonValue(){return this.b!==null?this.b:(this.c=(0,F.hash)([(0,F.hash)(this.language),(0,F.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(r=>({outputs:r.outputs.map(s=>({mime:s.mime,data:$(s.data)})),metadata:r.metadata}))]),this.c)}getHashValue(){return this.c!==null?this.c:(this.c=(0,F.hash)([(0,F.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this.c)}}class L{constructor(r,s,o){this.uri=r,this.cells=s,this.metadata=o}acceptModelChanged(r){r.rawEvents.forEach(s=>{if(s.kind===D.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(s.changes);else if(s.kind===D.NotebookCellsChangeType.Move){const o=this.cells.splice(s.index,1);this.cells.splice(s.newIdx,0,...o)}else if(s.kind===D.NotebookCellsChangeType.Output){const o=this.cells[s.index];o.outputs=s.outputs}else if(s.kind===D.NotebookCellsChangeType.ChangeCellLanguage){this.a(s.index);const o=this.cells[s.index];o.language=s.language}else if(s.kind===D.NotebookCellsChangeType.ChangeCellMetadata){this.a(s.index);const o=this.cells[s.index];o.metadata=s.metadata}else if(s.kind===D.NotebookCellsChangeType.ChangeCellInternalMetadata){this.a(s.index);const o=this.cells[s.index];o.internalMetadata=s.internalMetadata}})}a(r){if(r<0||r>=this.cells.length)throw new Error(`Illegal index ${r}. Cells length: ${this.cells.length}`)}_spliceNotebookCells(r){r.reverse().forEach(s=>{const t=s[2].map(a=>new E(a.handle,a.source,a.language,a.cellKind,a.outputs,a.metadata));this.cells.splice(s[0],s[1],...t)})}}class A{constructor(r){this.textModel=r}getElements(){const r=new Int32Array(this.textModel.cells.length);for(let s=0;s<this.textModel.cells.length;s++)r[s]=this.textModel.cells[s].getComparisonValue();return r}getCellHash(r){const s=Array.isArray(r.source)?r.source.join(`
`):r.source;return(0,F.hash)([(0,F.hash)(s),r.metadata])}}class m{constructor(){this.a=Object.create(null)}dispose(){}acceptNewModel(r,s){this.a[r]=new L(j.URI.parse(r),s.cells.map(o=>new E(o.handle,o.source,o.language,o.cellKind,o.outputs,o.metadata)),s.metadata)}acceptModelChanged(r,s){this.a[r]?.acceptModelChanged(s)}acceptRemovedModel(r){!this.a[r]||delete this.a[r]}computeDiff(r,s){const o=this.b(r),t=this.b(s);return{cellsDiff:new U.LcsDiff(new A(o),new A(t)).ComputeDiff(!1)}}b(r){return this.a[r]}}e.NotebookEditorSimpleWorker=m;function T(f){return new m}e.create=T})}).call(this);

//# sourceMappingURL=notebookSimpleWorker.js.map
