"use strict";/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/platform","vs/base/common/path","vs/base/common/strings","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/arrays","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],se=function(_){for(var e=[],A=0,L=_.length;A<L;A++)e[A]=ne[_[A]];return e};define(ne[10],se([0,1]),function(_,e){"use strict";var A,L,O;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function T(i,n,a){let c=i.get(n);return c===void 0&&(c=a,i.set(n,c)),c}e.getOrSet=T;function P(i){const n=[];return i.forEach((a,c)=>{n.push(`${c} => ${a}`)}),`Map(${i.size}) {${n.join(", ")}}`}e.mapToString=P;function S(i){const n=[];return i.forEach(a=>{n.push(a)}),`Set(${i.size}) {${n.join(", ")}}`}e.setToString=S;class q{constructor(n,a){this.uri=n,this.value=a}}class m{constructor(n,a){this[A]="ResourceMap",n instanceof m?(this.b=new Map(n.b),this.c=a??m.a):(this.b=new Map,this.c=n??m.a)}set(n,a){return this.b.set(this.c(n),new q(n,a)),this}get(n){return this.b.get(this.c(n))?.value}has(n){return this.b.has(this.c(n))}get size(){return this.b.size}clear(){this.b.clear()}delete(n){return this.b.delete(this.c(n))}forEach(n,a){typeof a<"u"&&(n=n.bind(a));for(const[c,b]of this.b)n(b.value,b.uri,this)}*values(){for(const n of this.b.values())yield n.value}*keys(){for(const n of this.b.values())yield n.uri}*entries(){for(const n of this.b.values())yield[n.uri,n.value]}*[(A=Symbol.toStringTag,Symbol.iterator)](){for(const[,n]of this.b)yield[n.uri,n.value]}}m.a=i=>i.toString(),e.ResourceMap=m;class g{constructor(n,a){this[L]="ResourceSet",!n||typeof n=="function"?this.a=new m(n):(this.a=new m(a),n.forEach(this.add,this))}get size(){return this.a.size}add(n){return this.a.set(n,n),this}clear(){this.a.clear()}delete(n){return this.a.delete(n)}forEach(n,a){this.a.forEach((c,b)=>n.call(a,b,b,this))}has(n){return this.a.has(n)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(L=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=g;var D;(function(i){i[i.None=0]="None",i[i.AsOld=1]="AsOld",i[i.AsNew=2]="AsNew"})(D=e.Touch||(e.Touch={}));class z{constructor(){this[O]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(n){return this.a.has(n)}get(n,a=0){const c=this.a.get(n);if(!!c)return a!==0&&this.j(c,a),c.value}set(n,a,c=0){let b=this.a.get(n);if(b)b.value=a,c!==0&&this.j(b,c);else{switch(b={key:n,value:a,next:void 0,previous:void 0},c){case 0:this.h(b);break;case 1:this.g(b);break;case 2:this.h(b);break;default:this.h(b);break}this.a.set(n,b),this.d++}return this}delete(n){return!!this.remove(n)}remove(n){const a=this.a.get(n);if(!!a)return this.a.delete(n),this.i(a),this.d--,a.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const n=this.b;return this.a.delete(n.key),this.i(n),this.d--,n.value}forEach(n,a){const c=this.e;let b=this.b;for(;b;){if(a?n.bind(a)(b.value,b.key,this):n(b.value,b.key,this),this.e!==c)throw new Error("LinkedMap got modified during iteration.");b=b.next}}keys(){const n=this,a=this.e;let c=this.b;const b={[Symbol.iterator](){return b},next(){if(n.e!==a)throw new Error("LinkedMap got modified during iteration.");if(c){const y={value:c.key,done:!1};return c=c.next,y}else return{value:void 0,done:!0}}};return b}values(){const n=this,a=this.e;let c=this.b;const b={[Symbol.iterator](){return b},next(){if(n.e!==a)throw new Error("LinkedMap got modified during iteration.");if(c){const y={value:c.value,done:!1};return c=c.next,y}else return{value:void 0,done:!0}}};return b}entries(){const n=this,a=this.e;let c=this.b;const b={[Symbol.iterator](){return b},next(){if(n.e!==a)throw new Error("LinkedMap got modified during iteration.");if(c){const y={value:[c.key,c.value],done:!1};return c=c.next,y}else return{value:void 0,done:!0}}};return b}[(O=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(n){if(n>=this.size)return;if(n===0){this.clear();return}let a=this.b,c=this.size;for(;a&&c>n;)this.a.delete(a.key),a=a.next,c--;this.b=a,this.d=c,a&&(a.previous=void 0),this.e++}g(n){if(!this.b&&!this.c)this.c=n;else if(this.b)n.next=this.b,this.b.previous=n;else throw new Error("Invalid list");this.b=n,this.e++}h(n){if(!this.b&&!this.c)this.b=n;else if(this.c)n.previous=this.c,this.c.next=n;else throw new Error("Invalid list");this.c=n,this.e++}i(n){if(n===this.b&&n===this.c)this.b=void 0,this.c=void 0;else if(n===this.b){if(!n.next)throw new Error("Invalid list");n.next.previous=void 0,this.b=n.next}else if(n===this.c){if(!n.previous)throw new Error("Invalid list");n.previous.next=void 0,this.c=n.previous}else{const a=n.next,c=n.previous;if(!a||!c)throw new Error("Invalid list");a.previous=c,c.next=a}n.next=void 0,n.previous=void 0,this.e++}j(n,a){if(!this.b||!this.c)throw new Error("Invalid list");if(!(a!==1&&a!==2)){if(a===1){if(n===this.b)return;const c=n.next,b=n.previous;n===this.c?(b.next=void 0,this.c=b):(c.previous=b,b.next=c),n.previous=void 0,n.next=this.b,this.b.previous=n,this.b=n,this.e++}else if(a===2){if(n===this.c)return;const c=n.next,b=n.previous;n===this.b?(c.previous=void 0,this.b=c):(c.previous=b,b.next=c),n.next=void 0,n.previous=this.c,this.c.next=n,this.c=n,this.e++}}}toJSON(){const n=[];return this.forEach((a,c)=>{n.push([c,a])}),n}fromJSON(n){this.clear();for(const[a,c]of n)this.set(a,c)}}e.LinkedMap=z;class M extends z{constructor(n,a=1){super(),this.k=n,this.l=Math.min(Math.max(0,a),1)}get limit(){return this.k}set limit(n){this.k=n,this.m()}get ratio(){return this.l}set ratio(n){this.l=Math.min(Math.max(0,n),1),this.m()}get(n,a=2){return super.get(n,a)}peek(n){return super.get(n,0)}set(n,a){return super.set(n,a,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}e.LRUCache=M}),define(ne[11],se([0,1]),function(_,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MicrotaskDelay=void 0,e.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(ne[5],se([0,1,3,2,4,17]),function(_,e,A,L,O,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function P(l){return l===47||l===92}e.isPathSeparator=P;function S(l){return l.replace(/[\\/]/g,A.posix.sep)}e.toSlashes=S;function q(l){return l.indexOf("/")===-1&&(l=S(l)),/^[a-zA-Z]:(\/|$)/.test(l)&&(l="/"+l),l}e.toPosixPath=q;function m(l,v=A.posix.sep){if(!l)return"";const E=l.length,B=l.charCodeAt(0);if(P(B)){if(P(l.charCodeAt(1))&&!P(l.charCodeAt(2))){let W=3;const Z=W;for(;W<E&&!P(l.charCodeAt(W));W++);if(Z!==W&&!P(l.charCodeAt(W+1))){for(W+=1;W<E;W++)if(P(l.charCodeAt(W)))return l.slice(0,W+1).replace(/[\\/]/g,v)}}return v}else if(c(B)&&l.charCodeAt(1)===58)return P(l.charCodeAt(2))?l.slice(0,2)+v:l.slice(0,2);let p=l.indexOf("://");if(p!==-1){for(p+=3;p<E;p++)if(P(l.charCodeAt(p)))return l.slice(0,p+1)}return""}e.getRoot=m;function g(l){if(!L.isWindows||!l||l.length<5)return!1;let v=l.charCodeAt(0);if(v!==92||(v=l.charCodeAt(1),v!==92))return!1;let E=2;const B=E;for(;E<l.length&&(v=l.charCodeAt(E),v!==92);E++);return!(B===E||(v=l.charCodeAt(E+1),isNaN(v)||v===92))}e.isUNC=g;const D=/[\\/:\*\?"<>\|]/g,z=/[\\/]/g,M=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function i(l,v=L.isWindows){const E=v?D:z;return!(!l||l.length===0||/^\s+$/.test(l)||(E.lastIndex=0,E.test(l))||v&&M.test(l)||l==="."||l===".."||v&&l[l.length-1]==="."||v&&l.length!==l.trim().length||l.length>255)}e.isValidBasename=i;function n(l,v,E){const B=l===v;return!E||B?B:!l||!v?!1:(0,O.equalsIgnoreCase)(l,v)}e.isEqual=n;function a(l,v,E,B=A.sep){if(l===v)return!0;if(!l||!v||v.length>l.length)return!1;if(E){if(!(0,O.startsWithIgnoreCase)(l,v))return!1;if(v.length===l.length)return!0;let W=v.length;return v.charAt(v.length-1)===B&&W--,l.charAt(W)===B}return v.charAt(v.length-1)!==B&&(v+=B),l.indexOf(v)===0}e.isEqualOrParent=a;function c(l){return l>=65&&l<=90||l>=97&&l<=122}e.isWindowsDriveLetter=c;function b(l,v){return L.isWindows&&l.endsWith(":")&&(l+=A.sep),(0,A.isAbsolute)(l)||(l=(0,A.join)(v,l)),l=(0,A.normalize)(l),L.isWindows?(l=(0,O.rtrim)(l,A.sep),l.endsWith(":")&&(l+=A.sep)):(l=(0,O.rtrim)(l,A.sep),l||(l=A.sep)),l}e.sanitizeFilePath=b;function y(l){const v=(0,A.normalize)(l);return L.isWindows?l.length>3?!1:Q(v)&&(l.length===2||v.charCodeAt(2)===92):v===A.posix.sep}e.isRootOrDriveLetter=y;function Q(l,v=L.isWindows){return v?c(l.charCodeAt(0))&&l.charCodeAt(1)===58:!1}e.hasDriveLetter=Q;function J(l){return Q(l)?l[0]:void 0}e.getDriveLetter=J;function k(l,v,E){return v.length>l.length?-1:l===v?0:(E&&(l=l.toLowerCase(),v=v.toLowerCase()),l.indexOf(v))}e.indexOfPath=k;function F(l){const v=l.split(":");let E,B,p;for(const W of v){const Z=Number(W);(0,T.isNumber)(Z)?B===void 0?B=Z:p===void 0&&(p=Z):E=E?[E,W].join(":"):W}if(!E)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:E,line:B!==void 0?B:void 0,column:p!==void 0?p:B!==void 0?1:void 0}}e.parseLineAndColumnAware=F;const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function G(l,v,E=8){let B="";for(let W=0;W<E;W++)B+=U.charAt(Math.floor(Math.random()*U.length));let p;return v?p=`${v}-${B}`:p=B,l?(0,A.join)(l,p):p}e.randomPath=G}),define(ne[12],se([0,1,13,2,6]),function(_,e,A,L,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var T;(function(m){m.inMemory="inmemory",m.vscode="vscode",m.internal="private",m.walkThrough="walkThrough",m.walkThroughSnippet="walkThroughSnippet",m.http="http",m.https="https",m.file="file",m.mailto="mailto",m.untitled="untitled",m.data="data",m.command="command",m.vscodeRemote="vscode-remote",m.vscodeRemoteResource="vscode-remote-resource",m.vscodeUserData="vscode-userdata",m.vscodeCustomEditor="vscode-custom-editor",m.vscodeNotebookCell="vscode-notebook-cell",m.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",m.vscodeNotebookCellOutput="vscode-notebook-cell-output",m.vscodeInteractive="vscode-interactive",m.vscodeInteractiveInput="vscode-interactive-input",m.vscodeSettings="vscode-settings",m.vscodeWorkspaceTrust="vscode-workspace-trust",m.vscodeTerminal="vscode-terminal",m.webviewPanel="webview-panel",m.vscodeWebview="vscode-webview",m.extension="extension",m.vscodeFileResource="vscode-file",m.tmp="tmp",m.vsls="vsls",m.vscodeSourceControl="vscode-scm"})(T=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class P{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${T.vscodeRemoteResource}`}setPreferredWebSchema(g){this.d=g}setDelegate(g){this.e=g}setServerRootPath(g){this.f=`${g}/${T.vscodeRemoteResource}`}set(g,D,z){this.a[g]=D,this.b[g]=z}setConnectionToken(g,D){this.c[g]=D}getPreferredWebSchema(){return this.d}rewrite(g){if(this.e)try{return this.e(g)}catch(a){return A.onUnexpectedError(a),g}const D=g.authority;let z=this.a[D];z&&z.indexOf(":")!==-1&&z.indexOf("[")===-1&&(z=`[${z}]`);const M=this.b[D],i=this.c[D];let n=`path=${encodeURIComponent(g.path)}`;return typeof i=="string"&&(n+=`&${e.connectionTokenQueryName}=${encodeURIComponent(i)}`),O.URI.from({scheme:L.isWeb?this.d:T.vscodeRemoteResource,authority:`${z}:${M}`,path:L.isWeb?(window.location.pathname+"/"+this.f).replace(/\/\/+/g,"/"):this.f,query:n})}}e.RemoteAuthorities=new P,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class S{asBrowserUri(g){const D=this.b(g,_);return this.uriToBrowserUri(D)}uriToBrowserUri(g){return g.scheme===T.vscodeRemote?e.RemoteAuthorities.rewrite(g):g.scheme===T.file&&(L.isNative||L.isWebWorker&&L.globals.origin===`${T.vscodeFileResource}://${S.a}`)?g.with({scheme:T.vscodeFileResource,authority:g.authority||S.a,query:null,fragment:null}):g}asFileUri(g){const D=this.b(g,_);return this.uriToFileUri(D)}uriToFileUri(g){return g.scheme===T.vscodeFileResource?g.with({scheme:T.file,authority:g.authority!==S.a?g.authority:null,query:null,fragment:null}):g}b(g,D){return O.URI.isUri(g)?g:O.URI.parse(D.toUrl(g))}}S.a="vscode-app",e.FileAccess=new S;var q;(function(m){const g=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);m.CoopAndCoep=Object.freeze(g.get("3"));const D="vscode-coi";function z(i){let n;typeof i=="string"?n=new URL(i).searchParams:i instanceof URL?n=i.searchParams:O.URI.isUri(i)&&(n=new URL(i.toString(!0)).searchParams);const a=n?.get(D);if(!!a)return g.get(a)}m.getHeadersFromQuery=z;function M(i,n,a){if(!globalThis.crossOriginIsolated)return;const c=n&&a?"3":a?"2":"1";i instanceof URLSearchParams?i.set(D,c):i[D]=c}m.addSearchParam=M})(q=e.COI||(e.COI={}))}),define(ne[7],se([0,1,5,12,3,2,4,6]),function(_,e,A,L,O,T,P,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function q(M){return(0,S.uriToFsPath)(M,!0)}e.originalFSPath=q;class m{constructor(i){this.a=i}compare(i,n,a=!1){return i===n?0:(0,P.compare)(this.getComparisonKey(i,a),this.getComparisonKey(n,a))}isEqual(i,n,a=!1){return i===n?!0:!i||!n?!1:this.getComparisonKey(i,a)===this.getComparisonKey(n,a)}getComparisonKey(i,n=!1){return i.with({path:this.a(i)?i.path.toLowerCase():void 0,fragment:n?null:void 0}).toString()}ignorePathCasing(i){return this.a(i)}isEqualOrParent(i,n,a=!1){if(i.scheme===n.scheme){if(i.scheme===L.Schemas.file)return A.isEqualOrParent(q(i),q(n),this.a(i))&&i.query===n.query&&(a||i.fragment===n.fragment);if((0,e.isEqualAuthority)(i.authority,n.authority))return A.isEqualOrParent(i.path,n.path,this.a(i),"/")&&i.query===n.query&&(a||i.fragment===n.fragment)}return!1}joinPath(i,...n){return S.URI.joinPath(i,...n)}basenameOrAuthority(i){return(0,e.basename)(i)||i.authority}basename(i){return O.posix.basename(i.path)}extname(i){return O.posix.extname(i.path)}dirname(i){if(i.path.length===0)return i;let n;return i.scheme===L.Schemas.file?n=S.URI.file(O.dirname(q(i))).path:(n=O.posix.dirname(i.path),i.authority&&n.length&&n.charCodeAt(0)!==47&&(console.error(`dirname("${i.toString})) resulted in a relative path`),n="/")),i.with({path:n})}normalizePath(i){if(!i.path.length)return i;let n;return i.scheme===L.Schemas.file?n=S.URI.file(O.normalize(q(i))).path:n=O.posix.normalize(i.path),i.with({path:n})}relativePath(i,n){if(i.scheme!==n.scheme||!(0,e.isEqualAuthority)(i.authority,n.authority))return;if(i.scheme===L.Schemas.file){const b=O.relative(q(i),q(n));return T.isWindows?A.toSlashes(b):b}let a=i.path||"/";const c=n.path||"/";if(this.a(i)){let b=0;for(const y=Math.min(a.length,c.length);b<y&&!(a.charCodeAt(b)!==c.charCodeAt(b)&&a.charAt(b).toLowerCase()!==c.charAt(b).toLowerCase());b++);a=c.substr(0,b)+a.substr(b)}return O.posix.relative(a,c)}resolvePath(i,n){if(i.scheme===L.Schemas.file){const a=S.URI.file(O.resolve(q(i),n));return i.with({authority:a.authority,path:a.path})}return n=A.toPosixPath(n),i.with({path:O.posix.resolve(i.path,n)})}isAbsolutePath(i){return!!i.path&&i.path[0]==="/"}isEqualAuthority(i,n){return i===n||i!==void 0&&n!==void 0&&(0,P.equalsIgnoreCase)(i,n)}hasTrailingPathSeparator(i,n=O.sep){if(i.scheme===L.Schemas.file){const a=q(i);return a.length>A.getRoot(a).length&&a[a.length-1]===n}else{const a=i.path;return a.length>1&&a.charCodeAt(a.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(i.fsPath)}}removeTrailingPathSeparator(i,n=O.sep){return(0,e.hasTrailingPathSeparator)(i,n)?i.with({path:i.path.substr(0,i.path.length-1)}):i}addTrailingPathSeparator(i,n=O.sep){let a=!1;if(i.scheme===L.Schemas.file){const c=q(i);a=c!==void 0&&c.length===A.getRoot(c).length&&c[c.length-1]===n}else{n="/";const c=i.path;a=c.length===1&&c.charCodeAt(c.length-1)===47}return!a&&!(0,e.hasTrailingPathSeparator)(i,n)?i.with({path:i.path+"/"}):i}}e.ExtUri=m,e.extUri=new m(()=>!1),e.extUriBiasedIgnorePathCase=new m(M=>M.scheme===L.Schemas.file?!T.isLinux:!0),e.extUriIgnorePathCase=new m(M=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function g(M,i){const n=[];for(let a=0;a<M.length;a++){const c=i(M[a]);M.some((b,y)=>y===a?!1:(0,e.isEqualOrParent)(c,i(b)))||n.push(M[a])}return n}e.distinctParents=g;var D;(function(M){M.META_DATA_LABEL="label",M.META_DATA_DESCRIPTION="description",M.META_DATA_SIZE="size",M.META_DATA_MIME="mime";function i(n){const a=new Map;n.path.substring(n.path.indexOf(";")+1,n.path.lastIndexOf(";")).split(";").forEach(y=>{const[Q,J]=y.split(":");Q&&J&&a.set(Q,J)});const b=n.path.substring(0,n.path.indexOf(";"));return b&&a.set(M.META_DATA_MIME,b),a}M.parseMetaData=i})(D=e.DataUri||(e.DataUri={}));function z(M,i,n){if(i){let a=M.path;return a&&a[0]!==O.posix.sep&&(a=O.posix.sep+a),M.with({scheme:n,authority:i,path:a})}return M.with({scheme:n})}e.toLocalResource=z}),define(ne[8],se([0,1,14,13,18,19,7,2,11]),function(_,e,A,L,O,T,P,S,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function m(r){return!!r&&typeof r.then=="function"}e.isThenable=m;function g(r){const t=new A.CancellationTokenSource,s=r(t.token),o=new Promise((u,R)=>{const N=t.token.onCancellationRequested(()=>{N.dispose(),t.dispose(),R(new L.CancellationError)});Promise.resolve(s).then(K=>{N.dispose(),t.dispose(),u(K)},K=>{N.dispose(),t.dispose(),R(K)})});return new class{cancel(){t.cancel()}then(u,R){return o.then(u,R)}catch(u){return this.then(void 0,u)}finally(u){return o.finally(u)}}}e.createCancelablePromise=g;function D(r,t,s){return new Promise((o,u)=>{const R=t.onCancellationRequested(()=>{R.dispose(),o(s)});r.then(o,u).finally(()=>R.dispose())})}e.raceCancellation=D;function z(r,t){return new Promise((s,o)=>{const u=t.onCancellationRequested(()=>{u.dispose(),o(new L.CancellationError)});r.then(s,o).finally(()=>u.dispose())})}e.raceCancellationError=z;async function M(r){let t=-1;const s=r.map((u,R)=>u.then(N=>(t=R,N))),o=await Promise.race(s);return r.forEach((u,R)=>{R!==t&&u.cancel()}),o}e.raceCancellablePromises=M;function i(r,t,s){let o;const u=setTimeout(()=>{o?.(void 0),s?.()},t);return Promise.race([r.finally(()=>clearTimeout(u)),new Promise(R=>o=R)])}e.raceTimeout=i;function n(r){return new Promise((t,s)=>{const o=r();m(o)?o.then(t,s):t(o)})}e.asPromise=n;class a{constructor(){this.a=null,this.b=null,this.d=null}queue(t){if(this.a){if(this.d=t,!this.b){const s=()=>{this.b=null;const o=this.queue(this.d);return this.d=null,o};this.b=new Promise(o=>{this.a.then(s,s).then(o)})}return new Promise((s,o)=>{this.b.then(s,o)})}return this.a=t(),new Promise((s,o)=>{this.a.then(u=>{this.a=null,s(u)},u=>{this.a=null,o(u)})})}}e.Throttler=a;class c{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.Sequencer=c;class b{constructor(){this.a=new Map}queue(t,s){const u=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(s).finally(()=>{this.a.get(t)===u&&this.a.delete(t)});return this.a.set(t,u),u}}e.SequencerByKey=b;const y=(r,t)=>{let s=!0;const o=setTimeout(()=>{s=!1,t()},r);return{isTriggered:()=>s,dispose:()=>{clearTimeout(o),s=!1}}},Q=r=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,r())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class J{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,s=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((u,R)=>{this.d=u,this.f=R}).then(()=>{if(this.b=null,this.d=null,this.g){const u=this.g;return this.g=null,u()}}));const o=()=>{this.a=null,this.d?.(null)};return this.a=s===q.MicrotaskDelay?Q(o):y(s,o),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new L.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.Delayer=J;class k{constructor(t){this.a=new J(t),this.b=new a}trigger(t,s){return this.a.trigger(()=>this.b.queue(t),s)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.ThrottledDelayer=k;class F{constructor(){this.a=!1,this.b=new Promise((t,s)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.Barrier=F;class U extends F{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.AutoOpenBarrier=U;function G(r,t){return t?new Promise((s,o)=>{const u=setTimeout(()=>{R.dispose(),s()},r),R=t.onCancellationRequested(()=>{clearTimeout(u),R.dispose(),o(new L.CancellationError)})}):g(s=>G(r,s))}e.timeout=G;function l(r,t=0){const s=setTimeout(r,t);return(0,T.toDisposable)(()=>clearTimeout(s))}e.disposableTimeout=l;function v(r){const t=[];let s=0;const o=r.length;function u(){return s<o?r[s++]():null}function R(N){N!=null&&t.push(N);const K=u();return K?K.then(R):Promise.resolve(t)}return Promise.resolve(null).then(R)}e.sequence=v;function E(r,t=o=>!!o,s=null){let o=0;const u=r.length,R=()=>{if(o>=u)return Promise.resolve(s);const N=r[o++];return Promise.resolve(N()).then(X=>t(X)?Promise.resolve(X):R())};return R()}e.first=E;function B(r,t=o=>!!o,s=null){if(r.length===0)return Promise.resolve(s);let o=r.length;const u=()=>{o=-1;for(const R of r)R.cancel?.()};return new Promise((R,N)=>{for(const K of r)K.then(X=>{--o>=0&&t(X)?(u(),R(X)):o===0&&R(s)}).catch(X=>{--o>=0&&(u(),N(X))})})}e.firstParallel=B;class p{constructor(t){this.a=0,this.d=t,this.f=[],this.b=0,this.g=new O.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(t){return this.a++,new Promise((s,o)=>{this.f.push({factory:t,c:s,e:o}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const t=this.f.shift();this.b++;const s=t.factory();s.then(t.c,t.e),s.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.Limiter=p;class W extends p{constructor(){super(1)}}e.Queue=W;class Z{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const t=new d;return this.b.add(t),t.p}d(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueFor(t,s=P.extUri){const o=s.getComparisonKey(t);let u=this.a.get(o);return u||(u=new W,O.Event.once(u.onDrained)(()=>{u?.dispose(),this.a.delete(o),this.f()}),this.a.set(o,u)),u}f(){!this.d()||this.g()}g(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.g()}}e.ResourceQueue=Z;class ie{constructor(t,s){this.a=-1,typeof t=="function"&&typeof s=="number"&&this.setIfNotSet(t,s)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,s){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},s)}setIfNotSet(t,s){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},s))}}e.TimeoutTimer=ie;class te{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(t,s){this.cancel(),this.a=setInterval(()=>{t()},s)}}e.IntervalTimer=te;class Y{constructor(t,s){this.b=-1,this.a=t,this.d=s,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.RunOnceScheduler=Y;class x{constructor(t,s){s%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${s}ms is not a multiple of 1000ms.`),this.a=t,this.b=s,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.ProcessTimeRunOnceScheduler=x;class re extends Y{constructor(t,s){super(t,s),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.RunOnceWorker=re;class $ extends T.Disposable{constructor(t,s){super(),this.g=t,this.h=s,this.a=[],this.b=this.B(new T.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const s of t)this.a.push(s);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new Y(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.ThrottledWorker=$,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=r=>{(0,S.setTimeout0)(()=>{if(t)return;const s=Date.now()+15;r(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:e.runWhenIdle=(r,t)=>{const s=requestIdleCallback(r,typeof t=="number"?{timeout:t}:void 0);let o=!1;return{dispose(){o||(o=!0,cancelIdleCallback(s))}}}}();class V{constructor(t){this.d=!1,this.a=()=>{try{this.f=t()}catch(s){this.g=s}finally{this.d=!0}},this.b=(0,e.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.IdleValue=V;async function H(r,t,s){let o;for(let u=0;u<s;u++)try{return await r()}catch(R){o=R,await G(t)}throw o}e.retry=H;class ee{hasPending(t){return this.a?typeof t=="number"?this.a.taskId===t:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(t,s,o){return this.a={taskId:t,cancel:()=>o?.(),promise:s},s.then(()=>this.d(t),()=>this.d(t)),s}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}setNext(t){if(this.b)this.b.run=t;else{let s,o;const u=new Promise((R,N)=>{s=R,o=N});this.b={run:t,promise:u,promiseResolve:s,promiseReject:o}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.TaskSequentializer=ee;class f{constructor(t,s=()=>Date.now()){this.d=t,this.f=s,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.IntervalCounter=f;class d{get isRejected(){return this.d}get isResolved(){return this.f}get isSettled(){return this.d||this.f}constructor(){this.d=!1,this.f=!1,this.p=new Promise((t,s)=>{this.a=t,this.b=s})}complete(t){return new Promise(s=>{this.a(t),this.f=!0,s()})}error(t){return new Promise(s=>{this.b(t),this.d=!0,s()})}cancel(){new Promise(t=>{this.b(new L.CancellationError),this.d=!0,t()})}}e.DeferredPromise=d;var h;(function(r){async function t(o){let u;const R=await Promise.all(o.map(N=>N.then(K=>K,K=>{u||(u=K)})));if(typeof u<"u")throw u;return R}r.settled=t;function s(o){return new Promise(async(u,R)=>{try{await o(u,R)}catch(N){R(N)}})}r.withAsyncBody=s})(h=e.Promises||(e.Promises={}));var C;(function(r){r[r.Initial=0]="Initial",r[r.DoneOK=1]="DoneOK",r[r.DoneError=2]="DoneError"})(C||(C={}));class w{static fromArray(t){return new w(s=>{s.emitMany(t)})}static fromPromise(t){return new w(async s=>{s.emitMany(await t)})}static fromPromises(t){return new w(async s=>{await Promise.all(t.map(async o=>s.emitOne(await o)))})}static merge(t){return new w(async s=>{await Promise.all(t.map(async o=>{for await(const u of o)s.emitOne(u)}))})}constructor(t){this.a=0,this.b=[],this.d=null,this.f=new O.Emitter,queueMicrotask(async()=>{const s={emitOne:o=>this.g(o),emitMany:o=>this.h(o),reject:o=>this.k(o)};try{await Promise.resolve(t(s)),this.j()}catch(o){this.k(o)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await O.Event.toPromise(this.f.event)}while(!0)}}}static map(t,s){return new w(async o=>{for await(const u of t)o.emitOne(s(u))})}map(t){return w.map(this,t)}static filter(t,s){return new w(async o=>{for await(const u of t)s(u)&&o.emitOne(u)})}filter(t){return w.filter(this,t)}static coalesce(t){return w.filter(t,s=>!!s)}coalesce(){return w.coalesce(this)}static async toPromise(t){const s=[];for await(const o of t)s.push(o);return s}toPromise(){return w.toPromise(this)}g(t){this.a===0&&(this.b.push(t),this.f.fire())}h(t){this.a===0&&(this.b=this.b.concat(t),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(t){this.a===0&&(this.a=2,this.d=t,this.f.fire())}}w.EMPTY=w.fromArray([]),e.AsyncIterableObject=w;class I extends w{constructor(t,s){super(s),this.l=t}cancel(){this.l.cancel()}}e.CancelableAsyncIterableObject=I;function j(r){const t=new A.CancellationTokenSource,s=r(t.token);return new I(t,async o=>{const u=t.token.onCancellationRequested(()=>{u.dispose(),t.dispose(),o.reject(new L.CancellationError)});try{for await(const R of s){if(t.token.isCancellationRequested)return;o.emitOne(R)}u.dispose(),t.dispose()}catch(R){u.dispose(),t.dispose(),o.reject(R)}})}e.createCancelableAsyncIterable=j}),define(ne[9],se([0,1,20,8,5,10,3,2,4]),function(_,e,A,L,O,T,P,S,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function m(){return Object.create(null)}e.getEmptyExpression=m,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const g="[/\\\\]",D="[^/\\\\]",z=/\//g;function M(f,d){switch(f){case 0:return"";case 1:return`${D}*?`;default:return`(?:${g}|${D}+${g}${d?`|${g}${D}+`:""})*?`}}function i(f,d){if(!f)return[];const h=[];let C=!1,w=!1,I="";for(const j of f){switch(j){case d:if(!C&&!w){h.push(I),I="";continue}break;case"{":C=!0;break;case"}":C=!1;break;case"[":w=!0;break;case"]":w=!1;break}I+=j}return I&&h.push(I),h}e.splitGlobAware=i;function n(f){if(!f)return"";let d="";const h=i(f,e.GLOB_SPLIT);if(h.every(C=>C===e.GLOBSTAR))d=".*";else{let C=!1;h.forEach((w,I)=>{if(w===e.GLOBSTAR){if(C)return;d+=M(2,I===h.length-1)}else{let j=!1,r="",t=!1,s="";for(const o of w){if(o!=="}"&&j){r+=o;continue}if(t&&(o!=="]"||!s)){let u;o==="-"?u=o:(o==="^"||o==="!")&&!s?u="^":o===e.GLOB_SPLIT?u="":u=(0,q.escapeRegExpCharacters)(o),s+=u;continue}switch(o){case"{":j=!0;continue;case"[":t=!0;continue;case"}":{d+=`(?:${i(r,",").map(N=>n(N)).join("|")})`,j=!1,r="";break}case"]":{d+="["+s+"]",t=!1,s="";break}case"?":d+=D;continue;case"*":d+=M(1);continue;default:d+=(0,q.escapeRegExpCharacters)(o)}}I<h.length-1&&(h[I+1]!==e.GLOBSTAR||I+2<h.length)&&(d+=g)}C=w===e.GLOBSTAR})}return d}const a=/^\*\*\/\*\.[\w\.-]+$/,c=/^\*\*\/([\w\.-]+)\/?$/,b=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,y=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,Q=/^\*\*((\/[\w\.-]+)+)\/?$/,J=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,k=new T.LRUCache(1e4),F=function(){return!1},U=function(){return null};function G(f,d){if(!f)return U;let h;typeof f!="string"?h=f.pattern:h=f,h=h.trim();const C=`${h}_${!!d.trimForExclusions}`;let w=k.get(C);if(w)return l(w,f);let I;return a.test(h)?w=E(h.substr(4),h):(I=c.exec(v(h,d)))?w=B(I[1],h):(d.trimForExclusions?y:b).test(h)?w=p(h,d):(I=Q.exec(v(h,d)))?w=W(I[1].substr(1),h,!0):(I=J.exec(v(h,d)))?w=W(I[1],h,!1):w=Z(h),k.set(C,w),l(w,f)}function l(f,d){if(typeof d=="string")return f;const h=function(C,w){return(0,O.isEqualOrParent)(C,d.base,!S.isLinux)?f((0,q.ltrim)(C.substr(d.base.length),P.sep),w):null};return h.allBasenames=f.allBasenames,h.allPaths=f.allPaths,h.basenames=f.basenames,h.patterns=f.patterns,h}function v(f,d){return d.trimForExclusions&&f.endsWith("/**")?f.substr(0,f.length-2):f}function E(f,d){return function(h,C){return typeof h=="string"&&h.endsWith(f)?d:null}}function B(f,d){const h=`/${f}`,C=`\\${f}`,w=function(j,r){return typeof j!="string"?null:r?r===f?d:null:j===f||j.endsWith(h)||j.endsWith(C)?d:null},I=[f];return w.basenames=I,w.patterns=[d],w.allBasenames=I,w}function p(f,d){const h=H(f.slice(1,-1).split(",").map(r=>G(r,d)).filter(r=>r!==U),f),C=h.length;if(!C)return U;if(C===1)return h[0];const w=function(r,t){for(let s=0,o=h.length;s<o;s++)if(h[s](r,t))return f;return null},I=h.find(r=>!!r.allBasenames);I&&(w.allBasenames=I.allBasenames);const j=h.reduce((r,t)=>t.allPaths?r.concat(t.allPaths):r,[]);return j.length&&(w.allPaths=j),w}function W(f,d,h){const C=P.sep===P.posix.sep,w=C?f:f.replace(z,P.sep),I=P.sep+w,j=P.posix.sep+f;let r;return h?r=function(t,s){return typeof t=="string"&&(t===w||t.endsWith(I)||!C&&(t===f||t.endsWith(j)))?d:null}:r=function(t,s){return typeof t=="string"&&(t===w||!C&&t===f)?d:null},r.allPaths=[(h?"*/":"./")+f],r}function Z(f){try{const d=new RegExp(`^${n(f)}$`);return function(h){return d.lastIndex=0,typeof h=="string"&&d.test(h)?f:null}}catch{return U}}function ie(f,d,h){return!f||typeof d!="string"?!1:te(f)(d,void 0,h)}e.match=ie;function te(f,d={}){if(!f)return F;if(typeof f=="string"||Y(f)){const h=G(f,d);if(h===U)return F;const C=function(w,I){return!!h(w,I)};return h.allBasenames&&(C.allBasenames=h.allBasenames),h.allPaths&&(C.allPaths=h.allPaths),C}return $(f,d)}e.parse=te;function Y(f){const d=f;return d?typeof d.base=="string"&&typeof d.pattern=="string":!1}e.isRelativePattern=Y;function x(f){return f.allBasenames||[]}e.getBasenameTerms=x;function re(f){return f.allPaths||[]}e.getPathTerms=re;function $(f,d){const h=H(Object.getOwnPropertyNames(f).map(r=>V(r,f[r],d)).filter(r=>r!==U)),C=h.length;if(!C)return U;if(!h.some(r=>!!r.requiresSiblings)){if(C===1)return h[0];const r=function(o,u){let R;for(let N=0,K=h.length;N<K;N++){const X=h[N](o,u);if(typeof X=="string")return X;(0,L.isThenable)(X)&&(R||(R=[]),R.push(X))}return R?(async()=>{for(const N of R){const K=await N;if(typeof K=="string")return K}return null})():null},t=h.find(o=>!!o.allBasenames);t&&(r.allBasenames=t.allBasenames);const s=h.reduce((o,u)=>u.allPaths?o.concat(u.allPaths):o,[]);return s.length&&(r.allPaths=s),r}const w=function(r,t,s){let o,u;for(let R=0,N=h.length;R<N;R++){const K=h[R];K.requiresSiblings&&s&&(t||(t=(0,P.basename)(r)),o||(o=t.substr(0,t.length-(0,P.extname)(r).length)));const X=K(r,t,o,s);if(typeof X=="string")return X;(0,L.isThenable)(X)&&(u||(u=[]),u.push(X))}return u?(async()=>{for(const R of u){const N=await R;if(typeof N=="string")return N}return null})():null},I=h.find(r=>!!r.allBasenames);I&&(w.allBasenames=I.allBasenames);const j=h.reduce((r,t)=>t.allPaths?r.concat(t.allPaths):r,[]);return j.length&&(w.allPaths=j),w}function V(f,d,h){if(d===!1)return U;const C=G(f,h);if(C===U)return U;if(typeof d=="boolean")return C;if(d){const w=d.when;if(typeof w=="string"){const I=(j,r,t,s)=>{if(!s||!C(j,r))return null;const o=w.replace("$(basename)",()=>t),u=s(o);return(0,L.isThenable)(u)?u.then(R=>R?f:null):u?f:null};return I.requiresSiblings=!0,I}}return C}function H(f,d){const h=f.filter(r=>!!r.basenames);if(h.length<2)return f;const C=h.reduce((r,t)=>{const s=t.basenames;return s?r.concat(s):r},[]);let w;if(d){w=[];for(let r=0,t=C.length;r<t;r++)w.push(d)}else w=h.reduce((r,t)=>{const s=t.patterns;return s?r.concat(s):r},[]);const I=function(r,t){if(typeof r!="string")return null;if(!t){let o;for(o=r.length;o>0;o--){const u=r.charCodeAt(o-1);if(u===47||u===92)break}t=r.substr(o)}const s=C.indexOf(t);return s!==-1?w[s]:null};I.basenames=C,I.patterns=w,I.allBasenames=C;const j=f.filter(r=>!r.basenames);return j.push(I),j}function ee(f,d){return(0,A.equals)(f,d,(h,C)=>typeof h=="string"&&typeof C=="string"?h===C:typeof h!="string"&&typeof C!="string"?h.base===C.base&&h.pattern===C.pattern:!1)}e.patternsEquals=ee}),define(ne[15],se([0,1,21]),function(_,e,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileResults=void 0;const L=(O,T,P)=>{let S;if(O[0]===255&&O[1]===254)S=new TextDecoder("utf-16le").decode(O);else if(O[0]===254&&O[1]===255)S=new TextDecoder("utf-16be").decode(O);else if(S=new TextDecoder("utf8").decode(O),S.slice(0,1e3).includes("\uFFFD")&&O.includes(0))return[];const q=[],m=[];let g=null,D=P.remainingResultQuota;for(;D>=0&&(g=T.exec(S));)m.push({matchStartIndex:g.index,matchedText:g[0]}),D--;if(m.length){const z=new Set,M=new Set,i=[],n=Q=>S.slice(i[Q].start,i[Q].end);let a=0,c=null;const b=/\r?\n/g;for(;c=b.exec(S);)i.push({start:a,end:c.index}),a=c.index+c[0].length;a<S.length&&i.push({start:a,end:S.length});let y=0;for(const{matchStartIndex:Q,matchedText:J}of m){if(D<0)break;for(;Boolean(i[y+1])&&Q>i[y].end;)y++;let k=y;for(;Boolean(i[k+1])&&Q+J.length>i[k].end;)k++;if(P.beforeContext)for(let E=Math.max(0,y-P.beforeContext);E<y;E++)z.add(E);let F="",U=0;for(let E=y;E<=k;E++){let B=n(E);P.previewOptions?.charsPerLine&&B.length>P.previewOptions.charsPerLine&&(U=Math.max(Q-i[y].start-20,0),B=B.substr(U,P.previewOptions.charsPerLine)),F+=`${B}
`,M.add(E)}const G=new A.Range(y,Q-i[y].start,k,Q+J.length-i[k].start),l=new A.Range(0,Q-i[y].start-U,k-y,Q+J.length-i[k].start-(k===y?U:0)),v={ranges:G,preview:{text:F,matches:l}};if(q.push(v),P.afterContext)for(let E=k+1;E<=Math.min(k+P.afterContext,i.length-1);E++)z.add(E)}for(const Q of z)M.has(Q)||q.push({text:n(Q),lineNumber:Q+1})}return q};e.getFileResults=L}),define(ne[16],se([0,1,9]),function(_,e,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreFile=void 0;class L{constructor(T,P,S){if(this.b=P,this.c=S,P[P.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");P[P.length-1]!=="/"&&(P+="/"),this.a=this.e(T,this.b,this.c)}updateContents(T){this.a=this.e(T,this.b,this.c)}isPathIncludedInTraversal(T,P){if(T[0]!=="/"||T[T.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+T);return!this.a(T,P)}isArbitraryPathIgnored(T,P){if(T[0]!=="/"||T[T.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+T);const S=T.split("/").filter(g=>g);let q=!1,m="";for(let g=0;g<S.length;g++){const D=g===S.length-1,z=S[g];if(m=m+"/"+z,!this.isPathIncludedInTraversal(m,D?P:!0)){q=!0;break}}return q}d(T,P,S){const q=T.map(g=>this.f(g,P)),m=Object.create(null);for(const g of q)m[g]=!0;return A.parse(m,{trimForExclusions:S})}e(T,P,S){const q=T.split(`
`).map(y=>y.trim()).filter(y=>y&&y[0]!=="#"),m=q.filter(y=>!y.endsWith("/")),g=m.filter(y=>!y.includes("!")),D=this.d(g,P,!0),z=m.filter(y=>y.includes("!")).map(y=>y.replace(/!/g,"")),M=this.d(z,P,!1),i=q.filter(y=>!y.includes("!")),n=this.d(i,P,!0),a=q.filter(y=>y.includes("!")).map(y=>y.replace(/!/g,"")),c=this.d(a,P,!1);return(y,Q)=>y.startsWith(P)?Q&&n(y)&&!c(y)||D(y)&&!M(y)?!0:S?S.a(y,Q):!1:!1}f(T,P){const S=T.indexOf("/");return S===-1||S===T.length-1?T="**/"+T:(S===0?P.slice(-1)==="/"&&(T=T.slice(1)):P.slice(-1)!=="/"&&(T="/"+T),T=P+T),T}}e.IgnoreFile=L}),define(ne[22],se([0,1,9,6,3,14,15,16,4,8,7]),function(_,e,A,L,O,T,P,S,q,m,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const D=!1,z=+new Date,M={},i=async(k,F)=>{if(!D)return F();const U=Date.now(),G=(M[k]??0)+1;console.info(k,G,"starting",Math.round((U-z)*10)/1e4),M[k]=G;const l=await F(),v=Date.now();return console.info(k,G,"took",v-U),l};function n(k){return new a(k)}e.create=n;class a{constructor(F){this.d=F,this.cancellationTokens=new Map}cancelQuery(F){this.cancellationTokens.get(F)?.cancel()}g(F){const U=new T.CancellationTokenSource;return this.cancellationTokens.set(F,U),U}async listDirectory(F,U,G,l,v){const E=b(G),B=new g.ExtUri(()=>l),p=this.g(v),W=[];let Z=!1,ie=0;const te=U.maxResults||512,Y=U.filePattern?x=>U.filePattern.split("").every(re=>x.includes(re)):x=>!0;return await i("listDirectory",()=>this.h(F,y(U),E,B,x=>{if(!!Y(x.name))return ie++,te&&ie>te&&(Z=!0,p.cancel()),W.push(x.path)},p.token)),{results:W,limitHit:Z}}async searchDirectory(F,U,G,l,v){const E=b(G),B=new g.ExtUri(()=>l);return i("searchInFiles",async()=>{const p=this.g(v),W=[],Z=c(U.contentPattern),ie=[];let te=0,Y=0;const x=!1,re=async $=>{if(p.token.isCancellationRequested)return;te++;const V=await $.resolve();if(p.token.isCancellationRequested)return;const H=new Uint8Array(V),ee=(0,P.getFileResults)(H,Z,{afterContext:U.afterContext??0,beforeContext:U.beforeContext??0,previewOptions:U.previewOptions,remainingResultQuota:U.maxResults?U.maxResults-Y:1e4});if(ee.length){Y+=ee.length,U.maxResults&&Y>U.maxResults&&p.cancel();const f={resource:L.URI.joinPath(E.folder,$.path),results:ee};this.d.sendTextSearchMatch(f,v),W.push(f)}};return await i("walkFolderToResolve",()=>this.h(F,y(U),E,B,async $=>ie.push(re($)),p.token)),await i("resolveOngoingProcesses",()=>Promise.all(ie)),D&&console.log("Searched in",te,"files"),{results:W,limitHit:x}})}async h(F,U,G,l,v,E){const B=A.parse(G.excludePattern??{},{trimForExclusions:!0}),p=($,V,H)=>($=$.slice(1),!!(B($,V,H)||Q(U,$))),W=($,V,H)=>($=$.slice(1),!(B($,V,H)||!J(U,$,l))),Z=($,V)=>({type:"file",name:$.name,path:V,resolve:()=>$.getFile().then(ee=>ee.arrayBuffer())}),ie=$=>$.kind==="directory",te=$=>$.kind==="file",Y=async($,V,H)=>{if(!G.disregardIgnoreFiles){const f=await Promise.all([$.getFileHandle(".gitignore").catch(d=>{}),$.getFileHandle(".ignore").catch(d=>{})]);await Promise.all(f.map(async d=>{if(!d)return;const h=new TextDecoder("utf8").decode(new Uint8Array(await(await d.getFile()).arrayBuffer()));H=new S.IgnoreFile(h,V,H)}))}const ee=m.Promises.withAsyncBody(async f=>{const d=[],h=[],C=[],w=new Set;for await(const I of $.entries())C.push(I),w.add(I[0]);for(const[I,j]of C){if(E.isCancellationRequested)break;const r=V+I;if(H&&!H.isPathIncludedInTraversal(r,j.kind==="directory"))continue;const t=s=>w.has(s);ie(j)&&!p(r,I,t)?h.push(Y(j,r+"/",H)):te(j)&&W(r,I,t)&&d.push(Z(j,r))}f([...await Promise.all(h),...d])});return{type:"dir",name:$.name,entries:ee}},x=async($,V)=>{E.isCancellationRequested||await Promise.all((await $.entries).sort((H,ee)=>-(H.type==="dir"?0:1)+(ee.type==="dir"?0:1)).map(async H=>H.type==="dir"?x(H,V):V(H)))},re=await i("process",()=>Y(F,"/"));await i("resolve",()=>x(re,v))}}e.LocalFileSearchSimpleWorker=a;function c(k){return(0,q.createRegExp)(k.pattern,!!k.isRegExp,{wholeWord:k.isWordMatch,global:!0,matchCase:k.isCaseSensitive,multiline:!0,unicode:!0})}function b(k){return{...k,folder:L.URI.revive(k.folder)}}function y(k){return{...k,extraFileResources:k.extraFileResources?.map(F=>L.URI.revive(F)),folderQueries:k.folderQueries.map(F=>b(F))}}function Q(k,F){return!!(k.excludePattern&&A.match(k.excludePattern,F))}function J(k,F,U){return k.excludePattern&&A.match(k.excludePattern,F)?!1:k.includePattern||k.usingSearchPaths?k.includePattern&&A.match(k.includePattern,F)?!0:k.usingSearchPaths?!!k.folderQueries&&k.folderQueries.some(G=>{const l=G.folder,v=L.URI.file(F);if(U.isEqualOrParent(v,l)){const E=O.relative(l.path,v.path);return!G.includePattern||!!A.match(G.includePattern,E)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=localFileSearch.js.map
