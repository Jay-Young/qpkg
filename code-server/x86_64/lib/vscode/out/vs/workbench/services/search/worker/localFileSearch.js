"use strict";/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ie=["require","exports","vs/base/common/platform","vs/base/common/path","vs/base/common/strings","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/arrays","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],se=function(x){for(var e=[],j=0,A=x.length;j<A;j++)e[j]=ie[x[j]];return e};define(ie[10],se([0,1]),function(x,e){"use strict";var j,A,O;Object.defineProperty(e,"__esModule",{value:!0}),e.$ni=e.$mi=e.$li=e.Touch=e.$ki=e.$ji=e.$ii=e.$hi=e.$gi=void 0;function k(u,n,a){let $=u.get(n);return $===void 0&&($=a,u.set(n,$)),$}e.$gi=k;function P(u){const n=[];return u.forEach((a,$)=>{n.push(`${$} => ${a}`)}),`Map(${u.size}) {${n.join(", ")}}`}e.$hi=P;function C(u){const n=[];return u.forEach(a=>{n.push(a)}),`Set(${u.size}) {${n.join(", ")}}`}e.$ii=C;class B{constructor(n,a){this.uri=n,this.value=a}}class m{constructor(n,a){this[j]="ResourceMap",n instanceof m?(this.b=new Map(n.b),this.c=a??m.a):(this.b=new Map,this.c=n??m.a)}set(n,a){return this.b.set(this.c(n),new B(n,a)),this}get(n){return this.b.get(this.c(n))?.value}has(n){return this.b.has(this.c(n))}get size(){return this.b.size}clear(){this.b.clear()}delete(n){return this.b.delete(this.c(n))}forEach(n,a){typeof a<"u"&&(n=n.bind(a));for(const[$,o]of this.b)n(o.value,o.uri,this)}*values(){for(const n of this.b.values())yield n.value}*keys(){for(const n of this.b.values())yield n.uri}*entries(){for(const n of this.b.values())yield[n.uri,n.value]}*[(j=Symbol.toStringTag,Symbol.iterator)](){for(const[,n]of this.b)yield[n.uri,n.value]}}e.$ji=m,m.a=u=>u.toString();class v{constructor(n,a){this[A]="ResourceSet",!n||typeof n=="function"?this.a=new m(n):(this.a=new m(a),n.forEach(this.add,this))}get size(){return this.a.size}add(n){return this.a.set(n,n),this}clear(){this.a.clear()}delete(n){return this.a.delete(n)}forEach(n,a){this.a.forEach(($,o)=>n.call(a,o,o,this))}has(n){return this.a.has(n)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(A=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.$ki=v;var L;(function(u){u[u.None=0]="None",u[u.AsOld=1]="AsOld",u[u.AsNew=2]="AsNew"})(L||(e.Touch=L={}));class z{constructor(){this[O]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(n){return this.a.has(n)}get(n,a=0){const $=this.a.get(n);if($)return a!==0&&this.j($,a),$.value}set(n,a,$=0){let o=this.a.get(n);if(o)o.value=a,$!==0&&this.j(o,$);else{switch(o={key:n,value:a,next:void 0,previous:void 0},$){case 0:this.h(o);break;case 1:this.g(o);break;case 2:this.h(o);break;default:this.h(o);break}this.a.set(n,o),this.d++}return this}delete(n){return!!this.remove(n)}remove(n){const a=this.a.get(n);if(a)return this.a.delete(n),this.i(a),this.d--,a.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const n=this.b;return this.a.delete(n.key),this.i(n),this.d--,n.value}forEach(n,a){const $=this.e;let o=this.b;for(;o;){if(a?n.bind(a)(o.value,o.key,this):n(o.value,o.key,this),this.e!==$)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){const n=this,a=this.e;let $=this.b;const o={[Symbol.iterator](){return o},next(){if(n.e!==a)throw new Error("LinkedMap got modified during iteration.");if($){const V={value:$.key,done:!1};return $=$.next,V}else return{value:void 0,done:!0}}};return o}values(){const n=this,a=this.e;let $=this.b;const o={[Symbol.iterator](){return o},next(){if(n.e!==a)throw new Error("LinkedMap got modified during iteration.");if($){const V={value:$.value,done:!1};return $=$.next,V}else return{value:void 0,done:!0}}};return o}entries(){const n=this,a=this.e;let $=this.b;const o={[Symbol.iterator](){return o},next(){if(n.e!==a)throw new Error("LinkedMap got modified during iteration.");if($){const V={value:[$.key,$.value],done:!1};return $=$.next,V}else return{value:void 0,done:!0}}};return o}[(O=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(n){if(n>=this.size)return;if(n===0){this.clear();return}let a=this.b,$=this.size;for(;a&&$>n;)this.a.delete(a.key),a=a.next,$--;this.b=a,this.d=$,a&&(a.previous=void 0),this.e++}g(n){if(!this.b&&!this.c)this.c=n;else if(this.b)n.next=this.b,this.b.previous=n;else throw new Error("Invalid list");this.b=n,this.e++}h(n){if(!this.b&&!this.c)this.b=n;else if(this.c)n.previous=this.c,this.c.next=n;else throw new Error("Invalid list");this.c=n,this.e++}i(n){if(n===this.b&&n===this.c)this.b=void 0,this.c=void 0;else if(n===this.b){if(!n.next)throw new Error("Invalid list");n.next.previous=void 0,this.b=n.next}else if(n===this.c){if(!n.previous)throw new Error("Invalid list");n.previous.next=void 0,this.c=n.previous}else{const a=n.next,$=n.previous;if(!a||!$)throw new Error("Invalid list");a.previous=$,$.next=a}n.next=void 0,n.previous=void 0,this.e++}j(n,a){if(!this.b||!this.c)throw new Error("Invalid list");if(!(a!==1&&a!==2)){if(a===1){if(n===this.b)return;const $=n.next,o=n.previous;n===this.c?(o.next=void 0,this.c=o):($.previous=o,o.next=$),n.previous=void 0,n.next=this.b,this.b.previous=n,this.b=n,this.e++}else if(a===2){if(n===this.c)return;const $=n.next,o=n.previous;n===this.b?($.previous=void 0,this.b=$):($.previous=o,o.next=$),n.next=void 0,n.previous=this.c,this.c.next=n,this.c=n,this.e++}}}toJSON(){const n=[];return this.forEach((a,$)=>{n.push([$,a])}),n}fromJSON(n){this.clear();for(const[a,$]of n)this.set(a,$)}}e.$li=z;class D extends z{constructor(n,a=1){super(),this.k=n,this.l=Math.min(Math.max(0,a),1)}get limit(){return this.k}set limit(n){this.k=n,this.m()}get ratio(){return this.l}set ratio(n){this.l=Math.min(Math.max(0,n),1),this.m()}get(n,a=2){return super.get(n,a)}peek(n){return super.get(n,0)}set(n,a){return super.set(n,a,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}e.$mi=D;class s{constructor(){this.a=new Map}add(n){return this.a.set(n,(this.a.get(n)||0)+1),this}delete(n){let a=this.a.get(n)||0;return a===0?!1:(a--,a===0?this.a.delete(n):this.a.set(n,a),!0)}has(n){return this.a.has(n)}}e.$ni=s}),define(ie[11],se([0,1]),function(x,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$2c=void 0,e.$2c=Symbol("MicrotaskDelay")}),define(ie[5],se([0,1,3,2,4,17]),function(x,e,j,A,O,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Pe=e.$Oe=e.$Ne=e.$Me=e.$Le=e.$Ke=e.$Je=e.$Ie=e.$He=e.$Ge=e.$Fe=e.$Ee=e.$De=e.$Ce=e.$Be=e.$Ae=void 0;function P(r){return r===47||r===92}e.$Ae=P;function C(r){return r.replace(/[\\/]/g,j.$8b.sep)}e.$Be=C;function B(r){return r.indexOf("/")===-1&&(r=C(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}e.$Ce=B;function m(r,g=j.$8b.sep){if(!r)return"";const S=r.length,F=r.charCodeAt(0);if(P(F)){if(P(r.charCodeAt(1))&&!P(r.charCodeAt(2))){let N=3;const X=N;for(;N<S&&!P(r.charCodeAt(N));N++);if(X!==N&&!P(r.charCodeAt(N+1))){for(N+=1;N<S;N++)if(P(r.charCodeAt(N)))return r.slice(0,N+1).replace(/[\\/]/g,g)}}return g}else if(a(F)&&r.charCodeAt(1)===58)return P(r.charCodeAt(2))?r.slice(0,2)+g:r.slice(0,2);let H=r.indexOf("://");if(H!==-1){for(H+=3;H<S;H++)if(P(r.charCodeAt(H)))return r.slice(0,H+1)}return""}e.$De=m;function v(r){if(!A.$d||!r||r.length<5)return!1;let g=r.charCodeAt(0);if(g!==92||(g=r.charCodeAt(1),g!==92))return!1;let S=2;const F=S;for(;S<r.length&&(g=r.charCodeAt(S),g!==92);S++);return!(F===S||(g=r.charCodeAt(S+1),isNaN(g)||g===92))}e.$Ee=v;const L=/[\\/:\*\?"<>\|]/g,z=/[\\/]/g,D=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function s(r,g=A.$d){const S=g?L:z;return!(!r||r.length===0||/^\s+$/.test(r)||(S.lastIndex=0,S.test(r))||g&&D.test(r)||r==="."||r===".."||g&&r[r.length-1]==="."||g&&r.length!==r.trim().length||r.length>255)}e.$Fe=s;function u(r,g,S){const F=r===g;return!S||F?F:!r||!g?!1:(0,O.$Jd)(r,g)}e.$Ge=u;function n(r,g,S,F=j.sep){if(r===g)return!0;if(!r||!g||g.length>r.length)return!1;if(S){if(!(0,O.$Kd)(r,g))return!1;if(g.length===r.length)return!0;let N=g.length;return g.charAt(g.length-1)===F&&N--,r.charAt(N)===F}return g.charAt(g.length-1)!==F&&(g+=F),r.indexOf(g)===0}e.$He=n;function a(r){return r>=65&&r<=90||r>=97&&r<=122}e.$Ie=a;function $(r,g){return A.$d&&r.endsWith(":")&&(r+=j.sep),(0,j.$0b)(r)||(r=(0,j.$$b)(g,r)),r=(0,j.$9b)(r),A.$d?(r=(0,O.$qd)(r,j.sep),r.endsWith(":")&&(r+=j.sep)):(r=(0,O.$qd)(r,j.sep),r||(r=j.sep)),r}e.$Je=$;function o(r){const g=(0,j.$9b)(r);return A.$d?r.length>3?!1:V(g)&&(r.length===2||g.charCodeAt(2)===92):g===j.$8b.sep}e.$Ke=o;function V(r,g=A.$d){return g?a(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}e.$Le=V;function p(r,g=A.$d){return V(r,g)?r[0]:void 0}e.$Me=p;function T(r,g,S){return g.length>r.length?-1:r===g?0:(S&&(r=r.toLowerCase(),g=g.toLowerCase()),r.indexOf(g))}e.$Ne=T;function U(r){const g=r.split(":");let S,F,H;for(const N of g){const X=Number(N);(0,k.$ke)(X)?F===void 0?F=X:H===void 0&&(H=X):S=S?[S,N].join(":"):N}if(!S)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:S,line:F!==void 0?F:void 0,column:H!==void 0?H:F!==void 0?1:void 0}}e.$Oe=U;const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Q="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function Z(r,g,S=8){let F="";for(let N=0;N<S;N++){let X;N===0&&A.$d&&!g&&(S===3||S===4)?X=Q:X=M,F+=X.charAt(Math.floor(Math.random()*X.length))}let H;return g?H=`${g}-${F}`:H=F,r?(0,j.$$b)(r,H):H}e.$Pe=Z}),define(ie[12],se([0,1,13,2,6]),function(x,e,j,A,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.$1e=e.$Ze=e.$Ye=e.$Xe=e.$We=e.$Ve=e.$Ue=e.$Te=e.Schemas=void 0;var k;(function(m){m.inMemory="inmemory",m.vscode="vscode",m.internal="private",m.walkThrough="walkThrough",m.walkThroughSnippet="walkThroughSnippet",m.http="http",m.https="https",m.file="file",m.mailto="mailto",m.untitled="untitled",m.data="data",m.command="command",m.vscodeRemote="vscode-remote",m.vscodeRemoteResource="vscode-remote-resource",m.vscodeManagedRemoteResource="vscode-managed-remote-resource",m.vscodeUserData="vscode-userdata",m.vscodeCustomEditor="vscode-custom-editor",m.vscodeNotebookCell="vscode-notebook-cell",m.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",m.vscodeNotebookCellOutput="vscode-notebook-cell-output",m.vscodeInteractiveInput="vscode-interactive-input",m.vscodeSettings="vscode-settings",m.vscodeWorkspaceTrust="vscode-workspace-trust",m.vscodeTerminal="vscode-terminal",m.vscodeChatSesssion="vscode-chat-editor",m.webviewPanel="webview-panel",m.vscodeWebview="vscode-webview",m.extension="extension",m.vscodeFileResource="vscode-file",m.tmp="tmp",m.vsls="vsls",m.vscodeSourceControl="vscode-scm"})(k||(e.Schemas=k={})),e.$Te="vscode-tkn",e.$Ue="tkn";class P{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${k.vscodeRemoteResource}`}setPreferredWebSchema(v){this.d=v}setDelegate(v){this.e=v}setServerRootPath(v){this.f=`${v}/${k.vscodeRemoteResource}`}set(v,L,z){this.a[v]=L,this.b[v]=z}setConnectionToken(v,L){this.c[v]=L}getPreferredWebSchema(){return this.d}rewrite(v){if(this.e)try{return this.e(v)}catch(n){return j.$X(n),v}const L=v.authority;let z=this.a[L];z&&z.indexOf(":")!==-1&&z.indexOf("[")===-1&&(z=`[${z}]`);const D=this.b[L],s=this.c[L];let u=`path=${encodeURIComponent(v.path)}`;return typeof s=="string"&&(u+=`&${e.$Ue}=${encodeURIComponent(s)}`),O.URI.from({scheme:A.$j?this.d:k.vscodeRemoteResource,authority:`${z}:${D}`,path:A.$j?(window.location.pathname+"/"+this.f).replace(/\/\/+/g,"/"):this.f,query:u})}}e.$Ve=new P,e.$We="vs/../../extensions",e.$Xe="vs/../../node_modules",e.$Ye="vs/../../node_modules.asar",e.$Ze="vs/../../node_modules.asar.unpacked";class C{asBrowserUri(v){const L=this.b(v,x);return this.uriToBrowserUri(L)}uriToBrowserUri(v){return v.scheme===k.vscodeRemote?e.$Ve.rewrite(v):v.scheme===k.file&&(A.$h||A.$k&&A.$b.origin===`${k.vscodeFileResource}://${C.a}`)?v.with({scheme:k.vscodeFileResource,authority:v.authority||C.a,query:null,fragment:null}):v}asFileUri(v){const L=this.b(v,x);return this.uriToFileUri(L)}uriToFileUri(v){return v.scheme===k.vscodeFileResource?v.with({scheme:k.file,authority:v.authority!==C.a?v.authority:null,query:null,fragment:null}):v}b(v,L){return O.URI.isUri(v)?v:O.URI.parse(L.toUrl(v))}}C.a="vscode-app",e.$1e=new C;var B;(function(m){const v=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);m.CoopAndCoep=Object.freeze(v.get("3"));const L="vscode-coi";function z(s){let u;typeof s=="string"?u=new URL(s).searchParams:s instanceof URL?u=s.searchParams:O.URI.isUri(s)&&(u=new URL(s.toString(!0)).searchParams);const n=u?.get(L);if(n)return v.get(n)}m.getHeadersFromQuery=z;function D(s,u,n){if(!globalThis.crossOriginIsolated)return;const a=u&&n?"3":n?"2":"1";s instanceof URLSearchParams?s.set(L,a):s[L]=a}m.addSearchParam=D})(B||(e.COI=B={}))}),define(ie[7],se([0,1,5,12,3,2,4,6]),function(x,e,j,A,O,k,P,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$dg=e.DataUri=e.$cg=e.$bg=e.$ag=e.$_f=e.$$f=e.$0f=e.$9f=e.$8f=e.$7f=e.$6f=e.$5f=e.$4f=e.$3f=e.$2f=e.$1f=e.$Zf=e.$Yf=e.$Xf=e.$Wf=e.$Vf=e.$Uf=e.$Tf=void 0;function B(D){return(0,C.$Se)(D,!0)}e.$Tf=B;class m{constructor(s){this.a=s}compare(s,u,n=!1){return s===u?0:(0,P.$Cd)(this.getComparisonKey(s,n),this.getComparisonKey(u,n))}isEqual(s,u,n=!1){return s===u?!0:!s||!u?!1:this.getComparisonKey(s,n)===this.getComparisonKey(u,n)}getComparisonKey(s,u=!1){return s.with({path:this.a(s)?s.path.toLowerCase():void 0,fragment:u?null:void 0}).toString()}ignorePathCasing(s){return this.a(s)}isEqualOrParent(s,u,n=!1){if(s.scheme===u.scheme){if(s.scheme===A.Schemas.file)return j.$He(B(s),B(u),this.a(s))&&s.query===u.query&&(n||s.fragment===u.fragment);if((0,e.$$f)(s.authority,u.authority))return j.$He(s.path,u.path,this.a(s),"/")&&s.query===u.query&&(n||s.fragment===u.fragment)}return!1}joinPath(s,...u){return C.URI.joinPath(s,...u)}basenameOrAuthority(s){return(0,e.$3f)(s)||s.authority}basename(s){return O.$8b.basename(s.path)}extname(s){return O.$8b.extname(s.path)}dirname(s){if(s.path.length===0)return s;let u;return s.scheme===A.Schemas.file?u=C.URI.file(O.$bc(B(s))).path:(u=O.$8b.dirname(s.path),s.authority&&u.length&&u.charCodeAt(0)!==47&&(console.error(`dirname("${s.toString})) resulted in a relative path`),u="/")),s.with({path:u})}normalizePath(s){if(!s.path.length)return s;let u;return s.scheme===A.Schemas.file?u=C.URI.file(O.$9b(B(s))).path:u=O.$8b.normalize(s.path),s.with({path:u})}relativePath(s,u){if(s.scheme!==u.scheme||!(0,e.$$f)(s.authority,u.authority))return;if(s.scheme===A.Schemas.file){const $=O.$ac(B(s),B(u));return k.$d?j.$Be($):$}let n=s.path||"/";const a=u.path||"/";if(this.a(s)){let $=0;for(const o=Math.min(n.length,a.length);$<o&&!(n.charCodeAt($)!==a.charCodeAt($)&&n.charAt($).toLowerCase()!==a.charAt($).toLowerCase());$++);n=a.substr(0,$)+n.substr($)}return O.$8b.relative(n,a)}resolvePath(s,u){if(s.scheme===A.Schemas.file){const n=C.URI.file(O.$_b(B(s),u));return s.with({authority:n.authority,path:n.path})}return u=j.$Ce(u),s.with({path:O.$8b.resolve(s.path,u)})}isAbsolutePath(s){return!!s.path&&s.path[0]==="/"}isEqualAuthority(s,u){return s===u||s!==void 0&&u!==void 0&&(0,P.$Jd)(s,u)}hasTrailingPathSeparator(s,u=O.sep){if(s.scheme===A.Schemas.file){const n=B(s);return n.length>j.$De(n).length&&n[n.length-1]===u}else{const n=s.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(s.fsPath)}}removeTrailingPathSeparator(s,u=O.sep){return(0,e.$_f)(s,u)?s.with({path:s.path.substr(0,s.path.length-1)}):s}addTrailingPathSeparator(s,u=O.sep){let n=!1;if(s.scheme===A.Schemas.file){const a=B(s);n=a!==void 0&&a.length===j.$De(a).length&&a[a.length-1]===u}else{u="/";const a=s.path;n=a.length===1&&a.charCodeAt(a.length-1)===47}return!n&&!(0,e.$_f)(s,u)?s.with({path:s.path+"/"}):s}}e.$Uf=m,e.$Vf=new m(()=>!1),e.$Wf=new m(D=>D.scheme===A.Schemas.file?!k.$f:!0),e.$Xf=new m(D=>!0),e.$Yf=e.$Vf.isEqual.bind(e.$Vf),e.$Zf=e.$Vf.isEqualOrParent.bind(e.$Vf),e.$1f=e.$Vf.getComparisonKey.bind(e.$Vf),e.$2f=e.$Vf.basenameOrAuthority.bind(e.$Vf),e.$3f=e.$Vf.basename.bind(e.$Vf),e.$4f=e.$Vf.extname.bind(e.$Vf),e.$5f=e.$Vf.dirname.bind(e.$Vf),e.$6f=e.$Vf.joinPath.bind(e.$Vf),e.$7f=e.$Vf.normalizePath.bind(e.$Vf),e.$8f=e.$Vf.relativePath.bind(e.$Vf),e.$9f=e.$Vf.resolvePath.bind(e.$Vf),e.$0f=e.$Vf.isAbsolutePath.bind(e.$Vf),e.$$f=e.$Vf.isEqualAuthority.bind(e.$Vf),e.$_f=e.$Vf.hasTrailingPathSeparator.bind(e.$Vf),e.$ag=e.$Vf.removeTrailingPathSeparator.bind(e.$Vf),e.$bg=e.$Vf.addTrailingPathSeparator.bind(e.$Vf);function v(D,s){const u=[];for(let n=0;n<D.length;n++){const a=s(D[n]);D.some(($,o)=>o===n?!1:(0,e.$Zf)(a,s($)))||u.push(D[n])}return u}e.$cg=v;var L;(function(D){D.META_DATA_LABEL="label",D.META_DATA_DESCRIPTION="description",D.META_DATA_SIZE="size",D.META_DATA_MIME="mime";function s(u){const n=new Map;u.path.substring(u.path.indexOf(";")+1,u.path.lastIndexOf(";")).split(";").forEach(o=>{const[V,p]=o.split(":");V&&p&&n.set(V,p)});const $=u.path.substring(0,u.path.indexOf(";"));return $&&n.set(D.META_DATA_MIME,$),n}D.parseMetaData=s})(L||(e.DataUri=L={}));function z(D,s,u){if(s){let n=D.path;return n&&n[0]!==O.$8b.sep&&(n=O.$8b.sep+n),D.with({scheme:u,authority:s,path:n})}return D.with({scheme:u})}e.$dg=z}),define(ie[8],se([0,1,14,13,18,19,7,2,11]),function(x,e,j,A,O,k,P,C,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Og=e.$Ng=e.$Mg=e.Promises=e.$Lg=e.$Kg=e.$Jg=e.$Ig=e.$Hg=e.$Gg=e.$Fg=e.$Eg=e.$Dg=e.$Cg=e.$Bg=e.$Ag=e.$zg=e.$yg=e.$xg=e.$wg=e.$vg=e.$ug=e.$tg=e.$sg=e.$rg=e.$qg=e.$pg=e.$og=e.$ng=e.$mg=e.$lg=e.$kg=e.$jg=e.$ig=e.$hg=e.$gg=e.$fg=e.$eg=void 0;function m(l){return!!l&&typeof l.then=="function"}e.$eg=m;function v(l){const t=new j.$bd,i=l(t.token),c=new Promise((d,I)=>{const K=t.token.onCancellationRequested(()=>{K.dispose(),t.dispose(),I(new A.$2)});Promise.resolve(i).then(J=>{K.dispose(),t.dispose(),d(J)},J=>{K.dispose(),t.dispose(),I(J)})});return new class{cancel(){t.cancel()}then(d,I){return c.then(d,I)}catch(d){return this.then(void 0,d)}finally(d){return c.finally(d)}}}e.$fg=v;function L(l,t,i){return new Promise((c,d)=>{const I=t.onCancellationRequested(()=>{I.dispose(),c(i)});l.then(c,d).finally(()=>I.dispose())})}e.$gg=L;function z(l,t){return new Promise((i,c)=>{const d=t.onCancellationRequested(()=>{d.dispose(),c(new A.$2)});l.then(i,c).finally(()=>d.dispose())})}e.$hg=z;async function D(l){let t=-1;const i=l.map((c,d)=>c.then(I=>(t=d,I)));try{return await Promise.race(i)}finally{l.forEach((c,d)=>{d!==t&&c.cancel()})}}e.$ig=D;function s(l,t,i){let c;const d=setTimeout(()=>{c?.(void 0),i?.()},t);return Promise.race([l.finally(()=>clearTimeout(d)),new Promise(I=>c=I)])}e.$jg=s;function u(l){return new Promise((t,i)=>{const c=l();m(c)?c.then(t,i):t(c)})}e.$kg=u;class n{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(t){if(this.f)throw new Error("Throttler is disposed");if(this.a){if(this.d=t,!this.b){const i=()=>{if(this.b=null,this.f)return;const c=this.queue(this.d);return this.d=null,c};this.b=new Promise(c=>{this.a.then(i,i).then(c)})}return new Promise((i,c)=>{this.b.then(i,c)})}return this.a=t(),new Promise((i,c)=>{this.a.then(d=>{this.a=null,i(d)},d=>{this.a=null,c(d)})})}dispose(){this.f=!0}}e.$lg=n;class a{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.$mg=a;class ${constructor(){this.a=new Map}queue(t,i){const d=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===d&&this.a.delete(t)});return this.a.set(t,d),d}}e.$ng=$;const o=(l,t)=>{let i=!0;const c=setTimeout(()=>{i=!1,t()},l);return{isTriggered:()=>i,dispose:()=>{clearTimeout(c),i=!1}}},V=l=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,l())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class p{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((d,I)=>{this.d=d,this.f=I}).then(()=>{if(this.b=null,this.d=null,this.g){const d=this.g;return this.g=null,d()}}));const c=()=>{this.a=null,this.d?.(null)};return this.a=i===B.$2c?V(c):o(i,c),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new A.$2),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.$og=p;class T{constructor(t){this.a=new p(t),this.b=new n}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.$pg=T;class U{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.$qg=U;class M extends U{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.$rg=M;function Q(l,t){return t?new Promise((i,c)=>{const d=setTimeout(()=>{I.dispose(),i()},l),I=t.onCancellationRequested(()=>{clearTimeout(d),I.dispose(),c(new A.$2)})}):v(i=>Q(l,i))}e.$sg=Q;function Z(l,t=0){const i=setTimeout(l,t);return(0,k.$ib)(()=>clearTimeout(i))}e.$tg=Z;function r(l){const t=[];let i=0;const c=l.length;function d(){return i<c?l[i++]():null}function I(K){K!=null&&t.push(K);const J=d();return J?J.then(I):Promise.resolve(t)}return Promise.resolve(null).then(I)}e.$ug=r;function g(l,t=c=>!!c,i=null){let c=0;const d=l.length,I=()=>{if(c>=d)return Promise.resolve(i);const K=l[c++];return Promise.resolve(K()).then(le=>t(le)?Promise.resolve(le):I())};return I()}e.$vg=g;function S(l,t=c=>!!c,i=null){if(l.length===0)return Promise.resolve(i);let c=l.length;const d=()=>{c=-1;for(const I of l)I.cancel?.()};return new Promise((I,K)=>{for(const J of l)J.then(le=>{--c>=0&&t(le)?(d(),I(le)):c===0&&I(i)}).catch(le=>{--c>=0&&(d(),K(le))})})}e.$wg=S;class F{constructor(t){this.a=0,this.d=t,this.f=[],this.b=0,this.g=new O.$5c}get onDrained(){return this.g.event}get size(){return this.a}queue(t){return this.a++,new Promise((i,c)=>{this.f.push({factory:t,c:i,e:c}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const t=this.f.shift();this.b++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.$xg=F;class H extends F{constructor(){super(1)}}e.$yg=H;class N{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const t=new f;return this.b.add(t),t.p}d(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueFor(t,i=P.$Vf){const c=i.getComparisonKey(t);let d=this.a.get(c);return d||(d=new H,O.Event.once(d.onDrained)(()=>{d?.dispose(),this.a.delete(c),this.f()}),this.a.set(c,d)),d}f(){this.d()&&this.g()}g(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.g()}}e.$zg=N;class X{constructor(t,i){this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.$Ag=X;class ne{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setInterval(()=>{t()},i)}}e.$Bg=ne;class _{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.$Cg=_;class ee{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.$Dg=ee;class re extends _{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.$Eg=re;class q extends k.$kb{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new k.$lb),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const i of t)this.a.push(i);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new _(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.$Fg=q,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.$Gg=l=>{(0,C.$v)(()=>{if(t)return;const i=Date.now()+15;l(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:e.$Gg=(l,t)=>{const i=requestIdleCallback(l,typeof t=="number"?{timeout:t}:void 0);let c=!1;return{dispose(){c||(c=!0,cancelIdleCallback(i))}}}}();class Y{constructor(t){this.d=!1,this.a=()=>{try{this.f=t()}catch(i){this.g=i}finally{this.d=!0}},this.b=(0,e.$Gg)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.$Hg=Y;async function G(l,t,i){let c;for(let d=0;d<i;d++)try{return await l()}catch(I){c=I,await Q(t)}throw c}e.$Ig=G;class te{hasPending(t){return this.a?typeof t=="number"?this.a.taskId===t:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(t,i,c){return this.a={taskId:t,cancel:()=>c?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}setNext(t){if(this.b)this.b.run=t;else{let i,c;const d=new Promise((I,K)=>{i=I,c=K});this.b={run:t,promise:d,promiseResolve:i,promiseReject:c}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.$Jg=te;class h{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.$Kg=h;var b;(function(l){l[l.Resolved=0]="Resolved",l[l.Rejected=1]="Rejected"})(b||(b={}));class f{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.d={outcome:0,value:t},i()})}error(t){return new Promise(i=>{this.b(t),this.d={outcome:1,value:t},i()})}cancel(){return this.error(new A.$2)}}e.$Lg=f;var R;(function(l){async function t(c){let d;const I=await Promise.all(c.map(K=>K.then(J=>J,J=>{d||(d=J)})));if(typeof d<"u")throw d;return I}l.settled=t;function i(c){return new Promise(async(d,I)=>{try{await c(d,I)}catch(K){I(K)}})}l.withAsyncBody=i})(R||(e.Promises=R={}));var E;(function(l){l[l.Initial=0]="Initial",l[l.DoneOK=1]="DoneOK",l[l.DoneError=2]="DoneError"})(E||(E={}));class y{static fromArray(t){return new y(i=>{i.emitMany(t)})}static fromPromise(t){return new y(async i=>{i.emitMany(await t)})}static fromPromises(t){return new y(async i=>{await Promise.all(t.map(async c=>i.emitOne(await c)))})}static merge(t){return new y(async i=>{await Promise.all(t.map(async c=>{for await(const d of c)i.emitOne(d)}))})}constructor(t){this.a=0,this.b=[],this.d=null,this.f=new O.$5c,queueMicrotask(async()=>{const i={emitOne:c=>this.g(c),emitMany:c=>this.h(c),reject:c=>this.k(c)};try{await Promise.resolve(t(i)),this.j()}catch(c){this.k(c)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await O.Event.toPromise(this.f.event)}while(!0)}}}static map(t,i){return new y(async c=>{for await(const d of t)c.emitOne(i(d))})}map(t){return y.map(this,t)}static filter(t,i){return new y(async c=>{for await(const d of t)i(d)&&c.emitOne(d)})}filter(t){return y.filter(this,t)}static coalesce(t){return y.filter(t,i=>!!i)}coalesce(){return y.coalesce(this)}static async toPromise(t){const i=[];for await(const c of t)i.push(c);return i}toPromise(){return y.toPromise(this)}g(t){this.a===0&&(this.b.push(t),this.f.fire())}h(t){this.a===0&&(this.b=this.b.concat(t),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(t){this.a===0&&(this.a=2,this.d=t,this.f.fire())}}e.$Mg=y,y.EMPTY=y.fromArray([]);class W extends y{constructor(t,i){super(i),this.l=t}cancel(){this.l.cancel()}}e.$Ng=W;function w(l){const t=new j.$bd,i=l(t.token);return new W(t,async c=>{const d=t.token.onCancellationRequested(()=>{d.dispose(),t.dispose(),c.reject(new A.$2)});try{for await(const I of i){if(t.token.isCancellationRequested)return;c.emitOne(I)}d.dispose(),t.dispose()}catch(I){d.dispose(),t.dispose(),c.reject(I)}})}e.$Og=w}),define(ie[9],se([0,1,20,8,5,10,3,2,4]),function(x,e,j,A,O,k,P,C,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ej=e.$dj=e.$cj=e.$bj=e.$aj=e.$_i=e.$$i=e.$0i=e.$9i=e.$8i=void 0;function m(){return Object.create(null)}e.$8i=m,e.$9i="**",e.$0i="/";const v="[/\\\\]",L="[^/\\\\]",z=/\//g;function D(h,b){switch(h){case 0:return"";case 1:return`${L}*?`;default:return`(?:${v}|${L}+${v}${b?`|${v}${L}+`:""})*?`}}function s(h,b){if(!h)return[];const f=[];let R=!1,E=!1,y="";for(const W of h){switch(W){case b:if(!R&&!E){f.push(y),y="";continue}break;case"{":R=!0;break;case"}":R=!1;break;case"[":E=!0;break;case"]":E=!1;break}y+=W}return y&&f.push(y),f}e.$$i=s;function u(h){if(!h)return"";let b="";const f=s(h,e.$0i);if(f.every(R=>R===e.$9i))b=".*";else{let R=!1;f.forEach((E,y)=>{if(E===e.$9i){if(R)return;b+=D(2,y===f.length-1)}else{let W=!1,w="",l=!1,t="";for(const i of E){if(i!=="}"&&W){w+=i;continue}if(l&&(i!=="]"||!t)){let c;i==="-"?c=i:(i==="^"||i==="!")&&!t?c="^":i===e.$0i?c="":c=(0,B.$ld)(i),t+=c;continue}switch(i){case"{":W=!0;continue;case"[":l=!0;continue;case"}":{const d=`(?:${s(w,",").map(I=>u(I)).join("|")})`;b+=d,W=!1,w="";break}case"]":{b+="["+t+"]",l=!1,t="";break}case"?":b+=L;continue;case"*":b+=D(1);continue;default:b+=(0,B.$ld)(i)}}y<f.length-1&&(f[y+1]!==e.$9i||y+2<f.length)&&(b+=v)}R=E===e.$9i})}return b}const n=/^\*\*\/\*\.[\w\.-]+$/,a=/^\*\*\/([\w\.-]+)\/?$/,$=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,o=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,V=/^\*\*((\/[\w\.-]+)+)\/?$/,p=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,T=new k.$mi(1e4),U=function(){return!1},M=function(){return null};function Q(h,b){if(!h)return M;let f;typeof h!="string"?f=h.pattern:f=h,f=f.trim();const R=`${f}_${!!b.trimForExclusions}`;let E=T.get(R);if(E)return Z(E,h);let y;return n.test(f)?E=g(f.substr(4),f):(y=a.exec(r(f,b)))?E=S(y[1],f):(b.trimForExclusions?o:$).test(f)?E=F(f,b):(y=V.exec(r(f,b)))?E=H(y[1].substr(1),f,!0):(y=p.exec(r(f,b)))?E=H(y[1],f,!1):E=N(f),T.set(R,E),Z(E,h)}function Z(h,b){if(typeof b=="string")return h;const f=function(R,E){return(0,O.$He)(R,b.base,!C.$f)?h((0,B.$pd)(R.substr(b.base.length),P.sep),E):null};return f.allBasenames=h.allBasenames,f.allPaths=h.allPaths,f.basenames=h.basenames,f.patterns=h.patterns,f}function r(h,b){return b.trimForExclusions&&h.endsWith("/**")?h.substr(0,h.length-2):h}function g(h,b){return function(f,R){return typeof f=="string"&&f.endsWith(h)?b:null}}function S(h,b){const f=`/${h}`,R=`\\${h}`,E=function(W,w){return typeof W!="string"?null:w?w===h?b:null:W===h||W.endsWith(f)||W.endsWith(R)?b:null},y=[h];return E.basenames=y,E.patterns=[b],E.allBasenames=y,E}function F(h,b){const f=G(h.slice(1,-1).split(",").map(w=>Q(w,b)).filter(w=>w!==M),h),R=f.length;if(!R)return M;if(R===1)return f[0];const E=function(w,l){for(let t=0,i=f.length;t<i;t++)if(f[t](w,l))return h;return null},y=f.find(w=>!!w.allBasenames);y&&(E.allBasenames=y.allBasenames);const W=f.reduce((w,l)=>l.allPaths?w.concat(l.allPaths):w,[]);return W.length&&(E.allPaths=W),E}function H(h,b,f){const R=P.sep===P.$8b.sep,E=R?h:h.replace(z,P.sep),y=P.sep+E,W=P.$8b.sep+h;let w;return f?w=function(l,t){return typeof l=="string"&&(l===E||l.endsWith(y)||!R&&(l===h||l.endsWith(W)))?b:null}:w=function(l,t){return typeof l=="string"&&(l===E||!R&&l===h)?b:null},w.allPaths=[(f?"*/":"./")+h],w}function N(h){try{const b=new RegExp(`^${u(h)}$`);return function(f){return b.lastIndex=0,typeof f=="string"&&b.test(f)?h:null}}catch{return M}}function X(h,b,f){return!h||typeof b!="string"?!1:ne(h)(b,void 0,f)}e.$_i=X;function ne(h,b={}){if(!h)return U;if(typeof h=="string"||_(h)){const f=Q(h,b);if(f===M)return U;const R=function(E,y){return!!f(E,y)};return f.allBasenames&&(R.allBasenames=f.allBasenames),f.allPaths&&(R.allPaths=f.allPaths),R}return q(h,b)}e.$aj=ne;function _(h){const b=h;return b?typeof b.base=="string"&&typeof b.pattern=="string":!1}e.$bj=_;function ee(h){return h.allBasenames||[]}e.$cj=ee;function re(h){return h.allPaths||[]}e.$dj=re;function q(h,b){const f=G(Object.getOwnPropertyNames(h).map(w=>Y(w,h[w],b)).filter(w=>w!==M)),R=f.length;if(!R)return M;if(!f.some(w=>!!w.requiresSiblings)){if(R===1)return f[0];const w=function(i,c){let d;for(let I=0,K=f.length;I<K;I++){const J=f[I](i,c);if(typeof J=="string")return J;(0,A.$eg)(J)&&(d||(d=[]),d.push(J))}return d?(async()=>{for(const I of d){const K=await I;if(typeof K=="string")return K}return null})():null},l=f.find(i=>!!i.allBasenames);l&&(w.allBasenames=l.allBasenames);const t=f.reduce((i,c)=>c.allPaths?i.concat(c.allPaths):i,[]);return t.length&&(w.allPaths=t),w}const E=function(w,l,t){let i,c;for(let d=0,I=f.length;d<I;d++){const K=f[d];K.requiresSiblings&&t&&(l||(l=(0,P.$cc)(w)),i||(i=l.substr(0,l.length-(0,P.$dc)(w).length)));const J=K(w,l,i,t);if(typeof J=="string")return J;(0,A.$eg)(J)&&(c||(c=[]),c.push(J))}return c?(async()=>{for(const d of c){const I=await d;if(typeof I=="string")return I}return null})():null},y=f.find(w=>!!w.allBasenames);y&&(E.allBasenames=y.allBasenames);const W=f.reduce((w,l)=>l.allPaths?w.concat(l.allPaths):w,[]);return W.length&&(E.allPaths=W),E}function Y(h,b,f){if(b===!1)return M;const R=Q(h,f);if(R===M)return M;if(typeof b=="boolean")return R;if(b){const E=b.when;if(typeof E=="string"){const y=(W,w,l,t)=>{if(!t||!R(W,w))return null;const i=E.replace("$(basename)",()=>l),c=t(i);return(0,A.$eg)(c)?c.then(d=>d?h:null):c?h:null};return y.requiresSiblings=!0,y}}return R}function G(h,b){const f=h.filter(w=>!!w.basenames);if(f.length<2)return h;const R=f.reduce((w,l)=>{const t=l.basenames;return t?w.concat(t):w},[]);let E;if(b){E=[];for(let w=0,l=R.length;w<l;w++)E.push(b)}else E=f.reduce((w,l)=>{const t=l.patterns;return t?w.concat(t):w},[]);const y=function(w,l){if(typeof w!="string")return null;if(!l){let i;for(i=w.length;i>0;i--){const c=w.charCodeAt(i-1);if(c===47||c===92)break}l=w.substr(i)}const t=R.indexOf(l);return t!==-1?E[t]:null};y.basenames=R,y.patterns=E,y.allBasenames=R;const W=h.filter(w=>!w.basenames);return W.push(y),W}function te(h,b){return(0,j.$$e)(h,b,(f,R)=>typeof f=="string"&&typeof R=="string"?f===R:typeof f!="string"&&typeof R!="string"?f.base===R.base&&f.pattern===R.pattern:!1)}e.$ej=te}),define(ie[15],se([0,1,21]),function(x,e,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$6cc=void 0;const A=(O,k,P)=>{let C;if(O[0]===255&&O[1]===254)C=new TextDecoder("utf-16le").decode(O);else if(O[0]===254&&O[1]===255)C=new TextDecoder("utf-16be").decode(O);else if(C=new TextDecoder("utf8").decode(O),C.slice(0,1e3).includes("\uFFFD")&&O.includes(0))return[];const B=[],m=[];let v=null,L=P.remainingResultQuota;for(;L>=0&&(v=k.exec(C));)m.push({matchStartIndex:v.index,matchedText:v[0]}),L--;if(m.length){const z=new Set,D=new Set,s=[],u=V=>C.slice(s[V].start,s[V].end);let n=0,a=null;const $=/\r?\n/g;for(;a=$.exec(C);)s.push({start:n,end:a.index}),n=a.index+a[0].length;n<C.length&&s.push({start:n,end:C.length});let o=0;for(const{matchStartIndex:V,matchedText:p}of m){if(L<0)break;for(;s[o+1]&&V>s[o].end;)o++;let T=o;for(;s[T+1]&&V+p.length>s[T].end;)T++;if(P.beforeContext)for(let g=Math.max(0,o-P.beforeContext);g<o;g++)z.add(g);let U="",M=0;for(let g=o;g<=T;g++){let S=u(g);P.previewOptions?.charsPerLine&&S.length>P.previewOptions.charsPerLine&&(M=Math.max(V-s[o].start-20,0),S=S.substr(M,P.previewOptions.charsPerLine)),U+=`${S}
`,D.add(g)}const Q=new j.$Lr(o,V-s[o].start,T,V+p.length-s[T].start),Z=new j.$Lr(0,V-s[o].start-M,T-o,V+p.length-s[T].start-(T===o?M:0)),r={ranges:Q,preview:{text:U,matches:Z}};if(B.push(r),P.afterContext)for(let g=T+1;g<=Math.min(T+P.afterContext,s.length-1);g++)z.add(g)}for(const V of z)D.has(V)||B.push({text:u(V),lineNumber:V+1})}return B};e.$6cc=A}),define(ie[16],se([0,1,9]),function(x,e,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$wIb=void 0;class A{constructor(k,P,C){if(this.b=P,this.c=C,P[P.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");P[P.length-1]!=="/"&&(P+="/"),this.a=this.e(k,this.b,this.c)}updateContents(k){this.a=this.e(k,this.b,this.c)}isPathIncludedInTraversal(k,P){if(k[0]!=="/"||k[k.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+k);return!this.a(k,P)}isArbitraryPathIgnored(k,P){if(k[0]!=="/"||k[k.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+k);const C=k.split("/").filter(v=>v);let B=!1,m="";for(let v=0;v<C.length;v++){const L=v===C.length-1,z=C[v];if(m=m+"/"+z,!this.isPathIncludedInTraversal(m,L?P:!0)){B=!0;break}}return B}d(k,P,C){const B=k.map(v=>this.f(v,P)),m=Object.create(null);for(const v of B)m[v]=!0;return j.$aj(m,{trimForExclusions:C})}e(k,P,C){const B=k.split(`
`).map(o=>o.trim()).filter(o=>o&&o[0]!=="#"),m=B.filter(o=>!o.endsWith("/")),v=m.filter(o=>!o.includes("!")),L=this.d(v,P,!0),z=m.filter(o=>o.includes("!")).map(o=>o.replace(/!/g,"")),D=this.d(z,P,!1),s=B.filter(o=>!o.includes("!")),u=this.d(s,P,!0),n=B.filter(o=>o.includes("!")).map(o=>o.replace(/!/g,"")),a=this.d(n,P,!1);return(o,V)=>o.startsWith(P)?V&&u(o)&&!a(o)||L(o)&&!D(o)?!0:C?C.a(o,V):!1:!1}f(k,P){const C=k.indexOf("/");return C===-1||C===k.length-1?k="**/"+k:(C===0?P.slice(-1)==="/"&&(k=k.slice(1)):P.slice(-1)!=="/"&&(k="/"+k),k=P+k),k}}e.$wIb=A}),define(ie[22],se([0,1,9,6,3,14,15,16,4,8,7]),function(x,e,j,A,O,k,P,C,B,m,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const L=!1,z=+new Date,D={},s=async(T,U)=>{if(!L)return U();const M=Date.now(),Q=(D[T]??0)+1;console.info(T,Q,"starting",Math.round((M-z)*10)/1e4),D[T]=Q;const Z=await U(),r=Date.now();return console.info(T,Q,"took",r-M),Z};function u(T){return new n(T)}e.create=u;class n{constructor(U){this.d=U,this.cancellationTokens=new Map}cancelQuery(U){this.cancellationTokens.get(U)?.cancel()}g(U){const M=new k.$bd;return this.cancellationTokens.set(U,M),M}async listDirectory(U,M,Q,Z,r){const g=$(Q),S=new v.$Uf(()=>Z),F=this.g(r),H=[];let N=!1,X=0;const ne=M.maxResults||512,_=M.filePattern?ee=>M.filePattern.split("").every(re=>ee.includes(re)):ee=>!0;return await s("listDirectory",()=>this.h(U,o(M),g,S,ee=>{if(_(ee.name))return X++,ne&&X>ne&&(N=!0,F.cancel()),H.push(ee.path)},F.token)),{results:H,limitHit:N}}async searchDirectory(U,M,Q,Z,r){const g=$(Q),S=new v.$Uf(()=>Z);return s("searchInFiles",async()=>{const F=this.g(r),H=[],N=a(M.contentPattern),X=[];let ne=0,_=0;const ee=!1,re=async q=>{if(F.token.isCancellationRequested)return;ne++;const Y=await q.resolve();if(F.token.isCancellationRequested)return;const G=new Uint8Array(Y),te=(0,P.$6cc)(G,N,{afterContext:M.afterContext??0,beforeContext:M.beforeContext??0,previewOptions:M.previewOptions,remainingResultQuota:M.maxResults?M.maxResults-_:1e4});if(te.length){_+=te.length,M.maxResults&&_>M.maxResults&&F.cancel();const h={resource:A.URI.joinPath(g.folder,q.path),results:te};this.d.sendTextSearchMatch(h,r),H.push(h)}};return await s("walkFolderToResolve",()=>this.h(U,o(M),g,S,async q=>X.push(re(q)),F.token)),await s("resolveOngoingProcesses",()=>Promise.all(X)),L&&console.log("Searched in",ne,"files"),{results:H,limitHit:ee}})}async h(U,M,Q,Z,r,g){const S=j.$aj(Q.excludePattern??{},{trimForExclusions:!0}),F=(q,Y,G)=>(q=q.slice(1),!!(S(q,Y,G)||V(M,q))),H=(q,Y,G)=>(q=q.slice(1),!(S(q,Y,G)||!p(M,q,Z))),N=(q,Y)=>({type:"file",name:q.name,path:Y,resolve:()=>q.getFile().then(te=>te.arrayBuffer())}),X=q=>q.kind==="directory",ne=q=>q.kind==="file",_=async(q,Y,G)=>{if(!Q.disregardIgnoreFiles){const h=await Promise.all([q.getFileHandle(".gitignore").catch(b=>{}),q.getFileHandle(".ignore").catch(b=>{})]);await Promise.all(h.map(async b=>{if(!b)return;const f=new TextDecoder("utf8").decode(new Uint8Array(await(await b.getFile()).arrayBuffer()));G=new C.$wIb(f,Y,G)}))}const te=m.Promises.withAsyncBody(async h=>{const b=[],f=[],R=[],E=new Set;for await(const y of q.entries())R.push(y),E.add(y[0]);for(const[y,W]of R){if(g.isCancellationRequested)break;const w=Y+y;if(G&&!G.isPathIncludedInTraversal(w,W.kind==="directory"))continue;const l=t=>E.has(t);X(W)&&!F(w,y,l)?f.push(_(W,w+"/",G)):ne(W)&&H(w,y,l)&&b.push(N(W,w))}h([...await Promise.all(f),...b])});return{type:"dir",name:q.name,entries:te}},ee=async(q,Y)=>{g.isCancellationRequested||await Promise.all((await q.entries).sort((G,te)=>-(G.type==="dir"?0:1)+(te.type==="dir"?0:1)).map(async G=>G.type==="dir"?ee(G,Y):Y(G)))},re=await s("process",()=>_(U,"/"));await s("resolve",()=>ee(re,r))}}e.LocalFileSearchSimpleWorker=n;function a(T){return(0,B.$td)(T.pattern,!!T.isRegExp,{wholeWord:T.isWordMatch,global:!0,matchCase:T.isCaseSensitive,multiline:!0,unicode:!0})}function $(T){return{...T,folder:A.URI.revive(T.folder)}}function o(T){return{...T,extraFileResources:T.extraFileResources?.map(U=>A.URI.revive(U)),folderQueries:T.folderQueries.map(U=>$(U))}}function V(T,U){return!!(T.excludePattern&&j.$_i(T.excludePattern,U))}function p(T,U,M){return T.excludePattern&&j.$_i(T.excludePattern,U)?!1:T.includePattern||T.usingSearchPaths?T.includePattern&&j.$_i(T.includePattern,U)?!0:T.usingSearchPaths?!!T.folderQueries&&T.folderQueries.some(Q=>{const Z=Q.folder,r=A.URI.file(U);if(M.isEqualOrParent(r,Z)){const g=O.$ac(Z.path,r.path);return!Q.includePattern||!!j.$_i(Q.includePattern,g)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=localFileSearch.js.map
