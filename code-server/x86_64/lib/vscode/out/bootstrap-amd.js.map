{"version":3,"sources":["out-vscode-reh-web/bootstrap-amd.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n//@ts-check\n'use strict';\n\n// Store the node.js require function in a variable\n// before loading our AMD loader to avoid issues\n// when this file is bundled with other files.\nconst nodeRequire = require;\n\n// VSCODE_GLOBALS: node_modules\nglobalThis._VSCODE_NODE_MODULES = new Proxy(Object.create(null), { get: (_target, mod) => nodeRequire(String(mod)) });\n\n// VSCODE_GLOBALS: package/product.json\n/** @type Record<string, any> */\nglobalThis._VSCODE_PRODUCT_JSON = require('../product.json');\nif (process.env['VSCODE_DEV']) {\n\t// Patch product overrides when running out of sources\n\ttry {\n\t\t// @ts-ignore\n\t\tconst overrides = require('../product.overrides.json');\n\t\tglobalThis._VSCODE_PRODUCT_JSON = Object.assign(globalThis._VSCODE_PRODUCT_JSON, overrides);\n\t} catch (error) { /* ignore */ }\n}\nglobalThis._VSCODE_PACKAGE_JSON = require('../package.json');\n\n// @ts-ignore\nconst loader = require('./vs/loader');\nconst bootstrap = require('./bootstrap');\nconst performance = require('./vs/base/common/performance');\n\n// Bootstrap: NLS\nconst nlsConfig = bootstrap.setupNLS();\n\n// Bootstrap: Loader\nloader.config({\n\tbaseUrl: bootstrap.fileUriFromPath(__dirname, { isWindows: process.platform === 'win32' }),\n\tcatchError: true,\n\tnodeRequire,\n\t'vs/nls': nlsConfig,\n\tamdModulesPattern: /^vs\\//,\n\trecordStats: true\n});\n\n// Running in Electron\nif (process.env['ELECTRON_RUN_AS_NODE'] || process.versions['electron']) {\n\tloader.define('fs', ['original-fs'], function (/** @type {import('fs')} */originalFS) {\n\t\treturn originalFS;  // replace the patched electron fs with the original node fs for all AMD code\n\t});\n}\n\n// Pseudo NLS support\nif (nlsConfig && nlsConfig.pseudo) {\n\tloader(['vs/nls'], function (/** @type {import('vs/nls')} */nlsPlugin) {\n\t\tnlsPlugin.setPseudoTranslation(!!nlsConfig.pseudo);\n\t});\n}\n\n/**\n * @param {string=} entrypoint\n * @param {(value: any) => void=} onLoad\n * @param {(err: Error) => void=} onError\n */\nexports.load = function (entrypoint, onLoad, onError) {\n\tif (!entrypoint) {\n\t\treturn;\n\t}\n\n\t// code cache config\n\tif (process.env['VSCODE_CODE_CACHE_PATH']) {\n\t\tloader.config({\n\t\t\tnodeCachedData: {\n\t\t\t\tpath: process.env['VSCODE_CODE_CACHE_PATH'],\n\t\t\t\tseed: entrypoint\n\t\t\t}\n\t\t});\n\t}\n\n\tonLoad = onLoad || function () { };\n\tonError = onError || function (err) { console.error(err); };\n\n\tperformance.mark('code/fork/willLoadCode');\n\tloader([entrypoint], onLoad, onError);\n};\n"],"mappings":"aAWA,MAAM,YAAc,QAQpB,GALA,WAAW,qBAAuB,IAAI,MAAM,OAAO,OAAO,IAAI,EAAG,CAAE,IAAK,CAACA,EAASC,IAAQ,YAAY,OAAOA,CAAG,CAAC,CAAE,CAAC,EAIpH,WAAW,qBAAuB,QAAQ,iBAAiB,EACvD,QAAQ,IAAI,WAEf,GAAI,CAEH,MAAMC,EAAY,QAAQ,2BAA2B,EACrD,WAAW,qBAAuB,OAAO,OAAO,WAAW,qBAAsBA,CAAS,CAC3F,MAAE,CAA6B,CAEhC,WAAW,qBAAuB,QAAQ,iBAAiB,EAG3D,MAAM,OAAS,QAAQ,aAAa,EAC9B,UAAY,QAAQ,aAAa,EACjC,YAAc,QAAQ,8BAA8B,EAGpD,UAAY,UAAU,SAAS,EAGrC,OAAO,OAAO,CACb,QAAS,UAAU,gBAAgB,UAAW,CAAE,UAAW,QAAQ,WAAa,OAAQ,CAAC,EACzF,WAAY,GACZ,YACA,SAAU,UACV,kBAAmB,QACnB,YAAa,EACd,CAAC,GAGG,QAAQ,IAAI,sBAA2B,QAAQ,SAAS,WAC3D,OAAO,OAAO,KAAM,CAAC,aAAa,EAAG,SAAqCC,EAAY,CACrF,OAAOA,CACR,CAAC,EAIE,WAAa,UAAU,QAC1B,OAAO,CAAC,QAAQ,EAAG,SAAyCC,EAAW,CACtEA,EAAU,qBAAqB,CAAC,CAAC,UAAU,MAAM,CAClD,CAAC,EAQF,QAAQ,KAAO,SAAUC,EAAYC,EAAQC,EAAS,CAChDF,IAKD,QAAQ,IAAI,wBACf,OAAO,OAAO,CACb,eAAgB,CACf,KAAM,QAAQ,IAAI,uBAClB,KAAMA,CACP,CACD,CAAC,EAGFC,EAASA,GAAU,UAAY,CAAE,EACjCC,EAAUA,GAAW,SAAUC,EAAK,CAAE,QAAQ,MAAMA,CAAG,CAAG,EAE1D,YAAY,KAAK,wBAAwB,EACzC,OAAO,CAACH,CAAU,EAAGC,EAAQC,CAAO,EACrC","names":["_target","mod","overrides","originalFS","nlsPlugin","entrypoint","onLoad","onError","err"],"file":"bootstrap-amd.js"}