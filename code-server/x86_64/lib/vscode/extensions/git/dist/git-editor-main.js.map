{"version":3,"sources":["webpack://git/./src/ipc/ipcClient.ts","webpack://git/external \"http\"","webpack://git/webpack/bootstrap","webpack://git/./src/git-editor-main.ts"],"names":["constructor","b","ipcHandlePath","process","env","Error","this","a","call","request","opts","socketPath","path","method","Promise","c","e","req","http","res","statusCode","chunks","on","d","push","JSON","parse","Buffer","concat","toString","err","write","stringify","end","module","exports","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","argv","ipcClient","IPCClient","commitMessagePath","length","then","setTimeout","exit","catch","console","error","fatal","main"],"mappings":"6GAKA,gBAEA,kBAICA,YAAoBC,GAAA,KAAAA,IACnB,MAAMC,EAAgBC,QAAQC,IAA2B,sBAEzD,IAAKF,EACJ,MAAM,IAAIG,MAAM,iCAGjBC,KAAKC,EAAIL,EAGVM,KAAKC,GACJ,MAAMC,EAA4B,CACjCC,WAAYL,KAAKC,EACjBK,KAAM,IAAIN,KAAKL,IACfY,OAAQ,QAGT,OAAO,IAAIC,SAAQ,CAACC,EAAGC,KACtB,MAAMC,EAAMC,EAAKT,QAAQC,GAAMS,IAC9B,GAAuB,MAAnBA,EAAIC,WACP,OAAOJ,EAAE,IAAIX,MAAM,oBAAoBc,EAAIC,eAG5C,MAAMC,EAAmB,GACzBF,EAAIG,GAAG,QAAQC,GAAKF,EAAOG,KAAKD,KAChCJ,EAAIG,GAAG,OAAO,IAAMP,EAAEU,KAAKC,MAAMC,OAAOC,OAAOP,GAAQQ,SAAS,eAGjEZ,EAAIK,GAAG,SAASQ,GAAOd,EAAEc,KACzBb,EAAIc,MAAMN,KAAKO,UAAUvB,IACzBQ,EAAIgB,Y,SCzCPC,EAAOC,QAAUC,QAAQ,UCCrBC,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaL,QAGrB,IAAID,EAASG,EAAyBE,GAAY,CAGjDJ,QAAS,IAOV,OAHAO,EAAoBH,GAAUL,EAAQA,EAAOC,QAASG,GAG/CJ,EAAOC,Q,wECjBf,iBAOA,SAAcQ,GACb,MAAMC,EAAY,IAAI,EAAAC,UAAU,cAC1BC,EAAoBH,EAAKA,EAAKI,OAAS,GAE7CH,EAAUpC,KAAK,CAAEsC,sBAAqBE,MAAK,KAC1CC,YAAW,IAAM9C,QAAQ+C,KAAK,IAAI,MAChCC,OAAMrB,GAXV,SAAeA,GACdsB,QAAQC,MAAMvB,GACd3B,QAAQ+C,KAAK,GASGI,CAAMxB,KAGvByB,CAAKpD,QAAQwC,O","file":"git-editor-main.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as http from 'http';\n\nexport class IPCClient {\n\n\tprivate a: string;\n\n\tconstructor(private b: string) {\n\t\tconst ipcHandlePath = process.env['VSCODE_GIT_IPC_HANDLE'];\n\n\t\tif (!ipcHandlePath) {\n\t\t\tthrow new Error('Missing VSCODE_GIT_IPC_HANDLE');\n\t\t}\n\n\t\tthis.a = ipcHandlePath;\n\t}\n\n\tcall(request: any): Promise<any> {\n\t\tconst opts: http.RequestOptions = {\n\t\t\tsocketPath: this.a,\n\t\t\tpath: `/${this.b}`,\n\t\t\tmethod: 'POST'\n\t\t};\n\n\t\treturn new Promise((c, e) => {\n\t\t\tconst req = http.request(opts, res => {\n\t\t\t\tif (res.statusCode !== 200) {\n\t\t\t\t\treturn e(new Error(`Bad status code: ${res.statusCode}`));\n\t\t\t\t}\n\n\t\t\t\tconst chunks: Buffer[] = [];\n\t\t\t\tres.on('data', d => chunks.push(d));\n\t\t\t\tres.on('end', () => c(JSON.parse(Buffer.concat(chunks).toString('utf8'))));\n\t\t\t});\n\n\t\t\treq.on('error', err => e(err));\n\t\t\treq.write(JSON.stringify(request));\n\t\t\treq.end();\n\t\t});\n\t}\n}\n","module.exports = require(\"http\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IPCClient } from './ipc/ipcClient';\n\nfunction fatal(err: any): void {\n\tconsole.error(err);\n\tprocess.exit(1);\n}\n\nfunction main(argv: string[]): void {\n\tconst ipcClient = new IPCClient('git-editor');\n\tconst commitMessagePath = argv[argv.length - 1];\n\n\tipcClient.call({ commitMessagePath }).then(() => {\n\t\tsetTimeout(() => process.exit(0), 0);\n\t}).catch(err => fatal(err));\n}\n\nmain(process.argv);\n"],"sourceRoot":""}