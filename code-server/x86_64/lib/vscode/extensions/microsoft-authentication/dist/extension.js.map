{"version":3,"sources":["webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/httpHeaders.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/util/base64.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/util/serializer.common.js","webpack://microsoft-authentication/./node_modules/uuid/dist/esm-node/rng.js","webpack://microsoft-authentication/./node_modules/uuid/dist/esm-node/regex.js","webpack://microsoft-authentication/./node_modules/uuid/dist/esm-node/stringify.js","webpack://microsoft-authentication/./node_modules/uuid/dist/esm-node/validate.js","webpack://microsoft-authentication/./node_modules/uuid/dist/esm-node/v4.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/util/utils.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/serializer.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/webResource.js","webpack://microsoft-authentication/./node_modules/@azure/abort-controller/dist-esm/src/AbortSignal.js","webpack://microsoft-authentication/./node_modules/@azure/abort-controller/dist-esm/src/AbortController.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/url.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/proxyAgent.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/util/sanitizer.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/util/inspect.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/restError.js","webpack://microsoft-authentication/./node_modules/@azure/logger/dist-esm/src/debug.js","webpack://microsoft-authentication/./node_modules/@azure/logger/dist-esm/src/log.js","webpack://microsoft-authentication/./node_modules/@azure/logger/dist-esm/src/index.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/log.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/httpPipelineLogLevel.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/nodeFetchHttpClient.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/operationOptions.js","webpack://microsoft-authentication/./node_modules/tslib/tslib.es6.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/requestPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/util/xml.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/deserializationPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/keepAlivePolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/redirectPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/util/exponentialBackoffStrategy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/util/constants.js","webpack://microsoft-authentication/./node_modules/@azure/core-util/dist-esm/src/delay.js","webpack://microsoft-authentication/./node_modules/@azure/core-util/dist-esm/src/typeGuards.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/exponentialRetryPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/logPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/operationParameter.js","webpack://microsoft-authentication/./node_modules/@azure/core-auth/dist-esm/src/tokenCredential.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/msRestUserAgentPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/userAgentPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/queryCollectionFormat.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/bearerTokenAuthenticationPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/disableResponseDecompressionPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/generateClientRequestIdPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/httpClientCache.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/ndJsonPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/proxyPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/rpRegistrationPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/signingPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/systemErrorRetryPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/util/throttlingRetryStrategy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/throttlingRetryPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-tracing/dist-esm/src/interfaces.js","webpack://microsoft-authentication/./node_modules/@azure/core-tracing/dist-esm/src/createSpan.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/policies/tracingPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-tracing/dist-esm/src/utils/traceParentHeader.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/serviceClient.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/operationSpec.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/createSpanLegacy.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/credentials/accessTokenCache.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/credentials/accessTokenRefresher.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/credentials/basicAuthenticationCredentials.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/credentials/apiKeyCredentials.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/dist-esm/src/credentials/topicCredentials.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/node_modules/form-data/lib/form_data.js","webpack://microsoft-authentication/./node_modules/@azure/core-http/node_modules/form-data/lib/populate.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK.Enums/LoggingEnums.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/Enums.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/ChannelController.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/TelemetryInitializerPlugin.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/BaseCore.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/NotificationManager.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/AppInsightsCore.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/AppInsightsCore.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/BaseCore.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/ESPromise.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/ESPromiseScheduler.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/ValueSanitizer.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK.Interfaces/IChannelControls.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/InternalConstants.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/Utils.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/DataModels.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/InternalConstants.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/EventBatch.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/ClockSkewManager.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/KillSwitch.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/RetryPolicy.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/Serializer.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/HttpManager.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/TimeoutOverrideWrapper.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/PostChannel.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK.Enums/EnumHelperFuncs.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK.Enums/EventsDiscardedReason.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/BaseTelemetryPlugin.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/CookieMgr.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/CoreUtils.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/DataCacheHelper.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/DbgExtensionUtils.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/DiagnosticLogger.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/EnvUtils.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/EventHelpers.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/HelperFuncs.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/InternalConstants.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/PerfManager.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/ProcessTelemetryContext.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/RandomHelper.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/TelemetryHelpers.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/UnloadHandlerContainer.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/W3cTraceParent.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-core-js/dist-esm/__DynamicConstants.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-shims/dist-esm/Constants.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-shims/dist-esm/Helpers.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-shims/dist-esm/TsLibShims.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-web-snippet/dist/esm/applicationinsights-web-snippet.js","webpack://microsoft-authentication/./node_modules/@microsoft/dynamicproto-js/lib/dist/esm/dynamicproto-js.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/platform/node/globalThis.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/version.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/internal/semver.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/internal/global-utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/diag/ComponentLogger.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/diag/types.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/api/diag.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/diag/internal/logLevelLogger.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/baggage/internal/baggage-impl.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/baggage/internal/symbol.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/baggage/utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/diag/consoleLogger.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/propagation/TextMapPropagator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/context/context.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/trace_flags.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/context/NoopContextManager.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/api/context.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/invalid-span-constants.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/NonRecordingSpan.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/context-utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/spancontext-utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/NoopTracer.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/SamplingResult.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/span_kind.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/status.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/ProxyTracer.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/ProxyTracerProvider.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/NoopTracerProvider.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/internal/tracestate-validators.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/internal/tracestate-impl.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/internal/utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/api/trace.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/propagation/NoopTextMapPropagator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/baggage/context-helpers.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/api/propagation.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/index.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/suppress-tracing.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/baggage/constants.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/baggage/utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/baggage/propagation/W3CBaggagePropagator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/common/anchored-clock.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/common/attributes.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/common/logging-error-handler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/common/global-error-handler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/sampling.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/browser/globalThis.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/environment.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/environment.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/globalThis.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/hex-to-base64.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/RandomIdGenerator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/performance.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/sdk-info.js","webpack://microsoft-authentication/external \"perf_hooks\"","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/version.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/timer-util.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/common/time.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/ExportResult.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/propagation/composite.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/internal/validators.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/TraceState.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/W3CTraceContextPropagator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/rpc-metadata.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/sampler/AlwaysOffSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/lodash.merge.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/sampler/AlwaysOnSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/sampler/ParentBasedSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/sampler/TraceIdRatioBasedSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/merge.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/url.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/wrap.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/promise.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/callback.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/Sampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/Span.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/enums.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/AlwaysOffSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/AlwaysOnSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/ParentBasedSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/TraceIdRatioBasedSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/config.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/export/BatchSpanProcessorBase.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/platform/node/export/BatchSpanProcessor.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/platform/node/RandomIdGenerator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/Tracer.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/utility.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/BasicTracerProvider.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/resources/build/esm/platform/node/OSDetector.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/resources/build/esm/platform/node/HostDetector.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/resources/build/esm/Resource.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/resources/build/esm/platform/node/default-service-name.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/resources/build/esm/detectors/BrowserDetector.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/resources/build/esm/detectors/EnvDetector.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/resources/build/esm/detectors/ProcessDetector.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/MultiSpanProcessor.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/export/NoopSpanProcessor.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/export/ConsoleSpanExporter.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/export/InMemorySpanExporter.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/export/SimpleSpanProcessor.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/semantic-conventions/build/esm/trace/SemanticAttributes.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/semantic-conventions/build/esm/resource/SemanticResourceAttributes.js","webpack://microsoft-authentication/./node_modules/@vscode/extension-telemetry/dist/node/common/1dsClientFactory.js","webpack://microsoft-authentication/./node_modules/@vscode/extension-telemetry/dist/node/common/baseTelemetryReporter.js","webpack://microsoft-authentication/./node_modules/@vscode/extension-telemetry/dist/node/common/baseTelemetrySender.js","webpack://microsoft-authentication/./node_modules/@vscode/extension-telemetry/dist/node/common/util.js","webpack://microsoft-authentication/./node_modules/@vscode/extension-telemetry/dist/node/node/telemetryReporter.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/AsyncHooksScopeManager.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/Console.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/Exceptions.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/HeartBeat.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/HttpRequests.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/NativePerformance.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/NetworkStatsbeat.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/Performance.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/PreAggregatedMetrics.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/RequestParser.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/Statsbeat.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/WebSnippet.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/Azure/EventHub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/SpanParser.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/azure-coretracing.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Constants.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Constants.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/DependencyDocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/DocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/EnvelopeQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/EventDocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/ExceptionDocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/MessageDocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/MetricQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/RequestDocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/index.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/AvailabilityTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/DependencyTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/EnvelopeTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/EventTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/ExceptionTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/MetricTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/NodeHttpDependencyTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/NodeHttpRequestTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/PageViewTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/RequestTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/Telemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TraceTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/index.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Metrics/AggregatedMetricCounters.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Metrics/AggregatedMetricDimensions.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/AuthorizationHandler.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/AzureVirtualMachine.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Channel.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Config.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/ConnectionStringParser.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Context.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/CorrelationIdManager.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/EnvelopeFactory.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/FileAccessControl.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/FileSystemHelper.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Functions.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/InternalAzureLogger.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/JsonConfig.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Logging.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/NodeClient.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/PrefixHelper.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/QuickPulseEnvelopeFactory.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/QuickPulseSender.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/QuickPulseStateManager.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/QuickPulseUtil.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/RequestResponseHeaders.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Sender.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/SnippetInjectionHelper.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/TelemetryClient.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Traceparent.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Tracestate.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Util.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/TelemetryProcessors/AzureRoleEnvironmentTelemetryInitializer.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/TelemetryProcessors/PerformanceMetricsTelemetryProcessor.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/TelemetryProcessors/PreAggregatedMetricsTelemetryProcessor.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/TelemetryProcessors/index.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/applicationinsights.js","webpack://microsoft-authentication/./node_modules/async-hook-jl/async-hook.js","webpack://microsoft-authentication/./node_modules/async-hook-jl/index.js","webpack://microsoft-authentication/./node_modules/async-hook-jl/patches/next-tick.js","webpack://microsoft-authentication/./node_modules/async-hook-jl/patches/promise.js","webpack://microsoft-authentication/./node_modules/async-hook-jl/patches/timers.js","webpack://microsoft-authentication/./node_modules/async-listener/es6-wrapped-promise.js","webpack://microsoft-authentication/./node_modules/async-listener/glue.js","webpack://microsoft-authentication/./node_modules/async-listener/index.js","webpack://microsoft-authentication/./node_modules/asynckit/index.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/abort.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/async.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/defer.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/iterate.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/state.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/terminator.js","webpack://microsoft-authentication/./node_modules/asynckit/parallel.js","webpack://microsoft-authentication/./node_modules/asynckit/serial.js","webpack://microsoft-authentication/./node_modules/asynckit/serialOrdered.js","webpack://microsoft-authentication/./node_modules/cls-hooked/context-legacy.js","webpack://microsoft-authentication/./node_modules/cls-hooked/context.js","webpack://microsoft-authentication/./node_modules/cls-hooked/index.js","webpack://microsoft-authentication/./node_modules/combined-stream/lib/combined_stream.js","webpack://microsoft-authentication/./node_modules/continuation-local-storage/context.js","webpack://microsoft-authentication/./node_modules/delayed-stream/lib/delayed_stream.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/azure-coretracing.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/console.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/index.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/tedious.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js","webpack://microsoft-authentication//home/runner/work/code-server/code-server/lib/vscode/extensions/microsoft-authentication/node_modules/diagnostic-channel-publishers/dist/src|sync|/^.*\\/lib\\/Connection$/","webpack://microsoft-authentication//home/runner/work/code-server/code-server/lib/vscode/extensions/microsoft-authentication/node_modules/diagnostic-channel-publishers/dist/src|sync|/^.*\\/lib\\/Pool$/","webpack://microsoft-authentication/./node_modules/diagnostic-channel/dist/src/channel.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/dist/src/patchRequire.js","webpack://microsoft-authentication/./node_modules/emitter-listener/listener.js","webpack://microsoft-authentication/./node_modules/mime-db/index.js","webpack://microsoft-authentication/./node_modules/mime-types/index.js","webpack://microsoft-authentication/./node_modules/node-fetch/lib/index.mjs","webpack://microsoft-authentication/./node_modules/psl/index.js","webpack://microsoft-authentication/./node_modules/punycode/punycode.es6.js","webpack://microsoft-authentication/./node_modules/querystringify/index.js","webpack://microsoft-authentication/./node_modules/requires-port/index.js","webpack://microsoft-authentication/./node_modules/sax/lib/sax.js","webpack://microsoft-authentication/./node_modules/semver/semver.js","webpack://microsoft-authentication/./node_modules/shimmer/index.js","webpack://microsoft-authentication/./node_modules/stack-chain/format.js","webpack://microsoft-authentication/./node_modules/stack-chain/index.js","webpack://microsoft-authentication/./node_modules/stack-chain/stack-chain.js","webpack://microsoft-authentication/./node_modules/tough-cookie/lib/cookie.js","webpack://microsoft-authentication/./node_modules/tough-cookie/lib/memstore.js","webpack://microsoft-authentication/./node_modules/tough-cookie/lib/pathMatch.js","webpack://microsoft-authentication/./node_modules/tough-cookie/lib/permuteDomain.js","webpack://microsoft-authentication/./node_modules/tough-cookie/lib/pubsuffix-psl.js","webpack://microsoft-authentication/./node_modules/tough-cookie/lib/store.js","webpack://microsoft-authentication/./node_modules/tough-cookie/lib/utilHelper.js","webpack://microsoft-authentication/./node_modules/tough-cookie/lib/validators.js","webpack://microsoft-authentication/./node_modules/tough-cookie/lib/version.js","webpack://microsoft-authentication/./node_modules/tr46/index.js","webpack://microsoft-authentication/./node_modules/tunnel/index.js","webpack://microsoft-authentication/./node_modules/tunnel/lib/tunnel.js","webpack://microsoft-authentication/./node_modules/universalify/index.js","webpack://microsoft-authentication/./node_modules/url-parse/index.js","webpack://microsoft-authentication/./node_modules/webidl-conversions/lib/index.js","webpack://microsoft-authentication/./node_modules/whatwg-url/lib/URL-impl.js","webpack://microsoft-authentication/./node_modules/whatwg-url/lib/URL.js","webpack://microsoft-authentication/./node_modules/whatwg-url/lib/public-api.js","webpack://microsoft-authentication/./node_modules/whatwg-url/lib/url-state-machine.js","webpack://microsoft-authentication/./node_modules/whatwg-url/lib/utils.js","webpack://microsoft-authentication/./node_modules/xml2js/lib/bom.js","webpack://microsoft-authentication/./node_modules/xml2js/lib/builder.js","webpack://microsoft-authentication/./node_modules/xml2js/lib/defaults.js","webpack://microsoft-authentication/./node_modules/xml2js/lib/parser.js","webpack://microsoft-authentication/./node_modules/xml2js/lib/processors.js","webpack://microsoft-authentication/./node_modules/xml2js/lib/xml2js.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/DocumentPosition.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/NodeType.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/Utility.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/WriterState.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLAttribute.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLCData.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLCharacterData.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLComment.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDOMConfiguration.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDOMErrorHandler.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDOMImplementation.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDOMStringList.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDTDAttList.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDTDElement.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDTDEntity.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDTDNotation.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDeclaration.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDocType.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDocument.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDocumentCB.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLDummy.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLElement.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLNamedNodeMap.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLNode.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLNodeList.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLProcessingInstruction.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLRaw.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLStreamWriter.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLStringWriter.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLStringifier.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLText.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/XMLWriterBase.js","webpack://microsoft-authentication/./node_modules/xmlbuilder/lib/index.js","webpack://microsoft-authentication/./src/AADHelper.ts","webpack://microsoft-authentication/./src/betterSecretStorage.ts","webpack://microsoft-authentication/./src/cryptoUtils.ts","webpack://microsoft-authentication/./src/logger.ts","webpack://microsoft-authentication/./src/node/authServer.ts","webpack://microsoft-authentication/./src/node/buffer.ts","webpack://microsoft-authentication/./src/node/crypto.ts","webpack://microsoft-authentication/./src/node/fetch.ts","webpack://microsoft-authentication/./src/utils.ts","webpack://microsoft-authentication/external \"@azure/opentelemetry-instrumentation-azure-sdk\"","webpack://microsoft-authentication/external \"@opentelemetry/instrumentation\"","webpack://microsoft-authentication/external \"applicationinsights-native-metrics\"","webpack://microsoft-authentication/external \"assert\"","webpack://microsoft-authentication/external \"async_hooks\"","webpack://microsoft-authentication/external \"child_process\"","webpack://microsoft-authentication/external \"console\"","webpack://microsoft-authentication/external \"constants\"","webpack://microsoft-authentication/external \"crypto\"","webpack://microsoft-authentication/external \"dns\"","webpack://microsoft-authentication/external \"events\"","webpack://microsoft-authentication/external \"fs\"","webpack://microsoft-authentication/external \"http\"","webpack://microsoft-authentication/external \"https\"","webpack://microsoft-authentication/external \"module\"","webpack://microsoft-authentication/external \"net\"","webpack://microsoft-authentication/external \"os\"","webpack://microsoft-authentication/external \"path\"","webpack://microsoft-authentication/external \"punycode\"","webpack://microsoft-authentication/external \"querystring\"","webpack://microsoft-authentication/external \"stream\"","webpack://microsoft-authentication/external \"string_decoder\"","webpack://microsoft-authentication/external \"timers\"","webpack://microsoft-authentication/external \"tls\"","webpack://microsoft-authentication/external \"url\"","webpack://microsoft-authentication/external \"util\"","webpack://microsoft-authentication/external \"vscode\"","webpack://microsoft-authentication/external \"zlib\"","webpack://microsoft-authentication/webpack/bootstrap","webpack://microsoft-authentication/webpack/runtime/compat get default export","webpack://microsoft-authentication/webpack/runtime/define property getters","webpack://microsoft-authentication/webpack/runtime/hasOwnProperty shorthand","webpack://microsoft-authentication/webpack/runtime/make namespace object","webpack://microsoft-authentication/./src/extension.ts"],"names":["getHeaderKey","headerName","toLowerCase","isHttpHeadersLike","object","castObject","rawHeaders","clone","get","set","contains","remove","headersArray","headerValues","headerNames","toJson","HttpHeaders","constructor","this","_headersMap","headerValue","name","value","toString","header","undefined","result","preserveCase","headers","headerKey","push","i","length","options","JSON","stringify","resultPreservingCasing","encodeByteArray","Buffer","from","buffer","decodeString","XML_ATTRKEY","XML_CHARKEY","rnds8Pool","Uint8Array","poolPtr","rng","slice","byteToHex","substr","arr","offset","uuid","TypeError","buf","rnds","random","validUuidRegex","isNode","process","version","versions","node","encodeUri","uri","encodeURIComponent","replace","stripResponse","response","strippedResponse","body","bodyAsText","status","stripRequest","request","strippedRequest","isValidUuid","test","generateUuid","executePromisesSequentially","promiseFactories","kickstart","Promise","resolve","forEach","promiseFactory","then","promiseToCallback","promise","Error","cb","data","catch","err","promiseToServiceCallback","nextTick","parsedBody","applyMixins","targetCtorParam","sourceCtors","castTargetCtorParam","sourceCtor","Object","getOwnPropertyNames","prototype","validateISODuration","isDuration","replaceAll","searchValue","replaceValue","split","join","getEnvironmentValue","env","Serializer","modelMappers","isXML","validateConstraints","mapper","objectName","failValidation","constraintName","constraintValue","constraints","valueAsNumber","ExclusiveMaximum","ExclusiveMinimum","InclusiveMaximum","InclusiveMinimum","MaxItems","MaxLength","MinItems","MinLength","MultipleOf","Pattern","UniqueItems","valueAsArray","pattern","RegExp","match","some","item","ar","indexOf","serialize","_a","_b","_c","updatedOptions","rootName","includeRoot","xmlCharKey","payload","mapperType","type","serializedName","isConstant","defaultValue","required","nullable","typeName","valueOf","objectType","ArrayBuffer","isView","Blob","serializeBasicTypes","allowedValues","serializeEnumType","Date","isNaN","parse","toISOString","substring","toUTCString","d","Math","floor","getTime","dateToUnixTime","serializeDateTypes","returnValue","serializeByteArrayType","str","ch","len","trimEnd","bufferToBase64Url","serializeBase64UrlType","serializer","isXml","Array","isArray","elementType","element","tempArray","serializedValue","xmlNamespace","xmlnsKey","xmlNamespacePrefix","assign","serializeSequenceType","Boolean","valueType","tempDictionary","key","keys","getXmlObjectValue","serializeDictionaryType","getPolymorphicDiscriminatorRecursively","getPolymorphicMapper","modelProps","resolveModelProperties","propertyMapper","readOnly","propName","parentObject","xmlIsWrapped","xmlName","xmlElementName","paths","splitSerializeName","pop","pathName","propertyObjectName","toSerialize","polymorphicDiscriminator","clientName","xmlIsAttribute","additionalPropertiesMapper","additionalProperties","className","modelMapper","resolveReferencedMapper","resolveAdditionalProperties","propNames","clientPropName","every","pn","serializeCompositeType","deserialize","responseBody","instance","handledPropertyNames","headerCollectionPrefix","dictionary","startsWith","xmlIsMsText","propertyName","wrapped","elementList","property","propertyInstance","res","arrayInstance","k","v","entries","hasOwnProperty","call","isAdditionalProperty","responsePropName","includes","isSpecialXmlProperty","deserializeCompositeType","castResponseBody","parseFloat","n","unixTimeToDate","base64UrlToByteArray","deserializeSequenceType","deserializeDictionaryType","prop","classes","partialclass","subwords","charAt","modelProperties","polymorphicPropertyName","discriminatorName","discriminatorValue","uberParent","indexDiscriminator","polymorphicMapper","discriminators","getPolymorphicDiscriminatorSafely","serializeObject","castToSerialize","array","MapperType","o","strEnum","WebResource","url","method","query","streamResponseBody","withCredentials","abortSignal","timeout","onUploadProgress","onDownloadProgress","proxySettings","keepAlive","decompressResponse","streamResponseStatusCodes","formData","requestId","validateRequestProperties","prepare","pathTemplate","validMethods","toUpperCase","pathParameters","baseUrl","endsWith","segments","pathParamName","pathParam","stringifiedPathParameters","skipUrlEncoding","queryParameters","queryParams","queryParamName","queryParam","disableClientRequestId","bodyIsStream","serializationMapper","mappers","disableJsonStringifyOnBody","spanOptions","tracingContext","operationSpec","shouldDeserialize","operationResponseGetter","listenersMap","WeakMap","abortedMap","AbortSignal","onabort","has","addEventListener","_type","listener","removeEventListener","listeners","index","splice","dispatchEvent","_event","signal","aborted","AbortError","message","super","AbortController","parentSignals","_signal","arguments","parentSignal","abort","ms","timer","setTimeout","unref","URLQuery","_rawQuery","any","parameterName","parameterValue","caseParameterValue","newValue","parameterStrings","parameterValueElement","text","currentState","currentCharacter","URLBuilder","setScheme","scheme","_scheme","getScheme","setHost","host","_host","getHost","setPort","port","_port","getPort","setPath","path","schemeIndex","schemeStart","lastIndexOf","_path","appendPath","currentPath","getPath","setQuery","_query","setQueryParameter","queryParameterName","queryParameterValue","getQueryParameterValue","getQuery","startState","tokenizer","URLTokenizer","next","token","current","tokenPath","URLToken","_text","state","_textLength","_currentState","_currentIndex","_currentToken","hasCurrentCharacter","readWhile","character","characterCode","charCodeAt","isAlphaNumericCharacter","readWhileLetterOrDigit","nextScheme","schemeOrHost","readUntilCharacter","getCurrentCharacter","peekCharacters","nextSchemeOrHost","nextCharacter","nextHost","nextPort","nextPath","readRemaining","nextQuery","step","charactersToPeek","endIndex","condition","terminatingCharacters","isUrlHttps","createTunnel","isRequestHttps","isProxyHttps","tunnelOptions","tunnel","httpsOverHttps","httpsOverHttp","httpOverHttps","httpOverHttp","RedactedString","defaultAllowedHeaderNames","defaultAllowedQueryParameters","Sanitizer","allowedHeaderNames","allowedQueryParameters","concat","Set","map","p","sanitize","obj","seen","sanitizeHeaders","sanitizeUrl","sanitizeQuery","input","add","sanitizeObject","allowedKeys","accessor","sanitized","urlBuilder","queryString","custom","inspect","errorSanitizer","RestError","code","statusCode","setPrototypeOf","REQUEST_SEND_ERROR","PARSE_ERROR","debugEnvVariable","DEBUG","enabledString","enabledNamespaces","skippedNamespaces","debuggers","enable","debugObj","namespace","createDebugger","enabled","disable","log","args","stderr","write","EOL","namespaces","wildcard","namespaceList","ns","trim","skipped","enabledNamespace","newDebugger","destroy","extend","registeredLoggers","logLevelFromEnv","AZURE_LOG_LEVEL","azureLogLevel","AzureLogger","debug","AZURE_LOG_LEVELS","isAzureLogLevel","level","logger","shouldEnable","setLogLevel","console","error","levelMap","verbose","info","warning","patchLogMethod","parent","child","createLogger","logLevel","clientRootLogger","createClientLogger","HttpPipelineLogLevel","getCachedAgent","isHttps","agentCache","httpsAgent","httpAgent","ReportTransform","Transform","progressCallback","loadedBytes","_transform","chunk","_encoding","callback","isReadableStream","pipe","isStreamComplete","stream","aborter","once","NodeFetchHttpClient","proxyAgentMap","Map","keepAliveAgents","cookieJar","looseMode","httpRequest","abortController","abortListener","event","requestForm","appendFormValue","append","formKey","formValue","j","contentType","getBoundary","uploadReportStream","end","platformSpecificRequestInit","prepareRequest","requestInit","redirect","operationResponse","fetch","httpHeaders","parseHeaders","streaming","readableStreamBody","downloadReportStream","parseInt","processRequest","fetchError","uploadStreamDone","downloadStreamDone","all","e","getOrCreateAgent","username","password","proxyAgents","agent","requestUrl","proxy","proxyAuth","createProxyAgent","agentOptions","init","cookieString","reject","getCookieString","cookie","compress","setCookieHeader","setCookie","ignoreError","operationOptionsToRequestOptionsBase","opts","requestOptions","tracingOptions","s","t","getOwnPropertySymbols","propertyIsEnumerable","__rest","create","BaseRequestPolicy","_nextPolicy","_options","shouldLog","RequestPolicyOptions","_logger","OFF","minimumLogLevel","xml2jsDefaultOptionsV2","explicitCharkey","normalize","normalizeTags","attrkey","explicitArray","ignoreAttrs","mergeAttrs","explicitRoot","validator","xmlns","explicitChildren","preserveChildrenOrder","childkey","charsAsChildren","includeWhiteChars","async","strict","attrNameProcessors","attrValueProcessors","tagNameProcessors","valueProcessors","xmldec","encoding","standalone","doctype","renderOpts","pretty","indent","newline","headless","chunkSize","emptyTag","cdata","xml2jsParserSettings","xml2jsBuilderSettings","stringifyXML","charkey","xml2js","Builder","buildObject","parseXML","xmlParser","Parser","parseString","deserializationPolicy","deserializationContentTypes","parsingOptions","nextPolicy","DeserializationPolicy","defaultJsonContentTypes","defaultXmlContentTypes","DefaultDeserializationOptions","expectedContentTypes","json","xml","requestPolicyOptions","jsonContentTypes","xmlContentTypes","sendRequest","deserializeResponseBody","errorHandler","msg","errCode","contentComponents","component","parsedResponse","shouldDeserializeResponse","responses","responseSpec","getOperationResponse","shouldReturnResponse","isSuccessByStatus","expectedStatusCodes","isOperationSpecEmpty","isError","errorResponseSpec","default","initialErrorMessage","defaultBodyMapper","bodyMapper","defaultHeadersMapper","headersMapper","parsedError","valueToDeserialize","Sequence","internalError","parsedHeaders","defaultError","handleErrorResponse","innerError","httpMethod","DefaultKeepAliveOptions","keepAlivePolicy","keepAliveOptions","KeepAlivePolicy","allowedRedirect","DefaultRedirectOptions","handleRedirects","maxRetries","redirectPolicy","maximumRetries","RedirectPolicy","handleRedirect","policy","currentRetries","locationHeader","builder","DEFAULT_CLIENT_RETRY_INTERVAL","DEFAULT_CLIENT_MAX_RETRY_INTERVAL","isNumber","shouldRetry","retryLimit","predicate","retryData","retryCount","updateRetryData","retryOptions","retryInterval","incrementDelta","pow","min","minRetryInterval","maxRetryInterval","coreHttpVersion","HTTP","HTTPS","HTTP_PROXY","HTTPS_PROXY","NO_PROXY","ALL_PROXY","HttpConstants","HttpVerbs","PUT","GET","DELETE","POST","MERGE","HEAD","PATCH","StatusCodes","TooManyRequests","ServiceUnavailable","HeaderConstants","AUTHORIZATION","AUTHORIZATION_SCHEME","RETRY_AFTER","USER_AGENT","delay","timeInMs","onAborted","rejectOnAbort","abortErrorMsg","removeListeners","clearTimeout","exponentialRetryPolicy","ExponentialRetryPolicy","RetryMode","DefaultRetryOptions","retryDelayInMs","maxRetryDelayInMs","retry","requestError","isAborted","responseParam","logPolicy","loggingOptions","LogPolicy","sanitizer","logRequest","logResponse","getPathStringFromParameter","parameter","getPathStringFromParameterPath","parameterPath","isTokenCredential","credential","castCredential","getToken","signRequest","getDefaultUserAgentKey","getDefaultUserAgentHeaderName","getDefaultUserAgentValue","runtimeInfo","platformSpecificData","telemetryInfo","keySeparator","valueSeparator","getUserAgentString","userAgentPolicy","userAgentData","UserAgentPolicy","addUserAgentHeader","QueryCollectionFormat","DEFAULT_CYCLER_OPTIONS","forcedRefreshWindowInMs","retryIntervalInMs","refreshWindowInMs","bearerTokenAuthenticationPolicy","scopes","tokenCyclerOptions","refreshWorker","cycler","isRefreshing","expiresOnTimestamp","now","refresh","getTokenOptions","getAccessToken","timeoutInMs","tryGetAccessToken","finalToken","beginRefresh","_token","reason","tokenOptions","mustRefresh","shouldRefresh","createTokenCycler","BearerTokenAuthenticationPolicy","webResource","disableResponseDecompressionPolicy","DisableResponseDecompressionPolicy","generateClientRequestIdPolicy","requestIdHeaderName","GenerateClientRequestIdPolicy","_requestIdHeaderName","cachedHttpClient","NdJsonPolicy","globalNoProxyList","noProxyListLoaded","globalBypassedMap","getDefaultProxySettings","proxyUrl","httpsProxy","allProxy","httpProxy","loadEnvironmentProxyValue","urlWithoutAuth","atIndex","authStart","auth","colonIndex","hasPassword","extractAuthFromUrl","parsedUrl","Number","proxyPolicy","noProxy","filter","loadNoProxy","ProxyPolicy","customNoProxyList","noProxyList","bypassedMap","isBypassedFlag","isBypassed","RPRegistrationPolicy","_retryTimeout","rpName","matchRes","checkRPNotRegisteredError","urlPrefix","extractSubscriptionUrl","provider","originalRequest","postUrl","getUrl","reqOptions","getRequestEssentials","getRegistrationStatus","registerRP","registrationStatus","registerIfNeeded","reuseUrlToo","registrationState","signingPolicy","authenticationProvider","SigningPolicy","nextRequest","systemErrorRetryPolicy","SystemErrorRetryPolicy","_response","nestedErr","throttlingRetryPolicy","ThrottlingRetryPolicy","_handleResponse","numberOfRetries","_defaultResponseHandler","httpResponse","retryAfterHeader","delayInMs","parseRetryAfterHeader","retryAfterInSeconds","parseDateRetryAfterHeader","diff","SpanKind","setSpan","context","span","SpanStatusCode","createSpanFunction","operationName","operationOptions","tracer","kind","INTERNAL","spanName","packagePrefix","azureTracingDisabledValue","AZURE_TRACING_DISABLED","isTracingDisabled","trace","INVALID_SPAN_CONTEXT","startSpan","setAttribute","newSpanOptions","isRecording","attributes","newTracingOptions","createSpan","tracingPolicy","TracingPolicy","userAgent","tryCreateSpan","tryProcessResponse","tryProcessError","CLIENT","namespaceFromContext","getValue","Symbol","for","setAttributes","spanContext","traceParentHeader","missingFields","traceId","spanId","hexFlags","traceFlags","getTraceParentHeader","isSpanContextValid","traceState","setStatus","ERROR","serviceRequestId","OK","ServiceClient","credentials","requestPolicyFactories","_withCredentials","_httpClient","httpClient","_requestPolicyOptions","httpPipelineLogger","authPolicyFactory","bearerTokenPolicyFactory","serviceClient","serviceClientOptions","createOptions","credentialScopes","baseUri","scope","URL","getCredentialScopes","wrappedPolicyFactory","factories","generateClientRequestIdHeader","clientRequestIdHeaderName","userAgentHeaderName","getValueOrFunctionResult","userAgentHeaderValue","retryTimeout","rpRegistrationPolicy","rpRegistrationRetryTimeout","noRetryPolicy","createDefaultRequestPolicyFactories","newRequestPolicyFactories","_requestPolicyFactories","isWebResourceLike","httpPipeline","operationArguments","serializerOptions","urlParameters","urlParameter","urlParameterValue","getOperationArgumentValueFromParameter","skipEncoding","queryParameter","collectionFormat","Multi","Ssv","Tsv","requestContentType","requestBody","headerParameters","headerParameter","customHeaders","customHeaderName","rawResponse","sendRequestError","_d","_e","_f","requestBodyParameterPathString","isStream","Stream","getXmlValueWithNamespace","elementName","xmlNamespaceKey","String","mediaType","formDataParameters","formDataParameter","formDataParameterValue","formDataParameterPropertyName","serializeRequestBody","getStreamResponseStatusCodes","details","flattenResponse","defaultValueCreator","createPipelineFromOptions","pipelineOptions","userAgentValue","sendStreamingJson","userAgentOptions","userAgentPrefix","userAgentInfo","defaultUserAgentInfo","redirectOptions","proxyOptions","deserializationOptions","getOperationArgumentValueFromParameterPath","parameterMapper","propertySearchResult","getPropertyFromParameterPath","propertyFound","useDefaultValue","propertyValue","parameterPathString","propertyPath","propertyPathString","parameterPathPart","addOperationResponse","defineProperty","blobBody","isPageableResponse","arrayResponse","ExpiringAccessTokenCache","tokenRefreshBufferMs","cachedToken","setCachedToken","accessToken","getCachedToken","AccessTokenRefresher","requiredMillisecondsBeforeNewRefresh","lastCalled","isReady","BasicAuthenticationCredentials","userName","authorizationScheme","DEFAULT_AUTHORIZATION_SCHEME","encodedCredentials","ApiKeyCredentials","inHeader","inQuery","TopicCredentials","topicKey","CombinedStream","util","http","https","parseUrl","fs","mime","asynckit","populate","FormData","option","_overheadLength","_valueLength","_valuesToMeasure","module","exports","inherits","LINE_BREAK","DEFAULT_CONTENT_TYPE","field","filename","bind","_error","_multiPartHeader","footer","_multiPartFooter","_trackLength","valueLength","knownLength","isBuffer","byteLength","readable","_lengthRetriever","Infinity","start","stat","fileSize","size","on","pause","resume","contentDisposition","_getContentDisposition","_getContentType","contents","filepath","basename","client","_httpMessage","lookup","_streams","_lastBoundary","getHeaders","userHeaders","formHeaders","setBoundary","boundary","_boundary","_generateBoundary","getBuffer","dataBuffer","alloc","getLengthSync","hasKnownLength","getLength","parallel","values","submit","params","defaults","pathname","hostname","protocol","setHeader","onResponse","responce","removeListener","emit","dst","src","LoggingSeverity","CRITICAL","WARNING","_InternalMessageId","ClientPerformanceMathError","ErrorPVCalc","MessageLimitPerPVExceeded","MissingRequiredFieldSpecification","NavigationTimingNotSupported","OnError","SenderNotInitialized","TelemetrySampledAndNotSent","InvalidBackendResponse","InvalidDurationValue","TelemetryEnvelopeInvalid","CreateEnvelopeError","CircularReferenceDetected","IllegalCharsInName","ItemNotInArray","MaxAjaxPerPVExceeded","MessageTruncated","NameTooLong","SampleRateOutOfRange","StringValueTooLong","StartCalledMoreThanOnce","StopCalledWithoutStart","TrackArgumentsNotSpecified","UrlTooLong","IdTooLong","InvalidEvent","SnippetScriptLoadFailure","InvalidContentBlob","ValueKind","NotSet","Pii_DistinguishedName","Pii_GenericData","Pii_IPV4Address","Pii_IPv6Address","Pii_MailSubject","Pii_PhoneNumber","Pii_QueryString","Pii_SipAddress","Pii_SmtpAddress","Pii_Identity","Pii_Uri","Pii_Fqdn","Pii_IPV4AddressLegacy","CustomerContent_GenericContent","EventLatency","Normal","CostDeferred","RealTime","Immediate","EventPropertyType","Unspecified","Int32","UInt32","Int64","UInt64","Double","Bool","Guid","DateTime","EventPersistence","Critical","TraceLevel","NONE","INFORMATION","_ExtendedInternalMessageId","AuthHandShakeError","AuthRedirectFail","BrowserCannotReadLocalStorage","BrowserCannotWriteLocalStorage","BrowserDoesNotSupportLocalStorage","CannotParseBiBlobValue","CannotParseDataAttribute","CVPluginNotAvailable","DroppedEvent","ErrorParsingAISessionCookie","ErrorProvidedChannels","FailedToGetCookies","FailedToInitializeCorrelationVector","FailedToInitializeSDK","InvalidCorrelationValue","SessionRenewalDateIsZero","SendPostOnCompleteFailure","PostResponseHandler","SDKNotInitialized","ChannelControllerPriority","_addChannelQueue","channelQueue","queue","core","sort","a","b","queueItem","chain","TelemetryInitializerPlugin","_super","_id","_initializers","_this","_initDefaults","identifier","priority","_self","_base","addTelemetryInitializer","telemetryInitializer","theInitializer","id","fn","initializer","idx","itemCtx","doNotSendItem","telemetryInitializersCount","exception","__ieDyn","BaseTelemetryPlugin","strValidationError","strSdkUnloadingError","defaultInitConfig","loggingLevelConsole","_createPerfManager","notificationMgr","PerfManager","_isPluginPresent","thePlugin","plugins","exists","plugin","BaseCore","_config","_isInitialized","_eventQueue","_notificationManager","_perfManager","_cfgPerfManager","_cookieManager","_pluginChain","_configExtensions","_coreExtensions","_channelControl","_channelConfig","_channelQueue","_isUnloading","_telemetryInitializerPlugin","_internalLogsEventName","_evtNamespace","_unloadHandlers","_debugListener","_traceCtx","_internalLogPoller","DiagnosticLogger","_createTelCtx","_getPluginChain","_initPluginChain","updateState","theExtensions","channelPriority","allExtensions","coreExtensions","extPriorities","ext","extPriority","_validateExtensions","channels","extensions","extensionQueue_1","createChannelQueues","_setQueue","_getTelCtx","_processChannelQueue","theChannels","processFn","onComplete","waiting","_runChainOnComplete","channelChain","chainCtx","isInitialized","initialize","config","pluginChain","processTelemetry","update","updateCtx","theUpdateState","iterate","teardown","unloadCtx","unloadState","theUnloadState","isAsync","getChannel","pluginIdentifier","flush","callBack","sendReason","cbTimeout","doneIterating","cbTimer","doCallback","handled_1","createChannelControllerPlugin","_updateHook","_doUpdate","_getPlugin","theExt","isEnabled","pluginState","removeCb","pluginsToRemove","_removePlugins","removed","thePlugins","removeComplete","unloadChain","newConfigExtensions","newChannelConfig","newQueue","channel","_flushInternalLogs","logMessage","iKey","time","baseType","baseData","track","_flushChannels","_logOrThrowError","notificationManager","enablePerfMgr","disableDbgExt","NotificationManager","cfgExtensions","apply","releaseQueue","getTransmissionControls","controls","telemetryItem","ver","events","_createDummyNotificationManager","getCookieMgr","setCookieMgr","cookieMgr","createPerfMgr","setPerfMgr","perfMgr","eventCnt","eventQueue","pollInternalLogs","eventName","interval","diagnosticLogInterval","clearInterval","setInterval","unload","unloadComplete","flushComplete","processUnloadCtx","_doUnload","run","addPlugin","replaceExisting","addCb","existingPlugin","_addPlugin","added","removedPlugins_1","evtNamespace","getTraceCtx","createNew","setTraceCtx","traceCtx","_runListeners","perfEvtsSendAll","perfEvent","AppInsightsCore","_notifyInvalidEvent","manager","_validateTelemetryItem","pluginVersionStringArr","_pluginVersionStringArr","endpointUrl","propertyStorageOverride","getProperty","setProperty","getWParam","document","enableWParam","pluginVersionString","logger_1","timings","trackStart","latency","itemExt","sdk","itemProperties","_isFunction","_createPromiseAllOnResolvedFunction","resolvedCallback","ESPromise","resolverFunc","_state","_settledValue","_queue","_processQueue","pending_1","_resolve","_reject","onResolved","onRejected","_enqueue","iterable","values_1","pending_2","lp","race","_loop_1","_schedulerId","_running","_waiting","_timedOut","_getTime","ESPromiseScheduler","diagLog","_promiseId","_scheduledName","_debugLog","global","_warnLog","_lastEvent","_eventCount","_removeQueuedEvent","eventId","scheduleEvent","startEventAction","uniqueId","uniqueEventId","eventDetails","waitForEvent","waitEvent","newScheduledEvent","evt","tm","isRunning","waitResolve","waitReject","runTime","prevId","_startWaitingEvent","_schId","_abortAndRemoveOldEvents","expired","_cleanup","completed","toQueue","to","_removeScheduledEvent","_waitForFinalResult","startResult","schEventResolve","schEventReject","_createScheduledEvent","startEvent","wTm","theResult","incomplete","waitingToStart","ValueSanitizer","fieldSanitizerProvider","_sanitizerMap","_sanitizers","_fieldSanitizers","_getFieldSanitizer","fieldLookup","handleField","canHandle","fieldHandler","handler","_handleProperty","mapValue","fieldType","stringifyObjects","_callFieldSanitizer","_convertToProperty","fieldProvider","theType","getSanitizer","propertyType","newValue_1","propValue","propKey","theValue","newPath","newProp","addSanitizer","newSanitizer","addFieldSanitizer","fieldSanitizer","subType","getFieldType","MinChannelPriorty","STR_EMPTY","STR_DEFAULT_ENDPOINT_URL","STR_VERSION","STR_PROPERTIES","Version","FullVersionString","strWithCredentials","_fieldTypeEventPropMap","uInt8ArraySupported","isDocumentObjectAvailable","isWindowObjectAvailable","isValueAssigned","getTenantId","apiKey","indexTenantId","isUint8ArrayAvailable","nav","ua","isSafariOrFirefox","isLatency","sanitizeProperty","propType","isArrayValid","isValueKind","getCommonSchemaMetaData","encodedTypeValue","isDataType","getFieldValueType","disableCookies","setEnabled","days","deleteCookie","del","getCookie","getCookieValue","decode","cookieValue","decodeURIComponent","createGuid","style","theGuid","obj2","obj3","obj4","obj5","extended","deep","objProto","theArgs","arrayValue","arrayIndex","setProcessTelemetryTimings","processTelemetryStart","objType","Utils","strUndefined","strObject","Undefined","arrForEach","arrIndexOf","arrMap","arrReduce","objKeys","isReactNative","isString","isBoolean","isFunction","isObject","strTrim","isBeaconsSupported","getISOString","useXDomainRequest","cookieAvailable","disallowsSameSiteNone","objDefineAccessors","addPageUnloadEventListener","addEventHandler","strEndsWith","objForEachKey","CoreUtils","_canUseCookies","isTypeof","isUndefined","isNullOrUndefined","isDate","objCreate","dateNow","isIE","newGuid","perfNow","newId","randomValue","random32","mwcRandomSeed","mwcRandom32","generateW3CId","isChromium","openXhr","urlString","disabled","isSync","_wrapSetXhrProp","xhr","XMLHttpRequest","open","RT_PROFILE","NRT_PROFILE","BE_PROFILE","STR_POST_METHOD","STR_DROPPED","STR_REQUEUE","STR_CONTENT_TYPE_HEADER","STR_CLIENT_VERSION","STR_CLIENT_ID","STR_TIME_DELTA_TO_APPLY","STR_UPLOAD_TIME","STR_API_KEY","STR_MSA_DEVICE_TICKET","STR_AUTH_XTOKEN","_getEventMsfpc","theEvent","intWeb","_getMsfpc","theEvents","msfpc","EventBatch","addEvents","_msfpc","Msfpc","count","addEvent","fromEvent","numEvents","cnt","ClockSkewManager","_allowRequestSending","_shouldAddClockSkewHeaders","_isFirstRequest","_clockSkewHeaderValue","_clockSkewSet","allowRequestSending","firstRequestSent","shouldAddClockSkewHeaders","getClockSkewHeaderValue","setClockSkew","timeDeltaInMillis","KillSwitch","_killedTokenDictionary","setKillSwitchTenants","killTokens","killDuration","killedTokens","durationMs","ex","isTenantKilled","tenantToken","killDictionary","retryPolicyGetMillisToBackoffForRetry","retriesSoFar","waitDuration","randomBackoff","BaseBackoff","MaxRecordSize","MaxBeaconRecordSize","rCheckDot","perfManager","valueSanitizer","enableCompoundKey","strBaseData","_checkForCompoundkey","_theSanitizer","_isReservedCache","_processPathKeys","srcObj","target","thePath","checkReserved","metadataPathKeys","metadataCallback","processSubKeys","srcValue","name_1","theMetaPathKeys","destObj","subKeys","keyLen","subKey","_isReservedField","createPayload","retryCnt","isTeardown","isReducedPayload","sendType","apiKeys","payloadBlob","overflow","sizeExceed","failedEvts","batches","isBeacon","appendPayload","theBatch","maxEventsPerBatch","canAddEvents","payloadEvents","eventsAdded","sizeExceeded","isBeaconPayload","requestMaxSize","recordMaxSize","joinCount","eventBlob","getEventBlob","blobLength","evts","max","eventData","serializedEvent","serializedExt","eventExt","serializedData","serializedBaseData","pathKeys","_addJSONPropertyMetaData","propKeys","metaData","f","metaTarget","newTarget","_noResponseQs","_eventActionMap","_collectorQsHeaders","_collectorHeaderToQs","_addCollectorHeaderQsMapping","qsName","allowQs","_getResponseText","responseText","_hasHeader","hasHeader","lowerHeader","_addRequestDetails","useHeaders","hdrs","useHdrs","_prependTransports","theTransports","newTransports","HttpManager","maxConnections","maxRequestRetriesBeforeBackoff","actions","timeoutOverride","_responseHandlers","_postManager","_sendInterfaces","_core","_cookieMgr","_xhrTimeout","_disableXhrSync","_disableFetchKeepAlive","_canHaveReducedPayload","_addNoResponse","_urlString","_killSwitch","_paused","_clockSkewManager","_useBeacons","_outstandingRequests","_customHttpInterface","_queryStringParameters","_headers","_batchQueue","_serializer","_enableEventTimings","_useHeaders","_sendCredentials","_getSenderInterface","transports","syncSupport","transportType","sendPostFunc","_xdrSendPost","_xhrSendPost","_fetchSendPost","_beaconSendPost","_transport","_isSync","sendPOST","oncomplete","sync","xdr","XDomainRequest","onload","_doOnComplete","_handleCollectorResponse","onerror","ontimeout","onprogress","send","theUrl","ignoreResponse","responseHandled","keepalive","_sendReason","headerMap","_appendHeader","theHeaders","getResponseHeader","xhrComplete","responseTxt","getAllResponseHeaders","headersString","headerEntry","_convertAllHeadersToMap","_getAllResponseHeaders","disableXhrSync","xhrRequest","setRequestHeader","thePayload","_thePayload","nav_1","sendBeacon","droppedBatches_1","_sendBatchesNotification","_isBeaconPayload","_adjustSendType","_hasIdleConnection","_clearQueue","theQueue","_canSendPayload","theBatches","_createDebugBatches","_sendBatches","orgBatches_1","isSynchronous_1","perfEvt","droppedBatches","serializationStart","sendInterface","sendTransport","shift","_doPayloadSend","isSynchronous","useSendBeacon","_setTimingValue","serializationCompleted","useSendHook_1","sendHook","sendInterface_1","useHeaders_1","requestDetails_1","requestDetails","apiQsKeys","wParam","_buildRequestDetails","sendEventStart_1","batchLp","evtLp","orgPayloadData","disableFetchKeepAlive","STR_CACHE_CONTROL","sender","httpStatusCode","isRetrying","backOffTrans","STR_TIME_DELTA_HEADER","STR_KILL_DURATION_HEADER","STR_KILL_TOKENS_HEADER","killToken","removedEvents","retryCount_1","_doAction","batchReason","_backOffTransmission","_clearBackOff","sendEventCompleted_1","sendEventCompleted","_addEventCompletedTimings","_addCompleteTimings","sendQueuedRequests","_handleRequestFinished","_retryRequestIfNeeded","sendListener","hookData_1","senderCalled_1","responseHandlers","webResult","sendSync","theAction_1","action","isSyncRequest_1","postChannel","httpInterface","channelConfig","avoidOptions","disableEventTimings","xhrTimeout","addNoResponse","syncHttpInterface","beaconHttpInterface","alwaysUseXhrOverride","fetchSyncHttpInterface","beaconUnloadTransports","location_1","unloadTransports","addQueryStringParameter","addHeader","canSendRequest","isCompletelyIdle","setUnloading","addBatch","sendSynchronousBatch","batch","defaultSetTimeout","_i","defaultClearTimeout","timeoutId","createTimeoutWrapper","argSetTimeout","argClearTimeout","clear","strEventsDiscarded","PostChannel","_xhrOverride","_httpManager","_autoFlushEventsLimit","_autoFlushBatchLimit","_delayedBatchReason","_timeoutWrapper","_isTeardownCalled","_flushCallbackQueue","_flushCallbackTimerId","_immediateQueueSize","_immediateQueueSizeLimit","_queueSize","_queueSizeLimit","_profiles","_currentProfile","_scheduledTimerId","_immediateTimerId","_currentBackoffCount","_timerCount","_batchQueues","_delayedBatchSendLatency","_optimizeObject","_isPageUnloadTriggered","_maxEventSendAttempts","_maxUnloadEventSendAttempts","_handleUnloadEvents","_releaseAllQueues","_handleShowEvents","_addEventToQueues","sendAttempt","evtLatency","queueSize","queueLimit","eventDropped","_addEventToProperQueue","dropLatency","dropNumber","currentLatency","eventBatch","_getEventBatch","droppedEvents","droppedCount","_notifyBatchEvents","EventsDiscardedReason","_resetQueueCounts","_dropEventWithLatencyOrLess","_notifyEvents","_sendEventsForLatencyAndAbove","queued","_queueBatches","_hasEvents","_scheduleTimer","immediateTimeOut","_createTimer","timeOut","requeue","_requeueEvents","_sendingEvent","sent","_eventsSentEvent","drop","_eventsDropped","rspFail","_eventsResponseFail","oth","_otherEvent","_initializeProfiles","iKeyMap","_setAutoLimits","theTimerFunc","timerMultiplier","_clearScheduledTimer","batchQueue","_performAutoFlush","doFlush","immediateQueue","normalQueue","eventsQueued","latencyToProcess","_flushImpl","_waitForIdleManager","maxSendAttempts","_callNotification","evtName","notifyFunc","extraArgs","isSyncRequest","disableAutoBatchFlushLimit","MaxNumberEventPerBatch","coreConfig","extendedCore","ctx","extensionConfig","getExtCfg","setTimeoutOverride","clearTimeoutOverride","disableOptimizeObj","existingGetWParamMethod","wparam","ignoreMc1Ms0CookieProcessing","_hookWParam","eventsLimitInMem","immediateEventLimit","autoFlushEventsLimit","httpXHROverride","anonCookieName","payloadPreprocessor","payloadListener","overrideEndpointUrl","getNotifyMgr","excludePageUnloadEvents","disablePageUnloadEvents","disablePageShowEvents","setInitialized","ev","disableTelemetry","processNext","_doTeardown","setEventQueueLimits","eventLimit","autoFlushLimit","addResponseHandler","responseHandler","_loadTransmitProfiles","profiles","profileName","profileValue","profLen","directValue","ceil","cleared","setMsaAuthTicket","ticket","hasEvents","_setTransmitProfile","createEnumStyle","enumClass","Unknown","NonRetryableStatus","SizeLimitExceeded","QueueFull","_isinitialized","_rootCtx","_nextPlugin","_unloadHandlerContainer","_hooks","currentCtx","rootCtx","_setDefaults","nextPlugin","unloadDone","theUnloadCtx","_unloadCallback","oldHooks","rm","updateDone","theUpdateCtx","_updateCallback","getCfg","_addHook","hooks","strToGMTString","strToUTCString","_supportsCookies","_allowUaSameSite","_parsedCookieValue","_doc","_cookieCache","_globalCookieConfig","_gblCookieMgr","inst","createCookieMgr","_isMgrEnabled","_isIgnoredCookie","cookieMgrCfg","ignoreCookies","safeGetCookieMgr","cookieCfg","rootConfig","cookieMgrConfig","cookieDomain","cookiePath","cookieEnabled","_createCookieMgrConfig","_domain","domain","_enabled","areCookiesSupported","gblManager","maxAgeSec","blockedCookies","_isBlockedCookie","_extractParts","_isIE","expireMs","expiry","setTime","_formatDate","uaDisallowsSameSiteNone","_setCookieValue","_formatCookieValue","_getCookieValue","purge","delCookie","parts","thePart","theDate","func","theCookie","_cookieMgrs","perf","tmp","hexValues","oct","clockSequenceHi","legacyCanUseCookies","mgr","EventHelper","Attach","AttachEvent","Detach","DetachEvent","_objDefineProperty","instanceName","_dataUid","_canAcceptData","createUniqueNamespace","includeVersion","createElmNodeData","accept","defValue","addDefault","theCache","enumerable","configurable","_createAccessor","_getCache","kill","listenerFuncs","_aiNamespace","_listenerProxyFunc","dbgExt","getDebugExt","getDebugListener","_sanitizeDiagnosticText","_logToConsole","theConsole","logFunc","_InternalLogMessage","msgId","isUserAct","properties","strProps","diagnosticText","dataType","safeGetLogger","_loggingLevelConsole","_loggingLevelTelemetry","_maxInternalMessageLimit","_enableDebugExceptions","_messageCount","_messageLogged","_logInternalMessage","severity","messageKey","_debugExtMsg","throttleLimitMessage","throttleMessage","loggingLevelTelemetry","maxMessageLimit","_setDefaultsFromConfig","consoleLoggingLevel","telemetryLoggingLevel","maxInternalMessageLimit","throwInternal","resetInternalMessageCount","_getLogger","_throwInternal","_warnToConsole","strWindow","strJSON","strMsie","strTrident","strXMLHttpRequest","_isTrident","_navUserAgentCheck","_enableMocks","_useXDomainRequest","_beaconsSupported","_hasProperty","theClass","supported","proto","setEnableEnvMocks","getGlobalInst","gbl","hasWindow","window","getWindow","hasDocument","getDocument","hasNavigator","navigator","getNavigator","hasHistory","history","getHistory","getLocation","checkForMock","mockLocation","location","getConsole","getPerformance","hasJSON","getJSON","getCrypto","getMsCrypto","product","getIEVersion","userAgentStr","navigator_1","doc","tridentVer","dumpObj","objectTypeDump","propertyValueDump","stack","isFetchSupported","withKeepAlive","isSupported","isXhrSupported","_getNamedValue","findMetaTag","querySelectorAll","content","findNamedServerTiming","navPerf","getEntriesByType","serverTiming","description","strEvents","strVisibilityChangeEvt","strPageHide","strPageShow","strUnload","strBeforeUnload","strPageHideNamespace","strPageShowNamespace","rRemoveEmptyNs","rRemoveTrailingEmptyNs","_guid","elmNodeData","eventNamespace","_normalizeNamespace","_getEvtNamespace","theNamespace_1","parsedEvent","exec","__getRegisteredEvents","eventCache","evtType","registeredEvents","_getRegisteredEvents","aiEvts","_doDetach","handlerRef","useCapture","_doUnregister","unRegFn","capture","mergeEvtNamespace","theNamespace","eventOn","_doAttach","registeredEvent","guid","eventOff","evtName_1","found_1","_unregisterEvents","regEvent","attachEvent","eventNameWithoutOn","detachEvent","w","removeEventHandler","_addEventListeners","excludeEvents","addEventListeners","removeEventListeners","removePageUnloadEventListener","addPageHideEventListener","newNamespaces","pageUnloadAdded","visibilityState","removePageHideEventListener","addPageShowEventListener","pageShowAdded","removePageShowEventListener","_objFreeze","_objSeal","_objKeys","StringProto","_strTrim","_strEndsWith","_strStartsWith","_dataToISOString","_isArray","_objToString","_fnToString","_objFunctionString","rCamelCase","rNormalizeInvalid","rLeadingNumeric","_objGetPrototypeOf","isNotNullOrUndefined","normalizeJsName","_all","letter","callbackfn","search","searchLen","valLen","pos","_strEndsWithPoly","strStartsWith","checkValue","chkLen","_strStartsWithPoly","strContains","isPlainObject","newProto","_getObjProto","date","getUTCFullYear","pad","num","r","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","toFixed","_toISOStringPoly","thisArg","searchElement","fromIndex","abs","results","initialValue","_objKeysHasDontEnumBug","_objKeysDontEnums","dontEnumsLength","getProp","setProp","descriptor","_doNothing","deepFreeze","objFreeze","objSeal","dt","getExceptionName","setValue","valChk","srcChk","getSetValue","getCfgValue","isNotTruthy","isTruthy","throwError","_createProxyFunction","source","funcName","srcFunc","originalArguments","proxyAssign","chkSet","proxyFunctionAs","theFunc","overwriteTarget","proxyFunctions","functionsToProxy","theFuncName","optimizeObject","theObject","objExtend","obj1","obj6","argLen","arg","isArgArray","isArgObj","propOk","isNewArray","STR_CHANNELS","STR_CORE","STR_CREATE_PERF_MGR","STR_DISABLED","STR_EXTENSION_CONFIG","STR_EXTENSIONS","STR_PROCESS_TELEMETRY","STR_PRIORITY","STR_EVENTS_SENT","STR_EVENTS_DISCARDED","STR_EVENTS_SEND_REQUEST","STR_PERF_EVENT","STR_ERROR_TO_CONSOLE","STR_WARN_TO_CONSOLE","STR_GET_PERF_MGR","PerfEvent","payloadDetails","theDetails_1","accessorDefined","childTime","childEvts","childEvt","exTime","ParentContextKey","ChildrenContextKey","fire","doPerfActiveKey","doPerf","mgrSource","getSource","currentActive","children","getGblPerfMgr","_chainId","_createInternalContext","telemetryChain","startAt","_nextProxy","_onComplete","createTelemetryProxyChain","_getNextProxyStart","_next","nextProxy","completeDetails","self","_getExtCfg","getConfig","extConfig","hasNext","getNext","setNext","that","mergeDefault","theConfig","newConfig_1","cfgValue","createProcessTelemetryContext","internalContext","createProcessTelemetryUnloadContext","createProcessTelemetryUpdateContext","firstProxy","lastProxy_1","newProxy","chainId","hasProcessTelemetry","hasSetNext","proxyChain","getPlugin","_processChain","hasRun","pluginCore","_setNext","processPluginFn","hasRunContext","nextId","hasNextRun","createTelemetryPluginProxy","ProcessTelemetryContext","UInt32Mask","MaxUInt32","_mwcSeeded","_mwcW","_mwcZ","_mwcSeed","seedValue","_autoSeedMwc","maxValue","signed","c","getRandomValues","Uint32Array","maxLength","number","chars","pluginStateData","_getPluginState","initializePlugins","processContext","initPlugins","lastPlugin","sortPlugins","extA","extB","bHasProcess","createDistributedTraceContext","parentCtx","getName","setName","getTraceId","setTraceId","getSpanId","setSpanId","getTraceFlags","setTraceFlags","newTraceFlags","createUnloadHandlerContainer","handlers","TRACE_PARENT_REGEX","DEFAULT_VERSION","INVALID_VERSION","INVALID_TRACE_ID","INVALID_SPAN_ID","_isValid","invalidValue","_formatValue","_formatFlags","createTraceParent","flags","isValidTraceId","isValidSpanId","parseTraceParent","isValidTraceParent","isSampledFlag","formatTraceParent","findW3cTraceParent","traceParent","_DYN_INITIALIZE","_DYN_NAME","_DYN_GET_NOTIFY_MGR","_DYN_IDENTIFIER","_DYN_PUSH","_DYN_IS_INITIALIZED","_DYN_CONFIG","_DYN_INSTRUMENTATION_KEY","_DYN_LOGGER","_DYN_LENGTH","_DYN_TIME","_DYN_PROCESS_NEXT","_DYN_GET_PROCESS_TEL_CONT0","_DYN_ADD_NOTIFICATION_LIS1","_DYN_REMOVE_NOTIFICATION_2","_DYN_STOP_POLLING_INTERNA3","_DYN_ON_COMPLETE","_DYN_GET_PLUGIN","_DYN_FLUSH","_DYN__EXTENSIONS","_DYN_SPLICE","_DYN_TEARDOWN","_DYN_MESSAGE_ID","_DYN_MESSAGE","_DYN_IS_ASYNC","_DYN__DO_TEARDOWN","_DYN_UPDATE","_DYN_GET_NEXT","_DYN_DIAG_LOG","_DYN_SET_NEXT_PLUGIN","_DYN_CREATE_NEW","_DYN_COOKIE_CFG","_DYN_INDEX_OF","_DYN_SUBSTRING","_DYN_USER_AGENT","_DYN_SPLIT","_DYN_SET_ENABLED","_DYN_SUBSTR","_DYN_NODE_TYPE","_DYN_APPLY","_DYN_REPLACE","_DYN_ENABLE_DEBUG_EXCEPTI4","_DYN_LOG_INTERNAL_MESSAGE","_DYN_TO_LOWER_CASE","_DYN_CALL","_DYN_TYPE","_DYN_HANDLER","_DYN_LISTENERS","_DYN_IS_CHILD_EVT","_DYN_GET_CTX","_DYN_SET_CTX","_DYN_COMPLETE","_DYN_TRACE_ID","_DYN_SPAN_ID","_DYN_TRACE_FLAGS","_DYN_VERSION","strShimFunction","strShimObject","strShimUndefined","strShimPrototype","strShimHasOwnProperty","ObjClass","ObjProto","ObjAssign","ObjCreate","ObjDefineProperty","ObjHasOwnProperty","_cachedGlobal","getGlobal","useCached","globalThis","throwTypeError","objCreateFn","tmpFunc","__assignFn","extendStaticsFn","__proto__","__extendsFn","__","__spreadArrayFn","il","webSnippet","UNDEFINED","Prototype","strFunction","DynClassName","UnknownValue","Obj","_objGetOwnProps","_gbl","_gblInst","_hasOwnProperty","_isObjectOrArrayPrototype","_isObjectArrayOrFunctionPrototype","Function","curProto","_forEachProp","props","_isDynamicCandidate","skipOwn","_throwTypeError","_hasVisited","_getInstFunc","currentDynProtoProxy","instFunc","instFuncTable","canAddInst","visited","protoFunc","_getProtoFunc","_getObjName","unknownValue","dynamicProto","delegateFunc","classProto","thisTarget","thisProto","_checkPrototype","perfOptions","useBaseInst","instFuncs","_getInstanceFuncs","_instFuncProxy","funcHost","baseFuncs","baseProto","_getBaseFuncs","setInstanceFunc","baseInstFuncs","instFuncs_1","dynProtoProxy","_createDynamicPrototype","_populatePrototype","_globalThis","VERSION","re","isCompatible","ownVersion","acceptedVersions","rejectedVersions","myVersionMatch","ownVersionParsed","globalVersion","_accept","globalVersionMatch","globalVersionParsed","_makeCompatibilityCheck","major","GLOBAL_OPENTELEMETRY_API_KEY","_global","registerGlobal","diag","allowOverride","api","unregisterGlobal","DiagLogLevel","DiagComponentLogger","_namespace","logProxy","warn","unshift","DiagAPI","_logProxy","setLogger","INFO","oldLogger","newLogger","maxLevel","_filterFunc","theLevel","ALL","WARN","VERBOSE","createLogLevelDiagLogger","createComponentLogger","_instance","BaggageImpl","_entries","getEntry","entry","getAllEntries","setEntry","newBaggage","removeEntry","delete","removeEntries","keys_1","baggageEntryMetadataSymbol","createBaggage","baggageEntryMetadataFromString","__TYPE__","consoleMap","DiagConsoleLogger","_consoleFunc","defaultTextMapGetter","carrier","defaultTextMapSetter","createContextKey","TraceFlags","ROOT_CONTEXT","BaseContext","parentContext","_currentContext","deleteValue","__spreadArray","NoopContextManager","active","with","_context","NOOP_CONTEXT_MANAGER","ContextAPI","getInstance","setGlobalContextManager","contextManager","_getContextManager","INVALID_SPANID","INVALID_TRACEID","NonRecordingSpan","_spanContext","_key","_value","_attributes","_name","_status","updateName","_endTime","recordException","_exception","_time","SPAN_KEY","getSpan","getActiveSpan","deleteSpan","setSpanContext","getSpanContext","VALID_TRACEID_REGEX","VALID_SPANID_REGEX","wrapSpanContext","SamplingDecision","NoopTracer","root","parentFromContext","startActiveSpan","arg2","arg3","arg4","contextWithSpanSet","NOOP_TRACER","ProxyTracer","_provider","_getTracer","_fn","Reflect","_delegate","getDelegateTracer","NOOP_TRACER_PROVIDER","NoopTracerProvider","getTracer","_version","ProxyTracerProvider","getDelegate","setDelegate","delegate","VALID_KEY_REGEX","VALID_VALUE_BASE_REGEX","INVALID_VALUE_COMMA_EQUAL_REGEX","TraceStateImpl","rawTraceState","_internalState","_parse","_clone","unset","_keys","reduce","agg","reverse","part","listMember","validateKey","validateValue","createTraceState","TraceAPI","_proxyTracerProvider","setGlobalTracerProvider","success","getTracerProvider","NoopTextMapPropagator","inject","_carrier","extract","fields","BAGGAGE_KEY","getBaggage","setBaggage","baggage","deleteBaggage","NOOP_TEXT_MAP_PROPAGATOR","PropagationAPI","setGlobalPropagator","propagator","setter","_getGlobalPropagator","getter","propagation","SUPPRESS_TRACING_KEY","suppressTracing","unsuppressTracing","isTracingSuppressed","BAGGAGE_ITEMS_SEPARATOR","BAGGAGE_HEADER","serializeKeyPairs","keyPairs","hValue","getKeyPairs","m","iterator","done","__read","metadata","parsePairKeyValue","valueProps","keyPairPart","keyPair","parseKeyPairsIntoRecord","W3CBaggagePropagator","pair","baggageString","baggageEntry","AnchoredClock","systemClock","monotonicClock","_monotonicClock","_epochMillis","_performanceMillis","delta","__values","sanitizeAttributes","e_1","out","val","isAttributeKey","isAttributeValue","e_1_1","return","e_2","arr_1","arr_1_1","isValidPrimitiveAttributeValue","e_2_1","isHomogeneousAttributeValueArray","loggingErrorHandler","getPrototypeOf","flattenException","stringifyException","delegateHandler","setGlobalErrorHandler","globalErrorHandler","TracesSamplerValues","ENVIRONMENT_NUMBERS_KEYS","isEnvVarANumber","ENVIRONMENT_LISTS_KEYS","isEnvVarAList","DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT","DEFAULT_ATTRIBUTE_COUNT_LIMIT","DEFAULT_ENVIRONMENT","CONTAINER_NAME","ECS_CONTAINER_METADATA_URI_V4","ECS_CONTAINER_METADATA_URI","HOSTNAME","KUBERNETES_SERVICE_HOST","NAMESPACE","OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_EXPORTER_JAEGER_AGENT_HOST","OTEL_EXPORTER_JAEGER_AGENT_PORT","OTEL_EXPORTER_JAEGER_ENDPOINT","OTEL_EXPORTER_JAEGER_PASSWORD","OTEL_EXPORTER_JAEGER_USER","OTEL_EXPORTER_OTLP_ENDPOINT","OTEL_EXPORTER_OTLP_TRACES_ENDPOINT","OTEL_EXPORTER_OTLP_METRICS_ENDPOINT","OTEL_EXPORTER_OTLP_HEADERS","OTEL_EXPORTER_OTLP_TRACES_HEADERS","OTEL_EXPORTER_OTLP_METRICS_HEADERS","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_ZIPKIN_ENDPOINT","OTEL_LOG_LEVEL","OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_RESOURCE_ATTRIBUTES","OTEL_SERVICE_NAME","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_TRACES_EXPORTER","OTEL_TRACES_SAMPLER","ParentBasedAlwaysOn","OTEL_TRACES_SAMPLER_ARG","OTEL_EXPORTER_OTLP_INSECURE","OTEL_EXPORTER_OTLP_TRACES_INSECURE","OTEL_EXPORTER_OTLP_METRICS_INSECURE","OTEL_EXPORTER_OTLP_CERTIFICATE","OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE","OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE","OTEL_EXPORTER_OTLP_COMPRESSION","OTEL_EXPORTER_OTLP_TRACES_COMPRESSION","OTEL_EXPORTER_OTLP_METRICS_COMPRESSION","OTEL_EXPORTER_OTLP_CLIENT_KEY","OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY","OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY","OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE","OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE","OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE","parseNumber","environment","parseStringList","output","separator","givenValue","logLevelMap","setLogLevelFromEnv","parseEnvironment","getEnvWithoutDefaults","getEnv","processEnv","intValue","charCode","buf8","buf16","hexToBase64","hexStr","hi","lo","writeUInt8","RandomIdGenerator","generateTraceId","getIdGenerator","generateSpanId","SHARED_BUFFER","allocUnsafe","bytes","writeUInt32BE","otperformance","require","performance","SDK_INFO","SemanticResourceAttributes","TelemetrySdkLanguageValues","unrefTimer","ExportResultCode","SECOND_TO_NANOSECONDS","numberToHrtime","epochMillis","epochSeconds","seconds","trunc","getTimeOrigin","timeOrigin","timing","fetchStart","hrTime","performanceNow","nanos","timeInputToHrTime","isTimeInputHrTime","hrTimeDuration","startTime","endTime","hrTimeToTimeStamp","repeat","nanoString","hrTimeToNanoseconds","hrTimeToMilliseconds","round","hrTimeToMicroseconds","isTimeInput","CompositePropagator","_propagators","propagators","_fields","x","y","TraceState","TRACE_PARENT_HEADER","TRACE_STATE_HEADER","RPCType","W3CTraceContextPropagator","isRemote","traceStateHeader","RPC_METADATA_KEY","setRPCMetadata","meta","deleteRPCMetadata","getRPCMetadata","transform","AlwaysOffSampler","shouldSample","decision","AlwaysOnSampler","ParentBasedSampler","_root","_remoteParentSampled","remoteParentSampled","_remoteParentNotSampled","remoteParentNotSampled","_localParentSampled","localParentSampled","_localParentNotSampled","localParentNotSampled","spanKind","links","TraceIdRatioBasedSampler","_ratio","_normalize","_upperBound","_accumulate","ratio","accumulation","funcToString","objectCtorString","getPrototype","objectProto","symToStringTag","toStringTag","nativeObjectToString","isObjectLike","isOwn","tag","unmasked","getRawTag","objectToString","baseGetTag","Ctor","merge","objects","mergeTwoObjects","takeValue","one","two","isPrimitive","shouldMerge","twoValue","wasObjectReferenced","arr1","arr2","urlMatches","urlToMatch","isUrlIgnored","ignoredUrls","ignoredUrls_1","ignoredUrls_1_1","isWrapped","__original","__unwrap","__wrapped","Deferred","_promise","pack","l","BindOnceFuture","_callback","_that","_isCalled","_deferred","Span","parentTracer","parentSpanId","clock","_ended","_duration","_clock","resource","instrumentationLibrary","_spanLimits","getSpanLimits","_spanProcessor","getActiveSpanProcessor","onStart","_attributeValueLengthLimit","attributeValueLengthLimit","_isSpanEnded","attributeCountLimit","_truncateToSize","attributesOrStartTime","eventCountLimit","onEnd","SemanticAttributes","_truncateToLimitUtil","limit","NOT_RECORD","RECORD_AND_SAMPLED","FALLBACK_OTEL_TRACES_SAMPLER","loadDefaultConfig","sampler","buildSamplerFromEnv","forceFlushTimeoutMillis","generalLimits","spanLimits","linkCountLimit","getSamplerProbabilityFromEnv","probability","extendStatics","BatchSpanProcessorBase","_exporter","_finishedSpans","_maxExportBatchSize","maxExportBatchSize","_maxQueueSize","maxQueueSize","_scheduledDelayMillis","scheduledDelayMillis","_exportTimeoutMillis","exportTimeoutMillis","_shutdownOnce","_shutdown","forceFlush","isCalled","_flushAll","_span","_parentContext","_addToBuffer","shutdown","onShutdown","_maybeStartTimer","promises","_flushOneBatch","_clearTimer","export","_timer","__extends","BatchSpanProcessor","Tracer","_tracerProvider","userConfig","perInstanceDefaults","DEFAULT_CONFIG","localConfig","_sampler","_generalLimits","_idGenerator","idGenerator","parentSpan","nonRecordingSpan","parentSpanContext","link","samplingResult","initAttributes","getGeneralLimits","ForceFlushState","HostDetector","detect","_arguments","generator","g","_","label","trys","ops","verb","op","_normalizeArch","arch","P","fulfilled","rejected","nodeArchString","OSDetector","_normalizeType","platform","release","nodePlatform","Resource","empty","EMPTY","argv0","other","__assign","BrowserDetector","browserResource","_getResourceAttributes","EnvDetector","_MAX_LENGTH","_COMMA_SEPARATOR","_LABEL_KEY_VALUE_SPLITTER","_ERROR_MESSAGE_INVALID_CHARS","_ERROR_MESSAGE_INVALID_VALUE","rawAttributes","serviceName","parsedAttributes","_parseResourceAttributes","rawEnvAttributes","rawAttributes_1","rawAttributes_1_1","keyValuePair","_isValidAndNotEmpty","_isPrintableString","ProcessDetector","processResource","pid","title","argv","MultiSpanProcessor","_spanProcessors","spanProcessor","e_3","e_3_1","e_4","e_4_1","NoopSpanProcessor","BasicTracerProvider","_registeredSpanProcessors","_tracers","mergedConfig","_g","_h","_j","_k","_l","_m","parsedEnvConfig","reconfigureLimits","defaultExporter","_buildExporterFromEnv","batchProcessor","activeSpanProcessor","schemaUrl","addSpanProcessor","register","_buildPropagatorFromEnv","timeoutInterval","resolved","errors","_getPropagator","_getSpanExporter","uniquePropagatorNames","validPropagators","list","exporterName","exporter","_registeredPropagators","_registeredExporters","ConsoleSpanExporter","spans","resultCallback","_sendSpans","_exportInfo","parentId","timestamp","duration","spans_1","spans_1_1","dir","depth","InMemorySpanExporter","_stopped","reset","getFinishedSpans","SimpleSpanProcessor","AWS_LAMBDA_INVOKED_ARN","DB_SYSTEM","DB_CONNECTION_STRING","DB_USER","DB_JDBC_DRIVER_CLASSNAME","DB_NAME","DB_STATEMENT","DB_OPERATION","DB_MSSQL_INSTANCE_NAME","DB_CASSANDRA_KEYSPACE","DB_CASSANDRA_PAGE_SIZE","DB_CASSANDRA_CONSISTENCY_LEVEL","DB_CASSANDRA_TABLE","DB_CASSANDRA_IDEMPOTENCE","DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT","DB_CASSANDRA_COORDINATOR_ID","DB_CASSANDRA_COORDINATOR_DC","DB_HBASE_NAMESPACE","DB_REDIS_DATABASE_INDEX","DB_MONGODB_COLLECTION","DB_SQL_TABLE","EXCEPTION_TYPE","EXCEPTION_MESSAGE","EXCEPTION_STACKTRACE","EXCEPTION_ESCAPED","FAAS_TRIGGER","FAAS_EXECUTION","FAAS_DOCUMENT_COLLECTION","FAAS_DOCUMENT_OPERATION","FAAS_DOCUMENT_TIME","FAAS_DOCUMENT_NAME","FAAS_TIME","FAAS_CRON","FAAS_COLDSTART","FAAS_INVOKED_NAME","FAAS_INVOKED_PROVIDER","FAAS_INVOKED_REGION","NET_TRANSPORT","NET_PEER_IP","NET_PEER_PORT","NET_PEER_NAME","NET_HOST_IP","NET_HOST_PORT","NET_HOST_NAME","NET_HOST_CONNECTION_TYPE","NET_HOST_CONNECTION_SUBTYPE","NET_HOST_CARRIER_NAME","NET_HOST_CARRIER_MCC","NET_HOST_CARRIER_MNC","NET_HOST_CARRIER_ICC","PEER_SERVICE","ENDUSER_ID","ENDUSER_ROLE","ENDUSER_SCOPE","THREAD_ID","THREAD_NAME","CODE_FUNCTION","CODE_NAMESPACE","CODE_FILEPATH","CODE_LINENO","HTTP_METHOD","HTTP_URL","HTTP_TARGET","HTTP_HOST","HTTP_SCHEME","HTTP_STATUS_CODE","HTTP_FLAVOR","HTTP_USER_AGENT","HTTP_REQUEST_CONTENT_LENGTH","HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED","HTTP_RESPONSE_CONTENT_LENGTH","HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED","HTTP_SERVER_NAME","HTTP_ROUTE","HTTP_CLIENT_IP","AWS_DYNAMODB_TABLE_NAMES","AWS_DYNAMODB_CONSUMED_CAPACITY","AWS_DYNAMODB_ITEM_COLLECTION_METRICS","AWS_DYNAMODB_PROVISIONED_READ_CAPACITY","AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY","AWS_DYNAMODB_CONSISTENT_READ","AWS_DYNAMODB_PROJECTION","AWS_DYNAMODB_LIMIT","AWS_DYNAMODB_ATTRIBUTES_TO_GET","AWS_DYNAMODB_INDEX_NAME","AWS_DYNAMODB_SELECT","AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES","AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES","AWS_DYNAMODB_EXCLUSIVE_START_TABLE","AWS_DYNAMODB_TABLE_COUNT","AWS_DYNAMODB_SCAN_FORWARD","AWS_DYNAMODB_SEGMENT","AWS_DYNAMODB_TOTAL_SEGMENTS","AWS_DYNAMODB_COUNT","AWS_DYNAMODB_SCANNED_COUNT","AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS","AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES","MESSAGING_SYSTEM","MESSAGING_DESTINATION","MESSAGING_DESTINATION_KIND","MESSAGING_TEMP_DESTINATION","MESSAGING_PROTOCOL","MESSAGING_PROTOCOL_VERSION","MESSAGING_URL","MESSAGING_MESSAGE_ID","MESSAGING_CONVERSATION_ID","MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES","MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES","MESSAGING_OPERATION","MESSAGING_CONSUMER_ID","MESSAGING_RABBITMQ_ROUTING_KEY","MESSAGING_KAFKA_MESSAGE_KEY","MESSAGING_KAFKA_CONSUMER_GROUP","MESSAGING_KAFKA_CLIENT_ID","MESSAGING_KAFKA_PARTITION","MESSAGING_KAFKA_TOMBSTONE","RPC_SYSTEM","RPC_SERVICE","RPC_METHOD","RPC_GRPC_STATUS_CODE","RPC_JSONRPC_VERSION","RPC_JSONRPC_REQUEST_ID","RPC_JSONRPC_ERROR_CODE","RPC_JSONRPC_ERROR_MESSAGE","MESSAGE_TYPE","MESSAGE_ID","MESSAGE_COMPRESSED_SIZE","MESSAGE_UNCOMPRESSED_SIZE","DbSystemValues","OTHER_SQL","MSSQL","MYSQL","ORACLE","DB2","POSTGRESQL","REDSHIFT","HIVE","CLOUDSCAPE","HSQLDB","PROGRESS","MAXDB","HANADB","INGRES","FIRSTSQL","EDB","CACHE","ADABAS","FIREBIRD","DERBY","FILEMAKER","INFORMIX","INSTANTDB","INTERBASE","MARIADB","NETEZZA","PERVASIVE","POINTBASE","SQLITE","SYBASE","TERADATA","VERTICA","H2","COLDFUSION","CASSANDRA","HBASE","MONGODB","REDIS","COUCHBASE","COUCHDB","COSMOSDB","DYNAMODB","NEO4J","GEODE","ELASTICSEARCH","MEMCACHED","COCKROACHDB","DbCassandraConsistencyLevelValues","EACH_QUORUM","QUORUM","LOCAL_QUORUM","ONE","TWO","THREE","LOCAL_ONE","ANY","SERIAL","LOCAL_SERIAL","FaasTriggerValues","DATASOURCE","PUBSUB","TIMER","OTHER","FaasDocumentOperationValues","INSERT","EDIT","FaasInvokedProviderValues","ALIBABA_CLOUD","AWS","AZURE","GCP","NetTransportValues","IP_TCP","IP_UDP","IP","UNIX","PIPE","INPROC","NetHostConnectionTypeValues","WIFI","WIRED","CELL","UNAVAILABLE","UNKNOWN","NetHostConnectionSubtypeValues","GPRS","EDGE","UMTS","CDMA","EVDO_0","EVDO_A","CDMA2000_1XRTT","HSDPA","HSUPA","HSPA","IDEN","EVDO_B","LTE","EHRPD","HSPAP","GSM","TD_SCDMA","IWLAN","NR","NRNSA","LTE_CA","HttpFlavorValues","HTTP_1_0","HTTP_1_1","HTTP_2_0","SPDY","QUIC","MessagingDestinationKindValues","QUEUE","TOPIC","MessagingOperationValues","RECEIVE","PROCESS","RpcGrpcStatusCodeValues","CANCELLED","INVALID_ARGUMENT","DEADLINE_EXCEEDED","NOT_FOUND","ALREADY_EXISTS","PERMISSION_DENIED","RESOURCE_EXHAUSTED","FAILED_PRECONDITION","ABORTED","OUT_OF_RANGE","UNIMPLEMENTED","DATA_LOSS","UNAUTHENTICATED","MessageTypeValues","SENT","RECEIVED","CLOUD_PROVIDER","CLOUD_ACCOUNT_ID","CLOUD_REGION","CLOUD_AVAILABILITY_ZONE","CLOUD_PLATFORM","AWS_ECS_CONTAINER_ARN","AWS_ECS_CLUSTER_ARN","AWS_ECS_LAUNCHTYPE","AWS_ECS_TASK_ARN","AWS_ECS_TASK_FAMILY","AWS_ECS_TASK_REVISION","AWS_EKS_CLUSTER_ARN","AWS_LOG_GROUP_NAMES","AWS_LOG_GROUP_ARNS","AWS_LOG_STREAM_NAMES","AWS_LOG_STREAM_ARNS","CONTAINER_ID","CONTAINER_RUNTIME","CONTAINER_IMAGE_NAME","CONTAINER_IMAGE_TAG","DEPLOYMENT_ENVIRONMENT","DEVICE_ID","DEVICE_MODEL_IDENTIFIER","DEVICE_MODEL_NAME","FAAS_NAME","FAAS_ID","FAAS_VERSION","FAAS_INSTANCE","FAAS_MAX_MEMORY","HOST_ID","HOST_NAME","HOST_TYPE","HOST_ARCH","HOST_IMAGE_NAME","HOST_IMAGE_ID","HOST_IMAGE_VERSION","K8S_CLUSTER_NAME","K8S_NODE_NAME","K8S_NODE_UID","K8S_NAMESPACE_NAME","K8S_POD_UID","K8S_POD_NAME","K8S_CONTAINER_NAME","K8S_REPLICASET_UID","K8S_REPLICASET_NAME","K8S_DEPLOYMENT_UID","K8S_DEPLOYMENT_NAME","K8S_STATEFULSET_UID","K8S_STATEFULSET_NAME","K8S_DAEMONSET_UID","K8S_DAEMONSET_NAME","K8S_JOB_UID","K8S_JOB_NAME","K8S_CRONJOB_UID","K8S_CRONJOB_NAME","OS_TYPE","OS_DESCRIPTION","OS_NAME","OS_VERSION","PROCESS_PID","PROCESS_EXECUTABLE_NAME","PROCESS_EXECUTABLE_PATH","PROCESS_COMMAND","PROCESS_COMMAND_LINE","PROCESS_COMMAND_ARGS","PROCESS_OWNER","PROCESS_RUNTIME_NAME","PROCESS_RUNTIME_VERSION","PROCESS_RUNTIME_DESCRIPTION","SERVICE_NAME","SERVICE_NAMESPACE","SERVICE_INSTANCE_ID","SERVICE_VERSION","TELEMETRY_SDK_NAME","TELEMETRY_SDK_LANGUAGE","TELEMETRY_SDK_VERSION","TELEMETRY_AUTO_VERSION","WEBENGINE_NAME","WEBENGINE_VERSION","WEBENGINE_DESCRIPTION","CloudProviderValues","CloudPlatformValues","ALIBABA_CLOUD_ECS","ALIBABA_CLOUD_FC","AWS_EC2","AWS_ECS","AWS_EKS","AWS_LAMBDA","AWS_ELASTIC_BEANSTALK","AZURE_VM","AZURE_CONTAINER_INSTANCES","AZURE_AKS","AZURE_FUNCTIONS","AZURE_APP_SERVICE","GCP_COMPUTE_ENGINE","GCP_CLOUD_RUN","GCP_KUBERNETES_ENGINE","GCP_CLOUD_FUNCTIONS","GCP_APP_ENGINE","AwsEcsLaunchtypeValues","EC2","FARGATE","HostArchValues","AMD64","ARM32","ARM64","IA64","PPC32","PPC64","X86","OsTypeValues","WINDOWS","LINUX","DARWIN","FREEBSD","NETBSD","OPENBSD","DRAGONFLYBSD","HPUX","AIX","SOLARIS","Z_OS","CPP","DOTNET","ERLANG","GO","JAVA","NODEJS","PHP","PYTHON","RUBY","WEBJS","__createBinding","k2","desc","getOwnPropertyDescriptor","__esModule","writable","__setModuleDefault","__importStar","mod","oneDataSystemClientFactory","vscodeAPI","xhrOverride","appInsightsCore","oneDs","postPlugin","collectorChannelPlugin","instrumentationKey","disableCookiesUsage","disableInstrumentationKeyValidation","internalTesting","workspace","getConfiguration","envelope","getAICore","logEvent","measurements","BaseTelemetryReporter","telemetrySender","initializationOptions","userOptIn","errorOptIn","disposables","telemetryLogger","createTelemetryLogger","updateUserOptIn","onDidChangeEnableStates","isErrorsEnabled","isUsageEnabled","instantiateSender","internalSendTelemetryEvent","dangerous","sendEventData","logUsage","sendTelemetryEvent","sendDangerousTelemetryEvent","internalSendTelemetryErrorEvent","logError","sendTelemetryErrorEvent","sendDangerousTelemetryErrorEvent","internalSendTelemetryException","sendErrorData","sendTelemetryException","sendDangerousTelemetryException","dispose","InstantiationStatus","BaseTelemetrySender","clientFactory","_instantiationStatus","NOT_INSTANTIATED","_exceptionQueue","_clientFactory","_telemetryClient","INSTANTIATED","_flushQueues","INSTANTIATING","TelemetryUtil","replacementOptions","replacementString","osShim","architecture","os","vscode","baseTelemetryReporter_1","baseTelemetrySender_1","util_1","_1dsClientFactory_1","TelemetryReporter","appInsightsClient","appInsights","defaultClient","TelemetryClient","setUseDiskRetryCaching","setup","setAutoCollectRequests","setAutoCollectPerformance","setAutoCollectExceptions","setAutoCollectDependencies","setAutoDependencyCorrelation","setAutoCollectConsole","setAutoCollectHeartbeat","tags","userId","machineId","sessionId","cloudRole","appName","cloudRoleInstance","addTelemetryProcessor","applyReplacements","addReplacementOptions","trackEvent","appInsightsClientFactory","shouldUseOneDataSystemSDK","req","responseData","additionalCommonProperties","getAdditionalCommonProperties","AsyncScopeManager","OpenTelemetryScopeManagerWrapper","CorrelationContextManager_1","events_1","CorrelationContextManager","getCurrentContext","_activeSymbol","correlationContext","_spanToContext","runWithContext","wrapCallback","EventEmitter","wrapEmitter","aiContext","operation","spanToContextObject","DiagChannel","AutoCollectConsole","INSTANCE","_client","collectConsoleLog","IsInitialized","_methodNames","Logging","Traceparent","Tracestate","HttpRequestParser","Util","session","CONTEXT_NAME","generateContextObject","operationId","correlationContextHeader","traceparent","tracestate","customProperties","CustomPropertiesImpl","traceContext","traceFlag","formatOpenTelemetryTraceFlags","DEFAULT_TRACE_FLAG","emitter","bindEmitter","forceClsHooked","isNodeVersionCompatible","hasEverEnabled","cls","shouldUseClsHooked","createNamespace","registerContextPreservation","startOperation","parser","getOperationName","getCorrelationContextHeader","nodeVer","canUseClsHooked","greater800","less820","greater470","addHeaderData","keyvals","keyval","serializeToHeader","bannedCharacters","AutoCollectExceptions","_canUseUncaughtExceptionMonitor","_exceptionListenerHandle","handle","reThrow","_FALLBACK_ERROR_MESSAGE","exceptionTelemetry","contextObjects","trackException","isAppCrashing","exit","UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME","UNCAUGHT_EXCEPTION_HANDLER_NAME","_rejectionListenerHandle","UNHANDLED_REJECTION_HANDLER_NAME","_RETHROW_EXIT_MESSAGE","Vm","Constants","Context","HeartBeat","_collectionInterval","_isEnabled","_handle","trackHeartBeat","sdkVersion","WEBSITE_SITE_NAME","WEBSITE_HOME_STAMPNAME","WEBSITE_HOSTNAME","FUNCTIONS_WORKER_RUNTIME","_isVM","AzureVirtualMachine","getAzureComputeMetadata","vmInfo","isVM","subscriptionId","osType","trackMetric","HeartBeatMetricName","__spreadArrays","jl","RequestResponseHeaders","HttpDependencyParser","CorrelationIdManager","AutoCollectHttpDependencies","_initialize","originalHttpsRequest","clientRequestPatch","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","userAgentHeader","trackRequest","w3cEnabled","generateRequestId","getRootId","requestArgs","telemetry","uniqueRequestId","uniqueTraceparent","requestParser","currentContext","updateSpanId","getBackCompatRequestId","requestNumber","canIncludeCorrelationHeader","getHeader","correlationId","correlationHeader","requestContextHeader","safeIncludeCorrelationHeader","requestIdHeader","ignoreLegacyHeaders","parentIdHeader","rootIdHeader","traceparentHeader","isProcessed","dependencyTelemetry","getDependencyTelemetry","trackDependency","onError","Contracts","RequestParser","_getUrlFromRequestOptions","_setStatus","getCorrelationContextTarget","requestContextTargetKey","baseTelemetry","dependencyId","dependencyName","remoteDependencyType","RemoteDependencyDataConstants","TYPE_HTTP","remoteDependencyTarget","urlObject","hash","TYPE_AI","correlationIdPrefix","_isSuccess","resultCode","dependencyTypeName","parsed","format","originalOptions_1","parsedQuery","_getAbsoluteUrl","socketRemoteAddress","socket","remoteAddress","connection","connectionRemoteAddress","legacySocketRemoteAddress","ellapsedMilliseconds","getRequestTelemetry","requestTelemetry","sourceCorrelationId","getRequestTags","newTags","locationIp","_getIp","_getId","userAuthUserId","operationParentId","getOperationParentId","getOperationId","getRequestId","getTraceparent","getTracestate","getLegacyRootId","legacyRootId","encrypted","ipMatch","check","ip","parseId","setBackCompatFromThisTraceContext","requestContextSourceKey","tracestateHeader","legacy_parentId","legacy_rootId","cookieParts","ContextTagKeys","AutoCollectPerformance","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","_registerRequest","onRequest","HANDLER_READY","wrapOnRequestHandler","wrapServerEventHandler","server","originalAddListener","addListener","eventType","eventHandler","originalHttpServer","createServer","param1","param2","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","headersSent","tagOverrides","AutoCollectNativePerformance","_disabledMetrics","disabledMetrics","collectionInterval","_metricsAvailable","NativeMetricsEmitters","_emitter","_trackNativeMetrics","parseEnabled","collectExtendedMetrics","customConfig","disableAll","disableAllExtendedMetrics","individualOptOuts","extendedMetricDisablers","optOutsArr","optOutsArr_1","shouldSendAll","_trackGarbageCollection","_trackEventLoop","_trackHeapUsage","gc","gcData","getGCData","metrics","stdDev","sqrt","sumSquares","total","internalSdkVersion","loop","getLoopData","loopUsage","heap","memoryUsage","heapUsed","heapTotal","rss","NetworkStatsbeat","endpoint","totalRequestCount","totalSuccesfulRequestCount","totalFailedRequestCount","exceptionCount","throttleCount","intervalRequestExecutionTime","lastIntervalRequestExecutionTime","lastTime","lastRequestCount","enableLiveMetricsCounters","_lastIntervalRequestExecutionTime","_lastIntervalDependencyExecutionTime","_lastRequests","_lastDependencies","totalDependencyCount","totalFailedDependencyCount","_lastExceptions","totalExceptionCount","_enableLiveMetricsCounters","_lastCpus","cpus","_totalRequestCount","_totalFailedRequestCount","_totalDependencyCount","_totalFailedDependencyCount","_totalExceptionCount","cpuUsage","_lastAppCpuUsage","_lastHrtime","hrtime","trackPerformance","countRequest","_intervalRequestExecutionTime","countException","countDependency","_intervalDependencyExecutionTime","_trackCpu","_trackMemory","_trackNetwork","_trackDependencyRate","_trackExceptionRate","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","appCpuPercent","appCpuUsage","totalApp","system","combinedTotal","PerformanceCounter","PROCESSOR_TIME","PROCESS_TIME","freeMem","freemem","usedMem","committedMemory","totalmem","PRIVATE_BYTES","AVAILABLE_BYTES","QuickPulseCounter","COMMITTED_BYTES","lastRequests","requests","intervalRequests","intervalFailedRequests","elapsedMs","elapsedSeconds","averageRequestExecutionTime","requestsPerSec","failedRequestsPerSec","REQUEST_RATE","REQUEST_DURATION","REQUEST_FAILURE_RATE","lastDependencies","dependencies","intervalDependencies","intervalFailedDependencies","averageDependencyExecutionTime","dependenciesPerSec","failedDependenciesPerSec","DEPENDENCY_RATE","DEPENDENCY_FAILURE_RATE","DEPENDENCY_DURATION","lastExceptions","exceptions","intervalExceptions","exceptionsPerSec","EXCEPTION_RATE","AggregatedMetricCounters_1","AggregatedMetricDimensions_1","AutoCollectPreAggregatedMetrics","_dependencyCountersCollection","_requestCountersCollection","_exceptionCountersCollection","_traceCountersCollection","trackPreAggregatedMetrics","dimensions","_getAggregatedCounter","totalCount","countTrace","counter","intervalExecutionTime","_trackRequestMetrics","_trackDependencyMetrics","_trackExceptionMetrics","_trackTraceMetrics","counterCollection","notMatch","dim","newCounter","AggregatedMetricCounter","currentCounter","lastTotalCount","lastIntervalExecutionTime","_trackPreAggregatedMetric","aggregationInterval","metricType","MetricId","REQUESTS_DURATION","DEPENDENCIES_DURATION","EXCEPTIONS_COUNT","intervalTraces","TRACES_COUNT","metric","metricProperties","PreaggregatedMetricPropertyNames","__awaiter","__generator","EnvelopeFactory","Sender","Config","Network","Statsbeat","_attach","StatsbeatAttach","_feature","StatsbeatFeature","_instrumentation","StatsbeatInstrumentation","_statbeatMetrics","_networkStatsbeatCollection","statsbeatConnectionString","_getConnectionString","_statsbeatConfig","samplingPercentage","_sender","_shutdownStatsbeat","_getCustomProperties","trackShortIntervalStatsbeats","STATS_COLLECTION_SHORT_INTERVAL","_longHandle","trackLongIntervalStatsbeats","STATS_COLLECTION_LONG_INTERVAL","setCodelessAttach","codeless","addFeature","feature","removeFeature","addInstrumentation","instrumentation","removeInstrumentation","_getNetworkStatsbeatCounter","currentStatusCounter","find","statusCounter","exceptionType","currentErrorCounter","exceptionCounter","countThrottle","countRetry","networkProperties","error_1","_getResourceProvider","_os","_resourceProvider","_cikey","_runtimeVersion","_language","_sdkVersion","_trackRequestDuration","_trackRequestsCount","_sendStatsbeats","TAG","commonProperties","attachProperties","instrumentationProperties","featureProperties","error_2","_resourceIdentifier","StatsbeatCounter","ATTACH","StatsbeatFeatureType","Instrumentation","FEATURE","Feature","shortHost","_getShortHost","originalHost","this_1","REQUEST_SUCCESS","REQUEST_FAILURE","RETRY_COUNT","THROTTLE_COUNT","EXCEPTION_COUNT","envelopes","statsbeat","createEnvelope","TelemetryType","Metric","StatsbeatTelemetryName","StatsbeatResourceProvider","unknown","appsvc","functions","vm","currentEndpoint","euEndpoints","EU_CONNECTION_STRING","NON_EU_CONNECTION_STRING","zlib","snippetInjectionHelper","prefixHelper","ConnectionStringParser","applicationinsights_web_snippet_1","WebSnippet","_isIkeyValid","_aiUrl","WEB_INSTRUMENTATION_DEFAULT_SOURCE","_aiDeprecatedUrl","WEB_INSTRUMENTATION_DEPRECATED_SOURCE","clientWebIkey","_getWebSnippetIkey","webInstrumentationConnectionString","_webInstrumentationIkey","_clientWebInstrumentationConfig","webInstrumentationConfig","_clientWebInstrumentationSrc","webInstrumentationSrc","_statsbeat","getStatsbeat","_snippet","_getWebInstrumentationReplacedStr","WEB_SNIPPET","connectionString","iKeyCode","instrumentationkey","isIkeyValid","configStr","_getClientWebInstrumentationConfigStr","osStr","getOsPrefix","rpStr","getResourceProvider","snippetReplacedStr","replacedSnippet","requestListener","originalRequestListener","originalResponseWrite","isGetRequest","getContentEncodingFromHeaders","writeBufferType","ValidateInjection","InjectWebSnippet","encodeType","originalResponseEnd","endBufferType","httpsRequestListener","originalHttpsRequestListener","isGetHttpsRequest","originalHttpsResponseWrite","originalHttpsResponseEnd","isContentTypeHeaderHtml","inputStr","bufferEncodeType","removeHeader","_getInjectedCompressBuffer","html","newHtml","insertSnippetByIndex","bufferType","isBufferType","encodedString","contentEncodingMethod","GZIP","gunzipBuffer","gunzipSync","injectedGunzipBuffer","gzipSync","DEFLATE","inflateBuffer","inflateSync","injectedInflateBuffer","deflateSync","BR","BrotliDecompressSync","getBrotliDecompressSync","BrotliCompressSync","getBrotliCompressSync","decompressBuffer","parseEventHubSpan","api_1","core_1","semantic_conventions_1","Constants_1","AzNamespace","peerAddress","messageBusDestination","MessageBusDestination","PRODUCER","DependencyTypeName","QueueMessage","CONSUMER","TIME_SINCE_ENQUEUED","countEnqueueDiffs","sumEnqueueDiffs","startTimeMs","enqueuedTime","ENQUEUED_TIME","getTimeSinceEnqueued","spanToTelemetryContract","url_1","EventHub_1","httpUrl","httpScheme","httpTarget","httpHost","netPeerPort","netPeerName","netPeerIp","getDependencyTarget","peerService","remoteDependency","InProc","dbSystem","rpcSystem","Http","isSqlDB","dbStatement","dbOperation","dbName","Grpc","grpcStatusCode","createDependencyData","SERVER","requestData","httpRoute","createRequestData","operation_Id","createPropertiesFromSpan","MicrosoftEventHub","diagnostic_channel_1","SpanParser","AsyncHooksScopeManager_1","clients","span_1","telemetry_1","subscribe","trueFilter","AZURE_CORE_TRACING","unsubscribe","Contracts_1","bunyanToAILevelMap","SeverityLevel","Verbose","Information","Warning","subscriber","bunyanError","AIlevel","trackTrace","BUNYAN","CONSOLE","JsonConfig_1","JsonConfig","noDiagnosticChannel","publishers","unpatchedModules","noPatchModules","modules","bunyan","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","azuresdk","addContextPreservation","commandName","startedData","databaseName","succeeded","queryObj","sqlString","sql","connectionConfig","_connection","socketPath","q","preparable","plan","conn","database","POSTGRES","commandObj","command","address","winstonToAILevelMap","syslog","og","emerg","alert","crit","notice","npm","silly","levelKind","WINSTON","StatsbeatNetworkCategory","TelemetryTypeStringToQuickPulseDocumentType","TelemetryTypeStringToQuickPulseType","QuickPulseType","QuickPulseDocumentType","PerformanceToQuickPulseCounter","DEFAULT_LIVEMETRICS_HOST","DEFAULT_LIVEMETRICS_ENDPOINT","DEFAULT_BREEZE_ENDPOINT","APPLICATION_INSIGHTS_SDK_VERSION","Event","Exception","Trace","Request","Dependency","Availability","PageView","EventData","ExceptionData","MessageData","MetricData","RequestData","RemoteDependencyData","AvailabilityData","PageViewData","Sql","domainSupportsProperties","Generated_1","applicationVersion","deviceId","deviceLocale","deviceModel","deviceOEMName","deviceOSVersion","deviceType","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","internalAgentVersion","internalNodeName","Data","DataPointType","Measurement","sampleRate","hasFullStack","parsedStack","Base","DataPoint","Domain","Envelope","ExceptionDetails","StackFrame","__exportStar","TelemetryTypeString","baseTypeToTelemetryType","telemetryTypeToBaseType","cloudRoleName","operationSynthetic","requestSuccess","requestResultCode","dependencyType","dependencyTarget","dependencySuccess","dependencyResultCode","traceSeverityLevel","azureCore","AuthorizationHandler","_azureTokenPolicy","addAuthorizationHeader","authHeaderName","makeRequest","AIMS_URI","virtualMachineData_1","_requestTimedOut","HTTP_TIMEOUT","Channel","isDisabled","getBatchSize","getBatchIntervalMs","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","resendInterval","maxBytesOnDisk","setDiskRetryMode","triggerSend","_timeoutHandle","isNodeCrashing","bufferIsEmpty","isNodeExit","saveOnCrash","setupString","_endpointBase","_mergeConfig","connectionStringEnv","_connectionString","csCode","csEnv","instrumentationKeyEnv","_instrumentationKey","ingestionendpoint","maxBatchSize","maxBatchIntervalMs","disableAppInsights","correlationIdRetryIntervalMs","enableWebInstrumentation","enableAutoWebSnippetInjection","correlationHeaderExcludedDomains","_setCorrelationId","profileQueryEndpoint","ENV_profileQueryEndpoint","quickPulseHost","liveendpoint","ENV_quickPulseHost","_webInstrumentationConnectionString","webSnippetConnectionString","_profileQueryEndpoint","cancelCorrelationIdQuery","queryCorrelationId","_validateInstrumentationKey","jsonConfig","disableStatsbeat","distributedTracingMode","enableAutoCollectConsole","enableAutoCollectDependencies","enableAutoCollectExceptions","enableAutoCollectExtendedMetrics","enableAutoCollectExternalLoggers","enableAutoCollectHeartbeat","enableAutoCollectPerformance","enableAutoCollectPreAggregatedMetrics","enableAutoCollectRequests","enableAutoDependencyCorrelation","enableInternalDebugLogging","enableInternalWarningLogging","enableResendInterval","enableMaxBytesOnDisk","enableSendLiveMetrics","enableUseAsyncHooks","enableUseDiskRetryCaching","proxyHttpUrl","proxyHttpsUrl","ENV_azurePrefix","ENV_iKey","legacy_ENV_iKey","_FIELDS_SEPARATOR","kv","kvParts","_FIELD_KEY_VALUE_SEPARATOR","endpointsuffix","locationPrefix","packageJsonPath","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","__dirname","appVersion","packageJson","readFileSync","DefaultRoleName","appIdUrlString","completedLookups","pendingLookups","fetchAppId","disableAppInsightsAutoCollection","appId_1","setEncoding","setImmediate","suffix","currentRootId","appendSuffix","generateRootId","startIndex","w3cTraceId","delimiter","requestIdMaxLength","trimPosition","randomu32","telemetryType","createTraceData","createEventData","createExceptionData","createMetricData","createAvailabilityData","createPageViewData","validateStringMap","getTags","severityLevel","msToTimeSpan","exceptionDetails","parseStack","responseCode","Aggregation","availabilityData","runLocation","pageViewData","frames","totalSizeInBytes","frame","_StackFrame","regex","parsedFrame","sizeInBytes","left","right","acceptedLeft","acceptedRight","howMany","assembly","matches","fileName","line","baseSize","FileAccessControl","child_process","checkFileProtection","OS_PROVIDES_FILE_PROTECTION","OS_FILE_PROTECTION_CHECKED","USE_ICACLS","existsSync","ICACLS_PATH","applyACLRules","directory","identity","ex_1","ACLED_DIRECTORIES","_getACLIdentity","_runICACLS","_getACLArguments","applyACLRulesSync","_runICACLSSync","_getACLIdentitySync","aclProc","spawn","windowsHide","spawnSync","ACL_IDENTITY","psProc","POWERSHELL_PATH","stdio","stdout","systemdrive","getShallowFileSize","getShallowDirectorySizeSync","getShallowDirectorySize","confirmDirExists","unlinkAsync","readdirAsync","readFileAsync","writeFileAsync","appendFileAsync","accessAsync","mkdirAsync","lstatAsync","statAsync","promisify","lstat","mkdir","access","appendFile","writeFile","readFile","readdir","unlink","err_1","mkdirErr_1","isDirectory","files","totalSize","files_1","file","fileStats","isFile","readdirSync","statSync","filePath","FileSystemHelper","InternalAzureLogger","_cleanupTimeOut","_logToFile","logDestination","APPLICATIONINSIGHTS_LOG_DESTINATION","maxSizeBytes","maxHistory","_logFileName","logFilePath","APPLICATIONINSIGHTS_LOGDIR","isAbsolute","_tempDir","cwd","tmpdir","_fileFullPath","_backUpNameFormat","_fileCleanupTimer","_fileCleanupTask","optionalParams","_storeToDisk","appendError_1","err_3","constants","F_OK","_createBackupFile","backupPath","err_4","totalFiles","pathToDelete","err_5","aCreationDate","bCreationDate","ENV_instrumentationKey","noHttpAgentKeepAlive","_loadJsonFile","rootPath","tempDir","configFile","enableDebug","disableWarnings","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","isFunctionApp","isWebApp","isLinux","isWindows","StreamId","QuickPulseEnvelopeFactory","createQuickPulseEnvelope","documents","machineName","roleName","Documents","InstrumentationKey","Metrics","InvariantVersion","Timestamp","MachineName","Instance","RoleName","createQuickPulseMetric","Name","Value","Weight","telemetryEnvelopeToQuickPulseDocument","createQuickPulseEventDocument","createQuickPulseExceptionDocument","createQuickPulseTraceDocument","createQuickPulseDependencyDocument","createQuickPulseRequestDocument","createQuickPulseDocument","Message","exceptionMessage","ExceptionMessage","ExceptionType","Success","Duration","ResponseCode","OperationName","Target","ResultCode","CommandName","OperationId","documentType","__type","DocumentType","Properties","aggregateProperties","meas","QuickPulseUtil","QuickPulseConfig","QuickPulseSender","getAuthorizationHandler","_consecutiveErrors","_getAuthorizationHandler","ping","redirectedHostEndpoint","pingHeaders","_submitData","post","postOrPing","additionalHeaders","authHandler","authError_1","getTransmissionTime","tlsRestrictedAgent","shouldPOSTData","redirectHeader","_onError","pollingIntervalHint","statusMessage","MAX_QPS_FAILURES_BEFORE_WARN","QuickPulseStateManager","_isCollectingData","_lastSuccessTime","_lastSendSucceeded","_metrics","_documents","_collectors","_redirectedHost","_pollingIntervalHint","addCollector","collector","_addMetric","addDocument","document_1","_goQuickPulse","enableCollectors","_resetQuickPulseBuffer","pingInterval","currentTimeout","_post","_ping","PING_INTERVAL","POST_INTERVAL","MAX_POST_WAIT_TIME","FALLBACK_INTERVAL","MAX_PING_WAIT_TIME","_quickPulseDone","shouldPOST","redirectedHost","FileAccessControl_1","RESPONSE_CODES_INDICATING_REACHED_BREEZE","onSuccess","isStatsbeatSender","shutdownStatsbeat","_onSuccess","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","_numConsecutiveRedirects","_resendTimer","TEMPDIR_PREFIX","_isStatsbeatSender","_failedToIngestCounter","_statsbeatHasReachedIngestionAtLeastOnce","_logWarn","DISK_RETRY","CLEANUP_TIMEOUT","endpointHost","errorMsg","batch_1","payload_1","AAD_HANDLING","gzip","dataToSend","_logInfo","responseString","_statsbeatFailedToIngest","Breeze","_sendFirstFileOnDisk","_isRetriable","breezeResponse","filteredEnvelopes_1","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","_storeToDiskSync","ex_2","ex_3","fileFullPath","ex_4","mode","mkdirSync","dirSize","writeFileSync","firstFile","fileCreationDate","err_2","FILE_RETEMPTION_PERIOD","isSupportedContentEncoding","findBufferEncodingType","getBrotliDecompressAsync","getBrotliCompressAsync","inflateAsync","deflateAsync","gunzipAsync","gzipAsync","isBrotliSupperted","bufferEncodingTypes","majVer","gunzip","deflate","inflate","zlibObject","brotliCompress","brotliCompressSync","brotliDecompress","brotliDecompressSync","encodingType","isEncoding","toJSON","encodingMethod","contentEncodingHeaders","supportedContentEncoding","snippet","isHtml","TelemetryProcessors","_telemetryProcessors","_enableAzureProperties","authorizationHandler","trackAvailability","trackPageView","azureRoleEnvironmentTelemetryProcessor","accepted","runTelemetryProcessors","samplingTelemetryProcessor","preAggregatedMetricsTelemetryProcessor","performanceMetricsTelemetryProcessor","quickPulseClient","setAutoPopulateAzureProperties","aadTokenCredential","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","traceparentArr","formattedFlags","fieldmap","parseHeader","fieldarr","validateKeyChars","keyParts","tenant","vendor","tenantValid","vendorValid","keydeduper","parts_1","_addCloseHandler","cookieName","cookies","int32ArrayToBase64","toChar","fromCharCode","w3cSpanId","isValidW3CId","totalms","sec","hour","extractError","looseError","extractObject","origProperty","stringTarget","MAX_PROPERTY_LENGTH","excludedDomains","contextHeaders","keyValues","keyValue","requestCallback","useProxy","useAgent","requestUrlParsed","proxyUrlParsed","Host","_useKeepAlive","keepAliveAgent","addCorrelationIdHeaderFromString","components","_listenerAttached","Agent","maxSockets","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","WEBSITE_INSTANCE_ID","remoteDependencyData","AutoCollecPreAggregatedMetrics","exceptionData","exceptionDimensions","traceData","traceDimensions","requestDimensions","dependencyDimensions","getSamplingHashCode","csharpMax","Configuration","wrapWithCorrelationContext","getCorrelationContext","liveMetricsClient","DistributedTracingModes","QuickPulseClient","NativePerformance_1","azureFunctionsTypes","_forceClsHooked","_disabledExtendedMetrics","_console","_exceptions","_performance","_preAggregatedMetrics","_heartbeat","_webSnippet","_nativePerformance","_serverRequests","_clientRequests","_performanceLiveMetrics","defaultConfig","_isConsole","_isConsoleLog","_isExceptions","_isPerformance","_isPreAggregatedMetrics","_isHeartBeat","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_isSendingLiveMetrics","_isNativePerformance","_isSnippetInjection","_diskRetryInterval","_diskRetryMaxBytes","_webSnippetConnectionString","_isStarted","extendedMetricsConfig","_initializeConfig","setDistributedTracingMode","AI_AND_W3C","setAutoCollectPreAggregatedMetrics","WebSnippetConnectionString","useAsyncHooks","setInternalLogging","enableDebugLogging","enableWarningLogging","setSendLiveMetrics","asyncWrap","binding","TIMERWRAP","Providers","patchs","ignoreUIDs","State","Hooks","initFns","preFns","postFns","destroyFns","uid","parentUid","parentHandle","hook","pre","didThrow","removeElement","AsyncHook","providers","setupHooks","addHooks","removeHooks","_asyncHook","attach","callSite","getFileName","NextTickWrap","oldNextTick","listenerCount","PromiseWrap","oldThen","makeWrappedHandler","isOnFulfilled","makeUnhandledResolutionHandler","makeUnhandledRejectionHandler","onFulfilled","timers","TimeoutWrap","IntervalWrap","ImmediateWrap","timeoutMap","intervalMap","ImmediateMap","activeCallback","clearedInCallback","patchTimer","setFn","clearFn","Handle","timerMap","singleCall","oldSetFn","oldClearFn","timerId","clearImmediate","ensureAslWrapper","executor","asyncCatcher","wrap","inAsyncTick","listenerStack","union","dest","destLength","addedLength","returned","missing","_fatalException","errorValues","inErrorTick","er","handled","original","before","after","errorThrew","threw","_originalNextTick","AsyncListener","callbacks","createAsyncListener","addAsyncListener","registered","removeAsyncListener","simpleWrap","shimmer","semver","massWrap","v6plus","gte","v7plus","v8plus","v11plus","net","wrapSetUpListenHandle","onread","onconnection","patchOnRead","_originalOnread","_normalizeArgs","arg0","_normalizeConnectArgs","Server","Socket","onSocket","childProcess","wrapChildProcess","activatorFirst","onexit","ChildProcess","processors","_nextDomainTick","_tickDomainCallback","activator","asynchronizers","patchGlobalTimers","dns","resolveNaptr","crypto","lchown","lchmod","ftruncate","Deflate","toWrap","instrumentPromise","promiseListener","fallback","cbIdx","wrappedPromise","overwrite","__asl_wrapper","propagateAslWrapper","nextResult","returnVal","errorVal","wrapThen","last","wrapPromise","serial","serialOrdered","clean","jobs","defer","runJob","sortMethod","isNamedList","initState","keyedList","terminator","ascending","iteratorHandler","descending","assert","asyncHook","ERROR_SYMBOL","invertedProviders","DEBUG_CLS_HOOKED","currentUid","Namespace","_set","_contexts","getNamespace","destroyNamespace","ok","debug2","_rawDebug","getFunctionName","enter","createContext","_ns_name","runAndReturn","runPromise","thisSymbol","CONTEXTS_SYMBOL","unwrapped","unwrappedContexts","thunk","fromException","stackChain","modifier","_modifiers","deattach","async_hooks","_indent","createHook","asyncId","triggerId","executionAsyncId","showHidden","colors","triggerAsyncId","triggerIdContext","asyncHooksCurrentId","indentStr","currentId","DelayedStream","dataSize","maxDataSize","pauseStreams","_released","_currentStream","_insideLoop","_pendingNext","combinedStream","isStreamLike","newStream","pauseStream","_checkDataSize","_handleErrors","_getNext","_realGetNext","_pipeNext","_emitError","_reset","_updateDataSize","contexts","storage","_maxDataSizeExceeded","_bufferedEvents","delayedStream","realEmit","_handleEmit","_checkIfMaxDataSizeExceeded","azureCoreTracing","AzureMonitorSymbol","publisherName","isPatched","versionSpecifier","patch","coreTracing","tracing","defaultProvider","defaultTracer","setTracer","setTracerOriginal_1","startSpanOriginal","originalEnd","publish","setGlobalTracerProviderOriginal_1","tracerProvider","getTracerOriginal","tracerName","startSpanOriginal_1","openTelemetryInstr","azureSdkInstr","registerInstrumentations","instrumentations","createAzureSdkInstrumentation","registerMonkeyPatch","originalBunyan","originalEmit","_emit","rec","noemit","ret","stream_1","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","aiLoggingConsole","Console","originalMethod","consoleMethods_1","tedious","consolePub","mongoCore","originalMongoCore","originalConnect","connect","originalWrite","pool","cbidx","bindToContext","originalLogout","logout","mongo330","mongo3","mongo2","originalMongo","instrument","operationIdGenerator","eventMap","contextMap","coreTopology","mongodbcorePatchFunction","originalMysql","originalMysqlPath","patchObjectFunction","cbWrapper","originalFunc","resultContainer","startDate","patchClassMemberFunction","classObject","connectionClass","dirname","hrDuration","callbackArgs","poolClass","postgresPool1","originalPgPool","postgres7","postgres6","originalPg","originalPgPath","originalClientQuery","Client","diagnosticOriginalFunc","queryResult","connectionParameters","patchCallback","trackingCallback","rowCount","callbackProvided","_Promise","originalRedis","originalSend","RedisClient","internal_send_command","cb_1","pubsubBound","address_1","startTime_1","startDate_1","originalTedious","originalMakeRequest","Connection","getPatchedCallback","origCallback","rows","parametersByName","statement","winston2","winston3","originalWinston","AppInsightsTransport","splat","levels","mapLevelToKind","Transport","patchedConfigure","lastLevel","origCreate","origConfigure","configure","origRootConfigure","curLevels","originalLog","Logger","loggingFilter","filters","webpackEmptyContext","ContextPreservingEventEmitter","makePatchingRequire","patchRequire_1","patchRequire_2","publishing","subscribers","contextPreservationFunction","knownPatches","modulesPatched","currentlyPublishing","shouldPublish","standardEvent_1","patched","checkIfModuleIsAlreadyPatched","preserver","previousPreservationStack","packageName","patcher","getPatchesObject","addPatchedModule","module_2","diagnosticsSource","channel_1","moduleModule","nativeModules","originalRequire","patchedModules","moduleId","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","satisfies","unwrap","SYMBOL","_listeners","_events","_wrap","visit","onAddListener","onEmit","adding","existing","unprocessed","_process","_findAndProcess","remover","types","preference","db","extname","EXTRACT_TYPE_REGEXP","TEXT_TYPE_REGEXP","charset","charsets","extension","exts","Readable","BUFFER","TYPE","blobParts","buffers","byteOffset","arrayBuffer","ab","_read","relativeStart","relativeEnd","slicedBuffer","blob","FetchError","systemError","errno","captureStackTrace","convert","defineProperties","INTERNALS","PassThrough","Body","_ref","_ref$size","_ref$timeout","isURLSearchParams","isBlob","disturbed","consumeBody","_this4","accum","accumBytes","resTimeout","getAll","p1","p2","bodyUsed","extractContentType","getTotalBytes","_lengthRetrievers","ct","_this2","textConverted","_this3","convertBody","mixIn","invalidTokenRegex","invalidHeaderCharRegex","validateName","MAP","Headers","raw","pairs","_pairs$i","createHeadersIterator","HeadersIteratorPrototype","_INTERNAL","exportNodeCompatibleHeaders","hostHeaderKey","INTERNALS$1","STATUS_CODES","Response","statusText","redirected","INTERNALS$2","parse_url","format_url","parseURL","urlStr","streamDestructionSupported","isRequest","parsedURL","href","inputBody","isAbortSignal","follow","URL$1","PassThrough$1","contentLengthValue","totalBytes","getNodeRequestOptions","abortAndFinalize","finalize","reqTimeout","createHeadersLenient","isRedirect","locationURL","requestOpts","destination","orig","isDomainOrSubdomain","response_options","codings","zlibOptions","finishFlush","writeToStream","Punycode","internals","rules","rule","punySuffix","findRule","punyDomain","toASCII","memo","errorCodes","DOMAIN_TOO_SHORT","DOMAIN_TOO_LONG","LABEL_STARTS_WITH_DASH","LABEL_ENDS_WITH_DASH","LABEL_TOO_LONG","LABEL_TOO_SHORT","LABEL_INVALID_CHARS","validate","ascii","labels","tld","sld","subdomain","listed","domainParts","handlePunycode","tldParts","privateParts","isValid","maxInt","base","regexPunycode","regexNonASCII","regexSeparators","stringFromCharCode","RangeError","mapDomain","string","encoded","ucs2decode","extra","ucs2encode","fromCodePoint","digitToBasic","digit","flag","adapt","numPoints","firstTime","baseMinusTMin","inputLength","bias","basic","oldi","codePoint","baseMinusT","encode","currentValue","basicLength","handledCPCount","handledCPCountPlusOne","qMinusT","toUnicode","prefix","sax","opt","SAXParser","SAXStream","createStream","MAX_BUFFER_LENGTH","clearBuffers","bufferCheckPosition","lowercase","lowercasetags","looseCase","closed","closedRoot","sawRoot","noscript","S","BEGIN","strictEntities","ENTITIES","XML_ENTITIES","attribList","rootNS","trackPosition","position","column","EVENTS","F","BEGIN_WHITESPACE","beginWhiteSpace","TEXT","starti","textNode","isWhitespace","strictFail","TEXT_ENTITY","OPEN_WAKA","startTagPosition","SCRIPT","SCRIPT_ENDING","script","CLOSE_TAG","SGML_DECL","sgmlDecl","isMatch","nameStart","OPEN_TAG","tagName","PROC_INST","procInstName","procInstBody","emitNode","CDATA","COMMENT","comment","DOCTYPE","isQuote","SGML_DECL_QUOTED","DOCTYPE_DTD","DOCTYPE_QUOTED","DOCTYPE_DTD_QUOTED","COMMENT_ENDING","COMMENT_ENDED","textopts","CDATA_ENDING","CDATA_ENDING_2","PROC_INST_ENDING","PROC_INST_BODY","nameBody","newTag","openTag","OPEN_TAG_SLASH","ATTRIB","closeTag","attribName","attribValue","ATTRIB_NAME","ATTRIB_VALUE","attrib","ATTRIB_NAME_SAW_WHITE","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_CLOSED","isAttribEnd","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG_SAW_WHITE","returnState","parseEntity","entity","entityBody","entityStart","maxAllowed","maxActual","closeText","checkBufferLength","close","streamWraps","_parser","me","onend","_decoder","h","removeAllListeners","SD","XML_NAMESPACE","XMLNS_NAMESPACE","STATE","COMMENT_STARTING","nodeType","qname","attribute","qualName","local","qn","selfClosing","nv","isSelfClosing","closeTo","entityLC","numStr","highSurrogate","lowSurrogate","MAX_SIZE","codeUnits","isFinite","SemVer","NODE_DEBUG","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","minor","prerelease","build","valid","compare","compareMain","comparePre","compareIdentifiers","inc","version1","version2","eq","v1","v2","defaultResult","numeric","anum","bnum","gt","lt","neq","lte","cmp","Comparator","comp","operator","rcompareIdentifiers","compareLoose","rcompare","rsort","Range","range","parseRange","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","tM","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","pr","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","r1","r2","coerce","funktion","nodule","wrapper","nodules","names","massUnwrap","lines","ee","FormatErrorString","_stackChain","defaultFormater","TraceModifier","StackFormater","SHORTCIRCUIT_CALLSITE","collectCallSites","callSites","_modify","_formater","_previous","formater","restore","_backup","_roolback","prepareStackTrace","SHORTCIRCUIT_FORMATER","originalFrames","stackTraceLimit","isExtensible","mutated","punycode","urlParse","pubsuffix","Store","MemoryCookieStore","pathMatch","validators","fromCallback","getCustomInspectSymbol","COOKIE_OCTETS","CONTROL_CHARS","TERMINATORS","PATH_VALUE","DATE_DELIM","MONTH_TO_NUM","jan","feb","mar","apr","may","jun","jul","aug","sep","nov","dec","MAX_TIME","SAME_SITE_CONTEXT_VAL_ERR","checkSameSiteContext","isNonEmptyString","PrefixSecurityEnum","freeze","SILENT","STRICT","DISABLED","IP_REGEX_LOWERCASE","IP_V6_REGEX","IP_V6_REGEX_OBJECT","parseDigits","minDigits","maxDigits","trailingOK","parseTime","parseMonth","parseDate","tokens","minute","second","dayOfMonth","month","year","UTC","canonicalDomain","domainMatch","domStr","canonicalize","jsonParse","fromJSON","isEmptyString","Cookie","serializableProperties","cookieDefaults","cookieCompare","aPathLen","creation","creationIndex","getCookieContext","decodeURI","expires","maxAge","secure","httpOnly","hostOnly","pathIsDefault","lastAccessed","sameSite","customInspectSymbol","cookiesCreated","createAge","accessAge","cdomain","getPublicSuffix","setExpires","exp","setMaxAge","age","ssCanon","sameSiteCanonical","TTL","expiryTime","relativeTo","expiryDate","millisec","isPersistent","canonicalizedDomain","getNormalizedPrefixSecurity","prefixSecurity","normalizedPrefixSecurity","firstSemi","cookiePair","terminatorIdx","trimTerminator","firstEq","parseCookiePair","unparsed","cookie_avs","av","av_sep","av_key","av_value","sameSiteLevel","lax","none","CookieJar","store","rejectPublicSuffixes","enableLooseMode","allowSpecialUseDomain","_cloneSync","syncWrap","_importCookiesSync","getCookiesSync","getCookieStringSync","getSetCookieStringsSync","removeAllCookiesSync","setCookieSync","serializeSync","sameSiteContext","rightSlash","defaultPath","ignoreErrorForPrefixSecurity","errorFound","isSecurePrefixConditionMet","isHostPrefixConditionMet","updateCookie","oldCookie","newCookie","putCookie","findCookie","getCookies","expireCheck","expire","allPaths","matchingCookie","removeCookie","findCookies","getSetCookieStrings","serialized","storeType","getAllCookies","_importCookies","putNext","newStore","cloneSync","synchronous","removeAllCookies","completedCount","removeErrors","removeCookieCb","removeErr","strOrObj","jar","syncErr","syncResult","deserializeSync","ParameterError","permuteDomain","getUtilInspect","inspectFallback","pathMatcher","domainIndex","pathIndex","curPath","domains","curDomain","removeCookies","domainName","domainValue","pathValue","cookieNames","formatPath","formatDomain","reqPath","pubSuf","cur","permutations","psl","SPECIAL_USE_DOMAINS","SPECIAL_TREATMENT_DOMAINS","topLevelDomain","requireUtil","lookupCustomInspectSymbol","tryReadingCustomSymbolFromUtilInspect","isInstanceStrict","isInteger","bool","mappingTable","PROCESSING_OPTIONS","TRANSITIONAL","NONTRANSITIONAL","findStatus","mid","regexAstralSymbols","countSymbols","combiningMarksRegex","validateLabel","processing_option","codePointAt","processing","domain_name","useSTD3","hasError","processed","mapChars","validation","verifyDnsLength","tls","TunnelingAgent","defaultMaxSockets","sockets","localAddress","toOptions","pending","removeSocket","createSecureSocket","createSocket","hostHeader","tlsOptions","mergeOptions","servername","secureSocket","overrides","defaultPort","addRequest","onFree","onCloseOrRemove","placeholder","connectOptions","connectReq","onConnect","head","useChunkedEncodingByDefault","upgrade","cause","fromPromise","qs","controlOrWhitespace","CRHTLF","slashes","protocolre","windowsDriveLetter","trimLeft","isSpecial","NaN","ignore","lolcation","loc","finaldestination","Url","unescape","extractProtocol","rest","forwardSlashes","otherSlashes","slashesCount","relative","extracted","instruction","instructions","up","origin","char","ins","conversions","sign","createNumberConversion","bitLength","typeOpts","unsigned","lowerBound","upperBound","moduloVal","moduloBitLength","moduloBound","V","enforceRange","clamp","evenRound","treatNullAsEmptyString","U","usm","implementation","constructorArgs","parsedBase","basicURLParse","baseURL","_url","serializeURL","serializeURLOrigin","stateOverride","cannotHaveAUsernamePasswordPort","setTheUsername","setThePassword","serializeHost","serializeInteger","cannotBeABaseURL","fragment","utils","Impl","impl","implSymbol","is","privateData","wrapperSymbol","interface","expose","Window","Worker","tr46","specialSchemes","ftp","gopher","ws","wss","failure","ucs2","at","isASCIIDigit","isASCIIAlpha","isASCIIHex","isSingleDot","isWindowsDriveLetterString","isSpecialScheme","percentEncode","hex","isC0ControlPercentEncode","extraPathPercentEncodeSet","isPathPercentEncode","extraUserinfoPercentEncodeSet","isUserinfoPercentEncode","percentEncodeChar","encodeSetPredicate","cStr","utf8PercentEncode","parseIPv4Number","parseHost","isSpecialArg","pieceIndex","pointer","numbersSeen","ipv4Piece","swaps","temp","parseIPv6","decoded","parseOpaqueHost","utf8PercentDecode","asciiDomain","ipv4Host","numbers","ipv4","parseIPv4","serializeIPv4","maxIdx","maxLen","currStart","currLen","findLongestZeroSequence","ignore0","serializeIPv6","shortenPath","includesCredentials","URLStateMachine","encodingOverride","parseError","trimControlChars","trimTabAndNewline","atFlag","arrFlag","passwordTokenSeenFlag","isASCIIAlphanumeric","encodedCodePoints","fileOtherwiseCodePoints","cp1","cp2","excludeFragment","tuple","serializeOrigin","integer","mixin","wrapperForImpl","implForWrapper","stripBOM","escapeCDATA","requiresCDATA","wrapCDATA","hasProp","ref","rootObj","render","rootElement","attr","txt","ele","att","allowSurrogateChars","bom","isEmpty","processItem","thing","superClass","parseStringPromise","assignOrPush","processAsync","xmlnskey","ctor","__super__","remaining","saxParser","error1","errThrown","ontext","ended","resultObject","EXPLICIT_CHARKEY","onopentag","processedKey","onclosetag","emptyStr","nodeName","objClone","old","xpath","charChild","oncdata","prefixMatch","firstCharLowerCase","stripPrefix","parseNumbers","parseBooleans","ValidationError","Disconnected","Preceding","Following","Contains","ContainedBy","ImplementationSpecific","Element","Attribute","Text","CData","EntityReference","EntityDeclaration","ProcessingInstruction","Comment","Document","DocType","DocumentFragment","NotationDeclaration","Declaration","Raw","AttributeDeclaration","ElementDeclaration","Dummy","sources","None","OpenTag","InsideTag","CloseTag","NodeType","XMLAttribute","debugInfo","attValue","isId","schemaTypeInfo","writer","filterOptions","isEqualNode","namespaceURI","localName","XMLCharacterData","XMLCData","XMLNode","substringData","appendData","insertData","deleteData","replaceData","XMLComment","XMLDOMErrorHandler","XMLDOMStringList","XMLDOMConfiguration","defaultParams","getParameter","canSetParameter","setParameter","handleError","XMLDOMImplementation","hasFeature","createDocumentType","qualifiedName","publicId","systemId","createDocument","createHTMLDocument","getFeature","XMLDTDAttList","attributeName","attributeType","defaultValueType","dtdAttType","dtdAttDefault","dtdAttList","XMLDTDElement","dtdElementValue","dtdElement","XMLDTDEntity","pe","pubID","sysID","internal","dtdPubID","dtdSysID","nData","dtdNData","dtdEntityValue","dtdEntity","XMLDTDNotation","dtdNotation","XMLDeclaration","xmlVersion","xmlEncoding","xmlStandalone","declaration","XMLNamedNodeMap","XMLDocType","ref1","ref2","documentObject","nodes","attList","pEntity","notation","docType","ent","pent","not","XMLStringWriter","XMLStringifier","XMLDocument","documentURI","domConfig","rootObject","writerOptions","createElement","createDocumentFragment","createTextNode","createComment","createCDATASection","createProcessingInstruction","createAttribute","createEntityReference","getElementsByTagName","tagname","importNode","importedNode","createElementNS","createAttributeNS","getElementsByTagNameNS","getElementById","elementId","adoptNode","normalizeDocument","renameNode","getElementsByClassName","classNames","createEvent","eventInterface","createRange","createNodeIterator","whatToShow","createTreeWalker","WriterState","XMLElement","XMLProcessingInstruction","XMLRaw","XMLText","XMLDocumentCB","onData","onDataCallback","onEndCallback","currentNode","currentLevel","openTags","documentStarted","documentCompleted","createChildNode","attName","attribs","dummy","openCurrent","oldValidationFlag","noValidation","keepNullAttributes","insTarget","insValue","processingInstruction","rootNodeName","closeNode","openNode","isOpen","endline","isClosed","nod","dat","com","dtd","XMLDummy","isRoot","attributeMap","clonedSelf","clonedChild","removeAttribute","getAttribute","getAttributeNode","setAttributeNode","newAttr","removeAttributeNode","oldAttr","getAttributeNS","setAttributeNS","removeAttributeNS","getAttributeNodeNS","setAttributeNodeNS","hasAttribute","hasAttributeNS","setIdAttribute","setIdAttributeNS","setIdAttributeNode","idAttr","getNamedItem","setNamedItem","oldNode","removeNamedItem","getNamedItemNS","setNamedItemNS","removeNamedItemNS","DocumentPosition","XMLNodeList","parent1","baseURI","childNodeList","textContent","setParent","childNode","lastChild","len1","ref3","ignoreDecorators","convertAttKey","separateArrayItems","keepNullNodes","convertTextKey","convertCDataKey","convertCommentKey","convertRawKey","convertPIKey","insertBefore","newChild","refChild","insertAfter","commentBefore","commentAfter","instructionBefore","instructionAfter","prev","importDocument","clonedRoot","u","importXMLBuilder","replaceChild","oldChild","removeChild","appendChild","hasChildNodes","cloneNode","hasAttributes","compareDocumentPosition","isAncestor","isDescendant","isPreceding","isSameNode","lookupPrefix","isDefaultNamespace","lookupNamespaceURI","setUserData","getUserData","nodePos","thisPos","treePosition","isFollowing","found","foreachTreeNode","XMLWriterBase","XMLStreamWriter","isLastRootNode","writeChildNode","spaceBeforeSlash","childNodeCount","firstChildNode","allowEmpty","suppressPrettyCount","assertLegalName","assertLegalChar","textEscape","attEscape","ampregex","noDoubleEncoding","previousSibling","nextSibling","splitText","replaceWholeText","filteredOptions","ref4","ref5","ref6","dontPrettyTextNodes","dontprettytextnodes","spacebeforeslash","indentLevel","openAttribute","closeAttribute","prettySuppressed","begin","stringWriter","streamWriter","writerState","redirectUrl","loginEndpointUrl","DEFAULT_CLIENT_ID","onDidChangeSessions","REFRESH_NETWORK_FAILURE","UriEventHandler","handleUri","AzureActiveDirectoryService","BetterTokenStorage","subscriptions","registerUriHandler","onDidChangeInOtherWindow","G","sessions","refreshes","scopeData","scopeStr","scopesToSend","clientId","z","refreshToken","account","displayName","showErrorMessage","l10n","allSettled","clearSessions","modifiedScopes","modifiedScopesStr","matchingTokens","fallbackOrderedScopes","itoken","createSession","runsRemote","remoteName","runsServerless","uiKind","UIKind","Web","codeVerifier","generateCodeVerifier","codeChallenge","generateCodeChallenge","URLSearchParams","response_type","response_mode","client_id","redirect_uri","prompt","code_challenge_method","code_challenge","loginUrl","LoopbackAuthServer","codeToExchange","openExternal","Uri","nonce","waitForOAuthResponse","stop","C","callbackUri","asExternalUri","uriScheme","callbackQuery","signInUrl","oauthStartQuery","inputBox","timeoutPromise","wait","existingNonces","existingPromise","isSupportedEnvironment","A","createInputBox","B","finally","removeSessionById","writeToDisk","tokenIndex","findIndex","deleteAll","changed","refreshedToken","existingId","claims","id_token","base64Decode","access_token","email","unique_name","preferred_username","tid","oid","altsecid","ipd","expiresIn","expires_in","expiresAt","idToken","refresh_token","randomUUID","postData","querystring","grant_type","commands","executeCommand","microsoft","D","E","uriEventListener","acceptedStates","verifier","ignoreFocusOut","show","onDidAccept","onDidHide","code_verifier","attempts","errorMessage","fetching","existingTokenIndex","focused","Disposable","onDidChangeWindowState","updated","authority","secrets","onDidChange","keyListStr","rej","secret","isAddition","valueStr","keyList","storageSecretStr","storageSecret","cachedSecret","dec2hex","base64Encode","base64urlencode","plain","TextEncoder","subtle","digest","sha256","createOutputChannel","sendFile","writeHead","searchParams","serveRoot","startingRedirect","randomBytes","deferred","reqUrl","listening","portTimeout","listen","nodeCrypto","webcrypto","LOCALHOST_ADDRESSES","Desktop","isLocalhost","__webpack_module_cache__","__webpack_require__","cachedModule","__webpack_modules__","definition","aiKey","packageJSON","telemetryReporter","loginService","authentication","registerAuthenticationProvider","getSessions","removeSession","supportsMultipleAccounts"],"mappings":"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","file":"extension.js","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * A collection of HttpHeaders that can be sent with a HTTP request.\n */\nfunction getHeaderKey(headerName) {\n    return headerName.toLowerCase();\n}\nexport function isHttpHeadersLike(object) {\n    if (object && typeof object === \"object\") {\n        const castObject = object;\n        if (typeof castObject.rawHeaders === \"function\" &&\n            typeof castObject.clone === \"function\" &&\n            typeof castObject.get === \"function\" &&\n            typeof castObject.set === \"function\" &&\n            typeof castObject.contains === \"function\" &&\n            typeof castObject.remove === \"function\" &&\n            typeof castObject.headersArray === \"function\" &&\n            typeof castObject.headerValues === \"function\" &&\n            typeof castObject.headerNames === \"function\" &&\n            typeof castObject.toJson === \"function\") {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * A collection of HTTP header key/value pairs.\n */\nexport class HttpHeaders {\n    constructor(rawHeaders) {\n        this._headersMap = {};\n        if (rawHeaders) {\n            for (const headerName in rawHeaders) {\n                this.set(headerName, rawHeaders[headerName]);\n            }\n        }\n    }\n    /**\n     * Set a header in this collection with the provided name and value. The name is\n     * case-insensitive.\n     * @param headerName - The name of the header to set. This value is case-insensitive.\n     * @param headerValue - The value of the header to set.\n     */\n    set(headerName, headerValue) {\n        this._headersMap[getHeaderKey(headerName)] = {\n            name: headerName,\n            value: headerValue.toString(),\n        };\n    }\n    /**\n     * Get the header value for the provided header name, or undefined if no header exists in this\n     * collection with the provided name.\n     * @param headerName - The name of the header.\n     */\n    get(headerName) {\n        const header = this._headersMap[getHeaderKey(headerName)];\n        return !header ? undefined : header.value;\n    }\n    /**\n     * Get whether or not this header collection contains a header entry for the provided header name.\n     */\n    contains(headerName) {\n        return !!this._headersMap[getHeaderKey(headerName)];\n    }\n    /**\n     * Remove the header with the provided headerName. Return whether or not the header existed and\n     * was removed.\n     * @param headerName - The name of the header to remove.\n     */\n    remove(headerName) {\n        const result = this.contains(headerName);\n        delete this._headersMap[getHeaderKey(headerName)];\n        return result;\n    }\n    /**\n     * Get the headers that are contained this collection as an object.\n     */\n    rawHeaders() {\n        return this.toJson({ preserveCase: true });\n    }\n    /**\n     * Get the headers that are contained in this collection as an array.\n     */\n    headersArray() {\n        const headers = [];\n        for (const headerKey in this._headersMap) {\n            headers.push(this._headersMap[headerKey]);\n        }\n        return headers;\n    }\n    /**\n     * Get the header names that are contained in this collection.\n     */\n    headerNames() {\n        const headerNames = [];\n        const headers = this.headersArray();\n        for (let i = 0; i < headers.length; ++i) {\n            headerNames.push(headers[i].name);\n        }\n        return headerNames;\n    }\n    /**\n     * Get the header values that are contained in this collection.\n     */\n    headerValues() {\n        const headerValues = [];\n        const headers = this.headersArray();\n        for (let i = 0; i < headers.length; ++i) {\n            headerValues.push(headers[i].value);\n        }\n        return headerValues;\n    }\n    /**\n     * Get the JSON object representation of this HTTP header collection.\n     */\n    toJson(options = {}) {\n        const result = {};\n        if (options.preserveCase) {\n            for (const headerKey in this._headersMap) {\n                const header = this._headersMap[headerKey];\n                result[header.name] = header.value;\n            }\n        }\n        else {\n            for (const headerKey in this._headersMap) {\n                const header = this._headersMap[headerKey];\n                result[getHeaderKey(header.name)] = header.value;\n            }\n        }\n        return result;\n    }\n    /**\n     * Get the string representation of this HTTP header collection.\n     */\n    toString() {\n        return JSON.stringify(this.toJson({ preserveCase: true }));\n    }\n    /**\n     * Create a deep clone/copy of this HttpHeaders collection.\n     */\n    clone() {\n        const resultPreservingCasing = {};\n        for (const headerKey in this._headersMap) {\n            const header = this._headersMap[headerKey];\n            resultPreservingCasing[header.name] = header.value;\n        }\n        return new HttpHeaders(resultPreservingCasing);\n    }\n}\n//# sourceMappingURL=httpHeaders.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Encodes a string in base64 format.\n * @param value - The string to encode\n */\nexport function encodeString(value) {\n    return Buffer.from(value).toString(\"base64\");\n}\n/**\n * Encodes a byte array in base64 format.\n * @param value - The Uint8Aray to encode\n */\nexport function encodeByteArray(value) {\n    // Buffer.from accepts <ArrayBuffer> | <SharedArrayBuffer>-- the TypeScript definition is off here\n    // https://nodejs.org/api/buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length\n    const bufferValue = value instanceof Buffer ? value : Buffer.from(value.buffer);\n    return bufferValue.toString(\"base64\");\n}\n/**\n * Decodes a base64 string into a byte array.\n * @param value - The base64 string to decode\n */\nexport function decodeString(value) {\n    return Buffer.from(value, \"base64\");\n}\n//# sourceMappingURL=base64.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Default key used to access the XML attributes.\n */\nexport const XML_ATTRKEY = \"$\";\n/**\n * Default key used to access the XML value content.\n */\nexport const XML_CHARKEY = \"_\";\n//# sourceMappingURL=serializer.common.js.map","import crypto from 'crypto';\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\n\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  const uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { Constants } from \"./constants\";\nimport { XML_ATTRKEY } from \"./serializer.common\";\nimport { v4 as uuidv4 } from \"uuid\";\nconst validUuidRegex = /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;\n/**\n * A constant that indicates whether the environment is node.js or browser based.\n */\nexport const isNode = typeof process !== \"undefined\" &&\n    !!process.version &&\n    !!process.versions &&\n    !!process.versions.node;\n/**\n * Checks if a parsed URL is HTTPS\n *\n * @param urlToCheck - The url to check\n * @returns True if the URL is HTTPS; false otherwise.\n */\nexport function urlIsHTTPS(urlToCheck) {\n    return urlToCheck.protocol.toLowerCase() === Constants.HTTPS;\n}\n/**\n * Encodes an URI.\n *\n * @param uri - The URI to be encoded.\n * @returns The encoded URI.\n */\nexport function encodeUri(uri) {\n    return encodeURIComponent(uri)\n        .replace(/!/g, \"%21\")\n        .replace(/\"/g, \"%27\")\n        .replace(/\\(/g, \"%28\")\n        .replace(/\\)/g, \"%29\")\n        .replace(/\\*/g, \"%2A\");\n}\n/**\n * Returns a stripped version of the Http Response which only contains body,\n * headers and the status.\n *\n * @param response - The Http Response\n * @returns The stripped version of Http Response.\n */\nexport function stripResponse(response) {\n    const strippedResponse = {};\n    strippedResponse.body = response.bodyAsText;\n    strippedResponse.headers = response.headers;\n    strippedResponse.status = response.status;\n    return strippedResponse;\n}\n/**\n * Returns a stripped version of the Http Request that does not contain the\n * Authorization header.\n *\n * @param request - The Http Request object\n * @returns The stripped version of Http Request.\n */\nexport function stripRequest(request) {\n    const strippedRequest = request.clone();\n    if (strippedRequest.headers) {\n        strippedRequest.headers.remove(\"authorization\");\n    }\n    return strippedRequest;\n}\n/**\n * Validates the given uuid as a string\n *\n * @param uuid - The uuid as a string that needs to be validated\n * @returns True if the uuid is valid; false otherwise.\n */\nexport function isValidUuid(uuid) {\n    return validUuidRegex.test(uuid);\n}\n/**\n * Generated UUID\n *\n * @returns RFC4122 v4 UUID.\n */\nexport function generateUuid() {\n    return uuidv4();\n}\n/**\n * Executes an array of promises sequentially. Inspiration of this method is here:\n * https://pouchdb.com/2015/05/18/we-have-a-problem-with-promises.html. An awesome blog on promises!\n *\n * @param promiseFactories - An array of promise factories(A function that return a promise)\n * @param kickstart - Input to the first promise that is used to kickstart the promise chain.\n * If not provided then the promise chain starts with undefined.\n * @returns A chain of resolved or rejected promises\n */\nexport function executePromisesSequentially(promiseFactories, kickstart) {\n    let result = Promise.resolve(kickstart);\n    promiseFactories.forEach((promiseFactory) => {\n        result = result.then(promiseFactory);\n    });\n    return result;\n}\n/**\n * Converts a Promise to a callback.\n * @param promise - The Promise to be converted to a callback\n * @returns A function that takes the callback `(cb: Function) => void`\n * @deprecated generated code should instead depend on responseToBody\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function promiseToCallback(promise) {\n    if (typeof promise.then !== \"function\") {\n        throw new Error(\"The provided input is not a Promise.\");\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    return (cb) => {\n        promise\n            .then((data) => {\n            // eslint-disable-next-line promise/no-callback-in-promise\n            return cb(undefined, data);\n        })\n            .catch((err) => {\n            // eslint-disable-next-line promise/no-callback-in-promise\n            cb(err);\n        });\n    };\n}\n/**\n * Converts a Promise to a service callback.\n * @param promise - The Promise of HttpOperationResponse to be converted to a service callback\n * @returns A function that takes the service callback (cb: ServiceCallback<T>): void\n */\nexport function promiseToServiceCallback(promise) {\n    if (typeof promise.then !== \"function\") {\n        throw new Error(\"The provided input is not a Promise.\");\n    }\n    return (cb) => {\n        promise\n            .then((data) => {\n            return process.nextTick(cb, undefined, data.parsedBody, data.request, data);\n        })\n            .catch((err) => {\n            process.nextTick(cb, err);\n        });\n    };\n}\nexport function prepareXMLRootList(obj, elementName, xmlNamespaceKey, xmlNamespace) {\n    if (!Array.isArray(obj)) {\n        obj = [obj];\n    }\n    if (!xmlNamespaceKey || !xmlNamespace) {\n        return { [elementName]: obj };\n    }\n    const result = { [elementName]: obj };\n    result[XML_ATTRKEY] = { [xmlNamespaceKey]: xmlNamespace };\n    return result;\n}\n/**\n * Applies the properties on the prototype of sourceCtors to the prototype of targetCtor\n * @param targetCtor - The target object on which the properties need to be applied.\n * @param sourceCtors - An array of source objects from which the properties need to be taken.\n */\nexport function applyMixins(targetCtorParam, sourceCtors) {\n    const castTargetCtorParam = targetCtorParam;\n    sourceCtors.forEach((sourceCtor) => {\n        Object.getOwnPropertyNames(sourceCtor.prototype).forEach((name) => {\n            castTargetCtorParam.prototype[name] = sourceCtor.prototype[name];\n        });\n    });\n}\nconst validateISODuration = /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\n/**\n * Indicates whether the given string is in ISO 8601 format.\n * @param value - The value to be validated for ISO 8601 duration format.\n * @returns `true` if valid, `false` otherwise.\n */\nexport function isDuration(value) {\n    return validateISODuration.test(value);\n}\n/**\n * Replace all of the instances of searchValue in value with the provided replaceValue.\n * @param value - The value to search and replace in.\n * @param searchValue - The value to search for in the value argument.\n * @param replaceValue - The value to replace searchValue with in the value argument.\n * @returns The value where each instance of searchValue was replaced with replacedValue.\n */\nexport function replaceAll(value, searchValue, replaceValue) {\n    return !value || !searchValue ? value : value.split(searchValue).join(replaceValue || \"\");\n}\n/**\n * Determines whether the given entity is a basic/primitive type\n * (string, number, boolean, null, undefined).\n * @param value - Any entity\n * @returns true is it is primitive type, false otherwise.\n */\nexport function isPrimitiveType(value) {\n    return (typeof value !== \"object\" && typeof value !== \"function\") || value === null;\n}\nexport function getEnvironmentValue(name) {\n    if (process.env[name]) {\n        return process.env[name];\n    }\n    else if (process.env[name.toLowerCase()]) {\n        return process.env[name.toLowerCase()];\n    }\n    return undefined;\n}\n/**\n * @internal\n * @returns true when input is an object type that is not null, Array, RegExp, or Date.\n */\nexport function isObject(input) {\n    return (typeof input === \"object\" &&\n        input !== null &&\n        !Array.isArray(input) &&\n        !(input instanceof RegExp) &&\n        !(input instanceof Date));\n}\n//# sourceMappingURL=utils.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/* eslint-disable eqeqeq */\nimport * as base64 from \"./util/base64\";\nimport * as utils from \"./util/utils\";\nimport { XML_ATTRKEY, XML_CHARKEY } from \"./util/serializer.common\";\n// This file contains utility code to serialize and deserialize network operations according to `OperationSpec` objects generated by AutoRest.TypeScript from OpenAPI specifications.\n/**\n * Used to map raw response objects to final shapes.\n * Helps packing and unpacking Dates and other encoded types that are not intrinsic to JSON.\n * Also allows pulling values from headers, as well as inserting default values and constants.\n */\nexport class Serializer {\n    constructor(\n    /**\n     * The provided model mapper.\n     */\n    modelMappers = {}, \n    /**\n     * Whether the contents are XML or not.\n     */\n    isXML) {\n        this.modelMappers = modelMappers;\n        this.isXML = isXML;\n    }\n    /**\n     * Validates constraints, if any. This function will throw if the provided value does not respect those constraints.\n     * @param mapper - The definition of data models.\n     * @param value - The value.\n     * @param objectName - Name of the object. Used in the error messages.\n     * @deprecated Removing the constraints validation on client side.\n     */\n    validateConstraints(mapper, value, objectName) {\n        const failValidation = (constraintName, constraintValue) => {\n            throw new Error(`\"${objectName}\" with value \"${value}\" should satisfy the constraint \"${constraintName}\": ${constraintValue}.`);\n        };\n        if (mapper.constraints && value != undefined) {\n            const valueAsNumber = value;\n            const { ExclusiveMaximum, ExclusiveMinimum, InclusiveMaximum, InclusiveMinimum, MaxItems, MaxLength, MinItems, MinLength, MultipleOf, Pattern, UniqueItems, } = mapper.constraints;\n            if (ExclusiveMaximum != undefined && valueAsNumber >= ExclusiveMaximum) {\n                failValidation(\"ExclusiveMaximum\", ExclusiveMaximum);\n            }\n            if (ExclusiveMinimum != undefined && valueAsNumber <= ExclusiveMinimum) {\n                failValidation(\"ExclusiveMinimum\", ExclusiveMinimum);\n            }\n            if (InclusiveMaximum != undefined && valueAsNumber > InclusiveMaximum) {\n                failValidation(\"InclusiveMaximum\", InclusiveMaximum);\n            }\n            if (InclusiveMinimum != undefined && valueAsNumber < InclusiveMinimum) {\n                failValidation(\"InclusiveMinimum\", InclusiveMinimum);\n            }\n            const valueAsArray = value;\n            if (MaxItems != undefined && valueAsArray.length > MaxItems) {\n                failValidation(\"MaxItems\", MaxItems);\n            }\n            if (MaxLength != undefined && valueAsArray.length > MaxLength) {\n                failValidation(\"MaxLength\", MaxLength);\n            }\n            if (MinItems != undefined && valueAsArray.length < MinItems) {\n                failValidation(\"MinItems\", MinItems);\n            }\n            if (MinLength != undefined && valueAsArray.length < MinLength) {\n                failValidation(\"MinLength\", MinLength);\n            }\n            if (MultipleOf != undefined && valueAsNumber % MultipleOf !== 0) {\n                failValidation(\"MultipleOf\", MultipleOf);\n            }\n            if (Pattern) {\n                const pattern = typeof Pattern === \"string\" ? new RegExp(Pattern) : Pattern;\n                if (typeof value !== \"string\" || value.match(pattern) === null) {\n                    failValidation(\"Pattern\", Pattern);\n                }\n            }\n            if (UniqueItems &&\n                valueAsArray.some((item, i, ar) => ar.indexOf(item) !== i)) {\n                failValidation(\"UniqueItems\", UniqueItems);\n            }\n        }\n    }\n    /**\n     * Serialize the given object based on its metadata defined in the mapper.\n     *\n     * @param mapper - The mapper which defines the metadata of the serializable object.\n     * @param object - A valid Javascript object to be serialized.\n     * @param objectName - Name of the serialized object.\n     * @param options - additional options to deserialization.\n     * @returns A valid serialized Javascript object.\n     */\n    serialize(mapper, object, objectName, options = {}) {\n        var _a, _b, _c;\n        const updatedOptions = {\n            rootName: (_a = options.rootName) !== null && _a !== void 0 ? _a : \"\",\n            includeRoot: (_b = options.includeRoot) !== null && _b !== void 0 ? _b : false,\n            xmlCharKey: (_c = options.xmlCharKey) !== null && _c !== void 0 ? _c : XML_CHARKEY,\n        };\n        let payload = {};\n        const mapperType = mapper.type.name;\n        if (!objectName) {\n            objectName = mapper.serializedName;\n        }\n        if (mapperType.match(/^Sequence$/i) !== null) {\n            payload = [];\n        }\n        if (mapper.isConstant) {\n            object = mapper.defaultValue;\n        }\n        // This table of allowed values should help explain\n        // the mapper.required and mapper.nullable properties.\n        // X means \"neither undefined or null are allowed\".\n        //           || required\n        //           || true      | false\n        //  nullable || ==========================\n        //      true || null      | undefined/null\n        //     false || X         | undefined\n        // undefined || X         | undefined/null\n        const { required, nullable } = mapper;\n        if (required && nullable && object === undefined) {\n            throw new Error(`${objectName} cannot be undefined.`);\n        }\n        if (required && !nullable && object == undefined) {\n            throw new Error(`${objectName} cannot be null or undefined.`);\n        }\n        if (!required && nullable === false && object === null) {\n            throw new Error(`${objectName} cannot be null.`);\n        }\n        if (object == undefined) {\n            payload = object;\n        }\n        else {\n            if (mapperType.match(/^any$/i) !== null) {\n                payload = object;\n            }\n            else if (mapperType.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i) !== null) {\n                payload = serializeBasicTypes(mapperType, objectName, object);\n            }\n            else if (mapperType.match(/^Enum$/i) !== null) {\n                const enumMapper = mapper;\n                payload = serializeEnumType(objectName, enumMapper.type.allowedValues, object);\n            }\n            else if (mapperType.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i) !== null) {\n                payload = serializeDateTypes(mapperType, object, objectName);\n            }\n            else if (mapperType.match(/^ByteArray$/i) !== null) {\n                payload = serializeByteArrayType(objectName, object);\n            }\n            else if (mapperType.match(/^Base64Url$/i) !== null) {\n                payload = serializeBase64UrlType(objectName, object);\n            }\n            else if (mapperType.match(/^Sequence$/i) !== null) {\n                payload = serializeSequenceType(this, mapper, object, objectName, Boolean(this.isXML), updatedOptions);\n            }\n            else if (mapperType.match(/^Dictionary$/i) !== null) {\n                payload = serializeDictionaryType(this, mapper, object, objectName, Boolean(this.isXML), updatedOptions);\n            }\n            else if (mapperType.match(/^Composite$/i) !== null) {\n                payload = serializeCompositeType(this, mapper, object, objectName, Boolean(this.isXML), updatedOptions);\n            }\n        }\n        return payload;\n    }\n    /**\n     * Deserialize the given object based on its metadata defined in the mapper.\n     *\n     * @param mapper - The mapper which defines the metadata of the serializable object.\n     * @param responseBody - A valid Javascript entity to be deserialized.\n     * @param objectName - Name of the deserialized object.\n     * @param options - Controls behavior of XML parser and builder.\n     * @returns A valid deserialized Javascript object.\n     */\n    deserialize(mapper, responseBody, objectName, options = {}) {\n        var _a, _b, _c;\n        const updatedOptions = {\n            rootName: (_a = options.rootName) !== null && _a !== void 0 ? _a : \"\",\n            includeRoot: (_b = options.includeRoot) !== null && _b !== void 0 ? _b : false,\n            xmlCharKey: (_c = options.xmlCharKey) !== null && _c !== void 0 ? _c : XML_CHARKEY,\n        };\n        if (responseBody == undefined) {\n            if (this.isXML && mapper.type.name === \"Sequence\" && !mapper.xmlIsWrapped) {\n                // Edge case for empty XML non-wrapped lists. xml2js can't distinguish\n                // between the list being empty versus being missing,\n                // so let's do the more user-friendly thing and return an empty list.\n                responseBody = [];\n            }\n            // specifically check for undefined as default value can be a falsey value `0, \"\", false, null`\n            if (mapper.defaultValue !== undefined) {\n                responseBody = mapper.defaultValue;\n            }\n            return responseBody;\n        }\n        let payload;\n        const mapperType = mapper.type.name;\n        if (!objectName) {\n            objectName = mapper.serializedName;\n        }\n        if (mapperType.match(/^Composite$/i) !== null) {\n            payload = deserializeCompositeType(this, mapper, responseBody, objectName, updatedOptions);\n        }\n        else {\n            if (this.isXML) {\n                const xmlCharKey = updatedOptions.xmlCharKey;\n                const castResponseBody = responseBody;\n                /**\n                 * If the mapper specifies this as a non-composite type value but the responseBody contains\n                 * both header (\"$\" i.e., XML_ATTRKEY) and body (\"#\" i.e., XML_CHARKEY) properties,\n                 * then just reduce the responseBody value to the body (\"#\" i.e., XML_CHARKEY) property.\n                 */\n                if (castResponseBody[XML_ATTRKEY] != undefined &&\n                    castResponseBody[xmlCharKey] != undefined) {\n                    responseBody = castResponseBody[xmlCharKey];\n                }\n            }\n            if (mapperType.match(/^Number$/i) !== null) {\n                payload = parseFloat(responseBody);\n                if (isNaN(payload)) {\n                    payload = responseBody;\n                }\n            }\n            else if (mapperType.match(/^Boolean$/i) !== null) {\n                if (responseBody === \"true\") {\n                    payload = true;\n                }\n                else if (responseBody === \"false\") {\n                    payload = false;\n                }\n                else {\n                    payload = responseBody;\n                }\n            }\n            else if (mapperType.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i) !== null) {\n                payload = responseBody;\n            }\n            else if (mapperType.match(/^(Date|DateTime|DateTimeRfc1123)$/i) !== null) {\n                payload = new Date(responseBody);\n            }\n            else if (mapperType.match(/^UnixTime$/i) !== null) {\n                payload = unixTimeToDate(responseBody);\n            }\n            else if (mapperType.match(/^ByteArray$/i) !== null) {\n                payload = base64.decodeString(responseBody);\n            }\n            else if (mapperType.match(/^Base64Url$/i) !== null) {\n                payload = base64UrlToByteArray(responseBody);\n            }\n            else if (mapperType.match(/^Sequence$/i) !== null) {\n                payload = deserializeSequenceType(this, mapper, responseBody, objectName, updatedOptions);\n            }\n            else if (mapperType.match(/^Dictionary$/i) !== null) {\n                payload = deserializeDictionaryType(this, mapper, responseBody, objectName, updatedOptions);\n            }\n        }\n        if (mapper.isConstant) {\n            payload = mapper.defaultValue;\n        }\n        return payload;\n    }\n}\nfunction trimEnd(str, ch) {\n    let len = str.length;\n    while (len - 1 >= 0 && str[len - 1] === ch) {\n        --len;\n    }\n    return str.substr(0, len);\n}\nfunction bufferToBase64Url(buffer) {\n    if (!buffer) {\n        return undefined;\n    }\n    if (!(buffer instanceof Uint8Array)) {\n        throw new Error(`Please provide an input of type Uint8Array for converting to Base64Url.`);\n    }\n    // Uint8Array to Base64.\n    const str = base64.encodeByteArray(buffer);\n    // Base64 to Base64Url.\n    return trimEnd(str, \"=\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n}\nfunction base64UrlToByteArray(str) {\n    if (!str) {\n        return undefined;\n    }\n    if (str && typeof str.valueOf() !== \"string\") {\n        throw new Error(\"Please provide an input of type string for converting to Uint8Array\");\n    }\n    // Base64Url to Base64.\n    str = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    // Base64 to Uint8Array.\n    return base64.decodeString(str);\n}\nfunction splitSerializeName(prop) {\n    const classes = [];\n    let partialclass = \"\";\n    if (prop) {\n        const subwords = prop.split(\".\");\n        for (const item of subwords) {\n            if (item.charAt(item.length - 1) === \"\\\\\") {\n                partialclass += item.substr(0, item.length - 1) + \".\";\n            }\n            else {\n                partialclass += item;\n                classes.push(partialclass);\n                partialclass = \"\";\n            }\n        }\n    }\n    return classes;\n}\nfunction dateToUnixTime(d) {\n    if (!d) {\n        return undefined;\n    }\n    if (typeof d.valueOf() === \"string\") {\n        d = new Date(d);\n    }\n    return Math.floor(d.getTime() / 1000);\n}\nfunction unixTimeToDate(n) {\n    if (!n) {\n        return undefined;\n    }\n    return new Date(n * 1000);\n}\nfunction serializeBasicTypes(typeName, objectName, value) {\n    if (value !== null && value !== undefined) {\n        if (typeName.match(/^Number$/i) !== null) {\n            if (typeof value !== \"number\") {\n                throw new Error(`${objectName} with value ${value} must be of type number.`);\n            }\n        }\n        else if (typeName.match(/^String$/i) !== null) {\n            if (typeof value.valueOf() !== \"string\") {\n                throw new Error(`${objectName} with value \"${value}\" must be of type string.`);\n            }\n        }\n        else if (typeName.match(/^Uuid$/i) !== null) {\n            if (!(typeof value.valueOf() === \"string\" && utils.isValidUuid(value))) {\n                throw new Error(`${objectName} with value \"${value}\" must be of type string and a valid uuid.`);\n            }\n        }\n        else if (typeName.match(/^Boolean$/i) !== null) {\n            if (typeof value !== \"boolean\") {\n                throw new Error(`${objectName} with value ${value} must be of type boolean.`);\n            }\n        }\n        else if (typeName.match(/^Stream$/i) !== null) {\n            const objectType = typeof value;\n            if (objectType !== \"string\" &&\n                objectType !== \"function\" &&\n                !(value instanceof ArrayBuffer) &&\n                !ArrayBuffer.isView(value) &&\n                !((typeof Blob === \"function\" || typeof Blob === \"object\") && value instanceof Blob)) {\n                throw new Error(`${objectName} must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.`);\n            }\n        }\n    }\n    return value;\n}\nfunction serializeEnumType(objectName, allowedValues, value) {\n    if (!allowedValues) {\n        throw new Error(`Please provide a set of allowedValues to validate ${objectName} as an Enum Type.`);\n    }\n    const isPresent = allowedValues.some((item) => {\n        if (typeof item.valueOf() === \"string\") {\n            return item.toLowerCase() === value.toLowerCase();\n        }\n        return item === value;\n    });\n    if (!isPresent) {\n        throw new Error(`${value} is not a valid value for ${objectName}. The valid values are: ${JSON.stringify(allowedValues)}.`);\n    }\n    return value;\n}\nfunction serializeByteArrayType(objectName, value) {\n    let returnValue = \"\";\n    if (value != undefined) {\n        if (!(value instanceof Uint8Array)) {\n            throw new Error(`${objectName} must be of type Uint8Array.`);\n        }\n        returnValue = base64.encodeByteArray(value);\n    }\n    return returnValue;\n}\nfunction serializeBase64UrlType(objectName, value) {\n    let returnValue = \"\";\n    if (value != undefined) {\n        if (!(value instanceof Uint8Array)) {\n            throw new Error(`${objectName} must be of type Uint8Array.`);\n        }\n        returnValue = bufferToBase64Url(value) || \"\";\n    }\n    return returnValue;\n}\nfunction serializeDateTypes(typeName, value, objectName) {\n    if (value != undefined) {\n        if (typeName.match(/^Date$/i) !== null) {\n            if (!(value instanceof Date ||\n                (typeof value.valueOf() === \"string\" && !isNaN(Date.parse(value))))) {\n                throw new Error(`${objectName} must be an instanceof Date or a string in ISO8601 format.`);\n            }\n            value =\n                value instanceof Date\n                    ? value.toISOString().substring(0, 10)\n                    : new Date(value).toISOString().substring(0, 10);\n        }\n        else if (typeName.match(/^DateTime$/i) !== null) {\n            if (!(value instanceof Date ||\n                (typeof value.valueOf() === \"string\" && !isNaN(Date.parse(value))))) {\n                throw new Error(`${objectName} must be an instanceof Date or a string in ISO8601 format.`);\n            }\n            value = value instanceof Date ? value.toISOString() : new Date(value).toISOString();\n        }\n        else if (typeName.match(/^DateTimeRfc1123$/i) !== null) {\n            if (!(value instanceof Date ||\n                (typeof value.valueOf() === \"string\" && !isNaN(Date.parse(value))))) {\n                throw new Error(`${objectName} must be an instanceof Date or a string in RFC-1123 format.`);\n            }\n            value = value instanceof Date ? value.toUTCString() : new Date(value).toUTCString();\n        }\n        else if (typeName.match(/^UnixTime$/i) !== null) {\n            if (!(value instanceof Date ||\n                (typeof value.valueOf() === \"string\" && !isNaN(Date.parse(value))))) {\n                throw new Error(`${objectName} must be an instanceof Date or a string in RFC-1123/ISO8601 format ` +\n                    `for it to be serialized in UnixTime/Epoch format.`);\n            }\n            value = dateToUnixTime(value);\n        }\n        else if (typeName.match(/^TimeSpan$/i) !== null) {\n            if (!utils.isDuration(value)) {\n                throw new Error(`${objectName} must be a string in ISO 8601 format. Instead was \"${value}\".`);\n            }\n        }\n    }\n    return value;\n}\nfunction serializeSequenceType(serializer, mapper, object, objectName, isXml, options) {\n    if (!Array.isArray(object)) {\n        throw new Error(`${objectName} must be of type Array.`);\n    }\n    const elementType = mapper.type.element;\n    if (!elementType || typeof elementType !== \"object\") {\n        throw new Error(`element\" metadata for an Array must be defined in the ` +\n            `mapper and it must of type \"object\" in ${objectName}.`);\n    }\n    const tempArray = [];\n    for (let i = 0; i < object.length; i++) {\n        const serializedValue = serializer.serialize(elementType, object[i], objectName, options);\n        if (isXml && elementType.xmlNamespace) {\n            const xmlnsKey = elementType.xmlNamespacePrefix\n                ? `xmlns:${elementType.xmlNamespacePrefix}`\n                : \"xmlns\";\n            if (elementType.type.name === \"Composite\") {\n                tempArray[i] = Object.assign({}, serializedValue);\n                tempArray[i][XML_ATTRKEY] = { [xmlnsKey]: elementType.xmlNamespace };\n            }\n            else {\n                tempArray[i] = {};\n                tempArray[i][options.xmlCharKey] = serializedValue;\n                tempArray[i][XML_ATTRKEY] = { [xmlnsKey]: elementType.xmlNamespace };\n            }\n        }\n        else {\n            tempArray[i] = serializedValue;\n        }\n    }\n    return tempArray;\n}\nfunction serializeDictionaryType(serializer, mapper, object, objectName, isXml, options) {\n    if (typeof object !== \"object\") {\n        throw new Error(`${objectName} must be of type object.`);\n    }\n    const valueType = mapper.type.value;\n    if (!valueType || typeof valueType !== \"object\") {\n        throw new Error(`\"value\" metadata for a Dictionary must be defined in the ` +\n            `mapper and it must of type \"object\" in ${objectName}.`);\n    }\n    const tempDictionary = {};\n    for (const key of Object.keys(object)) {\n        const serializedValue = serializer.serialize(valueType, object[key], objectName, options);\n        // If the element needs an XML namespace we need to add it within the $ property\n        tempDictionary[key] = getXmlObjectValue(valueType, serializedValue, isXml, options);\n    }\n    // Add the namespace to the root element if needed\n    if (isXml && mapper.xmlNamespace) {\n        const xmlnsKey = mapper.xmlNamespacePrefix ? `xmlns:${mapper.xmlNamespacePrefix}` : \"xmlns\";\n        const result = tempDictionary;\n        result[XML_ATTRKEY] = { [xmlnsKey]: mapper.xmlNamespace };\n        return result;\n    }\n    return tempDictionary;\n}\n/**\n * Resolves the additionalProperties property from a referenced mapper.\n * @param serializer - The serializer containing the entire set of mappers.\n * @param mapper - The composite mapper to resolve.\n * @param objectName - Name of the object being serialized.\n */\nfunction resolveAdditionalProperties(serializer, mapper, objectName) {\n    const additionalProperties = mapper.type.additionalProperties;\n    if (!additionalProperties && mapper.type.className) {\n        const modelMapper = resolveReferencedMapper(serializer, mapper, objectName);\n        return modelMapper === null || modelMapper === void 0 ? void 0 : modelMapper.type.additionalProperties;\n    }\n    return additionalProperties;\n}\n/**\n * Finds the mapper referenced by `className`.\n * @param serializer - The serializer containing the entire set of mappers\n * @param mapper - The composite mapper to resolve\n * @param objectName - Name of the object being serialized\n */\nfunction resolveReferencedMapper(serializer, mapper, objectName) {\n    const className = mapper.type.className;\n    if (!className) {\n        throw new Error(`Class name for model \"${objectName}\" is not provided in the mapper \"${JSON.stringify(mapper, undefined, 2)}\".`);\n    }\n    return serializer.modelMappers[className];\n}\n/**\n * Resolves a composite mapper's modelProperties.\n * @param serializer - The serializer containing the entire set of mappers\n * @param mapper - The composite mapper to resolve\n */\nfunction resolveModelProperties(serializer, mapper, objectName) {\n    let modelProps = mapper.type.modelProperties;\n    if (!modelProps) {\n        const modelMapper = resolveReferencedMapper(serializer, mapper, objectName);\n        if (!modelMapper) {\n            throw new Error(`mapper() cannot be null or undefined for model \"${mapper.type.className}\".`);\n        }\n        modelProps = modelMapper === null || modelMapper === void 0 ? void 0 : modelMapper.type.modelProperties;\n        if (!modelProps) {\n            throw new Error(`modelProperties cannot be null or undefined in the ` +\n                `mapper \"${JSON.stringify(modelMapper)}\" of type \"${mapper.type.className}\" for object \"${objectName}\".`);\n        }\n    }\n    return modelProps;\n}\nfunction serializeCompositeType(serializer, mapper, object, objectName, isXml, options) {\n    if (getPolymorphicDiscriminatorRecursively(serializer, mapper)) {\n        mapper = getPolymorphicMapper(serializer, mapper, object, \"clientName\");\n    }\n    if (object != undefined) {\n        const payload = {};\n        const modelProps = resolveModelProperties(serializer, mapper, objectName);\n        for (const key of Object.keys(modelProps)) {\n            const propertyMapper = modelProps[key];\n            if (propertyMapper.readOnly) {\n                continue;\n            }\n            let propName;\n            let parentObject = payload;\n            if (serializer.isXML) {\n                if (propertyMapper.xmlIsWrapped) {\n                    propName = propertyMapper.xmlName;\n                }\n                else {\n                    propName = propertyMapper.xmlElementName || propertyMapper.xmlName;\n                }\n            }\n            else {\n                const paths = splitSerializeName(propertyMapper.serializedName);\n                propName = paths.pop();\n                for (const pathName of paths) {\n                    const childObject = parentObject[pathName];\n                    if (childObject == undefined &&\n                        (object[key] != undefined || propertyMapper.defaultValue !== undefined)) {\n                        parentObject[pathName] = {};\n                    }\n                    parentObject = parentObject[pathName];\n                }\n            }\n            if (parentObject != undefined) {\n                if (isXml && mapper.xmlNamespace) {\n                    const xmlnsKey = mapper.xmlNamespacePrefix\n                        ? `xmlns:${mapper.xmlNamespacePrefix}`\n                        : \"xmlns\";\n                    parentObject[XML_ATTRKEY] = Object.assign(Object.assign({}, parentObject[XML_ATTRKEY]), { [xmlnsKey]: mapper.xmlNamespace });\n                }\n                const propertyObjectName = propertyMapper.serializedName !== \"\"\n                    ? objectName + \".\" + propertyMapper.serializedName\n                    : objectName;\n                let toSerialize = object[key];\n                const polymorphicDiscriminator = getPolymorphicDiscriminatorRecursively(serializer, mapper);\n                if (polymorphicDiscriminator &&\n                    polymorphicDiscriminator.clientName === key &&\n                    toSerialize == undefined) {\n                    toSerialize = mapper.serializedName;\n                }\n                const serializedValue = serializer.serialize(propertyMapper, toSerialize, propertyObjectName, options);\n                if (serializedValue !== undefined && propName != undefined) {\n                    const value = getXmlObjectValue(propertyMapper, serializedValue, isXml, options);\n                    if (isXml && propertyMapper.xmlIsAttribute) {\n                        // XML_ATTRKEY, i.e., $ is the key attributes are kept under in xml2js.\n                        // This keeps things simple while preventing name collision\n                        // with names in user documents.\n                        parentObject[XML_ATTRKEY] = parentObject[XML_ATTRKEY] || {};\n                        parentObject[XML_ATTRKEY][propName] = serializedValue;\n                    }\n                    else if (isXml && propertyMapper.xmlIsWrapped) {\n                        parentObject[propName] = { [propertyMapper.xmlElementName]: value };\n                    }\n                    else {\n                        parentObject[propName] = value;\n                    }\n                }\n            }\n        }\n        const additionalPropertiesMapper = resolveAdditionalProperties(serializer, mapper, objectName);\n        if (additionalPropertiesMapper) {\n            const propNames = Object.keys(modelProps);\n            for (const clientPropName in object) {\n                const isAdditionalProperty = propNames.every((pn) => pn !== clientPropName);\n                if (isAdditionalProperty) {\n                    payload[clientPropName] = serializer.serialize(additionalPropertiesMapper, object[clientPropName], objectName + '[\"' + clientPropName + '\"]', options);\n                }\n            }\n        }\n        return payload;\n    }\n    return object;\n}\nfunction getXmlObjectValue(propertyMapper, serializedValue, isXml, options) {\n    if (!isXml || !propertyMapper.xmlNamespace) {\n        return serializedValue;\n    }\n    const xmlnsKey = propertyMapper.xmlNamespacePrefix\n        ? `xmlns:${propertyMapper.xmlNamespacePrefix}`\n        : \"xmlns\";\n    const xmlNamespace = { [xmlnsKey]: propertyMapper.xmlNamespace };\n    if ([\"Composite\"].includes(propertyMapper.type.name)) {\n        if (serializedValue[XML_ATTRKEY]) {\n            return serializedValue;\n        }\n        else {\n            const result = Object.assign({}, serializedValue);\n            result[XML_ATTRKEY] = xmlNamespace;\n            return result;\n        }\n    }\n    const result = {};\n    result[options.xmlCharKey] = serializedValue;\n    result[XML_ATTRKEY] = xmlNamespace;\n    return result;\n}\nfunction isSpecialXmlProperty(propertyName, options) {\n    return [XML_ATTRKEY, options.xmlCharKey].includes(propertyName);\n}\nfunction deserializeCompositeType(serializer, mapper, responseBody, objectName, options) {\n    var _a, _b;\n    const xmlCharKey = (_a = options.xmlCharKey) !== null && _a !== void 0 ? _a : XML_CHARKEY;\n    if (getPolymorphicDiscriminatorRecursively(serializer, mapper)) {\n        mapper = getPolymorphicMapper(serializer, mapper, responseBody, \"serializedName\");\n    }\n    const modelProps = resolveModelProperties(serializer, mapper, objectName);\n    let instance = {};\n    const handledPropertyNames = [];\n    for (const key of Object.keys(modelProps)) {\n        const propertyMapper = modelProps[key];\n        const paths = splitSerializeName(modelProps[key].serializedName);\n        handledPropertyNames.push(paths[0]);\n        const { serializedName, xmlName, xmlElementName } = propertyMapper;\n        let propertyObjectName = objectName;\n        if (serializedName !== \"\" && serializedName !== undefined) {\n            propertyObjectName = objectName + \".\" + serializedName;\n        }\n        const headerCollectionPrefix = propertyMapper.headerCollectionPrefix;\n        if (headerCollectionPrefix) {\n            const dictionary = {};\n            for (const headerKey of Object.keys(responseBody)) {\n                if (headerKey.startsWith(headerCollectionPrefix)) {\n                    dictionary[headerKey.substring(headerCollectionPrefix.length)] = serializer.deserialize(propertyMapper.type.value, responseBody[headerKey], propertyObjectName, options);\n                }\n                handledPropertyNames.push(headerKey);\n            }\n            instance[key] = dictionary;\n        }\n        else if (serializer.isXML) {\n            if (propertyMapper.xmlIsAttribute && responseBody[XML_ATTRKEY]) {\n                instance[key] = serializer.deserialize(propertyMapper, responseBody[XML_ATTRKEY][xmlName], propertyObjectName, options);\n            }\n            else if (propertyMapper.xmlIsMsText) {\n                if (responseBody[xmlCharKey] !== undefined) {\n                    instance[key] = responseBody[xmlCharKey];\n                }\n                else if (typeof responseBody === \"string\") {\n                    // The special case where xml parser parses \"<Name>content</Name>\" into JSON of\n                    //   `{ name: \"content\"}` instead of `{ name: { \"_\": \"content\" }}`\n                    instance[key] = responseBody;\n                }\n            }\n            else {\n                const propertyName = xmlElementName || xmlName || serializedName;\n                if (propertyMapper.xmlIsWrapped) {\n                    /* a list of <xmlElementName> wrapped by <xmlName>\n                      For the xml example below\n                        <Cors>\n                          <CorsRule>...</CorsRule>\n                          <CorsRule>...</CorsRule>\n                        </Cors>\n                      the responseBody has\n                        {\n                          Cors: {\n                            CorsRule: [{...}, {...}]\n                          }\n                        }\n                      xmlName is \"Cors\" and xmlElementName is\"CorsRule\".\n                    */\n                    const wrapped = responseBody[xmlName];\n                    const elementList = (_b = wrapped === null || wrapped === void 0 ? void 0 : wrapped[xmlElementName]) !== null && _b !== void 0 ? _b : [];\n                    instance[key] = serializer.deserialize(propertyMapper, elementList, propertyObjectName, options);\n                    handledPropertyNames.push(xmlName);\n                }\n                else {\n                    const property = responseBody[propertyName];\n                    instance[key] = serializer.deserialize(propertyMapper, property, propertyObjectName, options);\n                    handledPropertyNames.push(propertyName);\n                }\n            }\n        }\n        else {\n            // deserialize the property if it is present in the provided responseBody instance\n            let propertyInstance;\n            let res = responseBody;\n            // traversing the object step by step.\n            for (const item of paths) {\n                if (!res)\n                    break;\n                res = res[item];\n            }\n            propertyInstance = res;\n            const polymorphicDiscriminator = mapper.type.polymorphicDiscriminator;\n            // checking that the model property name (key)(ex: \"fishtype\") and the\n            // clientName of the polymorphicDiscriminator {metadata} (ex: \"fishtype\")\n            // instead of the serializedName of the polymorphicDiscriminator (ex: \"fish.type\")\n            // is a better approach. The generator is not consistent with escaping '\\.' in the\n            // serializedName of the property (ex: \"fish\\.type\") that is marked as polymorphic discriminator\n            // and the serializedName of the metadata polymorphicDiscriminator (ex: \"fish.type\"). However,\n            // the clientName transformation of the polymorphicDiscriminator (ex: \"fishtype\") and\n            // the transformation of model property name (ex: \"fishtype\") is done consistently.\n            // Hence, it is a safer bet to rely on the clientName of the polymorphicDiscriminator.\n            if (polymorphicDiscriminator &&\n                key === polymorphicDiscriminator.clientName &&\n                propertyInstance == undefined) {\n                propertyInstance = mapper.serializedName;\n            }\n            let serializedValue;\n            // paging\n            if (Array.isArray(responseBody[key]) && modelProps[key].serializedName === \"\") {\n                propertyInstance = responseBody[key];\n                const arrayInstance = serializer.deserialize(propertyMapper, propertyInstance, propertyObjectName, options);\n                // Copy over any properties that have already been added into the instance, where they do\n                // not exist on the newly de-serialized array\n                for (const [k, v] of Object.entries(instance)) {\n                    if (!Object.prototype.hasOwnProperty.call(arrayInstance, k)) {\n                        arrayInstance[k] = v;\n                    }\n                }\n                instance = arrayInstance;\n            }\n            else if (propertyInstance !== undefined || propertyMapper.defaultValue !== undefined) {\n                serializedValue = serializer.deserialize(propertyMapper, propertyInstance, propertyObjectName, options);\n                instance[key] = serializedValue;\n            }\n        }\n    }\n    const additionalPropertiesMapper = mapper.type.additionalProperties;\n    if (additionalPropertiesMapper) {\n        const isAdditionalProperty = (responsePropName) => {\n            for (const clientPropName in modelProps) {\n                const paths = splitSerializeName(modelProps[clientPropName].serializedName);\n                if (paths[0] === responsePropName) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        for (const responsePropName in responseBody) {\n            if (isAdditionalProperty(responsePropName)) {\n                instance[responsePropName] = serializer.deserialize(additionalPropertiesMapper, responseBody[responsePropName], objectName + '[\"' + responsePropName + '\"]', options);\n            }\n        }\n    }\n    else if (responseBody) {\n        for (const key of Object.keys(responseBody)) {\n            if (instance[key] === undefined &&\n                !handledPropertyNames.includes(key) &&\n                !isSpecialXmlProperty(key, options)) {\n                instance[key] = responseBody[key];\n            }\n        }\n    }\n    return instance;\n}\nfunction deserializeDictionaryType(serializer, mapper, responseBody, objectName, options) {\n    const value = mapper.type.value;\n    if (!value || typeof value !== \"object\") {\n        throw new Error(`\"value\" metadata for a Dictionary must be defined in the ` +\n            `mapper and it must of type \"object\" in ${objectName}`);\n    }\n    if (responseBody) {\n        const tempDictionary = {};\n        for (const key of Object.keys(responseBody)) {\n            tempDictionary[key] = serializer.deserialize(value, responseBody[key], objectName, options);\n        }\n        return tempDictionary;\n    }\n    return responseBody;\n}\nfunction deserializeSequenceType(serializer, mapper, responseBody, objectName, options) {\n    const element = mapper.type.element;\n    if (!element || typeof element !== \"object\") {\n        throw new Error(`element\" metadata for an Array must be defined in the ` +\n            `mapper and it must of type \"object\" in ${objectName}`);\n    }\n    if (responseBody) {\n        if (!Array.isArray(responseBody)) {\n            // xml2js will interpret a single element array as just the element, so force it to be an array\n            responseBody = [responseBody];\n        }\n        const tempArray = [];\n        for (let i = 0; i < responseBody.length; i++) {\n            tempArray[i] = serializer.deserialize(element, responseBody[i], `${objectName}[${i}]`, options);\n        }\n        return tempArray;\n    }\n    return responseBody;\n}\nfunction getPolymorphicMapper(serializer, mapper, object, polymorphicPropertyName) {\n    const polymorphicDiscriminator = getPolymorphicDiscriminatorRecursively(serializer, mapper);\n    if (polymorphicDiscriminator) {\n        const discriminatorName = polymorphicDiscriminator[polymorphicPropertyName];\n        if (discriminatorName != undefined) {\n            const discriminatorValue = object[discriminatorName];\n            if (discriminatorValue != undefined) {\n                const typeName = mapper.type.uberParent || mapper.type.className;\n                const indexDiscriminator = discriminatorValue === typeName\n                    ? discriminatorValue\n                    : typeName + \".\" + discriminatorValue;\n                const polymorphicMapper = serializer.modelMappers.discriminators[indexDiscriminator];\n                if (polymorphicMapper) {\n                    mapper = polymorphicMapper;\n                }\n            }\n        }\n    }\n    return mapper;\n}\nfunction getPolymorphicDiscriminatorRecursively(serializer, mapper) {\n    return (mapper.type.polymorphicDiscriminator ||\n        getPolymorphicDiscriminatorSafely(serializer, mapper.type.uberParent) ||\n        getPolymorphicDiscriminatorSafely(serializer, mapper.type.className));\n}\nfunction getPolymorphicDiscriminatorSafely(serializer, typeName) {\n    return (typeName &&\n        serializer.modelMappers[typeName] &&\n        serializer.modelMappers[typeName].type.polymorphicDiscriminator);\n}\n/**\n * Utility function that serializes an object that might contain binary information into a plain object, array or a string.\n */\nexport function serializeObject(toSerialize) {\n    const castToSerialize = toSerialize;\n    if (toSerialize == undefined)\n        return undefined;\n    if (toSerialize instanceof Uint8Array) {\n        toSerialize = base64.encodeByteArray(toSerialize);\n        return toSerialize;\n    }\n    else if (toSerialize instanceof Date) {\n        return toSerialize.toISOString();\n    }\n    else if (Array.isArray(toSerialize)) {\n        const array = [];\n        for (let i = 0; i < toSerialize.length; i++) {\n            array.push(serializeObject(toSerialize[i]));\n        }\n        return array;\n    }\n    else if (typeof toSerialize === \"object\") {\n        const dictionary = {};\n        for (const property in toSerialize) {\n            dictionary[property] = serializeObject(castToSerialize[property]);\n        }\n        return dictionary;\n    }\n    return toSerialize;\n}\n/**\n * Utility function to create a K:V from a list of strings\n */\nfunction strEnum(o) {\n    const result = {};\n    for (const key of o) {\n        result[key] = key;\n    }\n    return result;\n}\n/**\n * String enum containing the string types of property mappers.\n */\n// eslint-disable-next-line @typescript-eslint/no-redeclare\nexport const MapperType = strEnum([\n    \"Base64Url\",\n    \"Boolean\",\n    \"ByteArray\",\n    \"Composite\",\n    \"Date\",\n    \"DateTime\",\n    \"DateTimeRfc1123\",\n    \"Dictionary\",\n    \"Enum\",\n    \"Number\",\n    \"Object\",\n    \"Sequence\",\n    \"String\",\n    \"Stream\",\n    \"TimeSpan\",\n    \"UnixTime\",\n]);\n//# sourceMappingURL=serializer.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { HttpHeaders, isHttpHeadersLike } from \"./httpHeaders\";\nimport { Serializer } from \"./serializer\";\nimport { generateUuid } from \"./util/utils\";\nexport function isWebResourceLike(object) {\n    if (object && typeof object === \"object\") {\n        const castObject = object;\n        if (typeof castObject.url === \"string\" &&\n            typeof castObject.method === \"string\" &&\n            typeof castObject.headers === \"object\" &&\n            isHttpHeadersLike(castObject.headers) &&\n            typeof castObject.validateRequestProperties === \"function\" &&\n            typeof castObject.prepare === \"function\" &&\n            typeof castObject.clone === \"function\") {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Creates a new WebResource object.\n *\n * This class provides an abstraction over a REST call by being library / implementation agnostic and wrapping the necessary\n * properties to initiate a request.\n */\nexport class WebResource {\n    constructor(url, method, body, query, headers, streamResponseBody, withCredentials, abortSignal, timeout, onUploadProgress, onDownloadProgress, proxySettings, keepAlive, decompressResponse, streamResponseStatusCodes) {\n        this.streamResponseBody = streamResponseBody;\n        this.streamResponseStatusCodes = streamResponseStatusCodes;\n        this.url = url || \"\";\n        this.method = method || \"GET\";\n        this.headers = isHttpHeadersLike(headers) ? headers : new HttpHeaders(headers);\n        this.body = body;\n        this.query = query;\n        this.formData = undefined;\n        this.withCredentials = withCredentials || false;\n        this.abortSignal = abortSignal;\n        this.timeout = timeout || 0;\n        this.onUploadProgress = onUploadProgress;\n        this.onDownloadProgress = onDownloadProgress;\n        this.proxySettings = proxySettings;\n        this.keepAlive = keepAlive;\n        this.decompressResponse = decompressResponse;\n        this.requestId = this.headers.get(\"x-ms-client-request-id\") || generateUuid();\n    }\n    /**\n     * Validates that the required properties such as method, url, headers[\"Content-Type\"],\n     * headers[\"accept-language\"] are defined. It will throw an error if one of the above\n     * mentioned properties are not defined.\n     */\n    validateRequestProperties() {\n        if (!this.method) {\n            throw new Error(\"WebResource.method is required.\");\n        }\n        if (!this.url) {\n            throw new Error(\"WebResource.url is required.\");\n        }\n    }\n    /**\n     * Prepares the request.\n     * @param options - Options to provide for preparing the request.\n     * @returns Returns the prepared WebResource (HTTP Request) object that needs to be given to the request pipeline.\n     */\n    prepare(options) {\n        if (!options) {\n            throw new Error(\"options object is required\");\n        }\n        if (options.method === undefined ||\n            options.method === null ||\n            typeof options.method.valueOf() !== \"string\") {\n            throw new Error(\"options.method must be a string.\");\n        }\n        if (options.url && options.pathTemplate) {\n            throw new Error(\"options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.\");\n        }\n        if ((options.pathTemplate === undefined ||\n            options.pathTemplate === null ||\n            typeof options.pathTemplate.valueOf() !== \"string\") &&\n            (options.url === undefined ||\n                options.url === null ||\n                typeof options.url.valueOf() !== \"string\")) {\n            throw new Error(\"Please provide exactly one of options.pathTemplate or options.url.\");\n        }\n        // set the url if it is provided.\n        if (options.url) {\n            if (typeof options.url !== \"string\") {\n                throw new Error('options.url must be of type \"string\".');\n            }\n            this.url = options.url;\n        }\n        // set the method\n        if (options.method) {\n            const validMethods = [\"GET\", \"PUT\", \"HEAD\", \"DELETE\", \"OPTIONS\", \"POST\", \"PATCH\", \"TRACE\"];\n            if (validMethods.indexOf(options.method.toUpperCase()) === -1) {\n                throw new Error('The provided method \"' +\n                    options.method +\n                    '\" is invalid. Supported HTTP methods are: ' +\n                    JSON.stringify(validMethods));\n            }\n        }\n        this.method = options.method.toUpperCase();\n        // construct the url if path template is provided\n        if (options.pathTemplate) {\n            const { pathTemplate, pathParameters } = options;\n            if (typeof pathTemplate !== \"string\") {\n                throw new Error('options.pathTemplate must be of type \"string\".');\n            }\n            if (!options.baseUrl) {\n                options.baseUrl = \"https://management.azure.com\";\n            }\n            const baseUrl = options.baseUrl;\n            let url = baseUrl +\n                (baseUrl.endsWith(\"/\") ? \"\" : \"/\") +\n                (pathTemplate.startsWith(\"/\") ? pathTemplate.slice(1) : pathTemplate);\n            const segments = url.match(/({[\\w-]*\\s*[\\w-]*})/gi);\n            if (segments && segments.length) {\n                if (!pathParameters) {\n                    throw new Error(`pathTemplate: ${pathTemplate} has been provided. Hence, options.pathParameters must also be provided.`);\n                }\n                segments.forEach(function (item) {\n                    const pathParamName = item.slice(1, -1);\n                    const pathParam = pathParameters[pathParamName];\n                    if (pathParam === null ||\n                        pathParam === undefined ||\n                        !(typeof pathParam === \"string\" || typeof pathParam === \"object\")) {\n                        const stringifiedPathParameters = JSON.stringify(pathParameters, undefined, 2);\n                        throw new Error(`pathTemplate: ${pathTemplate} contains the path parameter ${pathParamName}` +\n                            ` however, it is not present in parameters: ${stringifiedPathParameters}.` +\n                            `The value of the path parameter can either be a \"string\" of the form { ${pathParamName}: \"some sample value\" } or ` +\n                            `it can be an \"object\" of the form { \"${pathParamName}\": { value: \"some sample value\", skipUrlEncoding: true } }.`);\n                    }\n                    if (typeof pathParam.valueOf() === \"string\") {\n                        url = url.replace(item, encodeURIComponent(pathParam));\n                    }\n                    if (typeof pathParam.valueOf() === \"object\") {\n                        if (!pathParam.value) {\n                            throw new Error(`options.pathParameters[${pathParamName}] is of type \"object\" but it does not contain a \"value\" property.`);\n                        }\n                        if (pathParam.skipUrlEncoding) {\n                            url = url.replace(item, pathParam.value);\n                        }\n                        else {\n                            url = url.replace(item, encodeURIComponent(pathParam.value));\n                        }\n                    }\n                });\n            }\n            this.url = url;\n        }\n        // append query parameters to the url if they are provided. They can be provided with pathTemplate or url option.\n        if (options.queryParameters) {\n            const queryParameters = options.queryParameters;\n            if (typeof queryParameters !== \"object\") {\n                throw new Error(`options.queryParameters must be of type object. It should be a JSON object ` +\n                    `of \"query-parameter-name\" as the key and the \"query-parameter-value\" as the value. ` +\n                    `The \"query-parameter-value\" may be fo type \"string\" or an \"object\" of the form { value: \"query-parameter-value\", skipUrlEncoding: true }.`);\n            }\n            // append question mark if it is not present in the url\n            if (this.url && this.url.indexOf(\"?\") === -1) {\n                this.url += \"?\";\n            }\n            // construct queryString\n            const queryParams = [];\n            // We need to populate this.query as a dictionary if the request is being used for Sway's validateRequest().\n            this.query = {};\n            for (const queryParamName in queryParameters) {\n                const queryParam = queryParameters[queryParamName];\n                if (queryParam) {\n                    if (typeof queryParam === \"string\") {\n                        queryParams.push(queryParamName + \"=\" + encodeURIComponent(queryParam));\n                        this.query[queryParamName] = encodeURIComponent(queryParam);\n                    }\n                    else if (typeof queryParam === \"object\") {\n                        if (!queryParam.value) {\n                            throw new Error(`options.queryParameters[${queryParamName}] is of type \"object\" but it does not contain a \"value\" property.`);\n                        }\n                        if (queryParam.skipUrlEncoding) {\n                            queryParams.push(queryParamName + \"=\" + queryParam.value);\n                            this.query[queryParamName] = queryParam.value;\n                        }\n                        else {\n                            queryParams.push(queryParamName + \"=\" + encodeURIComponent(queryParam.value));\n                            this.query[queryParamName] = encodeURIComponent(queryParam.value);\n                        }\n                    }\n                }\n            } // end-of-for\n            // append the queryString\n            this.url += queryParams.join(\"&\");\n        }\n        // add headers to the request if they are provided\n        if (options.headers) {\n            const headers = options.headers;\n            for (const headerName of Object.keys(options.headers)) {\n                this.headers.set(headerName, headers[headerName]);\n            }\n        }\n        // ensure accept-language is set correctly\n        if (!this.headers.get(\"accept-language\")) {\n            this.headers.set(\"accept-language\", \"en-US\");\n        }\n        // ensure the request-id is set correctly\n        if (!this.headers.get(\"x-ms-client-request-id\") && !options.disableClientRequestId) {\n            this.headers.set(\"x-ms-client-request-id\", this.requestId);\n        }\n        // default\n        if (!this.headers.get(\"Content-Type\")) {\n            this.headers.set(\"Content-Type\", \"application/json; charset=utf-8\");\n        }\n        // set the request body. request.js automatically sets the Content-Length request header, so we need not set it explicitly\n        this.body = options.body;\n        if (options.body !== undefined && options.body !== null) {\n            // body as a stream special case. set the body as-is and check for some special request headers specific to sending a stream.\n            if (options.bodyIsStream) {\n                if (!this.headers.get(\"Transfer-Encoding\")) {\n                    this.headers.set(\"Transfer-Encoding\", \"chunked\");\n                }\n                if (this.headers.get(\"Content-Type\") !== \"application/octet-stream\") {\n                    this.headers.set(\"Content-Type\", \"application/octet-stream\");\n                }\n            }\n            else {\n                if (options.serializationMapper) {\n                    this.body = new Serializer(options.mappers).serialize(options.serializationMapper, options.body, \"requestBody\");\n                }\n                if (!options.disableJsonStringifyOnBody) {\n                    this.body = JSON.stringify(options.body);\n                }\n            }\n        }\n        if (options.spanOptions) {\n            this.spanOptions = options.spanOptions;\n        }\n        if (options.tracingContext) {\n            this.tracingContext = options.tracingContext;\n        }\n        this.abortSignal = options.abortSignal;\n        this.onDownloadProgress = options.onDownloadProgress;\n        this.onUploadProgress = options.onUploadProgress;\n        return this;\n    }\n    /**\n     * Clone this WebResource HTTP request object.\n     * @returns The clone of this WebResource HTTP request object.\n     */\n    clone() {\n        const result = new WebResource(this.url, this.method, this.body, this.query, this.headers && this.headers.clone(), this.streamResponseBody, this.withCredentials, this.abortSignal, this.timeout, this.onUploadProgress, this.onDownloadProgress, this.proxySettings, this.keepAlive, this.decompressResponse, this.streamResponseStatusCodes);\n        if (this.formData) {\n            result.formData = this.formData;\n        }\n        if (this.operationSpec) {\n            result.operationSpec = this.operationSpec;\n        }\n        if (this.shouldDeserialize) {\n            result.shouldDeserialize = this.shouldDeserialize;\n        }\n        if (this.operationResponseGetter) {\n            result.operationResponseGetter = this.operationResponseGetter;\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=webResource.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/// <reference path=\"../shims-public.d.ts\" />\nconst listenersMap = new WeakMap();\nconst abortedMap = new WeakMap();\n/**\n * An aborter instance implements AbortSignal interface, can abort HTTP requests.\n *\n * - Call AbortSignal.none to create a new AbortSignal instance that cannot be cancelled.\n * Use `AbortSignal.none` when you are required to pass a cancellation token but the operation\n * cannot or will not ever be cancelled.\n *\n * @example\n * Abort without timeout\n * ```ts\n * await doAsyncWork(AbortSignal.none);\n * ```\n */\nexport class AbortSignal {\n    constructor() {\n        /**\n         * onabort event listener.\n         */\n        this.onabort = null;\n        listenersMap.set(this, []);\n        abortedMap.set(this, false);\n    }\n    /**\n     * Status of whether aborted or not.\n     *\n     * @readonly\n     */\n    get aborted() {\n        if (!abortedMap.has(this)) {\n            throw new TypeError(\"Expected `this` to be an instance of AbortSignal.\");\n        }\n        return abortedMap.get(this);\n    }\n    /**\n     * Creates a new AbortSignal instance that will never be aborted.\n     *\n     * @readonly\n     */\n    static get none() {\n        return new AbortSignal();\n    }\n    /**\n     * Added new \"abort\" event listener, only support \"abort\" event.\n     *\n     * @param _type - Only support \"abort\" event\n     * @param listener - The listener to be added\n     */\n    addEventListener(\n    // tslint:disable-next-line:variable-name\n    _type, listener) {\n        if (!listenersMap.has(this)) {\n            throw new TypeError(\"Expected `this` to be an instance of AbortSignal.\");\n        }\n        const listeners = listenersMap.get(this);\n        listeners.push(listener);\n    }\n    /**\n     * Remove \"abort\" event listener, only support \"abort\" event.\n     *\n     * @param _type - Only support \"abort\" event\n     * @param listener - The listener to be removed\n     */\n    removeEventListener(\n    // tslint:disable-next-line:variable-name\n    _type, listener) {\n        if (!listenersMap.has(this)) {\n            throw new TypeError(\"Expected `this` to be an instance of AbortSignal.\");\n        }\n        const listeners = listenersMap.get(this);\n        const index = listeners.indexOf(listener);\n        if (index > -1) {\n            listeners.splice(index, 1);\n        }\n    }\n    /**\n     * Dispatches a synthetic event to the AbortSignal.\n     */\n    dispatchEvent(_event) {\n        throw new Error(\"This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.\");\n    }\n}\n/**\n * Helper to trigger an abort event immediately, the onabort and all abort event listeners will be triggered.\n * Will try to trigger abort event for all linked AbortSignal nodes.\n *\n * - If there is a timeout, the timer will be cancelled.\n * - If aborted is true, nothing will happen.\n *\n * @internal\n */\n// eslint-disable-next-line @azure/azure-sdk/ts-use-interface-parameters\nexport function abortSignal(signal) {\n    if (signal.aborted) {\n        return;\n    }\n    if (signal.onabort) {\n        signal.onabort.call(signal);\n    }\n    const listeners = listenersMap.get(signal);\n    if (listeners) {\n        // Create a copy of listeners so mutations to the array\n        // (e.g. via removeListener calls) don't affect the listeners\n        // we invoke.\n        listeners.slice().forEach((listener) => {\n            listener.call(signal, { type: \"abort\" });\n        });\n    }\n    abortedMap.set(signal, true);\n}\n//# sourceMappingURL=AbortSignal.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { AbortSignal, abortSignal } from \"./AbortSignal\";\n/**\n * This error is thrown when an asynchronous operation has been aborted.\n * Check for this error by testing the `name` that the name property of the\n * error matches `\"AbortError\"`.\n *\n * @example\n * ```ts\n * const controller = new AbortController();\n * controller.abort();\n * try {\n *   doAsyncWork(controller.signal)\n * } catch (e) {\n *   if (e.name === 'AbortError') {\n *     // handle abort error here.\n *   }\n * }\n * ```\n */\nexport class AbortError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"AbortError\";\n    }\n}\n/**\n * An AbortController provides an AbortSignal and the associated controls to signal\n * that an asynchronous operation should be aborted.\n *\n * @example\n * Abort an operation when another event fires\n * ```ts\n * const controller = new AbortController();\n * const signal = controller.signal;\n * doAsyncWork(signal);\n * button.addEventListener('click', () => controller.abort());\n * ```\n *\n * @example\n * Share aborter cross multiple operations in 30s\n * ```ts\n * // Upload the same data to 2 different data centers at the same time,\n * // abort another when any of them is finished\n * const controller = AbortController.withTimeout(30 * 1000);\n * doAsyncWork(controller.signal).then(controller.abort);\n * doAsyncWork(controller.signal).then(controller.abort);\n *```\n *\n * @example\n * Cascaded aborting\n * ```ts\n * // All operations can't take more than 30 seconds\n * const aborter = Aborter.timeout(30 * 1000);\n *\n * // Following 2 operations can't take more than 25 seconds\n * await doAsyncWork(aborter.withTimeout(25 * 1000));\n * await doAsyncWork(aborter.withTimeout(25 * 1000));\n * ```\n */\nexport class AbortController {\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    constructor(parentSignals) {\n        this._signal = new AbortSignal();\n        if (!parentSignals) {\n            return;\n        }\n        // coerce parentSignals into an array\n        if (!Array.isArray(parentSignals)) {\n            // eslint-disable-next-line prefer-rest-params\n            parentSignals = arguments;\n        }\n        for (const parentSignal of parentSignals) {\n            // if the parent signal has already had abort() called,\n            // then call abort on this signal as well.\n            if (parentSignal.aborted) {\n                this.abort();\n            }\n            else {\n                // when the parent signal aborts, this signal should as well.\n                parentSignal.addEventListener(\"abort\", () => {\n                    this.abort();\n                });\n            }\n        }\n    }\n    /**\n     * The AbortSignal associated with this controller that will signal aborted\n     * when the abort method is called on this controller.\n     *\n     * @readonly\n     */\n    get signal() {\n        return this._signal;\n    }\n    /**\n     * Signal that any operations passed this controller's associated abort signal\n     * to cancel any remaining work and throw an `AbortError`.\n     */\n    abort() {\n        abortSignal(this._signal);\n    }\n    /**\n     * Creates a new AbortSignal instance that will abort after the provided ms.\n     * @param ms - Elapsed time in milliseconds to trigger an abort.\n     */\n    static timeout(ms) {\n        const signal = new AbortSignal();\n        const timer = setTimeout(abortSignal, ms, signal);\n        // Prevent the active Timer from keeping the Node.js event loop active.\n        if (typeof timer.unref === \"function\") {\n            timer.unref();\n        }\n        return signal;\n    }\n}\n//# sourceMappingURL=AbortController.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { replaceAll } from \"./util/utils\";\n/**\n * A class that handles the query portion of a URLBuilder.\n */\nexport class URLQuery {\n    constructor() {\n        this._rawQuery = {};\n    }\n    /**\n     * Get whether or not there any query parameters in this URLQuery.\n     */\n    any() {\n        return Object.keys(this._rawQuery).length > 0;\n    }\n    /**\n     * Get the keys of the query string.\n     */\n    keys() {\n        return Object.keys(this._rawQuery);\n    }\n    /**\n     * Set a query parameter with the provided name and value. If the parameterValue is undefined or\n     * empty, then this will attempt to remove an existing query parameter with the provided\n     * parameterName.\n     */\n    set(parameterName, parameterValue) {\n        const caseParameterValue = parameterValue;\n        if (parameterName) {\n            if (caseParameterValue !== undefined && caseParameterValue !== null) {\n                const newValue = Array.isArray(caseParameterValue)\n                    ? caseParameterValue\n                    : caseParameterValue.toString();\n                this._rawQuery[parameterName] = newValue;\n            }\n            else {\n                delete this._rawQuery[parameterName];\n            }\n        }\n    }\n    /**\n     * Get the value of the query parameter with the provided name. If no parameter exists with the\n     * provided parameter name, then undefined will be returned.\n     */\n    get(parameterName) {\n        return parameterName ? this._rawQuery[parameterName] : undefined;\n    }\n    /**\n     * Get the string representation of this query. The return value will not start with a \"?\".\n     */\n    toString() {\n        let result = \"\";\n        for (const parameterName in this._rawQuery) {\n            if (result) {\n                result += \"&\";\n            }\n            const parameterValue = this._rawQuery[parameterName];\n            if (Array.isArray(parameterValue)) {\n                const parameterStrings = [];\n                for (const parameterValueElement of parameterValue) {\n                    parameterStrings.push(`${parameterName}=${parameterValueElement}`);\n                }\n                result += parameterStrings.join(\"&\");\n            }\n            else {\n                result += `${parameterName}=${parameterValue}`;\n            }\n        }\n        return result;\n    }\n    /**\n     * Parse a URLQuery from the provided text.\n     */\n    static parse(text) {\n        const result = new URLQuery();\n        if (text) {\n            if (text.startsWith(\"?\")) {\n                text = text.substring(1);\n            }\n            let currentState = \"ParameterName\";\n            let parameterName = \"\";\n            let parameterValue = \"\";\n            for (let i = 0; i < text.length; ++i) {\n                const currentCharacter = text[i];\n                switch (currentState) {\n                    case \"ParameterName\":\n                        switch (currentCharacter) {\n                            case \"=\":\n                                currentState = \"ParameterValue\";\n                                break;\n                            case \"&\":\n                                parameterName = \"\";\n                                parameterValue = \"\";\n                                break;\n                            default:\n                                parameterName += currentCharacter;\n                                break;\n                        }\n                        break;\n                    case \"ParameterValue\":\n                        switch (currentCharacter) {\n                            case \"&\":\n                                result.set(parameterName, parameterValue);\n                                parameterName = \"\";\n                                parameterValue = \"\";\n                                currentState = \"ParameterName\";\n                                break;\n                            default:\n                                parameterValue += currentCharacter;\n                                break;\n                        }\n                        break;\n                    default:\n                        throw new Error(\"Unrecognized URLQuery parse state: \" + currentState);\n                }\n            }\n            if (currentState === \"ParameterValue\") {\n                result.set(parameterName, parameterValue);\n            }\n        }\n        return result;\n    }\n}\n/**\n * A class that handles creating, modifying, and parsing URLs.\n */\nexport class URLBuilder {\n    /**\n     * Set the scheme/protocol for this URL. If the provided scheme contains other parts of a URL\n     * (such as a host, port, path, or query), those parts will be added to this URL as well.\n     */\n    setScheme(scheme) {\n        if (!scheme) {\n            this._scheme = undefined;\n        }\n        else {\n            this.set(scheme, \"SCHEME\");\n        }\n    }\n    /**\n     * Get the scheme that has been set in this URL.\n     */\n    getScheme() {\n        return this._scheme;\n    }\n    /**\n     * Set the host for this URL. If the provided host contains other parts of a URL (such as a\n     * port, path, or query), those parts will be added to this URL as well.\n     */\n    setHost(host) {\n        if (!host) {\n            this._host = undefined;\n        }\n        else {\n            this.set(host, \"SCHEME_OR_HOST\");\n        }\n    }\n    /**\n     * Get the host that has been set in this URL.\n     */\n    getHost() {\n        return this._host;\n    }\n    /**\n     * Set the port for this URL. If the provided port contains other parts of a URL (such as a\n     * path or query), those parts will be added to this URL as well.\n     */\n    setPort(port) {\n        if (port === undefined || port === null || port === \"\") {\n            this._port = undefined;\n        }\n        else {\n            this.set(port.toString(), \"PORT\");\n        }\n    }\n    /**\n     * Get the port that has been set in this URL.\n     */\n    getPort() {\n        return this._port;\n    }\n    /**\n     * Set the path for this URL. If the provided path contains a query, then it will be added to\n     * this URL as well.\n     */\n    setPath(path) {\n        if (!path) {\n            this._path = undefined;\n        }\n        else {\n            const schemeIndex = path.indexOf(\"://\");\n            if (schemeIndex !== -1) {\n                const schemeStart = path.lastIndexOf(\"/\", schemeIndex);\n                // Make sure to only grab the URL part of the path before setting the state back to SCHEME\n                // this will handle cases such as \"/a/b/c/https://microsoft.com\" => \"https://microsoft.com\"\n                this.set(schemeStart === -1 ? path : path.substr(schemeStart + 1), \"SCHEME\");\n            }\n            else {\n                this.set(path, \"PATH\");\n            }\n        }\n    }\n    /**\n     * Append the provided path to this URL's existing path. If the provided path contains a query,\n     * then it will be added to this URL as well.\n     */\n    appendPath(path) {\n        if (path) {\n            let currentPath = this.getPath();\n            if (currentPath) {\n                if (!currentPath.endsWith(\"/\")) {\n                    currentPath += \"/\";\n                }\n                if (path.startsWith(\"/\")) {\n                    path = path.substring(1);\n                }\n                path = currentPath + path;\n            }\n            this.set(path, \"PATH\");\n        }\n    }\n    /**\n     * Get the path that has been set in this URL.\n     */\n    getPath() {\n        return this._path;\n    }\n    /**\n     * Set the query in this URL.\n     */\n    setQuery(query) {\n        if (!query) {\n            this._query = undefined;\n        }\n        else {\n            this._query = URLQuery.parse(query);\n        }\n    }\n    /**\n     * Set a query parameter with the provided name and value in this URL's query. If the provided\n     * query parameter value is undefined or empty, then the query parameter will be removed if it\n     * existed.\n     */\n    setQueryParameter(queryParameterName, queryParameterValue) {\n        if (queryParameterName) {\n            if (!this._query) {\n                this._query = new URLQuery();\n            }\n            this._query.set(queryParameterName, queryParameterValue);\n        }\n    }\n    /**\n     * Get the value of the query parameter with the provided query parameter name. If no query\n     * parameter exists with the provided name, then undefined will be returned.\n     */\n    getQueryParameterValue(queryParameterName) {\n        return this._query ? this._query.get(queryParameterName) : undefined;\n    }\n    /**\n     * Get the query in this URL.\n     */\n    getQuery() {\n        return this._query ? this._query.toString() : undefined;\n    }\n    /**\n     * Set the parts of this URL by parsing the provided text using the provided startState.\n     */\n    set(text, startState) {\n        const tokenizer = new URLTokenizer(text, startState);\n        while (tokenizer.next()) {\n            const token = tokenizer.current();\n            let tokenPath;\n            if (token) {\n                switch (token.type) {\n                    case \"SCHEME\":\n                        this._scheme = token.text || undefined;\n                        break;\n                    case \"HOST\":\n                        this._host = token.text || undefined;\n                        break;\n                    case \"PORT\":\n                        this._port = token.text || undefined;\n                        break;\n                    case \"PATH\":\n                        tokenPath = token.text || undefined;\n                        if (!this._path || this._path === \"/\" || tokenPath !== \"/\") {\n                            this._path = tokenPath;\n                        }\n                        break;\n                    case \"QUERY\":\n                        this._query = URLQuery.parse(token.text);\n                        break;\n                    default:\n                        throw new Error(`Unrecognized URLTokenType: ${token.type}`);\n                }\n            }\n        }\n    }\n    /**\n     * Serializes the URL as a string.\n     * @returns the URL as a string.\n     */\n    toString() {\n        let result = \"\";\n        if (this._scheme) {\n            result += `${this._scheme}://`;\n        }\n        if (this._host) {\n            result += this._host;\n        }\n        if (this._port) {\n            result += `:${this._port}`;\n        }\n        if (this._path) {\n            if (!this._path.startsWith(\"/\")) {\n                result += \"/\";\n            }\n            result += this._path;\n        }\n        if (this._query && this._query.any()) {\n            result += `?${this._query.toString()}`;\n        }\n        return result;\n    }\n    /**\n     * If the provided searchValue is found in this URLBuilder, then replace it with the provided\n     * replaceValue.\n     */\n    replaceAll(searchValue, replaceValue) {\n        if (searchValue) {\n            this.setScheme(replaceAll(this.getScheme(), searchValue, replaceValue));\n            this.setHost(replaceAll(this.getHost(), searchValue, replaceValue));\n            this.setPort(replaceAll(this.getPort(), searchValue, replaceValue));\n            this.setPath(replaceAll(this.getPath(), searchValue, replaceValue));\n            this.setQuery(replaceAll(this.getQuery(), searchValue, replaceValue));\n        }\n    }\n    /**\n     * Parses a given string URL into a new {@link URLBuilder}.\n     */\n    static parse(text) {\n        const result = new URLBuilder();\n        result.set(text, \"SCHEME_OR_HOST\");\n        return result;\n    }\n}\nexport class URLToken {\n    constructor(text, type) {\n        this.text = text;\n        this.type = type;\n    }\n    static scheme(text) {\n        return new URLToken(text, \"SCHEME\");\n    }\n    static host(text) {\n        return new URLToken(text, \"HOST\");\n    }\n    static port(text) {\n        return new URLToken(text, \"PORT\");\n    }\n    static path(text) {\n        return new URLToken(text, \"PATH\");\n    }\n    static query(text) {\n        return new URLToken(text, \"QUERY\");\n    }\n}\n/**\n * Get whether or not the provided character (single character string) is an alphanumeric (letter or\n * digit) character.\n */\nexport function isAlphaNumericCharacter(character) {\n    const characterCode = character.charCodeAt(0);\n    return ((48 /* '0' */ <= characterCode && characterCode <= 57) /* '9' */ ||\n        (65 /* 'A' */ <= characterCode && characterCode <= 90) /* 'Z' */ ||\n        (97 /* 'a' */ <= characterCode && characterCode <= 122) /* 'z' */);\n}\n/**\n * A class that tokenizes URL strings.\n */\nexport class URLTokenizer {\n    constructor(_text, state) {\n        this._text = _text;\n        this._textLength = _text ? _text.length : 0;\n        this._currentState = state !== undefined && state !== null ? state : \"SCHEME_OR_HOST\";\n        this._currentIndex = 0;\n    }\n    /**\n     * Get the current URLToken this URLTokenizer is pointing at, or undefined if the URLTokenizer\n     * hasn't started or has finished tokenizing.\n     */\n    current() {\n        return this._currentToken;\n    }\n    /**\n     * Advance to the next URLToken and return whether or not a URLToken was found.\n     */\n    next() {\n        if (!hasCurrentCharacter(this)) {\n            this._currentToken = undefined;\n        }\n        else {\n            switch (this._currentState) {\n                case \"SCHEME\":\n                    nextScheme(this);\n                    break;\n                case \"SCHEME_OR_HOST\":\n                    nextSchemeOrHost(this);\n                    break;\n                case \"HOST\":\n                    nextHost(this);\n                    break;\n                case \"PORT\":\n                    nextPort(this);\n                    break;\n                case \"PATH\":\n                    nextPath(this);\n                    break;\n                case \"QUERY\":\n                    nextQuery(this);\n                    break;\n                default:\n                    throw new Error(`Unrecognized URLTokenizerState: ${this._currentState}`);\n            }\n        }\n        return !!this._currentToken;\n    }\n}\n/**\n * Read the remaining characters from this Tokenizer's character stream.\n */\nfunction readRemaining(tokenizer) {\n    let result = \"\";\n    if (tokenizer._currentIndex < tokenizer._textLength) {\n        result = tokenizer._text.substring(tokenizer._currentIndex);\n        tokenizer._currentIndex = tokenizer._textLength;\n    }\n    return result;\n}\n/**\n * Whether or not this URLTokenizer has a current character.\n */\nfunction hasCurrentCharacter(tokenizer) {\n    return tokenizer._currentIndex < tokenizer._textLength;\n}\n/**\n * Get the character in the text string at the current index.\n */\nfunction getCurrentCharacter(tokenizer) {\n    return tokenizer._text[tokenizer._currentIndex];\n}\n/**\n * Advance to the character in text that is \"step\" characters ahead. If no step value is provided,\n * then step will default to 1.\n */\nfunction nextCharacter(tokenizer, step) {\n    if (hasCurrentCharacter(tokenizer)) {\n        if (!step) {\n            step = 1;\n        }\n        tokenizer._currentIndex += step;\n    }\n}\n/**\n * Starting with the current character, peek \"charactersToPeek\" number of characters ahead in this\n * Tokenizer's stream of characters.\n */\nfunction peekCharacters(tokenizer, charactersToPeek) {\n    let endIndex = tokenizer._currentIndex + charactersToPeek;\n    if (tokenizer._textLength < endIndex) {\n        endIndex = tokenizer._textLength;\n    }\n    return tokenizer._text.substring(tokenizer._currentIndex, endIndex);\n}\n/**\n * Read characters from this Tokenizer until the end of the stream or until the provided condition\n * is false when provided the current character.\n */\nfunction readWhile(tokenizer, condition) {\n    let result = \"\";\n    while (hasCurrentCharacter(tokenizer)) {\n        const currentCharacter = getCurrentCharacter(tokenizer);\n        if (!condition(currentCharacter)) {\n            break;\n        }\n        else {\n            result += currentCharacter;\n            nextCharacter(tokenizer);\n        }\n    }\n    return result;\n}\n/**\n * Read characters from this Tokenizer until a non-alphanumeric character or the end of the\n * character stream is reached.\n */\nfunction readWhileLetterOrDigit(tokenizer) {\n    return readWhile(tokenizer, (character) => isAlphaNumericCharacter(character));\n}\n/**\n * Read characters from this Tokenizer until one of the provided terminating characters is read or\n * the end of the character stream is reached.\n */\nfunction readUntilCharacter(tokenizer, ...terminatingCharacters) {\n    return readWhile(tokenizer, (character) => terminatingCharacters.indexOf(character) === -1);\n}\nfunction nextScheme(tokenizer) {\n    const scheme = readWhileLetterOrDigit(tokenizer);\n    tokenizer._currentToken = URLToken.scheme(scheme);\n    if (!hasCurrentCharacter(tokenizer)) {\n        tokenizer._currentState = \"DONE\";\n    }\n    else {\n        tokenizer._currentState = \"HOST\";\n    }\n}\nfunction nextSchemeOrHost(tokenizer) {\n    const schemeOrHost = readUntilCharacter(tokenizer, \":\", \"/\", \"?\");\n    if (!hasCurrentCharacter(tokenizer)) {\n        tokenizer._currentToken = URLToken.host(schemeOrHost);\n        tokenizer._currentState = \"DONE\";\n    }\n    else if (getCurrentCharacter(tokenizer) === \":\") {\n        if (peekCharacters(tokenizer, 3) === \"://\") {\n            tokenizer._currentToken = URLToken.scheme(schemeOrHost);\n            tokenizer._currentState = \"HOST\";\n        }\n        else {\n            tokenizer._currentToken = URLToken.host(schemeOrHost);\n            tokenizer._currentState = \"PORT\";\n        }\n    }\n    else {\n        tokenizer._currentToken = URLToken.host(schemeOrHost);\n        if (getCurrentCharacter(tokenizer) === \"/\") {\n            tokenizer._currentState = \"PATH\";\n        }\n        else {\n            tokenizer._currentState = \"QUERY\";\n        }\n    }\n}\nfunction nextHost(tokenizer) {\n    if (peekCharacters(tokenizer, 3) === \"://\") {\n        nextCharacter(tokenizer, 3);\n    }\n    const host = readUntilCharacter(tokenizer, \":\", \"/\", \"?\");\n    tokenizer._currentToken = URLToken.host(host);\n    if (!hasCurrentCharacter(tokenizer)) {\n        tokenizer._currentState = \"DONE\";\n    }\n    else if (getCurrentCharacter(tokenizer) === \":\") {\n        tokenizer._currentState = \"PORT\";\n    }\n    else if (getCurrentCharacter(tokenizer) === \"/\") {\n        tokenizer._currentState = \"PATH\";\n    }\n    else {\n        tokenizer._currentState = \"QUERY\";\n    }\n}\nfunction nextPort(tokenizer) {\n    if (getCurrentCharacter(tokenizer) === \":\") {\n        nextCharacter(tokenizer);\n    }\n    const port = readUntilCharacter(tokenizer, \"/\", \"?\");\n    tokenizer._currentToken = URLToken.port(port);\n    if (!hasCurrentCharacter(tokenizer)) {\n        tokenizer._currentState = \"DONE\";\n    }\n    else if (getCurrentCharacter(tokenizer) === \"/\") {\n        tokenizer._currentState = \"PATH\";\n    }\n    else {\n        tokenizer._currentState = \"QUERY\";\n    }\n}\nfunction nextPath(tokenizer) {\n    const path = readUntilCharacter(tokenizer, \"?\");\n    tokenizer._currentToken = URLToken.path(path);\n    if (!hasCurrentCharacter(tokenizer)) {\n        tokenizer._currentState = \"DONE\";\n    }\n    else {\n        tokenizer._currentState = \"QUERY\";\n    }\n}\nfunction nextQuery(tokenizer) {\n    if (getCurrentCharacter(tokenizer) === \"?\") {\n        nextCharacter(tokenizer);\n    }\n    const query = readRemaining(tokenizer);\n    tokenizer._currentToken = URLToken.query(query);\n    tokenizer._currentState = \"DONE\";\n}\n//# sourceMappingURL=url.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport * as tunnel from \"tunnel\";\nimport { URLBuilder } from \"./url\";\nexport function createProxyAgent(requestUrl, proxySettings, headers) {\n    const host = URLBuilder.parse(proxySettings.host).getHost();\n    if (!host) {\n        throw new Error(\"Expecting a non-empty host in proxy settings.\");\n    }\n    if (!isValidPort(proxySettings.port)) {\n        throw new Error(\"Expecting a valid port number in the range of [0, 65535] in proxy settings.\");\n    }\n    const tunnelOptions = {\n        proxy: {\n            host: host,\n            port: proxySettings.port,\n            headers: (headers && headers.rawHeaders()) || {},\n        },\n    };\n    if (proxySettings.username && proxySettings.password) {\n        tunnelOptions.proxy.proxyAuth = `${proxySettings.username}:${proxySettings.password}`;\n    }\n    else if (proxySettings.username) {\n        tunnelOptions.proxy.proxyAuth = `${proxySettings.username}`;\n    }\n    const isRequestHttps = isUrlHttps(requestUrl);\n    const isProxyHttps = isUrlHttps(proxySettings.host);\n    const proxyAgent = {\n        isHttps: isRequestHttps,\n        agent: createTunnel(isRequestHttps, isProxyHttps, tunnelOptions),\n    };\n    return proxyAgent;\n}\nexport function isUrlHttps(url) {\n    const urlScheme = URLBuilder.parse(url).getScheme() || \"\";\n    return urlScheme.toLowerCase() === \"https\";\n}\nexport function createTunnel(isRequestHttps, isProxyHttps, tunnelOptions) {\n    if (isRequestHttps && isProxyHttps) {\n        return tunnel.httpsOverHttps(tunnelOptions);\n    }\n    else if (isRequestHttps && !isProxyHttps) {\n        return tunnel.httpsOverHttp(tunnelOptions);\n    }\n    else if (!isRequestHttps && isProxyHttps) {\n        return tunnel.httpOverHttps(tunnelOptions);\n    }\n    else {\n        return tunnel.httpOverHttp(tunnelOptions);\n    }\n}\nfunction isValidPort(port) {\n    // any port in 0-65535 range is valid (RFC 793) even though almost all implementations\n    // will reserve 0 for a specific purpose, and a range of numbers for ephemeral ports\n    return 0 <= port && port <= 65535;\n}\n//# sourceMappingURL=proxyAgent.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { URLBuilder, URLQuery } from \"../url\";\nimport { isObject } from \"./utils\";\nconst RedactedString = \"REDACTED\";\nconst defaultAllowedHeaderNames = [\n    \"x-ms-client-request-id\",\n    \"x-ms-return-client-request-id\",\n    \"x-ms-useragent\",\n    \"x-ms-correlation-request-id\",\n    \"x-ms-request-id\",\n    \"client-request-id\",\n    \"ms-cv\",\n    \"return-client-request-id\",\n    \"traceparent\",\n    \"Access-Control-Allow-Credentials\",\n    \"Access-Control-Allow-Headers\",\n    \"Access-Control-Allow-Methods\",\n    \"Access-Control-Allow-Origin\",\n    \"Access-Control-Expose-Headers\",\n    \"Access-Control-Max-Age\",\n    \"Access-Control-Request-Headers\",\n    \"Access-Control-Request-Method\",\n    \"Origin\",\n    \"Accept\",\n    \"Accept-Encoding\",\n    \"Cache-Control\",\n    \"Connection\",\n    \"Content-Length\",\n    \"Content-Type\",\n    \"Date\",\n    \"ETag\",\n    \"Expires\",\n    \"If-Match\",\n    \"If-Modified-Since\",\n    \"If-None-Match\",\n    \"If-Unmodified-Since\",\n    \"Last-Modified\",\n    \"Pragma\",\n    \"Request-Id\",\n    \"Retry-After\",\n    \"Server\",\n    \"Transfer-Encoding\",\n    \"User-Agent\",\n    \"WWW-Authenticate\",\n];\nconst defaultAllowedQueryParameters = [\"api-version\"];\nexport class Sanitizer {\n    constructor({ allowedHeaderNames = [], allowedQueryParameters = [] } = {}) {\n        allowedHeaderNames = Array.isArray(allowedHeaderNames)\n            ? defaultAllowedHeaderNames.concat(allowedHeaderNames)\n            : defaultAllowedHeaderNames;\n        allowedQueryParameters = Array.isArray(allowedQueryParameters)\n            ? defaultAllowedQueryParameters.concat(allowedQueryParameters)\n            : defaultAllowedQueryParameters;\n        this.allowedHeaderNames = new Set(allowedHeaderNames.map((n) => n.toLowerCase()));\n        this.allowedQueryParameters = new Set(allowedQueryParameters.map((p) => p.toLowerCase()));\n    }\n    sanitize(obj) {\n        const seen = new Set();\n        return JSON.stringify(obj, (key, value) => {\n            // Ensure Errors include their interesting non-enumerable members\n            if (value instanceof Error) {\n                return Object.assign(Object.assign({}, value), { name: value.name, message: value.message });\n            }\n            if (key === \"_headersMap\") {\n                return this.sanitizeHeaders(value);\n            }\n            else if (key === \"url\") {\n                return this.sanitizeUrl(value);\n            }\n            else if (key === \"query\") {\n                return this.sanitizeQuery(value);\n            }\n            else if (key === \"body\") {\n                // Don't log the request body\n                return undefined;\n            }\n            else if (key === \"response\") {\n                // Don't log response again\n                return undefined;\n            }\n            else if (key === \"operationSpec\") {\n                // When using sendOperationRequest, the request carries a massive\n                // field with the autorest spec. No need to log it.\n                return undefined;\n            }\n            else if (Array.isArray(value) || isObject(value)) {\n                if (seen.has(value)) {\n                    return \"[Circular]\";\n                }\n                seen.add(value);\n            }\n            return value;\n        }, 2);\n    }\n    sanitizeHeaders(value) {\n        return this.sanitizeObject(value, this.allowedHeaderNames, (v, k) => v[k].value);\n    }\n    sanitizeQuery(value) {\n        return this.sanitizeObject(value, this.allowedQueryParameters, (v, k) => v[k]);\n    }\n    sanitizeObject(value, allowedKeys, accessor) {\n        if (typeof value !== \"object\" || value === null) {\n            return value;\n        }\n        const sanitized = {};\n        for (const k of Object.keys(value)) {\n            if (allowedKeys.has(k.toLowerCase())) {\n                sanitized[k] = accessor(value, k);\n            }\n            else {\n                sanitized[k] = RedactedString;\n            }\n        }\n        return sanitized;\n    }\n    sanitizeUrl(value) {\n        if (typeof value !== \"string\" || value === null) {\n            return value;\n        }\n        const urlBuilder = URLBuilder.parse(value);\n        const queryString = urlBuilder.getQuery();\n        if (!queryString) {\n            return value;\n        }\n        const query = URLQuery.parse(queryString);\n        for (const k of query.keys()) {\n            if (!this.allowedQueryParameters.has(k.toLowerCase())) {\n                query.set(k, RedactedString);\n            }\n        }\n        urlBuilder.setQuery(query.toString());\n        return urlBuilder.toString();\n    }\n}\n//# sourceMappingURL=sanitizer.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { inspect } from \"util\";\nexport const custom = inspect.custom;\n//# sourceMappingURL=inspect.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { Sanitizer } from \"./util/sanitizer\";\nimport { custom } from \"./util/inspect\";\nconst errorSanitizer = new Sanitizer();\n/**\n * An error resulting from an HTTP request to a service endpoint.\n */\nexport class RestError extends Error {\n    constructor(message, code, statusCode, request, response) {\n        super(message);\n        this.name = \"RestError\";\n        this.code = code;\n        this.statusCode = statusCode;\n        this.request = request;\n        this.response = response;\n        Object.setPrototypeOf(this, RestError.prototype);\n    }\n    /**\n     * Logging method for util.inspect in Node\n     */\n    [custom]() {\n        return `RestError: ${this.message} \\n ${errorSanitizer.sanitize(this)}`;\n    }\n}\n/**\n * A constant string to identify errors that may arise when making an HTTP request that indicates an issue with the transport layer (e.g. the hostname of the URL cannot be resolved via DNS.)\n */\nRestError.REQUEST_SEND_ERROR = \"REQUEST_SEND_ERROR\";\n/**\n * A constant string to identify errors that may arise from parsing an incoming HTTP response. Usually indicates a malformed HTTP body, such as an encoded JSON payload that is incomplete.\n */\nRestError.PARSE_ERROR = \"PARSE_ERROR\";\n//# sourceMappingURL=restError.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { log } from \"./log\";\nconst debugEnvVariable = (typeof process !== \"undefined\" && process.env && process.env.DEBUG) || undefined;\nlet enabledString;\nlet enabledNamespaces = [];\nlet skippedNamespaces = [];\nconst debuggers = [];\nif (debugEnvVariable) {\n    enable(debugEnvVariable);\n}\nconst debugObj = Object.assign((namespace) => {\n    return createDebugger(namespace);\n}, {\n    enable,\n    enabled,\n    disable,\n    log\n});\nfunction enable(namespaces) {\n    enabledString = namespaces;\n    enabledNamespaces = [];\n    skippedNamespaces = [];\n    const wildcard = /\\*/g;\n    const namespaceList = namespaces.split(\",\").map((ns) => ns.trim().replace(wildcard, \".*?\"));\n    for (const ns of namespaceList) {\n        if (ns.startsWith(\"-\")) {\n            skippedNamespaces.push(new RegExp(`^${ns.substr(1)}$`));\n        }\n        else {\n            enabledNamespaces.push(new RegExp(`^${ns}$`));\n        }\n    }\n    for (const instance of debuggers) {\n        instance.enabled = enabled(instance.namespace);\n    }\n}\nfunction enabled(namespace) {\n    if (namespace.endsWith(\"*\")) {\n        return true;\n    }\n    for (const skipped of skippedNamespaces) {\n        if (skipped.test(namespace)) {\n            return false;\n        }\n    }\n    for (const enabledNamespace of enabledNamespaces) {\n        if (enabledNamespace.test(namespace)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction disable() {\n    const result = enabledString || \"\";\n    enable(\"\");\n    return result;\n}\nfunction createDebugger(namespace) {\n    const newDebugger = Object.assign(debug, {\n        enabled: enabled(namespace),\n        destroy,\n        log: debugObj.log,\n        namespace,\n        extend\n    });\n    function debug(...args) {\n        if (!newDebugger.enabled) {\n            return;\n        }\n        if (args.length > 0) {\n            args[0] = `${namespace} ${args[0]}`;\n        }\n        newDebugger.log(...args);\n    }\n    debuggers.push(newDebugger);\n    return newDebugger;\n}\nfunction destroy() {\n    const index = debuggers.indexOf(this);\n    if (index >= 0) {\n        debuggers.splice(index, 1);\n        return true;\n    }\n    return false;\n}\nfunction extend(namespace) {\n    const newDebugger = createDebugger(`${this.namespace}:${namespace}`);\n    newDebugger.log = this.log;\n    return newDebugger;\n}\nexport default debugObj;\n//# sourceMappingURL=debug.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport util from \"util\";\nimport { EOL } from \"os\";\nexport function log(message, ...args) {\n    process.stderr.write(`${util.format(message, ...args)}${EOL}`);\n}\n//# sourceMappingURL=log.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport debug from \"./debug\";\nconst registeredLoggers = new Set();\nconst logLevelFromEnv = (typeof process !== \"undefined\" && process.env && process.env.AZURE_LOG_LEVEL) || undefined;\nlet azureLogLevel;\n/**\n * The AzureLogger provides a mechanism for overriding where logs are output to.\n * By default, logs are sent to stderr.\n * Override the `log` method to redirect logs to another location.\n */\nexport const AzureLogger = debug(\"azure\");\nAzureLogger.log = (...args) => {\n    debug.log(...args);\n};\nconst AZURE_LOG_LEVELS = [\"verbose\", \"info\", \"warning\", \"error\"];\nif (logLevelFromEnv) {\n    // avoid calling setLogLevel because we don't want a mis-set environment variable to crash\n    if (isAzureLogLevel(logLevelFromEnv)) {\n        setLogLevel(logLevelFromEnv);\n    }\n    else {\n        console.error(`AZURE_LOG_LEVEL set to unknown log level '${logLevelFromEnv}'; logging is not enabled. Acceptable values: ${AZURE_LOG_LEVELS.join(\", \")}.`);\n    }\n}\n/**\n * Immediately enables logging at the specified log level.\n * @param level - The log level to enable for logging.\n * Options from most verbose to least verbose are:\n * - verbose\n * - info\n * - warning\n * - error\n */\nexport function setLogLevel(level) {\n    if (level && !isAzureLogLevel(level)) {\n        throw new Error(`Unknown log level '${level}'. Acceptable values: ${AZURE_LOG_LEVELS.join(\",\")}`);\n    }\n    azureLogLevel = level;\n    const enabledNamespaces = [];\n    for (const logger of registeredLoggers) {\n        if (shouldEnable(logger)) {\n            enabledNamespaces.push(logger.namespace);\n        }\n    }\n    debug.enable(enabledNamespaces.join(\",\"));\n}\n/**\n * Retrieves the currently specified log level.\n */\nexport function getLogLevel() {\n    return azureLogLevel;\n}\nconst levelMap = {\n    verbose: 400,\n    info: 300,\n    warning: 200,\n    error: 100\n};\n/**\n * Creates a logger for use by the Azure SDKs that inherits from `AzureLogger`.\n * @param namespace - The name of the SDK package.\n * @hidden\n */\nexport function createClientLogger(namespace) {\n    const clientRootLogger = AzureLogger.extend(namespace);\n    patchLogMethod(AzureLogger, clientRootLogger);\n    return {\n        error: createLogger(clientRootLogger, \"error\"),\n        warning: createLogger(clientRootLogger, \"warning\"),\n        info: createLogger(clientRootLogger, \"info\"),\n        verbose: createLogger(clientRootLogger, \"verbose\")\n    };\n}\nfunction patchLogMethod(parent, child) {\n    child.log = (...args) => {\n        parent.log(...args);\n    };\n}\nfunction createLogger(parent, level) {\n    const logger = Object.assign(parent.extend(level), {\n        level\n    });\n    patchLogMethod(parent, logger);\n    if (shouldEnable(logger)) {\n        const enabledNamespaces = debug.disable();\n        debug.enable(enabledNamespaces + \",\" + logger.namespace);\n    }\n    registeredLoggers.add(logger);\n    return logger;\n}\nfunction shouldEnable(logger) {\n    if (azureLogLevel && levelMap[logger.level] <= levelMap[azureLogLevel]) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nfunction isAzureLogLevel(logLevel) {\n    return AZURE_LOG_LEVELS.includes(logLevel);\n}\n//# sourceMappingURL=index.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { createClientLogger } from \"@azure/logger\";\nexport const logger = createClientLogger(\"core-http\");\n//# sourceMappingURL=log.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * The different levels of logs that can be used with the HttpPipelineLogger.\n */\nexport var HttpPipelineLogLevel;\n(function (HttpPipelineLogLevel) {\n    /**\n     * A log level that indicates that no logs will be logged.\n     */\n    HttpPipelineLogLevel[HttpPipelineLogLevel[\"OFF\"] = 0] = \"OFF\";\n    /**\n     * An error log.\n     */\n    HttpPipelineLogLevel[HttpPipelineLogLevel[\"ERROR\"] = 1] = \"ERROR\";\n    /**\n     * A warning log.\n     */\n    HttpPipelineLogLevel[HttpPipelineLogLevel[\"WARNING\"] = 2] = \"WARNING\";\n    /**\n     * An information log.\n     */\n    HttpPipelineLogLevel[HttpPipelineLogLevel[\"INFO\"] = 3] = \"INFO\";\n})(HttpPipelineLogLevel || (HttpPipelineLogLevel = {}));\n//# sourceMappingURL=httpPipelineLogLevel.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport * as http from \"http\";\nimport * as https from \"https\";\nimport * as tough from \"tough-cookie\";\nimport { AbortController, AbortError } from \"@azure/abort-controller\";\nimport { HttpHeaders } from \"./httpHeaders\";\nimport { createProxyAgent, isUrlHttps } from \"./proxyAgent\";\nimport { Transform } from \"stream\";\nimport FormData from \"form-data\";\nimport { RestError } from \"./restError\";\nimport { logger } from \"./log\";\nimport node_fetch from \"node-fetch\";\nfunction getCachedAgent(isHttps, agentCache) {\n    return isHttps ? agentCache.httpsAgent : agentCache.httpAgent;\n}\nexport class ReportTransform extends Transform {\n    constructor(progressCallback) {\n        super();\n        this.progressCallback = progressCallback;\n        this.loadedBytes = 0;\n    }\n    _transform(chunk, _encoding, callback) {\n        this.push(chunk);\n        this.loadedBytes += chunk.length;\n        this.progressCallback({ loadedBytes: this.loadedBytes });\n        callback(undefined);\n    }\n}\nfunction isReadableStream(body) {\n    return body && typeof body.pipe === \"function\";\n}\nfunction isStreamComplete(stream, aborter) {\n    return new Promise((resolve) => {\n        stream.once(\"close\", () => {\n            aborter === null || aborter === void 0 ? void 0 : aborter.abort();\n            resolve();\n        });\n        stream.once(\"end\", resolve);\n        stream.once(\"error\", resolve);\n    });\n}\n/**\n * Transforms a set of headers into the key/value pair defined by {@link HttpHeadersLike}\n */\nexport function parseHeaders(headers) {\n    const httpHeaders = new HttpHeaders();\n    headers.forEach((value, key) => {\n        httpHeaders.set(key, value);\n    });\n    return httpHeaders;\n}\n/**\n * An HTTP client that uses `node-fetch`.\n */\nexport class NodeFetchHttpClient {\n    constructor() {\n        // a mapping of proxy settings string `${host}:${port}:${username}:${password}` to agent\n        this.proxyAgentMap = new Map();\n        this.keepAliveAgents = {};\n        this.cookieJar = new tough.CookieJar(undefined, { looseMode: true });\n    }\n    /**\n     * Provides minimum viable error handling and the logic that executes the abstract methods.\n     * @param httpRequest - Object representing the outgoing HTTP request.\n     * @returns An object representing the incoming HTTP response.\n     */\n    async sendRequest(httpRequest) {\n        var _a;\n        if (!httpRequest && typeof httpRequest !== \"object\") {\n            throw new Error(\"'httpRequest' (WebResourceLike) cannot be null or undefined and must be of type object.\");\n        }\n        const abortController = new AbortController();\n        let abortListener;\n        if (httpRequest.abortSignal) {\n            if (httpRequest.abortSignal.aborted) {\n                throw new AbortError(\"The operation was aborted.\");\n            }\n            abortListener = (event) => {\n                if (event.type === \"abort\") {\n                    abortController.abort();\n                }\n            };\n            httpRequest.abortSignal.addEventListener(\"abort\", abortListener);\n        }\n        if (httpRequest.timeout) {\n            setTimeout(() => {\n                abortController.abort();\n            }, httpRequest.timeout);\n        }\n        if (httpRequest.formData) {\n            const formData = httpRequest.formData;\n            const requestForm = new FormData();\n            const appendFormValue = (key, value) => {\n                // value function probably returns a stream so we can provide a fresh stream on each retry\n                if (typeof value === \"function\") {\n                    value = value();\n                }\n                if (value &&\n                    Object.prototype.hasOwnProperty.call(value, \"value\") &&\n                    Object.prototype.hasOwnProperty.call(value, \"options\")) {\n                    requestForm.append(key, value.value, value.options);\n                }\n                else {\n                    requestForm.append(key, value);\n                }\n            };\n            for (const formKey of Object.keys(formData)) {\n                const formValue = formData[formKey];\n                if (Array.isArray(formValue)) {\n                    for (let j = 0; j < formValue.length; j++) {\n                        appendFormValue(formKey, formValue[j]);\n                    }\n                }\n                else {\n                    appendFormValue(formKey, formValue);\n                }\n            }\n            httpRequest.body = requestForm;\n            httpRequest.formData = undefined;\n            const contentType = httpRequest.headers.get(\"Content-Type\");\n            if (contentType && contentType.indexOf(\"multipart/form-data\") !== -1) {\n                if (typeof requestForm.getBoundary === \"function\") {\n                    httpRequest.headers.set(\"Content-Type\", `multipart/form-data; boundary=${requestForm.getBoundary()}`);\n                }\n                else {\n                    // browser will automatically apply a suitable content-type header\n                    httpRequest.headers.remove(\"Content-Type\");\n                }\n            }\n        }\n        let body = httpRequest.body\n            ? typeof httpRequest.body === \"function\"\n                ? httpRequest.body()\n                : httpRequest.body\n            : undefined;\n        if (httpRequest.onUploadProgress && httpRequest.body) {\n            const onUploadProgress = httpRequest.onUploadProgress;\n            const uploadReportStream = new ReportTransform(onUploadProgress);\n            if (isReadableStream(body)) {\n                body.pipe(uploadReportStream);\n            }\n            else {\n                uploadReportStream.end(body);\n            }\n            body = uploadReportStream;\n        }\n        const platformSpecificRequestInit = await this.prepareRequest(httpRequest);\n        const requestInit = Object.assign({ body: body, headers: httpRequest.headers.rawHeaders(), method: httpRequest.method, \n            // the types for RequestInit are from the browser, which expects AbortSignal to\n            // have `reason` and `throwIfAborted`, but these don't exist on our polyfill\n            // for Node.\n            signal: abortController.signal, redirect: \"manual\" }, platformSpecificRequestInit);\n        let operationResponse;\n        try {\n            const response = await this.fetch(httpRequest.url, requestInit);\n            const headers = parseHeaders(response.headers);\n            const streaming = ((_a = httpRequest.streamResponseStatusCodes) === null || _a === void 0 ? void 0 : _a.has(response.status)) ||\n                httpRequest.streamResponseBody;\n            operationResponse = {\n                headers: headers,\n                request: httpRequest,\n                status: response.status,\n                readableStreamBody: streaming\n                    ? response.body\n                    : undefined,\n                bodyAsText: !streaming ? await response.text() : undefined,\n            };\n            const onDownloadProgress = httpRequest.onDownloadProgress;\n            if (onDownloadProgress) {\n                const responseBody = response.body || undefined;\n                if (isReadableStream(responseBody)) {\n                    const downloadReportStream = new ReportTransform(onDownloadProgress);\n                    responseBody.pipe(downloadReportStream);\n                    operationResponse.readableStreamBody = downloadReportStream;\n                }\n                else {\n                    const length = parseInt(headers.get(\"Content-Length\")) || undefined;\n                    if (length) {\n                        // Calling callback for non-stream response for consistency with browser\n                        onDownloadProgress({ loadedBytes: length });\n                    }\n                }\n            }\n            await this.processRequest(operationResponse);\n            return operationResponse;\n        }\n        catch (error) {\n            const fetchError = error;\n            if (fetchError.code === \"ENOTFOUND\") {\n                throw new RestError(fetchError.message, RestError.REQUEST_SEND_ERROR, undefined, httpRequest);\n            }\n            else if (fetchError.type === \"aborted\") {\n                throw new AbortError(\"The operation was aborted.\");\n            }\n            throw fetchError;\n        }\n        finally {\n            // clean up event listener\n            if (httpRequest.abortSignal && abortListener) {\n                let uploadStreamDone = Promise.resolve();\n                if (isReadableStream(body)) {\n                    uploadStreamDone = isStreamComplete(body);\n                }\n                let downloadStreamDone = Promise.resolve();\n                if (isReadableStream(operationResponse === null || operationResponse === void 0 ? void 0 : operationResponse.readableStreamBody)) {\n                    downloadStreamDone = isStreamComplete(operationResponse.readableStreamBody, abortController);\n                }\n                Promise.all([uploadStreamDone, downloadStreamDone])\n                    .then(() => {\n                    var _a;\n                    (_a = httpRequest.abortSignal) === null || _a === void 0 ? void 0 : _a.removeEventListener(\"abort\", abortListener);\n                    return;\n                })\n                    .catch((e) => {\n                    logger.warning(\"Error when cleaning up abortListener on httpRequest\", e);\n                });\n            }\n        }\n    }\n    getOrCreateAgent(httpRequest) {\n        var _a;\n        const isHttps = isUrlHttps(httpRequest.url);\n        // At the moment, proxy settings and keepAlive are mutually\n        // exclusive because the 'tunnel' library currently lacks the\n        // ability to create a proxy with keepAlive turned on.\n        if (httpRequest.proxySettings) {\n            const { host, port, username, password } = httpRequest.proxySettings;\n            const key = `${host}:${port}:${username}:${password}`;\n            const proxyAgents = (_a = this.proxyAgentMap.get(key)) !== null && _a !== void 0 ? _a : {};\n            let agent = getCachedAgent(isHttps, proxyAgents);\n            if (agent) {\n                return agent;\n            }\n            const tunnel = createProxyAgent(httpRequest.url, httpRequest.proxySettings, httpRequest.headers);\n            agent = tunnel.agent;\n            if (tunnel.isHttps) {\n                proxyAgents.httpsAgent = tunnel.agent;\n            }\n            else {\n                proxyAgents.httpAgent = tunnel.agent;\n            }\n            this.proxyAgentMap.set(key, proxyAgents);\n            return agent;\n        }\n        else if (httpRequest.keepAlive) {\n            let agent = getCachedAgent(isHttps, this.keepAliveAgents);\n            if (agent) {\n                return agent;\n            }\n            const agentOptions = {\n                keepAlive: httpRequest.keepAlive,\n            };\n            if (isHttps) {\n                agent = this.keepAliveAgents.httpsAgent = new https.Agent(agentOptions);\n            }\n            else {\n                agent = this.keepAliveAgents.httpAgent = new http.Agent(agentOptions);\n            }\n            return agent;\n        }\n        else {\n            return isHttps ? https.globalAgent : http.globalAgent;\n        }\n    }\n    /**\n     * Uses `node-fetch` to perform the request.\n     */\n    // eslint-disable-next-line @azure/azure-sdk/ts-apisurface-standardized-verbs\n    async fetch(input, init) {\n        return node_fetch(input, init);\n    }\n    /**\n     * Prepares a request based on the provided web resource.\n     */\n    async prepareRequest(httpRequest) {\n        const requestInit = {};\n        if (this.cookieJar && !httpRequest.headers.get(\"Cookie\")) {\n            const cookieString = await new Promise((resolve, reject) => {\n                this.cookieJar.getCookieString(httpRequest.url, (err, cookie) => {\n                    if (err) {\n                        reject(err);\n                    }\n                    else {\n                        resolve(cookie);\n                    }\n                });\n            });\n            httpRequest.headers.set(\"Cookie\", cookieString);\n        }\n        // Set the http(s) agent\n        requestInit.agent = this.getOrCreateAgent(httpRequest);\n        requestInit.compress = httpRequest.decompressResponse;\n        return requestInit;\n    }\n    /**\n     * Process an HTTP response. Handles persisting a cookie for subsequent requests if the response has a \"Set-Cookie\" header.\n     */\n    async processRequest(operationResponse) {\n        if (this.cookieJar) {\n            const setCookieHeader = operationResponse.headers.get(\"Set-Cookie\");\n            if (setCookieHeader !== undefined) {\n                await new Promise((resolve, reject) => {\n                    this.cookieJar.setCookie(setCookieHeader, operationResponse.request.url, { ignoreError: true }, (err) => {\n                        if (err) {\n                            reject(err);\n                        }\n                        else {\n                            resolve();\n                        }\n                    });\n                });\n            }\n        }\n    }\n}\n//# sourceMappingURL=nodeFetchHttpClient.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { __rest } from \"tslib\";\n/**\n * Converts an OperationOptions to a RequestOptionsBase\n *\n * @param opts - OperationOptions object to convert to RequestOptionsBase\n */\nexport function operationOptionsToRequestOptionsBase(opts) {\n    const { requestOptions, tracingOptions } = opts, additionalOptions = __rest(opts, [\"requestOptions\", \"tracingOptions\"]);\n    let result = additionalOptions;\n    if (requestOptions) {\n        result = Object.assign(Object.assign({}, result), requestOptions);\n    }\n    if (tracingOptions) {\n        result.tracingContext = tracingOptions.tracingContext;\n        // By passing spanOptions if they exist at runtime, we're backwards compatible with @azure/core-tracing@preview.13 and earlier.\n        result.spanOptions = tracingOptions === null || tracingOptions === void 0 ? void 0 : tracingOptions.spanOptions;\n    }\n    return result;\n}\n//# sourceMappingURL=operationOptions.js.map","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { HttpPipelineLogLevel } from \"../httpPipelineLogLevel\";\n/**\n * The base class from which all request policies derive.\n */\nexport class BaseRequestPolicy {\n    /**\n     * The main method to implement that manipulates a request/response.\n     */\n    constructor(\n    /**\n     * The next policy in the pipeline. Each policy is responsible for executing the next one if the request is to continue through the pipeline.\n     */\n    _nextPolicy, \n    /**\n     * The options that can be passed to a given request policy.\n     */\n    _options) {\n        this._nextPolicy = _nextPolicy;\n        this._options = _options;\n    }\n    /**\n     * Get whether or not a log with the provided log level should be logged.\n     * @param logLevel - The log level of the log that will be logged.\n     * @returns Whether or not a log with the provided log level should be logged.\n     */\n    shouldLog(logLevel) {\n        return this._options.shouldLog(logLevel);\n    }\n    /**\n     * Attempt to log the provided message to the provided logger. If no logger was provided or if\n     * the log level does not meat the logger's threshold, then nothing will be logged.\n     * @param logLevel - The log level of this log.\n     * @param message - The message of this log.\n     */\n    log(logLevel, message) {\n        this._options.log(logLevel, message);\n    }\n}\n/**\n * Optional properties that can be used when creating a RequestPolicy.\n */\nexport class RequestPolicyOptions {\n    constructor(_logger) {\n        this._logger = _logger;\n    }\n    /**\n     * Get whether or not a log with the provided log level should be logged.\n     * @param logLevel - The log level of the log that will be logged.\n     * @returns Whether or not a log with the provided log level should be logged.\n     */\n    shouldLog(logLevel) {\n        return (!!this._logger &&\n            logLevel !== HttpPipelineLogLevel.OFF &&\n            logLevel <= this._logger.minimumLogLevel);\n    }\n    /**\n     * Attempt to log the provided message to the provided logger. If no logger was provided or if\n     * the log level does not meet the logger's threshold, then nothing will be logged.\n     * @param logLevel - The log level of this log.\n     * @param message - The message of this log.\n     */\n    log(logLevel, message) {\n        if (this._logger && this.shouldLog(logLevel)) {\n            this._logger.log(logLevel, message);\n        }\n    }\n}\n//# sourceMappingURL=requestPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport * as xml2js from \"xml2js\";\nimport { XML_ATTRKEY, XML_CHARKEY } from \"./serializer.common\";\n// Note: The reason we re-define all of the xml2js default settings (version 2.0) here is because the default settings object exposed\n// by the xm2js library is mutable. See https://github.com/Leonidas-from-XIV/node-xml2js/issues/536\n// By creating a new copy of the settings each time we instantiate the parser,\n// we are safeguarding against the possibility of the default settings being mutated elsewhere unintentionally.\nconst xml2jsDefaultOptionsV2 = {\n    explicitCharkey: false,\n    trim: false,\n    normalize: false,\n    normalizeTags: false,\n    attrkey: XML_ATTRKEY,\n    explicitArray: true,\n    ignoreAttrs: false,\n    mergeAttrs: false,\n    explicitRoot: true,\n    validator: undefined,\n    xmlns: false,\n    explicitChildren: false,\n    preserveChildrenOrder: false,\n    childkey: \"$$\",\n    charsAsChildren: false,\n    includeWhiteChars: false,\n    async: false,\n    strict: true,\n    attrNameProcessors: undefined,\n    attrValueProcessors: undefined,\n    tagNameProcessors: undefined,\n    valueProcessors: undefined,\n    rootName: \"root\",\n    xmldec: {\n        version: \"1.0\",\n        encoding: \"UTF-8\",\n        standalone: true,\n    },\n    doctype: undefined,\n    renderOpts: {\n        pretty: true,\n        indent: \"  \",\n        newline: \"\\n\",\n    },\n    headless: false,\n    chunkSize: 10000,\n    emptyTag: \"\",\n    cdata: false,\n};\n// The xml2js settings for general XML parsing operations.\nconst xml2jsParserSettings = Object.assign({}, xml2jsDefaultOptionsV2);\nxml2jsParserSettings.explicitArray = false;\n// The xml2js settings for general XML building operations.\nconst xml2jsBuilderSettings = Object.assign({}, xml2jsDefaultOptionsV2);\nxml2jsBuilderSettings.explicitArray = false;\nxml2jsBuilderSettings.renderOpts = {\n    pretty: false,\n};\n/**\n * Converts given JSON object to XML string\n * @param obj - JSON object to be converted into XML string\n * @param opts - Options that govern the parsing of given JSON object\n */\nexport function stringifyXML(obj, opts = {}) {\n    var _a;\n    xml2jsBuilderSettings.rootName = opts.rootName;\n    xml2jsBuilderSettings.charkey = (_a = opts.xmlCharKey) !== null && _a !== void 0 ? _a : XML_CHARKEY;\n    const builder = new xml2js.Builder(xml2jsBuilderSettings);\n    return builder.buildObject(obj);\n}\n/**\n * Converts given XML string into JSON\n * @param str - String containing the XML content to be parsed into JSON\n * @param opts - Options that govern the parsing of given xml string\n */\nexport function parseXML(str, opts = {}) {\n    var _a;\n    xml2jsParserSettings.explicitRoot = !!opts.includeRoot;\n    xml2jsParserSettings.charkey = (_a = opts.xmlCharKey) !== null && _a !== void 0 ? _a : XML_CHARKEY;\n    const xmlParser = new xml2js.Parser(xml2jsParserSettings);\n    return new Promise((resolve, reject) => {\n        if (!str) {\n            reject(new Error(\"Document is empty\"));\n        }\n        else {\n            xmlParser.parseString(str, (err, res) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(res);\n                }\n            });\n        }\n    });\n}\n//# sourceMappingURL=xml.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nimport { XML_CHARKEY } from \"../util/serializer.common\";\nimport { MapperType } from \"../serializer\";\nimport { RestError } from \"../restError\";\nimport { parseXML } from \"../util/xml\";\n/**\n * Create a new serialization RequestPolicyCreator that will serialized HTTP request bodies as they\n * pass through the HTTP pipeline.\n */\nexport function deserializationPolicy(deserializationContentTypes, parsingOptions) {\n    return {\n        create: (nextPolicy, options) => {\n            return new DeserializationPolicy(nextPolicy, options, deserializationContentTypes, parsingOptions);\n        },\n    };\n}\nexport const defaultJsonContentTypes = [\"application/json\", \"text/json\"];\nexport const defaultXmlContentTypes = [\"application/xml\", \"application/atom+xml\"];\nexport const DefaultDeserializationOptions = {\n    expectedContentTypes: {\n        json: defaultJsonContentTypes,\n        xml: defaultXmlContentTypes,\n    },\n};\n/**\n * A RequestPolicy that will deserialize HTTP response bodies and headers as they pass through the\n * HTTP pipeline.\n */\nexport class DeserializationPolicy extends BaseRequestPolicy {\n    constructor(nextPolicy, requestPolicyOptions, deserializationContentTypes, parsingOptions = {}) {\n        var _a;\n        super(nextPolicy, requestPolicyOptions);\n        this.jsonContentTypes =\n            (deserializationContentTypes && deserializationContentTypes.json) || defaultJsonContentTypes;\n        this.xmlContentTypes =\n            (deserializationContentTypes && deserializationContentTypes.xml) || defaultXmlContentTypes;\n        this.xmlCharKey = (_a = parsingOptions.xmlCharKey) !== null && _a !== void 0 ? _a : XML_CHARKEY;\n    }\n    async sendRequest(request) {\n        return this._nextPolicy.sendRequest(request).then((response) => deserializeResponseBody(this.jsonContentTypes, this.xmlContentTypes, response, {\n            xmlCharKey: this.xmlCharKey,\n        }));\n    }\n}\nfunction getOperationResponse(parsedResponse) {\n    let result;\n    const request = parsedResponse.request;\n    const operationSpec = request.operationSpec;\n    if (operationSpec) {\n        const operationResponseGetter = request.operationResponseGetter;\n        if (!operationResponseGetter) {\n            result = operationSpec.responses[parsedResponse.status];\n        }\n        else {\n            result = operationResponseGetter(operationSpec, parsedResponse);\n        }\n    }\n    return result;\n}\nfunction shouldDeserializeResponse(parsedResponse) {\n    const shouldDeserialize = parsedResponse.request.shouldDeserialize;\n    let result;\n    if (shouldDeserialize === undefined) {\n        result = true;\n    }\n    else if (typeof shouldDeserialize === \"boolean\") {\n        result = shouldDeserialize;\n    }\n    else {\n        result = shouldDeserialize(parsedResponse);\n    }\n    return result;\n}\n/**\n * Given a particular set of content types to parse as either JSON or XML, consumes the HTTP response to produce the result object defined by the request's {@link OperationSpec}.\n * @param jsonContentTypes - Response content types to parse the body as JSON.\n * @param xmlContentTypes  - Response content types to parse the body as XML.\n * @param response - HTTP Response from the pipeline.\n * @param options  - Options to the serializer, mostly for configuring the XML parser if needed.\n * @returns A parsed {@link HttpOperationResponse} object that can be returned by the {@link ServiceClient}.\n */\nexport function deserializeResponseBody(jsonContentTypes, xmlContentTypes, response, options = {}) {\n    var _a, _b, _c;\n    const updatedOptions = {\n        rootName: (_a = options.rootName) !== null && _a !== void 0 ? _a : \"\",\n        includeRoot: (_b = options.includeRoot) !== null && _b !== void 0 ? _b : false,\n        xmlCharKey: (_c = options.xmlCharKey) !== null && _c !== void 0 ? _c : XML_CHARKEY,\n    };\n    return parse(jsonContentTypes, xmlContentTypes, response, updatedOptions).then((parsedResponse) => {\n        if (!shouldDeserializeResponse(parsedResponse)) {\n            return parsedResponse;\n        }\n        const operationSpec = parsedResponse.request.operationSpec;\n        if (!operationSpec || !operationSpec.responses) {\n            return parsedResponse;\n        }\n        const responseSpec = getOperationResponse(parsedResponse);\n        const { error, shouldReturnResponse } = handleErrorResponse(parsedResponse, operationSpec, responseSpec);\n        if (error) {\n            throw error;\n        }\n        else if (shouldReturnResponse) {\n            return parsedResponse;\n        }\n        // An operation response spec does exist for current status code, so\n        // use it to deserialize the response.\n        if (responseSpec) {\n            if (responseSpec.bodyMapper) {\n                let valueToDeserialize = parsedResponse.parsedBody;\n                if (operationSpec.isXML && responseSpec.bodyMapper.type.name === MapperType.Sequence) {\n                    valueToDeserialize =\n                        typeof valueToDeserialize === \"object\"\n                            ? valueToDeserialize[responseSpec.bodyMapper.xmlElementName]\n                            : [];\n                }\n                try {\n                    parsedResponse.parsedBody = operationSpec.serializer.deserialize(responseSpec.bodyMapper, valueToDeserialize, \"operationRes.parsedBody\", options);\n                }\n                catch (innerError) {\n                    const restError = new RestError(`Error ${innerError} occurred in deserializing the responseBody - ${parsedResponse.bodyAsText}`, undefined, parsedResponse.status, parsedResponse.request, parsedResponse);\n                    throw restError;\n                }\n            }\n            else if (operationSpec.httpMethod === \"HEAD\") {\n                // head methods never have a body, but we return a boolean to indicate presence/absence of the resource\n                parsedResponse.parsedBody = response.status >= 200 && response.status < 300;\n            }\n            if (responseSpec.headersMapper) {\n                parsedResponse.parsedHeaders = operationSpec.serializer.deserialize(responseSpec.headersMapper, parsedResponse.headers.toJson(), \"operationRes.parsedHeaders\", options);\n            }\n        }\n        return parsedResponse;\n    });\n}\nfunction isOperationSpecEmpty(operationSpec) {\n    const expectedStatusCodes = Object.keys(operationSpec.responses);\n    return (expectedStatusCodes.length === 0 ||\n        (expectedStatusCodes.length === 1 && expectedStatusCodes[0] === \"default\"));\n}\nfunction handleErrorResponse(parsedResponse, operationSpec, responseSpec) {\n    var _a;\n    const isSuccessByStatus = 200 <= parsedResponse.status && parsedResponse.status < 300;\n    const isExpectedStatusCode = isOperationSpecEmpty(operationSpec)\n        ? isSuccessByStatus\n        : !!responseSpec;\n    if (isExpectedStatusCode) {\n        if (responseSpec) {\n            if (!responseSpec.isError) {\n                return { error: null, shouldReturnResponse: false };\n            }\n        }\n        else {\n            return { error: null, shouldReturnResponse: false };\n        }\n    }\n    const errorResponseSpec = responseSpec !== null && responseSpec !== void 0 ? responseSpec : operationSpec.responses.default;\n    const streaming = ((_a = parsedResponse.request.streamResponseStatusCodes) === null || _a === void 0 ? void 0 : _a.has(parsedResponse.status)) ||\n        parsedResponse.request.streamResponseBody;\n    const initialErrorMessage = streaming\n        ? `Unexpected status code: ${parsedResponse.status}`\n        : parsedResponse.bodyAsText;\n    const error = new RestError(initialErrorMessage, undefined, parsedResponse.status, parsedResponse.request, parsedResponse);\n    // If the item failed but there's no error spec or default spec to deserialize the error,\n    // we should fail so we just throw the parsed response\n    if (!errorResponseSpec) {\n        throw error;\n    }\n    const defaultBodyMapper = errorResponseSpec.bodyMapper;\n    const defaultHeadersMapper = errorResponseSpec.headersMapper;\n    try {\n        // If error response has a body, try to deserialize it using default body mapper.\n        // Then try to extract error code & message from it\n        if (parsedResponse.parsedBody) {\n            const parsedBody = parsedResponse.parsedBody;\n            let parsedError;\n            if (defaultBodyMapper) {\n                let valueToDeserialize = parsedBody;\n                if (operationSpec.isXML && defaultBodyMapper.type.name === MapperType.Sequence) {\n                    valueToDeserialize =\n                        typeof parsedBody === \"object\" ? parsedBody[defaultBodyMapper.xmlElementName] : [];\n                }\n                parsedError = operationSpec.serializer.deserialize(defaultBodyMapper, valueToDeserialize, \"error.response.parsedBody\");\n            }\n            const internalError = parsedBody.error || parsedError || parsedBody;\n            error.code = internalError.code;\n            if (internalError.message) {\n                error.message = internalError.message;\n            }\n            if (defaultBodyMapper) {\n                error.response.parsedBody = parsedError;\n            }\n        }\n        // If error response has headers, try to deserialize it using default header mapper\n        if (parsedResponse.headers && defaultHeadersMapper) {\n            error.response.parsedHeaders = operationSpec.serializer.deserialize(defaultHeadersMapper, parsedResponse.headers.toJson(), \"operationRes.parsedHeaders\");\n        }\n    }\n    catch (defaultError) {\n        error.message = `Error \"${defaultError.message}\" occurred in deserializing the responseBody - \"${parsedResponse.bodyAsText}\" for the default response.`;\n    }\n    return { error, shouldReturnResponse: false };\n}\nfunction parse(jsonContentTypes, xmlContentTypes, operationResponse, opts) {\n    var _a;\n    const errorHandler = (err) => {\n        const msg = `Error \"${err}\" occurred while parsing the response body - ${operationResponse.bodyAsText}.`;\n        const errCode = err.code || RestError.PARSE_ERROR;\n        const e = new RestError(msg, errCode, operationResponse.status, operationResponse.request, operationResponse);\n        return Promise.reject(e);\n    };\n    const streaming = ((_a = operationResponse.request.streamResponseStatusCodes) === null || _a === void 0 ? void 0 : _a.has(operationResponse.status)) ||\n        operationResponse.request.streamResponseBody;\n    if (!streaming && operationResponse.bodyAsText) {\n        const text = operationResponse.bodyAsText;\n        const contentType = operationResponse.headers.get(\"Content-Type\") || \"\";\n        const contentComponents = !contentType\n            ? []\n            : contentType.split(\";\").map((component) => component.toLowerCase());\n        if (contentComponents.length === 0 ||\n            contentComponents.some((component) => jsonContentTypes.indexOf(component) !== -1)) {\n            return new Promise((resolve) => {\n                operationResponse.parsedBody = JSON.parse(text);\n                resolve(operationResponse);\n            }).catch(errorHandler);\n        }\n        else if (contentComponents.some((component) => xmlContentTypes.indexOf(component) !== -1)) {\n            return parseXML(text, opts)\n                .then((body) => {\n                operationResponse.parsedBody = body;\n                return operationResponse;\n            })\n                .catch(errorHandler);\n        }\n    }\n    return Promise.resolve(operationResponse);\n}\n//# sourceMappingURL=deserializationPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\n/**\n * By default, HTTP connections are maintained for future requests.\n */\nexport const DefaultKeepAliveOptions = {\n    enable: true,\n};\n/**\n * Creates a policy that controls whether HTTP connections are maintained on future requests.\n * @param keepAliveOptions - Keep alive options. By default, HTTP connections are maintained for future requests.\n * @returns An instance of the {@link KeepAlivePolicy}\n */\nexport function keepAlivePolicy(keepAliveOptions) {\n    return {\n        create: (nextPolicy, options) => {\n            return new KeepAlivePolicy(nextPolicy, options, keepAliveOptions || DefaultKeepAliveOptions);\n        },\n    };\n}\n/**\n * KeepAlivePolicy is a policy used to control keep alive settings for every request.\n */\nexport class KeepAlivePolicy extends BaseRequestPolicy {\n    /**\n     * Creates an instance of KeepAlivePolicy.\n     *\n     * @param nextPolicy -\n     * @param options -\n     * @param keepAliveOptions -\n     */\n    constructor(nextPolicy, options, keepAliveOptions) {\n        super(nextPolicy, options);\n        this.keepAliveOptions = keepAliveOptions;\n    }\n    /**\n     * Sends out request.\n     *\n     * @param request -\n     * @returns\n     */\n    async sendRequest(request) {\n        request.keepAlive = this.keepAliveOptions.enable;\n        return this._nextPolicy.sendRequest(request);\n    }\n}\n//# sourceMappingURL=keepAlivePolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nimport { URLBuilder } from \"../url\";\n/**\n * Methods that are allowed to follow redirects 301 and 302\n */\nconst allowedRedirect = [\"GET\", \"HEAD\"];\nexport const DefaultRedirectOptions = {\n    handleRedirects: true,\n    maxRetries: 20,\n};\n/**\n * Creates a redirect policy, which sends a repeats the request to a new destination if a response arrives with a \"location\" header, and a status code between 300 and 307.\n * @param maximumRetries - Maximum number of redirects to follow.\n * @returns An instance of the {@link RedirectPolicy}\n */\nexport function redirectPolicy(maximumRetries = 20) {\n    return {\n        create: (nextPolicy, options) => {\n            return new RedirectPolicy(nextPolicy, options, maximumRetries);\n        },\n    };\n}\n/**\n * Resends the request to a new destination if a response arrives with a \"location\" header, and a status code between 300 and 307.\n */\nexport class RedirectPolicy extends BaseRequestPolicy {\n    constructor(nextPolicy, options, maxRetries = 20) {\n        super(nextPolicy, options);\n        this.maxRetries = maxRetries;\n    }\n    sendRequest(request) {\n        return this._nextPolicy\n            .sendRequest(request)\n            .then((response) => handleRedirect(this, response, 0));\n    }\n}\nfunction handleRedirect(policy, response, currentRetries) {\n    const { request, status } = response;\n    const locationHeader = response.headers.get(\"location\");\n    if (locationHeader &&\n        (status === 300 ||\n            (status === 301 && allowedRedirect.includes(request.method)) ||\n            (status === 302 && allowedRedirect.includes(request.method)) ||\n            (status === 303 && request.method === \"POST\") ||\n            status === 307) &&\n        (!policy.maxRetries || currentRetries < policy.maxRetries)) {\n        const builder = URLBuilder.parse(request.url);\n        builder.setPath(locationHeader);\n        request.url = builder.toString();\n        // POST request with Status code 303 should be converted into a\n        // redirected GET request if the redirect url is present in the location header\n        if (status === 303) {\n            request.method = \"GET\";\n            delete request.body;\n        }\n        return policy._nextPolicy\n            .sendRequest(request)\n            .then((res) => handleRedirect(policy, res, currentRetries + 1));\n    }\n    return Promise.resolve(response);\n}\n//# sourceMappingURL=redirectPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nexport const DEFAULT_CLIENT_RETRY_COUNT = 3;\n// intervals are in ms\nexport const DEFAULT_CLIENT_RETRY_INTERVAL = 1000 * 30;\nexport const DEFAULT_CLIENT_MAX_RETRY_INTERVAL = 1000 * 90;\nexport const DEFAULT_CLIENT_MIN_RETRY_INTERVAL = 1000 * 3;\nexport function isNumber(n) {\n    return typeof n === \"number\";\n}\n/**\n * @internal\n * Determines if the operation should be retried.\n *\n * @param retryLimit - Specifies the max number of retries.\n * @param predicate - Initial chekck on whether to retry based on given responses or errors\n * @param retryData -  The retry data.\n * @returns True if the operation qualifies for a retry; false otherwise.\n */\nexport function shouldRetry(retryLimit, predicate, retryData, response, error) {\n    if (!predicate(response, error)) {\n        return false;\n    }\n    return retryData.retryCount < retryLimit;\n}\n/**\n * @internal\n * Updates the retry data for the next attempt.\n *\n * @param retryOptions - specifies retry interval, and its lower bound and upper bound.\n * @param retryData -  The retry data.\n * @param err - The operation\"s error, if any.\n */\nexport function updateRetryData(retryOptions, retryData = { retryCount: 0, retryInterval: 0 }, err) {\n    if (err) {\n        if (retryData.error) {\n            err.innerError = retryData.error;\n        }\n        retryData.error = err;\n    }\n    // Adjust retry count\n    retryData.retryCount++;\n    // Adjust retry interval\n    let incrementDelta = Math.pow(2, retryData.retryCount - 1) - 1;\n    const boundedRandDelta = retryOptions.retryInterval * 0.8 +\n        Math.floor(Math.random() * (retryOptions.retryInterval * 0.4));\n    incrementDelta *= boundedRandDelta;\n    retryData.retryInterval = Math.min(retryOptions.minRetryInterval + incrementDelta, retryOptions.maxRetryInterval);\n    return retryData;\n}\n//# sourceMappingURL=exponentialBackoffStrategy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * A set of constants used internally when processing requests.\n */\nexport const Constants = {\n    /**\n     * The core-http version\n     */\n    coreHttpVersion: \"2.3.0\",\n    /**\n     * Specifies HTTP.\n     */\n    HTTP: \"http:\",\n    /**\n     * Specifies HTTPS.\n     */\n    HTTPS: \"https:\",\n    /**\n     * Specifies HTTP Proxy.\n     */\n    HTTP_PROXY: \"HTTP_PROXY\",\n    /**\n     * Specifies HTTPS Proxy.\n     */\n    HTTPS_PROXY: \"HTTPS_PROXY\",\n    /**\n     * Specifies NO Proxy.\n     */\n    NO_PROXY: \"NO_PROXY\",\n    /**\n     * Specifies ALL Proxy.\n     */\n    ALL_PROXY: \"ALL_PROXY\",\n    HttpConstants: {\n        /**\n         * Http Verbs\n         */\n        HttpVerbs: {\n            PUT: \"PUT\",\n            GET: \"GET\",\n            DELETE: \"DELETE\",\n            POST: \"POST\",\n            MERGE: \"MERGE\",\n            HEAD: \"HEAD\",\n            PATCH: \"PATCH\",\n        },\n        StatusCodes: {\n            TooManyRequests: 429,\n            ServiceUnavailable: 503,\n        },\n    },\n    /**\n     * Defines constants for use with HTTP headers.\n     */\n    HeaderConstants: {\n        /**\n         * The Authorization header.\n         */\n        AUTHORIZATION: \"authorization\",\n        AUTHORIZATION_SCHEME: \"Bearer\",\n        /**\n         * The Retry-After response-header field can be used with a 503 (Service\n         * Unavailable) or 349 (Too Many Requests) responses to indicate how long\n         * the service is expected to be unavailable to the requesting client.\n         */\n        RETRY_AFTER: \"Retry-After\",\n        /**\n         * The UserAgent header.\n         */\n        USER_AGENT: \"User-Agent\",\n    },\n};\n//# sourceMappingURL=constants.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { AbortError } from \"@azure/abort-controller\";\nimport { isDefined } from \"./typeGuards\";\nconst StandardAbortMessage = \"The operation was aborted.\";\n/**\n * A wrapper for setTimeout that resolves a promise after timeInMs milliseconds.\n * @param timeInMs - The number of milliseconds to be delayed.\n * @param options - The options for delay - currently abort options\n * @returns Promise that is resolved after timeInMs\n */\nexport function delay(timeInMs, options) {\n    return new Promise((resolve, reject) => {\n        let timer = undefined;\n        let onAborted = undefined;\n        const rejectOnAbort = () => {\n            var _a;\n            return reject(new AbortError((_a = options === null || options === void 0 ? void 0 : options.abortErrorMsg) !== null && _a !== void 0 ? _a : StandardAbortMessage));\n        };\n        const removeListeners = () => {\n            if ((options === null || options === void 0 ? void 0 : options.abortSignal) && onAborted) {\n                options.abortSignal.removeEventListener(\"abort\", onAborted);\n            }\n        };\n        onAborted = () => {\n            if (isDefined(timer)) {\n                clearTimeout(timer);\n            }\n            removeListeners();\n            return rejectOnAbort();\n        };\n        if ((options === null || options === void 0 ? void 0 : options.abortSignal) && options.abortSignal.aborted) {\n            return rejectOnAbort();\n        }\n        timer = setTimeout(() => {\n            removeListeners();\n            resolve();\n        }, timeInMs);\n        if (options === null || options === void 0 ? void 0 : options.abortSignal) {\n            options.abortSignal.addEventListener(\"abort\", onAborted);\n        }\n    });\n}\n//# sourceMappingURL=delay.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Helper TypeGuard that checks if something is defined or not.\n * @param thing - Anything\n */\nexport function isDefined(thing) {\n    return typeof thing !== \"undefined\" && thing !== null;\n}\n/**\n * Helper TypeGuard that checks if the input is an object with the specified properties.\n * @param thing - Anything.\n * @param properties - The name of the properties that should appear in the object.\n */\nexport function isObjectWithProperties(thing, properties) {\n    if (!isDefined(thing) || typeof thing !== \"object\") {\n        return false;\n    }\n    for (const property of properties) {\n        if (!objectHasProperty(thing, property)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Helper TypeGuard that checks if the input is an object with the specified property.\n * @param thing - Any object.\n * @param property - The name of the property that should appear in the object.\n */\nexport function objectHasProperty(thing, property) {\n    return (isDefined(thing) && typeof thing === \"object\" && property in thing);\n}\n//# sourceMappingURL=typeGuards.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nimport { DEFAULT_CLIENT_MAX_RETRY_INTERVAL, DEFAULT_CLIENT_RETRY_COUNT, DEFAULT_CLIENT_RETRY_INTERVAL, isNumber, shouldRetry, updateRetryData, } from \"../util/exponentialBackoffStrategy\";\nimport { Constants } from \"../util/constants\";\nimport { RestError } from \"../restError\";\nimport { delay } from \"@azure/core-util\";\nimport { logger } from \"../log\";\n/**\n * Policy that retries the request as many times as configured for as long as the max retry time interval specified, each retry waiting longer to begin than the last time.\n * @param retryCount - Maximum number of retries.\n * @param retryInterval - Base time between retries.\n * @param maxRetryInterval - Maximum time to wait between retries.\n */\nexport function exponentialRetryPolicy(retryCount, retryInterval, maxRetryInterval) {\n    return {\n        create: (nextPolicy, options) => {\n            return new ExponentialRetryPolicy(nextPolicy, options, retryCount, retryInterval, maxRetryInterval);\n        },\n    };\n}\n/**\n * Describes the Retry Mode type. Currently supporting only Exponential.\n */\nexport var RetryMode;\n(function (RetryMode) {\n    /**\n     * Currently supported retry mode.\n     * Each time a retry happens, it will take exponentially more time than the last time.\n     */\n    RetryMode[RetryMode[\"Exponential\"] = 0] = \"Exponential\";\n})(RetryMode || (RetryMode = {}));\nexport const DefaultRetryOptions = {\n    maxRetries: DEFAULT_CLIENT_RETRY_COUNT,\n    retryDelayInMs: DEFAULT_CLIENT_RETRY_INTERVAL,\n    maxRetryDelayInMs: DEFAULT_CLIENT_MAX_RETRY_INTERVAL,\n};\n/**\n * Instantiates a new \"ExponentialRetryPolicyFilter\" instance.\n */\nexport class ExponentialRetryPolicy extends BaseRequestPolicy {\n    /**\n     * @param nextPolicy - The next RequestPolicy in the pipeline chain.\n     * @param options - The options for this RequestPolicy.\n     * @param retryCount - The client retry count.\n     * @param retryInterval - The client retry interval, in milliseconds.\n     * @param minRetryInterval - The minimum retry interval, in milliseconds.\n     * @param maxRetryInterval - The maximum retry interval, in milliseconds.\n     */\n    constructor(nextPolicy, options, retryCount, retryInterval, maxRetryInterval) {\n        super(nextPolicy, options);\n        this.retryCount = isNumber(retryCount) ? retryCount : DEFAULT_CLIENT_RETRY_COUNT;\n        this.retryInterval = isNumber(retryInterval) ? retryInterval : DEFAULT_CLIENT_RETRY_INTERVAL;\n        this.maxRetryInterval = isNumber(maxRetryInterval)\n            ? maxRetryInterval\n            : DEFAULT_CLIENT_MAX_RETRY_INTERVAL;\n    }\n    sendRequest(request) {\n        return this._nextPolicy\n            .sendRequest(request.clone())\n            .then((response) => retry(this, request, response))\n            .catch((error) => retry(this, request, error.response, undefined, error));\n    }\n}\nasync function retry(policy, request, response, retryData, requestError) {\n    function shouldPolicyRetry(responseParam) {\n        const statusCode = responseParam === null || responseParam === void 0 ? void 0 : responseParam.status;\n        if (statusCode === 503 && (response === null || response === void 0 ? void 0 : response.headers.get(Constants.HeaderConstants.RETRY_AFTER))) {\n            return false;\n        }\n        if (statusCode === undefined ||\n            (statusCode < 500 && statusCode !== 408) ||\n            statusCode === 501 ||\n            statusCode === 505) {\n            return false;\n        }\n        return true;\n    }\n    retryData = updateRetryData({\n        retryInterval: policy.retryInterval,\n        minRetryInterval: 0,\n        maxRetryInterval: policy.maxRetryInterval,\n    }, retryData, requestError);\n    const isAborted = request.abortSignal && request.abortSignal.aborted;\n    if (!isAborted && shouldRetry(policy.retryCount, shouldPolicyRetry, retryData, response)) {\n        logger.info(`Retrying request in ${retryData.retryInterval}`);\n        try {\n            await delay(retryData.retryInterval);\n            const res = await policy._nextPolicy.sendRequest(request.clone());\n            return retry(policy, request, res, retryData);\n        }\n        catch (err) {\n            return retry(policy, request, response, retryData, err);\n        }\n    }\n    else if (isAborted || requestError || !response) {\n        // If the operation failed in the end, return all errors instead of just the last one\n        const err = retryData.error ||\n            new RestError(\"Failed to send the request.\", RestError.REQUEST_SEND_ERROR, response && response.status, response && response.request, response);\n        throw err;\n    }\n    else {\n        return response;\n    }\n}\n//# sourceMappingURL=exponentialRetryPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nimport { Sanitizer } from \"../util/sanitizer\";\nimport { logger as coreLogger } from \"../log\";\n/**\n * Creates a policy that logs information about the outgoing request and the incoming responses.\n * @param loggingOptions - Logging options.\n * @returns An instance of the {@link LogPolicy}\n */\nexport function logPolicy(loggingOptions = {}) {\n    return {\n        create: (nextPolicy, options) => {\n            return new LogPolicy(nextPolicy, options, loggingOptions);\n        },\n    };\n}\n/**\n * A policy that logs information about the outgoing request and the incoming responses.\n */\nexport class LogPolicy extends BaseRequestPolicy {\n    constructor(nextPolicy, options, { logger = coreLogger.info, allowedHeaderNames = [], allowedQueryParameters = [], } = {}) {\n        super(nextPolicy, options);\n        this.logger = logger;\n        this.sanitizer = new Sanitizer({ allowedHeaderNames, allowedQueryParameters });\n    }\n    /**\n     * Header names whose values will be logged when logging is enabled. Defaults to\n     * Date, traceparent, x-ms-client-request-id, and x-ms-request id.  Any headers\n     * specified in this field will be added to that list.  Any other values will\n     * be written to logs as \"REDACTED\".\n     * @deprecated Pass these into the constructor instead.\n     */\n    get allowedHeaderNames() {\n        return this.sanitizer.allowedHeaderNames;\n    }\n    /**\n     * Header names whose values will be logged when logging is enabled. Defaults to\n     * Date, traceparent, x-ms-client-request-id, and x-ms-request id.  Any headers\n     * specified in this field will be added to that list.  Any other values will\n     * be written to logs as \"REDACTED\".\n     * @deprecated Pass these into the constructor instead.\n     */\n    set allowedHeaderNames(allowedHeaderNames) {\n        this.sanitizer.allowedHeaderNames = allowedHeaderNames;\n    }\n    /**\n     * Query string names whose values will be logged when logging is enabled. By default no\n     * query string values are logged.\n     * @deprecated Pass these into the constructor instead.\n     */\n    get allowedQueryParameters() {\n        return this.sanitizer.allowedQueryParameters;\n    }\n    /**\n     * Query string names whose values will be logged when logging is enabled. By default no\n     * query string values are logged.\n     * @deprecated Pass these into the constructor instead.\n     */\n    set allowedQueryParameters(allowedQueryParameters) {\n        this.sanitizer.allowedQueryParameters = allowedQueryParameters;\n    }\n    sendRequest(request) {\n        if (!this.logger.enabled)\n            return this._nextPolicy.sendRequest(request);\n        this.logRequest(request);\n        return this._nextPolicy.sendRequest(request).then((response) => this.logResponse(response));\n    }\n    logRequest(request) {\n        this.logger(`Request: ${this.sanitizer.sanitize(request)}`);\n    }\n    logResponse(response) {\n        this.logger(`Response status code: ${response.status}`);\n        this.logger(`Headers: ${this.sanitizer.sanitize(response.headers)}`);\n        return response;\n    }\n}\n//# sourceMappingURL=logPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Get the path to this parameter's value as a dotted string (a.b.c).\n * @param parameter - The parameter to get the path string for.\n * @returns The path to this parameter's value as a dotted string.\n */\nexport function getPathStringFromParameter(parameter) {\n    return getPathStringFromParameterPath(parameter.parameterPath, parameter.mapper);\n}\nexport function getPathStringFromParameterPath(parameterPath, mapper) {\n    let result;\n    if (typeof parameterPath === \"string\") {\n        result = parameterPath;\n    }\n    else if (Array.isArray(parameterPath)) {\n        result = parameterPath.join(\".\");\n    }\n    else {\n        result = mapper.serializedName;\n    }\n    return result;\n}\n//# sourceMappingURL=operationParameter.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Tests an object to determine whether it implements TokenCredential.\n *\n * @param credential - The assumed TokenCredential to be tested.\n */\nexport function isTokenCredential(credential) {\n    // Check for an object with a 'getToken' function and possibly with\n    // a 'signRequest' function.  We do this check to make sure that\n    // a ServiceClientCredentials implementor (like TokenClientCredentials\n    // in ms-rest-nodeauth) doesn't get mistaken for a TokenCredential if\n    // it doesn't actually implement TokenCredential also.\n    const castCredential = credential;\n    return (castCredential &&\n        typeof castCredential.getToken === \"function\" &&\n        (castCredential.signRequest === undefined || castCredential.getToken.length > 0));\n}\n//# sourceMappingURL=tokenCredential.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport * as os from \"os\";\nimport { Constants } from \"../util/constants\";\nexport function getDefaultUserAgentKey() {\n    return Constants.HeaderConstants.USER_AGENT;\n}\nexport function getPlatformSpecificData() {\n    const runtimeInfo = {\n        key: \"Node\",\n        value: process.version,\n    };\n    const osInfo = {\n        key: \"OS\",\n        value: `(${os.arch()}-${os.type()}-${os.release()})`,\n    };\n    return [runtimeInfo, osInfo];\n}\n//# sourceMappingURL=msRestUserAgentPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nimport { getDefaultUserAgentKey, getPlatformSpecificData } from \"./msRestUserAgentPolicy\";\nimport { Constants } from \"../util/constants\";\nimport { HttpHeaders } from \"../httpHeaders\";\nfunction getRuntimeInfo() {\n    const msRestRuntime = {\n        key: \"core-http\",\n        value: Constants.coreHttpVersion,\n    };\n    return [msRestRuntime];\n}\nfunction getUserAgentString(telemetryInfo, keySeparator = \" \", valueSeparator = \"/\") {\n    return telemetryInfo\n        .map((info) => {\n        const value = info.value ? `${valueSeparator}${info.value}` : \"\";\n        return `${info.key}${value}`;\n    })\n        .join(keySeparator);\n}\nexport const getDefaultUserAgentHeaderName = getDefaultUserAgentKey;\n/**\n * The default approach to generate user agents.\n * Uses static information from this package, plus system information available from the runtime.\n */\nexport function getDefaultUserAgentValue() {\n    const runtimeInfo = getRuntimeInfo();\n    const platformSpecificData = getPlatformSpecificData();\n    const userAgent = getUserAgentString(runtimeInfo.concat(platformSpecificData));\n    return userAgent;\n}\n/**\n * Returns a policy that adds the user agent header to outgoing requests based on the given {@link TelemetryInfo}.\n * @param userAgentData - Telemetry information.\n * @returns A new {@link UserAgentPolicy}.\n */\nexport function userAgentPolicy(userAgentData) {\n    const key = !userAgentData || userAgentData.key === undefined || userAgentData.key === null\n        ? getDefaultUserAgentKey()\n        : userAgentData.key;\n    const value = !userAgentData || userAgentData.value === undefined || userAgentData.value === null\n        ? getDefaultUserAgentValue()\n        : userAgentData.value;\n    return {\n        create: (nextPolicy, options) => {\n            return new UserAgentPolicy(nextPolicy, options, key, value);\n        },\n    };\n}\n/**\n * A policy that adds the user agent header to outgoing requests based on the given {@link TelemetryInfo}.\n */\nexport class UserAgentPolicy extends BaseRequestPolicy {\n    constructor(_nextPolicy, _options, headerKey, headerValue) {\n        super(_nextPolicy, _options);\n        this._nextPolicy = _nextPolicy;\n        this._options = _options;\n        this.headerKey = headerKey;\n        this.headerValue = headerValue;\n    }\n    sendRequest(request) {\n        this.addUserAgentHeader(request);\n        return this._nextPolicy.sendRequest(request);\n    }\n    /**\n     * Adds the user agent header to the outgoing request.\n     */\n    addUserAgentHeader(request) {\n        if (!request.headers) {\n            request.headers = new HttpHeaders();\n        }\n        if (!request.headers.get(this.headerKey) && this.headerValue) {\n            request.headers.set(this.headerKey, this.headerValue);\n        }\n    }\n}\n//# sourceMappingURL=userAgentPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * The format that will be used to join an array of values together for a query parameter value.\n */\nexport var QueryCollectionFormat;\n(function (QueryCollectionFormat) {\n    /**\n     * CSV: Each pair of segments joined by a single comma.\n     */\n    QueryCollectionFormat[\"Csv\"] = \",\";\n    /**\n     * SSV: Each pair of segments joined by a single space character.\n     */\n    QueryCollectionFormat[\"Ssv\"] = \" \";\n    /**\n     * TSV: Each pair of segments joined by a single tab character.\n     */\n    QueryCollectionFormat[\"Tsv\"] = \"\\t\";\n    /**\n     * Pipes: Each pair of segments joined by a single pipe character.\n     */\n    QueryCollectionFormat[\"Pipes\"] = \"|\";\n    /**\n     * Denotes this is an array of values that should be passed to the server in multiple key/value pairs, e.g. `?queryParam=value1&queryParam=value2`\n     */\n    QueryCollectionFormat[\"Multi\"] = \"Multi\";\n})(QueryCollectionFormat || (QueryCollectionFormat = {}));\n//# sourceMappingURL=queryCollectionFormat.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"../policies/requestPolicy\";\nimport { Constants } from \"../util/constants\";\nimport { delay } from \"@azure/core-util\";\n// Default options for the cycler if none are provided\nexport const DEFAULT_CYCLER_OPTIONS = {\n    forcedRefreshWindowInMs: 1000,\n    retryIntervalInMs: 3000,\n    refreshWindowInMs: 1000 * 60 * 2, // Start refreshing 2m before expiry\n};\n/**\n * Converts an an unreliable access token getter (which may resolve with null)\n * into an AccessTokenGetter by retrying the unreliable getter in a regular\n * interval.\n *\n * @param getAccessToken - a function that produces a promise of an access\n * token that may fail by returning null\n * @param retryIntervalInMs - the time (in milliseconds) to wait between retry\n * attempts\n * @param timeoutInMs - the timestamp after which the refresh attempt will fail,\n * throwing an exception\n * @returns - a promise that, if it resolves, will resolve with an access token\n */\nasync function beginRefresh(getAccessToken, retryIntervalInMs, timeoutInMs) {\n    // This wrapper handles exceptions gracefully as long as we haven't exceeded\n    // the timeout.\n    async function tryGetAccessToken() {\n        if (Date.now() < timeoutInMs) {\n            try {\n                return await getAccessToken();\n            }\n            catch (_a) {\n                return null;\n            }\n        }\n        else {\n            const finalToken = await getAccessToken();\n            // Timeout is up, so throw if it's still null\n            if (finalToken === null) {\n                throw new Error(\"Failed to refresh access token.\");\n            }\n            return finalToken;\n        }\n    }\n    let token = await tryGetAccessToken();\n    while (token === null) {\n        await delay(retryIntervalInMs);\n        token = await tryGetAccessToken();\n    }\n    return token;\n}\n/**\n * Creates a token cycler from a credential, scopes, and optional settings.\n *\n * A token cycler represents a way to reliably retrieve a valid access token\n * from a TokenCredential. It will handle initializing the token, refreshing it\n * when it nears expiration, and synchronizes refresh attempts to avoid\n * concurrency hazards.\n *\n * @param credential - the underlying TokenCredential that provides the access\n * token\n * @param scopes - the scopes to request authorization for\n * @param tokenCyclerOptions - optionally override default settings for the cycler\n *\n * @returns - a function that reliably produces a valid access token\n */\nfunction createTokenCycler(credential, scopes, tokenCyclerOptions) {\n    let refreshWorker = null;\n    let token = null;\n    const options = Object.assign(Object.assign({}, DEFAULT_CYCLER_OPTIONS), tokenCyclerOptions);\n    /**\n     * This little holder defines several predicates that we use to construct\n     * the rules of refreshing the token.\n     */\n    const cycler = {\n        /**\n         * Produces true if a refresh job is currently in progress.\n         */\n        get isRefreshing() {\n            return refreshWorker !== null;\n        },\n        /**\n         * Produces true if the cycler SHOULD refresh (we are within the refresh\n         * window and not already refreshing)\n         */\n        get shouldRefresh() {\n            var _a;\n            return (!cycler.isRefreshing &&\n                ((_a = token === null || token === void 0 ? void 0 : token.expiresOnTimestamp) !== null && _a !== void 0 ? _a : 0) - options.refreshWindowInMs < Date.now());\n        },\n        /**\n         * Produces true if the cycler MUST refresh (null or nearly-expired\n         * token).\n         */\n        get mustRefresh() {\n            return (token === null || token.expiresOnTimestamp - options.forcedRefreshWindowInMs < Date.now());\n        },\n    };\n    /**\n     * Starts a refresh job or returns the existing job if one is already\n     * running.\n     */\n    function refresh(getTokenOptions) {\n        var _a;\n        if (!cycler.isRefreshing) {\n            // We bind `scopes` here to avoid passing it around a lot\n            const tryGetAccessToken = () => credential.getToken(scopes, getTokenOptions);\n            // Take advantage of promise chaining to insert an assignment to `token`\n            // before the refresh can be considered done.\n            refreshWorker = beginRefresh(tryGetAccessToken, options.retryIntervalInMs, \n            // If we don't have a token, then we should timeout immediately\n            (_a = token === null || token === void 0 ? void 0 : token.expiresOnTimestamp) !== null && _a !== void 0 ? _a : Date.now())\n                .then((_token) => {\n                refreshWorker = null;\n                token = _token;\n                return token;\n            })\n                .catch((reason) => {\n                // We also should reset the refresher if we enter a failed state.  All\n                // existing awaiters will throw, but subsequent requests will start a\n                // new retry chain.\n                refreshWorker = null;\n                token = null;\n                throw reason;\n            });\n        }\n        return refreshWorker;\n    }\n    return async (tokenOptions) => {\n        //\n        // Simple rules:\n        // - If we MUST refresh, then return the refresh task, blocking\n        //   the pipeline until a token is available.\n        // - If we SHOULD refresh, then run refresh but don't return it\n        //   (we can still use the cached token).\n        // - Return the token, since it's fine if we didn't return in\n        //   step 1.\n        //\n        if (cycler.mustRefresh)\n            return refresh(tokenOptions);\n        if (cycler.shouldRefresh) {\n            refresh(tokenOptions);\n        }\n        return token;\n    };\n}\n// #endregion\n/**\n * Creates a new factory for a RequestPolicy that applies a bearer token to\n * the requests' `Authorization` headers.\n *\n * @param credential - The TokenCredential implementation that can supply the bearer token.\n * @param scopes - The scopes for which the bearer token applies.\n */\nexport function bearerTokenAuthenticationPolicy(credential, scopes) {\n    // This simple function encapsulates the entire process of reliably retrieving the token\n    const getToken = createTokenCycler(credential, scopes /* , options */);\n    class BearerTokenAuthenticationPolicy extends BaseRequestPolicy {\n        constructor(nextPolicy, options) {\n            super(nextPolicy, options);\n        }\n        async sendRequest(webResource) {\n            if (!webResource.url.toLowerCase().startsWith(\"https://\")) {\n                throw new Error(\"Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.\");\n            }\n            const { token } = await getToken({\n                abortSignal: webResource.abortSignal,\n                tracingOptions: {\n                    tracingContext: webResource.tracingContext,\n                },\n            });\n            webResource.headers.set(Constants.HeaderConstants.AUTHORIZATION, `Bearer ${token}`);\n            return this._nextPolicy.sendRequest(webResource);\n        }\n    }\n    return {\n        create: (nextPolicy, options) => {\n            return new BearerTokenAuthenticationPolicy(nextPolicy, options);\n        },\n    };\n}\n//# sourceMappingURL=bearerTokenAuthenticationPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\n/**\n * Returns a request policy factory that can be used to create an instance of\n * {@link DisableResponseDecompressionPolicy}.\n */\nexport function disableResponseDecompressionPolicy() {\n    return {\n        create: (nextPolicy, options) => {\n            return new DisableResponseDecompressionPolicy(nextPolicy, options);\n        },\n    };\n}\n/**\n * A policy to disable response decompression according to Accept-Encoding header\n * https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding\n */\nexport class DisableResponseDecompressionPolicy extends BaseRequestPolicy {\n    /**\n     * Creates an instance of DisableResponseDecompressionPolicy.\n     *\n     * @param nextPolicy -\n     * @param options -\n     */\n    // The parent constructor is protected.\n    /* eslint-disable-next-line @typescript-eslint/no-useless-constructor */\n    constructor(nextPolicy, options) {\n        super(nextPolicy, options);\n    }\n    /**\n     * Sends out request.\n     *\n     * @param request -\n     * @returns\n     */\n    async sendRequest(request) {\n        request.decompressResponse = false;\n        return this._nextPolicy.sendRequest(request);\n    }\n}\n//# sourceMappingURL=disableResponseDecompressionPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\n/**\n * Creates a policy that assigns a unique request id to outgoing requests.\n * @param requestIdHeaderName - The name of the header to use when assigning the unique id to the request.\n */\nexport function generateClientRequestIdPolicy(requestIdHeaderName = \"x-ms-client-request-id\") {\n    return {\n        create: (nextPolicy, options) => {\n            return new GenerateClientRequestIdPolicy(nextPolicy, options, requestIdHeaderName);\n        },\n    };\n}\nexport class GenerateClientRequestIdPolicy extends BaseRequestPolicy {\n    constructor(nextPolicy, options, _requestIdHeaderName) {\n        super(nextPolicy, options);\n        this._requestIdHeaderName = _requestIdHeaderName;\n    }\n    sendRequest(request) {\n        if (!request.headers.contains(this._requestIdHeaderName)) {\n            request.headers.set(this._requestIdHeaderName, request.requestId);\n        }\n        return this._nextPolicy.sendRequest(request);\n    }\n}\n//# sourceMappingURL=generateClientRequestIdPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { DefaultHttpClient } from \"./defaultHttpClient\";\nlet cachedHttpClient;\nexport function getCachedDefaultHttpClient() {\n    if (!cachedHttpClient) {\n        cachedHttpClient = new DefaultHttpClient();\n    }\n    return cachedHttpClient;\n}\n//# sourceMappingURL=httpClientCache.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n// BaseRequestPolicy has a protected constructor.\n/* eslint-disable @typescript-eslint/no-useless-constructor */\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nexport function ndJsonPolicy() {\n    return {\n        create: (nextPolicy, options) => {\n            return new NdJsonPolicy(nextPolicy, options);\n        },\n    };\n}\n/**\n * NdJsonPolicy that formats a JSON array as newline-delimited JSON\n */\nclass NdJsonPolicy extends BaseRequestPolicy {\n    /**\n     * Creates an instance of KeepAlivePolicy.\n     */\n    constructor(nextPolicy, options) {\n        super(nextPolicy, options);\n    }\n    /**\n     * Sends a request.\n     */\n    async sendRequest(request) {\n        // There currently isn't a good way to bypass the serializer\n        if (typeof request.body === \"string\" && request.body.startsWith(\"[\")) {\n            const body = JSON.parse(request.body);\n            if (Array.isArray(body)) {\n                request.body = body.map((item) => JSON.stringify(item) + \"\\n\").join(\"\");\n            }\n        }\n        return this._nextPolicy.sendRequest(request);\n    }\n}\n//# sourceMappingURL=ndJsonPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nimport { Constants } from \"../util/constants\";\nimport { URLBuilder } from \"../url\";\nimport { getEnvironmentValue } from \"../util/utils\";\n/**\n * Stores the patterns specified in NO_PROXY environment variable.\n * @internal\n */\nexport const globalNoProxyList = [];\nlet noProxyListLoaded = false;\n/** A cache of whether a host should bypass the proxy. */\nconst globalBypassedMap = new Map();\nfunction loadEnvironmentProxyValue() {\n    if (!process) {\n        return undefined;\n    }\n    const httpsProxy = getEnvironmentValue(Constants.HTTPS_PROXY);\n    const allProxy = getEnvironmentValue(Constants.ALL_PROXY);\n    const httpProxy = getEnvironmentValue(Constants.HTTP_PROXY);\n    return httpsProxy || allProxy || httpProxy;\n}\n/**\n * Check whether the host of a given `uri` matches any pattern in the no proxy list.\n * If there's a match, any request sent to the same host shouldn't have the proxy settings set.\n * This implementation is a port of https://github.com/Azure/azure-sdk-for-net/blob/8cca811371159e527159c7eb65602477898683e2/sdk/core/Azure.Core/src/Pipeline/Internal/HttpEnvironmentProxy.cs#L210\n */\nfunction isBypassed(uri, noProxyList, bypassedMap) {\n    if (noProxyList.length === 0) {\n        return false;\n    }\n    const host = URLBuilder.parse(uri).getHost();\n    if (bypassedMap === null || bypassedMap === void 0 ? void 0 : bypassedMap.has(host)) {\n        return bypassedMap.get(host);\n    }\n    let isBypassedFlag = false;\n    for (const pattern of noProxyList) {\n        if (pattern[0] === \".\") {\n            // This should match either domain it self or any subdomain or host\n            // .foo.com will match foo.com it self or *.foo.com\n            if (host.endsWith(pattern)) {\n                isBypassedFlag = true;\n            }\n            else {\n                if (host.length === pattern.length - 1 && host === pattern.slice(1)) {\n                    isBypassedFlag = true;\n                }\n            }\n        }\n        else {\n            if (host === pattern) {\n                isBypassedFlag = true;\n            }\n        }\n    }\n    bypassedMap === null || bypassedMap === void 0 ? void 0 : bypassedMap.set(host, isBypassedFlag);\n    return isBypassedFlag;\n}\n/**\n * @internal\n */\nexport function loadNoProxy() {\n    const noProxy = getEnvironmentValue(Constants.NO_PROXY);\n    noProxyListLoaded = true;\n    if (noProxy) {\n        return noProxy\n            .split(\",\")\n            .map((item) => item.trim())\n            .filter((item) => item.length);\n    }\n    return [];\n}\n/**\n * Converts a given URL of a proxy server into `ProxySettings` or attempts to retrieve `ProxySettings` from the current environment if one is not passed.\n * @param proxyUrl - URL of the proxy\n * @returns The default proxy settings, or undefined.\n */\nexport function getDefaultProxySettings(proxyUrl) {\n    if (!proxyUrl) {\n        proxyUrl = loadEnvironmentProxyValue();\n        if (!proxyUrl) {\n            return undefined;\n        }\n    }\n    const { username, password, urlWithoutAuth } = extractAuthFromUrl(proxyUrl);\n    const parsedUrl = URLBuilder.parse(urlWithoutAuth);\n    const schema = parsedUrl.getScheme() ? parsedUrl.getScheme() + \"://\" : \"\";\n    return {\n        host: schema + parsedUrl.getHost(),\n        port: Number.parseInt(parsedUrl.getPort() || \"80\"),\n        username,\n        password,\n    };\n}\n/**\n * A policy that allows one to apply proxy settings to all requests.\n * If not passed static settings, they will be retrieved from the HTTPS_PROXY\n * or HTTP_PROXY environment variables.\n * @param proxySettings - ProxySettings to use on each request.\n * @param options - additional settings, for example, custom NO_PROXY patterns\n */\nexport function proxyPolicy(proxySettings, options) {\n    if (!proxySettings) {\n        proxySettings = getDefaultProxySettings();\n    }\n    if (!noProxyListLoaded) {\n        globalNoProxyList.push(...loadNoProxy());\n    }\n    return {\n        create: (nextPolicy, requestPolicyOptions) => {\n            return new ProxyPolicy(nextPolicy, requestPolicyOptions, proxySettings, options === null || options === void 0 ? void 0 : options.customNoProxyList);\n        },\n    };\n}\nfunction extractAuthFromUrl(url) {\n    const atIndex = url.indexOf(\"@\");\n    if (atIndex === -1) {\n        return { urlWithoutAuth: url };\n    }\n    const schemeIndex = url.indexOf(\"://\");\n    const authStart = schemeIndex !== -1 ? schemeIndex + 3 : 0;\n    const auth = url.substring(authStart, atIndex);\n    const colonIndex = auth.indexOf(\":\");\n    const hasPassword = colonIndex !== -1;\n    const username = hasPassword ? auth.substring(0, colonIndex) : auth;\n    const password = hasPassword ? auth.substring(colonIndex + 1) : undefined;\n    const urlWithoutAuth = url.substring(0, authStart) + url.substring(atIndex + 1);\n    return {\n        username,\n        password,\n        urlWithoutAuth,\n    };\n}\nexport class ProxyPolicy extends BaseRequestPolicy {\n    constructor(nextPolicy, options, proxySettings, customNoProxyList) {\n        super(nextPolicy, options);\n        this.proxySettings = proxySettings;\n        this.customNoProxyList = customNoProxyList;\n    }\n    sendRequest(request) {\n        var _a;\n        if (!request.proxySettings &&\n            !isBypassed(request.url, (_a = this.customNoProxyList) !== null && _a !== void 0 ? _a : globalNoProxyList, this.customNoProxyList ? undefined : globalBypassedMap)) {\n            request.proxySettings = this.proxySettings;\n        }\n        return this._nextPolicy.sendRequest(request);\n    }\n}\n//# sourceMappingURL=proxyPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport * as utils from \"../util/utils\";\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nimport { delay } from \"@azure/core-util\";\nexport function rpRegistrationPolicy(retryTimeout = 30) {\n    return {\n        create: (nextPolicy, options) => {\n            return new RPRegistrationPolicy(nextPolicy, options, retryTimeout);\n        },\n    };\n}\nexport class RPRegistrationPolicy extends BaseRequestPolicy {\n    constructor(nextPolicy, options, _retryTimeout = 30) {\n        super(nextPolicy, options);\n        this._retryTimeout = _retryTimeout;\n    }\n    sendRequest(request) {\n        return this._nextPolicy\n            .sendRequest(request.clone())\n            .then((response) => registerIfNeeded(this, request, response));\n    }\n}\nfunction registerIfNeeded(policy, request, response) {\n    if (response.status === 409) {\n        const rpName = checkRPNotRegisteredError(response.bodyAsText);\n        if (rpName) {\n            const urlPrefix = extractSubscriptionUrl(request.url);\n            return (registerRP(policy, urlPrefix, rpName, request)\n                // Autoregistration of ${provider} failed for some reason. We will not return this error\n                // instead will return the initial response with 409 status code back to the user.\n                // do nothing here as we are returning the original response at the end of this method.\n                .catch(() => false)\n                .then((registrationStatus) => {\n                if (registrationStatus) {\n                    // Retry the original request. We have to change the x-ms-client-request-id\n                    // otherwise Azure endpoint will return the initial 409 (cached) response.\n                    request.headers.set(\"x-ms-client-request-id\", utils.generateUuid());\n                    return policy._nextPolicy.sendRequest(request.clone());\n                }\n                return response;\n            }));\n        }\n    }\n    return Promise.resolve(response);\n}\n/**\n * Reuses the headers of the original request and url (if specified).\n * @param originalRequest - The original request\n * @param reuseUrlToo - Should the url from the original request be reused as well. Default false.\n * @returns A new request object with desired headers.\n */\nfunction getRequestEssentials(originalRequest, reuseUrlToo = false) {\n    const reqOptions = originalRequest.clone();\n    if (reuseUrlToo) {\n        reqOptions.url = originalRequest.url;\n    }\n    // We have to change the x-ms-client-request-id otherwise Azure endpoint\n    // will return the initial 409 (cached) response.\n    reqOptions.headers.set(\"x-ms-client-request-id\", utils.generateUuid());\n    // Set content-type to application/json\n    reqOptions.headers.set(\"Content-Type\", \"application/json; charset=utf-8\");\n    return reqOptions;\n}\n/**\n * Validates the error code and message associated with 409 response status code. If it matches to that of\n * RP not registered then it returns the name of the RP else returns undefined.\n * @param body - The response body received after making the original request.\n * @returns The name of the RP if condition is satisfied else undefined.\n */\nfunction checkRPNotRegisteredError(body) {\n    let result, responseBody;\n    if (body) {\n        try {\n            responseBody = JSON.parse(body);\n        }\n        catch (err) {\n            // do nothing;\n        }\n        if (responseBody &&\n            responseBody.error &&\n            responseBody.error.message &&\n            responseBody.error.code &&\n            responseBody.error.code === \"MissingSubscriptionRegistration\") {\n            const matchRes = responseBody.error.message.match(/.*'(.*)'/i);\n            if (matchRes) {\n                result = matchRes.pop();\n            }\n        }\n    }\n    return result;\n}\n/**\n * Extracts the first part of the URL, just after subscription:\n * https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/\n * @param url - The original request url\n * @returns The url prefix as explained above.\n */\nfunction extractSubscriptionUrl(url) {\n    let result;\n    const matchRes = url.match(/.*\\/subscriptions\\/[a-f0-9-]+\\//gi);\n    if (matchRes && matchRes[0]) {\n        result = matchRes[0];\n    }\n    else {\n        throw new Error(`Unable to extract subscriptionId from the given url - ${url}.`);\n    }\n    return result;\n}\n/**\n * Registers the given provider.\n * @param policy - The RPRegistrationPolicy this function is being called against.\n * @param urlPrefix - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/\n * @param provider - The provider name to be registered.\n * @param originalRequest - The original request sent by the user that returned a 409 response\n * with a message that the provider is not registered.\n */\nasync function registerRP(policy, urlPrefix, provider, originalRequest) {\n    const postUrl = `${urlPrefix}providers/${provider}/register?api-version=2016-02-01`;\n    const getUrl = `${urlPrefix}providers/${provider}?api-version=2016-02-01`;\n    const reqOptions = getRequestEssentials(originalRequest);\n    reqOptions.method = \"POST\";\n    reqOptions.url = postUrl;\n    const response = await policy._nextPolicy.sendRequest(reqOptions);\n    if (response.status !== 200) {\n        throw new Error(`Autoregistration of ${provider} failed. Please try registering manually.`);\n    }\n    return getRegistrationStatus(policy, getUrl, originalRequest);\n}\n/**\n * Polls the registration status of the provider that was registered. Polling happens at an interval of 30 seconds.\n * Polling will happen till the registrationState property of the response body is \"Registered\".\n * @param policy - The RPRegistrationPolicy this function is being called against.\n * @param url - The request url for polling\n * @param originalRequest - The original request sent by the user that returned a 409 response\n * with a message that the provider is not registered.\n * @returns True if RP Registration is successful.\n */\nasync function getRegistrationStatus(policy, url, originalRequest) {\n    const reqOptions = getRequestEssentials(originalRequest);\n    reqOptions.url = url;\n    reqOptions.method = \"GET\";\n    const res = await policy._nextPolicy.sendRequest(reqOptions);\n    const obj = res.parsedBody;\n    if (res.parsedBody && obj.registrationState && obj.registrationState === \"Registered\") {\n        return true;\n    }\n    else {\n        await delay(policy._retryTimeout * 1000);\n        return getRegistrationStatus(policy, url, originalRequest);\n    }\n}\n//# sourceMappingURL=rpRegistrationPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\n/**\n * Creates a policy that signs outgoing requests by calling to the provided `authenticationProvider`'s `signRequest` method.\n * @param authenticationProvider - The authentication provider.\n * @returns An instance of the {@link SigningPolicy}.\n */\nexport function signingPolicy(authenticationProvider) {\n    return {\n        create: (nextPolicy, options) => {\n            return new SigningPolicy(nextPolicy, options, authenticationProvider);\n        },\n    };\n}\n/**\n * A policy that signs outgoing requests by calling to the provided `authenticationProvider`'s `signRequest` method.\n */\nexport class SigningPolicy extends BaseRequestPolicy {\n    constructor(nextPolicy, options, authenticationProvider) {\n        super(nextPolicy, options);\n        this.authenticationProvider = authenticationProvider;\n    }\n    signRequest(request) {\n        return this.authenticationProvider.signRequest(request);\n    }\n    sendRequest(request) {\n        return this.signRequest(request).then((nextRequest) => this._nextPolicy.sendRequest(nextRequest));\n    }\n}\n//# sourceMappingURL=signingPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nimport { DEFAULT_CLIENT_MAX_RETRY_INTERVAL, DEFAULT_CLIENT_MIN_RETRY_INTERVAL, DEFAULT_CLIENT_RETRY_COUNT, DEFAULT_CLIENT_RETRY_INTERVAL, isNumber, shouldRetry, updateRetryData, } from \"../util/exponentialBackoffStrategy\";\nimport { delay } from \"@azure/core-util\";\n/**\n * A policy that retries when there's a system error, identified by the codes \"ETIMEDOUT\", \"ESOCKETTIMEDOUT\", \"ECONNREFUSED\", \"ECONNRESET\" or \"ENOENT\".\n * @param retryCount - Maximum number of retries.\n * @param retryInterval - The client retry interval, in milliseconds.\n * @param minRetryInterval - The minimum retry interval, in milliseconds.\n * @param maxRetryInterval - The maximum retry interval, in milliseconds.\n * @returns An instance of the {@link SystemErrorRetryPolicy}\n */\nexport function systemErrorRetryPolicy(retryCount, retryInterval, minRetryInterval, maxRetryInterval) {\n    return {\n        create: (nextPolicy, options) => {\n            return new SystemErrorRetryPolicy(nextPolicy, options, retryCount, retryInterval, minRetryInterval, maxRetryInterval);\n        },\n    };\n}\n/**\n * A policy that retries when there's a system error, identified by the codes \"ETIMEDOUT\", \"ESOCKETTIMEDOUT\", \"ECONNREFUSED\", \"ECONNRESET\" or \"ENOENT\".\n * @param retryCount - The client retry count.\n * @param retryInterval - The client retry interval, in milliseconds.\n * @param minRetryInterval - The minimum retry interval, in milliseconds.\n * @param maxRetryInterval - The maximum retry interval, in milliseconds.\n */\nexport class SystemErrorRetryPolicy extends BaseRequestPolicy {\n    constructor(nextPolicy, options, retryCount, retryInterval, minRetryInterval, maxRetryInterval) {\n        super(nextPolicy, options);\n        this.retryCount = isNumber(retryCount) ? retryCount : DEFAULT_CLIENT_RETRY_COUNT;\n        this.retryInterval = isNumber(retryInterval) ? retryInterval : DEFAULT_CLIENT_RETRY_INTERVAL;\n        this.minRetryInterval = isNumber(minRetryInterval)\n            ? minRetryInterval\n            : DEFAULT_CLIENT_MIN_RETRY_INTERVAL;\n        this.maxRetryInterval = isNumber(maxRetryInterval)\n            ? maxRetryInterval\n            : DEFAULT_CLIENT_MAX_RETRY_INTERVAL;\n    }\n    sendRequest(request) {\n        return this._nextPolicy\n            .sendRequest(request.clone())\n            .catch((error) => retry(this, request, error.response, error));\n    }\n}\nasync function retry(policy, request, operationResponse, err, retryData) {\n    retryData = updateRetryData(policy, retryData, err);\n    function shouldPolicyRetry(_response, error) {\n        if (error &&\n            error.code &&\n            (error.code === \"ETIMEDOUT\" ||\n                error.code === \"ESOCKETTIMEDOUT\" ||\n                error.code === \"ECONNREFUSED\" ||\n                error.code === \"ECONNRESET\" ||\n                error.code === \"ENOENT\")) {\n            return true;\n        }\n        return false;\n    }\n    if (shouldRetry(policy.retryCount, shouldPolicyRetry, retryData, operationResponse, err)) {\n        // If previous operation ended with an error and the policy allows a retry, do that\n        try {\n            await delay(retryData.retryInterval);\n            return policy._nextPolicy.sendRequest(request.clone());\n        }\n        catch (nestedErr) {\n            return retry(policy, request, operationResponse, nestedErr, retryData);\n        }\n    }\n    else {\n        if (err) {\n            // If the operation failed in the end, return all errors instead of just the last one\n            return Promise.reject(retryData.error);\n        }\n        return operationResponse;\n    }\n}\n//# sourceMappingURL=systemErrorRetryPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Maximum number of retries for the throttling retry policy\n */\nexport const DEFAULT_CLIENT_MAX_RETRY_COUNT = 3;\n//# sourceMappingURL=throttlingRetryStrategy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nimport { AbortError } from \"@azure/abort-controller\";\nimport { Constants } from \"../util/constants\";\nimport { DEFAULT_CLIENT_MAX_RETRY_COUNT } from \"../util/throttlingRetryStrategy\";\nimport { delay } from \"@azure/core-util\";\nconst StatusCodes = Constants.HttpConstants.StatusCodes;\n/**\n * Creates a policy that re-sends the request if the response indicates the request failed because of throttling reasons.\n * For example, if the response contains a `Retry-After` header, it will retry sending the request based on the value of that header.\n *\n * To learn more, please refer to\n * https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-request-limits,\n * https://docs.microsoft.com/en-us/azure/azure-subscription-service-limits and\n * https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/troubleshooting-throttling-errors\n * @returns\n */\nexport function throttlingRetryPolicy() {\n    return {\n        create: (nextPolicy, options) => {\n            return new ThrottlingRetryPolicy(nextPolicy, options);\n        },\n    };\n}\nconst StandardAbortMessage = \"The operation was aborted.\";\n/**\n * Creates a policy that re-sends the request if the response indicates the request failed because of throttling reasons.\n * For example, if the response contains a `Retry-After` header, it will retry sending the request based on the value of that header.\n *\n * To learn more, please refer to\n * https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-request-limits,\n * https://docs.microsoft.com/en-us/azure/azure-subscription-service-limits and\n * https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/troubleshooting-throttling-errors\n */\nexport class ThrottlingRetryPolicy extends BaseRequestPolicy {\n    constructor(nextPolicy, options, _handleResponse) {\n        super(nextPolicy, options);\n        this.numberOfRetries = 0;\n        this._handleResponse = _handleResponse || this._defaultResponseHandler;\n    }\n    async sendRequest(httpRequest) {\n        const response = await this._nextPolicy.sendRequest(httpRequest.clone());\n        if (response.status !== StatusCodes.TooManyRequests &&\n            response.status !== StatusCodes.ServiceUnavailable) {\n            return response;\n        }\n        else {\n            return this._handleResponse(httpRequest, response);\n        }\n    }\n    async _defaultResponseHandler(httpRequest, httpResponse) {\n        var _a;\n        const retryAfterHeader = httpResponse.headers.get(Constants.HeaderConstants.RETRY_AFTER);\n        if (retryAfterHeader) {\n            const delayInMs = ThrottlingRetryPolicy.parseRetryAfterHeader(retryAfterHeader);\n            if (delayInMs) {\n                this.numberOfRetries += 1;\n                await delay(delayInMs, {\n                    abortSignal: httpRequest.abortSignal,\n                    abortErrorMsg: StandardAbortMessage,\n                });\n                if ((_a = httpRequest.abortSignal) === null || _a === void 0 ? void 0 : _a.aborted) {\n                    throw new AbortError(StandardAbortMessage);\n                }\n                if (this.numberOfRetries < DEFAULT_CLIENT_MAX_RETRY_COUNT) {\n                    return this.sendRequest(httpRequest);\n                }\n                else {\n                    return this._nextPolicy.sendRequest(httpRequest);\n                }\n            }\n        }\n        return httpResponse;\n    }\n    static parseRetryAfterHeader(headerValue) {\n        const retryAfterInSeconds = Number(headerValue);\n        if (Number.isNaN(retryAfterInSeconds)) {\n            return ThrottlingRetryPolicy.parseDateRetryAfterHeader(headerValue);\n        }\n        else {\n            return retryAfterInSeconds * 1000;\n        }\n    }\n    static parseDateRetryAfterHeader(headerValue) {\n        try {\n            const now = Date.now();\n            const date = Date.parse(headerValue);\n            const diff = date - now;\n            return Number.isNaN(diff) ? undefined : diff;\n        }\n        catch (error) {\n            return undefined;\n        }\n    }\n}\n//# sourceMappingURL=throttlingRetryPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { context as otContext, trace as otTrace } from \"@opentelemetry/api\";\n/**\n * The kind of span.\n */\nexport var SpanKind;\n(function (SpanKind) {\n    /** Default value. Indicates that the span is used internally. */\n    SpanKind[SpanKind[\"INTERNAL\"] = 0] = \"INTERNAL\";\n    /**\n     * Indicates that the span covers server-side handling of an RPC or other\n     * remote request.\n     */\n    SpanKind[SpanKind[\"SERVER\"] = 1] = \"SERVER\";\n    /**\n     * Indicates that the span covers the client-side wrapper around an RPC or\n     * other remote request.\n     */\n    SpanKind[SpanKind[\"CLIENT\"] = 2] = \"CLIENT\";\n    /**\n     * Indicates that the span describes producer sending a message to a\n     * broker. Unlike client and server, there is no direct critical path latency\n     * relationship between producer and consumer spans.\n     */\n    SpanKind[SpanKind[\"PRODUCER\"] = 3] = \"PRODUCER\";\n    /**\n     * Indicates that the span describes consumer receiving a message from a\n     * broker. Unlike client and server, there is no direct critical path latency\n     * relationship between producer and consumer spans.\n     */\n    SpanKind[SpanKind[\"CONSUMER\"] = 4] = \"CONSUMER\";\n})(SpanKind || (SpanKind = {}));\n/**\n * Return the span if one exists\n *\n * @param context - context to get span from\n */\nexport function getSpan(context) {\n    return otTrace.getSpan(context);\n}\n/**\n * Set the span on a context\n *\n * @param context - context to use as parent\n * @param span - span to set active\n */\nexport function setSpan(context, span) {\n    return otTrace.setSpan(context, span);\n}\n/**\n * Wrap span context in a NoopSpan and set as span in a new\n * context\n *\n * @param context - context to set active span on\n * @param spanContext - span context to be wrapped\n */\nexport function setSpanContext(context, spanContext) {\n    return otTrace.setSpanContext(context, spanContext);\n}\n/**\n * Get the span context of the span if it exists.\n *\n * @param context - context to get values from\n */\nexport function getSpanContext(context) {\n    return otTrace.getSpanContext(context);\n}\n/**\n * Returns true of the given {@link SpanContext} is valid.\n * A valid {@link SpanContext} is one which has a valid trace ID and span ID as per the spec.\n *\n * @param context - the {@link SpanContext} to validate.\n *\n * @returns true if the {@link SpanContext} is valid, false otherwise.\n */\nexport function isSpanContextValid(context) {\n    return otTrace.isSpanContextValid(context);\n}\nexport function getTracer(name, version) {\n    return otTrace.getTracer(name || \"azure/core-tracing\", version);\n}\n/** Entrypoint for context API */\nexport const context = otContext;\n/** SpanStatusCode */\nexport var SpanStatusCode;\n(function (SpanStatusCode) {\n    /**\n     * The default status.\n     */\n    SpanStatusCode[SpanStatusCode[\"UNSET\"] = 0] = \"UNSET\";\n    /**\n     * The operation has been validated by an Application developer or\n     * Operator to have completed successfully.\n     */\n    SpanStatusCode[SpanStatusCode[\"OK\"] = 1] = \"OK\";\n    /**\n     * The operation contains an error.\n     */\n    SpanStatusCode[SpanStatusCode[\"ERROR\"] = 2] = \"ERROR\";\n})(SpanStatusCode || (SpanStatusCode = {}));\n//# sourceMappingURL=interfaces.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { SpanKind, setSpan, context as otContext, getTracer } from \"./interfaces\";\nimport { trace, INVALID_SPAN_CONTEXT } from \"@opentelemetry/api\";\nexport function isTracingDisabled() {\n    var _a;\n    if (typeof process === \"undefined\") {\n        // not supported in browser for now without polyfills\n        return false;\n    }\n    const azureTracingDisabledValue = (_a = process.env.AZURE_TRACING_DISABLED) === null || _a === void 0 ? void 0 : _a.toLowerCase();\n    if (azureTracingDisabledValue === \"false\" || azureTracingDisabledValue === \"0\") {\n        return false;\n    }\n    return Boolean(azureTracingDisabledValue);\n}\n/**\n * Creates a function that can be used to create spans using the global tracer.\n *\n * Usage:\n *\n * ```typescript\n * // once\n * const createSpan = createSpanFunction({ packagePrefix: \"Azure.Data.AppConfiguration\", namespace: \"Microsoft.AppConfiguration\" });\n *\n * // in each operation\n * const span = createSpan(\"deleteConfigurationSetting\", operationOptions);\n *    // code...\n * span.end();\n * ```\n *\n * @hidden\n * @param args - allows configuration of the prefix for each span as well as the az.namespace field.\n */\nexport function createSpanFunction(args) {\n    return function (operationName, operationOptions) {\n        const tracer = getTracer();\n        const tracingOptions = (operationOptions === null || operationOptions === void 0 ? void 0 : operationOptions.tracingOptions) || {};\n        const spanOptions = Object.assign({ kind: SpanKind.INTERNAL }, tracingOptions.spanOptions);\n        const spanName = args.packagePrefix ? `${args.packagePrefix}.${operationName}` : operationName;\n        let span;\n        if (isTracingDisabled()) {\n            span = trace.wrapSpanContext(INVALID_SPAN_CONTEXT);\n        }\n        else {\n            span = tracer.startSpan(spanName, spanOptions, tracingOptions.tracingContext);\n        }\n        if (args.namespace) {\n            span.setAttribute(\"az.namespace\", args.namespace);\n        }\n        let newSpanOptions = tracingOptions.spanOptions || {};\n        if (span.isRecording() && args.namespace) {\n            newSpanOptions = Object.assign(Object.assign({}, tracingOptions.spanOptions), { attributes: Object.assign(Object.assign({}, spanOptions.attributes), { \"az.namespace\": args.namespace }) });\n        }\n        const newTracingOptions = Object.assign(Object.assign({}, tracingOptions), { spanOptions: newSpanOptions, tracingContext: setSpan(tracingOptions.tracingContext || otContext.active(), span) });\n        const newOperationOptions = Object.assign(Object.assign({}, operationOptions), { tracingOptions: newTracingOptions });\n        return {\n            span,\n            updatedOptions: newOperationOptions\n        };\n    };\n}\n//# sourceMappingURL=createSpan.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy, } from \"./requestPolicy\";\nimport { SpanKind, SpanStatusCode, createSpanFunction, getTraceParentHeader, isSpanContextValid, } from \"@azure/core-tracing\";\nimport { logger } from \"../log\";\nconst createSpan = createSpanFunction({\n    packagePrefix: \"\",\n    namespace: \"\",\n});\n/**\n * Creates a policy that wraps outgoing requests with a tracing span.\n * @param tracingOptions - Tracing options.\n * @returns An instance of the {@link TracingPolicy} class.\n */\nexport function tracingPolicy(tracingOptions = {}) {\n    return {\n        create(nextPolicy, options) {\n            return new TracingPolicy(nextPolicy, options, tracingOptions);\n        },\n    };\n}\n/**\n * A policy that wraps outgoing requests with a tracing span.\n */\nexport class TracingPolicy extends BaseRequestPolicy {\n    constructor(nextPolicy, options, tracingOptions) {\n        super(nextPolicy, options);\n        this.userAgent = tracingOptions.userAgent;\n    }\n    async sendRequest(request) {\n        if (!request.tracingContext) {\n            return this._nextPolicy.sendRequest(request);\n        }\n        const span = this.tryCreateSpan(request);\n        if (!span) {\n            return this._nextPolicy.sendRequest(request);\n        }\n        try {\n            const response = await this._nextPolicy.sendRequest(request);\n            this.tryProcessResponse(span, response);\n            return response;\n        }\n        catch (err) {\n            this.tryProcessError(span, err);\n            throw err;\n        }\n    }\n    tryCreateSpan(request) {\n        var _a;\n        try {\n            // Passing spanOptions as part of tracingOptions to maintain compatibility @azure/core-tracing@preview.13 and earlier.\n            // We can pass this as a separate parameter once we upgrade to the latest core-tracing.\n            const { span } = createSpan(`HTTP ${request.method}`, {\n                tracingOptions: {\n                    spanOptions: Object.assign(Object.assign({}, request.spanOptions), { kind: SpanKind.CLIENT }),\n                    tracingContext: request.tracingContext,\n                },\n            });\n            // If the span is not recording, don't do any more work.\n            if (!span.isRecording()) {\n                span.end();\n                return undefined;\n            }\n            const namespaceFromContext = (_a = request.tracingContext) === null || _a === void 0 ? void 0 : _a.getValue(Symbol.for(\"az.namespace\"));\n            if (typeof namespaceFromContext === \"string\") {\n                span.setAttribute(\"az.namespace\", namespaceFromContext);\n            }\n            span.setAttributes({\n                \"http.method\": request.method,\n                \"http.url\": request.url,\n                requestId: request.requestId,\n            });\n            if (this.userAgent) {\n                span.setAttribute(\"http.user_agent\", this.userAgent);\n            }\n            // set headers\n            const spanContext = span.spanContext();\n            const traceParentHeader = getTraceParentHeader(spanContext);\n            if (traceParentHeader && isSpanContextValid(spanContext)) {\n                request.headers.set(\"traceparent\", traceParentHeader);\n                const traceState = spanContext.traceState && spanContext.traceState.serialize();\n                // if tracestate is set, traceparent MUST be set, so only set tracestate after traceparent\n                if (traceState) {\n                    request.headers.set(\"tracestate\", traceState);\n                }\n            }\n            return span;\n        }\n        catch (error) {\n            logger.warning(`Skipping creating a tracing span due to an error: ${error.message}`);\n            return undefined;\n        }\n    }\n    tryProcessError(span, err) {\n        try {\n            span.setStatus({\n                code: SpanStatusCode.ERROR,\n                message: err.message,\n            });\n            if (err.statusCode) {\n                span.setAttribute(\"http.status_code\", err.statusCode);\n            }\n            span.end();\n        }\n        catch (error) {\n            logger.warning(`Skipping tracing span processing due to an error: ${error.message}`);\n        }\n    }\n    tryProcessResponse(span, response) {\n        try {\n            span.setAttribute(\"http.status_code\", response.status);\n            const serviceRequestId = response.headers.get(\"x-ms-request-id\");\n            if (serviceRequestId) {\n                span.setAttribute(\"serviceRequestId\", serviceRequestId);\n            }\n            span.setStatus({\n                code: SpanStatusCode.OK,\n            });\n            span.end();\n        }\n        catch (error) {\n            logger.warning(`Skipping tracing span processing due to an error: ${error.message}`);\n        }\n    }\n}\n//# sourceMappingURL=tracingPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nconst VERSION = \"00\";\n/**\n * Generates a `SpanContext` given a `traceparent` header value.\n * @param traceParent - Serialized span context data as a `traceparent` header value.\n * @returns The `SpanContext` generated from the `traceparent` value.\n */\nexport function extractSpanContextFromTraceParentHeader(traceParentHeader) {\n    const parts = traceParentHeader.split(\"-\");\n    if (parts.length !== 4) {\n        return;\n    }\n    const [version, traceId, spanId, traceOptions] = parts;\n    if (version !== VERSION) {\n        return;\n    }\n    const traceFlags = parseInt(traceOptions, 16);\n    const spanContext = {\n        spanId,\n        traceId,\n        traceFlags\n    };\n    return spanContext;\n}\n/**\n * Generates a `traceparent` value given a span context.\n * @param spanContext - Contains context for a specific span.\n * @returns The `spanContext` represented as a `traceparent` value.\n */\nexport function getTraceParentHeader(spanContext) {\n    const missingFields = [];\n    if (!spanContext.traceId) {\n        missingFields.push(\"traceId\");\n    }\n    if (!spanContext.spanId) {\n        missingFields.push(\"spanId\");\n    }\n    if (missingFields.length) {\n        return;\n    }\n    const flags = spanContext.traceFlags || 0 /* NONE */;\n    const hexFlags = flags.toString(16);\n    const traceFlags = hexFlags.length === 1 ? `0${hexFlags}` : hexFlags;\n    // https://www.w3.org/TR/trace-context/#traceparent-header-field-values\n    return `${VERSION}-${spanContext.traceId}-${spanContext.spanId}-${traceFlags}`;\n}\n//# sourceMappingURL=traceParentHeader.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport * as utils from \"./util/utils\";\nimport { MapperType } from \"./serializer\";\nimport { DefaultDeserializationOptions, deserializationPolicy, } from \"./policies/deserializationPolicy\";\nimport { DefaultKeepAliveOptions, keepAlivePolicy } from \"./policies/keepAlivePolicy\";\nimport { DefaultRedirectOptions, redirectPolicy } from \"./policies/redirectPolicy\";\nimport { DefaultRetryOptions, exponentialRetryPolicy } from \"./policies/exponentialRetryPolicy\";\nimport { logPolicy } from \"./policies/logPolicy\";\nimport { getPathStringFromParameter, getPathStringFromParameterPath, } from \"./operationParameter\";\nimport { getStreamResponseStatusCodes } from \"./operationSpec\";\nimport { WebResource, isWebResourceLike, } from \"./webResource\";\nimport { RequestPolicyOptions, } from \"./policies/requestPolicy\";\nimport { XML_ATTRKEY, XML_CHARKEY } from \"./util/serializer.common\";\nimport { isNode } from \"./util/utils\";\nimport { isTokenCredential } from \"@azure/core-auth\";\nimport { getDefaultUserAgentHeaderName, getDefaultUserAgentValue, userAgentPolicy, } from \"./policies/userAgentPolicy\";\nimport { QueryCollectionFormat } from \"./queryCollectionFormat\";\nimport { URLBuilder } from \"./url\";\nimport { bearerTokenAuthenticationPolicy } from \"./policies/bearerTokenAuthenticationPolicy\";\nimport { disableResponseDecompressionPolicy } from \"./policies/disableResponseDecompressionPolicy\";\nimport { generateClientRequestIdPolicy } from \"./policies/generateClientRequestIdPolicy\";\nimport { getCachedDefaultHttpClient } from \"./httpClientCache\";\nimport { logger } from \"./log\";\nimport { ndJsonPolicy } from \"./policies/ndJsonPolicy\";\nimport { proxyPolicy } from \"./policies/proxyPolicy\";\nimport { rpRegistrationPolicy } from \"./policies/rpRegistrationPolicy\";\nimport { signingPolicy } from \"./policies/signingPolicy\";\nimport { stringifyXML } from \"./util/xml\";\nimport { systemErrorRetryPolicy } from \"./policies/systemErrorRetryPolicy\";\nimport { throttlingRetryPolicy } from \"./policies/throttlingRetryPolicy\";\nimport { tracingPolicy } from \"./policies/tracingPolicy\";\n/**\n * ServiceClient sends service requests and receives responses.\n */\nexport class ServiceClient {\n    /**\n     * The ServiceClient constructor\n     * @param credentials - The credentials used for authentication with the service.\n     * @param options - The service client options that govern the behavior of the client.\n     */\n    constructor(credentials, \n    /* eslint-disable-next-line @azure/azure-sdk/ts-naming-options */\n    options) {\n        if (!options) {\n            options = {};\n        }\n        this._withCredentials = options.withCredentials || false;\n        this._httpClient = options.httpClient || getCachedDefaultHttpClient();\n        this._requestPolicyOptions = new RequestPolicyOptions(options.httpPipelineLogger);\n        let requestPolicyFactories;\n        if (Array.isArray(options.requestPolicyFactories)) {\n            logger.info(\"ServiceClient: using custom request policies\");\n            requestPolicyFactories = options.requestPolicyFactories;\n        }\n        else {\n            let authPolicyFactory = undefined;\n            if (isTokenCredential(credentials)) {\n                logger.info(\"ServiceClient: creating bearer token authentication policy from provided credentials\");\n                // Create a wrapped RequestPolicyFactory here so that we can provide the\n                // correct scope to the BearerTokenAuthenticationPolicy at the first time\n                // one is requested.  This is needed because generated ServiceClient\n                // implementations do not set baseUri until after ServiceClient's constructor\n                // is finished, leaving baseUri empty at the time when it is needed to\n                // build the correct scope name.\n                const wrappedPolicyFactory = () => {\n                    let bearerTokenPolicyFactory = undefined;\n                    // eslint-disable-next-line @typescript-eslint/no-this-alias\n                    const serviceClient = this;\n                    const serviceClientOptions = options;\n                    return {\n                        create(nextPolicy, createOptions) {\n                            const credentialScopes = getCredentialScopes(serviceClientOptions, serviceClient.baseUri);\n                            if (!credentialScopes) {\n                                throw new Error(`When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy`);\n                            }\n                            if (bearerTokenPolicyFactory === undefined || bearerTokenPolicyFactory === null) {\n                                bearerTokenPolicyFactory = bearerTokenAuthenticationPolicy(credentials, credentialScopes);\n                            }\n                            return bearerTokenPolicyFactory.create(nextPolicy, createOptions);\n                        },\n                    };\n                };\n                authPolicyFactory = wrappedPolicyFactory();\n            }\n            else if (credentials && typeof credentials.signRequest === \"function\") {\n                logger.info(\"ServiceClient: creating signing policy from provided credentials\");\n                authPolicyFactory = signingPolicy(credentials);\n            }\n            else if (credentials !== undefined && credentials !== null) {\n                throw new Error(\"The credentials argument must implement the TokenCredential interface\");\n            }\n            logger.info(\"ServiceClient: using default request policies\");\n            requestPolicyFactories = createDefaultRequestPolicyFactories(authPolicyFactory, options);\n            if (options.requestPolicyFactories) {\n                // options.requestPolicyFactories can also be a function that manipulates\n                // the default requestPolicyFactories array\n                const newRequestPolicyFactories = options.requestPolicyFactories(requestPolicyFactories);\n                if (newRequestPolicyFactories) {\n                    requestPolicyFactories = newRequestPolicyFactories;\n                }\n            }\n        }\n        this._requestPolicyFactories = requestPolicyFactories;\n    }\n    /**\n     * Send the provided httpRequest.\n     */\n    sendRequest(options) {\n        if (options === null || options === undefined || typeof options !== \"object\") {\n            throw new Error(\"options cannot be null or undefined and it must be of type object.\");\n        }\n        let httpRequest;\n        try {\n            if (isWebResourceLike(options)) {\n                options.validateRequestProperties();\n                httpRequest = options;\n            }\n            else {\n                httpRequest = new WebResource();\n                httpRequest = httpRequest.prepare(options);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n        let httpPipeline = this._httpClient;\n        if (this._requestPolicyFactories && this._requestPolicyFactories.length > 0) {\n            for (let i = this._requestPolicyFactories.length - 1; i >= 0; --i) {\n                httpPipeline = this._requestPolicyFactories[i].create(httpPipeline, this._requestPolicyOptions);\n            }\n        }\n        return httpPipeline.sendRequest(httpRequest);\n    }\n    /**\n     * Send an HTTP request that is populated using the provided OperationSpec.\n     * @param operationArguments - The arguments that the HTTP request's templated values will be populated from.\n     * @param operationSpec - The OperationSpec to use to populate the httpRequest.\n     * @param callback - The callback to call when the response is received.\n     */\n    async sendOperationRequest(operationArguments, operationSpec, callback) {\n        var _a;\n        if (typeof operationArguments.options === \"function\") {\n            callback = operationArguments.options;\n            operationArguments.options = undefined;\n        }\n        const serializerOptions = (_a = operationArguments.options) === null || _a === void 0 ? void 0 : _a.serializerOptions;\n        const httpRequest = new WebResource();\n        let result;\n        try {\n            const baseUri = operationSpec.baseUrl || this.baseUri;\n            if (!baseUri) {\n                throw new Error(\"If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.\");\n            }\n            httpRequest.method = operationSpec.httpMethod;\n            httpRequest.operationSpec = operationSpec;\n            const requestUrl = URLBuilder.parse(baseUri);\n            if (operationSpec.path) {\n                requestUrl.appendPath(operationSpec.path);\n            }\n            if (operationSpec.urlParameters && operationSpec.urlParameters.length > 0) {\n                for (const urlParameter of operationSpec.urlParameters) {\n                    let urlParameterValue = getOperationArgumentValueFromParameter(this, operationArguments, urlParameter, operationSpec.serializer);\n                    urlParameterValue = operationSpec.serializer.serialize(urlParameter.mapper, urlParameterValue, getPathStringFromParameter(urlParameter), serializerOptions);\n                    if (!urlParameter.skipEncoding) {\n                        urlParameterValue = encodeURIComponent(urlParameterValue);\n                    }\n                    requestUrl.replaceAll(`{${urlParameter.mapper.serializedName || getPathStringFromParameter(urlParameter)}}`, urlParameterValue);\n                }\n            }\n            if (operationSpec.queryParameters && operationSpec.queryParameters.length > 0) {\n                for (const queryParameter of operationSpec.queryParameters) {\n                    let queryParameterValue = getOperationArgumentValueFromParameter(this, operationArguments, queryParameter, operationSpec.serializer);\n                    if (queryParameterValue !== undefined && queryParameterValue !== null) {\n                        queryParameterValue = operationSpec.serializer.serialize(queryParameter.mapper, queryParameterValue, getPathStringFromParameter(queryParameter), serializerOptions);\n                        if (queryParameter.collectionFormat !== undefined &&\n                            queryParameter.collectionFormat !== null) {\n                            if (queryParameter.collectionFormat === QueryCollectionFormat.Multi) {\n                                if (queryParameterValue.length === 0) {\n                                    // The collection is empty, no need to try serializing the current queryParam\n                                    continue;\n                                }\n                                else {\n                                    for (const index in queryParameterValue) {\n                                        const item = queryParameterValue[index];\n                                        queryParameterValue[index] =\n                                            item === undefined || item === null ? \"\" : item.toString();\n                                    }\n                                }\n                            }\n                            else if (queryParameter.collectionFormat === QueryCollectionFormat.Ssv ||\n                                queryParameter.collectionFormat === QueryCollectionFormat.Tsv) {\n                                queryParameterValue = queryParameterValue.join(queryParameter.collectionFormat);\n                            }\n                        }\n                        if (!queryParameter.skipEncoding) {\n                            if (Array.isArray(queryParameterValue)) {\n                                for (const index in queryParameterValue) {\n                                    if (queryParameterValue[index] !== undefined &&\n                                        queryParameterValue[index] !== null) {\n                                        queryParameterValue[index] = encodeURIComponent(queryParameterValue[index]);\n                                    }\n                                }\n                            }\n                            else {\n                                queryParameterValue = encodeURIComponent(queryParameterValue);\n                            }\n                        }\n                        if (queryParameter.collectionFormat !== undefined &&\n                            queryParameter.collectionFormat !== null &&\n                            queryParameter.collectionFormat !== QueryCollectionFormat.Multi &&\n                            queryParameter.collectionFormat !== QueryCollectionFormat.Ssv &&\n                            queryParameter.collectionFormat !== QueryCollectionFormat.Tsv) {\n                            queryParameterValue = queryParameterValue.join(queryParameter.collectionFormat);\n                        }\n                        requestUrl.setQueryParameter(queryParameter.mapper.serializedName || getPathStringFromParameter(queryParameter), queryParameterValue);\n                    }\n                }\n            }\n            httpRequest.url = requestUrl.toString();\n            const contentType = operationSpec.contentType || this.requestContentType;\n            if (contentType && operationSpec.requestBody) {\n                httpRequest.headers.set(\"Content-Type\", contentType);\n            }\n            if (operationSpec.headerParameters) {\n                for (const headerParameter of operationSpec.headerParameters) {\n                    let headerValue = getOperationArgumentValueFromParameter(this, operationArguments, headerParameter, operationSpec.serializer);\n                    if (headerValue !== undefined && headerValue !== null) {\n                        headerValue = operationSpec.serializer.serialize(headerParameter.mapper, headerValue, getPathStringFromParameter(headerParameter), serializerOptions);\n                        const headerCollectionPrefix = headerParameter.mapper\n                            .headerCollectionPrefix;\n                        if (headerCollectionPrefix) {\n                            for (const key of Object.keys(headerValue)) {\n                                httpRequest.headers.set(headerCollectionPrefix + key, headerValue[key]);\n                            }\n                        }\n                        else {\n                            httpRequest.headers.set(headerParameter.mapper.serializedName ||\n                                getPathStringFromParameter(headerParameter), headerValue);\n                        }\n                    }\n                }\n            }\n            const options = operationArguments.options;\n            if (options) {\n                if (options.customHeaders) {\n                    for (const customHeaderName in options.customHeaders) {\n                        httpRequest.headers.set(customHeaderName, options.customHeaders[customHeaderName]);\n                    }\n                }\n                if (options.abortSignal) {\n                    httpRequest.abortSignal = options.abortSignal;\n                }\n                if (options.timeout) {\n                    httpRequest.timeout = options.timeout;\n                }\n                if (options.onUploadProgress) {\n                    httpRequest.onUploadProgress = options.onUploadProgress;\n                }\n                if (options.onDownloadProgress) {\n                    httpRequest.onDownloadProgress = options.onDownloadProgress;\n                }\n                if (options.spanOptions) {\n                    // By passing spanOptions if they exist at runtime, we're backwards compatible with @azure/core-tracing@preview.13 and earlier.\n                    httpRequest.spanOptions = options.spanOptions;\n                }\n                if (options.tracingContext) {\n                    httpRequest.tracingContext = options.tracingContext;\n                }\n                if (options.shouldDeserialize !== undefined && options.shouldDeserialize !== null) {\n                    httpRequest.shouldDeserialize = options.shouldDeserialize;\n                }\n            }\n            httpRequest.withCredentials = this._withCredentials;\n            serializeRequestBody(this, httpRequest, operationArguments, operationSpec);\n            if (httpRequest.streamResponseStatusCodes === undefined) {\n                httpRequest.streamResponseStatusCodes = getStreamResponseStatusCodes(operationSpec);\n            }\n            let rawResponse;\n            let sendRequestError;\n            try {\n                rawResponse = await this.sendRequest(httpRequest);\n            }\n            catch (error) {\n                sendRequestError = error;\n            }\n            if (sendRequestError) {\n                if (sendRequestError.response) {\n                    sendRequestError.details = flattenResponse(sendRequestError.response, operationSpec.responses[sendRequestError.statusCode] ||\n                        operationSpec.responses[\"default\"]);\n                }\n                result = Promise.reject(sendRequestError);\n            }\n            else {\n                result = Promise.resolve(flattenResponse(rawResponse, operationSpec.responses[rawResponse.status]));\n            }\n        }\n        catch (error) {\n            result = Promise.reject(error);\n        }\n        const cb = callback;\n        if (cb) {\n            result\n                .then((res) => cb(null, res._response.parsedBody, res._response.request, res._response))\n                .catch((err) => cb(err));\n        }\n        return result;\n    }\n}\nexport function serializeRequestBody(serviceClient, httpRequest, operationArguments, operationSpec) {\n    var _a, _b, _c, _d, _e, _f;\n    const serializerOptions = (_b = (_a = operationArguments.options) === null || _a === void 0 ? void 0 : _a.serializerOptions) !== null && _b !== void 0 ? _b : {};\n    const updatedOptions = {\n        rootName: (_c = serializerOptions.rootName) !== null && _c !== void 0 ? _c : \"\",\n        includeRoot: (_d = serializerOptions.includeRoot) !== null && _d !== void 0 ? _d : false,\n        xmlCharKey: (_e = serializerOptions.xmlCharKey) !== null && _e !== void 0 ? _e : XML_CHARKEY,\n    };\n    const xmlCharKey = serializerOptions.xmlCharKey;\n    if (operationSpec.requestBody && operationSpec.requestBody.mapper) {\n        httpRequest.body = getOperationArgumentValueFromParameter(serviceClient, operationArguments, operationSpec.requestBody, operationSpec.serializer);\n        const bodyMapper = operationSpec.requestBody.mapper;\n        const { required, xmlName, xmlElementName, serializedName, xmlNamespace, xmlNamespacePrefix } = bodyMapper;\n        const typeName = bodyMapper.type.name;\n        try {\n            if ((httpRequest.body !== undefined && httpRequest.body !== null) || required) {\n                const requestBodyParameterPathString = getPathStringFromParameter(operationSpec.requestBody);\n                httpRequest.body = operationSpec.serializer.serialize(bodyMapper, httpRequest.body, requestBodyParameterPathString, updatedOptions);\n                const isStream = typeName === MapperType.Stream;\n                if (operationSpec.isXML) {\n                    const xmlnsKey = xmlNamespacePrefix ? `xmlns:${xmlNamespacePrefix}` : \"xmlns\";\n                    const value = getXmlValueWithNamespace(xmlNamespace, xmlnsKey, typeName, httpRequest.body, updatedOptions);\n                    if (typeName === MapperType.Sequence) {\n                        httpRequest.body = stringifyXML(utils.prepareXMLRootList(value, xmlElementName || xmlName || serializedName, xmlnsKey, xmlNamespace), {\n                            rootName: xmlName || serializedName,\n                            xmlCharKey,\n                        });\n                    }\n                    else if (!isStream) {\n                        httpRequest.body = stringifyXML(value, {\n                            rootName: xmlName || serializedName,\n                            xmlCharKey,\n                        });\n                    }\n                }\n                else if (typeName === MapperType.String &&\n                    (((_f = operationSpec.contentType) === null || _f === void 0 ? void 0 : _f.match(\"text/plain\")) || operationSpec.mediaType === \"text\")) {\n                    // the String serializer has validated that request body is a string\n                    // so just send the string.\n                    return;\n                }\n                else if (!isStream) {\n                    httpRequest.body = JSON.stringify(httpRequest.body);\n                }\n            }\n        }\n        catch (error) {\n            throw new Error(`Error \"${error.message}\" occurred in serializing the payload - ${JSON.stringify(serializedName, undefined, \"  \")}.`);\n        }\n    }\n    else if (operationSpec.formDataParameters && operationSpec.formDataParameters.length > 0) {\n        httpRequest.formData = {};\n        for (const formDataParameter of operationSpec.formDataParameters) {\n            const formDataParameterValue = getOperationArgumentValueFromParameter(serviceClient, operationArguments, formDataParameter, operationSpec.serializer);\n            if (formDataParameterValue !== undefined && formDataParameterValue !== null) {\n                const formDataParameterPropertyName = formDataParameter.mapper.serializedName || getPathStringFromParameter(formDataParameter);\n                httpRequest.formData[formDataParameterPropertyName] = operationSpec.serializer.serialize(formDataParameter.mapper, formDataParameterValue, getPathStringFromParameter(formDataParameter), updatedOptions);\n            }\n        }\n    }\n}\n/**\n * Adds an xml namespace to the xml serialized object if needed, otherwise it just returns the value itself\n */\nfunction getXmlValueWithNamespace(xmlNamespace, xmlnsKey, typeName, serializedValue, options) {\n    // Composite and Sequence schemas already got their root namespace set during serialization\n    // We just need to add xmlns to the other schema types\n    if (xmlNamespace && ![\"Composite\", \"Sequence\", \"Dictionary\"].includes(typeName)) {\n        const result = {};\n        result[options.xmlCharKey] = serializedValue;\n        result[XML_ATTRKEY] = { [xmlnsKey]: xmlNamespace };\n        return result;\n    }\n    return serializedValue;\n}\nfunction getValueOrFunctionResult(value, defaultValueCreator) {\n    let result;\n    if (typeof value === \"string\") {\n        result = value;\n    }\n    else {\n        result = defaultValueCreator();\n        if (typeof value === \"function\") {\n            result = value(result);\n        }\n    }\n    return result;\n}\nfunction createDefaultRequestPolicyFactories(authPolicyFactory, options) {\n    const factories = [];\n    if (options.generateClientRequestIdHeader) {\n        factories.push(generateClientRequestIdPolicy(options.clientRequestIdHeaderName));\n    }\n    if (authPolicyFactory) {\n        factories.push(authPolicyFactory);\n    }\n    const userAgentHeaderName = getValueOrFunctionResult(options.userAgentHeaderName, getDefaultUserAgentHeaderName);\n    const userAgentHeaderValue = getValueOrFunctionResult(options.userAgent, getDefaultUserAgentValue);\n    if (userAgentHeaderName && userAgentHeaderValue) {\n        factories.push(userAgentPolicy({ key: userAgentHeaderName, value: userAgentHeaderValue }));\n    }\n    factories.push(redirectPolicy());\n    factories.push(rpRegistrationPolicy(options.rpRegistrationRetryTimeout));\n    if (!options.noRetryPolicy) {\n        factories.push(exponentialRetryPolicy());\n        factories.push(systemErrorRetryPolicy());\n        factories.push(throttlingRetryPolicy());\n    }\n    factories.push(deserializationPolicy(options.deserializationContentTypes));\n    if (isNode) {\n        factories.push(proxyPolicy(options.proxySettings));\n    }\n    factories.push(logPolicy({ logger: logger.info }));\n    return factories;\n}\n/**\n * Creates an HTTP pipeline based on the given options.\n * @param pipelineOptions - Defines options that are used to configure policies in the HTTP pipeline for an SDK client.\n * @param authPolicyFactory - An optional authentication policy factory to use for signing requests.\n * @returns A set of options that can be passed to create a new {@link ServiceClient}.\n */\nexport function createPipelineFromOptions(pipelineOptions, authPolicyFactory) {\n    const requestPolicyFactories = [];\n    if (pipelineOptions.sendStreamingJson) {\n        requestPolicyFactories.push(ndJsonPolicy());\n    }\n    let userAgentValue = undefined;\n    if (pipelineOptions.userAgentOptions && pipelineOptions.userAgentOptions.userAgentPrefix) {\n        const userAgentInfo = [];\n        userAgentInfo.push(pipelineOptions.userAgentOptions.userAgentPrefix);\n        // Add the default user agent value if it isn't already specified\n        // by the userAgentPrefix option.\n        const defaultUserAgentInfo = getDefaultUserAgentValue();\n        if (userAgentInfo.indexOf(defaultUserAgentInfo) === -1) {\n            userAgentInfo.push(defaultUserAgentInfo);\n        }\n        userAgentValue = userAgentInfo.join(\" \");\n    }\n    const keepAliveOptions = Object.assign(Object.assign({}, DefaultKeepAliveOptions), pipelineOptions.keepAliveOptions);\n    const retryOptions = Object.assign(Object.assign({}, DefaultRetryOptions), pipelineOptions.retryOptions);\n    const redirectOptions = Object.assign(Object.assign({}, DefaultRedirectOptions), pipelineOptions.redirectOptions);\n    if (isNode) {\n        requestPolicyFactories.push(proxyPolicy(pipelineOptions.proxyOptions));\n    }\n    const deserializationOptions = Object.assign(Object.assign({}, DefaultDeserializationOptions), pipelineOptions.deserializationOptions);\n    const loggingOptions = Object.assign({}, pipelineOptions.loggingOptions);\n    requestPolicyFactories.push(tracingPolicy({ userAgent: userAgentValue }), keepAlivePolicy(keepAliveOptions), userAgentPolicy({ value: userAgentValue }), generateClientRequestIdPolicy(), deserializationPolicy(deserializationOptions.expectedContentTypes), throttlingRetryPolicy(), systemErrorRetryPolicy(), exponentialRetryPolicy(retryOptions.maxRetries, retryOptions.retryDelayInMs, retryOptions.maxRetryDelayInMs));\n    if (redirectOptions.handleRedirects) {\n        requestPolicyFactories.push(redirectPolicy(redirectOptions.maxRetries));\n    }\n    if (authPolicyFactory) {\n        requestPolicyFactories.push(authPolicyFactory);\n    }\n    requestPolicyFactories.push(logPolicy(loggingOptions));\n    if (isNode && pipelineOptions.decompressResponse === false) {\n        requestPolicyFactories.push(disableResponseDecompressionPolicy());\n    }\n    return {\n        httpClient: pipelineOptions.httpClient,\n        requestPolicyFactories,\n    };\n}\n/**\n * Get the property parent for the property at the provided path when starting with the provided\n * parent object.\n */\nexport function getPropertyParent(parent, propertyPath) {\n    if (parent && propertyPath) {\n        const propertyPathLength = propertyPath.length;\n        for (let i = 0; i < propertyPathLength - 1; ++i) {\n            const propertyName = propertyPath[i];\n            if (!parent[propertyName]) {\n                parent[propertyName] = {};\n            }\n            parent = parent[propertyName];\n        }\n    }\n    return parent;\n}\nfunction getOperationArgumentValueFromParameter(serviceClient, operationArguments, parameter, serializer) {\n    return getOperationArgumentValueFromParameterPath(serviceClient, operationArguments, parameter.parameterPath, parameter.mapper, serializer);\n}\nexport function getOperationArgumentValueFromParameterPath(serviceClient, operationArguments, parameterPath, parameterMapper, serializer) {\n    var _a;\n    let value;\n    if (typeof parameterPath === \"string\") {\n        parameterPath = [parameterPath];\n    }\n    const serializerOptions = (_a = operationArguments.options) === null || _a === void 0 ? void 0 : _a.serializerOptions;\n    if (Array.isArray(parameterPath)) {\n        if (parameterPath.length > 0) {\n            if (parameterMapper.isConstant) {\n                value = parameterMapper.defaultValue;\n            }\n            else {\n                let propertySearchResult = getPropertyFromParameterPath(operationArguments, parameterPath);\n                if (!propertySearchResult.propertyFound) {\n                    propertySearchResult = getPropertyFromParameterPath(serviceClient, parameterPath);\n                }\n                let useDefaultValue = false;\n                if (!propertySearchResult.propertyFound) {\n                    useDefaultValue =\n                        parameterMapper.required ||\n                            (parameterPath[0] === \"options\" && parameterPath.length === 2);\n                }\n                value = useDefaultValue ? parameterMapper.defaultValue : propertySearchResult.propertyValue;\n            }\n            // Serialize just for validation purposes.\n            const parameterPathString = getPathStringFromParameterPath(parameterPath, parameterMapper);\n            serializer.serialize(parameterMapper, value, parameterPathString, serializerOptions);\n        }\n    }\n    else {\n        if (parameterMapper.required) {\n            value = {};\n        }\n        for (const propertyName in parameterPath) {\n            const propertyMapper = parameterMapper.type.modelProperties[propertyName];\n            const propertyPath = parameterPath[propertyName];\n            const propertyValue = getOperationArgumentValueFromParameterPath(serviceClient, operationArguments, propertyPath, propertyMapper, serializer);\n            // Serialize just for validation purposes.\n            const propertyPathString = getPathStringFromParameterPath(propertyPath, propertyMapper);\n            serializer.serialize(propertyMapper, propertyValue, propertyPathString, serializerOptions);\n            if (propertyValue !== undefined && propertyValue !== null) {\n                if (!value) {\n                    value = {};\n                }\n                value[propertyName] = propertyValue;\n            }\n        }\n    }\n    return value;\n}\nfunction getPropertyFromParameterPath(parent, parameterPath) {\n    const result = { propertyFound: false };\n    let i = 0;\n    for (; i < parameterPath.length; ++i) {\n        const parameterPathPart = parameterPath[i];\n        // Make sure to check inherited properties too, so don't use hasOwnProperty().\n        if (parent !== undefined && parent !== null && parameterPathPart in parent) {\n            parent = parent[parameterPathPart];\n        }\n        else {\n            break;\n        }\n    }\n    if (i === parameterPath.length) {\n        result.propertyValue = parent;\n        result.propertyFound = true;\n    }\n    return result;\n}\n/**\n * Parses an {@link HttpOperationResponse} into a normalized HTTP response object ({@link RestResponse}).\n * @param _response - Wrapper object for http response.\n * @param responseSpec - Mappers for how to parse the response properties.\n * @returns - A normalized response object.\n */\nexport function flattenResponse(_response, responseSpec) {\n    const parsedHeaders = _response.parsedHeaders;\n    const bodyMapper = responseSpec && responseSpec.bodyMapper;\n    const addOperationResponse = (obj) => {\n        return Object.defineProperty(obj, \"_response\", {\n            value: _response,\n        });\n    };\n    if (bodyMapper) {\n        const typeName = bodyMapper.type.name;\n        if (typeName === \"Stream\") {\n            return addOperationResponse(Object.assign(Object.assign({}, parsedHeaders), { blobBody: _response.blobBody, readableStreamBody: _response.readableStreamBody }));\n        }\n        const modelProperties = (typeName === \"Composite\" && bodyMapper.type.modelProperties) || {};\n        const isPageableResponse = Object.keys(modelProperties).some((k) => modelProperties[k].serializedName === \"\");\n        if (typeName === \"Sequence\" || isPageableResponse) {\n            const arrayResponse = [...(_response.parsedBody || [])];\n            for (const key of Object.keys(modelProperties)) {\n                if (modelProperties[key].serializedName) {\n                    arrayResponse[key] = _response.parsedBody[key];\n                }\n            }\n            if (parsedHeaders) {\n                for (const key of Object.keys(parsedHeaders)) {\n                    arrayResponse[key] = parsedHeaders[key];\n                }\n            }\n            addOperationResponse(arrayResponse);\n            return arrayResponse;\n        }\n        if (typeName === \"Composite\" || typeName === \"Dictionary\") {\n            return addOperationResponse(Object.assign(Object.assign({}, parsedHeaders), _response.parsedBody));\n        }\n    }\n    if (bodyMapper ||\n        _response.request.method === \"HEAD\" ||\n        utils.isPrimitiveType(_response.parsedBody)) {\n        // primitive body types and HEAD booleans\n        return addOperationResponse(Object.assign(Object.assign({}, parsedHeaders), { body: _response.parsedBody }));\n    }\n    return addOperationResponse(Object.assign(Object.assign({}, parsedHeaders), _response.parsedBody));\n}\nfunction getCredentialScopes(options, baseUri) {\n    if (options === null || options === void 0 ? void 0 : options.credentialScopes) {\n        const scopes = options.credentialScopes;\n        return Array.isArray(scopes)\n            ? scopes.map((scope) => new URL(scope).toString())\n            : new URL(scopes).toString();\n    }\n    if (baseUri) {\n        return `${baseUri}/.default`;\n    }\n    return undefined;\n}\n//# sourceMappingURL=serviceClient.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { MapperType } from \"./serializer\";\n/**\n * Gets the list of status codes for streaming responses.\n * @internal\n */\nexport function getStreamResponseStatusCodes(operationSpec) {\n    const result = new Set();\n    for (const statusCode in operationSpec.responses) {\n        const operationResponse = operationSpec.responses[statusCode];\n        if (operationResponse.bodyMapper &&\n            operationResponse.bodyMapper.type.name === MapperType.Stream) {\n            result.add(Number(statusCode));\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=operationSpec.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n// NOTE: we've moved this code into core-tracing but these functions\n// were a part of the GA'd library and can't be removed until the next major\n// release. They currently get called always, even if tracing is not enabled.\nimport { createSpanFunction as coreTracingCreateSpanFunction } from \"@azure/core-tracing\";\n/**\n * This function is only here for compatibility. Use createSpanFunction in core-tracing.\n *\n * @deprecated This function is only here for compatibility. Use createSpanFunction in core-tracing.\n * @hidden\n\n * @param spanConfig - The name of the operation being performed.\n * @param tracingOptions - The options for the underlying http request.\n */\nexport function createSpanFunction(args) {\n    return coreTracingCreateSpanFunction(args);\n}\n//# sourceMappingURL=createSpanLegacy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Defines the default token refresh buffer duration.\n */\nexport const TokenRefreshBufferMs = 2 * 60 * 1000; // 2 Minutes\n/**\n * Provides an {@link AccessTokenCache} implementation which clears\n * the cached {@link AccessToken}'s after the expiresOnTimestamp has\n * passed.\n *\n * @deprecated No longer used in the bearer authorization policy.\n */\nexport class ExpiringAccessTokenCache {\n    /**\n     * Constructs an instance of {@link ExpiringAccessTokenCache} with\n     * an optional expiration buffer time.\n     */\n    constructor(tokenRefreshBufferMs = TokenRefreshBufferMs) {\n        this.cachedToken = undefined;\n        this.tokenRefreshBufferMs = tokenRefreshBufferMs;\n    }\n    /**\n     * Saves an access token into the internal in-memory cache.\n     * @param accessToken - Access token or undefined to clear the cache.\n     */\n    setCachedToken(accessToken) {\n        this.cachedToken = accessToken;\n    }\n    /**\n     * Returns the cached access token, or `undefined` if one is not cached or the cached one is expiring soon.\n     */\n    getCachedToken() {\n        if (this.cachedToken &&\n            Date.now() + this.tokenRefreshBufferMs >= this.cachedToken.expiresOnTimestamp) {\n            this.cachedToken = undefined;\n        }\n        return this.cachedToken;\n    }\n}\n//# sourceMappingURL=accessTokenCache.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Helps the core-http token authentication policies with requesting a new token if we're not currently waiting for a new token.\n *\n * @deprecated No longer used in the bearer authorization policy.\n */\nexport class AccessTokenRefresher {\n    constructor(credential, scopes, requiredMillisecondsBeforeNewRefresh = 30000) {\n        this.credential = credential;\n        this.scopes = scopes;\n        this.requiredMillisecondsBeforeNewRefresh = requiredMillisecondsBeforeNewRefresh;\n        this.lastCalled = 0;\n    }\n    /**\n     * Returns true if the required milliseconds(defaulted to 30000) have been passed signifying\n     * that we are ready for a new refresh.\n     */\n    isReady() {\n        // We're only ready for a new refresh if the required milliseconds have passed.\n        return (!this.lastCalled || Date.now() - this.lastCalled > this.requiredMillisecondsBeforeNewRefresh);\n    }\n    /**\n     * Stores the time in which it is called,\n     * then requests a new token,\n     * then sets this.promise to undefined,\n     * then returns the token.\n     */\n    async getToken(options) {\n        this.lastCalled = Date.now();\n        const token = await this.credential.getToken(this.scopes, options);\n        this.promise = undefined;\n        return token || undefined;\n    }\n    /**\n     * Requests a new token if we're not currently waiting for a new token.\n     * Returns null if the required time between each call hasn't been reached.\n     */\n    refresh(options) {\n        if (!this.promise) {\n            this.promise = this.getToken(options);\n        }\n        return this.promise;\n    }\n}\n//# sourceMappingURL=accessTokenRefresher.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport * as base64 from \"../util/base64\";\nimport { Constants } from \"../util/constants\";\nimport { HttpHeaders } from \"../httpHeaders\";\nconst HeaderConstants = Constants.HeaderConstants;\nconst DEFAULT_AUTHORIZATION_SCHEME = \"Basic\";\n/**\n * A simple {@link ServiceClientCredential} that authenticates with a username and a password.\n */\nexport class BasicAuthenticationCredentials {\n    /**\n     * Creates a new BasicAuthenticationCredentials object.\n     *\n     * @param userName - User name.\n     * @param password - Password.\n     * @param authorizationScheme - The authorization scheme.\n     */\n    constructor(userName, password, authorizationScheme = DEFAULT_AUTHORIZATION_SCHEME) {\n        /**\n         * Authorization scheme. Defaults to \"Basic\".\n         * More information about authorization schemes is available here: https://developer.mozilla.org/docs/Web/HTTP/Authentication#authentication_schemes\n         */\n        this.authorizationScheme = DEFAULT_AUTHORIZATION_SCHEME;\n        if (userName === null || userName === undefined || typeof userName.valueOf() !== \"string\") {\n            throw new Error(\"userName cannot be null or undefined and must be of type string.\");\n        }\n        if (password === null || password === undefined || typeof password.valueOf() !== \"string\") {\n            throw new Error(\"password cannot be null or undefined and must be of type string.\");\n        }\n        this.userName = userName;\n        this.password = password;\n        this.authorizationScheme = authorizationScheme;\n    }\n    /**\n     * Signs a request with the Authentication header.\n     *\n     * @param webResource - The WebResourceLike to be signed.\n     * @returns The signed request object.\n     */\n    signRequest(webResource) {\n        const credentials = `${this.userName}:${this.password}`;\n        const encodedCredentials = `${this.authorizationScheme} ${base64.encodeString(credentials)}`;\n        if (!webResource.headers)\n            webResource.headers = new HttpHeaders();\n        webResource.headers.set(HeaderConstants.AUTHORIZATION, encodedCredentials);\n        return Promise.resolve(webResource);\n    }\n}\n//# sourceMappingURL=basicAuthenticationCredentials.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { HttpHeaders } from \"../httpHeaders\";\n/**\n * Authenticates to a service using an API key.\n */\nexport class ApiKeyCredentials {\n    /**\n     * @param options - Specifies the options to be provided for auth. Either header or query needs to be provided.\n     */\n    constructor(options) {\n        if (!options || (options && !options.inHeader && !options.inQuery)) {\n            throw new Error(`options cannot be null or undefined. Either \"inHeader\" or \"inQuery\" property of the options object needs to be provided.`);\n        }\n        this.inHeader = options.inHeader;\n        this.inQuery = options.inQuery;\n    }\n    /**\n     * Signs a request with the values provided in the inHeader and inQuery parameter.\n     *\n     * @param webResource - The WebResourceLike to be signed.\n     * @returns The signed request object.\n     */\n    signRequest(webResource) {\n        if (!webResource) {\n            return Promise.reject(new Error(`webResource cannot be null or undefined and must be of type \"object\".`));\n        }\n        if (this.inHeader) {\n            if (!webResource.headers) {\n                webResource.headers = new HttpHeaders();\n            }\n            for (const headerName in this.inHeader) {\n                webResource.headers.set(headerName, this.inHeader[headerName]);\n            }\n        }\n        if (this.inQuery) {\n            if (!webResource.url) {\n                return Promise.reject(new Error(`url cannot be null in the request object.`));\n            }\n            if (webResource.url.indexOf(\"?\") < 0) {\n                webResource.url += \"?\";\n            }\n            for (const key in this.inQuery) {\n                if (!webResource.url.endsWith(\"?\")) {\n                    webResource.url += \"&\";\n                }\n                webResource.url += `${key}=${this.inQuery[key]}`;\n            }\n        }\n        return Promise.resolve(webResource);\n    }\n}\n//# sourceMappingURL=apiKeyCredentials.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { ApiKeyCredentials } from \"./apiKeyCredentials\";\n/**\n * A {@link TopicCredentials} object used for Azure Event Grid.\n */\nexport class TopicCredentials extends ApiKeyCredentials {\n    /**\n     * Creates a new EventGrid TopicCredentials object.\n     *\n     * @param topicKey - The EventGrid topic key\n     */\n    constructor(topicKey) {\n        if (!topicKey || (topicKey && typeof topicKey !== \"string\")) {\n            throw new Error(\"topicKey cannot be null or undefined and must be of type string.\");\n        }\n        const options = {\n            inHeader: {\n                \"aeg-sas-key\": topicKey,\n            },\n        };\n        super(options);\n    }\n}\n//# sourceMappingURL=topicCredentials.js.map","var CombinedStream = require('combined-stream');\nvar util = require('util');\nvar path = require('path');\nvar http = require('http');\nvar https = require('https');\nvar parseUrl = require('url').parse;\nvar fs = require('fs');\nvar Stream = require('stream').Stream;\nvar mime = require('mime-types');\nvar asynckit = require('asynckit');\nvar populate = require('./populate.js');\n\n// Public API\nmodule.exports = FormData;\n\n// make it a Stream\nutil.inherits(FormData, CombinedStream);\n\n/**\n * Create readable \"multipart/form-data\" streams.\n * Can be used to submit forms\n * and file uploads to other web applications.\n *\n * @constructor\n * @param {Object} options - Properties to be added/overriden for FormData and CombinedStream\n */\nfunction FormData(options) {\n  if (!(this instanceof FormData)) {\n    return new FormData(options);\n  }\n\n  this._overheadLength = 0;\n  this._valueLength = 0;\n  this._valuesToMeasure = [];\n\n  CombinedStream.call(this);\n\n  options = options || {};\n  for (var option in options) {\n    this[option] = options[option];\n  }\n}\n\nFormData.LINE_BREAK = '\\r\\n';\nFormData.DEFAULT_CONTENT_TYPE = 'application/octet-stream';\n\nFormData.prototype.append = function(field, value, options) {\n\n  options = options || {};\n\n  // allow filename as single option\n  if (typeof options == 'string') {\n    options = {filename: options};\n  }\n\n  var append = CombinedStream.prototype.append.bind(this);\n\n  // all that streamy business can't handle numbers\n  if (typeof value == 'number') {\n    value = '' + value;\n  }\n\n  // https://github.com/felixge/node-form-data/issues/38\n  if (util.isArray(value)) {\n    // Please convert your array into string\n    // the way web server expects it\n    this._error(new Error('Arrays are not supported.'));\n    return;\n  }\n\n  var header = this._multiPartHeader(field, value, options);\n  var footer = this._multiPartFooter();\n\n  append(header);\n  append(value);\n  append(footer);\n\n  // pass along options.knownLength\n  this._trackLength(header, value, options);\n};\n\nFormData.prototype._trackLength = function(header, value, options) {\n  var valueLength = 0;\n\n  // used w/ getLengthSync(), when length is known.\n  // e.g. for streaming directly from a remote server,\n  // w/ a known file a size, and not wanting to wait for\n  // incoming file to finish to get its size.\n  if (options.knownLength != null) {\n    valueLength += +options.knownLength;\n  } else if (Buffer.isBuffer(value)) {\n    valueLength = value.length;\n  } else if (typeof value === 'string') {\n    valueLength = Buffer.byteLength(value);\n  }\n\n  this._valueLength += valueLength;\n\n  // @check why add CRLF? does this account for custom/multiple CRLFs?\n  this._overheadLength +=\n    Buffer.byteLength(header) +\n    FormData.LINE_BREAK.length;\n\n  // empty or either doesn't have path or not an http response or not a stream\n  if (!value || ( !value.path && !(value.readable && value.hasOwnProperty('httpVersion')) && !(value instanceof Stream))) {\n    return;\n  }\n\n  // no need to bother with the length\n  if (!options.knownLength) {\n    this._valuesToMeasure.push(value);\n  }\n};\n\nFormData.prototype._lengthRetriever = function(value, callback) {\n\n  if (value.hasOwnProperty('fd')) {\n\n    // take read range into a account\n    // `end` = Infinity –> read file till the end\n    //\n    // TODO: Looks like there is bug in Node fs.createReadStream\n    // it doesn't respect `end` options without `start` options\n    // Fix it when node fixes it.\n    // https://github.com/joyent/node/issues/7819\n    if (value.end != undefined && value.end != Infinity && value.start != undefined) {\n\n      // when end specified\n      // no need to calculate range\n      // inclusive, starts with 0\n      callback(null, value.end + 1 - (value.start ? value.start : 0));\n\n    // not that fast snoopy\n    } else {\n      // still need to fetch file size from fs\n      fs.stat(value.path, function(err, stat) {\n\n        var fileSize;\n\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        // update final size based on the range options\n        fileSize = stat.size - (value.start ? value.start : 0);\n        callback(null, fileSize);\n      });\n    }\n\n  // or http response\n  } else if (value.hasOwnProperty('httpVersion')) {\n    callback(null, +value.headers['content-length']);\n\n  // or request stream http://github.com/mikeal/request\n  } else if (value.hasOwnProperty('httpModule')) {\n    // wait till response come back\n    value.on('response', function(response) {\n      value.pause();\n      callback(null, +response.headers['content-length']);\n    });\n    value.resume();\n\n  // something else\n  } else {\n    callback('Unknown stream');\n  }\n};\n\nFormData.prototype._multiPartHeader = function(field, value, options) {\n  // custom header specified (as string)?\n  // it becomes responsible for boundary\n  // (e.g. to handle extra CRLFs on .NET servers)\n  if (typeof options.header == 'string') {\n    return options.header;\n  }\n\n  var contentDisposition = this._getContentDisposition(value, options);\n  var contentType = this._getContentType(value, options);\n\n  var contents = '';\n  var headers  = {\n    // add custom disposition as third element or keep it two elements if not\n    'Content-Disposition': ['form-data', 'name=\"' + field + '\"'].concat(contentDisposition || []),\n    // if no content type. allow it to be empty array\n    'Content-Type': [].concat(contentType || [])\n  };\n\n  // allow custom headers.\n  if (typeof options.header == 'object') {\n    populate(headers, options.header);\n  }\n\n  var header;\n  for (var prop in headers) {\n    if (!headers.hasOwnProperty(prop)) continue;\n    header = headers[prop];\n\n    // skip nullish headers.\n    if (header == null) {\n      continue;\n    }\n\n    // convert all headers to arrays.\n    if (!Array.isArray(header)) {\n      header = [header];\n    }\n\n    // add non-empty headers.\n    if (header.length) {\n      contents += prop + ': ' + header.join('; ') + FormData.LINE_BREAK;\n    }\n  }\n\n  return '--' + this.getBoundary() + FormData.LINE_BREAK + contents + FormData.LINE_BREAK;\n};\n\nFormData.prototype._getContentDisposition = function(value, options) {\n\n  var filename\n    , contentDisposition\n    ;\n\n  if (typeof options.filepath === 'string') {\n    // custom filepath for relative paths\n    filename = path.normalize(options.filepath).replace(/\\\\/g, '/');\n  } else if (options.filename || value.name || value.path) {\n    // custom filename take precedence\n    // formidable and the browser add a name property\n    // fs- and request- streams have path property\n    filename = path.basename(options.filename || value.name || value.path);\n  } else if (value.readable && value.hasOwnProperty('httpVersion')) {\n    // or try http response\n    filename = path.basename(value.client._httpMessage.path || '');\n  }\n\n  if (filename) {\n    contentDisposition = 'filename=\"' + filename + '\"';\n  }\n\n  return contentDisposition;\n};\n\nFormData.prototype._getContentType = function(value, options) {\n\n  // use custom content-type above all\n  var contentType = options.contentType;\n\n  // or try `name` from formidable, browser\n  if (!contentType && value.name) {\n    contentType = mime.lookup(value.name);\n  }\n\n  // or try `path` from fs-, request- streams\n  if (!contentType && value.path) {\n    contentType = mime.lookup(value.path);\n  }\n\n  // or if it's http-reponse\n  if (!contentType && value.readable && value.hasOwnProperty('httpVersion')) {\n    contentType = value.headers['content-type'];\n  }\n\n  // or guess it from the filepath or filename\n  if (!contentType && (options.filepath || options.filename)) {\n    contentType = mime.lookup(options.filepath || options.filename);\n  }\n\n  // fallback to the default content type if `value` is not simple value\n  if (!contentType && typeof value == 'object') {\n    contentType = FormData.DEFAULT_CONTENT_TYPE;\n  }\n\n  return contentType;\n};\n\nFormData.prototype._multiPartFooter = function() {\n  return function(next) {\n    var footer = FormData.LINE_BREAK;\n\n    var lastPart = (this._streams.length === 0);\n    if (lastPart) {\n      footer += this._lastBoundary();\n    }\n\n    next(footer);\n  }.bind(this);\n};\n\nFormData.prototype._lastBoundary = function() {\n  return '--' + this.getBoundary() + '--' + FormData.LINE_BREAK;\n};\n\nFormData.prototype.getHeaders = function(userHeaders) {\n  var header;\n  var formHeaders = {\n    'content-type': 'multipart/form-data; boundary=' + this.getBoundary()\n  };\n\n  for (header in userHeaders) {\n    if (userHeaders.hasOwnProperty(header)) {\n      formHeaders[header.toLowerCase()] = userHeaders[header];\n    }\n  }\n\n  return formHeaders;\n};\n\nFormData.prototype.setBoundary = function(boundary) {\n  this._boundary = boundary;\n};\n\nFormData.prototype.getBoundary = function() {\n  if (!this._boundary) {\n    this._generateBoundary();\n  }\n\n  return this._boundary;\n};\n\nFormData.prototype.getBuffer = function() {\n  var dataBuffer = new Buffer.alloc( 0 );\n  var boundary = this.getBoundary();\n\n  // Create the form content. Add Line breaks to the end of data.\n  for (var i = 0, len = this._streams.length; i < len; i++) {\n    if (typeof this._streams[i] !== 'function') {\n\n      // Add content to the buffer.\n      if(Buffer.isBuffer(this._streams[i])) {\n        dataBuffer = Buffer.concat( [dataBuffer, this._streams[i]]);\n      }else {\n        dataBuffer = Buffer.concat( [dataBuffer, Buffer.from(this._streams[i])]);\n      }\n\n      // Add break after content.\n      if (typeof this._streams[i] !== 'string' || this._streams[i].substring( 2, boundary.length + 2 ) !== boundary) {\n        dataBuffer = Buffer.concat( [dataBuffer, Buffer.from(FormData.LINE_BREAK)] );\n      }\n    }\n  }\n\n  // Add the footer and return the Buffer object.\n  return Buffer.concat( [dataBuffer, Buffer.from(this._lastBoundary())] );\n};\n\nFormData.prototype._generateBoundary = function() {\n  // This generates a 50 character boundary similar to those used by Firefox.\n  // They are optimized for boyer-moore parsing.\n  var boundary = '--------------------------';\n  for (var i = 0; i < 24; i++) {\n    boundary += Math.floor(Math.random() * 10).toString(16);\n  }\n\n  this._boundary = boundary;\n};\n\n// Note: getLengthSync DOESN'T calculate streams length\n// As workaround one can calculate file size manually\n// and add it as knownLength option\nFormData.prototype.getLengthSync = function() {\n  var knownLength = this._overheadLength + this._valueLength;\n\n  // Don't get confused, there are 3 \"internal\" streams for each keyval pair\n  // so it basically checks if there is any value added to the form\n  if (this._streams.length) {\n    knownLength += this._lastBoundary().length;\n  }\n\n  // https://github.com/form-data/form-data/issues/40\n  if (!this.hasKnownLength()) {\n    // Some async length retrievers are present\n    // therefore synchronous length calculation is false.\n    // Please use getLength(callback) to get proper length\n    this._error(new Error('Cannot calculate proper length in synchronous way.'));\n  }\n\n  return knownLength;\n};\n\n// Public API to check if length of added values is known\n// https://github.com/form-data/form-data/issues/196\n// https://github.com/form-data/form-data/issues/262\nFormData.prototype.hasKnownLength = function() {\n  var hasKnownLength = true;\n\n  if (this._valuesToMeasure.length) {\n    hasKnownLength = false;\n  }\n\n  return hasKnownLength;\n};\n\nFormData.prototype.getLength = function(cb) {\n  var knownLength = this._overheadLength + this._valueLength;\n\n  if (this._streams.length) {\n    knownLength += this._lastBoundary().length;\n  }\n\n  if (!this._valuesToMeasure.length) {\n    process.nextTick(cb.bind(this, null, knownLength));\n    return;\n  }\n\n  asynckit.parallel(this._valuesToMeasure, this._lengthRetriever, function(err, values) {\n    if (err) {\n      cb(err);\n      return;\n    }\n\n    values.forEach(function(length) {\n      knownLength += length;\n    });\n\n    cb(null, knownLength);\n  });\n};\n\nFormData.prototype.submit = function(params, cb) {\n  var request\n    , options\n    , defaults = {method: 'post'}\n    ;\n\n  // parse provided url if it's string\n  // or treat it as options object\n  if (typeof params == 'string') {\n\n    params = parseUrl(params);\n    options = populate({\n      port: params.port,\n      path: params.pathname,\n      host: params.hostname,\n      protocol: params.protocol\n    }, defaults);\n\n  // use custom params\n  } else {\n\n    options = populate(params, defaults);\n    // if no port provided use default one\n    if (!options.port) {\n      options.port = options.protocol == 'https:' ? 443 : 80;\n    }\n  }\n\n  // put that good code in getHeaders to some use\n  options.headers = this.getHeaders(params.headers);\n\n  // https if specified, fallback to http in any other case\n  if (options.protocol == 'https:') {\n    request = https.request(options);\n  } else {\n    request = http.request(options);\n  }\n\n  // get content length and fire away\n  this.getLength(function(err, length) {\n    if (err && err !== 'Unknown stream') {\n      this._error(err);\n      return;\n    }\n\n    // add content length\n    if (length) {\n      request.setHeader('Content-Length', length);\n    }\n\n    this.pipe(request);\n    if (cb) {\n      var onResponse;\n\n      var callback = function (error, responce) {\n        request.removeListener('error', callback);\n        request.removeListener('response', onResponse);\n\n        return cb.call(this, error, responce);\n      };\n\n      onResponse = callback.bind(this, null);\n\n      request.on('error', callback);\n      request.on('response', onResponse);\n    }\n  }.bind(this));\n\n  return request;\n};\n\nFormData.prototype._error = function(err) {\n  if (!this.error) {\n    this.error = err;\n    this.pause();\n    this.emit('error', err);\n  }\n};\n\nFormData.prototype.toString = function () {\n  return '[object FormData]';\n};\n","// populates missing values\nmodule.exports = function(dst, src) {\n\n  Object.keys(src).forEach(function(prop)\n  {\n    dst[prop] = dst[prop] || src[prop];\n  });\n\n  return dst;\n};\n","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n//  @skip-file-minify\r\nvar _a;\r\nimport { createEnumStyle } from \"../JavaScriptSDK.Enums/EnumHelperFuncs\";\r\nvar FAILED = \"Failed\";\r\nvar FAILED_MONITOR_AJAX = FAILED + \"MonitorAjax\";\r\nvar TRACK = \"Track\";\r\nvar START = \"Start\";\r\nvar STOP = \"Stop\";\r\nvar EVENT = \"Event\";\r\nvar AUTH_CONTEXT = \"AuthContext\";\r\nvar EXCEPTION = \"Exception\";\r\nvar LOCAL = \"Local\";\r\nvar SESSION = \"Session\";\r\nvar STORAGE = \"Storage\";\r\nvar BROWSER = \"Browser\";\r\nvar CANNOT = \"Cannot\";\r\nvar BUFFER = \"Buffer\";\r\nvar INSTRUMENTATION_KEY = \"InstrumentationKey\";\r\nexport var LoggingSeverity = createEnumStyle({\r\n    CRITICAL: 1 /* eLoggingSeverity.CRITICAL */,\r\n    WARNING: 2 /* eLoggingSeverity.WARNING */\r\n});\r\n/**\r\n * Internal message ID. Please create a new one for every conceptually different message. Please keep alphabetically ordered\r\n */\r\nexport var _InternalMessageId = createEnumStyle((_a = {},\r\n    // Non user actionable\r\n    _a[BROWSER + \"DoesNotSupport\" + LOCAL + STORAGE] = 0 /* _eInternalMessageId.BrowserDoesNotSupportLocalStorage */,\r\n    _a[BROWSER + CANNOT + \"Read\" + LOCAL + STORAGE] = 1 /* _eInternalMessageId.BrowserCannotReadLocalStorage */,\r\n    _a[BROWSER + CANNOT + \"Read\" + SESSION + STORAGE] = 2 /* _eInternalMessageId.BrowserCannotReadSessionStorage */,\r\n    _a[BROWSER + CANNOT + \"Write\" + LOCAL + STORAGE] = 3 /* _eInternalMessageId.BrowserCannotWriteLocalStorage */,\r\n    _a[BROWSER + CANNOT + \"Write\" + SESSION + STORAGE] = 4 /* _eInternalMessageId.BrowserCannotWriteSessionStorage */,\r\n    _a[BROWSER + FAILED + \"RemovalFrom\" + LOCAL + STORAGE] = 5 /* _eInternalMessageId.BrowserFailedRemovalFromLocalStorage */,\r\n    _a[BROWSER + FAILED + \"RemovalFrom\" + SESSION + STORAGE] = 6 /* _eInternalMessageId.BrowserFailedRemovalFromSessionStorage */,\r\n    _a[CANNOT + \"SendEmptyTelemetry\"] = 7 /* _eInternalMessageId.CannotSendEmptyTelemetry */,\r\n    _a.ClientPerformanceMathError = 8 /* _eInternalMessageId.ClientPerformanceMathError */,\r\n    _a[\"ErrorParsingAI\" + SESSION + \"Cookie\"] = 9 /* _eInternalMessageId.ErrorParsingAISessionCookie */,\r\n    _a.ErrorPVCalc = 10 /* _eInternalMessageId.ErrorPVCalc */,\r\n    _a[EXCEPTION + \"WhileLoggingError\"] = 11 /* _eInternalMessageId.ExceptionWhileLoggingError */,\r\n    _a[FAILED + \"AddingTelemetryTo\" + BUFFER] = 12 /* _eInternalMessageId.FailedAddingTelemetryToBuffer */,\r\n    _a[FAILED_MONITOR_AJAX + \"Abort\"] = 13 /* _eInternalMessageId.FailedMonitorAjaxAbort */,\r\n    _a[FAILED_MONITOR_AJAX + \"Dur\"] = 14 /* _eInternalMessageId.FailedMonitorAjaxDur */,\r\n    _a[FAILED_MONITOR_AJAX + \"Open\"] = 15 /* _eInternalMessageId.FailedMonitorAjaxOpen */,\r\n    _a[FAILED_MONITOR_AJAX + \"RSC\"] = 16 /* _eInternalMessageId.FailedMonitorAjaxRSC */,\r\n    _a[FAILED_MONITOR_AJAX + \"Send\"] = 17 /* _eInternalMessageId.FailedMonitorAjaxSend */,\r\n    _a[FAILED_MONITOR_AJAX + \"GetCorrelationHeader\"] = 18 /* _eInternalMessageId.FailedMonitorAjaxGetCorrelationHeader */,\r\n    _a[FAILED + \"ToAddHandlerForOnBeforeUnload\"] = 19 /* _eInternalMessageId.FailedToAddHandlerForOnBeforeUnload */,\r\n    _a[FAILED + \"ToSendQueuedTelemetry\"] = 20 /* _eInternalMessageId.FailedToSendQueuedTelemetry */,\r\n    _a[FAILED + \"ToReportDataLoss\"] = 21 /* _eInternalMessageId.FailedToReportDataLoss */,\r\n    _a[\"Flush\" + FAILED] = 22 /* _eInternalMessageId.FlushFailed */,\r\n    _a.MessageLimitPerPVExceeded = 23 /* _eInternalMessageId.MessageLimitPerPVExceeded */,\r\n    _a.MissingRequiredFieldSpecification = 24 /* _eInternalMessageId.MissingRequiredFieldSpecification */,\r\n    _a.NavigationTimingNotSupported = 25 /* _eInternalMessageId.NavigationTimingNotSupported */,\r\n    _a.OnError = 26 /* _eInternalMessageId.OnError */,\r\n    _a[SESSION + \"RenewalDateIsZero\"] = 27 /* _eInternalMessageId.SessionRenewalDateIsZero */,\r\n    _a.SenderNotInitialized = 28 /* _eInternalMessageId.SenderNotInitialized */,\r\n    _a[START + TRACK + EVENT + FAILED] = 29 /* _eInternalMessageId.StartTrackEventFailed */,\r\n    _a[STOP + TRACK + EVENT + FAILED] = 30 /* _eInternalMessageId.StopTrackEventFailed */,\r\n    _a[START + TRACK + FAILED] = 31 /* _eInternalMessageId.StartTrackFailed */,\r\n    _a[STOP + TRACK + FAILED] = 32 /* _eInternalMessageId.StopTrackFailed */,\r\n    _a.TelemetrySampledAndNotSent = 33 /* _eInternalMessageId.TelemetrySampledAndNotSent */,\r\n    _a[TRACK + EVENT + FAILED] = 34 /* _eInternalMessageId.TrackEventFailed */,\r\n    _a[TRACK + EXCEPTION + FAILED] = 35 /* _eInternalMessageId.TrackExceptionFailed */,\r\n    _a[TRACK + \"Metric\" + FAILED] = 36 /* _eInternalMessageId.TrackMetricFailed */,\r\n    _a[TRACK + \"PV\" + FAILED] = 37 /* _eInternalMessageId.TrackPVFailed */,\r\n    _a[TRACK + \"PV\" + FAILED + \"Calc\"] = 38 /* _eInternalMessageId.TrackPVFailedCalc */,\r\n    _a[TRACK + \"Trace\" + FAILED] = 39 /* _eInternalMessageId.TrackTraceFailed */,\r\n    _a[\"Transmission\" + FAILED] = 40 /* _eInternalMessageId.TransmissionFailed */,\r\n    _a[FAILED + \"ToSet\" + STORAGE + BUFFER] = 41 /* _eInternalMessageId.FailedToSetStorageBuffer */,\r\n    _a[FAILED + \"ToRestore\" + STORAGE + BUFFER] = 42 /* _eInternalMessageId.FailedToRestoreStorageBuffer */,\r\n    _a.InvalidBackendResponse = 43 /* _eInternalMessageId.InvalidBackendResponse */,\r\n    _a[FAILED + \"ToFixDepricatedValues\"] = 44 /* _eInternalMessageId.FailedToFixDepricatedValues */,\r\n    _a.InvalidDurationValue = 45 /* _eInternalMessageId.InvalidDurationValue */,\r\n    _a.TelemetryEnvelopeInvalid = 46 /* _eInternalMessageId.TelemetryEnvelopeInvalid */,\r\n    _a.CreateEnvelopeError = 47 /* _eInternalMessageId.CreateEnvelopeError */,\r\n    // User actionable\r\n    _a[CANNOT + \"SerializeObject\"] = 48 /* _eInternalMessageId.CannotSerializeObject */,\r\n    _a[CANNOT + \"SerializeObjectNonSerializable\"] = 49 /* _eInternalMessageId.CannotSerializeObjectNonSerializable */,\r\n    _a.CircularReferenceDetected = 50 /* _eInternalMessageId.CircularReferenceDetected */,\r\n    _a[\"Clear\" + AUTH_CONTEXT + FAILED] = 51 /* _eInternalMessageId.ClearAuthContextFailed */,\r\n    _a[EXCEPTION + \"Truncated\"] = 52 /* _eInternalMessageId.ExceptionTruncated */,\r\n    _a.IllegalCharsInName = 53 /* _eInternalMessageId.IllegalCharsInName */,\r\n    _a.ItemNotInArray = 54 /* _eInternalMessageId.ItemNotInArray */,\r\n    _a.MaxAjaxPerPVExceeded = 55 /* _eInternalMessageId.MaxAjaxPerPVExceeded */,\r\n    _a.MessageTruncated = 56 /* _eInternalMessageId.MessageTruncated */,\r\n    _a.NameTooLong = 57 /* _eInternalMessageId.NameTooLong */,\r\n    _a.SampleRateOutOfRange = 58 /* _eInternalMessageId.SampleRateOutOfRange */,\r\n    _a[\"Set\" + AUTH_CONTEXT + FAILED] = 59 /* _eInternalMessageId.SetAuthContextFailed */,\r\n    _a[\"Set\" + AUTH_CONTEXT + FAILED + \"AccountName\"] = 60 /* _eInternalMessageId.SetAuthContextFailedAccountName */,\r\n    _a.StringValueTooLong = 61 /* _eInternalMessageId.StringValueTooLong */,\r\n    _a.StartCalledMoreThanOnce = 62 /* _eInternalMessageId.StartCalledMoreThanOnce */,\r\n    _a.StopCalledWithoutStart = 63 /* _eInternalMessageId.StopCalledWithoutStart */,\r\n    _a[\"TelemetryInitializer\" + FAILED] = 64 /* _eInternalMessageId.TelemetryInitializerFailed */,\r\n    _a.TrackArgumentsNotSpecified = 65 /* _eInternalMessageId.TrackArgumentsNotSpecified */,\r\n    _a.UrlTooLong = 66 /* _eInternalMessageId.UrlTooLong */,\r\n    _a[SESSION + STORAGE + BUFFER + \"Full\"] = 67 /* _eInternalMessageId.SessionStorageBufferFull */,\r\n    _a[CANNOT + \"AccessCookie\"] = 68 /* _eInternalMessageId.CannotAccessCookie */,\r\n    _a.IdTooLong = 69 /* _eInternalMessageId.IdTooLong */,\r\n    _a.InvalidEvent = 70 /* _eInternalMessageId.InvalidEvent */,\r\n    _a[FAILED_MONITOR_AJAX + \"SetRequestHeader\"] = 71 /* _eInternalMessageId.FailedMonitorAjaxSetRequestHeader */,\r\n    _a[\"Send\" + BROWSER + \"InfoOnUserInit\"] = 72 /* _eInternalMessageId.SendBrowserInfoOnUserInit */,\r\n    _a[\"Plugin\" + EXCEPTION] = 73 /* _eInternalMessageId.PluginException */,\r\n    _a[\"Notification\" + EXCEPTION] = 74 /* _eInternalMessageId.NotificationException */,\r\n    _a.SnippetScriptLoadFailure = 99 /* _eInternalMessageId.SnippetScriptLoadFailure */,\r\n    _a[\"Invalid\" + INSTRUMENTATION_KEY] = 100 /* _eInternalMessageId.InvalidInstrumentationKey */,\r\n    _a[CANNOT + \"ParseAiBlobValue\"] = 101 /* _eInternalMessageId.CannotParseAiBlobValue */,\r\n    _a.InvalidContentBlob = 102 /* _eInternalMessageId.InvalidContentBlob */,\r\n    _a[TRACK + \"PageAction\" + EVENT + FAILED] = 103 /* _eInternalMessageId.TrackPageActionEventFailed */,\r\n    _a[FAILED + \"AddingCustomDefinedRequestContext\"] = 104 /* _eInternalMessageId.FailedAddingCustomDefinedRequestContext */,\r\n    _a[\"InMemory\" + STORAGE + BUFFER + \"Full\"] = 105 /* _eInternalMessageId.InMemoryStorageBufferFull */,\r\n    _a[INSTRUMENTATION_KEY + \"Deprecation\"] = 106 /* _eInternalMessageId.InstrumentationKeyDeprecation */,\r\n    _a));\r\n//# sourceMappingURL=LoggingEnums.js.map","/*\n * 1DS JS SDK Core, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* Enums.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n* File containing the enums as constants.\r\n*/\r\nimport { __assignFn as __assign } from \"@microsoft/applicationinsights-shims\";\r\nimport { _InternalMessageId, createEnumStyle, objFreeze } from \"@microsoft/applicationinsights-core-js\";\r\n/**\r\n * The ValueKind contains a set of values that specify value kind of the property.\r\n * Either PII (Personal Identifiable Information) or customer content.\r\n */\r\nexport var ValueKind = createEnumStyle({\r\n    NotSet: 0 /* eValueKind.NotSet */,\r\n    Pii_DistinguishedName: 1 /* eValueKind.Pii_DistinguishedName */,\r\n    Pii_GenericData: 2 /* eValueKind.Pii_GenericData */,\r\n    Pii_IPV4Address: 3 /* eValueKind.Pii_IPV4Address */,\r\n    Pii_IPv6Address: 4 /* eValueKind.Pii_IPv6Address */,\r\n    Pii_MailSubject: 5 /* eValueKind.Pii_MailSubject */,\r\n    Pii_PhoneNumber: 6 /* eValueKind.Pii_PhoneNumber */,\r\n    Pii_QueryString: 7 /* eValueKind.Pii_QueryString */,\r\n    Pii_SipAddress: 8 /* eValueKind.Pii_SipAddress */,\r\n    Pii_SmtpAddress: 9 /* eValueKind.Pii_SmtpAddress */,\r\n    Pii_Identity: 10 /* eValueKind.Pii_Identity */,\r\n    Pii_Uri: 11 /* eValueKind.Pii_Uri */,\r\n    Pii_Fqdn: 12 /* eValueKind.Pii_Fqdn */,\r\n    Pii_IPV4AddressLegacy: 13 /* eValueKind.Pii_IPV4AddressLegacy */,\r\n    CustomerContent_GenericContent: 32 /* eValueKind.CustomerContent_GenericContent */\r\n});\r\n/**\r\n * The EventLatency contains a set of values that specify the latency with which an event is sent.\r\n */\r\nexport var EventLatency = createEnumStyle({\r\n    /**\r\n     * Normal latency.\r\n     */\r\n    Normal: 1 /* EventLatencyValue.Normal */,\r\n    /**\r\n     * Cost deferred latency. At the moment this latency is treated as Normal latency.\r\n     */\r\n    CostDeferred: 2 /* EventLatencyValue.CostDeferred */,\r\n    /**\r\n     * Real time latency.\r\n     */\r\n    RealTime: 3 /* EventLatencyValue.RealTime */,\r\n    /**\r\n     * Bypass normal batching/timing and send as soon as possible, this will still send asynchronously.\r\n     * Added in v3.1.1\r\n     */\r\n    Immediate: 4 /* EventLatencyValue.Immediate */\r\n});\r\n/**\r\n * Enum for property types.\r\n */\r\nexport var EventPropertyType = createEnumStyle({\r\n    Unspecified: 0 /* eEventPropertyType.Unspecified */,\r\n    String: 1 /* eEventPropertyType.String */,\r\n    Int32: 2 /* eEventPropertyType.Int32 */,\r\n    UInt32: 3 /* eEventPropertyType.UInt32 */,\r\n    Int64: 4 /* eEventPropertyType.Int64 */,\r\n    UInt64: 5 /* eEventPropertyType.UInt64 */,\r\n    Double: 6 /* eEventPropertyType.Double */,\r\n    Bool: 7 /* eEventPropertyType.Bool */,\r\n    Guid: 8 /* eEventPropertyType.Guid */,\r\n    DateTime: 9 /* eEventPropertyType.DateTime */\r\n});\r\n/**\r\n * The EventPersistence contains a set of values that specify the event's persistence.\r\n */\r\nexport var EventPersistence = createEnumStyle({\r\n    /**\r\n     * Normal persistence.\r\n     */\r\n    Normal: 1 /* EventPersistenceValue.Normal */,\r\n    /**\r\n     * Critical persistence.\r\n     */\r\n    Critical: 2 /* EventPersistenceValue.Critical */\r\n});\r\nexport var TraceLevel = createEnumStyle({\r\n    NONE: 0 /* eTraceLevel.NONE */,\r\n    ERROR: 1 /* eTraceLevel.ERROR */,\r\n    WARNING: 2 /* eTraceLevel.WARNING */,\r\n    INFORMATION: 3 /* eTraceLevel.INFORMATION */\r\n});\r\nexport var _ExtendedInternalMessageId = objFreeze(__assign(__assign({}, _InternalMessageId), createEnumStyle({\r\n    AuthHandShakeError: 501 /* _eExtendedInternalMessageId.AuthHandShakeError */,\r\n    AuthRedirectFail: 502 /* _eExtendedInternalMessageId.AuthRedirectFail */,\r\n    BrowserCannotReadLocalStorage: 503 /* _eExtendedInternalMessageId.BrowserCannotReadLocalStorage */,\r\n    BrowserCannotWriteLocalStorage: 504 /* _eExtendedInternalMessageId.BrowserCannotWriteLocalStorage */,\r\n    BrowserDoesNotSupportLocalStorage: 505 /* _eExtendedInternalMessageId.BrowserDoesNotSupportLocalStorage */,\r\n    CannotParseBiBlobValue: 506 /* _eExtendedInternalMessageId.CannotParseBiBlobValue */,\r\n    CannotParseDataAttribute: 507 /* _eExtendedInternalMessageId.CannotParseDataAttribute */,\r\n    CVPluginNotAvailable: 508 /* _eExtendedInternalMessageId.CVPluginNotAvailable */,\r\n    DroppedEvent: 509 /* _eExtendedInternalMessageId.DroppedEvent */,\r\n    ErrorParsingAISessionCookie: 510 /* _eExtendedInternalMessageId.ErrorParsingAISessionCookie */,\r\n    ErrorProvidedChannels: 511 /* _eExtendedInternalMessageId.ErrorProvidedChannels */,\r\n    FailedToGetCookies: 512 /* _eExtendedInternalMessageId.FailedToGetCookies */,\r\n    FailedToInitializeCorrelationVector: 513 /* _eExtendedInternalMessageId.FailedToInitializeCorrelationVector */,\r\n    FailedToInitializeSDK: 514 /* _eExtendedInternalMessageId.FailedToInitializeSDK */,\r\n    InvalidContentBlob: 515 /* _eExtendedInternalMessageId.InvalidContentBlob */,\r\n    InvalidCorrelationValue: 516 /* _eExtendedInternalMessageId.InvalidCorrelationValue */,\r\n    SessionRenewalDateIsZero: 517 /* _eExtendedInternalMessageId.SessionRenewalDateIsZero */,\r\n    SendPostOnCompleteFailure: 518 /* _eExtendedInternalMessageId.SendPostOnCompleteFailure */,\r\n    PostResponseHandler: 519 /* _eExtendedInternalMessageId.PostResponseHandler */,\r\n    SDKNotInitialized: 520 /* _eExtendedInternalMessageId.SDKNotInitialized */\r\n})));\r\n//# sourceMappingURL=Enums.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n// \r\nimport { _DYN_CONFIG, _DYN_CREATE_NEW, _DYN_FLUSH, _DYN_IDENTIFIER, _DYN_LENGTH, _DYN_ON_COMPLETE, _DYN_PROCESS_NEXT, _DYN_PUSH } from \"../__DynamicConstants\";\r\nimport { arrForEach, isArray, objFreeze, throwError } from \"./HelperFuncs\";\r\nimport { STR_PRIORITY } from \"./InternalConstants\";\r\nimport { createProcessTelemetryContext, createTelemetryProxyChain } from \"./ProcessTelemetryContext\";\r\nimport { initializePlugins } from \"./TelemetryHelpers\";\r\nexport var ChannelControllerPriority = 500;\r\nvar ChannelValidationMessage = \"Channel has invalid priority - \";\r\nfunction _addChannelQueue(channelQueue, queue, core) {\r\n    if (queue && isArray(queue) && queue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        queue = queue.sort(function (a, b) {\r\n            return a[STR_PRIORITY /* @min:%2epriority */] - b[STR_PRIORITY /* @min:%2epriority */];\r\n        });\r\n        arrForEach(queue, function (queueItem) {\r\n            if (queueItem[STR_PRIORITY /* @min:%2epriority */] < ChannelControllerPriority) {\r\n                throwError(ChannelValidationMessage + queueItem[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n            }\r\n        });\r\n        channelQueue[_DYN_PUSH /* @min:%2epush */]({\r\n            queue: objFreeze(queue),\r\n            chain: createTelemetryProxyChain(queue, core[_DYN_CONFIG /* @min:%2econfig */], core)\r\n        });\r\n    }\r\n}\r\nexport function createChannelControllerPlugin(channelQueue, core) {\r\n    function _getTelCtx() {\r\n        return createProcessTelemetryContext(null, core[_DYN_CONFIG /* @min:%2econfig */], core, null);\r\n    }\r\n    function _processChannelQueue(theChannels, itemCtx, processFn, onComplete) {\r\n        var waiting = theChannels ? (theChannels[_DYN_LENGTH /* @min:%2elength */] + 1) : 1;\r\n        function _runChainOnComplete() {\r\n            waiting--;\r\n            if (waiting === 0) {\r\n                onComplete && onComplete();\r\n                onComplete = null;\r\n            }\r\n        }\r\n        if (waiting > 0) {\r\n            arrForEach(theChannels, function (channels) {\r\n                // pass on to first item in queue\r\n                if (channels && channels.queue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var channelChain = channels.chain;\r\n                    var chainCtx = itemCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](channelChain);\r\n                    chainCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](_runChainOnComplete);\r\n                    // Cause this chain to start processing\r\n                    processFn(chainCtx);\r\n                }\r\n                else {\r\n                    waiting--;\r\n                }\r\n            });\r\n        }\r\n        _runChainOnComplete();\r\n    }\r\n    function _doUpdate(updateCtx, updateState) {\r\n        var theUpdateState = updateState || {\r\n            reason: 0 /* TelemetryUpdateReason.Unknown */\r\n        };\r\n        _processChannelQueue(channelQueue, updateCtx, function (chainCtx) {\r\n            chainCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUpdateState);\r\n        }, function () {\r\n            updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUpdateState);\r\n        });\r\n        return true;\r\n    }\r\n    function _doTeardown(unloadCtx, unloadState) {\r\n        var theUnloadState = unloadState || {\r\n            reason: 0 /* TelemetryUnloadReason.ManualTeardown */,\r\n            isAsync: false\r\n        };\r\n        _processChannelQueue(channelQueue, unloadCtx, function (chainCtx) {\r\n            chainCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUnloadState);\r\n        }, function () {\r\n            unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUnloadState);\r\n            isInitialized = false;\r\n        });\r\n        return true;\r\n    }\r\n    function _getChannel(pluginIdentifier) {\r\n        var thePlugin = null;\r\n        if (channelQueue && channelQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            arrForEach(channelQueue, function (channels) {\r\n                // pass on to first item in queue\r\n                if (channels && channels.queue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(channels.queue, function (ext) {\r\n                        if (ext[_DYN_IDENTIFIER /* @min:%2eidentifier */] === pluginIdentifier) {\r\n                            thePlugin = ext;\r\n                            // Cause arrForEach to stop iterating\r\n                            return -1;\r\n                        }\r\n                    });\r\n                    if (thePlugin) {\r\n                        // Cause arrForEach to stop iterating\r\n                        return -1;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return thePlugin;\r\n    }\r\n    var isInitialized = false;\r\n    var channelController = {\r\n        identifier: \"ChannelControllerPlugin\",\r\n        priority: ChannelControllerPriority,\r\n        initialize: function (config, core, extensions, pluginChain) {\r\n            isInitialized = true;\r\n            arrForEach(channelQueue, function (channels) {\r\n                if (channels && channels.queue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    initializePlugins(createProcessTelemetryContext(channels.chain, config, core), extensions);\r\n                }\r\n            });\r\n        },\r\n        isInitialized: function () {\r\n            return isInitialized;\r\n        },\r\n        processTelemetry: function (item, itemCtx) {\r\n            _processChannelQueue(channelQueue, itemCtx || _getTelCtx(), function (chainCtx) {\r\n                chainCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](item);\r\n            }, function () {\r\n                itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](item);\r\n            });\r\n        },\r\n        update: _doUpdate,\r\n        pause: function () {\r\n            _processChannelQueue(channelQueue, _getTelCtx(), function (chainCtx) {\r\n                chainCtx.iterate(function (plugin) {\r\n                    plugin.pause && plugin.pause();\r\n                });\r\n            }, null);\r\n        },\r\n        resume: function () {\r\n            _processChannelQueue(channelQueue, _getTelCtx(), function (chainCtx) {\r\n                chainCtx.iterate(function (plugin) {\r\n                    plugin.resume && plugin.resume();\r\n                });\r\n            }, null);\r\n        },\r\n        teardown: _doTeardown,\r\n        getChannel: _getChannel,\r\n        flush: function (isAsync, callBack, sendReason, cbTimeout) {\r\n            // Setting waiting to one so that we don't call the callBack until we finish iterating\r\n            var waiting = 1;\r\n            var doneIterating = false;\r\n            var cbTimer = null;\r\n            cbTimeout = cbTimeout || 5000;\r\n            function doCallback() {\r\n                waiting--;\r\n                if (doneIterating && waiting === 0) {\r\n                    if (cbTimer) {\r\n                        clearTimeout(cbTimer);\r\n                        cbTimer = null;\r\n                    }\r\n                    callBack && callBack(doneIterating);\r\n                    callBack = null;\r\n                }\r\n            }\r\n            _processChannelQueue(channelQueue, _getTelCtx(), function (chainCtx) {\r\n                chainCtx.iterate(function (plugin) {\r\n                    if (plugin[_DYN_FLUSH /* @min:%2eflush */]) {\r\n                        waiting++;\r\n                        var handled_1 = false;\r\n                        // Not all channels will call this callback for every scenario\r\n                        if (!plugin[_DYN_FLUSH /* @min:%2eflush */](isAsync, function () {\r\n                            handled_1 = true;\r\n                            doCallback();\r\n                        }, sendReason)) {\r\n                            if (!handled_1) {\r\n                                // If any channel doesn't return true and it didn't call the callback, then we should assume that the callback\r\n                                // will never be called, so use a timeout to allow the channel(s) some time to \"finish\" before triggering any\r\n                                // followup function (such as unloading)\r\n                                if (isAsync && cbTimer == null) {\r\n                                    cbTimer = setTimeout(function () {\r\n                                        cbTimer = null;\r\n                                        doCallback();\r\n                                    }, cbTimeout);\r\n                                }\r\n                                else {\r\n                                    doCallback();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }, function () {\r\n                doneIterating = true;\r\n                doCallback();\r\n            });\r\n            return true;\r\n        },\r\n        _setQueue: function (queue) {\r\n            channelQueue = queue;\r\n        }\r\n    };\r\n    return channelController;\r\n}\r\nexport function createChannelQueues(channels, extensions, core) {\r\n    var channelQueue = [];\r\n    if (channels) {\r\n        // Add and sort the configuration channel queues\r\n        arrForEach(channels, function (queue) { return _addChannelQueue(channelQueue, queue, core); });\r\n    }\r\n    if (extensions) {\r\n        // Create a new channel queue for any extensions with a priority > the ChannelControllerPriority\r\n        var extensionQueue_1 = [];\r\n        arrForEach(extensions, function (plugin) {\r\n            if (plugin[STR_PRIORITY /* @min:%2epriority */] > ChannelControllerPriority) {\r\n                extensionQueue_1[_DYN_PUSH /* @min:%2epush */](plugin);\r\n            }\r\n        });\r\n        _addChannelQueue(channelQueue, extensionQueue_1, core);\r\n    }\r\n    return channelQueue;\r\n}\r\n//# sourceMappingURL=ChannelController.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n// \r\n// \r\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_APPLY, _DYN_DIAG_LOG, _DYN_LENGTH, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_SPLICE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { BaseTelemetryPlugin } from \"./BaseTelemetryPlugin\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { dumpObj } from \"./EnvUtils\";\r\nimport { arrForEach, getExceptionName } from \"./HelperFuncs\";\r\nimport { STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nvar TelemetryInitializerPlugin = /** @class */ (function (_super) {\r\n    __extends(TelemetryInitializerPlugin, _super);\r\n    function TelemetryInitializerPlugin() {\r\n        var _this = _super.call(this) || this;\r\n        _this.identifier = \"TelemetryInitializerPlugin\";\r\n        _this.priority = 199;\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _id;\r\n        var _initializers;\r\n        _initDefaults();\r\n        dynamicProto(TelemetryInitializerPlugin, _this, function (_self, _base) {\r\n            _self.addTelemetryInitializer = function (telemetryInitializer) {\r\n                var theInitializer = {\r\n                    id: _id++,\r\n                    fn: telemetryInitializer\r\n                };\r\n                _initializers[_DYN_PUSH /* @min:%2epush */](theInitializer);\r\n                var handler = {\r\n                    remove: function () {\r\n                        arrForEach(_initializers, function (initializer, idx) {\r\n                            if (initializer.id === theInitializer.id) {\r\n                                _initializers[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                                return -1;\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                return handler;\r\n            };\r\n            _self[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */] = function (item, itemCtx) {\r\n                var doNotSendItem = false;\r\n                var telemetryInitializersCount = _initializers[_DYN_LENGTH /* @min:%2elength */];\r\n                for (var i = 0; i < telemetryInitializersCount; ++i) {\r\n                    var telemetryInitializer = _initializers[i];\r\n                    if (telemetryInitializer) {\r\n                        try {\r\n                            if (telemetryInitializer.fn[_DYN_APPLY /* @min:%2eapply */](null, [item]) === false) {\r\n                                doNotSendItem = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                        catch (e) {\r\n                            // log error but dont stop executing rest of the telemetry initializers\r\n                            // doNotSendItem = true;\r\n                            _throwInternal(itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 64 /* _eInternalMessageId.TelemetryInitializerFailed */, \"One of telemetry initializers failed, telemetry item will not be sent: \" + getExceptionName(e), { exception: dumpObj(e) }, true);\r\n                        }\r\n                    }\r\n                }\r\n                if (!doNotSendItem) {\r\n                    _self[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](item, itemCtx);\r\n                }\r\n            };\r\n            _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] = function () {\r\n                _initDefaults();\r\n            };\r\n        });\r\n        function _initDefaults() {\r\n            _id = 0;\r\n            _initializers = [];\r\n        }\r\n        return _this;\r\n    }\r\n// Removed Stub for TelemetryInitializerPlugin.prototype.addTelemetryInitializer.\r\n// Removed Stub for TelemetryInitializerPlugin.prototype.processTelemetry.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    TelemetryInitializerPlugin.__ieDyn=1;\n\n    return TelemetryInitializerPlugin;\r\n}(BaseTelemetryPlugin));\r\nexport { TelemetryInitializerPlugin };\r\n//# sourceMappingURL=TelemetryInitializerPlugin.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { __spreadArrayFn as __spreadArray } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { objCreateFn } from \"@microsoft/applicationinsights-shims\";\r\nimport { _DYN_ADD_NOTIFICATION_LIS1, _DYN_CONFIG, _DYN_FLUSH, _DYN_GET_NOTIFY_MGR, _DYN_GET_PLUGIN, _DYN_GET_PROCESS_TEL_CONT0, _DYN_IDENTIFIER, _DYN_INITIALIZE, _DYN_INSTRUMENTATION_KEY, _DYN_IS_ASYNC, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_LOGGER, _DYN_MESSAGE, _DYN_MESSAGE_ID, _DYN_NAME, _DYN_ON_COMPLETE, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_REMOVE_NOTIFICATION_2, _DYN_SET_ENABLED, _DYN_SPLICE, _DYN_STOP_POLLING_INTERNA3, _DYN_TEARDOWN, _DYN_TIME, _DYN__EXTENSIONS } from \"../__DynamicConstants\";\r\nimport { ChannelControllerPriority, createChannelControllerPlugin, createChannelQueues } from \"./ChannelController\";\r\nimport { createCookieMgr } from \"./CookieMgr\";\r\nimport { createUniqueNamespace } from \"./DataCacheHelper\";\r\nimport { getDebugListener } from \"./DbgExtensionUtils\";\r\nimport { DiagnosticLogger, _InternalLogMessage, _throwInternal, _warnToConsole } from \"./DiagnosticLogger\";\r\nimport { arrForEach, arrIndexOf, getCfgValue, getSetValue, isFunction, isNullOrUndefined, objExtend, objFreeze, proxyFunctionAs, proxyFunctions, throwError, toISOString } from \"./HelperFuncs\";\r\nimport { STR_CHANNELS, STR_CORE, STR_CREATE_PERF_MGR, STR_DISABLED, STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_EVENTS_SENT, STR_EXTENSIONS, STR_EXTENSION_CONFIG, STR_GET_PERF_MGR, STR_PRIORITY } from \"./InternalConstants\";\r\nimport { PerfManager, getGblPerfMgr } from \"./PerfManager\";\r\nimport { createProcessTelemetryContext, createProcessTelemetryUnloadContext, createProcessTelemetryUpdateContext, createTelemetryProxyChain } from \"./ProcessTelemetryContext\";\r\nimport { _getPluginState, createDistributedTraceContext, initializePlugins, sortPlugins } from \"./TelemetryHelpers\";\r\nimport { TelemetryInitializerPlugin } from \"./TelemetryInitializerPlugin\";\r\nimport { createUnloadHandlerContainer } from \"./UnloadHandlerContainer\";\r\nvar strValidationError = \"Plugins must provide initialize method\";\r\nvar strNotificationManager = \"_notificationManager\";\r\nvar strSdkUnloadingError = \"SDK is still unloading...\";\r\nvar strSdkNotInitialized = \"SDK is not initialized\";\r\n// const strPluginUnloadFailed = \"Failed to unload plugin\";\r\nvar defaultInitConfig = {\r\n    // Have the Diagnostic Logger default to log critical errors to the console\r\n    loggingLevelConsole: 1 /* eLoggingSeverity.CRITICAL */\r\n};\r\n/**\r\n * Helper to create the default performance manager\r\n * @param core\r\n * @param notificationMgr\r\n */\r\nfunction _createPerfManager(core, notificationMgr) {\r\n    return new PerfManager(notificationMgr);\r\n}\r\nfunction _validateExtensions(logger, channelPriority, allExtensions) {\r\n    var _a;\r\n    // Concat all available extensions\r\n    var coreExtensions = [];\r\n    // Check if any two extensions have the same priority, then warn to console\r\n    // And extract the local extensions from the\r\n    var extPriorities = {};\r\n    // Extension validation\r\n    arrForEach(allExtensions, function (ext) {\r\n        // Check for ext.initialize\r\n        if (isNullOrUndefined(ext) || isNullOrUndefined(ext[_DYN_INITIALIZE /* @min:%2einitialize */])) {\r\n            throwError(strValidationError);\r\n        }\r\n        var extPriority = ext[STR_PRIORITY /* @min:%2epriority */];\r\n        var identifier = ext[_DYN_IDENTIFIER /* @min:%2eidentifier */];\r\n        if (ext && extPriority) {\r\n            if (!isNullOrUndefined(extPriorities[extPriority])) {\r\n                _warnToConsole(logger, \"Two extensions have same priority #\" + extPriority + \" - \" + extPriorities[extPriority] + \", \" + identifier);\r\n            }\r\n            else {\r\n                // set a value\r\n                extPriorities[extPriority] = identifier;\r\n            }\r\n        }\r\n        // Split extensions to core and channelController\r\n        if (!extPriority || extPriority < channelPriority) {\r\n            // Add to core extension that will be managed by BaseCore\r\n            coreExtensions[_DYN_PUSH /* @min:%2epush */](ext);\r\n        }\r\n    });\r\n    return _a = {\r\n            all: allExtensions\r\n        },\r\n        _a[STR_CORE /* @min:core */] = coreExtensions,\r\n        _a;\r\n}\r\nfunction _isPluginPresent(thePlugin, plugins) {\r\n    var exists = false;\r\n    arrForEach(plugins, function (plugin) {\r\n        if (plugin === thePlugin) {\r\n            exists = true;\r\n            return -1;\r\n        }\r\n    });\r\n    return exists;\r\n}\r\nfunction _createDummyNotificationManager() {\r\n    var _a;\r\n    return objCreateFn((_a = {},\r\n        _a[_DYN_ADD_NOTIFICATION_LIS1 /* @min:addNotificationListener */] = function (listener) { },\r\n        _a[_DYN_REMOVE_NOTIFICATION_2 /* @min:removeNotificationListener */] = function (listener) { },\r\n        _a[STR_EVENTS_SENT /* @min:eventsSent */] = function (events) { },\r\n        _a[STR_EVENTS_DISCARDED /* @min:eventsDiscarded */] = function (events, reason) { },\r\n        _a[STR_EVENTS_SEND_REQUEST /* @min:eventsSendRequest */] = function (sendReason, isAsync) { },\r\n        _a));\r\n}\r\nvar BaseCore = /** @class */ (function () {\r\n    function BaseCore() {\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _config;\r\n        var _isInitialized;\r\n        var _eventQueue;\r\n        var _notificationManager;\r\n        var _perfManager;\r\n        var _cfgPerfManager;\r\n        var _cookieManager;\r\n        var _pluginChain;\r\n        var _configExtensions;\r\n        var _coreExtensions;\r\n        var _channelControl;\r\n        var _channelConfig;\r\n        var _channelQueue;\r\n        var _isUnloading;\r\n        var _telemetryInitializerPlugin;\r\n        var _internalLogsEventName;\r\n        var _evtNamespace;\r\n        var _unloadHandlers;\r\n        var _debugListener;\r\n        var _traceCtx;\r\n        /**\r\n         * Internal log poller\r\n         */\r\n        var _internalLogPoller = 0;\r\n        dynamicProto(BaseCore, this, function (_self) {\r\n            // Set the default values (also called during teardown)\r\n            _initDefaults();\r\n            _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = function () { return _isInitialized; };\r\n            // Creating the self.initialize = ()\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, extensions, logger, notificationManager) {\r\n                if (_isUnloading) {\r\n                    throwError(strSdkUnloadingError);\r\n                }\r\n                // Make sure core is only initialized once\r\n                if (_self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]()) {\r\n                    throwError(\"Core should not be initialized more than once\");\r\n                }\r\n                _config = config || {};\r\n                _self[_DYN_CONFIG /* @min:%2econfig */] = _config;\r\n                if (isNullOrUndefined(config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */])) {\r\n                    throwError(\"Please provide instrumentation key\");\r\n                }\r\n                _notificationManager = notificationManager;\r\n                // For backward compatibility only\r\n                _self[strNotificationManager] = notificationManager;\r\n                _initDebugListener();\r\n                _initPerfManager();\r\n                // add notification to the extensions in the config so other plugins can access it\r\n                _initExtConfig();\r\n                if (logger) {\r\n                    _self[_DYN_LOGGER /* @min:%2elogger */] = logger;\r\n                }\r\n                var cfgExtensions = getSetValue(_config, STR_EXTENSIONS, []);\r\n                // Extension validation\r\n                _configExtensions = [];\r\n                _configExtensions[_DYN_PUSH /* @min:%2epush */].apply(_configExtensions, __spreadArray(__spreadArray([], extensions, false), cfgExtensions, false));\r\n                _channelConfig = getSetValue(_config, STR_CHANNELS, []);\r\n                _initPluginChain(null);\r\n                if (!_channelQueue || _channelQueue[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    throwError(\"No \" + STR_CHANNELS + \" available\");\r\n                }\r\n                _isInitialized = true;\r\n                _self.releaseQueue();\r\n            };\r\n            _self.getTransmissionControls = function () {\r\n                var controls = [];\r\n                if (_channelQueue) {\r\n                    arrForEach(_channelQueue, function (channels) {\r\n                        controls[_DYN_PUSH /* @min:%2epush */](channels.queue);\r\n                    });\r\n                }\r\n                return objFreeze(controls);\r\n            };\r\n            _self.track = function (telemetryItem) {\r\n                // setup default iKey if not passed in\r\n                telemetryItem.iKey = telemetryItem.iKey || _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                // add default timestamp if not passed in\r\n                telemetryItem[_DYN_TIME /* @min:%2etime */] = telemetryItem[_DYN_TIME /* @min:%2etime */] || toISOString(new Date());\r\n                // Common Schema 4.0\r\n                telemetryItem.ver = telemetryItem.ver || \"4.0\";\r\n                if (!_isUnloading && _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]()) {\r\n                    // Process the telemetry plugin chain\r\n                    _createTelCtx()[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](telemetryItem);\r\n                }\r\n                else {\r\n                    // Queue events until all extensions are initialized\r\n                    _eventQueue[_DYN_PUSH /* @min:%2epush */](telemetryItem);\r\n                }\r\n            };\r\n            _self[_DYN_GET_PROCESS_TEL_CONT0 /* @min:%2egetProcessTelContext */] = _createTelCtx;\r\n            _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */] = function () {\r\n                if (!_notificationManager) {\r\n                    // Create Dummy notification manager\r\n                    _notificationManager = _createDummyNotificationManager();\r\n                    // For backward compatibility only\r\n                    _self[strNotificationManager] = _notificationManager;\r\n                }\r\n                return _notificationManager;\r\n            };\r\n            /**\r\n             * Adds a notification listener. The SDK calls methods on the listener when an appropriate notification is raised.\r\n             * The added plugins must raise notifications. If the plugins do not implement the notifications, then no methods will be\r\n             * called.\r\n             * @param {INotificationListener} listener - An INotificationListener object.\r\n             */\r\n            _self[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */] = function (listener) {\r\n                if (_notificationManager) {\r\n                    _notificationManager[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */](listener);\r\n                }\r\n            };\r\n            /**\r\n             * Removes all instances of the listener.\r\n             * @param {INotificationListener} listener - INotificationListener to remove.\r\n             */\r\n            _self[_DYN_REMOVE_NOTIFICATION_2 /* @min:%2eremoveNotificationListener */] = function (listener) {\r\n                if (_notificationManager) {\r\n                    _notificationManager[_DYN_REMOVE_NOTIFICATION_2 /* @min:%2eremoveNotificationListener */](listener);\r\n                }\r\n            };\r\n            _self.getCookieMgr = function () {\r\n                if (!_cookieManager) {\r\n                    _cookieManager = createCookieMgr(_config, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                }\r\n                return _cookieManager;\r\n            };\r\n            _self.setCookieMgr = function (cookieMgr) {\r\n                _cookieManager = cookieMgr;\r\n            };\r\n            _self[STR_GET_PERF_MGR /* @min:%2egetPerfMgr */] = function () {\r\n                if (!_perfManager && !_cfgPerfManager) {\r\n                    if (getCfgValue(_config.enablePerfMgr)) {\r\n                        var createPerfMgr = getCfgValue(_config[STR_CREATE_PERF_MGR /* @min:%2ecreatePerfMgr */]);\r\n                        if (isFunction(createPerfMgr)) {\r\n                            _cfgPerfManager = createPerfMgr(_self, _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */]());\r\n                        }\r\n                    }\r\n                }\r\n                return _perfManager || _cfgPerfManager || getGblPerfMgr();\r\n            };\r\n            _self.setPerfMgr = function (perfMgr) {\r\n                _perfManager = perfMgr;\r\n            };\r\n            _self.eventCnt = function () {\r\n                return _eventQueue[_DYN_LENGTH /* @min:%2elength */];\r\n            };\r\n            _self.releaseQueue = function () {\r\n                if (_isInitialized && _eventQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var eventQueue = _eventQueue;\r\n                    _eventQueue = [];\r\n                    arrForEach(eventQueue, function (event) {\r\n                        _createTelCtx()[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](event);\r\n                    });\r\n                }\r\n            };\r\n            /**\r\n             * Periodically check logger.queue for log messages to be flushed\r\n             */\r\n            _self.pollInternalLogs = function (eventName) {\r\n                _internalLogsEventName = eventName || null;\r\n                var interval = getCfgValue(_config.diagnosticLogInterval);\r\n                if (!interval || !(interval > 0)) {\r\n                    interval = 10000;\r\n                }\r\n                if (_internalLogPoller) {\r\n                    clearInterval(_internalLogPoller);\r\n                }\r\n                _internalLogPoller = setInterval(function () {\r\n                    _flushInternalLogs();\r\n                }, interval);\r\n                return _internalLogPoller;\r\n            };\r\n            /**\r\n             * Stop polling log messages from logger.queue\r\n             */\r\n            _self[_DYN_STOP_POLLING_INTERNA3 /* @min:%2estopPollingInternalLogs */] = function () {\r\n                if (_internalLogPoller) {\r\n                    clearInterval(_internalLogPoller);\r\n                    _internalLogPoller = 0;\r\n                    _flushInternalLogs();\r\n                }\r\n            };\r\n            // Add addTelemetryInitializer\r\n            proxyFunctions(_self, function () { return _telemetryInitializerPlugin; }, [\"addTelemetryInitializer\"]);\r\n            _self.unload = function (isAsync, unloadComplete, cbTimeout) {\r\n                var _a;\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                if (!_isInitialized) {\r\n                    // The SDK is not initialized\r\n                    throwError(strSdkNotInitialized);\r\n                }\r\n                // Check if the SDK still unloading so throw\r\n                if (_isUnloading) {\r\n                    // The SDK is already unloading\r\n                    throwError(strSdkUnloadingError);\r\n                }\r\n                var unloadState = (_a = {\r\n                        reason: 50 /* TelemetryUnloadReason.SdkUnload */\r\n                    },\r\n                    _a[_DYN_IS_ASYNC /* @min:isAsync */] = isAsync,\r\n                    _a.flushComplete = false,\r\n                    _a);\r\n                var processUnloadCtx = createProcessTelemetryUnloadContext(_getPluginChain(), _self);\r\n                processUnloadCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](function () {\r\n                    _initDefaults();\r\n                    unloadComplete && unloadComplete(unloadState);\r\n                }, _self);\r\n                function _doUnload(flushComplete) {\r\n                    unloadState.flushComplete = flushComplete;\r\n                    _isUnloading = true;\r\n                    // Run all of the unload handlers first (before unloading the plugins)\r\n                    _unloadHandlers.run(processUnloadCtx, unloadState);\r\n                    // Stop polling the internal logs\r\n                    _self[_DYN_STOP_POLLING_INTERNA3 /* @min:%2estopPollingInternalLogs */]();\r\n                    // Start unloading the components, from this point onwards the SDK should be considered to be in an unstable state\r\n                    processUnloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n                }\r\n                if (!_flushChannels(isAsync, _doUnload, 6 /* SendRequestReason.SdkUnload */, cbTimeout)) {\r\n                    _doUnload(false);\r\n                }\r\n            };\r\n            _self[_DYN_GET_PLUGIN /* @min:%2egetPlugin */] = _getPlugin;\r\n            _self.addPlugin = function (plugin, replaceExisting, isAsync, addCb) {\r\n                if (!plugin) {\r\n                    addCb && addCb(false);\r\n                    _logOrThrowError(strValidationError);\r\n                    return;\r\n                }\r\n                var existingPlugin = _getPlugin(plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                if (existingPlugin && !replaceExisting) {\r\n                    addCb && addCb(false);\r\n                    _logOrThrowError(\"Plugin [\" + plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"] is already loaded!\");\r\n                    return;\r\n                }\r\n                var updateState = {\r\n                    reason: 16 /* TelemetryUpdateReason.PluginAdded */\r\n                };\r\n                function _addPlugin(removed) {\r\n                    _configExtensions[_DYN_PUSH /* @min:%2epush */](plugin);\r\n                    updateState.added = [plugin];\r\n                    // Re-Initialize the plugin chain\r\n                    _initPluginChain(updateState);\r\n                    addCb && addCb(true);\r\n                }\r\n                if (existingPlugin) {\r\n                    var removedPlugins_1 = [existingPlugin.plugin];\r\n                    var unloadState = {\r\n                        reason: 2 /* TelemetryUnloadReason.PluginReplace */,\r\n                        isAsync: !!isAsync\r\n                    };\r\n                    _removePlugins(removedPlugins_1, unloadState, function (removed) {\r\n                        if (!removed) {\r\n                            // Previous plugin was successfully removed or was not installed\r\n                            addCb && addCb(false);\r\n                        }\r\n                        else {\r\n                            updateState.removed = removedPlugins_1;\r\n                            updateState.reason |= 32 /* TelemetryUpdateReason.PluginRemoved */;\r\n                            _addPlugin(true);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    _addPlugin(false);\r\n                }\r\n            };\r\n            _self.evtNamespace = function () {\r\n                return _evtNamespace;\r\n            };\r\n            _self[_DYN_FLUSH /* @min:%2eflush */] = _flushChannels;\r\n            _self.getTraceCtx = function (createNew) {\r\n                if (!_traceCtx) {\r\n                    _traceCtx = createDistributedTraceContext();\r\n                }\r\n                return _traceCtx;\r\n            };\r\n            _self.setTraceCtx = function (traceCtx) {\r\n                _traceCtx = traceCtx || null;\r\n            };\r\n            // Create the addUnloadCb\r\n            proxyFunctionAs(_self, \"addUnloadCb\", function () { return _unloadHandlers; }, \"add\");\r\n            function _initDefaults() {\r\n                _isInitialized = false;\r\n                // Use a default logger so initialization errors are not dropped on the floor with full logging\r\n                _config = objExtend(true, {}, defaultInitConfig);\r\n                _self[_DYN_CONFIG /* @min:%2econfig */] = _config;\r\n                _self[_DYN_LOGGER /* @min:%2elogger */] = new DiagnosticLogger(_config);\r\n                _self[_DYN__EXTENSIONS /* @min:%2e_extensions */] = [];\r\n                _telemetryInitializerPlugin = new TelemetryInitializerPlugin();\r\n                _eventQueue = [];\r\n                _notificationManager = null;\r\n                _perfManager = null;\r\n                _cfgPerfManager = null;\r\n                _cookieManager = null;\r\n                _pluginChain = null;\r\n                _coreExtensions = null;\r\n                _configExtensions = [];\r\n                _channelControl = null;\r\n                _channelConfig = null;\r\n                _channelQueue = null;\r\n                _isUnloading = false;\r\n                _internalLogsEventName = null;\r\n                _evtNamespace = createUniqueNamespace(\"AIBaseCore\", true);\r\n                _unloadHandlers = createUnloadHandlerContainer();\r\n                _traceCtx = null;\r\n            }\r\n            function _createTelCtx() {\r\n                return createProcessTelemetryContext(_getPluginChain(), _config, _self);\r\n            }\r\n            // Initialize or Re-initialize the plugins\r\n            function _initPluginChain(updateState) {\r\n                // Extension validation\r\n                var theExtensions = _validateExtensions(_self[_DYN_LOGGER /* @min:%2elogger */], ChannelControllerPriority, _configExtensions);\r\n                _coreExtensions = theExtensions[STR_CORE /* @min:%2ecore */];\r\n                _pluginChain = null;\r\n                // Sort the complete set of extensions by priority\r\n                var allExtensions = theExtensions.all;\r\n                // Initialize the Channel Queues and the channel plugins first\r\n                _channelQueue = objFreeze(createChannelQueues(_channelConfig, allExtensions, _self));\r\n                if (_channelControl) {\r\n                    // During add / remove of a plugin this may get called again, so don't re-add if already present\r\n                    // But we also want the controller as the last, so remove if already present\r\n                    // And reusing the existing instance, just in case an installed plugin has a reference and\r\n                    // is using it.\r\n                    var idx = arrIndexOf(allExtensions, _channelControl);\r\n                    if (idx !== -1) {\r\n                        allExtensions[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                    }\r\n                    idx = arrIndexOf(_coreExtensions, _channelControl);\r\n                    if (idx !== -1) {\r\n                        _coreExtensions[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                    }\r\n                    _channelControl._setQueue(_channelQueue);\r\n                }\r\n                else {\r\n                    _channelControl = createChannelControllerPlugin(_channelQueue, _self);\r\n                }\r\n                // Add on \"channelController\" as the last \"plugin\"\r\n                allExtensions[_DYN_PUSH /* @min:%2epush */](_channelControl);\r\n                _coreExtensions[_DYN_PUSH /* @min:%2epush */](_channelControl);\r\n                // Required to allow plugins to call core.getPlugin() during their own initialization\r\n                _self[_DYN__EXTENSIONS /* @min:%2e_extensions */] = sortPlugins(allExtensions);\r\n                // Initialize the controls\r\n                _channelControl[_DYN_INITIALIZE /* @min:%2einitialize */](_config, _self, allExtensions);\r\n                initializePlugins(_createTelCtx(), allExtensions);\r\n                // Now reset the extensions to just those being managed by Basecore\r\n                _self[_DYN__EXTENSIONS /* @min:%2e_extensions */] = objFreeze(sortPlugins(_coreExtensions || [])).slice();\r\n                if (updateState) {\r\n                    _doUpdate(updateState);\r\n                }\r\n            }\r\n            function _getPlugin(pluginIdentifier) {\r\n                var _a;\r\n                var theExt = null;\r\n                var thePlugin = null;\r\n                arrForEach(_self[_DYN__EXTENSIONS /* @min:%2e_extensions */], function (ext) {\r\n                    if (ext[_DYN_IDENTIFIER /* @min:%2eidentifier */] === pluginIdentifier && ext !== _channelControl && ext !== _telemetryInitializerPlugin) {\r\n                        thePlugin = ext;\r\n                        return -1;\r\n                    }\r\n                });\r\n                if (!thePlugin && _channelControl) {\r\n                    // Check the channel Controller\r\n                    thePlugin = _channelControl.getChannel(pluginIdentifier);\r\n                }\r\n                if (thePlugin) {\r\n                    theExt = (_a = {\r\n                            plugin: thePlugin\r\n                        },\r\n                        _a[_DYN_SET_ENABLED /* @min:setEnabled */] = function (enabled) {\r\n                            _getPluginState(thePlugin)[STR_DISABLED] = !enabled;\r\n                        },\r\n                        _a.isEnabled = function () {\r\n                            var pluginState = _getPluginState(thePlugin);\r\n                            return !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] && !pluginState[STR_DISABLED];\r\n                        },\r\n                        _a.remove = function (isAsync, removeCb) {\r\n                            var _a;\r\n                            if (isAsync === void 0) { isAsync = true; }\r\n                            var pluginsToRemove = [thePlugin];\r\n                            var unloadState = (_a = {\r\n                                    reason: 1 /* TelemetryUnloadReason.PluginUnload */\r\n                                },\r\n                                _a[_DYN_IS_ASYNC /* @min:isAsync */] = isAsync,\r\n                                _a);\r\n                            _removePlugins(pluginsToRemove, unloadState, function (removed) {\r\n                                if (removed) {\r\n                                    // Re-Initialize the plugin chain\r\n                                    _initPluginChain({\r\n                                        reason: 32 /* TelemetryUpdateReason.PluginRemoved */,\r\n                                        removed: pluginsToRemove\r\n                                    });\r\n                                }\r\n                                removeCb && removeCb(removed);\r\n                            });\r\n                        },\r\n                        _a);\r\n                }\r\n                return theExt;\r\n            }\r\n            function _getPluginChain() {\r\n                if (!_pluginChain) {\r\n                    // copy the collection of extensions\r\n                    var extensions = (_coreExtensions || []).slice();\r\n                    // During add / remove this may get called again, so don't readd if already present\r\n                    if (arrIndexOf(extensions, _telemetryInitializerPlugin) === -1) {\r\n                        extensions[_DYN_PUSH /* @min:%2epush */](_telemetryInitializerPlugin);\r\n                    }\r\n                    _pluginChain = createTelemetryProxyChain(sortPlugins(extensions), _config, _self);\r\n                }\r\n                return _pluginChain;\r\n            }\r\n            function _removePlugins(thePlugins, unloadState, removeComplete) {\r\n                if (thePlugins && thePlugins[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var unloadChain = createTelemetryProxyChain(thePlugins, _config, _self);\r\n                    var unloadCtx = createProcessTelemetryUnloadContext(unloadChain, _self);\r\n                    unloadCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](function () {\r\n                        var removed = false;\r\n                        // Remove the listed config extensions\r\n                        var newConfigExtensions = [];\r\n                        arrForEach(_configExtensions, function (plugin, idx) {\r\n                            if (!_isPluginPresent(plugin, thePlugins)) {\r\n                                newConfigExtensions[_DYN_PUSH /* @min:%2epush */](plugin);\r\n                            }\r\n                            else {\r\n                                removed = true;\r\n                            }\r\n                        });\r\n                        _configExtensions = newConfigExtensions;\r\n                        // Re-Create the channel config\r\n                        var newChannelConfig = [];\r\n                        if (_channelConfig) {\r\n                            arrForEach(_channelConfig, function (queue, idx) {\r\n                                var newQueue = [];\r\n                                arrForEach(queue, function (channel) {\r\n                                    if (!_isPluginPresent(channel, thePlugins)) {\r\n                                        newQueue[_DYN_PUSH /* @min:%2epush */](channel);\r\n                                    }\r\n                                    else {\r\n                                        removed = true;\r\n                                    }\r\n                                });\r\n                                newChannelConfig[_DYN_PUSH /* @min:%2epush */](newQueue);\r\n                            });\r\n                            _channelConfig = newChannelConfig;\r\n                        }\r\n                        removeComplete && removeComplete(removed);\r\n                    });\r\n                    unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n                }\r\n                else {\r\n                    removeComplete(false);\r\n                }\r\n            }\r\n            function _flushInternalLogs() {\r\n                var queue = _self[_DYN_LOGGER /* @min:%2elogger */] ? _self[_DYN_LOGGER /* @min:%2elogger */].queue : [];\r\n                if (queue) {\r\n                    arrForEach(queue, function (logMessage) {\r\n                        var _a;\r\n                        var item = (_a = {},\r\n                            _a[_DYN_NAME /* @min:name */] = _internalLogsEventName ? _internalLogsEventName : \"InternalMessageId: \" + logMessage[_DYN_MESSAGE_ID /* @min:%2emessageId */],\r\n                            _a.iKey = getCfgValue(_config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */]),\r\n                            _a.time = toISOString(new Date()),\r\n                            _a.baseType = _InternalLogMessage.dataType,\r\n                            _a.baseData = { message: logMessage[_DYN_MESSAGE /* @min:%2emessage */] },\r\n                            _a);\r\n                        _self.track(item);\r\n                    });\r\n                    queue[_DYN_LENGTH /* @min:%2elength */] = 0;\r\n                }\r\n            }\r\n            function _flushChannels(isAsync, callBack, sendReason, cbTimeout) {\r\n                if (_channelControl) {\r\n                    return _channelControl[_DYN_FLUSH /* @min:%2eflush */](isAsync, callBack, sendReason || 6 /* SendRequestReason.SdkUnload */, cbTimeout);\r\n                }\r\n                callBack && callBack(false);\r\n                return true;\r\n            }\r\n            function _initDebugListener() {\r\n                var disableDbgExt = getCfgValue(_config.disableDbgExt);\r\n                if (disableDbgExt === true && _debugListener) {\r\n                    // Remove any previously loaded debug listener\r\n                    _notificationManager[_DYN_REMOVE_NOTIFICATION_2 /* @min:%2eremoveNotificationListener */](_debugListener);\r\n                    _debugListener = null;\r\n                }\r\n                if (_notificationManager && !_debugListener && disableDbgExt !== true) {\r\n                    _debugListener = getDebugListener(_config);\r\n                    _notificationManager[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */](_debugListener);\r\n                }\r\n            }\r\n            function _initPerfManager() {\r\n                var enablePerfMgr = getCfgValue(_config.enablePerfMgr);\r\n                if (!enablePerfMgr && _cfgPerfManager) {\r\n                    // Remove any existing config based performance manager\r\n                    _cfgPerfManager = null;\r\n                }\r\n                if (enablePerfMgr) {\r\n                    // Set the performance manager creation function if not defined\r\n                    getSetValue(_config, STR_CREATE_PERF_MGR, _createPerfManager);\r\n                }\r\n            }\r\n            function _initExtConfig() {\r\n                var extConfig = getSetValue(_config, STR_EXTENSION_CONFIG, {});\r\n                extConfig.NotificationManager = _notificationManager;\r\n            }\r\n            function _doUpdate(updateState) {\r\n                var updateCtx = createProcessTelemetryUpdateContext(_getPluginChain(), _self);\r\n                if (!_self._updateHook || _self._updateHook(updateCtx, updateState) !== true) {\r\n                    updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](updateState);\r\n                }\r\n            }\r\n            function _logOrThrowError(message) {\r\n                var logger = _self[_DYN_LOGGER /* @min:%2elogger */];\r\n                if (logger) {\r\n                    // there should always be a logger\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, message);\r\n                }\r\n                else {\r\n                    throwError(message);\r\n                }\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for BaseCore.prototype.initialize.\r\n// Removed Stub for BaseCore.prototype.getTransmissionControls.\r\n// Removed Stub for BaseCore.prototype.track.\r\n// Removed Stub for BaseCore.prototype.getProcessTelContext.\r\n// Removed Stub for BaseCore.prototype.getNotifyMgr.\r\n// Removed Stub for BaseCore.prototype.addNotificationListener.\r\n// Removed Stub for BaseCore.prototype.removeNotificationListener.\r\n// Removed Stub for BaseCore.prototype.getCookieMgr.\r\n// Removed Stub for BaseCore.prototype.setCookieMgr.\r\n// Removed Stub for BaseCore.prototype.getPerfMgr.\r\n// Removed Stub for BaseCore.prototype.setPerfMgr.\r\n// Removed Stub for BaseCore.prototype.eventCnt.\r\n// Removed Stub for BaseCore.prototype.pollInternalLogs.\r\n// Removed Stub for BaseCore.prototype.stopPollingInternalLogs.\r\n// Removed Stub for BaseCore.prototype.addTelemetryInitializer.\r\n// Removed Stub for BaseCore.prototype.unload.\r\n// Removed Stub for BaseCore.prototype.getPlugin.\r\n// Removed Stub for BaseCore.prototype.addPlugin.\r\n// Removed Stub for BaseCore.prototype.evtNamespace.\r\n// Removed Stub for BaseCore.prototype.addUnloadCb.\r\n// Removed Stub for BaseCore.prototype.flush.\r\n// Removed Stub for BaseCore.prototype.getTraceCtx.\r\n// Removed Stub for BaseCore.prototype.setTraceCtx.\r\n// Removed Stub for BaseCore.prototype.releaseQueue.\r\n// Removed Stub for BaseCore.prototype._updateHook.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    BaseCore.__ieDyn=1;\n\n    return BaseCore;\r\n}());\r\nexport { BaseCore };\r\n//# sourceMappingURL=BaseCore.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_ADD_NOTIFICATION_LIS1, _DYN_IS_ASYNC, _DYN_IS_CHILD_EVT, _DYN_LISTENERS, _DYN_PUSH, _DYN_REMOVE_NOTIFICATION_2, _DYN_SPLICE } from \"../__DynamicConstants\";\r\nimport { arrForEach, arrIndexOf } from \"./HelperFuncs\";\r\nimport { STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_EVENTS_SENT, STR_PERF_EVENT } from \"./InternalConstants\";\r\nfunction _runListeners(listeners, name, isAsync, callback) {\r\n    arrForEach(listeners, function (listener) {\r\n        if (listener && listener[name]) {\r\n            if (isAsync) {\r\n                setTimeout(function () { return callback(listener); }, 0);\r\n            }\r\n            else {\r\n                try {\r\n                    callback(listener);\r\n                }\r\n                catch (e) {\r\n                    // Catch errors to ensure we don't block sending the requests\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n/**\r\n * Class to manage sending notifications to all the listeners.\r\n */\r\nvar NotificationManager = /** @class */ (function () {\r\n    function NotificationManager(config) {\r\n        this.listeners = [];\r\n        var perfEvtsSendAll = !!(config || {}).perfEvtsSendAll;\r\n        dynamicProto(NotificationManager, this, function (_self) {\r\n            _self[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */] = function (listener) {\r\n                _self.listeners[_DYN_PUSH /* @min:%2epush */](listener);\r\n            };\r\n            /**\r\n             * Removes all instances of the listener.\r\n             * @param {INotificationListener} listener - AWTNotificationListener to remove.\r\n             */\r\n            _self[_DYN_REMOVE_NOTIFICATION_2 /* @min:%2eremoveNotificationListener */] = function (listener) {\r\n                var index = arrIndexOf(_self[_DYN_LISTENERS /* @min:%2elisteners */], listener);\r\n                while (index > -1) {\r\n                    _self.listeners[_DYN_SPLICE /* @min:%2esplice */](index, 1);\r\n                    index = arrIndexOf(_self[_DYN_LISTENERS /* @min:%2elisteners */], listener);\r\n                }\r\n            };\r\n            /**\r\n             * Notification for events sent.\r\n             * @param {ITelemetryItem[]} events - The array of events that have been sent.\r\n             */\r\n            _self[STR_EVENTS_SENT /* @min:%2eeventsSent */] = function (events) {\r\n                _runListeners(_self[_DYN_LISTENERS /* @min:%2elisteners */], STR_EVENTS_SENT, true, function (listener) {\r\n                    listener[STR_EVENTS_SENT /* @min:%2eeventsSent */](events);\r\n                });\r\n            };\r\n            /**\r\n             * Notification for events being discarded.\r\n             * @param {ITelemetryItem[]} events - The array of events that have been discarded by the SDK.\r\n             * @param {number} reason           - The reason for which the SDK discarded the events. The EventsDiscardedReason\r\n             * constant should be used to check the different values.\r\n             */\r\n            _self[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */] = function (events, reason) {\r\n                _runListeners(_self[_DYN_LISTENERS /* @min:%2elisteners */], STR_EVENTS_DISCARDED, true, function (listener) {\r\n                    listener[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */](events, reason);\r\n                });\r\n            };\r\n            /**\r\n             * [Optional] A function called when the events have been requested to be sent to the sever.\r\n             * @param {number} sendReason - The reason why the event batch is being sent.\r\n             * @param {boolean} isAsync   - A flag which identifies whether the requests are being sent in an async or sync manner.\r\n             */\r\n            _self[STR_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */] = function (sendReason, isAsync) {\r\n                _runListeners(_self[_DYN_LISTENERS /* @min:%2elisteners */], STR_EVENTS_SEND_REQUEST, isAsync, function (listener) {\r\n                    listener[STR_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */](sendReason, isAsync);\r\n                });\r\n            };\r\n            _self[STR_PERF_EVENT /* @min:%2eperfEvent */] = function (perfEvent) {\r\n                if (perfEvent) {\r\n                    // Send all events or only parent events\r\n                    if (perfEvtsSendAll || !perfEvent[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */]()) {\r\n                        _runListeners(_self[_DYN_LISTENERS /* @min:%2elisteners */], STR_PERF_EVENT, false, function (listener) {\r\n                            if (perfEvent[_DYN_IS_ASYNC /* @min:%2eisAsync */]) {\r\n                                setTimeout(function () { return listener[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent); }, 0);\r\n                            }\r\n                            else {\r\n                                listener[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for NotificationManager.prototype.addNotificationListener.\r\n// Removed Stub for NotificationManager.prototype.removeNotificationListener.\r\n// Removed Stub for NotificationManager.prototype.eventsSent.\r\n// Removed Stub for NotificationManager.prototype.eventsDiscarded.\r\n// Removed Stub for NotificationManager.prototype.eventsSendRequest.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    NotificationManager.__ieDyn=1;\n\n    return NotificationManager;\r\n}());\r\nexport { NotificationManager };\r\n//# sourceMappingURL=NotificationManager.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_GET_NOTIFY_MGR, _DYN_INITIALIZE, _DYN_NAME } from \"../__DynamicConstants\";\r\nimport { BaseCore } from \"./BaseCore\";\r\nimport { DiagnosticLogger } from \"./DiagnosticLogger\";\r\nimport { isNullOrUndefined, throwError } from \"./HelperFuncs\";\r\nimport { STR_EVENTS_DISCARDED, STR_GET_PERF_MGR } from \"./InternalConstants\";\r\nimport { NotificationManager } from \"./NotificationManager\";\r\nimport { doPerf } from \"./PerfManager\";\r\nvar AppInsightsCore = /** @class */ (function (_super) {\r\n    __extends(AppInsightsCore, _super);\r\n    function AppInsightsCore() {\r\n        var _this = _super.call(this) || this;\r\n        dynamicProto(AppInsightsCore, _this, function (_self, _base) {\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, extensions, logger, notificationManager) {\r\n                _base[_DYN_INITIALIZE /* @min:%2einitialize */](config, extensions, logger || new DiagnosticLogger(config), notificationManager || new NotificationManager(config));\r\n            };\r\n            _self.track = function (telemetryItem) {\r\n                doPerf(_self[STR_GET_PERF_MGR /* @min:%2egetPerfMgr */](), function () { return \"AppInsightsCore:track\"; }, function () {\r\n                    if (telemetryItem === null) {\r\n                        _notifyInvalidEvent(telemetryItem);\r\n                        // throw error\r\n                        throwError(\"Invalid telemetry item\");\r\n                    }\r\n                    // do basic validation before sending it through the pipeline\r\n                    _validateTelemetryItem(telemetryItem);\r\n                    _base.track(telemetryItem);\r\n                }, function () { return ({ item: telemetryItem }); }, !(telemetryItem.sync));\r\n            };\r\n            function _validateTelemetryItem(telemetryItem) {\r\n                if (isNullOrUndefined(telemetryItem[_DYN_NAME /* @min:%2ename */])) {\r\n                    _notifyInvalidEvent(telemetryItem);\r\n                    throwError(\"telemetry name required\");\r\n                }\r\n            }\r\n            function _notifyInvalidEvent(telemetryItem) {\r\n                var manager = _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */]();\r\n                if (manager) {\r\n                    manager[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */]([telemetryItem], 2 /* eEventsDiscardedReason.InvalidEvent */);\r\n                }\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for AppInsightsCore.prototype.initialize.\r\n// Removed Stub for AppInsightsCore.prototype.track.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    AppInsightsCore.__ieDyn=1;\n\n    return AppInsightsCore;\r\n}(BaseCore));\r\nexport { AppInsightsCore };\r\n//# sourceMappingURL=AppInsightsCore.js.map","/*\n * 1DS JS SDK Core, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* AppInsightsCore.ts\r\n* @author Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { AppInsightsCore as InternalCore, DiagnosticLogger, _throwInternal, arrForEach, doPerf, dumpObj, throwError } from \"@microsoft/applicationinsights-core-js\";\r\nimport { STR_DEFAULT_ENDPOINT_URL, STR_EMPTY, STR_PROPERTIES, STR_VERSION } from \"./InternalConstants\";\r\nimport { FullVersionString, getTime, isLatency } from \"./Utils\";\r\nvar AppInsightsCore = /** @class */ (function (_super) {\r\n    __extends(AppInsightsCore, _super);\r\n    function AppInsightsCore() {\r\n        var _this = _super.call(this) || this;\r\n        _this.pluginVersionStringArr = [];\r\n        dynamicProto(AppInsightsCore, _this, function (_self, _base) {\r\n            if (!_self.logger || !_self.logger.queue) {\r\n                // The AI Base can inject a No-Op logger so if not defined or the No-Op, change to use a default logger so initialization errors\r\n                // are not dropped on the floor if one is not already defined\r\n                _self.logger = new DiagnosticLogger({ loggingLevelConsole: 1 /* eLoggingSeverity.CRITICAL */ });\r\n            }\r\n            _self.initialize = function (config, extensions, logger, notificationManager) {\r\n                doPerf(_self, function () { return \"AppInsightsCore.initialize\"; }, function () {\r\n                    var _pluginVersionStringArr = _self.pluginVersionStringArr;\r\n                    // Add default collector url\r\n                    if (config) {\r\n                        if (!config.endpointUrl) {\r\n                            config.endpointUrl = STR_DEFAULT_ENDPOINT_URL;\r\n                        }\r\n                        var propertyStorageOverride = config.propertyStorageOverride;\r\n                        // Validate property storage override\r\n                        if (propertyStorageOverride && (!propertyStorageOverride.getProperty || !propertyStorageOverride.setProperty)) {\r\n                            throwError(\"Invalid property storage override passed.\");\r\n                        }\r\n                        if (config.channels) {\r\n                            arrForEach(config.channels, function (channels) {\r\n                                if (channels) {\r\n                                    arrForEach(channels, function (channel) {\r\n                                        if (channel.identifier && channel.version) {\r\n                                            var ver = channel.identifier + \"=\" + channel.version;\r\n                                            _pluginVersionStringArr.push(ver);\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    _self.getWParam = function () {\r\n                        return (typeof document !== \"undefined\" || !!config.enableWParam) ? 0 : -1;\r\n                    };\r\n                    if (extensions) {\r\n                        arrForEach(extensions, function (ext) {\r\n                            if (ext && ext.identifier && ext.version) {\r\n                                var ver = ext.identifier + \"=\" + ext.version;\r\n                                _pluginVersionStringArr.push(ver);\r\n                            }\r\n                        });\r\n                    }\r\n                    _self.pluginVersionString = _pluginVersionStringArr.join(\";\");\r\n                    _self.pluginVersionStringArr = _pluginVersionStringArr;\r\n                    try {\r\n                        _base.initialize(config, extensions, logger, notificationManager);\r\n                        _self.pollInternalLogs(\"InternalLog\");\r\n                    }\r\n                    catch (e) {\r\n                        var logger_1 = _self.logger;\r\n                        var message = dumpObj(e);\r\n                        if (message.indexOf(\"channels\") !== -1) {\r\n                            // Add some additional context to the underlying reported error\r\n                            message += \"\\n - Channels must be provided through config.channels only!\";\r\n                        }\r\n                        _throwInternal(logger_1, 1 /* eLoggingSeverity.CRITICAL */, 514 /* _eExtendedInternalMessageId.FailedToInitializeSDK */, \"SDK Initialization Failed - no telemetry will be sent: \" + message);\r\n                    }\r\n                }, function () { return ({ config: config, extensions: extensions, logger: logger, notificationManager: notificationManager }); });\r\n            };\r\n            _self.track = function (item) {\r\n                doPerf(_self, function () { return \"AppInsightsCore.track\"; }, function () {\r\n                    var telemetryItem = item;\r\n                    if (telemetryItem) {\r\n                        telemetryItem.timings = telemetryItem.timings || {};\r\n                        telemetryItem.timings.trackStart = getTime();\r\n                        if (!isLatency(telemetryItem.latency)) {\r\n                            telemetryItem.latency = 1 /* EventLatencyValue.Normal */;\r\n                        }\r\n                        var itemExt = telemetryItem.ext = telemetryItem.ext || {};\r\n                        itemExt.sdk = itemExt.sdk || {};\r\n                        itemExt.sdk.ver = FullVersionString;\r\n                        var baseData = telemetryItem.baseData = telemetryItem.baseData || {};\r\n                        baseData[STR_PROPERTIES] = baseData[STR_PROPERTIES] || {};\r\n                        var itemProperties = baseData[STR_PROPERTIES];\r\n                        itemProperties[STR_VERSION] = itemProperties[STR_VERSION] || _self.pluginVersionString || STR_EMPTY;\r\n                    }\r\n                    _base.track(telemetryItem);\r\n                }, function () { return ({ item: item }); }, !(item.sync));\r\n            };\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for AppInsightsCore.prototype.initialize.\r\n// Removed Stub for AppInsightsCore.prototype.track.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    AppInsightsCore.__ieDyn=1;\n\n    return AppInsightsCore;\r\n}(InternalCore));\r\nexport default AppInsightsCore;\r\n//# sourceMappingURL=AppInsightsCore.js.map","/*\n * 1DS JS SDK Core, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* BaseCore.ts\r\n* Base Core is a subset of 1DS Web SDK Core. The purpose of Base Core is to generate a smaller bundle size while providing essential features of Core. Features that are not included in Base Core are:\r\n* 1. Internal logging\r\n* 2. Sending notifications on telemetry sent/discarded\r\n* @author Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { BaseCore as InternalCore, _throwInternal, dumpObj } from \"@microsoft/applicationinsights-core-js\";\r\nimport { STR_DEFAULT_ENDPOINT_URL } from \"./InternalConstants\";\r\nimport { FullVersionString, isDocumentObjectAvailable } from \"./Utils\";\r\nvar BaseCore = /** @class */ (function (_super) {\r\n    __extends(BaseCore, _super);\r\n    function BaseCore() {\r\n        var _this = _super.call(this) || this;\r\n        dynamicProto(BaseCore, _this, function (_self, _base) {\r\n            _self.initialize = function (config, extensions, logger, notificationManager) {\r\n                if (config && !config.endpointUrl) {\r\n                    config.endpointUrl = STR_DEFAULT_ENDPOINT_URL;\r\n                }\r\n                _self.getWParam = function () {\r\n                    return (isDocumentObjectAvailable || !!config.enableWParam) ? 0 : -1;\r\n                };\r\n                try {\r\n                    _base.initialize(config, extensions, logger, notificationManager);\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(_self.logger, 1 /* eLoggingSeverity.CRITICAL */, 514 /* _eExtendedInternalMessageId.FailedToInitializeSDK */, \"Initialization Failed: \" + dumpObj(e) + \"\\n - Note: Channels must be provided through config.channels only\");\r\n                }\r\n            };\r\n            _self.track = function (item) {\r\n                var telemetryItem = item;\r\n                if (telemetryItem) {\r\n                    var ext = telemetryItem.ext = telemetryItem.ext || {};\r\n                    ext.sdk = ext.sdk || {};\r\n                    ext.sdk.ver = FullVersionString;\r\n                }\r\n                _base.track(telemetryItem);\r\n            };\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for BaseCore.prototype.initialize.\r\n// Removed Stub for BaseCore.prototype.track.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    BaseCore.__ieDyn=1;\n\n    return BaseCore;\r\n}(InternalCore));\r\nexport default BaseCore;\r\n//# sourceMappingURL=BaseCore.js.map","/*\n * 1DS JS SDK Core, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* ESPromise.ts\r\n* @author  Nev Wylie (newylie))\r\n* @copyright Microsoft 2019\r\n* Simplified wrapper to provide ES6 style Promise callback handling for older browsers\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { isFunction } from \"@microsoft/applicationinsights-core-js\";\r\n/**\r\n * @ignore -- Don't include in the generated documentation\r\n * Using a local variable to assist with minfication\r\n */\r\nvar _isFunction = isFunction;\r\n/**\r\n * @ignore -- Don't include in the generated documentation\r\n * This function will be used as onFulfilled handler for any Promise found in the iterable passed to Promise.all.\r\n * The goal here is to capture in a closure the index of the current item from the iterable. If we did not create\r\n * this closure, the captured index variable would be the same one that the for loop updates and thus would always\r\n * be pointing to the last index in the iterable by the time that the onFulfilled handler is called.\r\n * However, note that for the resolvedCallback callback we want the opposite. For this one we do want to capture\r\n * the same variable that the for loop updates so that we have the full count of pending promises by the time\r\n * the onFulfilled handlers start getting called.\r\n * @param values The resolving promise values\r\n * @param index The index of this callback function\r\n * @param resolvedCallback THe callback function used to check if the \"all\" promise is complete\r\n */\r\nfunction _createPromiseAllOnResolvedFunction(values, index, resolvedCallback) {\r\n    return function (value) {\r\n        values[index] = value;\r\n        resolvedCallback();\r\n    };\r\n}\r\n/**\r\n * Simplified wrapper to provide ES6 style Promise callback handling for older browsers\r\n */\r\nvar ESPromise = /** @class */ (function () {\r\n    /**\r\n     * The Promise object represents the eventual completion (or failure) of an asynchronous operation, and its resulting value.\r\n     * @param resolverFunc A function that is passed with the arguments resolve and reject. The executor function is executed\r\n     * immediately by the Promise implementation, passing resolve and reject functions (the executor is called before the Promise\r\n     * constructor even returns the created object). The resolve and reject functions, when called, resolve or reject the promise,\r\n     * respectively. The executor normally initiates some asynchronous work, and then, once that completes, either calls the resolve\r\n     * function to resolve the promise or else rejects it if an error occurred. If an error is thrown in the executor function, the\r\n     * promise is rejected. The return value of the executor is ignored.\r\n     */\r\n    function ESPromise(resolverFunc) {\r\n        var _state = 0 /* PromiseState.Pending */;\r\n        var _settledValue = null;\r\n        var _queue = [];\r\n        dynamicProto(ESPromise, this, function (_this) {\r\n            _this.then = function (onResolved, onRejected) {\r\n                return new ESPromise(function (resolve, reject) {\r\n                    // Queue the new promise returned to be resolved or rejected\r\n                    // when this promise settles.\r\n                    _enqueue(onResolved, onRejected, resolve, reject);\r\n                });\r\n            };\r\n            _this[\"catch\"] = function (onRejected) {\r\n                return _this.then(null, onRejected);\r\n            };\r\n        });\r\n        function _enqueue(onResolved, onRejected, resolve, reject) {\r\n            _queue.push(function () {\r\n                var value;\r\n                try {\r\n                    // First call the onFulfilled or onRejected handler, on the settled value\r\n                    // of this promise. If the corresponding handler does not exist, simply\r\n                    // pass through the settled value.\r\n                    if (_state === 1 /* PromiseState.Resolved */) {\r\n                        value = _isFunction(onResolved) ? onResolved(_settledValue) : _settledValue;\r\n                    }\r\n                    else {\r\n                        value = _isFunction(onRejected) ? onRejected(_settledValue) : _settledValue;\r\n                    }\r\n                    if (value instanceof ESPromise) {\r\n                        // The called handlers returned a new promise, so the chained promise\r\n                        // will follow the state of this promise.\r\n                        value.then(resolve, reject);\r\n                    }\r\n                    else if (_state === 2 /* PromiseState.Rejected */ && !_isFunction(onRejected)) {\r\n                        // If there wasn't an onRejected handler and this promise is rejected, then\r\n                        // the chained promise also rejects with the same reason.\r\n                        reject(value);\r\n                    }\r\n                    else {\r\n                        // If this promise is fulfilled, then the chained promise is also fulfilled\r\n                        // with either the settled value of this promise (if no onFulfilled handler\r\n                        // was available) or the return value of the handler. If this promise is\r\n                        // rejected and there was an onRejected handler, then the chained promise is\r\n                        // fulfilled with the return value of the handler.\r\n                        resolve(value);\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    // The chained promise will reject if there is any exception thrown while\r\n                    // calling the onFulfilled or onRejected handlers.\r\n                    reject(error);\r\n                    return;\r\n                }\r\n            });\r\n            // If this promise is already settled, then immediately process the callback we\r\n            // just added to the queue.\r\n            if (_state !== 0 /* PromiseState.Pending */) {\r\n                _processQueue();\r\n            }\r\n        }\r\n        function _processQueue() {\r\n            if (_queue.length > 0) {\r\n                // The onFulfilled and onRejected handlers must be called asynchronously. Thus,\r\n                // we make a copy of the queue and work on it once the current call stack unwinds.\r\n                var pending_1 = _queue.slice();\r\n                _queue = [];\r\n                setTimeout(function () {\r\n                    for (var i = 0, len = pending_1.length; i < len; ++i) {\r\n                        try {\r\n                            pending_1[i]();\r\n                        }\r\n                        catch (e) {\r\n                            // Don't let 1 failing handler break all others\r\n                            // TODO (newylie): Add some form of error reporting (i.e. Call any registered JS error handler so the error is reported)\r\n                        }\r\n                    }\r\n                }, 0);\r\n            }\r\n        }\r\n        function _resolve(value) {\r\n            if (_state === 0 /* PromiseState.Pending */) {\r\n                _settledValue = value;\r\n                _state = 1 /* PromiseState.Resolved */;\r\n                _processQueue();\r\n            }\r\n        }\r\n        function _reject(reason) {\r\n            if (_state === 0 /* PromiseState.Pending */) {\r\n                _settledValue = reason;\r\n                _state = 2 /* PromiseState.Rejected */;\r\n                _processQueue();\r\n            }\r\n        }\r\n        (function _initialize() {\r\n            if (!_isFunction(resolverFunc)) {\r\n                throw new TypeError(\"ESPromise: resolvedFunc argument is not a Function\");\r\n            }\r\n            try {\r\n                resolverFunc(_resolve, _reject);\r\n            }\r\n            catch (error) {\r\n                // This promise will immediately reject if any exception is thrown\r\n                // from within the executor function.\r\n                _reject(error);\r\n            }\r\n        })();\r\n    }\r\n    /**\r\n     * The Promise.resolve() method returns a Promise object that is resolved with a given value. If the value is a promise, that promise is returned;\r\n     * if the value is a thenable (i.e. has a \"then\" method), the returned promise will \"follow\" that thenable, adopting its eventual state; otherwise\r\n     * the returned promise will be fulfilled with the value. This function flattens nested layers of promise-like objects (e.g. a promise that resolves\r\n     * to a promise that resolves to something) into a single layer.\r\n     * @param value Argument to be resolved by this Promise. Can also be a Promise or a thenable to resolve.\r\n     */\r\n    ESPromise.resolve = function (value) {\r\n        if (value instanceof ESPromise) {\r\n            // Value is a Promise so just return it\r\n            return value;\r\n        }\r\n        else if (value && _isFunction(value.then)) {\r\n            // Value looks like a promise or thenable (has a then function)\r\n            return new ESPromise(function (resolve, reject) {\r\n                try {\r\n                    value.then(resolve, reject);\r\n                }\r\n                catch (error) {\r\n                    reject(error);\r\n                }\r\n            });\r\n        }\r\n        return new ESPromise(function (resolve) {\r\n            resolve(value);\r\n        });\r\n    };\r\n    /**\r\n     * The Promise.reject() method returns a Promise object that is rejected with a given reason.\r\n     * @param reason The reason why this Promise rejected.\r\n     */\r\n    ESPromise.reject = function (reason) {\r\n        return new ESPromise(function (resolve, reject) {\r\n            reject(reason);\r\n        });\r\n    };\r\n    /**\r\n     * The Promise.all() method returns a single Promise that resolves when all of the promises passed as an iterable\r\n     * have resolved or when the iterable contains no promises. It rejects with the reason of the first promise that\r\n     * rejects. There is no implied ordering in the execution of the array of Promises given. On some computers, they\r\n     * may be executed in parallel, or in some sense concurrently, while on others they may be executed serially. For\r\n     * this reason, there must be no dependency in any Promise on the order of execution of the Promises.\r\n     * This method can be useful for aggregating the results of multiple promises.\r\n     * FulfillmentSection - The returned promise is fulfilled with an array containing all the values of the iterable\r\n     * passed as argument (also non-promise values).\r\n     * If an empty iterable is passed, then this method returns (synchronously) an already resolved promise.\r\n     * If all of the passed-in promises fulfill, or are not promises, the promise returned by Promise.all is fulfilled\r\n     * asynchronously.\r\n     * RejectionSection - If any of the passed-in promises reject, Promise.all asynchronously rejects with the value of\r\n     * the promise that rejected, whether or not the other promises have resolved.\r\n     * @param iterable\r\n     */\r\n    ESPromise.all = function (iterable) {\r\n        if (!iterable || !iterable.length) {\r\n            return;\r\n        }\r\n        return new ESPromise(function (resolve, reject) {\r\n            try {\r\n                var values_1 = [];\r\n                var pending_2 = 0;\r\n                for (var lp = 0; lp < iterable.length; lp++) {\r\n                    var item = iterable[lp];\r\n                    // Quick and direct check for a Promise (will also catch a thenable)\r\n                    if (item && _isFunction(item.then)) {\r\n                        pending_2++;\r\n                        item.then(_createPromiseAllOnResolvedFunction(values_1, lp, function () {\r\n                            if (--pending_2 === 0) {\r\n                                resolve(values_1);\r\n                            }\r\n                        }), reject);\r\n                    }\r\n                    else {\r\n                        values_1[lp] = item;\r\n                    }\r\n                }\r\n                if (pending_2 === 0) {\r\n                    // All promises were either resolved or where not a promise\r\n                    setTimeout(function () {\r\n                        resolve(values_1);\r\n                    }, 0);\r\n                }\r\n            }\r\n            catch (error) {\r\n                reject(error);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * The race function returns a Promise that is settled the same way (and takes the same value) as the first promise\r\n     * that settles amongst the promises of the iterable passed as an argument.\r\n     * If the iterable passed is empty, the promise returned will be forever pending.\r\n     * If the iterable contains one or more non-promise value and/or an already settled promise, then Promise.race will\r\n     * resolve to the first of these values found in the iterable.\r\n     * @param iterable\r\n     */\r\n    ESPromise.race = function (iterable) {\r\n        return new ESPromise(function (resolve, reject) {\r\n            if (!iterable || !iterable.length) {\r\n                return;\r\n            }\r\n            try {\r\n                var _loop_1 = function (lp) {\r\n                    var item = iterable[lp];\r\n                    // Quick and direct check for a Promise (will also catch a thenable)\r\n                    if (item && _isFunction(item.then)) {\r\n                        item.then(resolve, reject);\r\n                    }\r\n                    else {\r\n                        setTimeout(function () {\r\n                            resolve(item);\r\n                        }, 0);\r\n                    }\r\n                };\r\n                for (var lp = 0; lp < iterable.length; lp++) {\r\n                    _loop_1(lp);\r\n                }\r\n            }\r\n            catch (error) {\r\n                reject(error);\r\n            }\r\n        });\r\n    };\r\n// Removed Stub for ESPromise.prototype.then.\r\n// Removed Stub for ESPromise.prototype[\"catch\"].\r\n    return ESPromise;\r\n}());\r\nexport default ESPromise;\r\n//# sourceMappingURL=ESPromise.js.map","/*\n * 1DS JS SDK Core, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* ESPromiseScheduler.ts\r\n* @author Nev Wylie (newylie)\r\n* @copyright Microsoft 2019\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport ESPromise from \"./ESPromise\";\r\nimport { _warnToConsole, getGlobal } from \"@microsoft/applicationinsights-core-js\";\r\n/** This is a default timeout that will cause outstanding running promises to be removed/rejected to avoid filling up memory with blocked events */\r\nvar LazyRejectPeriod = 600000; // 10 Minutes\r\n// These are global variables that are shared across ALL instances of the scheduler\r\n/**\r\n * @ignore\r\n */\r\nvar _schedulerId = 0;\r\n/**\r\n * @ignore\r\n */\r\nvar _running = [];\r\n/**\r\n * @ignore\r\n */\r\nvar _waiting = [];\r\n/**\r\n * @ignore\r\n */\r\nvar _timedOut = [];\r\n/**\r\n * @ignore\r\n */\r\nfunction _getTime() {\r\n    return new Date().getTime();\r\n}\r\n/**\r\n * Provides a simple mechanism queueing mechanism for scheduling events based on the ESPromise callbacks, this is used to ensure\r\n * order of async operations that are required to be executed in a specific order.\r\n */\r\nvar ESPromiseScheduler = /** @class */ (function () {\r\n    function ESPromiseScheduler(name, diagLog) {\r\n        var _promiseId = 0;\r\n        var _scheduledName = (name || \"<unnamed>\") + \".\" + _schedulerId;\r\n        _schedulerId++;\r\n        dynamicProto(ESPromiseScheduler, this, function (_this) {\r\n            var _lastEvent = null;\r\n            var _eventCount = 0;\r\n            _this.scheduleEvent = function (startEventAction, eventName, timeout) {\r\n                var uniqueId = _scheduledName + \".\" + _eventCount;\r\n                _eventCount++;\r\n                if (eventName) {\r\n                    uniqueId += \"-(\" + eventName + \")\";\r\n                }\r\n                var uniqueEventId = uniqueId + \"{\" + _promiseId + \"}\";\r\n                _promiseId++;\r\n                // Create the next scheduled event details\r\n                var newScheduledEvent = {\r\n                    evt: null,\r\n                    tm: _getTime(),\r\n                    id: uniqueEventId,\r\n                    isRunning: false,\r\n                    isAborted: false\r\n                };\r\n                if (!_lastEvent) {\r\n                    // We don't have any currently running event, so just start the next event\r\n                    newScheduledEvent.evt = _startWaitingEvent(newScheduledEvent);\r\n                }\r\n                else {\r\n                    // Start a new promise which will wait until all current active events are complete before starting\r\n                    // the new event, it does not resolve this scheduled event until after the new event is resolve to\r\n                    // ensure that all scheduled events are completed in the correct order\r\n                    newScheduledEvent.evt = _waitForPreviousEvent(newScheduledEvent, _lastEvent);\r\n                }\r\n                // Set this new event as the last one, so that any future events will wait for this one\r\n                _lastEvent = newScheduledEvent;\r\n                _lastEvent.evt._schId = uniqueEventId;\r\n                return newScheduledEvent.evt;\r\n                function _abortAndRemoveOldEvents(eventQueue) {\r\n                    var now = _getTime();\r\n                    var expired = now - LazyRejectPeriod;\r\n                    var len = eventQueue.length;\r\n                    var lp = 0;\r\n                    while (lp < len) {\r\n                        var evt = eventQueue[lp];\r\n                        if (evt && evt.tm < expired) {\r\n                            var message = null;\r\n                            if (evt.abort) {\r\n                                message = \"Aborting [\" + evt.id + \"] due to Excessive runtime (\" + (now - evt.tm) + \" ms)\";\r\n                                evt.abort(message);\r\n                            }\r\n                            else {\r\n                                message = \"Removing [\" + evt.id + \"] due to Excessive runtime (\" + (now - evt.tm) + \" ms)\";\r\n                            }\r\n                            _warnLog(message);\r\n                            eventQueue.splice(lp, 1);\r\n                            len--;\r\n                        }\r\n                        else {\r\n                            lp++;\r\n                        }\r\n                    }\r\n                }\r\n                function _cleanup(eventId, completed) {\r\n                    var toQueue = false;\r\n                    var removed = _removeQueuedEvent(_running, eventId);\r\n                    if (!removed) {\r\n                        removed = _removeQueuedEvent(_timedOut, eventId);\r\n                        toQueue = true;\r\n                    }\r\n                    if (removed) {\r\n                        if (removed.to) {\r\n                            // If there was a timeout stop it\r\n                            clearTimeout(removed.to);\r\n                            removed.to = null;\r\n                        }\r\n                        // TODO (newylie): Convert this into reportable metrics\r\n                        var tm = _getTime() - removed.tm;\r\n                        if (completed) {\r\n                            if (!toQueue) {\r\n                                _debugLog(\"Promise [\" + eventId + \"] Complete -- \" + tm + \" ms\");\r\n                            }\r\n                            else {\r\n                                _warnLog(\"Timed out event [\" + eventId + \"] finally complete -- \" + tm + \" ms\");\r\n                            }\r\n                        }\r\n                        else {\r\n                            _timedOut.push(removed);\r\n                            _warnLog(\"Event [\" + eventId + \"] Timed out and removed -- \" + tm + \" ms\");\r\n                        }\r\n                    }\r\n                    else {\r\n                        _debugLog(\"Failed to remove [\" + eventId + \"] from running queue\");\r\n                    }\r\n                    // Also if the last scheduled event was this event then clear it as we are now finished\r\n                    if (_lastEvent && _lastEvent.id === eventId) {\r\n                        _lastEvent = null;\r\n                    }\r\n                    _abortAndRemoveOldEvents(_running);\r\n                    _abortAndRemoveOldEvents(_waiting);\r\n                    _abortAndRemoveOldEvents(_timedOut);\r\n                }\r\n                // Return a callback function that will be called when the waiting promise is resolved or rejected to ensure\r\n                // that any outer promise is also resolved or rejected\r\n                function _removeScheduledEvent(eventId, callback) {\r\n                    return function (value) {\r\n                        _cleanup(eventId, true);\r\n                        callback && callback(value);\r\n                        return value;\r\n                    };\r\n                }\r\n                function _waitForFinalResult(eventId, startResult, schEventResolve, schEventReject) {\r\n                    startResult.then(function (value) {\r\n                        if (value instanceof ESPromise) {\r\n                            // If the result is a promise then this appears to be a chained result, so wait for this promise to complete\r\n                            _debugLog(\"Event [\" + eventId + \"] returned a promise -- waiting\");\r\n                            _waitForFinalResult(eventId, value, schEventResolve, schEventReject);\r\n                            return value;\r\n                        }\r\n                        else {\r\n                            return _removeScheduledEvent(eventId, schEventResolve)(value);\r\n                        }\r\n                    }, _removeScheduledEvent(eventId, schEventReject));\r\n                }\r\n                // Add the passed event to the active event list with resolve and reject callbacks that will remove\r\n                // it from the active event list\r\n                function _createScheduledEvent(eventDetails, startEvent) {\r\n                    var eventId = eventDetails.id;\r\n                    return new ESPromise(function (schEventResolve, schEventReject) {\r\n                        _debugLog(\"Event [\" + eventId + \"] Starting -- waited for \" + (eventDetails.wTm || \"--\") + \" ms\");\r\n                        eventDetails.isRunning = true;\r\n                        eventDetails.abort = function (message) {\r\n                            eventDetails.abort = null;\r\n                            eventDetails.isAborted = true;\r\n                            _cleanup(eventId, false);\r\n                            schEventReject(new Error(message));\r\n                        };\r\n                        var startResult = startEvent(eventId);\r\n                        if (startResult instanceof ESPromise) {\r\n                            if (timeout) {\r\n                                // Note: Only starting a timer if a timeout was specified\r\n                                eventDetails.to = setTimeout(function () {\r\n                                    _cleanup(eventId, false);\r\n                                    // Cause the listeners to reject (Note: We can't actually reject the waiting event)\r\n                                    schEventReject(new Error(\"Timed out after [\" + timeout + \"] ms\"));\r\n                                }, timeout);\r\n                            }\r\n                            _waitForFinalResult(eventId, startResult, function (theResult) {\r\n                                _debugLog(\"Event [\" + eventId + \"] Resolving after \" + (_getTime() - eventDetails.tm) + \" ms\");\r\n                                schEventResolve(theResult);\r\n                            }, schEventReject);\r\n                        }\r\n                        else {\r\n                            // The startEvent didn't return a promise so just return a resolved promise\r\n                            _debugLog(\"Promise [\" + eventId + \"] Auto completed as the start action did not return a promise\");\r\n                            schEventResolve();\r\n                        }\r\n                    });\r\n                }\r\n                function _startWaitingEvent(eventDetails) {\r\n                    var now = _getTime();\r\n                    eventDetails.wTm = now - eventDetails.tm;\r\n                    eventDetails.tm = now;\r\n                    if (eventDetails.isAborted) {\r\n                        return ESPromise.reject(new Error(\"[\" + uniqueId + \"] was aborted\"));\r\n                    }\r\n                    _running.push(eventDetails);\r\n                    return _createScheduledEvent(eventDetails, startEventAction);\r\n                }\r\n                // Start a new promise which will wait until all current active events are complete before starting\r\n                // the new event, it does not resolve this scheduled event until after the new event is resolve to\r\n                // ensure that all scheduled events are completed in the correct order\r\n                function _waitForPreviousEvent(eventDetails, waitForEvent) {\r\n                    var waitEvent = new ESPromise(function (waitResolve, waitReject) {\r\n                        var runTime = _getTime() - waitForEvent.tm;\r\n                        var prevId = waitForEvent.id;\r\n                        _debugLog(\"[\" + uniqueId + \"] is waiting for [\" + prevId + \":\" + runTime + \" ms] to complete before starting -- [\" + _waiting.length + \"] waiting and [\" + _running.length + \"] running\");\r\n                        eventDetails.abort = function (message) {\r\n                            eventDetails.abort = null;\r\n                            _removeQueuedEvent(_waiting, uniqueId);\r\n                            eventDetails.isAborted = true;\r\n                            waitReject(new Error(message));\r\n                        };\r\n                        // Wait for the previous event to complete\r\n                        waitForEvent.evt.then(function (value) {\r\n                            _removeQueuedEvent(_waiting, uniqueId);\r\n                            // Wait for the last event to complete before starting the new one, this ensures the execution\r\n                            // order so that we don't try and remove events that havn't been committed yet\r\n                            _startWaitingEvent(eventDetails).then(waitResolve, waitReject);\r\n                        }, function (reason) {\r\n                            _removeQueuedEvent(_waiting, uniqueId);\r\n                            // Wait for the last event to complete before starting the new one, this ensures the execution\r\n                            // order so that we don't try and remove events that havn't been committed yet\r\n                            _startWaitingEvent(eventDetails).then(waitResolve, waitReject);\r\n                        });\r\n                    });\r\n                    _waiting.push(eventDetails);\r\n                    return waitEvent;\r\n                }\r\n            };\r\n            function _removeQueuedEvent(queue, eventId) {\r\n                for (var lp = 0; lp < queue.length; lp++) {\r\n                    if (queue[lp].id === eventId) {\r\n                        return queue.splice(lp, 1)[0];\r\n                    }\r\n                }\r\n                return null;\r\n            }\r\n        });\r\n        function _debugLog(message) {\r\n            // Only log if running within test harness\r\n            var global = getGlobal();\r\n            if (global && global[\"QUnit\"]) {\r\n                // tslint:disable-next-line:no-console\r\n                console && console.log(\"ESPromiseScheduler[\" + _scheduledName + \"] \" + message);\r\n            }\r\n        }\r\n        function _warnLog(message) {\r\n            _warnToConsole(diagLog, \"ESPromiseScheduler[\" + _scheduledName + \"] \" + message);\r\n        }\r\n    }\r\n    ESPromiseScheduler.incomplete = function () {\r\n        return _running;\r\n    };\r\n    ESPromiseScheduler.waitingToStart = function () {\r\n        return _waiting;\r\n    };\r\n// Removed Stub for ESPromiseScheduler.prototype.scheduleEvent.\r\n    return ESPromiseScheduler;\r\n}());\r\nexport default ESPromiseScheduler;\r\n//# sourceMappingURL=ESPromiseScheduler.js.map","/*\n * 1DS JS SDK Core, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { isNullOrUndefined, isString, objForEachKey } from \"@microsoft/applicationinsights-core-js\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { getFieldValueType, isValueAssigned, isValueKind } from \"./Utils\";\r\nvar ValueSanitizer = /** @class */ (function () {\r\n    function ValueSanitizer(fieldSanitizerProvider) {\r\n        var _self = this;\r\n        // To aid with performance this is a lookup map to check if the field value sanitizer supports this field\r\n        var _sanitizerMap = {};\r\n        var _sanitizers = [];\r\n        var _fieldSanitizers = [];\r\n        if (fieldSanitizerProvider) {\r\n            _fieldSanitizers.push(fieldSanitizerProvider);\r\n        }\r\n        function _getFieldSanitizer(path, name) {\r\n            var result;\r\n            var fieldLookup = _sanitizerMap[path];\r\n            if (fieldLookup) {\r\n                result = fieldLookup[name];\r\n            }\r\n            if (!result && result !== null) {\r\n                // Null is a valid result indicating that the value sanitizer does not support this field\r\n                if (isString(path) && isString(name)) {\r\n                    if (_fieldSanitizers.length > 0) {\r\n                        for (var lp = 0; lp < _fieldSanitizers.length; lp++) {\r\n                            if (_fieldSanitizers[lp].handleField(path, name)) {\r\n                                result = {\r\n                                    canHandle: true,\r\n                                    fieldHandler: _fieldSanitizers[lp]\r\n                                };\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (_sanitizers.length === 0) {\r\n                        // Special use-case where there is no sanitizer to pass on to, so just resolving the field\r\n                        // and returning the resulting value (same as sanitizeProperty())\r\n                        result = {\r\n                            canHandle: true\r\n                        };\r\n                    }\r\n                }\r\n                // We still don't have a handler so lets lookup the providers\r\n                if (!result && result !== null) {\r\n                    // Setting the result to null -- which means we and any contained sanitizers can't handle this field\r\n                    result = null;\r\n                    for (var lp = 0; lp < _sanitizers.length; lp++) {\r\n                        if (_sanitizers[lp].handleField(path, name)) {\r\n                            result = {\r\n                                canHandle: true,\r\n                                handler: _sanitizers[lp],\r\n                                fieldHandler: null\r\n                            };\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (!fieldLookup) {\r\n                    fieldLookup = _sanitizerMap[path] = {};\r\n                }\r\n                fieldLookup[name] = result;\r\n            }\r\n            return result;\r\n        }\r\n        _self.addSanitizer = function (newSanitizer) {\r\n            if (newSanitizer) {\r\n                _sanitizers.push(newSanitizer);\r\n                // Invalidate any previously mapped fields\r\n                _sanitizerMap = {};\r\n            }\r\n        };\r\n        _self.addFieldSanitizer = function (fieldSanitizer) {\r\n            if (fieldSanitizer) {\r\n                _fieldSanitizers.push(fieldSanitizer);\r\n                // Invalidate any previously mapped fields\r\n                _sanitizerMap = {};\r\n            }\r\n        };\r\n        _self.handleField = function (path, name) {\r\n            var mapValue = _getFieldSanitizer(path, name);\r\n            return mapValue ? mapValue.canHandle : false;\r\n        };\r\n        _self.value = function (path, name, value, stringifyObjects) {\r\n            var mapValue = _getFieldSanitizer(path, name);\r\n            if (mapValue && mapValue.canHandle) {\r\n                if (!mapValue || !mapValue.canHandle) {\r\n                    return null;\r\n                }\r\n                if (mapValue.handler) {\r\n                    // This value sanitizer can't handle this field so pass it only the next one\r\n                    return mapValue.handler.value(path, name, value, stringifyObjects);\r\n                }\r\n                // Check that property is valid\r\n                if (!isString(name) || isNullOrUndefined(value) || value === STR_EMPTY) {\r\n                    return null;\r\n                }\r\n                var property = null;\r\n                var fieldType = getFieldValueType(value);\r\n                if ((fieldType & 8192 /* FieldValueSanitizerType.EventProperty */) === 8192 /* FieldValueSanitizerType.EventProperty */) {\r\n                    var subType = fieldType & ~8192 /* FieldValueSanitizerType.EventProperty */;\r\n                    property = value;\r\n                    if (!isValueAssigned(property.value) ||\r\n                        (subType !== 1 /* FieldValueSanitizerType.String */ &&\r\n                            subType !== 2 /* FieldValueSanitizerType.Number */ &&\r\n                            subType !== 3 /* FieldValueSanitizerType.Boolean */ &&\r\n                            (subType & 4096 /* FieldValueSanitizerType.Array */) !== 4096 /* FieldValueSanitizerType.Array */)) {\r\n                        // Not a supported IEventProperty type to be able to sanitize\r\n                        return null;\r\n                    }\r\n                }\r\n                else if (fieldType === 1 /* FieldValueSanitizerType.String */ ||\r\n                    fieldType === 2 /* FieldValueSanitizerType.Number */ ||\r\n                    fieldType === 3 /* FieldValueSanitizerType.Boolean */ ||\r\n                    (fieldType & 4096 /* FieldValueSanitizerType.Array */) === 4096 /* FieldValueSanitizerType.Array */) {\r\n                    // If the property isn't IEventProperty (and is either string, number, boolean or array), convert it into one.\r\n                    property = _convertToProperty(path, name, value);\r\n                }\r\n                else if (fieldType === 4 /* FieldValueSanitizerType.Object */) {\r\n                    property = _convertToProperty(path, name, !!stringifyObjects ? JSON.stringify(value) : value);\r\n                }\r\n                if (property) {\r\n                    return _handleProperty(mapValue, path, name, fieldType, property, stringifyObjects);\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        _self.property = function (path, name, property, stringifyObjects) {\r\n            var mapValue = _getFieldSanitizer(path, name);\r\n            if (!mapValue || !mapValue.canHandle) {\r\n                return null;\r\n            }\r\n            // Check that property is valid\r\n            if (!isString(name) || isNullOrUndefined(property) || !isValueAssigned(property.value)) {\r\n                return null;\r\n            }\r\n            var fieldType = getFieldValueType(property.value);\r\n            if (fieldType === 0 /* FieldValueSanitizerType.NotSet */) {\r\n                // Not a supported field that we can sanitize or serialize\r\n                return null;\r\n            }\r\n            return _handleProperty(mapValue, path, name, fieldType, property, stringifyObjects);\r\n        };\r\n        function _handleProperty(mapValue, path, name, fieldType, property, stringifyObjects) {\r\n            if (mapValue.handler) {\r\n                // This value sanitizer can't handle this field so pass it only the next one\r\n                return mapValue.handler.property(path, name, property, stringifyObjects);\r\n            }\r\n            // If either pii or cc is set convert value to string (since only string pii/cc is allowed).\r\n            // If the value is a complex type like an array that can't be converted to string we will drop\r\n            // the property.\r\n            if (!isNullOrUndefined(property.kind)) {\r\n                if ((fieldType & 4096 /* FieldValueSanitizerType.Array */) === 4096 /* FieldValueSanitizerType.Array */ || !isValueKind(property.kind)) {\r\n                    return null;\r\n                }\r\n                // Convert the value to a string and assign back to the original value\r\n                property.value = property.value.toString();\r\n            }\r\n            return _callFieldSanitizer(mapValue.fieldHandler, path, name, fieldType, property);\r\n        }\r\n        function _convertToProperty(path, name, value) {\r\n            if (isValueAssigned(value)) {\r\n                return { value: value };\r\n            }\r\n            return null;\r\n        }\r\n        function _callFieldSanitizer(fieldProvider, path, name, theType, property) {\r\n            if (property && fieldProvider) {\r\n                var sanitizer = fieldProvider.getSanitizer(path, name, theType, property.kind, property.propertyType);\r\n                if (sanitizer) {\r\n                    // This is where we the field will call the handler to \"scrub\" the value. This the primary hook for the ClientHashing Plugin to\r\n                    // be able to apply the hashFunc() / Sha256 conversion of the properties value\r\n                    if (theType === 4 /* FieldValueSanitizerType.Object */) {\r\n                        // Special case of an embedded object (ext.metadata, data.properties)\r\n                        var newValue_1 = {};\r\n                        var propValue = property.value;\r\n                        objForEachKey(propValue, function (propKey, theValue) {\r\n                            var newPath = path + \".\" + name;\r\n                            if (isValueAssigned(theValue)) {\r\n                                var newProp = _convertToProperty(newPath, propKey, theValue);\r\n                                newProp = _callFieldSanitizer(fieldProvider, newPath, propKey, getFieldValueType(theValue), newProp);\r\n                                if (newProp) {\r\n                                    newValue_1[propKey] = newProp.value;\r\n                                }\r\n                            }\r\n                        });\r\n                        property.value = newValue_1;\r\n                    }\r\n                    else {\r\n                        var details = {\r\n                            path: path,\r\n                            name: name,\r\n                            type: theType,\r\n                            prop: property,\r\n                            sanitizer: _self\r\n                        };\r\n                        property = sanitizer.call(_self, details);\r\n                    }\r\n                }\r\n            }\r\n            return property;\r\n        }\r\n    }\r\n    ValueSanitizer.getFieldType = getFieldValueType;\r\n    return ValueSanitizer;\r\n}());\r\nexport { ValueSanitizer };\r\n//# sourceMappingURL=ValueSanitizer.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\"use strict\";\r\nexport var MinChannelPriorty = 100;\r\n//# sourceMappingURL=IChannelControls.js.map","/*\n * 1DS JS SDK Core, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_DEFAULT_ENDPOINT_URL = \"https://browser.events.data.microsoft.com/OneCollector/1.0/\";\r\nexport var STR_PLUGIN_VERSION_STRING = \"pluginVersionString\";\r\nexport var STR_PLUGIN_VERSION_STRING_ARR = STR_PLUGIN_VERSION_STRING + \"Arr\";\r\nexport var STR_VERSION = \"version\";\r\nexport var STR_PROPERTIES = \"properties\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * 1DS JS SDK Core, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nvar _a;\r\n/**\r\n* Utils.ts\r\n* @author  Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n* File containing utility functions.\r\n*/\r\nimport { addEventHandler, addPageUnloadEventListener, areCookiesSupported, arrForEach, arrIndexOf, arrMap, arrReduce, dateNow, generateW3CId, getDocument, getGlobalInst, getNavigator, getWindow, hasOwnProperty, isArray, isBeaconsSupported, isBoolean, isDate, isError, isFunction, isIE, isNullOrUndefined, isNumber, isObject, isReactNative, isString, isTypeof, isUndefined, mwcRandom32, mwcRandomSeed, newGuid, newId, objDefineAccessors, objForEachKey, objKeys, perfNow, random32, randomValue, safeGetCookieMgr, strEndsWith, strObject, strTrim, strUndefined, toISOString, uaDisallowsSameSiteNone, useXDomainRequest } from \"@microsoft/applicationinsights-core-js\";\r\nimport { ObjHasOwnProperty, objCreateFn, strShimObject, strShimPrototype } from \"@microsoft/applicationinsights-shims\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nexport var Version = '3.2.8';\r\nexport var FullVersionString = \"1DS-Web-JS-\" + Version;\r\n// Defining here so we don't need to take (import) the ApplicationInsights Common module\r\nvar strDisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nvar strWithCredentials = \"withCredentials\";\r\nvar strTimeout = \"timeout\";\r\n// If value is array just get the type for the first element\r\nvar _fieldTypeEventPropMap = (_a = {},\r\n    _a[0 /* FieldValueSanitizerType.NotSet */] = 0 /* eEventPropertyType.Unspecified */,\r\n    _a[2 /* FieldValueSanitizerType.Number */] = 6 /* eEventPropertyType.Double */,\r\n    _a[1 /* FieldValueSanitizerType.String */] = 1 /* eEventPropertyType.String */,\r\n    _a[3 /* FieldValueSanitizerType.Boolean */] = 7 /* eEventPropertyType.Bool */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 2 /* FieldValueSanitizerType.Number */] = 6 /* eEventPropertyType.Double */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 1 /* FieldValueSanitizerType.String */] = 1 /* eEventPropertyType.String */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 3 /* FieldValueSanitizerType.Boolean */] = 7 /* eEventPropertyType.Bool */,\r\n    _a);\r\n/**\r\n * @ignore\r\n */\r\n// let _uaDisallowsSameSiteNone = null;\r\nvar uInt8ArraySupported = null;\r\n// var _areCookiesAvailable: boolean | undefined;\r\n/**\r\n * Checks if document object is available\r\n */\r\nexport var isDocumentObjectAvailable = Boolean(getDocument());\r\n/**\r\n * Checks if window object is available\r\n */\r\nexport var isWindowObjectAvailable = Boolean(getWindow());\r\n/**\r\n * Checks if value is assigned to the given param.\r\n * @param value - The token from which the tenant id is to be extracted.\r\n * @returns True/false denoting if value is assigned to the param.\r\n */\r\nexport function isValueAssigned(value) {\r\n    /// <summary> takes a value and checks for undefined, null and empty string </summary>\r\n    /// <param type=\"any\"> value to be tested </param>\r\n    /// <returns> true if value is null undefined or emptyString </returns>\r\n    return !(value === STR_EMPTY || isNullOrUndefined(value));\r\n}\r\n/**\r\n * Gets the tenant id from the tenant token.\r\n * @param apiKey - The token from which the tenant id is to be extracted.\r\n * @returns The tenant id.\r\n */\r\nexport function getTenantId(apiKey) {\r\n    if (apiKey) {\r\n        var indexTenantId = apiKey.indexOf(\"-\");\r\n        if (indexTenantId > -1) {\r\n            return apiKey.substring(0, indexTenantId);\r\n        }\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Checks if Uint8Array are available in the current environment. Safari and Firefox along with\r\n * ReactNative are known to not support Uint8Array properly.\r\n * @returns True if available, false otherwise.\r\n */\r\nexport function isUint8ArrayAvailable() {\r\n    if (uInt8ArraySupported === null) {\r\n        uInt8ArraySupported = !isUndefined(Uint8Array) && !isSafariOrFirefox() && !isReactNative();\r\n    }\r\n    return uInt8ArraySupported;\r\n}\r\n/**\r\n * Checks if the value is a valid EventLatency.\r\n * @param value - The value that needs to be checked.\r\n * @returns True if the value is in AWTEventLatency, false otherwise.\r\n */\r\nexport function isLatency(value) {\r\n    if (value && isNumber(value) && value >= 1 /* EventLatencyValue.Normal */ && value <= 4 /* EventLatencyValue.Immediate */) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Sanitizes the Property. It checks the that the property name and value are valid. It also\r\n * checks/populates the correct type and pii of the property value.\r\n * @param name - property name                          - The property name.\r\n * @param property - The property value or an IEventProperty containing value,\r\n * type ,pii and customer content.\r\n * @returns IEventProperty containing valid name, value, pii and type or null if invalid.\r\n */\r\nexport function sanitizeProperty(name, property, stringifyObjects) {\r\n    // Check that property is valid\r\n    if ((!property && !isValueAssigned(property)) || typeof name !== \"string\") {\r\n        return null;\r\n    }\r\n    // Perf optimization -- only need to get the type once not multiple times\r\n    var propType = typeof property;\r\n    // If the property isn't IEventProperty (and is either string, number, boolean or array), convert it into one.\r\n    if (propType === \"string\" || propType === \"number\" || propType === \"boolean\" || isArray(property)) {\r\n        property = { value: property };\r\n    }\r\n    else if (propType === \"object\" && !ObjHasOwnProperty.call(property, \"value\")) {\r\n        property = { value: stringifyObjects ? JSON.stringify(property) : property };\r\n    }\r\n    else if (isNullOrUndefined(property.value)\r\n        || property.value === STR_EMPTY || (!isString(property.value)\r\n        && !isNumber(property.value) && !isBoolean(property.value)\r\n        && !isArray(property.value))) {\r\n        // Since property is IEventProperty, we need to validate its value\r\n        return null;\r\n    }\r\n    // We need to check that if the property value is an array, it is valid\r\n    if (isArray(property.value) &&\r\n        !isArrayValid(property.value)) {\r\n        return null;\r\n    }\r\n    // If either pii or cc is set convert value to string (since only string pii/cc is allowed).\r\n    // If the value is a complex type like an array that can't be converted to string we will drop\r\n    // the property.\r\n    if (!isNullOrUndefined(property.kind)) {\r\n        if (isArray(property.value) || !isValueKind(property.kind)) {\r\n            return null;\r\n        }\r\n        property.value = property.value.toString();\r\n    }\r\n    return property;\r\n}\r\nexport function getCommonSchemaMetaData(value, kind, type) {\r\n    var encodedTypeValue = -1;\r\n    if (!isUndefined(value)) {\r\n        if (kind > 0) {\r\n            if (kind === 32) {\r\n                // encode customer content. Value can only be string. bit 13-16 are for cc\r\n                encodedTypeValue = (1 << 13);\r\n            }\r\n            else if (kind <= 13) {\r\n                // encode PII. Value can only be string. bits 5-12 are for Pii\r\n                encodedTypeValue = (kind << 5);\r\n            }\r\n        }\r\n        // isDataType checks that the \"type\" is a number so we don't need to check for undefined\r\n        if (isDataType(type)) {\r\n            // Data Type is provided and valid, so use that\r\n            if (encodedTypeValue === -1) {\r\n                // Don't return -1\r\n                encodedTypeValue = 0;\r\n            }\r\n            encodedTypeValue |= type;\r\n        }\r\n        else {\r\n            var propType = _fieldTypeEventPropMap[getFieldValueType(value)] || -1;\r\n            if (encodedTypeValue !== -1 && propType !== -1) {\r\n                // pii exists so we must return correct type\r\n                encodedTypeValue |= propType;\r\n            }\r\n            else if (propType === 6 /* eEventPropertyType.Double */) {\r\n                encodedTypeValue = propType;\r\n            }\r\n        }\r\n    }\r\n    return encodedTypeValue;\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().disable()\r\n * Force the SDK not to store and read any data from cookies.\r\n * Overriding the applicationinsights-core version for tree-shaking\r\n */\r\nexport function disableCookies() {\r\n    safeGetCookieMgr(null).setEnabled(false);\r\n}\r\n/**\r\n * @deprecated - Use the oneDs.getCookieMgr().set()\r\n * Sets the value of a cookie.\r\n * @param name - Cookie name.\r\n * @param value - Cookie value.\r\n * @param days - Expiration days.\r\n */\r\nexport function setCookie(name, value, days) {\r\n    if (areCookiesSupported(null)) {\r\n        safeGetCookieMgr(null).set(name, value, days * 86400, null, \"/\");\r\n    }\r\n}\r\n/**\r\n * @deprecated - Use the oneDs.getCookieMgr().del()\r\n * Deletes a cookie, by setting its expiration to -1.\r\n * @param name - Cookie name to delete.\r\n */\r\nexport function deleteCookie(name) {\r\n    if (areCookiesSupported(null)) {\r\n        safeGetCookieMgr(null).del(name);\r\n    }\r\n}\r\n/**\r\n * @deprecated - Use the oneDs.getCookieMgr().get()\r\n * Gets the cookie value for the specified cookie.\r\n * if value is k1=v1&k2==v2 then will return 'v1' for key 'k1'\r\n * @param cookieName - Cookie name.\r\n */\r\nexport function getCookie(name) {\r\n    if (areCookiesSupported(null)) {\r\n        return getCookieValue(safeGetCookieMgr(null), name);\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Helper to get and decode the cookie value using decodeURIComponent, this is for historical\r\n * backward compatibility where the document.cookie value was decoded before parsing.\r\n * @param cookieMgr - The cookie manager to use\r\n * @param name - The name of the cookie to get\r\n * @param decode - A flag to indicate whether the cookie value should be decoded\r\n * @returns The decoded cookie value (if available) otherwise an empty string.\r\n */\r\nexport function getCookieValue(cookieMgr, name, decode) {\r\n    if (decode === void 0) { decode = true; }\r\n    var cookieValue;\r\n    if (cookieMgr) {\r\n        cookieValue = cookieMgr.get(name);\r\n        if (decode && cookieValue && decodeURIComponent) {\r\n            cookieValue = decodeURIComponent(cookieValue);\r\n        }\r\n    }\r\n    return cookieValue || STR_EMPTY;\r\n}\r\n/**\r\n * Create a new guid.\r\n * @param style - The style of guid to generated, defaults to Digits\r\n * Digits (Default) : 32 digits separated by hyphens: 00000000-0000-0000-0000-000000000000\r\n * Braces - 32 digits separated by hyphens, enclosed in braces: {00000000-0000-0000-0000-000000000000}\r\n * Parentheses - 32 digits separated by hyphens, enclosed in parentheses: (00000000-0000-0000-0000-000000000000)\r\n * Numeric - 32 digits: 00000000000000000000000000000000\r\n * @returns The formatted guid.\r\n */\r\nexport function createGuid(style) {\r\n    if (style === void 0) { style = \"D\" /* GuidStyle.Digits */; }\r\n    var theGuid = newGuid();\r\n    if (style === \"B\" /* GuidStyle.Braces */) {\r\n        theGuid = \"{\" + theGuid + \"}\";\r\n    }\r\n    else if (style === \"P\" /* GuidStyle.Parentheses */) {\r\n        theGuid = \"(\" + theGuid + \")\";\r\n    }\r\n    else if (style === \"N\" /* GuidStyle.Numeric */) {\r\n        theGuid = theGuid.replace(/-/g, STR_EMPTY);\r\n    }\r\n    return theGuid;\r\n}\r\n/**\r\n * Pass in the objects to merge as arguments.\r\n * @param obj1 - object to merge.  Set this argument to 'true' for a deep extend.\r\n * @param obj2 - object to merge.\r\n * @param obj3 - object to merge.\r\n * @param obj4 - object to merge.\r\n * @param obj5 - object to merge.\r\n * @returns The extended object.\r\n */\r\nexport function extend(obj, obj2, obj3, obj4, obj5) {\r\n    // Variables\r\n    var extended = {};\r\n    var deep = false;\r\n    var i = 0;\r\n    var length = arguments.length;\r\n    var objProto = Object[strShimPrototype];\r\n    var theArgs = arguments;\r\n    // Check if a deep merge\r\n    if (objProto.toString.call(theArgs[0]) === \"[object Boolean]\") {\r\n        deep = theArgs[0];\r\n        i++;\r\n    }\r\n    // Loop through each object and conduct a merge\r\n    for (; i < length; i++) {\r\n        var obj = theArgs[i];\r\n        objForEachKey(obj, function (prop, value) {\r\n            // If deep merge and property is an object, merge properties\r\n            if (deep && value && isObject(value)) {\r\n                if (isArray(value)) {\r\n                    extended[prop] = extended[prop] || [];\r\n                    arrForEach(value, function (arrayValue, arrayIndex) {\r\n                        if (arrayValue && isObject(arrayValue)) {\r\n                            extended[prop][arrayIndex] = extend(true, extended[prop][arrayIndex], arrayValue);\r\n                        }\r\n                        else {\r\n                            extended[prop][arrayIndex] = arrayValue;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    extended[prop] = extend(true, extended[prop], value);\r\n                }\r\n            }\r\n            else {\r\n                extended[prop] = value;\r\n            }\r\n        });\r\n    }\r\n    return extended;\r\n}\r\nexport var getTime = perfNow;\r\nexport function isValueKind(value) {\r\n    // Always assume that it's a number (no type checking) for performance as this is used during the JSON serialization\r\n    if (value === 0 /* eValueKind.NotSet */ || ((value > 0 /* eValueKind.NotSet */ && value <= 13 /* eValueKind.Pii_IPV4AddressLegacy */) || value === 32 /* eValueKind.CustomerContent_GenericContent */)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isDataType(value) {\r\n    // Remark: 0 returns false, but it doesn't affect encoding anyways\r\n    // Always assume that it's a number (no type checking) for performance as this is used during the JSON serialization\r\n    if (value >= 0 && value <= 9) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSafariOrFirefox() {\r\n    var nav = getNavigator();\r\n    // If non-browser navigator will be undefined\r\n    if (!isUndefined(nav) && nav.userAgent) {\r\n        var ua = nav.userAgent.toLowerCase();\r\n        if ((ua.indexOf(\"safari\") >= 0 || ua.indexOf(\"firefox\") >= 0) && ua.indexOf(\"chrome\") < 0) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function isArrayValid(value) {\r\n    return value.length > 0;\r\n}\r\nexport function setProcessTelemetryTimings(event, identifier) {\r\n    var evt = event;\r\n    evt.timings = evt.timings || {};\r\n    evt.timings.processTelemetryStart = evt.timings.processTelemetryStart || {};\r\n    evt.timings.processTelemetryStart[identifier] = getTime();\r\n}\r\n/**\r\n * Returns a bitwise value for the FieldValueSanitizerType enum representing the decoded type of the passed value\r\n * @param value The value to determine the type\r\n */\r\nexport function getFieldValueType(value) {\r\n    var theType = 0 /* FieldValueSanitizerType.NotSet */;\r\n    if (value !== null && value !== undefined) {\r\n        var objType = typeof value;\r\n        if (objType === \"string\") {\r\n            theType = 1 /* FieldValueSanitizerType.String */;\r\n        }\r\n        else if (objType === \"number\") {\r\n            theType = 2 /* FieldValueSanitizerType.Number */;\r\n        }\r\n        else if (objType === \"boolean\") {\r\n            theType = 3 /* FieldValueSanitizerType.Boolean */;\r\n        }\r\n        else if (objType === strShimObject) {\r\n            theType = 4 /* FieldValueSanitizerType.Object */;\r\n            if (isArray(value)) {\r\n                theType = 4096 /* FieldValueSanitizerType.Array */;\r\n                if (value.length > 0) {\r\n                    // Empty arrays are not supported and are considered to be the same as null\r\n                    theType |= getFieldValueType(value[0]);\r\n                }\r\n            }\r\n            else if (ObjHasOwnProperty.call(value, \"value\")) {\r\n                // Looks like an IEventProperty\r\n                theType = 8192 /* FieldValueSanitizerType.EventProperty */ | getFieldValueType(value.value);\r\n            }\r\n        }\r\n    }\r\n    return theType;\r\n}\r\nexport var Utils = {\r\n    Version: Version,\r\n    FullVersionString: FullVersionString,\r\n    strUndefined: strUndefined,\r\n    strObject: strObject,\r\n    Undefined: strUndefined,\r\n    arrForEach: arrForEach,\r\n    arrIndexOf: arrIndexOf,\r\n    arrMap: arrMap,\r\n    arrReduce: arrReduce,\r\n    objKeys: objKeys,\r\n    toISOString: toISOString,\r\n    isReactNative: isReactNative,\r\n    isString: isString,\r\n    isNumber: isNumber,\r\n    isBoolean: isBoolean,\r\n    isFunction: isFunction,\r\n    isArray: isArray,\r\n    isObject: isObject,\r\n    strTrim: strTrim,\r\n    isDocumentObjectAvailable: isDocumentObjectAvailable,\r\n    isWindowObjectAvailable: isWindowObjectAvailable,\r\n    isValueAssigned: isValueAssigned,\r\n    getTenantId: getTenantId,\r\n    isBeaconsSupported: isBeaconsSupported,\r\n    isUint8ArrayAvailable: isUint8ArrayAvailable,\r\n    isLatency: isLatency,\r\n    sanitizeProperty: sanitizeProperty,\r\n    getISOString: toISOString,\r\n    useXDomainRequest: useXDomainRequest,\r\n    getCommonSchemaMetaData: getCommonSchemaMetaData,\r\n    cookieAvailable: areCookiesSupported,\r\n    disallowsSameSiteNone: uaDisallowsSameSiteNone,\r\n    setCookie: setCookie,\r\n    deleteCookie: deleteCookie,\r\n    getCookie: getCookie,\r\n    createGuid: createGuid,\r\n    extend: extend,\r\n    getTime: getTime,\r\n    isValueKind: isValueKind,\r\n    isArrayValid: isArrayValid,\r\n    objDefineAccessors: objDefineAccessors,\r\n    addPageUnloadEventListener: addPageUnloadEventListener,\r\n    setProcessTelemetryTimings: setProcessTelemetryTimings,\r\n    addEventHandler: addEventHandler,\r\n    getFieldValueType: getFieldValueType,\r\n    strEndsWith: strEndsWith,\r\n    objForEachKey: objForEachKey\r\n};\r\n/**\r\n * Provides a collection of utility functions, included for backward compatibility with previous releases.\r\n * @deprecated Marking this instance as deprecated in favor of direct usage of the helper functions\r\n * as direct usage provides better tree-shaking and minification by avoiding the inclusion of the unused items\r\n * in your resulting code.\r\n * Overriding the applicationinsights-core version for tree-shaking\r\n */\r\nexport var CoreUtils = {\r\n    _canUseCookies: undefined,\r\n    isTypeof: isTypeof,\r\n    isUndefined: isUndefined,\r\n    isNullOrUndefined: isNullOrUndefined,\r\n    hasOwnProperty: hasOwnProperty,\r\n    isFunction: isFunction,\r\n    isObject: isObject,\r\n    isDate: isDate,\r\n    isArray: isArray,\r\n    isError: isError,\r\n    isString: isString,\r\n    isNumber: isNumber,\r\n    isBoolean: isBoolean,\r\n    toISOString: toISOString,\r\n    arrForEach: arrForEach,\r\n    arrIndexOf: arrIndexOf,\r\n    arrMap: arrMap,\r\n    arrReduce: arrReduce,\r\n    strTrim: strTrim,\r\n    objCreate: objCreateFn,\r\n    objKeys: objKeys,\r\n    objDefineAccessors: objDefineAccessors,\r\n    addEventHandler: addEventHandler,\r\n    dateNow: dateNow,\r\n    isIE: isIE,\r\n    disableCookies: disableCookies,\r\n    newGuid: newGuid,\r\n    perfNow: perfNow,\r\n    newId: newId,\r\n    randomValue: randomValue,\r\n    random32: random32,\r\n    mwcRandomSeed: mwcRandomSeed,\r\n    mwcRandom32: mwcRandom32,\r\n    generateW3CId: generateW3CId\r\n};\r\n/**\r\n * Helper to identify whether we are running in a chromium based browser environment\r\n */\r\nexport function isChromium() {\r\n    return !!getGlobalInst(\"chrome\");\r\n}\r\n/**\r\n * Create and open an XMLHttpRequest object\r\n * @param method - The request method\r\n * @param urlString - The url\r\n * @param withCredentials - Option flag indicating that credentials should be sent\r\n * @param disabled - Optional flag indicating that the XHR object should be marked as disabled and not tracked (default is false)\r\n * @param isSync - Optional flag indicating if the instance should be a synchronous request (defaults to false)\r\n * @param timeout - Optional value identifying the timeout value that should be assigned to the XHR request\r\n * @returns A new opened XHR request\r\n */\r\nexport function openXhr(method, urlString, withCredentials, disabled, isSync, timeout) {\r\n    if (disabled === void 0) { disabled = false; }\r\n    if (isSync === void 0) { isSync = false; }\r\n    function _wrapSetXhrProp(xhr, prop, value) {\r\n        try {\r\n            xhr[prop] = value;\r\n        }\r\n        catch (e) {\r\n            // - Wrapping as depending on the environment setting the property may fail (non-terminally)\r\n        }\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    if (disabled) {\r\n        // Tag the instance so it's not tracked (trackDependency)\r\n        // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n        // cause the request to fail and we no telemetry would be sent\r\n        _wrapSetXhrProp(xhr, strDisabledPropertyName, disabled);\r\n    }\r\n    if (withCredentials) {\r\n        // Some libraries require that the withCredentials flag is set \"before\" open and\r\n        // - Wrapping as IE 10 has started throwing when setting before open\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    xhr.open(method, urlString, !isSync);\r\n    if (withCredentials) {\r\n        // withCredentials should be set AFTER open (https://xhr.spec.whatwg.org/#the-withcredentials-attribute)\r\n        // And older firefox instances from 11+ will throw for sync events (current versions don't) which happens during unload processing\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    // Only set the timeout for asynchronous requests as\r\n    // \"Timeout shouldn't be used for synchronous XMLHttpRequests requests used in a document environment or it will throw an InvalidAccessError exception.\"\"\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/timeout\r\n    if (!isSync && timeout) {\r\n        _wrapSetXhrProp(xhr, strTimeout, timeout);\r\n    }\r\n    return xhr;\r\n}\r\n//# sourceMappingURL=Utils.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n * Real Time profile (default profile). RealTime Latency events are sent every 1 sec and\r\n * Normal Latency events are sent every 2 sec.\r\n */\r\nexport var RT_PROFILE = \"REAL_TIME\";\r\n/**\r\n * Near Real Time profile. RealTime Latency events are sent every 3 sec and\r\n * Normal Latency events are sent every 6 sec.\r\n */\r\nexport var NRT_PROFILE = \"NEAR_REAL_TIME\";\r\n/**\r\n * Best Effort. RealTime Latency events are sent every 9 sec and\r\n * Normal Latency events are sent every 18 sec.\r\n */\r\nexport var BE_PROFILE = \"BEST_EFFORT\";\r\n//# sourceMappingURL=DataModels.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_POST_METHOD = \"POST\";\r\nexport var STR_DISABLED_PROPERTY_NAME = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nexport var STR_DROPPED = \"drop\";\r\nexport var STR_SENDING = \"send\";\r\nexport var STR_REQUEUE = \"requeue\";\r\nexport var STR_RESPONSE_FAIL = \"rspFail\";\r\nexport var STR_OTHER = \"oth\";\r\nexport var DEFAULT_CACHE_CONTROL = \"no-cache, no-store\";\r\nexport var DEFAULT_CONTENT_TYPE = \"application/x-json-stream\";\r\nexport var STR_CACHE_CONTROL = \"cache-control\";\r\nexport var STR_CONTENT_TYPE_HEADER = \"content-type\";\r\nexport var STR_KILL_TOKENS_HEADER = \"kill-tokens\";\r\nexport var STR_KILL_DURATION_HEADER = \"kill-duration\";\r\nexport var STR_KILL_DURATION_SECONDS_HEADER = \"kill-duration-seconds\";\r\nexport var STR_TIME_DELTA_HEADER = \"time-delta-millis\";\r\nexport var STR_CLIENT_VERSION = \"client-version\";\r\nexport var STR_CLIENT_ID = \"client-id\";\r\nexport var STR_TIME_DELTA_TO_APPLY = \"time-delta-to-apply-millis\";\r\nexport var STR_UPLOAD_TIME = \"upload-time\";\r\nexport var STR_API_KEY = \"apikey\";\r\nexport var STR_MSA_DEVICE_TICKET = \"AuthMsaDeviceTicket\";\r\nexport var STR_AUTH_XTOKEN = \"AuthXToken\";\r\nexport var STR_SDK_VERSION = \"sdk-version\";\r\nexport var STR_NO_RESPONSE_BODY = \"NoResponseBody\";\r\nexport var STR_MSFPC = \"msfpc\";\r\nexport var STR_TRACE = \"trace\";\r\nexport var STR_USER = \"user\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* EventBatch.ts\r\n* @author Nev Wylie (newylie)\r\n* @copyright Microsoft 2020\r\n*/\r\nimport { isNullOrUndefined, isValueAssigned } from \"@microsoft/1ds-core-js\";\r\nimport { STR_EMPTY, STR_MSFPC } from \"./InternalConstants\";\r\nfunction _getEventMsfpc(theEvent) {\r\n    var intWeb = ((theEvent.ext || {})[\"intweb\"]);\r\n    if (intWeb && isValueAssigned(intWeb[STR_MSFPC])) {\r\n        return intWeb[STR_MSFPC];\r\n    }\r\n    return null;\r\n}\r\nfunction _getMsfpc(theEvents) {\r\n    var msfpc = null;\r\n    for (var lp = 0; msfpc === null && lp < theEvents.length; lp++) {\r\n        msfpc = _getEventMsfpc(theEvents[lp]);\r\n    }\r\n    return msfpc;\r\n}\r\n/**\r\n* This class defines a \"batch\" events related to a specific iKey, it is used by the PostChannel and HttpManager\r\n* to collect and transfer ownership of events without duplicating them in-memory. This reduces the previous\r\n* array duplication and shared ownership issues that occurred due to race conditions caused by the async nature\r\n* of sending requests.\r\n*/\r\nvar EventBatch = /** @class */ (function () {\r\n    /**\r\n     * Private constructor so that caller is forced to use the static create method.\r\n     * @param iKey - The iKey to associate with the events (not validated)\r\n     * @param addEvents - The optional collection of events to assign to this batch - defaults to an empty array.\r\n     */\r\n    function EventBatch(iKey, addEvents) {\r\n        var events = addEvents ? [].concat(addEvents) : [];\r\n        var _self = this;\r\n        var _msfpc = _getMsfpc(events);\r\n        _self.iKey = function () {\r\n            return iKey;\r\n        };\r\n        _self.Msfpc = function () {\r\n            // return the cached value unless it's undefined -- used to avoid cpu\r\n            return _msfpc || STR_EMPTY;\r\n        };\r\n        _self.count = function () {\r\n            return events.length;\r\n        };\r\n        _self.events = function () {\r\n            return events;\r\n        };\r\n        _self.addEvent = function (theEvent) {\r\n            if (theEvent) {\r\n                events.push(theEvent);\r\n                if (!_msfpc) {\r\n                    // Not found so try and find one\r\n                    _msfpc = _getEventMsfpc(theEvent);\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        _self.split = function (fromEvent, numEvents) {\r\n            // Create a new batch with the same iKey\r\n            var theEvents;\r\n            if (fromEvent < events.length) {\r\n                var cnt = events.length - fromEvent;\r\n                if (!isNullOrUndefined(numEvents)) {\r\n                    cnt = numEvents < cnt ? numEvents : cnt;\r\n                }\r\n                theEvents = events.splice(fromEvent, cnt);\r\n                // reset the fetched msfpc value\r\n                _msfpc = _getMsfpc(events);\r\n            }\r\n            return new EventBatch(iKey, theEvents);\r\n        };\r\n    }\r\n    /**\r\n     * Creates a new Event Batch object\r\n     * @param iKey The iKey associated with this batch of events\r\n     */\r\n    EventBatch.create = function (iKey, theEvents) {\r\n        return new EventBatch(iKey, theEvents);\r\n    };\r\n    return EventBatch;\r\n}());\r\nexport { EventBatch };\r\n//# sourceMappingURL=EventBatch.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* ClockSkewManager.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\n/**\r\n* Class to manage clock skew correction.\r\n*/\r\nvar ClockSkewManager = /** @class */ (function () {\r\n    function ClockSkewManager() {\r\n        var _allowRequestSending = true;\r\n        var _shouldAddClockSkewHeaders = true;\r\n        var _isFirstRequest = true;\r\n        var _clockSkewHeaderValue = \"use-collector-delta\";\r\n        var _clockSkewSet = false;\r\n        dynamicProto(ClockSkewManager, this, function (_self) {\r\n            /**\r\n             * Determine if requests can be sent.\r\n             * @returns True if requests can be sent, false otherwise.\r\n             */\r\n            _self.allowRequestSending = function () {\r\n                return _allowRequestSending;\r\n            };\r\n            /**\r\n             * Tells the ClockSkewManager that it should assume that the first request has now been sent,\r\n             * If this method had not yet been called AND the clock Skew had not been set this will set\r\n             * allowRequestSending to false until setClockSet() is called.\r\n             */\r\n            _self.firstRequestSent = function () {\r\n                if (_isFirstRequest) {\r\n                    _isFirstRequest = false;\r\n                    if (!_clockSkewSet) {\r\n                        // Block sending until we get the first clock Skew\r\n                        _allowRequestSending = false;\r\n                    }\r\n                }\r\n            };\r\n            /**\r\n             * Determine if clock skew headers should be added to the request.\r\n             * @returns True if clock skew headers should be added, false otherwise.\r\n             */\r\n            _self.shouldAddClockSkewHeaders = function () {\r\n                return _shouldAddClockSkewHeaders;\r\n            };\r\n            /**\r\n             * Gets the clock skew header value.\r\n             * @returns The clock skew header value.\r\n             */\r\n            _self.getClockSkewHeaderValue = function () {\r\n                return _clockSkewHeaderValue;\r\n            };\r\n            /**\r\n             * Sets the clock skew header value. Once clock skew is set this method\r\n             * is no-op.\r\n             * @param timeDeltaInMillis - Time delta to be saved as the clock skew header value.\r\n             */\r\n            _self.setClockSkew = function (timeDeltaInMillis) {\r\n                if (!_clockSkewSet) {\r\n                    if (timeDeltaInMillis) {\r\n                        _clockSkewHeaderValue = timeDeltaInMillis;\r\n                        _shouldAddClockSkewHeaders = true;\r\n                        _clockSkewSet = true;\r\n                    }\r\n                    else {\r\n                        _shouldAddClockSkewHeaders = false;\r\n                    }\r\n                    // Unblock sending\r\n                    _allowRequestSending = true;\r\n                }\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for ClockSkewManager.prototype.allowRequestSending.\r\n// Removed Stub for ClockSkewManager.prototype.firstRequestSent.\r\n// Removed Stub for ClockSkewManager.prototype.shouldAddClockSkewHeaders.\r\n// Removed Stub for ClockSkewManager.prototype.getClockSkewHeaderValue.\r\n// Removed Stub for ClockSkewManager.prototype.setClockSkew.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    ClockSkewManager.__ieDyn=1;\n\n    return ClockSkewManager;\r\n}());\r\nexport default ClockSkewManager;\r\n//# sourceMappingURL=ClockSkewManager.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* KillSwitch.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrForEach, dateNow, strTrim } from \"@microsoft/1ds-core-js\";\r\nvar SecToMsMultiplier = 1000;\r\n/**\r\n* Class to stop certain tenants sending events.\r\n*/\r\nvar KillSwitch = /** @class */ (function () {\r\n    function KillSwitch() {\r\n        var _killedTokenDictionary = {};\r\n        function _normalizeTenants(values) {\r\n            var result = [];\r\n            if (values) {\r\n                arrForEach(values, function (value) {\r\n                    result.push(strTrim(value));\r\n                });\r\n            }\r\n            return result;\r\n        }\r\n        dynamicProto(KillSwitch, this, function (_self) {\r\n            _self.setKillSwitchTenants = function (killTokens, killDuration) {\r\n                if (killTokens && killDuration) {\r\n                    try {\r\n                        var killedTokens = _normalizeTenants(killTokens.split(\",\"));\r\n                        if (killDuration === \"this-request-only\") {\r\n                            return killedTokens;\r\n                        }\r\n                        var durationMs = parseInt(killDuration, 10) * SecToMsMultiplier;\r\n                        for (var i = 0; i < killedTokens.length; ++i) {\r\n                            _killedTokenDictionary[killedTokens[i]] = dateNow() + durationMs;\r\n                        }\r\n                    }\r\n                    catch (ex) {\r\n                        return [];\r\n                    }\r\n                }\r\n                return [];\r\n            };\r\n            _self.isTenantKilled = function (tenantToken) {\r\n                var killDictionary = _killedTokenDictionary;\r\n                var name = strTrim(tenantToken);\r\n                if (killDictionary[name] !== undefined && killDictionary[name] > dateNow()) {\r\n                    return true;\r\n                }\r\n                delete killDictionary[name];\r\n                return false;\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for KillSwitch.prototype.setKillSwitchTenants.\r\n// Removed Stub for KillSwitch.prototype.isTenantKilled.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    KillSwitch.__ieDyn=1;\n\n    return KillSwitch;\r\n}());\r\nexport default KillSwitch;\r\n//# sourceMappingURL=KillSwitch.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* RetryPolicy.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nvar RandomizationLowerThreshold = 0.8;\r\nvar RandomizationUpperThreshold = 1.2;\r\nvar BaseBackoff = 3000;\r\nvar MaxBackoff = 600000;\r\n/**\r\n * Determine if the request should be retried for the given status code.\r\n * The below expression reads that we should only retry for:\r\n *      - HttpStatusCodes that are smaller than 300.\r\n *      - HttpStatusCodes greater or equal to 500 (except for 501-NotImplement\r\n *        and 505-HttpVersionNotSupport).\r\n *      - HttpStatusCode 408-RequestTimeout.\r\n *      - HttpStatusCode 429.\r\n * This is based on Microsoft.WindowsAzure.Storage.RetryPolicies.ExponentialRetry class\r\n * @param httpStatusCode - The status code returned for the request.\r\n * @returns True if request should be retried, false otherwise.\r\n */\r\nexport function retryPolicyShouldRetryForStatus(httpStatusCode) {\r\n    /* tslint:disable:triple-equals */\r\n    // Disabling triple-equals rule to avoid httpOverrides from failing because they are returning a string value\r\n    return !((httpStatusCode >= 300 && httpStatusCode < 500 && httpStatusCode != 408 && httpStatusCode != 429)\r\n        || (httpStatusCode == 501)\r\n        || (httpStatusCode == 505));\r\n    /* tslint:enable:triple-equals */\r\n}\r\n/**\r\n * Gets the number of milliseconds to back off before retrying the request. The\r\n * back off duration is exponentially scaled based on the number of retries already\r\n * done for the request.\r\n * @param retriesSoFar - The number of times the request has already been retried.\r\n * @returns The back off duration for the request before it can be retried.\r\n */\r\nexport function retryPolicyGetMillisToBackoffForRetry(retriesSoFar) {\r\n    var waitDuration = 0;\r\n    var minBackoff = BaseBackoff * RandomizationLowerThreshold;\r\n    var maxBackoff = BaseBackoff * RandomizationUpperThreshold;\r\n    var randomBackoff = Math.floor(Math.random() * (maxBackoff - minBackoff)) + minBackoff;\r\n    waitDuration = Math.pow(2, retriesSoFar) * randomBackoff;\r\n    return Math.min(waitDuration, MaxBackoff);\r\n}\r\n//# sourceMappingURL=RetryPolicy.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* Serializer.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\n// @skip-file-minify\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrIndexOf, doPerf, getCommonSchemaMetaData, getTenantId, isArray, isValueAssigned, objForEachKey, sanitizeProperty, strStartsWith } from \"@microsoft/1ds-core-js\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n/**\r\n * Note: This is an optimization for V8-based browsers. When V8 concatenates a string,\r\n * the strings are only joined logically using a \"cons string\" or \"constructed/concatenated\r\n * string\". These containers keep references to one another and can result in very large\r\n * memory usage. For example, if a 2MB string is constructed by concatenating 4 bytes\r\n * together at a time, the memory usage will be ~44MB; so ~22x increase. The strings are\r\n * only joined together when an operation requiring their joining takes place, such as\r\n * substr(). This function is called when adding data to this buffer to ensure these\r\n * types of strings are periodically joined to reduce the memory footprint.\r\n * Setting to every 20 events as the JSON.stringify() may have joined many strings\r\n * and calling this too much causes a minor delay while processing.\r\n */\r\nvar _MAX_STRING_JOINS = 20;\r\nvar RequestSizeLimitBytes = 3984588; // approx 3.8 Mb\r\nvar BeaconRequestSizeLimitBytes = 65000; // approx 64kb (the current Edge, Firefox and Chrome max limit)\r\nvar MaxRecordSize = 2000000; // approx 2 Mb\r\nvar MaxBeaconRecordSize = Math.min(MaxRecordSize, BeaconRequestSizeLimitBytes);\r\nvar metadata = \"metadata\";\r\nvar f = \"f\";\r\nvar rCheckDot = /\\./;\r\n/**\r\n* Class to handle serialization of event and request.\r\n* Currently uses Bond for serialization. Please note that this may be subject to change.\r\n*/\r\nvar Serializer = /** @class */ (function () {\r\n    function Serializer(perfManager, valueSanitizer, stringifyObjects, enableCompoundKey) {\r\n        var strData = \"data\";\r\n        var strBaseData = \"baseData\";\r\n        var strExt = \"ext\";\r\n        var _checkForCompoundkey = !!enableCompoundKey;\r\n        var _processSubMetaData = true;\r\n        var _theSanitizer = valueSanitizer;\r\n        var _isReservedCache = {};\r\n        dynamicProto(Serializer, this, function (_self) {\r\n            _self.createPayload = function (retryCnt, isTeardown, isSync, isReducedPayload, sendReason, sendType) {\r\n                return {\r\n                    apiKeys: [],\r\n                    payloadBlob: STR_EMPTY,\r\n                    overflow: null,\r\n                    sizeExceed: [],\r\n                    failedEvts: [],\r\n                    batches: [],\r\n                    numEvents: 0,\r\n                    retryCnt: retryCnt,\r\n                    isTeardown: isTeardown,\r\n                    isSync: isSync,\r\n                    isBeacon: isReducedPayload,\r\n                    sendType: sendType,\r\n                    sendReason: sendReason\r\n                };\r\n            };\r\n            _self.appendPayload = function (payload, theBatch, maxEventsPerBatch) {\r\n                var canAddEvents = payload && theBatch && !payload.overflow;\r\n                if (canAddEvents) {\r\n                    doPerf(perfManager, function () { return \"Serializer:appendPayload\"; }, function () {\r\n                        var theEvents = theBatch.events();\r\n                        var payloadBlob = payload.payloadBlob;\r\n                        var payloadEvents = payload.numEvents;\r\n                        var eventsAdded = false;\r\n                        var sizeExceeded = [];\r\n                        var failedEvts = [];\r\n                        var isBeaconPayload = payload.isBeacon;\r\n                        var requestMaxSize = isBeaconPayload ? BeaconRequestSizeLimitBytes : RequestSizeLimitBytes;\r\n                        var recordMaxSize = isBeaconPayload ? MaxBeaconRecordSize : MaxRecordSize;\r\n                        var lp = 0;\r\n                        var joinCount = 0;\r\n                        while (lp < theEvents.length) {\r\n                            var theEvent = theEvents[lp];\r\n                            if (theEvent) {\r\n                                if (payloadEvents >= maxEventsPerBatch) {\r\n                                    // Maximum events per payload reached, so don't add any more\r\n                                    payload.overflow = theBatch.split(lp);\r\n                                    break;\r\n                                }\r\n                                var eventBlob = _self.getEventBlob(theEvent);\r\n                                if (eventBlob && eventBlob.length <= recordMaxSize) {\r\n                                    // This event will fit into the payload\r\n                                    var blobLength = eventBlob.length;\r\n                                    var currentSize = payloadBlob.length;\r\n                                    if (currentSize + blobLength > requestMaxSize) {\r\n                                        // Request or batch size exceeded, so don't add any more to the payload\r\n                                        payload.overflow = theBatch.split(lp);\r\n                                        break;\r\n                                    }\r\n                                    if (payloadBlob) {\r\n                                        payloadBlob += \"\\n\";\r\n                                    }\r\n                                    payloadBlob += eventBlob;\r\n                                    joinCount++;\r\n                                    // v8 memory optimization only\r\n                                    if (joinCount > _MAX_STRING_JOINS) {\r\n                                        // this substr() should cause the constructed string to join\r\n                                        payloadBlob.substr(0, 1);\r\n                                        joinCount = 0;\r\n                                    }\r\n                                    eventsAdded = true;\r\n                                    payloadEvents++;\r\n                                }\r\n                                else {\r\n                                    if (eventBlob) {\r\n                                        // Single event size exceeded so remove from the batch\r\n                                        sizeExceeded.push(theEvent);\r\n                                    }\r\n                                    else {\r\n                                        failedEvts.push(theEvent);\r\n                                    }\r\n                                    // We also need to remove this event from the existing array, otherwise a notification will be sent\r\n                                    // indicating that it was successfully sent\r\n                                    theEvents.splice(lp, 1);\r\n                                    lp--;\r\n                                }\r\n                            }\r\n                            lp++;\r\n                        }\r\n                        if (sizeExceeded && sizeExceeded.length > 0) {\r\n                            payload.sizeExceed.push(EventBatch.create(theBatch.iKey(), sizeExceeded));\r\n                            // Remove the exceeded events from the batch\r\n                        }\r\n                        if (failedEvts && failedEvts.length > 0) {\r\n                            payload.failedEvts.push(EventBatch.create(theBatch.iKey(), failedEvts));\r\n                            // Remove the failed events from the batch\r\n                        }\r\n                        if (eventsAdded) {\r\n                            payload.batches.push(theBatch);\r\n                            payload.payloadBlob = payloadBlob;\r\n                            payload.numEvents = payloadEvents;\r\n                            var apiKey = theBatch.iKey();\r\n                            if (arrIndexOf(payload.apiKeys, apiKey) === -1) {\r\n                                payload.apiKeys.push(apiKey);\r\n                            }\r\n                        }\r\n                    }, function () { return ({ payload: payload, theBatch: { iKey: theBatch.iKey(), evts: theBatch.events() }, max: maxEventsPerBatch }); });\r\n                }\r\n                return canAddEvents;\r\n            };\r\n            _self.getEventBlob = function (eventData) {\r\n                try {\r\n                    return doPerf(perfManager, function () { return \"Serializer.getEventBlob\"; }, function () {\r\n                        var serializedEvent = {};\r\n                        // Adding as dynamic keys for v8 performance\r\n                        serializedEvent.name = eventData.name;\r\n                        serializedEvent.time = eventData.time;\r\n                        serializedEvent.ver = eventData.ver;\r\n                        serializedEvent.iKey = \"o:\" + getTenantId(eventData.iKey);\r\n                        // Assigning local var so usage in part b/c don't throw if there is no ext\r\n                        var serializedExt = {};\r\n                        // Part A\r\n                        var eventExt = eventData[strExt];\r\n                        if (eventExt) {\r\n                            // Only assign ext if the event had one (There are tests covering this use case)\r\n                            serializedEvent[strExt] = serializedExt;\r\n                            objForEachKey(eventExt, function (key, value) {\r\n                                var data = serializedExt[key] = {};\r\n                                // Don't include a metadata callback as we don't currently set metadata Part A fields\r\n                                _processPathKeys(value, data, \"ext.\" + key, true, null, null, true);\r\n                            });\r\n                        }\r\n                        var serializedData = serializedEvent[strData] = {};\r\n                        serializedData.baseType = eventData.baseType;\r\n                        var serializedBaseData = serializedData[strBaseData] = {};\r\n                        // Part B\r\n                        _processPathKeys(eventData.baseData, serializedBaseData, strBaseData, false, [strBaseData], function (pathKeys, name, value) {\r\n                            _addJSONPropertyMetaData(serializedExt, pathKeys, name, value);\r\n                        }, _processSubMetaData);\r\n                        // Part C\r\n                        _processPathKeys(eventData.data, serializedData, strData, false, [], function (pathKeys, name, value) {\r\n                            _addJSONPropertyMetaData(serializedExt, pathKeys, name, value);\r\n                        }, _processSubMetaData);\r\n                        return JSON.stringify(serializedEvent);\r\n                    }, function () { return ({ item: eventData }); });\r\n                }\r\n                catch (e) {\r\n                    return null;\r\n                }\r\n            };\r\n            function _isReservedField(path, name) {\r\n                var result = _isReservedCache[path];\r\n                if (result === undefined) {\r\n                    if (path.length >= 7) {\r\n                        // Do not allow the changing of fields located in the ext.metadata or ext.web extension\r\n                        result = strStartsWith(path, \"ext.metadata\") || strStartsWith(path, \"ext.web\");\r\n                    }\r\n                    _isReservedCache[path] = result;\r\n                }\r\n                return result;\r\n            }\r\n            function _processPathKeys(srcObj, target, thePath, checkReserved, metadataPathKeys, metadataCallback, processSubKeys) {\r\n                objForEachKey(srcObj, function (key, srcValue) {\r\n                    var prop = null;\r\n                    if (srcValue || isValueAssigned(srcValue)) {\r\n                        var path = thePath;\r\n                        var name_1 = key;\r\n                        var theMetaPathKeys = metadataPathKeys;\r\n                        var destObj = target;\r\n                        // Handle keys with embedded '.', like \"TestObject.testProperty\"\r\n                        if (_checkForCompoundkey && !checkReserved && rCheckDot.test(key)) {\r\n                            var subKeys = key.split(\".\");\r\n                            var keyLen = subKeys.length;\r\n                            if (keyLen > 1) {\r\n                                if (theMetaPathKeys) {\r\n                                    // Create a copy of the meta path keys so we can add the extra ones\r\n                                    theMetaPathKeys = theMetaPathKeys.slice();\r\n                                }\r\n                                for (var lp = 0; lp < keyLen - 1; lp++) {\r\n                                    var subKey = subKeys[lp];\r\n                                    // Add/reuse the sub key object\r\n                                    destObj = destObj[subKey] = destObj[subKey] || {};\r\n                                    path += \".\" + subKey;\r\n                                    if (theMetaPathKeys) {\r\n                                        theMetaPathKeys.push(subKey);\r\n                                    }\r\n                                }\r\n                                name_1 = subKeys[keyLen - 1];\r\n                            }\r\n                        }\r\n                        var isReserved = checkReserved && _isReservedField(path, name_1);\r\n                        if (!isReserved && _theSanitizer && _theSanitizer.handleField(path, name_1)) {\r\n                            prop = _theSanitizer.value(path, name_1, srcValue, stringifyObjects);\r\n                        }\r\n                        else {\r\n                            prop = sanitizeProperty(name_1, srcValue, stringifyObjects);\r\n                        }\r\n                        if (prop) {\r\n                            // Set the value\r\n                            var newValue = prop.value;\r\n                            destObj[name_1] = newValue;\r\n                            if (metadataCallback) {\r\n                                metadataCallback(theMetaPathKeys, name_1, prop);\r\n                            }\r\n                            if (processSubKeys && typeof newValue === \"object\" && !isArray(newValue)) {\r\n                                var newPath = theMetaPathKeys;\r\n                                if (newPath) {\r\n                                    newPath = newPath.slice();\r\n                                    newPath.push(name_1);\r\n                                }\r\n                                // Make sure we process sub objects as well (for value sanitization and metadata)\r\n                                _processPathKeys(srcValue, newValue, path + \".\" + name_1, checkReserved, newPath, metadataCallback, processSubKeys);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for Serializer.prototype.createPayload.\r\n// Removed Stub for Serializer.prototype.appendPayload.\r\n// Removed Stub for Serializer.prototype.getEventBlob.\r\n// Removed Stub for Serializer.prototype.handleField.\r\n// Removed Stub for Serializer.prototype.getSanitizer.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    Serializer.__ieDyn=1;\n\n    return Serializer;\r\n}());\r\nexport { Serializer };\r\n/**\r\n * @ignore\r\n */\r\nfunction _addJSONPropertyMetaData(json, propKeys, name, propertyValue) {\r\n    if (propertyValue && json) {\r\n        var encodedTypeValue = getCommonSchemaMetaData(propertyValue.value, propertyValue.kind, propertyValue.propertyType);\r\n        if (encodedTypeValue > -1) {\r\n            // Add the root metadata\r\n            var metaData = json[metadata];\r\n            if (!metaData) {\r\n                // Sets the root 'f'\r\n                metaData = json[metadata] = { f: {} };\r\n            }\r\n            var metaTarget = metaData[f];\r\n            if (!metaTarget) {\r\n                // This can occur if someone has manually added an ext.metadata object\r\n                // Such as ext.metadata.privLevel and ext.metadata.privTags\r\n                metaTarget = metaData[f] = {};\r\n            }\r\n            // Traverse the metadata path and build each object (contains an 'f' key) -- if required\r\n            if (propKeys) {\r\n                for (var lp = 0; lp < propKeys.length; lp++) {\r\n                    var key = propKeys[lp];\r\n                    if (!metaTarget[key]) {\r\n                        metaTarget[key] = { f: {} };\r\n                    }\r\n                    var newTarget = metaTarget[key][f];\r\n                    if (!newTarget) {\r\n                        // Not expected, but can occur if the metadata context was pre-created as part of the event\r\n                        newTarget = metaTarget[key][f] = {};\r\n                    }\r\n                    metaTarget = newTarget;\r\n                }\r\n            }\r\n            metaTarget = metaTarget[name] = {};\r\n            if (isArray(propertyValue.value)) {\r\n                metaTarget[\"a\"] = {\r\n                    t: encodedTypeValue\r\n                };\r\n            }\r\n            else {\r\n                metaTarget[\"t\"] = encodedTypeValue;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Serializer.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nvar _a;\r\n/**\r\n* HttpManager.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport EVTClockSkewManager from \"./ClockSkewManager\";\r\nimport EVTKillSwitch from \"./KillSwitch\";\r\nimport { FullVersionString, _throwInternal, _warnToConsole, arrForEach, dateNow, doPerf, dumpObj, extend, getLocation, getNavigator, getTime, hasOwnProperty, isArray, isBeaconsSupported, isFetchSupported, isNullOrUndefined, isNumber, isReactNative, isString, isUndefined, isValueAssigned, isXhrSupported, objForEachKey, objKeys, openXhr, strTrim, strUndefined, useXDomainRequest } from \"@microsoft/1ds-core-js\";\r\nimport { DEFAULT_CACHE_CONTROL, DEFAULT_CONTENT_TYPE, STR_API_KEY, STR_AUTH_XTOKEN, STR_CACHE_CONTROL, STR_CLIENT_ID, STR_CLIENT_VERSION, STR_CONTENT_TYPE_HEADER, STR_DISABLED_PROPERTY_NAME, STR_DROPPED, STR_EMPTY, STR_KILL_DURATION_HEADER, STR_KILL_DURATION_SECONDS_HEADER, STR_KILL_TOKENS_HEADER, STR_MSA_DEVICE_TICKET, STR_MSFPC, STR_NO_RESPONSE_BODY, STR_OTHER, STR_POST_METHOD, STR_REQUEUE, STR_RESPONSE_FAIL, STR_SENDING, STR_TIME_DELTA_HEADER, STR_TIME_DELTA_TO_APPLY, STR_UPLOAD_TIME } from \"./InternalConstants\";\r\nimport { retryPolicyGetMillisToBackoffForRetry, retryPolicyShouldRetryForStatus } from \"./RetryPolicy\";\r\nimport { Serializer } from \"./Serializer\";\r\nvar strSendAttempt = \"sendAttempt\";\r\nvar _noResponseQs = \"&\" + STR_NO_RESPONSE_BODY + \"=true\";\r\n/**\r\n * Identifies the default notification reason to the action names\r\n */\r\nvar _eventActionMap = (_a = {},\r\n    _a[1 /* EventBatchNotificationReason.Paused */] = STR_REQUEUE,\r\n    _a[100 /* EventBatchNotificationReason.RequeueEvents */] = STR_REQUEUE,\r\n    _a[200 /* EventBatchNotificationReason.Complete */] = \"sent\",\r\n    _a[8004 /* EventBatchNotificationReason.KillSwitch */] = STR_DROPPED,\r\n    _a[8003 /* EventBatchNotificationReason.SizeLimitExceeded */] = STR_DROPPED,\r\n    _a);\r\nvar _collectorQsHeaders = {};\r\nvar _collectorHeaderToQs = {};\r\nfunction _addCollectorHeaderQsMapping(qsName, headerName, allowQs) {\r\n    _collectorQsHeaders[qsName] = headerName;\r\n    if (allowQs !== false) {\r\n        _collectorHeaderToQs[headerName] = qsName;\r\n    }\r\n}\r\n_addCollectorHeaderQsMapping(STR_MSA_DEVICE_TICKET, STR_MSA_DEVICE_TICKET, false);\r\n_addCollectorHeaderQsMapping(STR_CLIENT_VERSION, STR_CLIENT_VERSION);\r\n_addCollectorHeaderQsMapping(STR_CLIENT_ID, \"Client-Id\");\r\n_addCollectorHeaderQsMapping(STR_API_KEY, STR_API_KEY);\r\n_addCollectorHeaderQsMapping(STR_TIME_DELTA_TO_APPLY, STR_TIME_DELTA_TO_APPLY);\r\n_addCollectorHeaderQsMapping(STR_UPLOAD_TIME, STR_UPLOAD_TIME);\r\n_addCollectorHeaderQsMapping(STR_AUTH_XTOKEN, STR_AUTH_XTOKEN);\r\nfunction _getResponseText(xhr) {\r\n    try {\r\n        return xhr.responseText;\r\n    }\r\n    catch (e) {\r\n        // Best effort, as XHR may throw while XDR wont so just ignore\r\n    }\r\n    return STR_EMPTY;\r\n}\r\nfunction _hasHeader(headers, header) {\r\n    var hasHeader = false;\r\n    if (headers && header) {\r\n        var keys = objKeys(headers);\r\n        if (keys && keys.length > 0) {\r\n            var lowerHeader = header.toLowerCase();\r\n            for (var lp = 0; lp < keys.length; lp++) {\r\n                var value = keys[lp];\r\n                if (value && hasOwnProperty(header, value) &&\r\n                    value.toLowerCase() === lowerHeader) {\r\n                    hasHeader = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return hasHeader;\r\n}\r\nfunction _addRequestDetails(details, name, value, useHeaders) {\r\n    if (name && value && value.length > 0) {\r\n        if (useHeaders && _collectorQsHeaders[name]) {\r\n            details.hdrs[_collectorQsHeaders[name]] = value;\r\n            details.useHdrs = true;\r\n        }\r\n        else {\r\n            details.url += \"&\" + name + \"=\" + value;\r\n        }\r\n    }\r\n}\r\nfunction _prependTransports(theTransports, newTransports) {\r\n    if (newTransports) {\r\n        if (isNumber(newTransports)) {\r\n            theTransports = [newTransports].concat(theTransports);\r\n        }\r\n        else if (isArray(newTransports)) {\r\n            theTransports = newTransports.concat(theTransports);\r\n        }\r\n    }\r\n    return theTransports;\r\n}\r\n/**\r\n * Class managing the sending of requests.\r\n */\r\nvar HttpManager = /** @class */ (function () {\r\n    /**\r\n     * @constructor\r\n     * @param requestQueue   - The queue that contains the requests to be sent.\r\n     */\r\n    function HttpManager(maxEventsPerBatch, maxConnections, maxRequestRetriesBeforeBackoff, actions, timeoutOverride) {\r\n        this._responseHandlers = [];\r\n        var _urlString = \"?cors=true&\" + STR_CONTENT_TYPE_HEADER.toLowerCase() + \"=\" + DEFAULT_CONTENT_TYPE;\r\n        var _killSwitch = new EVTKillSwitch();\r\n        var _paused = false;\r\n        var _clockSkewManager = new EVTClockSkewManager();\r\n        var _useBeacons = false;\r\n        var _outstandingRequests = 0; // Holds the number of outstanding async requests that have not returned a response yet\r\n        var _postManager;\r\n        var _logger;\r\n        var _sendInterfaces;\r\n        var _core;\r\n        var _customHttpInterface = true;\r\n        var _queryStringParameters = [];\r\n        var _headers = {};\r\n        var _batchQueue = [];\r\n        var _serializer = null;\r\n        var _enableEventTimings = false;\r\n        var _cookieMgr;\r\n        var _isUnloading = false;\r\n        var _useHeaders = false;\r\n        var _xhrTimeout;\r\n        var _disableXhrSync;\r\n        var _disableFetchKeepAlive;\r\n        var _canHaveReducedPayload;\r\n        var _addNoResponse;\r\n        dynamicProto(HttpManager, this, function (_self) {\r\n            var _sendCredentials = true;\r\n            _self.initialize = function (endpointUrl, core, postChannel, httpInterface, channelConfig) {\r\n                var _a;\r\n                if (!channelConfig) {\r\n                    channelConfig = {};\r\n                }\r\n                _urlString = endpointUrl + _urlString;\r\n                _useHeaders = !isUndefined(channelConfig.avoidOptions) ? !channelConfig.avoidOptions : true;\r\n                _core = core;\r\n                _cookieMgr = core.getCookieMgr();\r\n                _enableEventTimings = !_core.config.disableEventTimings;\r\n                var enableCompoundKey = !!_core.config.enableCompoundKey;\r\n                _postManager = postChannel;\r\n                _logger = _postManager.diagLog();\r\n                var valueSanitizer = channelConfig.valueSanitizer;\r\n                var stringifyObjects = channelConfig.stringifyObjects;\r\n                if (!isUndefined(channelConfig.enableCompoundKey)) {\r\n                    enableCompoundKey = !!channelConfig.enableCompoundKey;\r\n                }\r\n                _xhrTimeout = channelConfig.xhrTimeout;\r\n                _disableXhrSync = !!channelConfig.disableXhrSync;\r\n                _disableFetchKeepAlive = !!channelConfig.disableFetchKeepAlive;\r\n                _addNoResponse = channelConfig.addNoResponse !== false;\r\n                _useBeacons = !isReactNative(); // Only use beacons if not running in React Native\r\n                _serializer = new Serializer(_core, valueSanitizer, stringifyObjects, enableCompoundKey);\r\n                if (!isNullOrUndefined(channelConfig.useSendBeacon)) {\r\n                    _useBeacons = !!channelConfig.useSendBeacon;\r\n                }\r\n                var syncHttpInterface = httpInterface;\r\n                var beaconHttpInterface = channelConfig.alwaysUseXhrOverride ? httpInterface : null;\r\n                var fetchSyncHttpInterface = channelConfig.alwaysUseXhrOverride ? httpInterface : null;\r\n                var beaconUnloadTransports = [3 /* TransportType.Beacon */, 2 /* TransportType.Fetch */];\r\n                if (!httpInterface) {\r\n                    _customHttpInterface = false;\r\n                    var location_1 = getLocation();\r\n                    if (location_1 && location_1.protocol && location_1.protocol.toLowerCase() === \"file:\") {\r\n                        // Special case where a local html file fails with a CORS error on Chromium browsers\r\n                        _sendCredentials = false;\r\n                    }\r\n                    var theTransports = [];\r\n                    if (isReactNative()) {\r\n                        // Use Fetch or XDR/XHR\r\n                        theTransports = [2 /* TransportType.Fetch */, 1 /* TransportType.Xhr */];\r\n                        beaconUnloadTransports = [2 /* TransportType.Fetch */, 1 /* TransportType.Xhr */, 3 /* TransportType.Beacon */];\r\n                    }\r\n                    else {\r\n                        // Use XDR/XHR, Fetch or beacons\r\n                        theTransports = [1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */];\r\n                    }\r\n                    // Prefix any user requested transport(s) values\r\n                    theTransports = _prependTransports(theTransports, channelConfig.transports);\r\n                    httpInterface = _getSenderInterface(theTransports, false);\r\n                    if (!httpInterface) {\r\n                        _warnToConsole(_logger, \"No available transport to send events\");\r\n                    }\r\n                    syncHttpInterface = _getSenderInterface(theTransports, true);\r\n                }\r\n                if (!beaconHttpInterface) {\r\n                    // Allow overriding the usage of sendBeacon\r\n                    beaconUnloadTransports = _prependTransports(beaconUnloadTransports, channelConfig.unloadTransports);\r\n                    beaconHttpInterface = _getSenderInterface(beaconUnloadTransports, true);\r\n                }\r\n                _canHaveReducedPayload = !_customHttpInterface && ((_useBeacons && isBeaconsSupported()) || (!_disableFetchKeepAlive && isFetchSupported(true)));\r\n                _sendInterfaces = (_a = {},\r\n                    _a[0 /* EventSendType.Batched */] = httpInterface,\r\n                    _a[1 /* EventSendType.Synchronous */] = syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */], true),\r\n                    _a[2 /* EventSendType.SendBeacon */] = beaconHttpInterface || syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */], true),\r\n                    _a[3 /* EventSendType.SyncFetch */] = fetchSyncHttpInterface || _getSenderInterface([2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */], true) || syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */], true),\r\n                    _a);\r\n            };\r\n            // Special internal method to allow the DebugPlugin to hook embedded objects\r\n            function _getSenderInterface(transports, syncSupport) {\r\n                var transportType = 0 /* TransportType.NotSet */;\r\n                var sendPostFunc = null;\r\n                var lp = 0;\r\n                while (sendPostFunc == null && lp < transports.length) {\r\n                    transportType = transports[lp];\r\n                    if (transportType === 1 /* TransportType.Xhr */) {\r\n                        if (useXDomainRequest()) {\r\n                            sendPostFunc = _xdrSendPost;\r\n                        }\r\n                        else if (isXhrSupported()) {\r\n                            sendPostFunc = _xhrSendPost;\r\n                        }\r\n                    }\r\n                    else if (transportType === 2 /* TransportType.Fetch */ && isFetchSupported(syncSupport) && (!syncSupport || (syncSupport && !_disableFetchKeepAlive))) {\r\n                        sendPostFunc = _fetchSendPost;\r\n                    }\r\n                    else if (_useBeacons && transportType === 3 /* TransportType.Beacon */ && isBeaconsSupported()) {\r\n                        sendPostFunc = _beaconSendPost;\r\n                    }\r\n                    lp++;\r\n                }\r\n                if (sendPostFunc) {\r\n                    return {\r\n                        _transport: transportType,\r\n                        _isSync: syncSupport,\r\n                        sendPOST: sendPostFunc\r\n                    };\r\n                }\r\n                return null;\r\n            }\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_sendInterfaces[0 /* EventSendType.Batched */], _killSwitch, _serializer, _sendInterfaces];\r\n            };\r\n            function _xdrSendPost(payload, oncomplete, sync) {\r\n                // It doesn't support custom headers, so no action is taken with current requestHeaders\r\n                var xdr = new XDomainRequest();\r\n                xdr.open(STR_POST_METHOD, payload.urlString);\r\n                if (payload.timeout) {\r\n                    xdr.timeout = payload.timeout;\r\n                }\r\n                // can't get the status code in xdr.\r\n                xdr.onload = function () {\r\n                    // we will assume onload means the request succeeded.\r\n                    var response = _getResponseText(xdr);\r\n                    _doOnComplete(oncomplete, 200, {}, response);\r\n                    _handleCollectorResponse(response);\r\n                };\r\n                // we will assume onerror means we need to drop the events.\r\n                xdr.onerror = function () {\r\n                    _doOnComplete(oncomplete, 400, {});\r\n                };\r\n                // we will assume ontimeout means we need to retry the events.\r\n                xdr.ontimeout = function () {\r\n                    _doOnComplete(oncomplete, 500, {});\r\n                };\r\n                // https://cypressnorth.com/web-programming-and-development/internet-explorer-aborting-ajax-requests-fixed/\r\n                // tslint:disable-next-line:no-empty\r\n                xdr.onprogress = function () { };\r\n                if (sync) {\r\n                    xdr.send(payload.data);\r\n                }\r\n                else {\r\n                    timeoutOverride.set(function () {\r\n                        xdr.send(payload.data);\r\n                    }, 0);\r\n                }\r\n            }\r\n            function _fetchSendPost(payload, oncomplete, sync) {\r\n                var _a;\r\n                var theUrl = payload.urlString;\r\n                var ignoreResponse = false;\r\n                var responseHandled = false;\r\n                var requestInit = (_a = {\r\n                        body: payload.data,\r\n                        method: STR_POST_METHOD\r\n                    },\r\n                    _a[STR_DISABLED_PROPERTY_NAME] = true,\r\n                    _a);\r\n                if (sync) {\r\n                    requestInit.keepalive = true;\r\n                    if (payload._sendReason === 2 /* SendRequestReason.Unload */) {\r\n                        // As a sync request (during unload), it is unlikely that we will get a chance to process the response so\r\n                        // just like beacon send assume that the events have been accepted and processed\r\n                        ignoreResponse = true;\r\n                        if (_addNoResponse) {\r\n                            theUrl += _noResponseQs;\r\n                        }\r\n                    }\r\n                }\r\n                if (_sendCredentials) {\r\n                    // Don't send credentials when URL is file://\r\n                    requestInit.credentials = \"include\";\r\n                }\r\n                // Only add headers if there are headers to add, due to issue with some polyfills\r\n                if (payload.headers && objKeys(payload.headers).length > 0) {\r\n                    requestInit.headers = payload.headers;\r\n                }\r\n                fetch(theUrl, requestInit).then(function (response) {\r\n                    var headerMap = {};\r\n                    var responseText = STR_EMPTY;\r\n                    var headers = response.headers;\r\n                    if (headers) {\r\n                        headers[\"forEach\"](function (value, name) {\r\n                            headerMap[name] = value;\r\n                        });\r\n                    }\r\n                    if (response.body) {\r\n                        response.text().then(function (text) {\r\n                            responseText = text;\r\n                        });\r\n                    }\r\n                    if (!responseHandled) {\r\n                        responseHandled = true;\r\n                        _doOnComplete(oncomplete, response.status, headerMap, responseText);\r\n                        _handleCollectorResponse(responseText);\r\n                    }\r\n                })[\"catch\"](function (error) {\r\n                    // In case there is an error in the request. Set the status to 0\r\n                    // so that the events can be retried later.\r\n                    if (!responseHandled) {\r\n                        responseHandled = true;\r\n                        _doOnComplete(oncomplete, 0, {});\r\n                    }\r\n                });\r\n                if (ignoreResponse && !responseHandled) {\r\n                    // Assume success during unload processing\r\n                    responseHandled = true;\r\n                    _doOnComplete(oncomplete, 200, {});\r\n                }\r\n                if (!responseHandled && payload.timeout > 0) {\r\n                    // Simulate timeout\r\n                    timeoutOverride.set(function () {\r\n                        if (!responseHandled) {\r\n                            // Assume a 500 response (which will cause a retry)\r\n                            responseHandled = true;\r\n                            _doOnComplete(oncomplete, 500, {});\r\n                        }\r\n                    }, payload.timeout);\r\n                }\r\n            }\r\n            function _xhrSendPost(payload, oncomplete, sync) {\r\n                var theUrl = payload.urlString;\r\n                function _appendHeader(theHeaders, xhr, name) {\r\n                    if (!theHeaders[name] && xhr && xhr.getResponseHeader) {\r\n                        var value = xhr.getResponseHeader(name);\r\n                        if (value) {\r\n                            theHeaders[name] = strTrim(value);\r\n                        }\r\n                    }\r\n                    return theHeaders;\r\n                }\r\n                function _getAllResponseHeaders(xhr) {\r\n                    var theHeaders = {};\r\n                    if (!xhr.getAllResponseHeaders) {\r\n                        // Firefox 2-63 doesn't have getAllResponseHeaders function but it does have getResponseHeader\r\n                        // Only call these if getAllResponseHeaders doesn't exist, otherwise we can get invalid response errors\r\n                        // as collector is not currently returning the correct header to allow JS to access these headers\r\n                        theHeaders = _appendHeader(theHeaders, xhr, STR_TIME_DELTA_HEADER);\r\n                        theHeaders = _appendHeader(theHeaders, xhr, STR_KILL_DURATION_HEADER);\r\n                        theHeaders = _appendHeader(theHeaders, xhr, STR_KILL_DURATION_SECONDS_HEADER);\r\n                    }\r\n                    else {\r\n                        theHeaders = _convertAllHeadersToMap(xhr.getAllResponseHeaders());\r\n                    }\r\n                    return theHeaders;\r\n                }\r\n                function xhrComplete(xhr, responseTxt) {\r\n                    _doOnComplete(oncomplete, xhr.status, _getAllResponseHeaders(xhr), responseTxt);\r\n                }\r\n                if (sync && payload.disableXhrSync) {\r\n                    sync = false;\r\n                }\r\n                var xhrRequest = openXhr(STR_POST_METHOD, theUrl, _sendCredentials, true, sync, payload.timeout);\r\n                // Set custom headers (e.g. gzip) here (after open())\r\n                objForEachKey(payload.headers, function (name, value) {\r\n                    xhrRequest.setRequestHeader(name, value);\r\n                });\r\n                xhrRequest.onload = function () {\r\n                    var response = _getResponseText(xhrRequest);\r\n                    xhrComplete(xhrRequest, response);\r\n                    _handleCollectorResponse(response);\r\n                };\r\n                xhrRequest.onerror = function () {\r\n                    xhrComplete(xhrRequest);\r\n                };\r\n                xhrRequest.ontimeout = function () {\r\n                    xhrComplete(xhrRequest);\r\n                };\r\n                xhrRequest.send(payload.data);\r\n            }\r\n            function _doOnComplete(oncomplete, status, headers, response) {\r\n                try {\r\n                    oncomplete(status, headers, response);\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 518 /* _eExtendedInternalMessageId.SendPostOnCompleteFailure */, dumpObj(e));\r\n                }\r\n            }\r\n            function _beaconSendPost(payload, oncomplete, sync) {\r\n                // Custom headers not supported in sendBeacon payload.headers would be ignored\r\n                var internalPayloadData = payload;\r\n                var status = 200;\r\n                var thePayload = internalPayloadData._thePayload;\r\n                var theUrl = payload.urlString + (_addNoResponse ? _noResponseQs : STR_EMPTY);\r\n                try {\r\n                    var nav_1 = getNavigator();\r\n                    if (!nav_1.sendBeacon(theUrl, payload.data)) {\r\n                        if (thePayload) {\r\n                            // Failed to send entire payload so try and split data and try to send as much events as possible\r\n                            var droppedBatches_1 = [];\r\n                            arrForEach(thePayload.batches, function (theBatch) {\r\n                                if (droppedBatches_1 && theBatch && theBatch.count() > 0) {\r\n                                    var theEvents = theBatch.events();\r\n                                    for (var lp = 0; lp < theEvents.length; lp++) {\r\n                                        if (!nav_1.sendBeacon(theUrl, _serializer.getEventBlob(theEvents[lp]))) {\r\n                                            // Can't send anymore, so split the batch and drop the rest\r\n                                            droppedBatches_1.push(theBatch.split(lp));\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    // Remove all of the events from the existing batch in the payload as the copy includes the original\r\n                                    droppedBatches_1.push(theBatch.split(0));\r\n                                }\r\n                            });\r\n                            _sendBatchesNotification(droppedBatches_1, 8003 /* EventBatchNotificationReason.SizeLimitExceeded */, thePayload.sendType, true);\r\n                        }\r\n                        else {\r\n                            status = 0;\r\n                        }\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    _warnToConsole(_logger, \"Failed to send telemetry using sendBeacon API. Ex:\" + dumpObj(ex));\r\n                    status = 0;\r\n                }\r\n                finally {\r\n                    _doOnComplete(oncomplete, status, {}, STR_EMPTY);\r\n                }\r\n            }\r\n            function _isBeaconPayload(sendType) {\r\n                // Sync Fetch has the same payload limitation as sendBeacon -- 64kb limit, so treat both as a beacon send\r\n                return sendType === 2 /* EventSendType.SendBeacon */ || sendType === 3 /* EventSendType.SyncFetch */;\r\n            }\r\n            function _adjustSendType(sendType) {\r\n                if (_isUnloading && _isBeaconPayload(sendType)) {\r\n                    sendType = 2 /* EventSendType.SendBeacon */;\r\n                }\r\n                return sendType;\r\n            }\r\n            _self.addQueryStringParameter = function (name, value) {\r\n                for (var i = 0; i < _queryStringParameters.length; i++) {\r\n                    if (_queryStringParameters[i].name === name) {\r\n                        _queryStringParameters[i].value = value;\r\n                        return;\r\n                    }\r\n                }\r\n                _queryStringParameters.push({ name: name, value: value });\r\n            };\r\n            _self.addHeader = function (name, value) {\r\n                _headers[name] = value;\r\n            };\r\n            _self.canSendRequest = function () {\r\n                return _hasIdleConnection() && _clockSkewManager.allowRequestSending();\r\n            };\r\n            _self.sendQueuedRequests = function (sendType, sendReason) {\r\n                if (isUndefined(sendType)) {\r\n                    sendType = 0 /* EventSendType.Batched */;\r\n                }\r\n                if (_isUnloading) {\r\n                    sendType = _adjustSendType(sendType);\r\n                    sendReason = 2 /* SendRequestReason.Unload */;\r\n                }\r\n                if (_canSendPayload(_batchQueue, sendType, 0)) {\r\n                    _sendBatches(_clearQueue(), 0, false, sendType, sendReason || 0 /* SendRequestReason.Undefined */);\r\n                }\r\n            };\r\n            _self.isCompletelyIdle = function () {\r\n                return !_paused && _outstandingRequests === 0 && _batchQueue.length === 0;\r\n            };\r\n            _self.setUnloading = function (value) {\r\n                _isUnloading = value;\r\n            };\r\n            _self.addBatch = function (theBatch) {\r\n                if (theBatch && theBatch.count() > 0) {\r\n                    // Try and kill the event faster\r\n                    if (_killSwitch.isTenantKilled(theBatch.iKey())) {\r\n                        return false;\r\n                    }\r\n                    _batchQueue.push(theBatch);\r\n                }\r\n                return true;\r\n            };\r\n            /**\r\n             * Queue all the remaining requests to be sent. The requests will be\r\n             * sent using HTML5 Beacons if they are available.\r\n             */\r\n            _self.teardown = function () {\r\n                if (_batchQueue.length > 0) {\r\n                    _sendBatches(_clearQueue(), 0, true, 2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                }\r\n            };\r\n            /**\r\n             * Pause the sending of requests. No new requests will be sent.\r\n             */\r\n            _self.pause = function () {\r\n                _paused = true;\r\n            };\r\n            /**\r\n             * Resume the sending of requests.\r\n             */\r\n            _self.resume = function () {\r\n                _paused = false;\r\n                _self.sendQueuedRequests(0 /* EventSendType.Batched */, 4 /* SendRequestReason.Resumed */);\r\n            };\r\n            /**\r\n             * Sends a request synchronously to the Aria collector. This api is used to send\r\n             * a request containing a single immediate event.\r\n             *\r\n             * @param batch - The request to be sent.\r\n             * @param sendReason   - The token used to send the request.\r\n             */\r\n            _self.sendSynchronousBatch = function (batch, sendType, sendReason) {\r\n                // This will not take into account the max connections restriction. Since this is sync, we can\r\n                // only send one of this request at a time and thus should not worry about multiple connections\r\n                // being used to send synchronous events.\r\n                // Increment active connection since we are still going to use a connection to send the request.\r\n                if (batch && batch.count() > 0) {\r\n                    if (isNullOrUndefined(sendType)) {\r\n                        sendType = 1 /* EventSendType.Synchronous */;\r\n                    }\r\n                    if (_isUnloading) {\r\n                        sendType = _adjustSendType(sendType);\r\n                        sendReason = 2 /* SendRequestReason.Unload */;\r\n                    }\r\n                    // For sync requests we will not wait for the clock skew.\r\n                    _sendBatches([batch], 0, false, sendType, sendReason || 0 /* SendRequestReason.Undefined */);\r\n                }\r\n            };\r\n            function _hasIdleConnection() {\r\n                return !_paused && _outstandingRequests < maxConnections;\r\n            }\r\n            function _clearQueue() {\r\n                var theQueue = _batchQueue;\r\n                _batchQueue = [];\r\n                return theQueue;\r\n            }\r\n            function _canSendPayload(theBatches, sendType, retryCnt) {\r\n                var result = false;\r\n                if (theBatches && theBatches.length > 0 && !_paused && _sendInterfaces[sendType] && _serializer) {\r\n                    // Always attempt to send synchronous events don't wait for idle or clockSkew\r\n                    // and don't block retry requests if clockSkew is not yet set\r\n                    result = (sendType !== 0 /* EventSendType.Batched */) || (_hasIdleConnection() && (retryCnt > 0 || _clockSkewManager.allowRequestSending()));\r\n                }\r\n                return result;\r\n            }\r\n            function _createDebugBatches(theBatches) {\r\n                var values = {};\r\n                if (theBatches) {\r\n                    arrForEach(theBatches, function (theBatch, idx) {\r\n                        values[idx] = {\r\n                            iKey: theBatch.iKey(),\r\n                            evts: theBatch.events()\r\n                        };\r\n                    });\r\n                }\r\n                return values;\r\n            }\r\n            function _sendBatches(theBatches, retryCount, isTeardown, sendType, sendReason) {\r\n                if (!theBatches || theBatches.length === 0) {\r\n                    // Nothing to do\r\n                    return;\r\n                }\r\n                if (_paused) {\r\n                    _sendBatchesNotification(theBatches, 1 /* EventBatchNotificationReason.Paused */, sendType);\r\n                    return;\r\n                }\r\n                // Make sure that if we are unloading the sendType is a supported version\r\n                sendType = _adjustSendType(sendType);\r\n                try {\r\n                    var orgBatches_1 = theBatches;\r\n                    var isSynchronous_1 = sendType !== 0 /* EventSendType.Batched */;\r\n                    doPerf(_core, function () { return \"HttpManager:_sendBatches\"; }, function (perfEvt) {\r\n                        if (perfEvt) {\r\n                            // Perf Monitoring is enabled, so create a \"Quick\" copy of the original batches so we still report\r\n                            // the original values as part of the perfEvent. This is because theBatches uses .shift() to remove each\r\n                            // batch as they are processed - removing from the original array, so by the time the _createDebugBatches()\r\n                            // function is called the passed in value has changed and therefore the reported value for the perfEvent is incorrect\r\n                            theBatches = theBatches.slice(0);\r\n                        }\r\n                        var droppedBatches = [];\r\n                        var thePayload = null;\r\n                        var serializationStart = getTime();\r\n                        var sendInterface = _sendInterfaces[sendType] || (isSynchronous_1 ? _sendInterfaces[1 /* EventSendType.Synchronous */] : _sendInterfaces[0 /* EventSendType.Batched */]);\r\n                        var sendTransport = sendInterface && sendInterface._transport;\r\n                        // Sync Fetch has the same payload limitation as sendBeacon -- 64kb limit\r\n                        var isReducedPayload = _canHaveReducedPayload && (_isUnloading || _isBeaconPayload(sendType) || (sendTransport === 3 /* TransportType.Beacon */ || (sendInterface._isSync && sendTransport === 2 /* TransportType.Fetch */)));\r\n                        while (_canSendPayload(theBatches, sendType, retryCount)) {\r\n                            var theBatch = theBatches.shift();\r\n                            if (theBatch && theBatch.count() > 0) {\r\n                                if (!_killSwitch.isTenantKilled(theBatch.iKey())) {\r\n                                    // Make sure we have a payload object\r\n                                    thePayload = thePayload || _serializer.createPayload(retryCount, isTeardown, isSynchronous_1, isReducedPayload, sendReason, sendType);\r\n                                    // Add the batch to the current payload\r\n                                    if (!_serializer.appendPayload(thePayload, theBatch, maxEventsPerBatch)) {\r\n                                        // Entire batch was not added so send the payload and retry adding this batch\r\n                                        _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                                        serializationStart = getTime();\r\n                                        theBatches = [theBatch].concat(theBatches);\r\n                                        thePayload = null;\r\n                                    }\r\n                                    else if (thePayload.overflow !== null) {\r\n                                        // Total Payload size was exceeded so send the payload and add the unsent as the next batch to send\r\n                                        theBatches = [thePayload.overflow].concat(theBatches);\r\n                                        thePayload.overflow = null;\r\n                                        _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                                        serializationStart = getTime();\r\n                                        thePayload = null;\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    droppedBatches.push(theBatch);\r\n                                }\r\n                            }\r\n                        }\r\n                        // Make sure to flush any remaining payload\r\n                        if (thePayload) {\r\n                            _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                        }\r\n                        if (theBatches.length > 0) {\r\n                            // Add any unsent batches back to the head of the queue\r\n                            _batchQueue = theBatches.concat(_batchQueue);\r\n                        }\r\n                        // Now send notification about any dropped events\r\n                        _sendBatchesNotification(droppedBatches, 8004 /* EventBatchNotificationReason.KillSwitch */, sendType);\r\n                    }, function () { return ({ batches: _createDebugBatches(orgBatches_1), retryCount: retryCount, isTeardown: isTeardown, isSynchronous: isSynchronous_1, sendReason: sendReason, useSendBeacon: _isBeaconPayload(sendType), sendType: sendType }); }, !isSynchronous_1);\r\n                }\r\n                catch (ex) {\r\n                    _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 48 /* _eInternalMessageId.CannotSerializeObject */, \"Unexpected Exception sending batch: \" + dumpObj(ex));\r\n                }\r\n            }\r\n            function _buildRequestDetails(thePayload, useHeaders) {\r\n                var requestDetails = {\r\n                    url: _urlString,\r\n                    hdrs: {},\r\n                    useHdrs: false // Assume no headers\r\n                };\r\n                if (!useHeaders) {\r\n                    // Attempt to map headers to a query string if possible\r\n                    objForEachKey(_headers, function (name, value) {\r\n                        if (_collectorHeaderToQs[name]) {\r\n                            _addRequestDetails(requestDetails, _collectorHeaderToQs[name], value, false);\r\n                        }\r\n                        else {\r\n                            // No mapping, so just include in the headers anyway (may not get sent if using sendBeacon())\r\n                            requestDetails.hdrs[name] = value;\r\n                            requestDetails.useHdrs = true;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    // Copy the pre-defined headers into the payload headers\r\n                    requestDetails.hdrs = extend(requestDetails.hdrs, _headers);\r\n                    requestDetails.useHdrs = (objKeys(requestDetails.hdrs).length > 0);\r\n                }\r\n                _addRequestDetails(requestDetails, STR_CLIENT_ID, \"NO_AUTH\", useHeaders);\r\n                _addRequestDetails(requestDetails, STR_CLIENT_VERSION, FullVersionString, useHeaders);\r\n                var apiQsKeys = STR_EMPTY;\r\n                arrForEach(thePayload.apiKeys, function (apiKey) {\r\n                    if (apiQsKeys.length > 0) {\r\n                        apiQsKeys += \",\";\r\n                    }\r\n                    apiQsKeys += apiKey;\r\n                });\r\n                _addRequestDetails(requestDetails, STR_API_KEY, apiQsKeys, useHeaders);\r\n                _addRequestDetails(requestDetails, STR_UPLOAD_TIME, dateNow().toString(), useHeaders);\r\n                var msfpc = _getMsfpc(thePayload);\r\n                if (isValueAssigned(msfpc)) {\r\n                    requestDetails.url += \"&ext.intweb.msfpc=\" + msfpc;\r\n                }\r\n                if (_clockSkewManager.shouldAddClockSkewHeaders()) {\r\n                    _addRequestDetails(requestDetails, STR_TIME_DELTA_TO_APPLY, _clockSkewManager.getClockSkewHeaderValue(), useHeaders);\r\n                }\r\n                if (_core.getWParam) {\r\n                    var wParam = _core.getWParam();\r\n                    if (wParam >= 0) {\r\n                        requestDetails.url += \"&w=\" + wParam;\r\n                    }\r\n                }\r\n                for (var i = 0; i < _queryStringParameters.length; i++) {\r\n                    requestDetails.url += \"&\" + _queryStringParameters[i].name + \"=\" + _queryStringParameters[i].value;\r\n                }\r\n                return requestDetails;\r\n            }\r\n            function _setTimingValue(timings, name, value) {\r\n                timings[name] = timings[name] || {};\r\n                timings[name][_postManager.identifier] = value;\r\n            }\r\n            function _doPayloadSend(thePayload, serializationStart, serializationCompleted, sendReason) {\r\n                if (thePayload && thePayload.payloadBlob && thePayload.payloadBlob.length > 0) {\r\n                    var useSendHook_1 = !!_self.sendHook;\r\n                    var sendInterface_1 = _sendInterfaces[thePayload.sendType];\r\n                    // Send all data using a beacon style transport if closing mode is on or channel was teared down\r\n                    if (!_isBeaconPayload(thePayload.sendType) && thePayload.isBeacon && thePayload.sendReason === 2 /* SendRequestReason.Unload */) {\r\n                        sendInterface_1 = _sendInterfaces[2 /* EventSendType.SendBeacon */] || _sendInterfaces[3 /* EventSendType.SyncFetch */] || sendInterface_1;\r\n                    }\r\n                    var useHeaders_1 = _useHeaders;\r\n                    // Disable header usage if we know we are using sendBeacon as additional headers are not supported\r\n                    if (thePayload.isBeacon || sendInterface_1._transport === 3 /* TransportType.Beacon */) {\r\n                        useHeaders_1 = false;\r\n                    }\r\n                    var requestDetails_1 = _buildRequestDetails(thePayload, useHeaders_1);\r\n                    useHeaders_1 = useHeaders_1 || requestDetails_1.useHdrs;\r\n                    var sendEventStart_1 = getTime();\r\n                    doPerf(_core, function () { return \"HttpManager:_doPayloadSend\"; }, function () {\r\n                        // Increment the send attempt count and add timings after packaging (So it's not serialized in the 1st attempt)\r\n                        for (var batchLp = 0; batchLp < thePayload.batches.length; batchLp++) {\r\n                            var theBatch = thePayload.batches[batchLp];\r\n                            var theEvents = theBatch.events();\r\n                            for (var evtLp = 0; evtLp < theEvents.length; evtLp++) {\r\n                                var telemetryItem = theEvents[evtLp];\r\n                                if (_enableEventTimings) {\r\n                                    var timings = telemetryItem.timings = telemetryItem.timings || {};\r\n                                    _setTimingValue(timings, \"sendEventStart\", sendEventStart_1);\r\n                                    _setTimingValue(timings, \"serializationStart\", serializationStart);\r\n                                    _setTimingValue(timings, \"serializationCompleted\", serializationCompleted);\r\n                                }\r\n                                telemetryItem[strSendAttempt] > 0 ? telemetryItem[strSendAttempt]++ : telemetryItem[strSendAttempt] = 1;\r\n                            }\r\n                        }\r\n                        // Note: always sending this notification in a synchronous manner.\r\n                        _sendBatchesNotification(thePayload.batches, (1000 /* EventBatchNotificationReason.SendingUndefined */ + (sendReason || 0 /* SendRequestReason.Undefined */)), thePayload.sendType, true);\r\n                        // Disabling the use of const because of Issue: \r\n                        // - Task 9227844: [1DS] Some environments and packagers automatically \"freeze\" objects which are defined as const which causes any mutations to throw\r\n                        // eslint-disable-next-line prefer-const\r\n                        var orgPayloadData = {\r\n                            data: thePayload.payloadBlob,\r\n                            urlString: requestDetails_1.url,\r\n                            headers: requestDetails_1.hdrs,\r\n                            _thePayload: thePayload,\r\n                            _sendReason: sendReason,\r\n                            timeout: _xhrTimeout,\r\n                            disableXhrSync: _disableXhrSync,\r\n                            disableFetchKeepAlive: _disableFetchKeepAlive\r\n                        };\r\n                        // Only automatically add the following headers if already sending headers and we are not attempting to avoid an options call\r\n                        if (useHeaders_1) {\r\n                            if (!_hasHeader(orgPayloadData.headers, STR_CACHE_CONTROL)) {\r\n                                orgPayloadData.headers[STR_CACHE_CONTROL] = DEFAULT_CACHE_CONTROL;\r\n                            }\r\n                            if (!_hasHeader(orgPayloadData.headers, STR_CONTENT_TYPE_HEADER)) {\r\n                                orgPayloadData.headers[STR_CONTENT_TYPE_HEADER] = DEFAULT_CONTENT_TYPE;\r\n                            }\r\n                        }\r\n                        var sender = null;\r\n                        if (sendInterface_1) {\r\n                            // Send sync requests if the request is immediate or we are tearing down telemetry.\r\n                            sender = function (payload) {\r\n                                // Notify the clock skew manager that we are sending the first request (Potentially blocking all further requests)\r\n                                _clockSkewManager.firstRequestSent();\r\n                                var onComplete = function (status, headers) {\r\n                                    _retryRequestIfNeeded(status, headers, thePayload, sendReason);\r\n                                };\r\n                                var isSync = thePayload.isTeardown || thePayload.isSync;\r\n                                try {\r\n                                    sendInterface_1.sendPOST(payload, onComplete, isSync);\r\n                                    if (_self.sendListener) {\r\n                                        // Send the original payload to the listener\r\n                                        _self.sendListener(orgPayloadData, payload, isSync, thePayload.isBeacon);\r\n                                    }\r\n                                }\r\n                                catch (ex) {\r\n                                    _warnToConsole(_logger, \"Unexpected exception sending payload. Ex:\" + dumpObj(ex));\r\n                                    _doOnComplete(onComplete, 0, {});\r\n                                }\r\n                            };\r\n                        }\r\n                        doPerf(_core, function () { return \"HttpManager:_doPayloadSend.sender\"; }, function () {\r\n                            if (sender) {\r\n                                if (thePayload.sendType === 0 /* EventSendType.Batched */) {\r\n                                    _outstandingRequests++;\r\n                                }\r\n                                // Only call the hook if it's defined and we are not using sendBeacon as additional headers are not supported\r\n                                if (useSendHook_1 && !thePayload.isBeacon && sendInterface_1._transport !== 3 /* TransportType.Beacon */) {\r\n                                    // Create a new IPayloadData that is sent into the hook method, so that the hook method\r\n                                    // can't change the object references to the orgPayloadData (it can still change the content -- mainly the headers)\r\n                                    // Disabling the use of const because of Issue: \r\n                                    // - Task 9227844: [1DS] Some environments and packagers automatically \"freeze\" objects which are defined as const which causes any mutations to throw\r\n                                    // eslint-disable-next-line prefer-const\r\n                                    var hookData_1 = {\r\n                                        data: orgPayloadData.data,\r\n                                        urlString: orgPayloadData.urlString,\r\n                                        headers: extend({}, orgPayloadData.headers),\r\n                                        timeout: orgPayloadData.timeout,\r\n                                        disableXhrSync: orgPayloadData.disableXhrSync,\r\n                                        disableFetchKeepAlive: orgPayloadData.disableFetchKeepAlive\r\n                                    };\r\n                                    var senderCalled_1 = false;\r\n                                    doPerf(_core, function () { return \"HttpManager:_doPayloadSend.sendHook\"; }, function () {\r\n                                        try {\r\n                                            _self.sendHook(hookData_1, function (payload) {\r\n                                                senderCalled_1 = true;\r\n                                                // Add back the internal properties\r\n                                                if (!_customHttpInterface && !payload._thePayload) {\r\n                                                    payload._thePayload = payload._thePayload || orgPayloadData._thePayload;\r\n                                                    payload._sendReason = payload._sendReason || orgPayloadData._sendReason;\r\n                                                }\r\n                                                sender(payload);\r\n                                            }, thePayload.isSync || thePayload.isTeardown);\r\n                                        }\r\n                                        catch (ex) {\r\n                                            if (!senderCalled_1) {\r\n                                                // The hook never called the sender -- assume that it never will\r\n                                                sender(orgPayloadData);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    sender(orgPayloadData);\r\n                                }\r\n                            }\r\n                        });\r\n                    }, function () { return ({ thePayload: thePayload, serializationStart: serializationStart, serializationCompleted: serializationCompleted, sendReason: sendReason }); }, thePayload.isSync);\r\n                }\r\n                if (thePayload.sizeExceed && thePayload.sizeExceed.length > 0) {\r\n                    // Ensure that we send any discard events for oversize events even when there was no payload to send\r\n                    _sendBatchesNotification(thePayload.sizeExceed, 8003 /* EventBatchNotificationReason.SizeLimitExceeded */, thePayload.sendType);\r\n                }\r\n                if (thePayload.failedEvts && thePayload.failedEvts.length > 0) {\r\n                    // Ensure that we send any discard events for events that could not be serialized even when there was no payload to send\r\n                    _sendBatchesNotification(thePayload.failedEvts, 8002 /* EventBatchNotificationReason.InvalidEvent */, thePayload.sendType);\r\n                }\r\n            }\r\n            function _addEventCompletedTimings(theEvents, sendEventCompleted) {\r\n                if (_enableEventTimings) {\r\n                    arrForEach(theEvents, function (theEvent) {\r\n                        var timings = theEvent.timings = theEvent.timings || {};\r\n                        _setTimingValue(timings, \"sendEventCompleted\", sendEventCompleted);\r\n                    });\r\n                }\r\n            }\r\n            function _retryRequestIfNeeded(status, headers, thePayload, sendReason) {\r\n                var reason = 9000 /* EventBatchNotificationReason.ResponseFailure */;\r\n                var droppedBatches = null;\r\n                var isRetrying = false;\r\n                var backOffTrans = false;\r\n                try {\r\n                    var shouldRetry = true;\r\n                    if (typeof status !== strUndefined) {\r\n                        if (headers) {\r\n                            _clockSkewManager.setClockSkew(headers[STR_TIME_DELTA_HEADER]);\r\n                            var killDuration = headers[STR_KILL_DURATION_HEADER] || headers[\"kill-duration-seconds\"];\r\n                            arrForEach(_killSwitch.setKillSwitchTenants(headers[STR_KILL_TOKENS_HEADER], killDuration), function (killToken) {\r\n                                arrForEach(thePayload.batches, function (theBatch) {\r\n                                    if (theBatch.iKey() === killToken) {\r\n                                        // Make sure we have initialized the array\r\n                                        droppedBatches = droppedBatches || [];\r\n                                        // Create a copy of the batch with all of the events (and more importantly the action functions)\r\n                                        var removedEvents = theBatch.split(0);\r\n                                        // And then remove the events for the payload batch and reduce the actual number of processed\r\n                                        thePayload.numEvents -= removedEvents.count();\r\n                                        droppedBatches.push(removedEvents);\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                        // Disabling triple-equals rule to avoid httpOverrides from failing because they are returning a string value\r\n                        // tslint:disable-next-line:triple-equals\r\n                        if (status == 200 || status == 204) {\r\n                            // Response was successfully sent\r\n                            reason = 200 /* EventBatchNotificationReason.Complete */;\r\n                            return;\r\n                        }\r\n                        if (!retryPolicyShouldRetryForStatus(status) || thePayload.numEvents <= 0) {\r\n                            // Only retry for specific response codes and if there is still events after kill switch processing\r\n                            shouldRetry = false;\r\n                        }\r\n                        // Derive the notification response from the HttpStatus Code\r\n                        reason = 9000 /* EventBatchNotificationReason.ResponseFailure */ + (status % 1000);\r\n                    }\r\n                    if (shouldRetry) {\r\n                        // The events should be retried -- so change notification to requeue them\r\n                        reason = 100 /* EventBatchNotificationReason.RequeueEvents */;\r\n                        var retryCount_1 = thePayload.retryCnt;\r\n                        if (thePayload.sendType === 0 /* EventSendType.Batched */) {\r\n                            // attempt to resend the entire batch\r\n                            if (retryCount_1 < maxRequestRetriesBeforeBackoff) {\r\n                                isRetrying = true;\r\n                                _doAction(function () {\r\n                                    // try to resend the same batches\r\n                                    if (thePayload.sendType === 0 /* EventSendType.Batched */) {\r\n                                        // Reduce the outstanding request count (if this was an async request) as we didn't reduce the count\r\n                                        // previously and we are about to reschedule our retry attempt and we want an attempt to send\r\n                                        // to occur, it's also required to ensure that a follow up handleRequestFinished() call occurs\r\n                                        _outstandingRequests--;\r\n                                    }\r\n                                    _sendBatches(thePayload.batches, retryCount_1 + 1, thePayload.isTeardown, _isUnloading ? 2 /* EventSendType.SendBeacon */ : thePayload.sendType, 5 /* SendRequestReason.Retry */);\r\n                                }, _isUnloading, retryPolicyGetMillisToBackoffForRetry(retryCount_1));\r\n                            }\r\n                            else {\r\n                                backOffTrans = true;\r\n                                if (_isUnloading) {\r\n                                    // we are unloading so don't try and requeue the events otherwise let the events get requeued and resent during the backoff sending\r\n                                    // This will also cause the events to be purged based on the priority (if necessary)\r\n                                    reason = 8001 /* EventBatchNotificationReason.NonRetryableStatus */;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                finally {\r\n                    if (!isRetrying) {\r\n                        // Make sure the clockSkewManager doesn't blocking further sending of requests once we have a proper response\r\n                        // This won't override any previously sent clock Skew value\r\n                        _clockSkewManager.setClockSkew();\r\n                        _handleRequestFinished(thePayload, reason, sendReason, backOffTrans);\r\n                    }\r\n                    _sendBatchesNotification(droppedBatches, 8004 /* EventBatchNotificationReason.KillSwitch */, thePayload.sendType);\r\n                }\r\n            }\r\n            function _handleRequestFinished(thePayload, batchReason, sendReason, backOffTrans) {\r\n                try {\r\n                    if (backOffTrans) {\r\n                        // Slow down the transmission requests\r\n                        _postManager._backOffTransmission();\r\n                    }\r\n                    if (batchReason === 200 /* EventBatchNotificationReason.Complete */) {\r\n                        if (!backOffTrans && !thePayload.isSync) {\r\n                            // We have a successful async response, so the lets open the floodgates\r\n                            // The reason for checking isSync is to avoid unblocking if beacon send occurred as it\r\n                            // doesn't wait for a response.\r\n                            _postManager._clearBackOff();\r\n                        }\r\n                        _addCompleteTimings(thePayload.batches);\r\n                    }\r\n                    // Send the notifications synchronously\r\n                    _sendBatchesNotification(thePayload.batches, batchReason, thePayload.sendType, true);\r\n                }\r\n                finally {\r\n                    if (thePayload.sendType === 0 /* EventSendType.Batched */) {\r\n                        // we always need to decrement this value otherwise the httpmanager locks up and won't send any more events\r\n                        _outstandingRequests--;\r\n                        // Don't try to send additional queued events if this is a retry operation as the retried\r\n                        // response will eventually call _handleRequestFinished for the retried event\r\n                        if (sendReason !== 5 /* SendRequestReason.Retry */) {\r\n                            // Try and send any other queued batched events\r\n                            _self.sendQueuedRequests(thePayload.sendType, sendReason);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function _addCompleteTimings(theBatches) {\r\n                if (_enableEventTimings) {\r\n                    var sendEventCompleted_1 = getTime();\r\n                    arrForEach(theBatches, function (theBatch) {\r\n                        if (theBatch && theBatch.count() > 0) {\r\n                            _addEventCompletedTimings(theBatch.events(), sendEventCompleted_1);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            function _doAction(cb, isSync, interval) {\r\n                if (isSync) {\r\n                    cb();\r\n                }\r\n                else {\r\n                    timeoutOverride.set(cb, interval);\r\n                }\r\n            }\r\n            /**\r\n            * Converts the XHR getAllResponseHeaders to a map containing the header key and value.\r\n            */\r\n            // tslint:disable-next-line: align\r\n            function _convertAllHeadersToMap(headersString) {\r\n                var headers = {};\r\n                if (isString(headersString)) {\r\n                    var headersArray = strTrim(headersString).split(/[\\r\\n]+/);\r\n                    arrForEach(headersArray, function (headerEntry) {\r\n                        if (headerEntry) {\r\n                            var idx = headerEntry.indexOf(\": \");\r\n                            if (idx !== -1) {\r\n                                // The new spec has the headers returning all as lowercase -- but not all browsers do this yet\r\n                                var header = strTrim(headerEntry.substring(0, idx)).toLowerCase();\r\n                                var value = strTrim(headerEntry.substring(idx + 1));\r\n                                headers[header] = value;\r\n                            }\r\n                            else {\r\n                                headers[strTrim(headerEntry)] = 1;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                return headers;\r\n            }\r\n            function _getMsfpc(thePayload) {\r\n                for (var lp = 0; lp < thePayload.batches.length; lp++) {\r\n                    var msfpc = thePayload.batches[lp].Msfpc();\r\n                    if (msfpc) {\r\n                        return encodeURIComponent(msfpc);\r\n                    }\r\n                }\r\n                return STR_EMPTY;\r\n            }\r\n            function _handleCollectorResponse(responseText) {\r\n                var responseHandlers = _self._responseHandlers;\r\n                try {\r\n                    for (var i = 0; i < responseHandlers.length; i++) {\r\n                        try {\r\n                            responseHandlers[i](responseText);\r\n                        }\r\n                        catch (e) {\r\n                            _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 519 /* _eExtendedInternalMessageId.PostResponseHandler */, \"Response handler failed: \" + e);\r\n                        }\r\n                    }\r\n                    if (responseText) {\r\n                        var response = JSON.parse(responseText);\r\n                        if (isValueAssigned(response.webResult) && isValueAssigned(response.webResult[STR_MSFPC])) {\r\n                            // Set cookie\r\n                            _cookieMgr.set(\"MSFPC\", response.webResult[STR_MSFPC], 365 * 86400);\r\n                        }\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    // Doing nothing\r\n                }\r\n            }\r\n            function _sendBatchesNotification(theBatches, batchReason, sendType, sendSync) {\r\n                if (theBatches && theBatches.length > 0 && actions) {\r\n                    var theAction_1 = actions[_getNotificationAction(batchReason)];\r\n                    if (theAction_1) {\r\n                        var isSyncRequest_1 = sendType !== 0 /* EventSendType.Batched */;\r\n                        doPerf(_core, function () { return \"HttpManager:_sendBatchesNotification\"; }, function () {\r\n                            _doAction(function () {\r\n                                try {\r\n                                    theAction_1.call(actions, theBatches, batchReason, isSyncRequest_1, sendType);\r\n                                }\r\n                                catch (e) {\r\n                                    _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, \"send request notification failed: \" + e);\r\n                                }\r\n                            }, sendSync || isSyncRequest_1, 0);\r\n                        }, function () { return ({ batches: _createDebugBatches(theBatches), reason: batchReason, isSync: isSyncRequest_1, sendSync: sendSync, sendType: sendType }); }, !isSyncRequest_1);\r\n                    }\r\n                }\r\n            }\r\n            function _getNotificationAction(reason) {\r\n                var action = _eventActionMap[reason];\r\n                if (!isValueAssigned(action)) {\r\n                    action = STR_OTHER;\r\n                    if (reason >= 9000 /* EventBatchNotificationReason.ResponseFailure */ && reason <= 9999 /* EventBatchNotificationReason.ResponseFailureMax */) {\r\n                        action = STR_RESPONSE_FAIL;\r\n                    }\r\n                    else if (reason >= 8000 /* EventBatchNotificationReason.EventsDropped */ && reason <= 8999 /* EventBatchNotificationReason.EventsDroppedMax */) {\r\n                        action = STR_DROPPED;\r\n                    }\r\n                    else if (reason >= 1000 /* EventBatchNotificationReason.SendingUndefined */ && reason <= 1999 /* EventBatchNotificationReason.SendingEventMax */) {\r\n                        action = STR_SENDING;\r\n                    }\r\n                }\r\n                return action;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for HttpManager.prototype.initialize.\r\n// Removed Stub for HttpManager.prototype.addQueryStringParameter.\r\n// Removed Stub for HttpManager.prototype.addHeader.\r\n// Removed Stub for HttpManager.prototype.addBatch.\r\n// Removed Stub for HttpManager.prototype.canSendRequest.\r\n// Removed Stub for HttpManager.prototype.sendQueuedRequests.\r\n// Removed Stub for HttpManager.prototype.isCompletelyIdle.\r\n// Removed Stub for HttpManager.prototype.setUnloading.\r\n// Removed Stub for HttpManager.prototype.teardown.\r\n// Removed Stub for HttpManager.prototype.pause.\r\n// Removed Stub for HttpManager.prototype.resume.\r\n// Removed Stub for HttpManager.prototype.sendSynchronousBatch.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    HttpManager.__ieDyn=1;\n\n    return HttpManager;\r\n}());\r\nexport { HttpManager };\r\n//# sourceMappingURL=HttpManager.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* TimeoutOverrideWrapper.ts\r\n* @author  Nev Wylie (newylie)\r\n* @copyright Microsoft 2022\r\n* Simple internal timeout wrapper\r\n*/\r\nexport function defaultSetTimeout(callback, ms) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return setTimeout(callback, ms, args);\r\n}\r\nexport function defaultClearTimeout(timeoutId) {\r\n    clearTimeout(timeoutId);\r\n}\r\nexport function createTimeoutWrapper(argSetTimeout, argClearTimeout) {\r\n    return {\r\n        set: argSetTimeout || defaultSetTimeout,\r\n        clear: argClearTimeout || defaultClearTimeout\r\n    };\r\n}\r\n//# sourceMappingURL=TimeoutOverrideWrapper.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.8\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* PostManager.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { BaseTelemetryPlugin, EventsDiscardedReason, _throwInternal, addPageHideEventListener, addPageShowEventListener, addPageUnloadEventListener, arrForEach, createUniqueNamespace, doPerf, getWindow, isChromium, isNumber, isValueAssigned, mergeEvtNamespace, objDefineAccessors, objForEachKey, optimizeObject, removePageHideEventListener, removePageShowEventListener, removePageUnloadEventListener, setProcessTelemetryTimings } from \"@microsoft/1ds-core-js\";\r\nimport { BE_PROFILE, NRT_PROFILE, RT_PROFILE } from \"./DataModels\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { HttpManager } from \"./HttpManager\";\r\nimport { STR_MSA_DEVICE_TICKET, STR_TRACE, STR_USER } from \"./InternalConstants\";\r\nimport { retryPolicyGetMillisToBackoffForRetry } from \"./RetryPolicy\";\r\nimport { createTimeoutWrapper } from \"./TimeoutOverrideWrapper\";\r\nvar FlushCheckTimer = 0.250; // This needs to be in seconds, so this is 250ms\r\nvar MaxNumberEventPerBatch = 500;\r\nvar EventsDroppedAtOneTime = 20;\r\nvar MaxSendAttempts = 6;\r\nvar MaxSyncUnloadSendAttempts = 2; // Assuming 2 based on beforeunload and unload\r\nvar MaxBackoffCount = 4;\r\nvar MaxConnections = 2;\r\nvar MaxRequestRetriesBeforeBackoff = 1;\r\nvar strEventsDiscarded = \"eventsDiscarded\";\r\nvar strOverrideInstrumentationKey = \"overrideInstrumentationKey\";\r\nvar strMaxEventRetryAttempts = \"maxEventRetryAttempts\";\r\nvar strMaxUnloadEventRetryAttempts = \"maxUnloadEventRetryAttempts\";\r\nvar strAddUnloadCb = \"addUnloadCb\";\r\n/**\r\n * Class that manages adding events to inbound queues and batching of events\r\n * into requests.\r\n */\r\nvar PostChannel = /** @class */ (function (_super) {\r\n    __extends(PostChannel, _super);\r\n    function PostChannel() {\r\n        var _this = _super.call(this) || this;\r\n        _this.identifier = \"PostChannel\";\r\n        _this.priority = 1011;\r\n        _this.version = '3.2.8';\r\n        var _config;\r\n        var _isTeardownCalled = false;\r\n        var _flushCallbackQueue = [];\r\n        var _flushCallbackTimerId = null;\r\n        var _paused = false;\r\n        var _immediateQueueSize = 0;\r\n        var _immediateQueueSizeLimit = 500;\r\n        var _queueSize = 0;\r\n        var _queueSizeLimit = 10000;\r\n        var _profiles = {};\r\n        var _currentProfile = RT_PROFILE;\r\n        var _scheduledTimerId = null;\r\n        var _immediateTimerId = null;\r\n        var _currentBackoffCount = 0;\r\n        var _timerCount = 0;\r\n        var _xhrOverride;\r\n        var _httpManager;\r\n        var _batchQueues = {};\r\n        var _autoFlushEventsLimit;\r\n        // either MaxBatchSize * (1+ Max Connections) or _queueLimit / 6 (where 3 latency Queues [normal, realtime, cost deferred] * 2 [allow half full -- allow for retry])\r\n        var _autoFlushBatchLimit;\r\n        var _delayedBatchSendLatency = -1;\r\n        var _delayedBatchReason;\r\n        var _optimizeObject = true;\r\n        var _isPageUnloadTriggered = false;\r\n        var _maxEventSendAttempts = MaxSendAttempts;\r\n        var _maxUnloadEventSendAttempts = MaxSyncUnloadSendAttempts;\r\n        var _evtNamespace;\r\n        var _timeoutWrapper;\r\n        dynamicProto(PostChannel, _this, function (_self, _base) {\r\n            _initDefaults();\r\n            // Special internal method to allow the DebugPlugin to hook embedded objects\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_httpManager];\r\n            };\r\n            _self.initialize = function (coreConfig, core, extensions) {\r\n                doPerf(core, function () { return \"PostChannel:initialize\"; }, function () {\r\n                    var extendedCore = core;\r\n                    _base.initialize(coreConfig, core, extensions);\r\n                    try {\r\n                        var hasAddUnloadCb = !!core[strAddUnloadCb];\r\n                        _evtNamespace = mergeEvtNamespace(createUniqueNamespace(_self.identifier), core.evtNamespace && core.evtNamespace());\r\n                        var ctx = _self._getTelCtx();\r\n                        coreConfig.extensionConfig[_self.identifier] = coreConfig.extensionConfig[_self.identifier] || {};\r\n                        _config = ctx.getExtCfg(_self.identifier);\r\n                        _timeoutWrapper = createTimeoutWrapper(_config.setTimeoutOverride, _config.clearTimeoutOverride);\r\n                        // Only try and use the optimizeObject() if this appears to be a chromium based browser and it has not been explicitly disabled\r\n                        _optimizeObject = !_config.disableOptimizeObj && isChromium();\r\n                        _hookWParam(extendedCore);\r\n                        if (_config.eventsLimitInMem > 0) {\r\n                            _queueSizeLimit = _config.eventsLimitInMem;\r\n                        }\r\n                        if (_config.immediateEventLimit > 0) {\r\n                            _immediateQueueSizeLimit = _config.immediateEventLimit;\r\n                        }\r\n                        if (_config.autoFlushEventsLimit > 0) {\r\n                            _autoFlushEventsLimit = _config.autoFlushEventsLimit;\r\n                        }\r\n                        if (isNumber(_config[strMaxEventRetryAttempts])) {\r\n                            _maxEventSendAttempts = _config[strMaxEventRetryAttempts];\r\n                        }\r\n                        if (isNumber(_config[strMaxUnloadEventRetryAttempts])) {\r\n                            _maxUnloadEventSendAttempts = _config[strMaxUnloadEventRetryAttempts];\r\n                        }\r\n                        _setAutoLimits();\r\n                        if (_config.httpXHROverride && _config.httpXHROverride.sendPOST) {\r\n                            _xhrOverride = _config.httpXHROverride;\r\n                        }\r\n                        if (isValueAssigned(coreConfig.anonCookieName)) {\r\n                            _httpManager.addQueryStringParameter(\"anoncknm\", coreConfig.anonCookieName);\r\n                        }\r\n                        _httpManager.sendHook = _config.payloadPreprocessor;\r\n                        _httpManager.sendListener = _config.payloadListener;\r\n                        // Override endpointUrl if provided in Post config\r\n                        var endpointUrl = _config.overrideEndpointUrl ? _config.overrideEndpointUrl : coreConfig.endpointUrl;\r\n                        _self._notificationManager = core.getNotifyMgr();\r\n                        _httpManager.initialize(endpointUrl, _self.core, _self, _xhrOverride, _config);\r\n                        var excludePageUnloadEvents = coreConfig.disablePageUnloadEvents || [];\r\n                        // When running in Web browsers try to send all telemetry if page is unloaded\r\n                        addPageUnloadEventListener(_handleUnloadEvents, excludePageUnloadEvents, _evtNamespace);\r\n                        addPageHideEventListener(_handleUnloadEvents, excludePageUnloadEvents, _evtNamespace);\r\n                        addPageShowEventListener(_handleShowEvents, coreConfig.disablePageShowEvents, _evtNamespace);\r\n                    }\r\n                    catch (e) {\r\n                        // resetting the initialized state because of failure\r\n                        _self.setInitialized(false);\r\n                        throw e;\r\n                    }\r\n                }, function () { return ({ coreConfig: coreConfig, core: core, extensions: extensions }); });\r\n            };\r\n            _self.processTelemetry = function (ev, itemCtx) {\r\n                setProcessTelemetryTimings(ev, _self.identifier);\r\n                itemCtx = _self._getTelCtx(itemCtx);\r\n                // Get the channel instance from the current request/instance\r\n                var channelConfig = itemCtx.getExtCfg(_self.identifier);\r\n                // DisableTelemetry was defined in the config provided during initialization\r\n                var disableTelemetry = !!_config.disableTelemetry;\r\n                if (channelConfig) {\r\n                    // DisableTelemetry is defined in the config for this request/instance\r\n                    disableTelemetry = disableTelemetry || !!channelConfig.disableTelemetry;\r\n                }\r\n                var event = ev;\r\n                if (!disableTelemetry && !_isTeardownCalled) {\r\n                    // Override iKey if provided in Post config if provided for during initialization\r\n                    if (_config[strOverrideInstrumentationKey]) {\r\n                        event.iKey = _config[strOverrideInstrumentationKey];\r\n                    }\r\n                    // Override iKey if provided in Post config if provided for this instance\r\n                    if (channelConfig && channelConfig[strOverrideInstrumentationKey]) {\r\n                        event.iKey = channelConfig[strOverrideInstrumentationKey];\r\n                    }\r\n                    _addEventToQueues(event, true);\r\n                    if (_isPageUnloadTriggered) {\r\n                        // Unload event has been received so we need to try and flush new events\r\n                        _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                    }\r\n                    else {\r\n                        _scheduleTimer();\r\n                    }\r\n                }\r\n                _self.processNext(event, itemCtx);\r\n            };\r\n            _self._doTeardown = function (unloadCtx, unloadState) {\r\n                _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                _isTeardownCalled = true;\r\n                _httpManager.teardown();\r\n                removePageUnloadEventListener(null, _evtNamespace);\r\n                removePageHideEventListener(null, _evtNamespace);\r\n                removePageShowEventListener(null, _evtNamespace);\r\n                // Just register to remove all events associated with this namespace\r\n                _initDefaults();\r\n            };\r\n            function _hookWParam(extendedCore) {\r\n                var existingGetWParamMethod = extendedCore.getWParam;\r\n                extendedCore.getWParam = function () {\r\n                    var wparam = 0;\r\n                    if (_config.ignoreMc1Ms0CookieProcessing) {\r\n                        wparam = wparam | 2;\r\n                    }\r\n                    return wparam | existingGetWParamMethod();\r\n                };\r\n            }\r\n            // Moving event handlers out from the initialize closure so that any local variables can be garbage collected\r\n            function _handleUnloadEvents(evt) {\r\n                var theEvt = evt || getWindow().event; // IE 8 does not pass the event\r\n                if (theEvt.type !== \"beforeunload\") {\r\n                    // Only set the unload trigger if not beforeunload event as beforeunload can be cancelled while the other events can't\r\n                    _isPageUnloadTriggered = true;\r\n                    _httpManager.setUnloading(_isPageUnloadTriggered);\r\n                }\r\n                _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n            }\r\n            function _handleShowEvents(evt) {\r\n                // Handle the page becoming visible again\r\n                _isPageUnloadTriggered = false;\r\n                _httpManager.setUnloading(_isPageUnloadTriggered);\r\n            }\r\n            function _addEventToQueues(event, append) {\r\n                // If send attempt field is undefined we should set it to 0.\r\n                if (!event.sendAttempt) {\r\n                    event.sendAttempt = 0;\r\n                }\r\n                // Add default latency\r\n                if (!event.latency) {\r\n                    event.latency = 1 /* EventLatencyValue.Normal */;\r\n                }\r\n                // Remove extra AI properties if present\r\n                if (event.ext && event.ext[STR_TRACE]) {\r\n                    delete (event.ext[STR_TRACE]);\r\n                }\r\n                if (event.ext && event.ext[STR_USER] && event.ext[STR_USER][\"id\"]) {\r\n                    delete (event.ext[STR_USER][\"id\"]);\r\n                }\r\n                // v8 performance optimization for iterating over the keys\r\n                if (_optimizeObject) {\r\n                    setProcessTelemetryTimings;\r\n                    event.ext = optimizeObject(event.ext);\r\n                    if (event.baseData) {\r\n                        event.baseData = optimizeObject(event.baseData);\r\n                    }\r\n                    if (event.data) {\r\n                        event.data = optimizeObject(event.data);\r\n                    }\r\n                }\r\n                if (event.sync) {\r\n                    // If the transmission is backed off then do not send synchronous events.\r\n                    // We will convert these events to Real time latency instead.\r\n                    if (_currentBackoffCount || _paused) {\r\n                        event.latency = 3 /* EventLatencyValue.RealTime */;\r\n                        event.sync = false;\r\n                    }\r\n                    else {\r\n                        // Log the event synchronously\r\n                        if (_httpManager) {\r\n                            // v8 performance optimization for iterating over the keys\r\n                            if (_optimizeObject) {\r\n                                event = optimizeObject(event);\r\n                            }\r\n                            _httpManager.sendSynchronousBatch(EventBatch.create(event.iKey, [event]), event.sync === true ? 1 /* EventSendType.Synchronous */ : event.sync, 3 /* SendRequestReason.SyncEvent */);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                var evtLatency = event.latency;\r\n                var queueSize = _queueSize;\r\n                var queueLimit = _queueSizeLimit;\r\n                if (evtLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                    queueSize = _immediateQueueSize;\r\n                    queueLimit = _immediateQueueSizeLimit;\r\n                }\r\n                var eventDropped = false;\r\n                // Only add the event if the queue isn't full or it's a direct event (which don't add to the queue sizes)\r\n                if (queueSize < queueLimit) {\r\n                    eventDropped = !_addEventToProperQueue(event, append);\r\n                }\r\n                else {\r\n                    var dropLatency = 1 /* EventLatencyValue.Normal */;\r\n                    var dropNumber = EventsDroppedAtOneTime;\r\n                    if (evtLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                        // Only drop other immediate events as they are not technically sharing the general queue\r\n                        dropLatency = 4 /* EventLatencyValue.Immediate */;\r\n                        dropNumber = 1;\r\n                    }\r\n                    // Drop old event from lower or equal latency\r\n                    eventDropped = true;\r\n                    if (_dropEventWithLatencyOrLess(event.iKey, event.latency, dropLatency, dropNumber)) {\r\n                        eventDropped = !_addEventToProperQueue(event, append);\r\n                    }\r\n                }\r\n                if (eventDropped) {\r\n                    // Can't drop events from current queues because the all the slots are taken by queues that are being flushed.\r\n                    _notifyEvents(strEventsDiscarded, [event], EventsDiscardedReason.QueueFull);\r\n                }\r\n            }\r\n            _self.setEventQueueLimits = function (eventLimit, autoFlushLimit) {\r\n                _queueSizeLimit = eventLimit > 0 ? eventLimit : 10000;\r\n                _autoFlushEventsLimit = autoFlushLimit > 0 ? autoFlushLimit : 0;\r\n                _setAutoLimits();\r\n                // We only do this check here as during normal event addition if the queue is > then events start getting dropped\r\n                var doFlush = _queueSize > eventLimit;\r\n                if (!doFlush && _autoFlushBatchLimit > 0) {\r\n                    // Check the auto flush max batch size\r\n                    for (var latency = 1 /* EventLatencyValue.Normal */; !doFlush && latency <= 3 /* EventLatencyValue.RealTime */; latency++) {\r\n                        var batchQueue = _batchQueues[latency];\r\n                        if (batchQueue && batchQueue.batches) {\r\n                            arrForEach(batchQueue.batches, function (theBatch) {\r\n                                if (theBatch && theBatch.count() >= _autoFlushBatchLimit) {\r\n                                    // If any 1 batch is > than the limit then trigger an auto flush\r\n                                    doFlush = true;\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                _performAutoFlush(true, doFlush);\r\n            };\r\n            _self.pause = function () {\r\n                _clearScheduledTimer();\r\n                _paused = true;\r\n                _httpManager.pause();\r\n            };\r\n            _self.resume = function () {\r\n                _paused = false;\r\n                _httpManager.resume();\r\n                _scheduleTimer();\r\n            };\r\n            _self.addResponseHandler = function (responseHandler) {\r\n                _httpManager._responseHandlers.push(responseHandler);\r\n            };\r\n            _self._loadTransmitProfiles = function (profiles) {\r\n                _resetTransmitProfiles();\r\n                objForEachKey(profiles, function (profileName, profileValue) {\r\n                    var profLen = profileValue.length;\r\n                    if (profLen >= 2) {\r\n                        var directValue = (profLen > 2 ? profileValue[2] : 0);\r\n                        profileValue.splice(0, profLen - 2);\r\n                        // Make sure if a higher latency is set to not send then don't send lower latency\r\n                        if (profileValue[1] < 0) {\r\n                            profileValue[0] = -1;\r\n                        }\r\n                        // Make sure each latency is multiple of the latency higher then it. If not a multiple\r\n                        // we round up so that it becomes a multiple.\r\n                        if (profileValue[1] > 0 && profileValue[0] > 0) {\r\n                            var timerMultiplier = profileValue[0] / profileValue[1];\r\n                            profileValue[0] = Math.ceil(timerMultiplier) * profileValue[1];\r\n                        }\r\n                        // Add back the direct profile timeout\r\n                        if (directValue >= 0 && profileValue[1] >= 0 && directValue > profileValue[1]) {\r\n                            // Make sure if it's not disabled (< 0) then make sure it's not larger than RealTime\r\n                            directValue = profileValue[1];\r\n                        }\r\n                        profileValue.push(directValue);\r\n                        _profiles[profileName] = profileValue;\r\n                    }\r\n                });\r\n            };\r\n            _self.flush = function (async, callback, sendReason) {\r\n                if (async === void 0) { async = true; }\r\n                if (!_paused) {\r\n                    sendReason = sendReason || 1 /* SendRequestReason.ManualFlush */;\r\n                    if (async) {\r\n                        if (_flushCallbackTimerId == null) {\r\n                            // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                            _clearScheduledTimer();\r\n                            // Move all queued events to the HttpManager so that we don't discard new events (Auto flush scenario)\r\n                            _queueBatches(1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, sendReason);\r\n                            _flushCallbackTimerId = _createTimer(function () {\r\n                                _flushCallbackTimerId = null;\r\n                                _flushImpl(callback, sendReason);\r\n                            }, 0);\r\n                        }\r\n                        else {\r\n                            // Even if null (no callback) this will ensure after the flushImpl finishes waiting\r\n                            // for a completely idle connection it will attempt to re-flush any queued events on the next cycle\r\n                            _flushCallbackQueue.push(callback);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                        var cleared = _clearScheduledTimer();\r\n                        // Now cause all queued events to be sent synchronously\r\n                        _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, 1 /* EventSendType.Synchronous */, sendReason);\r\n                        if (callback !== null && callback !== undefined) {\r\n                            callback();\r\n                        }\r\n                        if (cleared) {\r\n                            // restart the normal event timer if it was cleared\r\n                            _scheduleTimer();\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            _self.setMsaAuthTicket = function (ticket) {\r\n                _httpManager.addHeader(STR_MSA_DEVICE_TICKET, ticket);\r\n            };\r\n            _self.hasEvents = _hasEvents;\r\n            _self._setTransmitProfile = function (profileName) {\r\n                if (_currentProfile !== profileName && _profiles[profileName] !== undefined) {\r\n                    _clearScheduledTimer();\r\n                    _currentProfile = profileName;\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            /**\r\n             * Batch and send events currently in the queue for the given latency.\r\n             * @param latency - Latency for which to send events.\r\n             */\r\n            function _sendEventsForLatencyAndAbove(latency, sendType, sendReason) {\r\n                var queued = _queueBatches(latency, sendType, sendReason);\r\n                // Always trigger the request as while the post channel may not have queued additional events, the httpManager may already have waiting events\r\n                _httpManager.sendQueuedRequests(sendType, sendReason);\r\n                return queued;\r\n            }\r\n            function _hasEvents() {\r\n                return _queueSize > 0;\r\n            }\r\n            /**\r\n             * Try to schedule the timer after which events will be sent. If there are\r\n             * no events to be sent, or there is already a timer scheduled, or the\r\n             * http manager doesn't have any idle connections this method is no-op.\r\n             */\r\n            function _scheduleTimer() {\r\n                // If we had previously attempted to send requests, but the http manager didn't have any idle connections then the requests where delayed\r\n                // so try and requeue then again now\r\n                if (_delayedBatchSendLatency >= 0 && _queueBatches(_delayedBatchSendLatency, 0 /* EventSendType.Batched */, _delayedBatchReason)) {\r\n                    _httpManager.sendQueuedRequests(0 /* EventSendType.Batched */, _delayedBatchReason);\r\n                }\r\n                if (_immediateQueueSize > 0 && !_immediateTimerId && !_paused) {\r\n                    // During initialization _profiles enforce that the direct [2] is less than real time [1] timer value\r\n                    // If the immediateTimeout is disabled the immediate events will be sent with Real Time events\r\n                    var immediateTimeOut = _profiles[_currentProfile][2];\r\n                    if (immediateTimeOut >= 0) {\r\n                        _immediateTimerId = _createTimer(function () {\r\n                            _immediateTimerId = null;\r\n                            // Only try to send direct events\r\n                            _sendEventsForLatencyAndAbove(4 /* EventLatencyValue.Immediate */, 0 /* EventSendType.Batched */, 1 /* SendRequestReason.NormalSchedule */);\r\n                            _scheduleTimer();\r\n                        }, immediateTimeOut);\r\n                    }\r\n                }\r\n                // During initialization the _profiles enforce that the normal [0] is a multiple of the real time [1] timer value\r\n                var timeOut = _profiles[_currentProfile][1];\r\n                if (!_scheduledTimerId && !_flushCallbackTimerId && timeOut >= 0 && !_paused) {\r\n                    if (_hasEvents()) {\r\n                        _scheduledTimerId = _createTimer(function () {\r\n                            _scheduledTimerId = null;\r\n                            _sendEventsForLatencyAndAbove(_timerCount === 0 ? 3 /* EventLatencyValue.RealTime */ : 1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, 1 /* SendRequestReason.NormalSchedule */);\r\n                            // Increment the count for next cycle\r\n                            _timerCount++;\r\n                            _timerCount %= 2;\r\n                            _scheduleTimer();\r\n                        }, timeOut);\r\n                    }\r\n                    else {\r\n                        _timerCount = 0;\r\n                    }\r\n                }\r\n            }\r\n            _self._backOffTransmission = function () {\r\n                if (_currentBackoffCount < MaxBackoffCount) {\r\n                    _currentBackoffCount++;\r\n                    _clearScheduledTimer();\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            _self._clearBackOff = function () {\r\n                if (_currentBackoffCount) {\r\n                    _currentBackoffCount = 0;\r\n                    _clearScheduledTimer();\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            function _initDefaults() {\r\n                _config = null;\r\n                _isTeardownCalled = false;\r\n                _flushCallbackQueue = [];\r\n                _flushCallbackTimerId = null;\r\n                _paused = false;\r\n                _immediateQueueSize = 0;\r\n                _immediateQueueSizeLimit = 500;\r\n                _queueSize = 0;\r\n                _queueSizeLimit = 10000;\r\n                _profiles = {};\r\n                _currentProfile = RT_PROFILE;\r\n                _scheduledTimerId = null;\r\n                _immediateTimerId = null;\r\n                _currentBackoffCount = 0;\r\n                _timerCount = 0;\r\n                _xhrOverride = null;\r\n                _batchQueues = {};\r\n                _autoFlushEventsLimit = undefined;\r\n                // either MaxBatchSize * (1+ Max Connections) or _queueLimit / 6 (where 3 latency Queues [normal, realtime, cost deferred] * 2 [allow half full -- allow for retry])\r\n                _autoFlushBatchLimit = 0;\r\n                _delayedBatchSendLatency = -1;\r\n                _delayedBatchReason = null;\r\n                _optimizeObject = true;\r\n                _isPageUnloadTriggered = false;\r\n                _maxEventSendAttempts = MaxSendAttempts;\r\n                _maxUnloadEventSendAttempts = MaxSyncUnloadSendAttempts;\r\n                _evtNamespace = null;\r\n                _timeoutWrapper = createTimeoutWrapper();\r\n                _httpManager = new HttpManager(MaxNumberEventPerBatch, MaxConnections, MaxRequestRetriesBeforeBackoff, {\r\n                    requeue: _requeueEvents,\r\n                    send: _sendingEvent,\r\n                    sent: _eventsSentEvent,\r\n                    drop: _eventsDropped,\r\n                    rspFail: _eventsResponseFail,\r\n                    oth: _otherEvent\r\n                }, _timeoutWrapper);\r\n                _initializeProfiles();\r\n                _clearQueues();\r\n                _setAutoLimits();\r\n            }\r\n            function _createTimer(theTimerFunc, timeOut) {\r\n                // If the transmission is backed off make the timer at least 1 sec to allow for back off.\r\n                if (timeOut === 0 && _currentBackoffCount) {\r\n                    timeOut = 1;\r\n                }\r\n                var timerMultiplier = 1000;\r\n                if (_currentBackoffCount) {\r\n                    timerMultiplier = retryPolicyGetMillisToBackoffForRetry(_currentBackoffCount - 1);\r\n                }\r\n                return _timeoutWrapper.set(theTimerFunc, timeOut * timerMultiplier);\r\n            }\r\n            function _clearScheduledTimer() {\r\n                if (_scheduledTimerId !== null) {\r\n                    _timeoutWrapper.clear(_scheduledTimerId);\r\n                    _scheduledTimerId = null;\r\n                    _timerCount = 0;\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            // Try to send all queued events using beacons if available\r\n            function _releaseAllQueues(sendType, sendReason) {\r\n                _clearScheduledTimer();\r\n                // Cancel all flush callbacks\r\n                if (_flushCallbackTimerId) {\r\n                    _timeoutWrapper.clear(_flushCallbackTimerId);\r\n                    _flushCallbackTimerId = null;\r\n                }\r\n                if (!_paused) {\r\n                    // Queue all the remaining requests to be sent. The requests will be sent using HTML5 Beacons if they are available.\r\n                    _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, sendType, sendReason);\r\n                }\r\n            }\r\n            /**\r\n             * Add empty queues for all latencies in the inbound queues map. This is called\r\n             * when Transmission Manager is being flushed. This ensures that new events added\r\n             * after flush are stored separately till we flush the current events.\r\n             */\r\n            function _clearQueues() {\r\n                _batchQueues[4 /* EventLatencyValue.Immediate */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[3 /* EventLatencyValue.RealTime */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[2 /* EventLatencyValue.CostDeferred */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[1 /* EventLatencyValue.Normal */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n            }\r\n            function _getEventBatch(iKey, latency, create) {\r\n                var batchQueue = _batchQueues[latency];\r\n                if (!batchQueue) {\r\n                    latency = 1 /* EventLatencyValue.Normal */;\r\n                    batchQueue = _batchQueues[latency];\r\n                }\r\n                var eventBatch = batchQueue.iKeyMap[iKey];\r\n                if (!eventBatch && create) {\r\n                    eventBatch = EventBatch.create(iKey);\r\n                    batchQueue.batches.push(eventBatch);\r\n                    batchQueue.iKeyMap[iKey] = eventBatch;\r\n                }\r\n                return eventBatch;\r\n            }\r\n            function _performAutoFlush(isAsync, doFlush) {\r\n                // Only perform the auto flush check if the httpManager has an idle connection and we are not in a backoff situation\r\n                if (_httpManager.canSendRequest() && !_currentBackoffCount) {\r\n                    if (_autoFlushEventsLimit > 0 && _queueSize > _autoFlushEventsLimit) {\r\n                        // Force flushing\r\n                        doFlush = true;\r\n                    }\r\n                    if (doFlush && _flushCallbackTimerId == null) {\r\n                        // Auto flush the queue\r\n                        _self.flush(isAsync, null, 20 /* SendRequestReason.MaxQueuedEvents */);\r\n                    }\r\n                }\r\n            }\r\n            function _addEventToProperQueue(event, append) {\r\n                // v8 performance optimization for iterating over the keys\r\n                if (_optimizeObject) {\r\n                    event = optimizeObject(event);\r\n                }\r\n                var latency = event.latency;\r\n                var eventBatch = _getEventBatch(event.iKey, latency, true);\r\n                if (eventBatch.addEvent(event)) {\r\n                    if (latency !== 4 /* EventLatencyValue.Immediate */) {\r\n                        _queueSize++;\r\n                        // Check for auto flushing based on total events in the queue, but not for requeued or retry events\r\n                        if (append && event.sendAttempt === 0) {\r\n                            // Force the flushing of the batch if the batch (specific iKey / latency combination) reaches it's auto flush limit\r\n                            _performAutoFlush(!event.sync, _autoFlushBatchLimit > 0 && eventBatch.count() >= _autoFlushBatchLimit);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Direct events don't need auto flushing as they are scheduled (by default) for immediate delivery\r\n                        _immediateQueueSize++;\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            function _dropEventWithLatencyOrLess(iKey, latency, currentLatency, dropNumber) {\r\n                while (currentLatency <= latency) {\r\n                    var eventBatch = _getEventBatch(iKey, latency, true);\r\n                    if (eventBatch && eventBatch.count() > 0) {\r\n                        // Dropped oldest events from lowest possible latency\r\n                        var droppedEvents = eventBatch.split(0, dropNumber);\r\n                        var droppedCount = droppedEvents.count();\r\n                        if (droppedCount > 0) {\r\n                            if (currentLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                                _immediateQueueSize -= droppedCount;\r\n                            }\r\n                            else {\r\n                                _queueSize -= droppedCount;\r\n                            }\r\n                            _notifyBatchEvents(strEventsDiscarded, [droppedEvents], EventsDiscardedReason.QueueFull);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    currentLatency++;\r\n                }\r\n                // Unable to drop any events -- lets just make sure the queue counts are correct to avoid exhaustion\r\n                _resetQueueCounts();\r\n                return false;\r\n            }\r\n            /**\r\n             * Internal helper to reset the queue counts, used as a backstop to avoid future queue exhaustion errors\r\n             * that might occur because of counting issues.\r\n             */\r\n            function _resetQueueCounts() {\r\n                var immediateQueue = 0;\r\n                var normalQueue = 0;\r\n                var _loop_1 = function (latency) {\r\n                    var batchQueue = _batchQueues[latency];\r\n                    if (batchQueue && batchQueue.batches) {\r\n                        arrForEach(batchQueue.batches, function (theBatch) {\r\n                            if (latency === 4 /* EventLatencyValue.Immediate */) {\r\n                                immediateQueue += theBatch.count();\r\n                            }\r\n                            else {\r\n                                normalQueue += theBatch.count();\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                for (var latency = 1 /* EventLatencyValue.Normal */; latency <= 4 /* EventLatencyValue.Immediate */; latency++) {\r\n                    _loop_1(latency);\r\n                }\r\n                _queueSize = normalQueue;\r\n                _immediateQueueSize = immediateQueue;\r\n            }\r\n            function _queueBatches(latency, sendType, sendReason) {\r\n                var eventsQueued = false;\r\n                var isAsync = sendType === 0 /* EventSendType.Batched */;\r\n                // Only queue batches (to the HttpManager) if this is a sync request or the httpManager has an idle connection\r\n                // Thus keeping the events within the PostChannel until the HttpManager has a connection available\r\n                // This is so we can drop \"old\" events if the queue is getting full because we can't successfully send events\r\n                if (!isAsync || _httpManager.canSendRequest()) {\r\n                    doPerf(_self.core, function () { return \"PostChannel._queueBatches\"; }, function () {\r\n                        var droppedEvents = [];\r\n                        var latencyToProcess = 4 /* EventLatencyValue.Immediate */;\r\n                        while (latencyToProcess >= latency) {\r\n                            var batchQueue = _batchQueues[latencyToProcess];\r\n                            if (batchQueue && batchQueue.batches && batchQueue.batches.length > 0) {\r\n                                arrForEach(batchQueue.batches, function (theBatch) {\r\n                                    // Add the batch to the http manager to send the requests\r\n                                    if (!_httpManager.addBatch(theBatch)) {\r\n                                        // The events from this iKey are being dropped (killed)\r\n                                        droppedEvents = droppedEvents.concat(theBatch.events());\r\n                                    }\r\n                                    else {\r\n                                        eventsQueued = eventsQueued || (theBatch && theBatch.count() > 0);\r\n                                    }\r\n                                    if (latencyToProcess === 4 /* EventLatencyValue.Immediate */) {\r\n                                        _immediateQueueSize -= theBatch.count();\r\n                                    }\r\n                                    else {\r\n                                        _queueSize -= theBatch.count();\r\n                                    }\r\n                                });\r\n                                // Remove all batches from this Queue\r\n                                batchQueue.batches = [];\r\n                                batchQueue.iKeyMap = {};\r\n                            }\r\n                            latencyToProcess--;\r\n                        }\r\n                        if (droppedEvents.length > 0) {\r\n                            _notifyEvents(strEventsDiscarded, droppedEvents, EventsDiscardedReason.KillSwitch);\r\n                        }\r\n                        if (eventsQueued && _delayedBatchSendLatency >= latency) {\r\n                            // We have queued events at the same level as the delayed values so clear the setting\r\n                            _delayedBatchSendLatency = -1;\r\n                            _delayedBatchReason = 0 /* SendRequestReason.Undefined */;\r\n                        }\r\n                    }, function () { return ({ latency: latency, sendType: sendType, sendReason: sendReason }); }, !isAsync);\r\n                }\r\n                else {\r\n                    // remember the min latency so that we can re-trigger later\r\n                    _delayedBatchSendLatency = _delayedBatchSendLatency >= 0 ? Math.min(_delayedBatchSendLatency, latency) : latency;\r\n                    _delayedBatchReason = Math.max(_delayedBatchReason, sendReason);\r\n                }\r\n                return eventsQueued;\r\n            }\r\n            /**\r\n             * This is the callback method is called as part of the manual flushing process.\r\n             * @param callback\r\n             * @param sendReason\r\n             */\r\n            function _flushImpl(callback, sendReason) {\r\n                // Add any additional queued events and cause all queued events to be sent asynchronously\r\n                _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, sendReason);\r\n                // All events (should) have been queue -- lets just make sure the queue counts are correct to avoid queue exhaustion (previous bug #9685112)\r\n                _resetQueueCounts();\r\n                _waitForIdleManager(function () {\r\n                    // Only called AFTER the httpManager does not have any outstanding requests\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                    if (_flushCallbackQueue.length > 0) {\r\n                        _flushCallbackTimerId = _createTimer(function () {\r\n                            _flushCallbackTimerId = null;\r\n                            _flushImpl(_flushCallbackQueue.shift(), sendReason);\r\n                        }, 0);\r\n                    }\r\n                    else {\r\n                        // No more flush requests\r\n                        _flushCallbackTimerId = null;\r\n                        // Restart the normal timer schedule\r\n                        _scheduleTimer();\r\n                    }\r\n                });\r\n            }\r\n            function _waitForIdleManager(callback) {\r\n                if (_httpManager.isCompletelyIdle()) {\r\n                    callback();\r\n                }\r\n                else {\r\n                    _flushCallbackTimerId = _createTimer(function () {\r\n                        _flushCallbackTimerId = null;\r\n                        _waitForIdleManager(callback);\r\n                    }, FlushCheckTimer);\r\n                }\r\n            }\r\n            /**\r\n             * Resets the transmit profiles to the default profiles of Real Time, Near Real Time\r\n             * and Best Effort. This removes all the custom profiles that were loaded.\r\n             */\r\n            function _resetTransmitProfiles() {\r\n                _clearScheduledTimer();\r\n                _initializeProfiles();\r\n                _currentProfile = RT_PROFILE;\r\n                _scheduleTimer();\r\n            }\r\n            function _initializeProfiles() {\r\n                _profiles = {};\r\n                _profiles[RT_PROFILE] = [2, 1, 0];\r\n                _profiles[NRT_PROFILE] = [6, 3, 0];\r\n                _profiles[BE_PROFILE] = [18, 9, 0];\r\n            }\r\n            /**\r\n             * The notification handler for requeue events\r\n             * @ignore\r\n             */\r\n            function _requeueEvents(batches, reason) {\r\n                var droppedEvents = [];\r\n                var maxSendAttempts = _maxEventSendAttempts;\r\n                if (_isPageUnloadTriggered) {\r\n                    // If a page unlaod has been triggered reduce the number of times we try to \"retry\"\r\n                    maxSendAttempts = _maxUnloadEventSendAttempts;\r\n                }\r\n                arrForEach(batches, function (theBatch) {\r\n                    if (theBatch && theBatch.count() > 0) {\r\n                        arrForEach(theBatch.events(), function (theEvent) {\r\n                            if (theEvent) {\r\n                                // Check if the request being added back is for a sync event in which case mark it no longer a sync event\r\n                                if (theEvent.sync) {\r\n                                    theEvent.latency = 4 /* EventLatencyValue.Immediate */;\r\n                                    theEvent.sync = false;\r\n                                }\r\n                                if (theEvent.sendAttempt < maxSendAttempts) {\r\n                                    // Reset the event timings\r\n                                    setProcessTelemetryTimings(theEvent, _self.identifier);\r\n                                    _addEventToQueues(theEvent, false);\r\n                                }\r\n                                else {\r\n                                    droppedEvents.push(theEvent);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n                if (droppedEvents.length > 0) {\r\n                    _notifyEvents(strEventsDiscarded, droppedEvents, EventsDiscardedReason.NonRetryableStatus);\r\n                }\r\n                if (_isPageUnloadTriggered) {\r\n                    // Unload event has been received so we need to try and flush new events\r\n                    _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                }\r\n            }\r\n            function _callNotification(evtName, theArgs) {\r\n                var manager = (_self._notificationManager || {});\r\n                var notifyFunc = manager[evtName];\r\n                if (notifyFunc) {\r\n                    try {\r\n                        notifyFunc.apply(manager, theArgs);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self.diagLog(), 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, evtName + \" notification failed: \" + e);\r\n                    }\r\n                }\r\n            }\r\n            function _notifyEvents(evtName, theEvents) {\r\n                var extraArgs = [];\r\n                for (var _i = 2; _i < arguments.length; _i++) {\r\n                    extraArgs[_i - 2] = arguments[_i];\r\n                }\r\n                if (theEvents && theEvents.length > 0) {\r\n                    _callNotification(evtName, [theEvents].concat(extraArgs));\r\n                }\r\n            }\r\n            function _notifyBatchEvents(evtName, batches) {\r\n                var extraArgs = [];\r\n                for (var _i = 2; _i < arguments.length; _i++) {\r\n                    extraArgs[_i - 2] = arguments[_i];\r\n                }\r\n                if (batches && batches.length > 0) {\r\n                    arrForEach(batches, function (theBatch) {\r\n                        if (theBatch && theBatch.count() > 0) {\r\n                            _callNotification(evtName, [theBatch.events()].concat(extraArgs));\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            /**\r\n             * The notification handler for when batches are about to be sent\r\n             * @ignore\r\n             */\r\n            function _sendingEvent(batches, reason, isSyncRequest) {\r\n                if (batches && batches.length > 0) {\r\n                    _callNotification(\"eventsSendRequest\", [(reason >= 1000 /* EventBatchNotificationReason.SendingUndefined */ && reason <= 1999 /* EventBatchNotificationReason.SendingEventMax */ ?\r\n                            reason - 1000 /* EventBatchNotificationReason.SendingUndefined */ :\r\n                            0 /* SendRequestReason.Undefined */), isSyncRequest !== true]);\r\n                }\r\n            }\r\n            /**\r\n             * This event represents that a batch of events have been successfully sent and a response received\r\n             * @param batches The notification handler for when the batches have been successfully sent\r\n             * @param reason For this event the reason will always be EventBatchNotificationReason.Complete\r\n             */\r\n            function _eventsSentEvent(batches, reason) {\r\n                _notifyBatchEvents(\"eventsSent\", batches, reason);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _eventsDropped(batches, reason) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, (reason >= 8000 /* EventBatchNotificationReason.EventsDropped */ && reason <= 8999 /* EventBatchNotificationReason.EventsDroppedMax */ ?\r\n                    reason - 8000 /* EventBatchNotificationReason.EventsDropped */ :\r\n                    EventsDiscardedReason.Unknown));\r\n            }\r\n            function _eventsResponseFail(batches) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, EventsDiscardedReason.NonRetryableStatus);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _otherEvent(batches, reason) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, EventsDiscardedReason.Unknown);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _setAutoLimits() {\r\n                if (!_config || !_config.disableAutoBatchFlushLimit) {\r\n                    _autoFlushBatchLimit = Math.max(MaxNumberEventPerBatch * (MaxConnections + 1), _queueSizeLimit / 6);\r\n                }\r\n                else {\r\n                    _autoFlushBatchLimit = 0;\r\n                }\r\n            }\r\n            // Provided for backward compatibility they are not \"expected\" to be in current use but they are public\r\n            objDefineAccessors(_self, \"_setTimeoutOverride\", function () { return _timeoutWrapper.set; }, function (value) {\r\n                // Recreate the timeout wrapper\r\n                _timeoutWrapper = createTimeoutWrapper(value, _timeoutWrapper.clear);\r\n            });\r\n            objDefineAccessors(_self, \"_clearTimeoutOverride\", function () { return _timeoutWrapper.clear; }, function (value) {\r\n                // Recreate the timeout wrapper\r\n                _timeoutWrapper = createTimeoutWrapper(_timeoutWrapper.set, value);\r\n            });\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for PostChannel.prototype.initialize.\r\n// Removed Stub for PostChannel.prototype.processTelemetry.\r\n// Removed Stub for PostChannel.prototype.setEventQueueLimits.\r\n// Removed Stub for PostChannel.prototype.pause.\r\n// Removed Stub for PostChannel.prototype.resume.\r\n// Removed Stub for PostChannel.prototype.addResponseHandler.\r\n// Removed Stub for PostChannel.prototype.flush.\r\n// Removed Stub for PostChannel.prototype.setMsaAuthTicket.\r\n// Removed Stub for PostChannel.prototype.hasEvents.\r\n// Removed Stub for PostChannel.prototype._loadTransmitProfiles.\r\n// Removed Stub for PostChannel.prototype._setTransmitProfile.\r\n// Removed Stub for PostChannel.prototype._backOffTransmission.\r\n// Removed Stub for PostChannel.prototype._clearBackOff.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    PostChannel.__ieDyn=1;\n\n    return PostChannel;\r\n}(BaseTelemetryPlugin));\r\nexport default PostChannel;\r\n//# sourceMappingURL=PostChannel.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { objForEachKey, deepFreeze } from \"../JavaScriptSDK/HelperFuncs\";\r\n/**\r\n * Create an enum style object which has both the key => value and value => key mappings\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport function createEnumStyle(values) {\r\n    var enumClass = {};\r\n    objForEachKey(values, function (field, value) {\r\n        enumClass[field] = value;\r\n        enumClass[value] = field;\r\n    });\r\n    return deepFreeze(enumClass);\r\n}\r\n/**\r\n * Create a 2 index map that maps an enum's key as both the key and value, X[\"key\"] => \"key\" and X[0] => \"keyof 0\".\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport function createEnumMap(values) {\r\n    var mapClass = {};\r\n    objForEachKey(values, function (field, value) {\r\n        mapClass[field] = field;\r\n        mapClass[value] = field;\r\n    });\r\n    return deepFreeze(mapClass);\r\n}\r\n/**\r\n * Create a 2 index map that maps an enum's key and value to the defined map value, X[\"key\"] => mapValue and X[0] => mapValue.\r\n * Generic values\r\n * - E = the const enum type (typeof eRequestHeaders);\r\n * - V = Identifies the valid values for the keys, this should include both the enum numeric and string key of the type. The\r\n * resulting \"Value\" of each entry identifies the valid values withing the assignments.\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport function createValueMap(values) {\r\n    var mapClass = {};\r\n    objForEachKey(values, function (field, value) {\r\n        mapClass[field] = value[1];\r\n        mapClass[value[0]] = value[1];\r\n    });\r\n    return deepFreeze(mapClass);\r\n}\r\n//# sourceMappingURL=EnumHelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnumStyle } from \"../JavaScriptSDK.Enums/EnumHelperFuncs\";\r\n/**\r\n * The EventsDiscardedReason enumeration contains a set of values that specify the reason for discarding an event.\r\n */\r\nexport var EventsDiscardedReason = createEnumStyle({\r\n    /**\r\n     * Unknown.\r\n     */\r\n    Unknown: 0 /* eEventsDiscardedReason.Unknown */,\r\n    /**\r\n     * Status set to non-retryable.\r\n     */\r\n    NonRetryableStatus: 1 /* eEventsDiscardedReason.NonRetryableStatus */,\r\n    /**\r\n     * The event is invalid.\r\n     */\r\n    InvalidEvent: 2 /* eEventsDiscardedReason.InvalidEvent */,\r\n    /**\r\n     * The size of the event is too large.\r\n     */\r\n    SizeLimitExceeded: 3 /* eEventsDiscardedReason.SizeLimitExceeded */,\r\n    /**\r\n     * The server is not accepting events from this instrumentation key.\r\n     */\r\n    KillSwitch: 4 /* eEventsDiscardedReason.KillSwitch */,\r\n    /**\r\n     * The event queue is full.\r\n     */\r\n    QueueFull: 5 /* eEventsDiscardedReason.QueueFull */\r\n});\r\n//# sourceMappingURL=EventsDiscardedReason.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_CREATE_NEW, _DYN_DIAG_LOG, _DYN_GET_NEXT, _DYN_GET_PROCESS_TEL_CONT0, _DYN_INITIALIZE, _DYN_IS_ASYNC, _DYN_IS_INITIALIZED, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_UPDATE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { arrForEach, isArray, isFunction, isNullOrUndefined, proxyFunctionAs, setValue } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_EXTENSION_CONFIG, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { createProcessTelemetryContext, createProcessTelemetryUnloadContext, createProcessTelemetryUpdateContext } from \"./ProcessTelemetryContext\";\r\nimport { createUnloadHandlerContainer } from \"./UnloadHandlerContainer\";\r\nvar strGetPlugin = \"getPlugin\";\r\n/**\r\n * BaseTelemetryPlugin provides a basic implementation of the ITelemetryPlugin interface so that plugins\r\n * can avoid implementation the same set of boiler plate code as well as provide a base\r\n * implementation so that new default implementations can be added without breaking all plugins.\r\n */\r\nvar BaseTelemetryPlugin = /** @class */ (function () {\r\n    function BaseTelemetryPlugin() {\r\n        var _self = this; // Setting _self here as it's used outside of the dynamicProto as well\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _isinitialized;\r\n        var _rootCtx; // Used as the root context, holding the current config and initialized core\r\n        var _nextPlugin; // Used for backward compatibility where plugins don't call the main pipeline\r\n        var _unloadHandlerContainer;\r\n        var _hooks;\r\n        _initDefaults();\r\n        dynamicProto(BaseTelemetryPlugin, _self, function (_self) {\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, core, extensions, pluginChain) {\r\n                _setDefaults(config, core, pluginChain);\r\n                _isinitialized = true;\r\n            };\r\n            _self[_DYN_TEARDOWN /* @min:%2eteardown */] = function (unloadCtx, unloadState) {\r\n                var _a;\r\n                // If this plugin has already been torn down (not operational) or is not initialized (core is not set)\r\n                // or the core being used for unload was not the same core used for initialization.\r\n                var core = _self[STR_CORE /* @min:%2ecore */];\r\n                if (!core || (unloadCtx && core !== unloadCtx[STR_CORE /* @min:%2ecore */]())) {\r\n                    // Do Nothing as either the plugin is not initialized or was not initialized by the current core\r\n                    return;\r\n                }\r\n                var result;\r\n                var unloadDone = false;\r\n                var theUnloadCtx = unloadCtx || createProcessTelemetryUnloadContext(null, core, _nextPlugin && _nextPlugin[strGetPlugin] ? _nextPlugin[strGetPlugin]() : _nextPlugin);\r\n                var theUnloadState = unloadState || (_a = {\r\n                        reason: 0 /* TelemetryUnloadReason.ManualTeardown */\r\n                    },\r\n                    _a[_DYN_IS_ASYNC /* @min:isAsync */] = false,\r\n                    _a);\r\n                function _unloadCallback() {\r\n                    if (!unloadDone) {\r\n                        unloadDone = true;\r\n                        _unloadHandlerContainer.run(theUnloadCtx, unloadState);\r\n                        var oldHooks = _hooks;\r\n                        _hooks = [];\r\n                        // Remove all instrumentation hooks\r\n                        arrForEach(oldHooks, function (fn) {\r\n                            fn.rm();\r\n                        });\r\n                        if (result === true) {\r\n                            theUnloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUnloadState);\r\n                        }\r\n                        _initDefaults();\r\n                    }\r\n                }\r\n                if (!_self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] || _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */](theUnloadCtx, theUnloadState, _unloadCallback) !== true) {\r\n                    _unloadCallback();\r\n                }\r\n                else {\r\n                    // Tell the caller that we will be calling processNext()\r\n                    result = true;\r\n                }\r\n                return result;\r\n            };\r\n            _self[_DYN_UPDATE /* @min:%2eupdate */] = function (updateCtx, updateState) {\r\n                // If this plugin has already been torn down (not operational) or is not initialized (core is not set)\r\n                // or the core being used for unload was not the same core used for initialization.\r\n                var core = _self[STR_CORE /* @min:%2ecore */];\r\n                if (!core || (updateCtx && core !== updateCtx[STR_CORE /* @min:%2ecore */]())) {\r\n                    // Do Nothing\r\n                    return;\r\n                }\r\n                var result;\r\n                var updateDone = false;\r\n                var theUpdateCtx = updateCtx || createProcessTelemetryUpdateContext(null, core, _nextPlugin && _nextPlugin[strGetPlugin] ? _nextPlugin[strGetPlugin]() : _nextPlugin);\r\n                var theUpdateState = updateState || {\r\n                    reason: 0 /* TelemetryUpdateReason.Unknown */\r\n                };\r\n                function _updateCallback() {\r\n                    if (!updateDone) {\r\n                        updateDone = true;\r\n                        _setDefaults(theUpdateCtx.getCfg(), theUpdateCtx.core(), theUpdateCtx[_DYN_GET_NEXT /* @min:%2egetNext */]());\r\n                    }\r\n                }\r\n                if (!_self._doUpdate || _self._doUpdate(theUpdateCtx, theUpdateState, _updateCallback) !== true) {\r\n                    _updateCallback();\r\n                }\r\n                else {\r\n                    result = true;\r\n                }\r\n                return result;\r\n            };\r\n            _self._addHook = function (hooks) {\r\n                if (hooks) {\r\n                    if (isArray(hooks)) {\r\n                        _hooks = _hooks.concat(hooks);\r\n                    }\r\n                    else {\r\n                        _hooks[_DYN_PUSH /* @min:%2epush */](hooks);\r\n                    }\r\n                }\r\n            };\r\n            proxyFunctionAs(_self, \"_addUnloadCb\", function () { return _unloadHandlerContainer; }, \"add\");\r\n        });\r\n        // These are added after the dynamicProto so that are not moved to the prototype\r\n        _self[_DYN_DIAG_LOG /* @min:%2ediagLog */] = function (itemCtx) {\r\n            return _getTelCtx(itemCtx)[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n        };\r\n        _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = function () {\r\n            return _isinitialized;\r\n        };\r\n        _self.setInitialized = function (isInitialized) {\r\n            _isinitialized = isInitialized;\r\n        };\r\n        // _self.getNextPlugin = () => DO NOT IMPLEMENT\r\n        // Sub-classes of this base class *should* not be relying on this value and instead\r\n        // should use processNext() function. If you require access to the plugin use the\r\n        // IProcessTelemetryContext.getNext().getPlugin() while in the pipeline, Note getNext() may return null.\r\n        _self[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */] = function (next) {\r\n            _nextPlugin = next;\r\n        };\r\n        _self[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = function (env, itemCtx) {\r\n            if (itemCtx) {\r\n                // Normal core execution sequence\r\n                itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](env);\r\n            }\r\n            else if (_nextPlugin && isFunction(_nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Looks like backward compatibility or out of band processing. And as it looks\r\n                // like a ITelemetryPlugin or ITelemetryPluginChain, just call processTelemetry\r\n                _nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, null);\r\n            }\r\n        };\r\n        _self._getTelCtx = _getTelCtx;\r\n        function _getTelCtx(currentCtx) {\r\n            if (currentCtx === void 0) { currentCtx = null; }\r\n            var itemCtx = currentCtx;\r\n            if (!itemCtx) {\r\n                var rootCtx = _rootCtx || createProcessTelemetryContext(null, {}, _self[STR_CORE /* @min:%2ecore */]);\r\n                // tslint:disable-next-line: prefer-conditional-expression\r\n                if (_nextPlugin && _nextPlugin[strGetPlugin]) {\r\n                    // Looks like a chain object\r\n                    itemCtx = rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](null, _nextPlugin[strGetPlugin]);\r\n                }\r\n                else {\r\n                    itemCtx = rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](null, _nextPlugin);\r\n                }\r\n            }\r\n            return itemCtx;\r\n        }\r\n        function _setDefaults(config, core, pluginChain) {\r\n            if (config) {\r\n                // Make sure the extensionConfig exists\r\n                setValue(config, STR_EXTENSION_CONFIG, [], null, isNullOrUndefined);\r\n            }\r\n            if (!pluginChain && core) {\r\n                // Get the first plugin from the core\r\n                pluginChain = core[_DYN_GET_PROCESS_TEL_CONT0 /* @min:%2egetProcessTelContext */]()[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n            }\r\n            var nextPlugin = _nextPlugin;\r\n            if (_nextPlugin && _nextPlugin[strGetPlugin]) {\r\n                // If it looks like a proxy/chain then get the plugin\r\n                nextPlugin = _nextPlugin[strGetPlugin]();\r\n            }\r\n            // Support legacy plugins where core was defined as a property\r\n            _self[STR_CORE /* @min:%2ecore */] = core;\r\n            _rootCtx = createProcessTelemetryContext(pluginChain, config, core, nextPlugin);\r\n        }\r\n        function _initDefaults() {\r\n            _isinitialized = false;\r\n            _self[STR_CORE /* @min:%2ecore */] = null;\r\n            _rootCtx = null;\r\n            _nextPlugin = null;\r\n            _hooks = [];\r\n            _unloadHandlerContainer = createUnloadHandlerContainer();\r\n        }\r\n    }\r\n// Removed Stub for BaseTelemetryPlugin.prototype.initialize.\r\n// Removed Stub for BaseTelemetryPlugin.prototype.teardown.\r\n// Removed Stub for BaseTelemetryPlugin.prototype.update.\r\n// Removed Stub for BaseTelemetryPlugin.prototype._addUnloadCb.\r\n// Removed Stub for BaseTelemetryPlugin.prototype._addHook.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    BaseTelemetryPlugin.__ieDyn=1;\n\n    return BaseTelemetryPlugin;\r\n}());\r\nexport { BaseTelemetryPlugin };\r\n//# sourceMappingURL=BaseTelemetryPlugin.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { _DYN_COOKIE_CFG, _DYN_INDEX_OF, _DYN_LENGTH, _DYN_LOGGER, _DYN_SET_ENABLED, _DYN_SPLIT, _DYN_SUBSTRING, _DYN_USER_AGENT } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { dumpObj, getDocument, getLocation, getNavigator, isIE } from \"./EnvUtils\";\r\nimport { arrForEach, dateNow, getExceptionName, isArray, isFunction, isNotNullOrUndefined, isNullOrUndefined, isString, isTruthy, isUndefined, objForEachKey, setValue, strContains, strEndsWith, strTrim } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nvar strToGMTString = \"toGMTString\";\r\nvar strToUTCString = \"toUTCString\";\r\nvar strCookie = \"cookie\";\r\nvar strExpires = \"expires\";\r\nvar strEnabled = \"enabled\";\r\nvar strIsCookieUseDisabled = \"isCookieUseDisabled\";\r\nvar strDisableCookiesUsage = \"disableCookiesUsage\";\r\nvar strConfigCookieMgr = \"_ckMgr\";\r\nvar _supportsCookies = null;\r\nvar _allowUaSameSite = null;\r\nvar _parsedCookieValue = null;\r\nvar _doc = getDocument();\r\nvar _cookieCache = {};\r\nvar _globalCookieConfig = {};\r\n/**\r\n * @ignore\r\n * DO NOT USE or export from the module, this is exposed as public to support backward compatibility of previous static utility methods only.\r\n * If you want to manager cookies either use the ICookieMgr available from the core instance via getCookieMgr() or create\r\n * your own instance of the CookieMgr and use that.\r\n * Using this directly for enabling / disabling cookie handling will not only affect your usage but EVERY user of cookies.\r\n * Example, if you are using a shared component that is also using Application Insights you will affect their cookie handling.\r\n * @param logger - The DiagnosticLogger to use for reporting errors.\r\n */\r\nexport function _gblCookieMgr(config, logger) {\r\n    // Stash the global instance against the BaseCookieMgr class\r\n    var inst = createCookieMgr[strConfigCookieMgr] || _globalCookieConfig[strConfigCookieMgr];\r\n    if (!inst) {\r\n        // Note: not using the getSetValue() helper as that would require always creating a temporary cookieMgr\r\n        // that ultimately is never used\r\n        inst = createCookieMgr[strConfigCookieMgr] = createCookieMgr(config, logger);\r\n        _globalCookieConfig[strConfigCookieMgr] = inst;\r\n    }\r\n    return inst;\r\n}\r\nfunction _isMgrEnabled(cookieMgr) {\r\n    if (cookieMgr) {\r\n        return cookieMgr.isEnabled();\r\n    }\r\n    return true;\r\n}\r\nfunction _createCookieMgrConfig(rootConfig) {\r\n    var cookieMgrCfg = rootConfig[_DYN_COOKIE_CFG /* @min:%2ecookieCfg */] = rootConfig[_DYN_COOKIE_CFG /* @min:%2ecookieCfg */] || {};\r\n    // Sets the values from the root config if not already present on the cookieMgrCfg\r\n    setValue(cookieMgrCfg, \"domain\", rootConfig.cookieDomain, isNotNullOrUndefined, isNullOrUndefined);\r\n    setValue(cookieMgrCfg, \"path\", rootConfig.cookiePath || \"/\", null, isNullOrUndefined);\r\n    if (isNullOrUndefined(cookieMgrCfg[strEnabled])) {\r\n        // Set the enabled from the provided setting or the legacy root values\r\n        var cookieEnabled = void 0;\r\n        if (!isUndefined(rootConfig[strIsCookieUseDisabled])) {\r\n            cookieEnabled = !rootConfig[strIsCookieUseDisabled];\r\n        }\r\n        if (!isUndefined(rootConfig[strDisableCookiesUsage])) {\r\n            cookieEnabled = !rootConfig[strDisableCookiesUsage];\r\n        }\r\n        cookieMgrCfg[strEnabled] = cookieEnabled;\r\n    }\r\n    return cookieMgrCfg;\r\n}\r\nfunction _isIgnoredCookie(cookieMgrCfg, name) {\r\n    if (name && cookieMgrCfg && isArray(cookieMgrCfg.ignoreCookies)) {\r\n        return cookieMgrCfg.ignoreCookies[_DYN_INDEX_OF /* @min:%2eindexOf */](name) !== -1;\r\n    }\r\n    return false;\r\n}\r\nfunction _isBlockedCookie(cookieMgrCfg, name) {\r\n    if (name && cookieMgrCfg && isArray(cookieMgrCfg.blockedCookies)) {\r\n        if (cookieMgrCfg.blockedCookies[_DYN_INDEX_OF /* @min:%2eindexOf */](name) !== -1) {\r\n            return true;\r\n        }\r\n    }\r\n    return _isIgnoredCookie(cookieMgrCfg, name);\r\n}\r\n/**\r\n * Helper to return the ICookieMgr from the core (if not null/undefined) or a default implementation\r\n * associated with the configuration or a legacy default.\r\n * @param core\r\n * @param config\r\n * @returns\r\n */\r\nexport function safeGetCookieMgr(core, config) {\r\n    var cookieMgr;\r\n    if (core) {\r\n        // Always returns an instance\r\n        cookieMgr = core.getCookieMgr();\r\n    }\r\n    else if (config) {\r\n        var cookieCfg = config[_DYN_COOKIE_CFG /* @min:%2ecookieCfg */];\r\n        if (cookieCfg[strConfigCookieMgr]) {\r\n            cookieMgr = cookieCfg[strConfigCookieMgr];\r\n        }\r\n        else {\r\n            cookieMgr = createCookieMgr(config);\r\n        }\r\n    }\r\n    if (!cookieMgr) {\r\n        // Get or initialize the default global (legacy) cookie manager if we couldn't find one\r\n        cookieMgr = _gblCookieMgr(config, (core || {})[_DYN_LOGGER /* @min:%2elogger */]);\r\n    }\r\n    return cookieMgr;\r\n}\r\nexport function createCookieMgr(rootConfig, logger) {\r\n    var _a;\r\n    var cookieMgrConfig = _createCookieMgrConfig(rootConfig || _globalCookieConfig);\r\n    var _path = cookieMgrConfig.path || \"/\";\r\n    var _domain = cookieMgrConfig.domain;\r\n    // Explicitly checking against false, so that setting to undefined will === true\r\n    var _enabled = cookieMgrConfig[strEnabled] !== false;\r\n    var cookieMgr = (_a = {\r\n            isEnabled: function () {\r\n                var enabled = _enabled && areCookiesSupported(logger);\r\n                // Using an indirect lookup for any global cookie manager to support tree shaking for SDK's\r\n                // that don't use the \"applicationinsights-core\" version of the default cookie function\r\n                var gblManager = _globalCookieConfig[strConfigCookieMgr];\r\n                if (enabled && gblManager && cookieMgr !== gblManager) {\r\n                    // Make sure the GlobalCookie Manager instance (if not this instance) is also enabled.\r\n                    // As the global (deprecated) functions may have been called (for backward compatibility)\r\n                    enabled = _isMgrEnabled(gblManager);\r\n                }\r\n                return enabled;\r\n            }\r\n        },\r\n        _a[_DYN_SET_ENABLED /* @min:setEnabled */] = function (value) {\r\n            // Explicitly checking against false, so that setting to undefined will === true\r\n            _enabled = value !== false;\r\n        },\r\n        _a.set = function (name, value, maxAgeSec, domain, path) {\r\n            var result = false;\r\n            if (_isMgrEnabled(cookieMgr) && !_isBlockedCookie(cookieMgrConfig, name)) {\r\n                var values = {};\r\n                var theValue = strTrim(value || STR_EMPTY);\r\n                var idx = theValue[_DYN_INDEX_OF /* @min:%2eindexOf */](\";\");\r\n                if (idx !== -1) {\r\n                    theValue = strTrim(value[_DYN_SUBSTRING /* @min:%2esubstring */](0, idx));\r\n                    values = _extractParts(value[_DYN_SUBSTRING /* @min:%2esubstring */](idx + 1));\r\n                }\r\n                // Only update domain if not already present (isUndefined) and the value is truthy (not null, undefined or empty string)\r\n                setValue(values, \"domain\", domain || _domain, isTruthy, isUndefined);\r\n                if (!isNullOrUndefined(maxAgeSec)) {\r\n                    var _isIE = isIE();\r\n                    if (isUndefined(values[strExpires])) {\r\n                        var nowMs = dateNow();\r\n                        // Only add expires if not already present\r\n                        var expireMs = nowMs + (maxAgeSec * 1000);\r\n                        // Sanity check, if zero or -ve then ignore\r\n                        if (expireMs > 0) {\r\n                            var expiry = new Date();\r\n                            expiry.setTime(expireMs);\r\n                            setValue(values, strExpires, _formatDate(expiry, !_isIE ? strToUTCString : strToGMTString) || _formatDate(expiry, _isIE ? strToGMTString : strToUTCString) || STR_EMPTY, isTruthy);\r\n                        }\r\n                    }\r\n                    if (!_isIE) {\r\n                        // Only replace if not already present\r\n                        setValue(values, \"max-age\", STR_EMPTY + maxAgeSec, null, isUndefined);\r\n                    }\r\n                }\r\n                var location_1 = getLocation();\r\n                if (location_1 && location_1.protocol === \"https:\") {\r\n                    setValue(values, \"secure\", null, null, isUndefined);\r\n                    // Only set same site if not also secure\r\n                    if (_allowUaSameSite === null) {\r\n                        _allowUaSameSite = !uaDisallowsSameSiteNone((getNavigator() || {})[_DYN_USER_AGENT /* @min:%2euserAgent */]);\r\n                    }\r\n                    if (_allowUaSameSite) {\r\n                        setValue(values, \"SameSite\", \"None\", null, isUndefined);\r\n                    }\r\n                }\r\n                setValue(values, \"path\", path || _path, null, isUndefined);\r\n                var setCookieFn = cookieMgrConfig.setCookie || _setCookieValue;\r\n                setCookieFn(name, _formatCookieValue(theValue, values));\r\n                result = true;\r\n            }\r\n            return result;\r\n        },\r\n        _a.get = function (name) {\r\n            var value = STR_EMPTY;\r\n            if (_isMgrEnabled(cookieMgr) && !_isIgnoredCookie(cookieMgrConfig, name)) {\r\n                value = (cookieMgrConfig.getCookie || _getCookieValue)(name);\r\n            }\r\n            return value;\r\n        },\r\n        _a.del = function (name, path) {\r\n            var result = false;\r\n            if (_isMgrEnabled(cookieMgr)) {\r\n                // Only remove the cookie if the manager and cookie support has not been disabled\r\n                result = cookieMgr.purge(name, path);\r\n            }\r\n            return result;\r\n        },\r\n        _a.purge = function (name, path) {\r\n            var _a;\r\n            var result = false;\r\n            if (areCookiesSupported(logger)) {\r\n                // Setting the expiration date in the past immediately removes the cookie\r\n                var values = (_a = {},\r\n                    _a[\"path\"] = path ? path : \"/\",\r\n                    _a[strExpires] = \"Thu, 01 Jan 1970 00:00:01 GMT\",\r\n                    _a);\r\n                if (!isIE()) {\r\n                    // Set max age to expire now\r\n                    values[\"max-age\"] = \"0\";\r\n                }\r\n                var delCookie = cookieMgrConfig.delCookie || _setCookieValue;\r\n                delCookie(name, _formatCookieValue(STR_EMPTY, values));\r\n                result = true;\r\n            }\r\n            return result;\r\n        },\r\n        _a);\r\n    // Associated this cookie manager with the config\r\n    cookieMgr[strConfigCookieMgr] = cookieMgr;\r\n    return cookieMgr;\r\n}\r\n/*\r\n* Helper method to tell if document.cookie object is supported by the runtime\r\n*/\r\nexport function areCookiesSupported(logger) {\r\n    if (_supportsCookies === null) {\r\n        _supportsCookies = false;\r\n        try {\r\n            var doc = _doc || {};\r\n            _supportsCookies = doc[strCookie] !== undefined;\r\n        }\r\n        catch (e) {\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 68 /* _eInternalMessageId.CannotAccessCookie */, \"Cannot access document.cookie - \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return _supportsCookies;\r\n}\r\nfunction _extractParts(theValue) {\r\n    var values = {};\r\n    if (theValue && theValue[_DYN_LENGTH /* @min:%2elength */]) {\r\n        var parts = strTrim(theValue)[_DYN_SPLIT /* @min:%2esplit */](\";\");\r\n        arrForEach(parts, function (thePart) {\r\n            thePart = strTrim(thePart || STR_EMPTY);\r\n            if (thePart) {\r\n                var idx = thePart[_DYN_INDEX_OF /* @min:%2eindexOf */](\"=\");\r\n                if (idx === -1) {\r\n                    values[thePart] = null;\r\n                }\r\n                else {\r\n                    values[strTrim(thePart[_DYN_SUBSTRING /* @min:%2esubstring */](0, idx))] = strTrim(thePart[_DYN_SUBSTRING /* @min:%2esubstring */](idx + 1));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return values;\r\n}\r\nfunction _formatDate(theDate, func) {\r\n    if (isFunction(theDate[func])) {\r\n        return theDate[func]();\r\n    }\r\n    return null;\r\n}\r\nfunction _formatCookieValue(value, values) {\r\n    var cookieValue = value || STR_EMPTY;\r\n    objForEachKey(values, function (name, theValue) {\r\n        cookieValue += \"; \" + name + (!isNullOrUndefined(theValue) ? \"=\" + theValue : STR_EMPTY);\r\n    });\r\n    return cookieValue;\r\n}\r\nfunction _getCookieValue(name) {\r\n    var cookieValue = STR_EMPTY;\r\n    if (_doc) {\r\n        var theCookie = _doc[strCookie] || STR_EMPTY;\r\n        if (_parsedCookieValue !== theCookie) {\r\n            _cookieCache = _extractParts(theCookie);\r\n            _parsedCookieValue = theCookie;\r\n        }\r\n        cookieValue = strTrim(_cookieCache[name] || STR_EMPTY);\r\n    }\r\n    return cookieValue;\r\n}\r\nfunction _setCookieValue(name, cookieValue) {\r\n    if (_doc) {\r\n        _doc[strCookie] = name + \"=\" + cookieValue;\r\n    }\r\n}\r\nexport function uaDisallowsSameSiteNone(userAgent) {\r\n    if (!isString(userAgent)) {\r\n        return false;\r\n    }\r\n    // Cover all iOS based browsers here. This includes:\r\n    // - Safari on iOS 12 for iPhone, iPod Touch, iPad\r\n    // - WkWebview on iOS 12 for iPhone, iPod Touch, iPad\r\n    // - Chrome on iOS 12 for iPhone, iPod Touch, iPad\r\n    // All of which are broken by SameSite=None, because they use the iOS networking stack\r\n    if (strContains(userAgent, \"CPU iPhone OS 12\") || strContains(userAgent, \"iPad; CPU OS 12\")) {\r\n        return true;\r\n    }\r\n    // Cover Mac OS X based browsers that use the Mac OS networking stack. This includes:\r\n    // - Safari on Mac OS X\r\n    // This does not include:\r\n    // - Internal browser on Mac OS X\r\n    // - Chrome on Mac OS X\r\n    // - Chromium on Mac OS X\r\n    // Because they do not use the Mac OS networking stack.\r\n    if (strContains(userAgent, \"Macintosh; Intel Mac OS X 10_14\") && strContains(userAgent, \"Version/\") && strContains(userAgent, \"Safari\")) {\r\n        return true;\r\n    }\r\n    // Cover Mac OS X internal browsers that use the Mac OS networking stack. This includes:\r\n    // - Internal browser on Mac OS X\r\n    // This does not include:\r\n    // - Safari on Mac OS X\r\n    // - Chrome on Mac OS X\r\n    // - Chromium on Mac OS X\r\n    // Because they do not use the Mac OS networking stack.\r\n    if (strContains(userAgent, \"Macintosh; Intel Mac OS X 10_14\") && strEndsWith(userAgent, \"AppleWebKit/605.1.15 (KHTML, like Gecko)\")) {\r\n        return true;\r\n    }\r\n    // Cover Chrome 50-69, because some versions are broken by SameSite=None, and none in this range require it.\r\n    // Note: this covers some pre-Chromium Edge versions, but pre-Chromim Edge does not require SameSite=None, so this is fine.\r\n    // Note: this regex applies to Windows, Mac OS X, and Linux, deliberately.\r\n    if (strContains(userAgent, \"Chrome/5\") || strContains(userAgent, \"Chrome/6\")) {\r\n        return true;\r\n    }\r\n    // Unreal Engine runs Chromium 59, but does not advertise as Chrome until 4.23. Treat versions of Unreal\r\n    // that don't specify their Chrome version as lacking support for SameSite=None.\r\n    if (strContains(userAgent, \"UnrealEngine\") && !strContains(userAgent, \"Chrome\")) {\r\n        return true;\r\n    }\r\n    // UCBrowser < 12.13.2 ignores Set-Cookie headers with SameSite=None\r\n    // NB: this rule isn't complete - you need regex to make a complete rule.\r\n    // See: https://www.chromium.org/updates/same-site/incompatible-clients\r\n    if (strContains(userAgent, \"UCBrowser/12\") || strContains(userAgent, \"UCBrowser/11\")) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=CookieMgr.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { objCreateFn, strShimUndefined } from \"@microsoft/applicationinsights-shims\";\r\nimport { _DYN_LENGTH, _DYN_PUSH, _DYN_SET_ENABLED, _DYN_SUBSTR, _DYN_SUBSTRING } from \"../__DynamicConstants\";\r\nimport { _gblCookieMgr } from \"./CookieMgr\";\r\nimport { getPerformance, isIE } from \"./EnvUtils\";\r\nimport { addEventHandler, attachEvent, detachEvent } from \"./EventHelpers\";\r\nimport { arrForEach, arrIndexOf, arrMap, arrReduce, dateNow, hasOwnProperty, isArray, isBoolean, isDate, isError, isFunction, isNullOrUndefined, isNumber, isObject, isString, isTypeof, isUndefined, objDefineAccessors, objKeys, strTrim, toISOString } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { mwcRandom32, mwcRandomSeed, newId, random32, randomValue } from \"./RandomHelper\";\r\nvar _cookieMgrs = null;\r\nvar _canUseCookies; // legacy supported config\r\n// Added to help with minfication\r\nexport var Undefined = strShimUndefined;\r\nexport function newGuid() {\r\n    var uuid = generateW3CId();\r\n    return uuid[_DYN_SUBSTRING /* @min:%2esubstring */](0, 8) + \"-\" + uuid[_DYN_SUBSTRING /* @min:%2esubstring */](8, 12) + \"-\" + uuid[_DYN_SUBSTRING /* @min:%2esubstring */](12, 16) + \"-\" + uuid[_DYN_SUBSTRING /* @min:%2esubstring */](16, 20) + \"-\" + uuid[_DYN_SUBSTRING /* @min:%2esubstring */](20);\r\n}\r\n/**\r\n * Return the current value of the Performance Api now() function (if available) and fallback to dateNow() if it is unavailable (IE9 or less)\r\n * https://caniuse.com/#search=performance.now\r\n */\r\nexport function perfNow() {\r\n    var perf = getPerformance();\r\n    if (perf && perf.now) {\r\n        return perf.now();\r\n    }\r\n    return dateNow();\r\n}\r\n/**\r\n * The strEndsWith() method determines whether a string ends with the characters of a specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param search - The characters to be searched for at the end of the value.\r\n * @returns true if the given search value is found at the end of the string, otherwise false.\r\n */\r\nexport function strEndsWith(value, search) {\r\n    if (value && search) {\r\n        var len = value[_DYN_LENGTH /* @min:%2elength */];\r\n        var start = len - search[_DYN_LENGTH /* @min:%2elength */];\r\n        return value[_DYN_SUBSTRING /* @min:%2esubstring */](start >= 0 ? start : 0, len) === search;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * generate W3C trace id\r\n */\r\nexport function generateW3CId() {\r\n    var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n    // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n    var oct = STR_EMPTY, tmp;\r\n    for (var a = 0; a < 4; a++) {\r\n        tmp = random32();\r\n        oct +=\r\n            hexValues[tmp & 0xF] +\r\n                hexValues[tmp >> 4 & 0xF] +\r\n                hexValues[tmp >> 8 & 0xF] +\r\n                hexValues[tmp >> 12 & 0xF] +\r\n                hexValues[tmp >> 16 & 0xF] +\r\n                hexValues[tmp >> 20 & 0xF] +\r\n                hexValues[tmp >> 24 & 0xF] +\r\n                hexValues[tmp >> 28 & 0xF];\r\n    }\r\n    // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n    var clockSequenceHi = hexValues[8 + (random32() & 0x03) | 0];\r\n    return oct[_DYN_SUBSTR /* @min:%2esubstr */](0, 8) + oct[_DYN_SUBSTR /* @min:%2esubstr */](9, 4) + \"4\" + oct[_DYN_SUBSTR /* @min:%2esubstr */](13, 3) + clockSequenceHi + oct[_DYN_SUBSTR /* @min:%2esubstr */](16, 3) + oct[_DYN_SUBSTR /* @min:%2esubstr */](19, 12);\r\n}\r\n/**\r\n * Provides a collection of utility functions, included for backward compatibility with previous releases.\r\n * @deprecated Marking this instance as deprecated in favor of direct usage of the helper functions\r\n * as direct usage provides better tree-shaking and minification by avoiding the inclusion of the unused items\r\n * in your resulting code.\r\n */\r\nexport var CoreUtils = {\r\n    _canUseCookies: undefined,\r\n    isTypeof: isTypeof,\r\n    isUndefined: isUndefined,\r\n    isNullOrUndefined: isNullOrUndefined,\r\n    hasOwnProperty: hasOwnProperty,\r\n    isFunction: isFunction,\r\n    isObject: isObject,\r\n    isDate: isDate,\r\n    isArray: isArray,\r\n    isError: isError,\r\n    isString: isString,\r\n    isNumber: isNumber,\r\n    isBoolean: isBoolean,\r\n    toISOString: toISOString,\r\n    arrForEach: arrForEach,\r\n    arrIndexOf: arrIndexOf,\r\n    arrMap: arrMap,\r\n    arrReduce: arrReduce,\r\n    strTrim: strTrim,\r\n    objCreate: objCreateFn,\r\n    objKeys: objKeys,\r\n    objDefineAccessors: objDefineAccessors,\r\n    addEventHandler: addEventHandler,\r\n    dateNow: dateNow,\r\n    isIE: isIE,\r\n    disableCookies: disableCookies,\r\n    newGuid: newGuid,\r\n    perfNow: perfNow,\r\n    newId: newId,\r\n    randomValue: randomValue,\r\n    random32: random32,\r\n    mwcRandomSeed: mwcRandomSeed,\r\n    mwcRandom32: mwcRandom32,\r\n    generateW3CId: generateW3CId\r\n};\r\nvar GuidRegex = /[xy]/g;\r\nexport var EventHelper = {\r\n    Attach: attachEvent,\r\n    AttachEvent: attachEvent,\r\n    Detach: detachEvent,\r\n    DetachEvent: detachEvent\r\n};\r\n/**\r\n * Helper to support backward compatibility for users that use the legacy cookie handling functions and the use the internal\r\n * CoreUtils._canUseCookies global flag to enable/disable cookies usage.\r\n * Note: This has the following deliberate side-effects\r\n * - Creates the global (legacy) cookie manager if it does not already exist\r\n * - Attempts to add \"listeners\" to the CoreUtils._canUseCookies property to support the legacy usage\r\n * @param config\r\n * @param logger\r\n * @returns\r\n */\r\nexport function _legacyCookieMgr(config, logger) {\r\n    var cookieMgr = _gblCookieMgr(config, logger);\r\n    var legacyCanUseCookies = CoreUtils._canUseCookies;\r\n    if (_cookieMgrs === null) {\r\n        _cookieMgrs = [];\r\n        _canUseCookies = legacyCanUseCookies;\r\n        // Dynamically create get/set property accessors for backward compatibility for enabling / disabling cookies\r\n        // this WILL NOT work for ES3 browsers (< IE8)\r\n        objDefineAccessors(CoreUtils, \"_canUseCookies\", function () {\r\n            return _canUseCookies;\r\n        }, function (value) {\r\n            _canUseCookies = value;\r\n            arrForEach(_cookieMgrs, function (mgr) {\r\n                mgr[_DYN_SET_ENABLED /* @min:%2esetEnabled */](value);\r\n            });\r\n        });\r\n    }\r\n    if (arrIndexOf(_cookieMgrs, cookieMgr) === -1) {\r\n        _cookieMgrs[_DYN_PUSH /* @min:%2epush */](cookieMgr);\r\n    }\r\n    if (isBoolean(legacyCanUseCookies)) {\r\n        cookieMgr[_DYN_SET_ENABLED /* @min:%2esetEnabled */](legacyCanUseCookies);\r\n    }\r\n    if (isBoolean(_canUseCookies)) {\r\n        cookieMgr[_DYN_SET_ENABLED /* @min:%2esetEnabled */](_canUseCookies);\r\n    }\r\n    return cookieMgr;\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().disable()\r\n * Force the SDK not to store and read any data from cookies.\r\n */\r\nexport function disableCookies() {\r\n    _legacyCookieMgr()[_DYN_SET_ENABLED /* @min:%2esetEnabled */](false);\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().isEnabled()\r\n * Helper method to tell if document.cookie object is available and whether it can be used.\r\n */\r\nexport function canUseCookies(logger) {\r\n    return _legacyCookieMgr(null, logger).isEnabled();\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().get()\r\n * helper method to access userId and sessionId cookie\r\n */\r\nexport function getCookie(logger, name) {\r\n    return _legacyCookieMgr(null, logger).get(name);\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().set()\r\n * helper method to set userId and sessionId cookie\r\n */\r\nexport function setCookie(logger, name, value, domain) {\r\n    _legacyCookieMgr(null, logger).set(name, value, null, domain);\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().del()\r\n * Deletes a cookie by setting it's expiration time in the past.\r\n * @param name - The name of the cookie to delete.\r\n */\r\nexport function deleteCookie(logger, name) {\r\n    return _legacyCookieMgr(null, logger).del(name);\r\n}\r\n//# sourceMappingURL=CoreUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { ObjDefineProperty } from \"@microsoft/applicationinsights-shims\";\r\nimport { _DYN_NODE_TYPE } from \"../__DynamicConstants\";\r\nimport { normalizeJsName } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { newId } from \"./RandomHelper\";\r\nvar _objDefineProperty = ObjDefineProperty;\r\nvar version = '2.8.9';\r\nvar instanceName = \".\" + newId(6);\r\nvar _dataUid = 0;\r\nfunction _createAccessor(target, prop, value) {\r\n    if (_objDefineProperty) {\r\n        try {\r\n            _objDefineProperty(target, prop, {\r\n                value: value,\r\n                enumerable: false,\r\n                configurable: true\r\n            });\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            // IE8 Defines a defineProperty on Object but it's only supported for DOM elements so it will throw\r\n            // We will just ignore this here.\r\n        }\r\n    }\r\n    return false;\r\n}\r\n// Accepts only:\r\n//  - Node\r\n//    - Node.ELEMENT_NODE\r\n//    - Node.DOCUMENT_NODE\r\n//  - Object\r\n//    - Any\r\nfunction _canAcceptData(target) {\r\n    return target[_DYN_NODE_TYPE /* @min:%2enodeType */] === 1 || target[_DYN_NODE_TYPE /* @min:%2enodeType */] === 9 || !(+target[_DYN_NODE_TYPE /* @min:%2enodeType */]);\r\n}\r\nfunction _getCache(data, target) {\r\n    var theCache = target[data.id];\r\n    if (!theCache) {\r\n        theCache = {};\r\n        try {\r\n            if (_canAcceptData(target)) {\r\n                if (!_createAccessor(target, data.id, theCache)) {\r\n                    // Environment doesn't support accessor, so just use direct assignment\r\n                    target[data.id] = theCache;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Not all environments allow extending all objects, so just ignore the cache in those cases\r\n        }\r\n    }\r\n    return theCache;\r\n}\r\nexport function createUniqueNamespace(name, includeVersion) {\r\n    if (includeVersion === void 0) { includeVersion = false; }\r\n    return normalizeJsName(name + (_dataUid++) + (includeVersion ? \".\" + version : STR_EMPTY) + instanceName);\r\n}\r\nexport function createElmNodeData(name) {\r\n    var data = {\r\n        id: createUniqueNamespace(\"_aiData-\" + (name || STR_EMPTY) + \".\" + version),\r\n        accept: function (target) {\r\n            return _canAcceptData(target);\r\n        },\r\n        get: function (target, name, defValue, addDefault) {\r\n            var theCache = target[data.id];\r\n            if (!theCache) {\r\n                if (addDefault) {\r\n                    // Side effect is adds the cache\r\n                    theCache = _getCache(data, target);\r\n                    theCache[normalizeJsName(name)] = defValue;\r\n                }\r\n                return defValue;\r\n            }\r\n            return theCache[normalizeJsName(name)];\r\n        },\r\n        kill: function (target, name) {\r\n            if (target && target[name]) {\r\n                try {\r\n                    delete target[name];\r\n                }\r\n                catch (e) {\r\n                    // Just cleaning up, so if this fails -- ignore\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return data;\r\n}\r\n//# sourceMappingURL=DataCacheHelper.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_APPLY, _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { getGlobalInst } from \"./EnvUtils\";\r\nvar listenerFuncs = [\"eventsSent\", \"eventsDiscarded\", \"eventsSendRequest\", \"perfEvent\"];\r\nvar _aiNamespace = null;\r\nvar _debugListener;\r\nfunction _listenerProxyFunc(name, config) {\r\n    return function () {\r\n        var args = arguments;\r\n        var dbgExt = getDebugExt(config);\r\n        if (dbgExt) {\r\n            var listener = dbgExt.listener;\r\n            if (listener && listener[name]) {\r\n                listener[name][_DYN_APPLY /* @min:%2eapply */](listener, args);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction _getExtensionNamespace() {\r\n    // Cache the lookup of the global namespace object\r\n    var target = getGlobalInst(\"Microsoft\");\r\n    if (target) {\r\n        _aiNamespace = target[\"ApplicationInsights\"];\r\n    }\r\n    return _aiNamespace;\r\n}\r\nexport function getDebugExt(config) {\r\n    var ns = _aiNamespace;\r\n    if (!ns && config.disableDbgExt !== true) {\r\n        ns = _aiNamespace || _getExtensionNamespace();\r\n    }\r\n    return ns ? ns[\"ChromeDbgExt\"] : null;\r\n}\r\nexport function getDebugListener(config) {\r\n    if (!_debugListener) {\r\n        _debugListener = {};\r\n        for (var lp = 0; lp < listenerFuncs[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n            _debugListener[listenerFuncs[lp]] = _listenerProxyFunc(listenerFuncs[lp], config);\r\n        }\r\n    }\r\n    return _debugListener;\r\n}\r\n//# sourceMappingURL=DbgExtensionUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_DIAG_LOG, _DYN_ENABLE_DEBUG_EXCEPTI4, _DYN_LOGGER, _DYN_LOG_INTERNAL_MESSAGE, _DYN_MESSAGE, _DYN_MESSAGE_ID, _DYN_PUSH, _DYN_REPLACE } from \"../__DynamicConstants\";\r\nimport { getDebugExt } from \"./DbgExtensionUtils\";\r\nimport { dumpObj, getConsole, getJSON, hasJSON } from \"./EnvUtils\";\r\nimport { getCfgValue, isFunction, isUndefined } from \"./HelperFuncs\";\r\nimport { STR_EMPTY, STR_ERROR_TO_CONSOLE, STR_WARN_TO_CONSOLE } from \"./InternalConstants\";\r\n/**\r\n * For user non actionable traces use AI Internal prefix.\r\n */\r\nvar AiNonUserActionablePrefix = \"AI (Internal): \";\r\n/**\r\n * Prefix of the traces in portal.\r\n */\r\nvar AiUserActionablePrefix = \"AI: \";\r\n/**\r\n *  Session storage key for the prefix for the key indicating message type already logged\r\n */\r\nvar AIInternalMessagePrefix = \"AITR_\";\r\nfunction _sanitizeDiagnosticText(text) {\r\n    if (text) {\r\n        return \"\\\"\" + text[_DYN_REPLACE /* @min:%2ereplace */](/\\\"/g, STR_EMPTY) + \"\\\"\";\r\n    }\r\n    return STR_EMPTY;\r\n}\r\nfunction _logToConsole(func, message) {\r\n    var theConsole = getConsole();\r\n    if (!!theConsole) {\r\n        var logFunc = \"log\";\r\n        if (theConsole[func]) {\r\n            logFunc = func;\r\n        }\r\n        if (isFunction(theConsole[logFunc])) {\r\n            theConsole[logFunc](message);\r\n        }\r\n    }\r\n}\r\nvar _InternalLogMessage = /** @class */ (function () {\r\n    function _InternalLogMessage(msgId, msg, isUserAct, properties) {\r\n        if (isUserAct === void 0) { isUserAct = false; }\r\n        var _self = this;\r\n        _self[_DYN_MESSAGE_ID /* @min:%2emessageId */] = msgId;\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] =\r\n            (isUserAct ? AiUserActionablePrefix : AiNonUserActionablePrefix) +\r\n                msgId;\r\n        var strProps = STR_EMPTY;\r\n        if (hasJSON()) {\r\n            strProps = getJSON().stringify(properties);\r\n        }\r\n        var diagnosticText = (msg ? \" message:\" + _sanitizeDiagnosticText(msg) : STR_EMPTY) +\r\n            (properties ? \" props:\" + _sanitizeDiagnosticText(strProps) : STR_EMPTY);\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] += diagnosticText;\r\n    }\r\n    _InternalLogMessage.dataType = \"MessageData\";\r\n    return _InternalLogMessage;\r\n}());\r\nexport { _InternalLogMessage };\r\nexport function safeGetLogger(core, config) {\r\n    return (core || {})[_DYN_LOGGER /* @min:%2elogger */] || new DiagnosticLogger(config);\r\n}\r\nvar DiagnosticLogger = /** @class */ (function () {\r\n    function DiagnosticLogger(config) {\r\n        this.identifier = \"DiagnosticLogger\";\r\n        /**\r\n         * The internal logging queue\r\n         */\r\n        this.queue = [];\r\n        /**\r\n         * Count of internal messages sent\r\n         */\r\n        var _messageCount = 0;\r\n        /**\r\n         * Holds information about what message types were already logged to console or sent to server.\r\n         */\r\n        var _messageLogged = {};\r\n        var _loggingLevelConsole;\r\n        var _loggingLevelTelemetry;\r\n        var _maxInternalMessageLimit;\r\n        var _enableDebugExceptions;\r\n        dynamicProto(DiagnosticLogger, this, function (_self) {\r\n            _setDefaultsFromConfig(config || {});\r\n            _self.consoleLoggingLevel = function () { return _loggingLevelConsole; };\r\n            _self.telemetryLoggingLevel = function () { return _loggingLevelTelemetry; };\r\n            _self.maxInternalMessageLimit = function () { return _maxInternalMessageLimit; };\r\n            _self[_DYN_ENABLE_DEBUG_EXCEPTI4 /* @min:%2eenableDebugExceptions */] = function () { return _enableDebugExceptions; };\r\n            /**\r\n             * This method will throw exceptions in debug mode or attempt to log the error as a console warning.\r\n             * @param severity {LoggingSeverity} - The severity of the log message\r\n             * @param message {_InternalLogMessage} - The log message.\r\n             */\r\n            _self.throwInternal = function (severity, msgId, msg, properties, isUserAct) {\r\n                if (isUserAct === void 0) { isUserAct = false; }\r\n                var message = new _InternalLogMessage(msgId, msg, isUserAct, properties);\r\n                if (_enableDebugExceptions) {\r\n                    throw dumpObj(message);\r\n                }\r\n                else {\r\n                    // Get the logging function and fallback to warnToConsole of for some reason errorToConsole doesn't exist\r\n                    var logFunc = severity === 1 /* eLoggingSeverity.CRITICAL */ ? STR_ERROR_TO_CONSOLE : STR_WARN_TO_CONSOLE;\r\n                    if (!isUndefined(message[_DYN_MESSAGE /* @min:%2emessage */])) {\r\n                        if (isUserAct) {\r\n                            // check if this message type was already logged to console for this page view and if so, don't log it again\r\n                            var messageKey = +message[_DYN_MESSAGE_ID /* @min:%2emessageId */];\r\n                            if (!_messageLogged[messageKey] && _loggingLevelConsole >= severity) {\r\n                                _self[logFunc](message[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                                _messageLogged[messageKey] = true;\r\n                            }\r\n                        }\r\n                        else {\r\n                            // Only log traces if the console Logging Level is >= the throwInternal severity level\r\n                            if (_loggingLevelConsole >= severity) {\r\n                                _self[logFunc](message[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                            }\r\n                        }\r\n                        _logInternalMessage(severity, message);\r\n                    }\r\n                    else {\r\n                        _debugExtMsg(\"throw\" + (severity === 1 /* eLoggingSeverity.CRITICAL */ ? \"Critical\" : \"Warning\"), message);\r\n                    }\r\n                }\r\n            };\r\n            /**\r\n             * This will write a warning to the console if possible\r\n             * @param message {string} - The warning message\r\n             */\r\n            _self[STR_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */] = function (message) {\r\n                _logToConsole(\"warn\", message);\r\n                _debugExtMsg(\"warning\", message);\r\n            };\r\n            /**\r\n             * This will write an error to the console if possible\r\n             * @param message {string} - The error message\r\n             */\r\n            _self[STR_ERROR_TO_CONSOLE /* @min:%2eerrorToConsole */] = function (message) {\r\n                _logToConsole(\"error\", message);\r\n                _debugExtMsg(\"error\", message);\r\n            };\r\n            /**\r\n             * Resets the internal message count\r\n             */\r\n            _self.resetInternalMessageCount = function () {\r\n                _messageCount = 0;\r\n                _messageLogged = {};\r\n            };\r\n            /**\r\n             * Logs a message to the internal queue.\r\n             * @param severity {LoggingSeverity} - The severity of the log message\r\n             * @param message {_InternalLogMessage} - The message to log.\r\n             */\r\n            _self[_DYN_LOG_INTERNAL_MESSAGE /* @min:%2elogInternalMessage */] = _logInternalMessage;\r\n            function _logInternalMessage(severity, message) {\r\n                if (_areInternalMessagesThrottled()) {\r\n                    return;\r\n                }\r\n                // check if this message type was already logged for this session and if so, don't log it again\r\n                var logMessage = true;\r\n                var messageKey = AIInternalMessagePrefix + message[_DYN_MESSAGE_ID /* @min:%2emessageId */];\r\n                // if the session storage is not available, limit to only one message type per page view\r\n                if (_messageLogged[messageKey]) {\r\n                    logMessage = false;\r\n                }\r\n                else {\r\n                    _messageLogged[messageKey] = true;\r\n                }\r\n                if (logMessage) {\r\n                    // Push the event in the internal queue\r\n                    if (severity <= _loggingLevelTelemetry) {\r\n                        _self.queue[_DYN_PUSH /* @min:%2epush */](message);\r\n                        _messageCount++;\r\n                        _debugExtMsg((severity === 1 /* eLoggingSeverity.CRITICAL */ ? \"error\" : \"warn\"), message);\r\n                    }\r\n                    // When throttle limit reached, send a special event\r\n                    if (_messageCount === _maxInternalMessageLimit) {\r\n                        var throttleLimitMessage = \"Internal events throttle limit per PageView reached for this app.\";\r\n                        var throttleMessage = new _InternalLogMessage(23 /* _eInternalMessageId.MessageLimitPerPVExceeded */, throttleLimitMessage, false);\r\n                        _self.queue[_DYN_PUSH /* @min:%2epush */](throttleMessage);\r\n                        if (severity === 1 /* eLoggingSeverity.CRITICAL */) {\r\n                            _self[STR_ERROR_TO_CONSOLE /* @min:%2eerrorToConsole */](throttleLimitMessage);\r\n                        }\r\n                        else {\r\n                            _self[STR_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](throttleLimitMessage);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function _setDefaultsFromConfig(config) {\r\n                _loggingLevelConsole = getCfgValue(config.loggingLevelConsole, 0);\r\n                _loggingLevelTelemetry = getCfgValue(config.loggingLevelTelemetry, 1);\r\n                _maxInternalMessageLimit = getCfgValue(config.maxMessageLimit, 25);\r\n                _enableDebugExceptions = getCfgValue(config[_DYN_ENABLE_DEBUG_EXCEPTI4 /* @min:%2eenableDebugExceptions */], false);\r\n            }\r\n            function _areInternalMessagesThrottled() {\r\n                return _messageCount >= _maxInternalMessageLimit;\r\n            }\r\n            function _debugExtMsg(name, data) {\r\n                var dbgExt = getDebugExt(config || {});\r\n                if (dbgExt && dbgExt[_DYN_DIAG_LOG /* @min:%2ediagLog */]) {\r\n                    dbgExt[_DYN_DIAG_LOG /* @min:%2ediagLog */](name, data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for DiagnosticLogger.prototype.enableDebugExceptions.\r\n// Removed Stub for DiagnosticLogger.prototype.consoleLoggingLevel.\r\n// Removed Stub for DiagnosticLogger.prototype.telemetryLoggingLevel.\r\n// Removed Stub for DiagnosticLogger.prototype.maxInternalMessageLimit.\r\n// Removed Stub for DiagnosticLogger.prototype.throwInternal.\r\n// Removed Stub for DiagnosticLogger.prototype.warnToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.errorToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.resetInternalMessageCount.\r\n// Removed Stub for DiagnosticLogger.prototype.logInternalMessage.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    DiagnosticLogger.__ieDyn=1;\n\n    return DiagnosticLogger;\r\n}());\r\nexport { DiagnosticLogger };\r\nfunction _getLogger(logger) {\r\n    return (logger || new DiagnosticLogger());\r\n}\r\n/**\r\n * This is a helper method which will call throwInternal on the passed logger, will throw exceptions in\r\n * debug mode or attempt to log the error as a console warning. This helper is provided mostly to better\r\n * support minification as logger.throwInternal() will not compress the publish \"throwInternal\" used throughout\r\n * the code.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param severity {LoggingSeverity} - The severity of the log message\r\n * @param message {_InternalLogMessage} - The log message.\r\n */\r\nexport function _throwInternal(logger, severity, msgId, msg, properties, isUserAct) {\r\n    if (isUserAct === void 0) { isUserAct = false; }\r\n    _getLogger(logger).throwInternal(severity, msgId, msg, properties, isUserAct);\r\n}\r\n/**\r\n * This is a helper method which will call warnToConsole on the passed logger with the provided message.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param message {_InternalLogMessage} - The log message.\r\n */\r\nexport function _warnToConsole(logger, message) {\r\n    _getLogger(logger)[STR_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](message);\r\n}\r\n/**\r\n * Logs a message to the internal queue.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param severity {LoggingSeverity} - The severity of the log message\r\n * @param message {_InternalLogMessage} - The message to log.\r\n */\r\nexport function _logInternalMessage(logger, severity, message) {\r\n    _getLogger(logger)[_DYN_LOG_INTERNAL_MESSAGE /* @min:%2elogInternalMessage */](severity, message);\r\n}\r\n//# sourceMappingURL=DiagnosticLogger.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { getGlobal, strShimObject, strShimPrototype, strShimUndefined } from \"@microsoft/applicationinsights-shims\";\r\nimport { _DYN_CALL, _DYN_INDEX_OF, _DYN_LENGTH, _DYN_NAME, _DYN_SPLIT, _DYN_TO_LOWER_CASE, _DYN_USER_AGENT } from \"../__DynamicConstants\";\r\nimport { isString, isUndefined, strContains } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n/**\r\n * This file exists to hold environment utilities that are required to check and\r\n * validate the current operating environment. Unless otherwise required, please\r\n * only use defined methods (functions) in this class so that users of these\r\n * functions/properties only need to include those that are used within their own modules.\r\n */\r\nvar strWindow = \"window\";\r\nvar strDocument = \"document\";\r\nvar strDocumentMode = \"documentMode\";\r\nvar strNavigator = \"navigator\";\r\nvar strHistory = \"history\";\r\nvar strLocation = \"location\";\r\nvar strConsole = \"console\";\r\nvar strPerformance = \"performance\";\r\nvar strJSON = \"JSON\";\r\nvar strCrypto = \"crypto\";\r\nvar strMsCrypto = \"msCrypto\";\r\nvar strReactNative = \"ReactNative\";\r\nvar strMsie = \"msie\";\r\nvar strTrident = \"trident/\";\r\nvar strXMLHttpRequest = \"XMLHttpRequest\";\r\nvar _isTrident = null;\r\nvar _navUserAgentCheck = null;\r\nvar _enableMocks = false;\r\nvar _useXDomainRequest = null;\r\nvar _beaconsSupported = null;\r\nfunction _hasProperty(theClass, property) {\r\n    var supported = false;\r\n    if (theClass) {\r\n        try {\r\n            supported = property in theClass;\r\n            if (!supported) {\r\n                var proto = theClass[strShimPrototype];\r\n                if (proto) {\r\n                    supported = property in proto;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Do Nothing\r\n        }\r\n        if (!supported) {\r\n            try {\r\n                var tmp = new theClass();\r\n                supported = !isUndefined(tmp[property]);\r\n            }\r\n            catch (e) {\r\n                // Do Nothing\r\n            }\r\n        }\r\n    }\r\n    return supported;\r\n}\r\n/**\r\n * Enable the lookup of test mock objects if requested\r\n * @param enabled\r\n */\r\nexport function setEnableEnvMocks(enabled) {\r\n    _enableMocks = enabled;\r\n}\r\n/**\r\n * Return the named global object if available, will return null if the object is not available.\r\n * @param name The globally named object\r\n */\r\nexport function getGlobalInst(name) {\r\n    var gbl = getGlobal();\r\n    if (gbl && gbl[name]) {\r\n        return gbl[name];\r\n    }\r\n    // Test workaround, for environments where <global>.window (when global == window) doesn't return the base window\r\n    if (name === strWindow && hasWindow()) {\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        return window;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Checks if window object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a window\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: window is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasWindow() {\r\n    return Boolean(typeof window === strShimObject && window);\r\n}\r\n/**\r\n * Returns the global window object if it is present otherwise null.\r\n * This helper is used to access the window object without causing an exception\r\n * \"Uncaught ReferenceError: window is not defined\"\r\n */\r\nexport function getWindow() {\r\n    if (hasWindow()) {\r\n        return window;\r\n    }\r\n    // Return the global instance or null\r\n    return getGlobalInst(strWindow);\r\n}\r\n/**\r\n * Checks if document object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a document\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: document is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasDocument() {\r\n    return Boolean(typeof document === strShimObject && document);\r\n}\r\n/**\r\n * Returns the global document object if it is present otherwise null.\r\n * This helper is used to access the document object without causing an exception\r\n * \"Uncaught ReferenceError: document is not defined\"\r\n */\r\nexport function getDocument() {\r\n    if (hasDocument()) {\r\n        return document;\r\n    }\r\n    return getGlobalInst(strDocument);\r\n}\r\n/**\r\n * Checks if navigator object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a navigator\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: navigator is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasNavigator() {\r\n    return Boolean(typeof navigator === strShimObject && navigator);\r\n}\r\n/**\r\n * Returns the global navigator object if it is present otherwise null.\r\n * This helper is used to access the navigator object without causing an exception\r\n * \"Uncaught ReferenceError: navigator is not defined\"\r\n */\r\nexport function getNavigator() {\r\n    if (hasNavigator()) {\r\n        return navigator;\r\n    }\r\n    return getGlobalInst(strNavigator);\r\n}\r\n/**\r\n * Checks if history object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a history\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: history is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasHistory() {\r\n    return Boolean(typeof history === strShimObject && history);\r\n}\r\n/**\r\n * Returns the global history object if it is present otherwise null.\r\n * This helper is used to access the history object without causing an exception\r\n * \"Uncaught ReferenceError: history is not defined\"\r\n */\r\nexport function getHistory() {\r\n    if (hasHistory()) {\r\n        return history;\r\n    }\r\n    return getGlobalInst(strHistory);\r\n}\r\n/**\r\n * Returns the global location object if it is present otherwise null.\r\n * This helper is used to access the location object without causing an exception\r\n * \"Uncaught ReferenceError: location is not defined\"\r\n */\r\nexport function getLocation(checkForMock) {\r\n    if (checkForMock && _enableMocks) {\r\n        var mockLocation = getGlobalInst(\"__mockLocation\");\r\n        if (mockLocation) {\r\n            return mockLocation;\r\n        }\r\n    }\r\n    if (typeof location === strShimObject && location) {\r\n        return location;\r\n    }\r\n    return getGlobalInst(strLocation);\r\n}\r\n/**\r\n * Returns the global console object\r\n */\r\nexport function getConsole() {\r\n    if (typeof console !== strShimUndefined) {\r\n        return console;\r\n    }\r\n    return getGlobalInst(strConsole);\r\n}\r\n/**\r\n * Returns the performance object if it is present otherwise null.\r\n * This helper is used to access the performance object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getPerformance() {\r\n    return getGlobalInst(strPerformance);\r\n}\r\n/**\r\n * Checks if JSON object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a history\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: JSON is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasJSON() {\r\n    return Boolean((typeof JSON === strShimObject && JSON) || getGlobalInst(strJSON) !== null);\r\n}\r\n/**\r\n * Returns the global JSON object if it is present otherwise null.\r\n * This helper is used to access the JSON object without causing an exception\r\n * \"Uncaught ReferenceError: JSON is not defined\"\r\n */\r\nexport function getJSON() {\r\n    if (hasJSON()) {\r\n        return JSON || getGlobalInst(strJSON);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getCrypto() {\r\n    return getGlobalInst(strCrypto);\r\n}\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getMsCrypto() {\r\n    return getGlobalInst(strMsCrypto);\r\n}\r\n/**\r\n * Returns whether the environment is reporting that we are running in a React Native Environment\r\n */\r\nexport function isReactNative() {\r\n    // If running in React Native, navigator.product will be populated\r\n    var nav = getNavigator();\r\n    if (nav && nav.product) {\r\n        return nav.product === strReactNative;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Identifies whether the current environment appears to be IE\r\n */\r\nexport function isIE() {\r\n    var nav = getNavigator();\r\n    if (nav && (nav[_DYN_USER_AGENT /* @min:%2euserAgent */] !== _navUserAgentCheck || _isTrident === null)) {\r\n        // Added to support test mocking of the user agent\r\n        _navUserAgentCheck = nav[_DYN_USER_AGENT /* @min:%2euserAgent */];\r\n        var userAgent = (_navUserAgentCheck || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n        _isTrident = (strContains(userAgent, strMsie) || strContains(userAgent, strTrident));\r\n    }\r\n    return _isTrident;\r\n}\r\n/**\r\n * Gets IE version returning the document emulation mode if we are running on IE, or null otherwise\r\n */\r\nexport function getIEVersion(userAgentStr) {\r\n    if (userAgentStr === void 0) { userAgentStr = null; }\r\n    if (!userAgentStr) {\r\n        var navigator_1 = getNavigator() || {};\r\n        userAgentStr = navigator_1 ? (navigator_1[_DYN_USER_AGENT /* @min:%2euserAgent */] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() : STR_EMPTY;\r\n    }\r\n    var ua = (userAgentStr || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    // Also check for documentMode in case X-UA-Compatible meta tag was included in HTML.\r\n    if (strContains(ua, strMsie)) {\r\n        var doc = getDocument() || {};\r\n        return Math.max(parseInt(ua[_DYN_SPLIT /* @min:%2esplit */](strMsie)[1]), (doc[strDocumentMode] || 0));\r\n    }\r\n    else if (strContains(ua, strTrident)) {\r\n        var tridentVer = parseInt(ua[_DYN_SPLIT /* @min:%2esplit */](strTrident)[1]);\r\n        if (tridentVer) {\r\n            return tridentVer + 4;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Returns string representation of an object suitable for diagnostics logging.\r\n */\r\nexport function dumpObj(object) {\r\n    var objectTypeDump = Object[strShimPrototype].toString[_DYN_CALL /* @min:%2ecall */](object);\r\n    var propertyValueDump = STR_EMPTY;\r\n    if (objectTypeDump === \"[object Error]\") {\r\n        propertyValueDump = \"{ stack: '\" + object.stack + \"', message: '\" + object.message + \"', name: '\" + object[_DYN_NAME /* @min:%2ename */] + \"'\";\r\n    }\r\n    else if (hasJSON()) {\r\n        propertyValueDump = getJSON().stringify(object);\r\n    }\r\n    return objectTypeDump + propertyValueDump;\r\n}\r\nexport function isSafari(userAgentStr) {\r\n    if (!userAgentStr || !isString(userAgentStr)) {\r\n        var navigator_2 = getNavigator() || {};\r\n        userAgentStr = navigator_2 ? (navigator_2[_DYN_USER_AGENT /* @min:%2euserAgent */] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() : STR_EMPTY;\r\n    }\r\n    var ua = (userAgentStr || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    return (ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"safari\") >= 0);\r\n}\r\n/**\r\n * Checks if HTML5 Beacons are supported in the current environment.\r\n * @returns True if supported, false otherwise.\r\n */\r\nexport function isBeaconsSupported() {\r\n    if (_beaconsSupported === null) {\r\n        _beaconsSupported = hasNavigator() && Boolean(getNavigator().sendBeacon);\r\n    }\r\n    return _beaconsSupported;\r\n}\r\n/**\r\n * Checks if the Fetch API is supported in the current environment.\r\n * @param withKeepAlive - [Optional] If True, check if fetch is available and it supports the keepalive feature, otherwise only check if fetch is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isFetchSupported(withKeepAlive) {\r\n    var isSupported = false;\r\n    try {\r\n        isSupported = !!getGlobalInst(\"fetch\");\r\n        var request = getGlobalInst(\"Request\");\r\n        if (isSupported && withKeepAlive && request) {\r\n            isSupported = _hasProperty(request, \"keepalive\");\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n    return isSupported;\r\n}\r\nexport function useXDomainRequest() {\r\n    if (_useXDomainRequest === null) {\r\n        _useXDomainRequest = (typeof XDomainRequest !== strShimUndefined);\r\n        if (_useXDomainRequest && isXhrSupported()) {\r\n            _useXDomainRequest = _useXDomainRequest && !_hasProperty(getGlobalInst(strXMLHttpRequest), \"withCredentials\");\r\n        }\r\n    }\r\n    return _useXDomainRequest;\r\n}\r\n/**\r\n * Checks if XMLHttpRequest is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isXhrSupported() {\r\n    var isSupported = false;\r\n    try {\r\n        var xmlHttpRequest = getGlobalInst(strXMLHttpRequest);\r\n        isSupported = !!xmlHttpRequest;\r\n    }\r\n    catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n    return isSupported;\r\n}\r\nfunction _getNamedValue(values, name) {\r\n    if (values) {\r\n        for (var i = 0; i < values[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n            var value = values[i];\r\n            if (value[_DYN_NAME /* @min:%2ename */]) {\r\n                if (value[_DYN_NAME /* @min:%2ename */] === name) {\r\n                    return value;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {};\r\n}\r\n/**\r\n * Helper function to fetch the named meta-tag from the page.\r\n * @param name\r\n */\r\nexport function findMetaTag(name) {\r\n    var doc = getDocument();\r\n    if (doc && name) {\r\n        // Look for a meta-tag\r\n        return _getNamedValue(doc.querySelectorAll(\"meta\"), name).content;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Helper function to fetch the named server timing value from the page response (first navigation event).\r\n * @param name\r\n */\r\nexport function findNamedServerTiming(name) {\r\n    var value;\r\n    var perf = getPerformance();\r\n    if (perf) {\r\n        // Try looking for a server-timing header\r\n        var navPerf = perf.getEntriesByType(\"navigation\") || [];\r\n        value = _getNamedValue((navPerf[_DYN_LENGTH /* @min:%2elength */] > 0 ? navPerf[0] : {}).serverTiming, name).description;\r\n    }\r\n    return value;\r\n}\r\n//# sourceMappingURL=EnvUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_HANDLER, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_REPLACE, _DYN_SPLICE, _DYN_SPLIT, _DYN_TYPE } from \"../__DynamicConstants\";\r\nimport { createElmNodeData, createUniqueNamespace } from \"./DataCacheHelper\";\r\nimport { getDocument, getWindow } from \"./EnvUtils\";\r\nimport { arrForEach, arrIndexOf, isArray, objForEachKey, objKeys } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// Added to help with minfication\r\nvar strOnPrefix = \"on\";\r\nvar strAttachEvent = \"attachEvent\";\r\nvar strAddEventHelper = \"addEventListener\";\r\nvar strDetachEvent = \"detachEvent\";\r\nvar strRemoveEventListener = \"removeEventListener\";\r\nvar strEvents = \"events\";\r\nvar strVisibilityChangeEvt = \"visibilitychange\";\r\nvar strPageHide = \"pagehide\";\r\nvar strPageShow = \"pageshow\";\r\nvar strUnload = \"unload\";\r\nvar strBeforeUnload = \"beforeunload\";\r\nvar strPageHideNamespace = createUniqueNamespace(\"aiEvtPageHide\");\r\nvar strPageShowNamespace = createUniqueNamespace(\"aiEvtPageShow\");\r\nvar rRemoveEmptyNs = /\\.[\\.]+/g;\r\nvar rRemoveTrailingEmptyNs = /[\\.]+$/;\r\nvar _guid = 1;\r\nvar elmNodeData = createElmNodeData(\"events\");\r\nvar eventNamespace = /^([^.]*)(?:\\.(.+)|)/;\r\nfunction _normalizeNamespace(name) {\r\n    if (name && name[_DYN_REPLACE /* @min:%2ereplace */]) {\r\n        return name[_DYN_REPLACE /* @min:%2ereplace */](/^[\\s\\.]+|(?=[\\s\\.])[\\.\\s]+$/g, STR_EMPTY);\r\n    }\r\n    return name;\r\n}\r\nfunction _getEvtNamespace(eventName, evtNamespace) {\r\n    var _a;\r\n    if (evtNamespace) {\r\n        var theNamespace_1 = STR_EMPTY;\r\n        if (isArray(evtNamespace)) {\r\n            theNamespace_1 = STR_EMPTY;\r\n            arrForEach(evtNamespace, function (name) {\r\n                name = _normalizeNamespace(name);\r\n                if (name) {\r\n                    if (name[0] !== \".\") {\r\n                        name = \".\" + name;\r\n                    }\r\n                    theNamespace_1 += name;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            theNamespace_1 = _normalizeNamespace(evtNamespace);\r\n        }\r\n        if (theNamespace_1) {\r\n            if (theNamespace_1[0] !== \".\") {\r\n                theNamespace_1 = \".\" + theNamespace_1;\r\n            }\r\n            // We may only have the namespace and not an eventName\r\n            eventName = (eventName || STR_EMPTY) + theNamespace_1;\r\n        }\r\n    }\r\n    var parsedEvent = (eventNamespace.exec(eventName || STR_EMPTY) || []);\r\n    return _a = {},\r\n        _a[_DYN_TYPE /* @min:type */] = parsedEvent[1],\r\n        _a.ns = ((parsedEvent[2] || STR_EMPTY).replace(rRemoveEmptyNs, \".\").replace(rRemoveTrailingEmptyNs, STR_EMPTY)[_DYN_SPLIT /* @min:%2esplit */](\".\").sort()).join(\".\"),\r\n        _a;\r\n}\r\n/**\r\n * Get all of the registered events on the target object, this is primarily used for testing cleanup but may also be used by\r\n * applications to remove their own events\r\n * @param target - The EventTarget that has registered events\r\n * @param eventName - [Optional] The name of the event to return the registered handlers and full name (with namespaces)\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n */\r\nexport function __getRegisteredEvents(target, eventName, evtNamespace) {\r\n    var theEvents = [];\r\n    var eventCache = elmNodeData.get(target, strEvents, {}, false);\r\n    var evtName = _getEvtNamespace(eventName, evtNamespace);\r\n    objForEachKey(eventCache, function (evtType, registeredEvents) {\r\n        arrForEach(registeredEvents, function (value) {\r\n            var _a;\r\n            if (!evtName[_DYN_TYPE /* @min:%2etype */] || evtName[_DYN_TYPE /* @min:%2etype */] === value.evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n                if (!evtName.ns || evtName.ns === evtName.ns) {\r\n                    theEvents[_DYN_PUSH /* @min:%2epush */]((_a = {},\r\n                        _a[_DYN_NAME /* @min:name */] = value.evtName[_DYN_TYPE /* @min:%2etype */] + (value.evtName.ns ? \".\" + value.evtName.ns : STR_EMPTY),\r\n                        _a.handler = value[_DYN_HANDLER /* @min:%2ehandler */],\r\n                        _a));\r\n                }\r\n            }\r\n        });\r\n    });\r\n    return theEvents;\r\n}\r\n// Exported for internal unit testing only\r\nfunction _getRegisteredEvents(target, evtName, addDefault) {\r\n    if (addDefault === void 0) { addDefault = true; }\r\n    var aiEvts = elmNodeData.get(target, strEvents, {}, addDefault);\r\n    var registeredEvents = aiEvts[evtName];\r\n    if (!registeredEvents) {\r\n        registeredEvents = aiEvts[evtName] = [];\r\n    }\r\n    return registeredEvents;\r\n}\r\nfunction _doDetach(obj, evtName, handlerRef, useCapture) {\r\n    if (obj && evtName && evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n        if (obj[strRemoveEventListener]) {\r\n            obj[strRemoveEventListener](evtName[_DYN_TYPE /* @min:%2etype */], handlerRef, useCapture);\r\n        }\r\n        else if (obj[strDetachEvent]) {\r\n            obj[strDetachEvent](strOnPrefix + evtName[_DYN_TYPE /* @min:%2etype */], handlerRef);\r\n        }\r\n    }\r\n}\r\nfunction _doAttach(obj, evtName, handlerRef, useCapture) {\r\n    var result = false;\r\n    if (obj && evtName && evtName[_DYN_TYPE /* @min:%2etype */] && handlerRef) {\r\n        if (obj[strAddEventHelper]) {\r\n            // all browsers except IE before version 9\r\n            obj[strAddEventHelper](evtName[_DYN_TYPE /* @min:%2etype */], handlerRef, useCapture);\r\n            result = true;\r\n        }\r\n        else if (obj[strAttachEvent]) {\r\n            // IE before version 9\r\n            obj[strAttachEvent](strOnPrefix + evtName[_DYN_TYPE /* @min:%2etype */], handlerRef);\r\n            result = true;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction _doUnregister(target, events, evtName, unRegFn) {\r\n    var idx = events[_DYN_LENGTH /* @min:%2elength */];\r\n    while (idx--) {\r\n        var theEvent = events[idx];\r\n        if (theEvent) {\r\n            if (!evtName.ns || evtName.ns === theEvent.evtName.ns) {\r\n                if (!unRegFn || unRegFn(theEvent)) {\r\n                    _doDetach(target, theEvent.evtName, theEvent[_DYN_HANDLER /* @min:%2ehandler */], theEvent.capture);\r\n                    // Remove the registered event\r\n                    events[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction _unregisterEvents(target, evtName, unRegFn) {\r\n    if (evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n        _doUnregister(target, _getRegisteredEvents(target, evtName[_DYN_TYPE /* @min:%2etype */]), evtName, unRegFn);\r\n    }\r\n    else {\r\n        var eventCache = elmNodeData.get(target, strEvents, {});\r\n        objForEachKey(eventCache, function (evtType, events) {\r\n            _doUnregister(target, events, evtName, unRegFn);\r\n        });\r\n        // Cleanup\r\n        if (objKeys(eventCache)[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n            elmNodeData.kill(target, strEvents);\r\n        }\r\n    }\r\n}\r\nexport function mergeEvtNamespace(theNamespace, namespaces) {\r\n    var newNamespaces;\r\n    if (namespaces) {\r\n        if (isArray(namespaces)) {\r\n            newNamespaces = [theNamespace].concat(namespaces);\r\n        }\r\n        else {\r\n            newNamespaces = [theNamespace, namespaces];\r\n        }\r\n        // resort the namespaces so they are always in order\r\n        newNamespaces = (_getEvtNamespace(\"xx\", newNamespaces).ns)[_DYN_SPLIT /* @min:%2esplit */](\".\");\r\n    }\r\n    else {\r\n        newNamespaces = theNamespace;\r\n    }\r\n    return newNamespaces;\r\n}\r\n/**\r\n * Binds the specified function to an event, so that the function gets called whenever the event fires on the object\r\n * @param obj Object to add the event too.\r\n * @param eventName String that specifies any of the standard DHTML Events without \"on\" prefix, if may also include an optional (dot \".\" prefixed)\r\n * namespaces \"click\" \"click.mynamespace\" in addition to specific namespaces.\r\n * @param handlerRef Pointer that specifies the function to call when event fires\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n * @param useCapture [Optional] Defaults to false\r\n * @returns True if the function was bound successfully to the event, otherwise false\r\n */\r\nexport function eventOn(target, eventName, handlerRef, evtNamespace, useCapture) {\r\n    var _a;\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    var result = false;\r\n    if (target) {\r\n        try {\r\n            var evtName = _getEvtNamespace(eventName, evtNamespace);\r\n            result = _doAttach(target, evtName, handlerRef, useCapture);\r\n            if (result && elmNodeData.accept(target)) {\r\n                var registeredEvent = (_a = {\r\n                        guid: _guid++,\r\n                        evtName: evtName\r\n                    },\r\n                    _a[_DYN_HANDLER /* @min:handler */] = handlerRef,\r\n                    _a.capture = useCapture,\r\n                    _a);\r\n                _getRegisteredEvents(target, evtName.type)[_DYN_PUSH /* @min:%2epush */](registeredEvent);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Just Ignore any error so that we don't break any execution path\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Removes an event handler for the specified event\r\n * @param Object to remove the event from\r\n * @param eventName {string} - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param handlerRef {any} - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n * @param useCapture [Optional] Defaults to false\r\n */\r\nexport function eventOff(target, eventName, handlerRef, evtNamespace, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    if (target) {\r\n        try {\r\n            var evtName_1 = _getEvtNamespace(eventName, evtNamespace);\r\n            var found_1 = false;\r\n            _unregisterEvents(target, evtName_1, function (regEvent) {\r\n                if ((evtName_1.ns && !handlerRef) || regEvent[_DYN_HANDLER /* @min:%2ehandler */] === handlerRef) {\r\n                    found_1 = true;\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (!found_1) {\r\n                // fallback to try and remove as requested\r\n                _doDetach(target, evtName_1, handlerRef, useCapture);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Just Ignore any error so that we don't break any execution path\r\n        }\r\n    }\r\n}\r\n/**\r\n * Binds the specified function to an event, so that the function gets called whenever the event fires on the object\r\n * @param obj Object to add the event too.\r\n * @param eventNameWithoutOn String that specifies any of the standard DHTML Events without \"on\" prefix and optional (dot \".\" prefixed) namespaces \"click\" \"click.mynamespace\".\r\n * @param handlerRef Pointer that specifies the function to call when event fires\r\n * @param useCapture [Optional] Defaults to false\r\n * @returns True if the function was bound successfully to the event, otherwise false\r\n */\r\nexport function attachEvent(obj, eventNameWithoutOn, handlerRef, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    return eventOn(obj, eventNameWithoutOn, handlerRef, null, useCapture);\r\n}\r\n/**\r\n * Removes an event handler for the specified event\r\n * @param Object to remove the event from\r\n * @param eventNameWithoutOn {string} - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param handlerRef {any} - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param useCapture [Optional] Defaults to false\r\n */\r\nexport function detachEvent(obj, eventNameWithoutOn, handlerRef, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    eventOff(obj, eventNameWithoutOn, handlerRef, null, useCapture);\r\n}\r\n/**\r\n * Trys to add an event handler for the specified event to the window, body and document\r\n * @param eventName {string} - The name of the event\r\n * @param callback {any} - The callback function that needs to be executed for the given event\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @return {boolean} - true if the handler was successfully added\r\n */\r\nexport function addEventHandler(eventName, callback, evtNamespace) {\r\n    var result = false;\r\n    var w = getWindow();\r\n    if (w) {\r\n        result = eventOn(w, eventName, callback, evtNamespace);\r\n        result = eventOn(w[\"body\"], eventName, callback, evtNamespace) || result;\r\n    }\r\n    var doc = getDocument();\r\n    if (doc) {\r\n        result = eventOn(doc, eventName, callback, evtNamespace) || result;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Trys to remove event handler(s) for the specified event/namespace to the window, body and document\r\n * @param eventName {string} - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param callback {any} - - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n */\r\nexport function removeEventHandler(eventName, callback, evtNamespace) {\r\n    var w = getWindow();\r\n    if (w) {\r\n        eventOff(w, eventName, callback, evtNamespace);\r\n        eventOff(w[\"body\"], eventName, callback, evtNamespace);\r\n    }\r\n    var doc = getDocument();\r\n    if (doc) {\r\n        eventOff(doc, eventName, callback, evtNamespace);\r\n    }\r\n}\r\n/**\r\n * Bind the listener to the array of events\r\n * @param events An string array of event names to bind the listener to\r\n * @param listener The event callback to call when the event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nfunction _addEventListeners(events, listener, excludeEvents, evtNamespace) {\r\n    var added = false;\r\n    if (listener && events && events[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        arrForEach(events, function (name) {\r\n            if (name) {\r\n                if (!excludeEvents || arrIndexOf(excludeEvents, name) === -1) {\r\n                    added = addEventHandler(name, listener, evtNamespace) || added;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return added;\r\n}\r\n/**\r\n * Bind the listener to the array of events\r\n * @param events An string array of event names to bind the listener to\r\n * @param listener The event callback to call when the event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addEventListeners(events, listener, excludeEvents, evtNamespace) {\r\n    var added = false;\r\n    if (listener && events && isArray(events)) {\r\n        added = _addEventListeners(events, listener, excludeEvents, evtNamespace);\r\n        if (!added && excludeEvents && excludeEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            // Failed to add any listeners and we excluded some, so just attempt to add the excluded events\r\n            added = _addEventListeners(events, listener, null, evtNamespace);\r\n        }\r\n    }\r\n    return added;\r\n}\r\n/**\r\n * Remove the listener from the array of events\r\n * @param events An string array of event names to bind the listener to\r\n * @param listener The event callback to call when the event is triggered\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n */\r\nexport function removeEventListeners(events, listener, evtNamespace) {\r\n    if (events && isArray(events)) {\r\n        arrForEach(events, function (name) {\r\n            if (name) {\r\n                removeEventHandler(name, listener, evtNamespace);\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Listen to the 'beforeunload', 'unload' and 'pagehide' events which indicates a page unload is occurring,\r\n * this does NOT listen to the 'visibilitychange' event as while it does indicate that the page is being hidden\r\n * it does not *necessarily* mean that the page is being completely unloaded, it can mean that the user is\r\n * just navigating to a different Tab and may come back (without unloading the page). As such you may also\r\n * need to listen to the 'addPageHideEventListener' and 'addPageShowEventListener' events.\r\n * @param listener - The event callback to call when a page unload event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked, unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageUnloadEventListener(listener, excludeEvents, evtNamespace) {\r\n    // Hook the unload event for the document, window and body to ensure that the client events are flushed to the server\r\n    // As just hooking the window does not always fire (on chrome) for page navigation's.\r\n    return addEventListeners([strBeforeUnload, strUnload, strPageHide], listener, excludeEvents, evtNamespace);\r\n}\r\n/**\r\n * Remove any matching 'beforeunload', 'unload' and 'pagehide' events that may have been added via addEventListener,\r\n * addEventListeners, addPageUnloadEventListener or addPageHideEventListener.\r\n * @param listener - The specific event callback to to be removed\r\n * @param evtNamespace - [Optional] Namespace(s) uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function removePageUnloadEventListener(listener, evtNamespace) {\r\n    removeEventListeners([strBeforeUnload, strUnload, strPageHide], listener, evtNamespace);\r\n}\r\n/**\r\n * Listen to the pagehide and visibility changing to 'hidden' events, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when if you plan to call\r\n * removePageShowEventListener as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The event callback to call when a page hide event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] A Namespace to append to the event listeners so they can be uniquely identified and removed\r\n * based on this namespace. This call also adds an additional unique \"pageshow\" namespace to the events\r\n * so that only the matching \"removePageHideEventListener\" can remove these events.\r\n * Suggestion: pass as true if you are also calling addPageUnloadEventListener as that also hooks pagehide\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageHideEventListener(listener, excludeEvents, evtNamespace) {\r\n    function _handlePageVisibility(evt) {\r\n        var doc = getDocument();\r\n        if (listener && doc && doc.visibilityState === \"hidden\") {\r\n            listener(evt);\r\n        }\r\n    }\r\n    // add the unique page show namespace to any provided namespace so we can only remove the ones added by \"pagehide\"\r\n    var newNamespaces = mergeEvtNamespace(strPageHideNamespace, evtNamespace);\r\n    var pageUnloadAdded = _addEventListeners([strPageHide], listener, excludeEvents, newNamespaces);\r\n    if (!excludeEvents || arrIndexOf(excludeEvents, strVisibilityChangeEvt) === -1) {\r\n        pageUnloadAdded = _addEventListeners([strVisibilityChangeEvt], _handlePageVisibility, excludeEvents, newNamespaces) || pageUnloadAdded;\r\n    }\r\n    if (!pageUnloadAdded && excludeEvents) {\r\n        // Failed to add any listeners and we where requested to exclude some, so just call again without excluding anything\r\n        pageUnloadAdded = addPageHideEventListener(listener, null, evtNamespace);\r\n    }\r\n    return pageUnloadAdded;\r\n}\r\n/**\r\n * Removes the pageHide event listeners added by addPageHideEventListener, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when calling addPageHideEventListener\r\n * as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The specific listener to remove for the 'pageshow' event only (ignored for 'visibilitychange')\r\n * @param evtNamespace - The unique namespace used when calling addPageShowEventListener\r\n */\r\nexport function removePageHideEventListener(listener, evtNamespace) {\r\n    // add the unique page show namespace to any provided namespace so we only remove the ones added by \"pagehide\"\r\n    var newNamespaces = mergeEvtNamespace(strPageHideNamespace, evtNamespace);\r\n    removeEventListeners([strPageHide], listener, newNamespaces);\r\n    removeEventListeners([strVisibilityChangeEvt], null, newNamespaces);\r\n}\r\n/**\r\n * Listen to the pageshow and visibility changing to 'visible' events, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when if you plan to call\r\n * removePageShowEventListener as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The event callback to call when a page is show event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional/Recommended] A Namespace to append to the event listeners so they can be uniquely\r\n * identified and removed based on this namespace. This call also adds an additional unique \"pageshow\" namespace to the events\r\n * so that only the matching \"removePageShowEventListener\" can remove these events.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageShowEventListener(listener, excludeEvents, evtNamespace) {\r\n    function _handlePageVisibility(evt) {\r\n        var doc = getDocument();\r\n        if (listener && doc && doc.visibilityState === \"visible\") {\r\n            listener(evt);\r\n        }\r\n    }\r\n    // add the unique page show namespace to any provided namespace so we can only remove the ones added by \"pageshow\"\r\n    var newNamespaces = mergeEvtNamespace(strPageShowNamespace, evtNamespace);\r\n    var pageShowAdded = _addEventListeners([strPageShow], listener, excludeEvents, newNamespaces);\r\n    pageShowAdded = _addEventListeners([strVisibilityChangeEvt], _handlePageVisibility, excludeEvents, newNamespaces) || pageShowAdded;\r\n    if (!pageShowAdded && excludeEvents) {\r\n        // Failed to add any listeners and we where requested to exclude some, so just call again without excluding anything\r\n        pageShowAdded = addPageShowEventListener(listener, null, evtNamespace);\r\n    }\r\n    return pageShowAdded;\r\n}\r\n/**\r\n * Removes the pageShow event listeners added by addPageShowEventListener, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when calling addPageShowEventListener\r\n * as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The specific listener to remove for the 'pageshow' event only (ignored for 'visibilitychange')\r\n * @param evtNamespace - The unique namespace used when calling addPageShowEventListener\r\n */\r\nexport function removePageShowEventListener(listener, evtNamespace) {\r\n    // add the unique page show namespace to any provided namespace so we only remove the ones added by \"pageshow\"\r\n    var newNamespaces = mergeEvtNamespace(strPageShowNamespace, evtNamespace);\r\n    removeEventListeners([strPageShow], listener, newNamespaces);\r\n    removeEventListeners([strVisibilityChangeEvt], null, newNamespaces);\r\n}\r\n//# sourceMappingURL=EventHelpers.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { ObjAssign, ObjClass, ObjDefineProperty, ObjHasOwnProperty, ObjProto, strShimFunction, strShimObject, strShimPrototype, strShimUndefined, throwTypeError } from \"@microsoft/applicationinsights-shims\";\r\nimport { _DYN_APPLY, _DYN_CALL, _DYN_INDEX_OF, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_REPLACE } from \"../__DynamicConstants\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// RESTRICT and AVOID circular dependencies you should not import other contained modules or export the contents of this file directly\r\n// Added to help with minfication\r\nvar strToISOString = \"toISOString\";\r\nvar cStrEndsWith = \"endsWith\";\r\nvar cStrStartsWith = \"startsWith\";\r\nvar strIndexOf = \"indexOf\";\r\nvar strMap = \"map\";\r\nvar strReduce = \"reduce\";\r\nvar cStrTrim = \"trim\";\r\nvar strToString = \"toString\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar str__Proto = \"__proto__\";\r\n/**\r\n  * Constant string defined to support minimization\r\n  * @ignore\r\n  */\r\nvar strConstructor = \"constructor\";\r\nvar _objDefineProperty = ObjDefineProperty;\r\nvar _objFreeze = ObjClass.freeze;\r\nvar _objSeal = ObjClass.seal;\r\nvar _objKeys = ObjClass.keys;\r\nvar StringProto = String[strShimPrototype];\r\nvar _strTrim = StringProto[cStrTrim];\r\nvar _strEndsWith = StringProto[cStrEndsWith];\r\nvar _strStartsWith = StringProto[cStrStartsWith];\r\nvar DateProto = Date[strShimPrototype];\r\nvar _dataToISOString = DateProto[strToISOString];\r\nvar _isArray = Array.isArray;\r\nvar _objToString = ObjProto[strToString];\r\nvar _fnToString = ObjHasOwnProperty[strToString];\r\n// Cache what this browser reports as the object function constructor (as a string)\r\nvar _objFunctionString = _fnToString[_DYN_CALL /* @min:%2ecall */](ObjClass);\r\nvar rCamelCase = /-([a-z])/g;\r\nvar rNormalizeInvalid = /([^\\w\\d_$])/g;\r\nvar rLeadingNumeric = /^(\\d+[\\w\\d_$])/;\r\n/**\r\n * Pre-lookup to check if we are running on a modern browser (i.e. not IE8)\r\n * @ignore\r\n */\r\nvar _objGetPrototypeOf = Object[\"getPrototypeOf\"];\r\n/**\r\n  * Helper used to get the prototype of the target object as getPrototypeOf is not available in an ES3 environment.\r\n  * @ignore\r\n  */\r\nexport function _getObjProto(target) {\r\n    if (target) {\r\n        // This method doesn't existing in older browsers (e.g. IE8)\r\n        if (_objGetPrototypeOf) {\r\n            return _objGetPrototypeOf(target);\r\n        }\r\n        // target[Constructor] May break if the constructor has been changed or removed\r\n        var newProto = target[str__Proto] || target[strShimPrototype] || target[strConstructor];\r\n        if (newProto) {\r\n            return newProto;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function objToString(obj) {\r\n    return _objToString[_DYN_CALL /* @min:%2ecall */](obj);\r\n}\r\nexport function isTypeof(value, theType) {\r\n    return typeof value === theType;\r\n}\r\nexport function isUndefined(value) {\r\n    return value === undefined || typeof value === strShimUndefined;\r\n}\r\nexport function isNotUndefined(value) {\r\n    return !isUndefined(value);\r\n}\r\nexport function isNullOrUndefined(value) {\r\n    return (value === null || isUndefined(value));\r\n}\r\nexport function isNotNullOrUndefined(value) {\r\n    return !isNullOrUndefined(value);\r\n}\r\nexport function hasOwnProperty(obj, prop) {\r\n    return !!(obj && ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](obj, prop));\r\n}\r\nexport function isObject(value) {\r\n    // Changing to inline for performance\r\n    return !!(value && typeof value === strShimObject);\r\n}\r\nexport function isFunction(value) {\r\n    // Changing to inline for performance\r\n    return !!(value && typeof value === strShimFunction);\r\n}\r\nexport function isPromiseLike(value) {\r\n    return value && isFunction(value.then);\r\n}\r\n/**\r\n * Validates that the string name conforms to the JS IdentifierName specification and if not\r\n * normalizes the name so that it would. This method does not identify or change any keywords\r\n * meaning that if you pass in a known keyword the same value will be returned.\r\n * This is a simplified version\r\n * @param name The name to validate\r\n */\r\nexport function normalizeJsName(name) {\r\n    var value = name;\r\n    if (value && isString(value)) {\r\n        // CamelCase everything after the \"-\" and remove the dash\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rCamelCase, function (_all, letter) {\r\n            return letter.toUpperCase();\r\n        });\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rNormalizeInvalid, \"_\");\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rLeadingNumeric, function (_all, match) {\r\n            return \"_\" + match;\r\n        });\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * This is a helper function for the equivalent of arForEach(objKeys(target), callbackFn), this is a\r\n * performance optimization to avoid the creation of a new array for large objects\r\n * @param target The target object to find and process the keys\r\n * @param callbackfn The function to call with the details\r\n */\r\nexport function objForEachKey(target, callbackfn) {\r\n    if (target) {\r\n        for (var prop in target) {\r\n            if (ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](target, prop)) {\r\n                callbackfn[_DYN_CALL /* @min:%2ecall */](target, prop, target[prop]);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * The strEndsWith() method determines whether a string ends with the characters of a specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param search - The characters to be searched for at the end of the value.\r\n * @returns true if the given search value is found at the end of the string, otherwise false.\r\n */\r\nexport function strEndsWith(value, search) {\r\n    var result = false;\r\n    if (value && search && !(result = value === search)) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        result = _strEndsWith ? value[cStrEndsWith](search) : _strEndsWithPoly(value, search);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * The _strEndsWith() method determines whether a string ends with the characters of a specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param search - The characters to be searched for at the end of the value.\r\n * @returns true if the given search value is found at the end of the string, otherwise false.\r\n */\r\nexport function _strEndsWithPoly(value, search) {\r\n    var result = false;\r\n    var searchLen = search ? search[_DYN_LENGTH /* @min:%2elength */] : 0;\r\n    var valLen = value ? value[_DYN_LENGTH /* @min:%2elength */] : 0;\r\n    if (searchLen && valLen && valLen >= searchLen && !(result = value === search)) {\r\n        var pos = valLen - 1;\r\n        for (var lp = searchLen - 1; lp >= 0; lp--) {\r\n            if (value[pos] != search[lp]) {\r\n                return false;\r\n            }\r\n            pos--;\r\n        }\r\n        result = true;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * The strStartsWith() method determines whether a string starts with the characters of the specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param checkValue - The characters to be searched for at the start of the value.\r\n * @returns true if the given search value is found at the start of the string, otherwise false.\r\n */\r\nexport function strStartsWith(value, checkValue) {\r\n    var result = false;\r\n    if (value && checkValue && !(result = value === checkValue)) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        result = _strStartsWith ? value[cStrStartsWith](checkValue) : _strStartsWithPoly(value, checkValue);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * The strStartsWith() method determines whether a string starts with the characters of the specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param checkValue - The characters to be searched for at the start of the value.\r\n * @returns true if the given search value is found at the start of the string, otherwise false.\r\n */\r\nexport function _strStartsWithPoly(value, checkValue) {\r\n    // Using helper for performance and because string startsWith() is not available on IE\r\n    var result = false;\r\n    var chkLen = checkValue ? checkValue[_DYN_LENGTH /* @min:%2elength */] : 0;\r\n    if (value && chkLen && value[_DYN_LENGTH /* @min:%2elength */] >= chkLen && !(result = value === checkValue)) {\r\n        for (var lp = 0; lp < chkLen; lp++) {\r\n            if (value[lp] !== checkValue[lp]) {\r\n                return false;\r\n            }\r\n        }\r\n        result = true;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * A simple wrapper (for minification support) to check if the value contains the search string.\r\n * @param value - The string value to check for the existence of the search value\r\n * @param search - The value search within the value\r\n */\r\nexport function strContains(value, search) {\r\n    if (value && search) {\r\n        return value[_DYN_INDEX_OF /* @min:%2eindexOf */](search) !== -1;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Check if an object is of type Date\r\n */\r\nexport function isDate(obj) {\r\n    return !!(obj && _objToString[_DYN_CALL /* @min:%2ecall */](obj) === \"[object Date]\");\r\n}\r\n/**\r\n * Check if an object is of type Array with optional generic T, the generic type is not validated\r\n * and exists to help with TypeScript validation only.\r\n */\r\nexport var isArray = _isArray || _isArrayPoly;\r\nfunction _isArrayPoly(obj) {\r\n    return !!(obj && _objToString[_DYN_CALL /* @min:%2ecall */](obj) === \"[object Array]\");\r\n}\r\n/**\r\n * Check if an object is of type Error\r\n */\r\nexport function isError(obj) {\r\n    return !!(obj && _objToString[_DYN_CALL /* @min:%2ecall */](obj) === \"[object Error]\");\r\n}\r\n/**\r\n * Checks if the type of value is a string.\r\n * @param {any} value - Value to be checked.\r\n * @return {boolean} True if the value is a string, false otherwise.\r\n */\r\nexport function isString(value) {\r\n    // Changing to inline for performance\r\n    return typeof value === \"string\";\r\n}\r\n/**\r\n * Checks if the type of value is a number.\r\n * @param {any} value - Value to be checked.\r\n * @return {boolean} True if the value is a number, false otherwise.\r\n */\r\nexport function isNumber(value) {\r\n    // Changing to inline for performance\r\n    return typeof value === \"number\";\r\n}\r\n/**\r\n * Checks if the type of value is a boolean.\r\n * @param {any} value - Value to be checked.\r\n * @return {boolean} True if the value is a boolean, false otherwise.\r\n */\r\nexport function isBoolean(value) {\r\n    // Changing to inline for performance\r\n    return typeof value === \"boolean\";\r\n}\r\n/**\r\n * Checks if the type of value is a Symbol.\r\n * This only returns a boolean as returning value is Symbol will cause issues for older TypeScript consumers\r\n * @param {any} value - Value to be checked.\r\n * @return {boolean} True if the value is a Symbol, false otherwise.\r\n */\r\nexport function isSymbol(value) {\r\n    return typeof value === \"symbol\";\r\n}\r\n/**\r\n * Checks if the type of the value is a normal plain object (not a null or data)\r\n * @param value\r\n */\r\nexport function isPlainObject(value) {\r\n    var result = false;\r\n    if (value && typeof value === \"object\") {\r\n        // Inlining _objGetPrototypeOf for performance to avoid an additional function call\r\n        var proto = _objGetPrototypeOf ? _objGetPrototypeOf(value) : _getObjProto(value);\r\n        if (!proto) {\r\n            // No prototype found so this is a plain Object eg. 'Object.create(null)'\r\n            result = true;\r\n        }\r\n        else {\r\n            // Objects that have a prototype are plain only if they were created using the Object global (native) function\r\n            if (proto[strConstructor] && ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](proto, strConstructor)) {\r\n                proto = proto[strConstructor];\r\n            }\r\n            result = typeof proto === strShimFunction && _fnToString[_DYN_CALL /* @min:%2ecall */](proto) === _objFunctionString;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Convert a date to I.S.O. format in IE8\r\n */\r\nexport function toISOString(date) {\r\n    if (date) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        return _dataToISOString ? date[strToISOString]() : _toISOStringPoly(date);\r\n    }\r\n}\r\n/**\r\n * Convert a date to I.S.O. format in IE8\r\n */\r\nexport function _toISOStringPoly(date) {\r\n    if (date && date.getUTCFullYear) {\r\n        var pad = function (num) {\r\n            var r = String(num);\r\n            if (r[_DYN_LENGTH /* @min:%2elength */] === 1) {\r\n                r = \"0\" + r;\r\n            }\r\n            return r;\r\n        };\r\n        return date.getUTCFullYear()\r\n            + \"-\" + pad(date.getUTCMonth() + 1)\r\n            + \"-\" + pad(date.getUTCDate())\r\n            + \"T\" + pad(date.getUTCHours())\r\n            + \":\" + pad(date.getUTCMinutes())\r\n            + \":\" + pad(date.getUTCSeconds())\r\n            + \".\" + String((date.getUTCMilliseconds() / 1000).toFixed(3)).slice(2, 5)\r\n            + \"Z\";\r\n    }\r\n}\r\n/**\r\n * Performs the specified action for each element in an array. This helper exists to avoid adding a polyfil for older browsers\r\n * that do not define Array.prototype.xxxx (eg. ES3 only, IE8) just in case any page checks for presence/absence of the prototype\r\n * implementation. Note: For consistency this will not use the Array.prototype.xxxx implementation if it exists as this would\r\n * cause a testing requirement to test with and without the implementations\r\n * @param callbackfn  A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array. It can return -1 to break out of the loop\r\n * @param thisArg  [Optional] An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\r\n */\r\nexport function arrForEach(arr, callbackfn, thisArg) {\r\n    var len = arr[_DYN_LENGTH /* @min:%2elength */];\r\n    try {\r\n        for (var idx = 0; idx < len; idx++) {\r\n            if (idx in arr) {\r\n                if (callbackfn[_DYN_CALL /* @min:%2ecall */](thisArg || arr, arr[idx], idx, arr) === -1) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n    }\r\n}\r\n/**\r\n * Returns the index of the first occurrence of a value in an array. This helper exists to avoid adding a polyfil for older browsers\r\n * that do not define Array.prototype.xxxx (eg. ES3 only, IE8) just in case any page checks for presence/absence of the prototype\r\n * implementation. Note: For consistency this will not use the Array.prototype.xxxx implementation if it exists as this would\r\n * cause a testing requirement to test with and without the implementations\r\n * @param searchElement The value to locate in the array.\r\n * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.\r\n */\r\nexport function arrIndexOf(arr, searchElement, fromIndex) {\r\n    if (arr) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        if (arr[strIndexOf]) {\r\n            return arr[strIndexOf](searchElement, fromIndex);\r\n        }\r\n        var len = arr[_DYN_LENGTH /* @min:%2elength */];\r\n        var from = fromIndex || 0;\r\n        try {\r\n            for (var lp = Math.max(from >= 0 ? from : len - Math.abs(from), 0); lp < len; lp++) {\r\n                if (lp in arr && arr[lp] === searchElement) {\r\n                    return lp;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Calls a defined callback function on each element of an array, and returns an array that contains the results. This helper exists\r\n * to avoid adding a polyfil for older browsers that do not define Array.prototype.xxxx (eg. ES3 only, IE8) just in case any page\r\n * checks for presence/absence of the prototype implementation. Note: For consistency this will not use the Array.prototype.xxxx\r\n * implementation if it exists as this would cause a testing requirement to test with and without the implementations\r\n * @param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\r\n * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\r\n */\r\nexport function arrMap(arr, callbackfn, thisArg) {\r\n    var results;\r\n    if (arr) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        if (arr[strMap]) {\r\n            return arr[strMap](callbackfn, thisArg);\r\n        }\r\n        var len = arr[_DYN_LENGTH /* @min:%2elength */];\r\n        var _this = thisArg || arr;\r\n        results = new Array(len);\r\n        try {\r\n            for (var lp = 0; lp < len; lp++) {\r\n                if (lp in arr) {\r\n                    results[lp] = callbackfn[_DYN_CALL /* @min:%2ecall */](_this, arr[lp], arr);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n        }\r\n    }\r\n    return results;\r\n}\r\n/**\r\n * Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is\r\n * provided as an argument in the next call to the callback function. This helper exists to avoid adding a polyfil for older browsers that do not define\r\n * Array.prototype.xxxx (eg. ES3 only, IE8) just in case any page checks for presence/absence of the prototype implementation. Note: For consistency\r\n * this will not use the Array.prototype.xxxx implementation if it exists as this would cause a testing requirement to test with and without the implementations\r\n * @param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\r\n * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\r\n */\r\nexport function arrReduce(arr, callbackfn, initialValue) {\r\n    var value;\r\n    if (arr) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        if (arr[strReduce]) {\r\n            return arr[strReduce](callbackfn, initialValue);\r\n        }\r\n        var len = arr[_DYN_LENGTH /* @min:%2elength */];\r\n        var lp = 0;\r\n        // Specifically checking the number of passed arguments as the value could be anything\r\n        if (arguments[_DYN_LENGTH /* @min:%2elength */] >= 3) {\r\n            value = arguments[2];\r\n        }\r\n        else {\r\n            while (lp < len && !(lp in arr)) {\r\n                lp++;\r\n            }\r\n            value = arr[lp++];\r\n        }\r\n        while (lp < len) {\r\n            if (lp in arr) {\r\n                value = callbackfn(value, arr[lp], lp, arr);\r\n            }\r\n            lp++;\r\n        }\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * helper method to trim strings (IE8 does not implement String.prototype.trim)\r\n */\r\nexport function strTrim(str) {\r\n    if (str) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        str = (_strTrim && str[cStrTrim]) ? str[cStrTrim]() : (str[_DYN_REPLACE /* @min:%2ereplace */] ? str[_DYN_REPLACE /* @min:%2ereplace */](/^\\s+|(?=\\s)\\s+$/g, STR_EMPTY) : str);\r\n    }\r\n    return str;\r\n}\r\nvar _objKeysHasDontEnumBug = !({ toString: null }).propertyIsEnumerable(\"toString\");\r\nvar _objKeysDontEnums = [\r\n    \"toString\",\r\n    \"toLocaleString\",\r\n    \"valueOf\",\r\n    \"hasOwnProperty\",\r\n    \"isPrototypeOf\",\r\n    \"propertyIsEnumerable\",\r\n    \"constructor\"\r\n];\r\n/**\r\n * Returns the names of the enumerable string properties and methods of an object. This helper exists to avoid adding a polyfil for older browsers\r\n * that do not define Object.keys eg. ES3 only, IE8 just in case any page checks for presence/absence of the prototype implementation.\r\n * Note: For consistency this will not use the Object.keys implementation if it exists as this would cause a testing requirement to test with and without the implementations\r\n * @param obj Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\r\n */\r\nexport function objKeys(obj) {\r\n    var objType = typeof obj;\r\n    if (objType !== strShimFunction && (objType !== strShimObject || obj === null)) {\r\n        throwTypeError(\"objKeys called on non-object\");\r\n    }\r\n    // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n    if (!_objKeysHasDontEnumBug && _objKeys) {\r\n        return _objKeys(obj);\r\n    }\r\n    var result = [];\r\n    for (var prop in obj) {\r\n        if (obj && ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](obj, prop)) {\r\n            result[_DYN_PUSH /* @min:%2epush */](prop);\r\n        }\r\n    }\r\n    if (_objKeysHasDontEnumBug) {\r\n        var dontEnumsLength = _objKeysDontEnums[_DYN_LENGTH /* @min:%2elength */];\r\n        for (var lp = 0; lp < dontEnumsLength; lp++) {\r\n            if (obj && ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](obj, _objKeysDontEnums[lp])) {\r\n                result[_DYN_PUSH /* @min:%2epush */](_objKeysDontEnums[lp]);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Try to define get/set object property accessors for the target object/prototype, this will provide compatibility with\r\n * existing API definition when run within an ES5+ container that supports accessors but still enable the code to be loaded\r\n * and executed in an ES3 container, providing basic IE8 compatibility.\r\n * @param target The object on which to define the property.\r\n * @param prop The name of the property to be defined or modified.\r\n * @param getProp The getter function to wire against the getter.\r\n * @param setProp The setter function to wire against the setter.\r\n * @returns True if it was able to create the accessors otherwise false\r\n */\r\nexport function objDefineAccessors(target, prop, getProp, setProp) {\r\n    if (_objDefineProperty) {\r\n        try {\r\n            var descriptor = {\r\n                enumerable: true,\r\n                configurable: true\r\n            };\r\n            if (getProp) {\r\n                descriptor.get = getProp;\r\n            }\r\n            if (setProp) {\r\n                descriptor.set = setProp;\r\n            }\r\n            _objDefineProperty(target, prop, descriptor);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            // IE8 Defines a defineProperty on Object but it's only supported for DOM elements so it will throw\r\n            // We will just ignore this here.\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction _doNothing(value) {\r\n    return value;\r\n}\r\nexport function deepFreeze(obj) {\r\n    if (_objFreeze) {\r\n        objForEachKey(obj, function (name, value) {\r\n            if (isArray(value) || isObject(value)) {\r\n                _objFreeze(value);\r\n            }\r\n        });\r\n    }\r\n    return objFreeze(obj);\r\n}\r\nexport var objFreeze = _objFreeze || _doNothing;\r\nexport var objSeal = _objSeal || _doNothing;\r\n/**\r\n * Return the current time via the Date now() function (if available) and falls back to (new Date()).getTime() if now() is unavailable (IE8 or less)\r\n * https://caniuse.com/#search=Date.now\r\n */\r\nexport function dateNow() {\r\n    var dt = Date;\r\n    return dt.now ? dt.now() : new dt().getTime();\r\n}\r\n/**\r\n * Returns the name of object if it's an Error. Otherwise, returns empty string.\r\n */\r\nexport function getExceptionName(object) {\r\n    if (isError(object)) {\r\n        return object[_DYN_NAME /* @min:%2ename */];\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Sets the provided value on the target instance using the field name when the provided chk function returns true, the chk\r\n * function will only be called if the new value is no equal to the original value.\r\n * @param target - The target object\r\n * @param field - The key of the target\r\n * @param value - The value to set\r\n * @param valChk - [Optional] Callback to check the value that if supplied will be called check if the new value can be set\r\n * @param srcChk - [Optional] Callback to check to original value that if supplied will be called if the new value should be set (if allowed)\r\n * @returns The existing or new value, depending what was set\r\n */\r\nexport function setValue(target, field, value, valChk, srcChk) {\r\n    var theValue = value;\r\n    if (target) {\r\n        theValue = target[field];\r\n        if (theValue !== value && (!srcChk || srcChk(theValue)) && (!valChk || valChk(value))) {\r\n            theValue = value;\r\n            target[field] = theValue;\r\n        }\r\n    }\r\n    return theValue;\r\n}\r\n/**\r\n * Returns the current value from the target object if not null or undefined otherwise sets the new value and returns it\r\n * @param target - The target object to return or set the default value\r\n * @param field - The key for the field to set on the target\r\n * @param defValue - [Optional] The value to set if not already present, when not provided a empty object will be added\r\n */\r\nexport function getSetValue(target, field, defValue) {\r\n    var theValue;\r\n    if (target) {\r\n        theValue = target[field];\r\n        if (!theValue && isNullOrUndefined(theValue)) {\r\n            // Supports having the default as null\r\n            theValue = !isUndefined(defValue) ? defValue : {};\r\n            target[field] = theValue;\r\n        }\r\n    }\r\n    else {\r\n        // Expanded for performance so we only check defValue if required\r\n        theValue = !isUndefined(defValue) ? defValue : {};\r\n    }\r\n    return theValue;\r\n}\r\n/**\r\n * Get the mapped config value, if null or undefined any supplied defaultValue will be returned.\r\n * @param field - The name of the field as the named enum value (number) or the string name.\r\n * @param defaultValue - The default value to return if the config field is not present, null or undefined.\r\n */\r\nexport function getCfgValue(theValue, defaultValue) {\r\n    return !isNullOrUndefined(theValue) ? theValue : defaultValue;\r\n}\r\nexport function isNotTruthy(value) {\r\n    return !value;\r\n}\r\nexport function isTruthy(value) {\r\n    return !!value;\r\n}\r\nexport function throwError(message) {\r\n    throw new Error(message);\r\n}\r\nfunction _createProxyFunction(source, funcName) {\r\n    var srcFunc = null;\r\n    var src = null;\r\n    if (isFunction(source)) {\r\n        srcFunc = source;\r\n    }\r\n    else {\r\n        src = source;\r\n    }\r\n    return function () {\r\n        // Capture the original arguments passed to the method\r\n        var originalArguments = arguments;\r\n        if (srcFunc) {\r\n            src = srcFunc();\r\n        }\r\n        if (src) {\r\n            return src[funcName][_DYN_APPLY /* @min:%2eapply */](src, originalArguments);\r\n        }\r\n    };\r\n}\r\n/**\r\n * Effectively assigns all enumerable properties (not just own properties) and functions (including inherited prototype) from\r\n * the source object to the target, it attempts to use proxy getters / setters (if possible) and proxy functions to avoid potential\r\n * implementation issues by assigning prototype functions as instance ones\r\n *\r\n * This method is the primary method used to \"update\" the snippet proxy with the ultimate implementations.\r\n *\r\n * Special ES3 Notes:\r\n * Updates (setting) of direct property values on the target or indirectly on the source object WILL NOT WORK PROPERLY, updates to the\r\n * properties of \"referenced\" object will work (target.context.newValue = 10 => will be reflected in the source.context as it's the\r\n * same object). ES3 Failures: assigning target.myProp = 3 -> Won't change source.myProp = 3, likewise the reverse would also fail.\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param chkSet - An optional callback to determine whether a specific property/function should be proxied\r\n */\r\nexport function proxyAssign(target, source, chkSet) {\r\n    if (target && source && isObject(target) && isObject(source)) {\r\n        var _loop_1 = function (field) {\r\n            if (isString(field)) {\r\n                var value = source[field];\r\n                if (isFunction(value)) {\r\n                    if (!chkSet || chkSet(field, true, source, target)) {\r\n                        // Create a proxy function rather than just copying the (possible) prototype to the new object as an instance function\r\n                        target[field] = _createProxyFunction(source, field);\r\n                    }\r\n                }\r\n                else if (!chkSet || chkSet(field, false, source, target)) {\r\n                    if (hasOwnProperty(target, field)) {\r\n                        // Remove any previous instance property\r\n                        delete target[field];\r\n                    }\r\n                    if (!objDefineAccessors(target, field, function () {\r\n                        return source[field];\r\n                    }, function (theValue) {\r\n                        source[field] = theValue;\r\n                    })) {\r\n                        // Unable to create an accessor, so just assign the values as a fallback\r\n                        // -- this will (mostly) work for objects\r\n                        // -- but will fail for accessing primitives (if the source changes it) and all types of \"setters\" as the source won't be modified\r\n                        target[field] = value;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        // effectively apply/proxy full source to the target instance\r\n        for (var field in source) {\r\n            _loop_1(field);\r\n        }\r\n    }\r\n    return target;\r\n}\r\n/**\r\n * Creates a proxy function on the target which internally will call the source version with all arguments passed to the target method.\r\n *\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param name - The function name that will be added on the target\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param theFunc - The function name on the source that will be proxied on the target\r\n * @param overwriteTarget - If `false` this will not replace any pre-existing name otherwise (the default) it will overwrite any existing name\r\n */\r\nexport function proxyFunctionAs(target, name, source, theFunc, overwriteTarget) {\r\n    if (target && name && source) {\r\n        if (overwriteTarget !== false || isUndefined(target[name])) {\r\n            target[name] = _createProxyFunction(source, theFunc);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Creates proxy functions on the target which internally will call the source version with all arguments passed to the target method.\r\n *\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param functionsToProxy - An array of function names that will be proxied on the target\r\n * @param overwriteTarget - If false this will not replace any pre-existing name otherwise (the default) it will overwrite any existing name\r\n */\r\nexport function proxyFunctions(target, source, functionsToProxy, overwriteTarget) {\r\n    if (target && source && isObject(target) && isArray(functionsToProxy)) {\r\n        arrForEach(functionsToProxy, function (theFuncName) {\r\n            if (isString(theFuncName)) {\r\n                proxyFunctionAs(target, theFuncName, source, theFuncName, overwriteTarget);\r\n            }\r\n        });\r\n    }\r\n    return target;\r\n}\r\n/**\r\n * Simpler helper to create a dynamic class that implements the interface and populates the values with the defaults.\r\n * Only instance properties (hasOwnProperty) values are copied from the defaults to the new instance\r\n * @param defaults Simple helper\r\n */\r\nexport function createClassFromInterface(defaults) {\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            var _this_1 = this;\r\n            if (defaults) {\r\n                objForEachKey(defaults, function (field, value) {\r\n                    _this_1[field] = value;\r\n                });\r\n            }\r\n        }\r\n        return class_1;\r\n    }());\r\n}\r\n/**\r\n * A helper function to assist with JIT performance for objects that have properties added / removed dynamically\r\n * this is primarily for chromium based browsers and has limited effects on Firefox and none of IE. Only call this\r\n * function after you have finished \"updating\" the object, calling this within loops reduces or defeats the benefits.\r\n * This helps when iterating using for..in, objKeys() and objForEach()\r\n * @param theObject - The object to be optimized if possible\r\n */\r\nexport function optimizeObject(theObject) {\r\n    // V8 Optimization to cause the JIT compiler to create a new optimized object for looking up the own properties\r\n    // primarily for object with <= 19 properties for >= 20 the effect is reduced or non-existent\r\n    if (theObject && ObjAssign) {\r\n        theObject = ObjClass(ObjAssign({}, theObject));\r\n    }\r\n    return theObject;\r\n}\r\nexport function objExtend(obj1, obj2, obj3, obj4, obj5, obj6) {\r\n    // Variables\r\n    var theArgs = arguments;\r\n    var extended = theArgs[0] || {};\r\n    var argLen = theArgs[_DYN_LENGTH /* @min:%2elength */];\r\n    var deep = false;\r\n    var idx = 1;\r\n    // Check for \"Deep\" flag\r\n    if (argLen > 0 && isBoolean(extended)) {\r\n        deep = extended;\r\n        extended = theArgs[idx] || {};\r\n        idx++;\r\n    }\r\n    // Handle case when target is a string or something (possible in deep copy)\r\n    if (!isObject(extended)) {\r\n        extended = {};\r\n    }\r\n    // Loop through each remaining object and conduct a merge\r\n    for (; idx < argLen; idx++) {\r\n        var arg = theArgs[idx];\r\n        var isArgArray = isArray(arg);\r\n        var isArgObj = isObject(arg);\r\n        for (var prop in arg) {\r\n            var propOk = (isArgArray && (prop in arg)) || (isArgObj && (ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](arg, prop)));\r\n            if (!propOk) {\r\n                continue;\r\n            }\r\n            var newValue = arg[prop];\r\n            var isNewArray = void 0;\r\n            // If deep merge and property is an object, merge properties\r\n            if (deep && newValue && ((isNewArray = isArray(newValue)) || isPlainObject(newValue))) {\r\n                // Grab the current value of the extended object\r\n                var clone = extended[prop];\r\n                if (isNewArray) {\r\n                    if (!isArray(clone)) {\r\n                        // We can't \"merge\" an array with a non-array so overwrite the original\r\n                        clone = [];\r\n                    }\r\n                }\r\n                else if (!isPlainObject(clone)) {\r\n                    // We can't \"merge\" an object with a non-object\r\n                    clone = {};\r\n                }\r\n                // Never move the original objects always clone them\r\n                newValue = objExtend(deep, clone, newValue);\r\n            }\r\n            // Assign the new (or previous) value (unless undefined)\r\n            if (newValue !== undefined) {\r\n                extended[prop] = newValue;\r\n            }\r\n        }\r\n    }\r\n    return extended;\r\n}\r\n//# sourceMappingURL=HelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_CHANNELS = \"channels\";\r\nexport var STR_CORE = \"core\";\r\nexport var STR_CREATE_PERF_MGR = \"createPerfMgr\";\r\nexport var STR_DISABLED = \"disabled\";\r\nexport var STR_EXTENSION_CONFIG = \"extensionConfig\";\r\nexport var STR_EXTENSIONS = \"extensions\";\r\nexport var STR_PROCESS_TELEMETRY = \"processTelemetry\";\r\nexport var STR_PRIORITY = \"priority\";\r\nexport var STR_EVENTS_SENT = \"eventsSent\";\r\nexport var STR_EVENTS_DISCARDED = \"eventsDiscarded\";\r\nexport var STR_EVENTS_SEND_REQUEST = \"eventsSendRequest\";\r\nexport var STR_PERF_EVENT = \"perfEvent\";\r\nexport var STR_ERROR_TO_CONSOLE = \"errorToConsole\";\r\nexport var STR_WARN_TO_CONSOLE = \"warnToConsole\";\r\nexport var STR_GET_PERF_MGR = \"getPerfMgr\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_COMPLETE, _DYN_GET_CTX, _DYN_IS_ASYNC, _DYN_IS_CHILD_EVT, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SET_CTX, _DYN_TIME } from \"../__DynamicConstants\";\r\nimport { dateNow, isArray, isFunction, objDefineAccessors } from \"./HelperFuncs\";\r\nimport { STR_GET_PERF_MGR, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar strExecutionContextKey = \"ctx\";\r\nvar strParentContextKey = \"ParentContextKey\";\r\nvar strChildrenContextKey = \"ChildrenContextKey\";\r\nvar _defaultPerfManager = null;\r\nvar PerfEvent = /** @class */ (function () {\r\n    function PerfEvent(name, payloadDetails, isAsync) {\r\n        var _self = this;\r\n        var accessorDefined = false;\r\n        _self.start = dateNow();\r\n        _self[_DYN_NAME /* @min:%2ename */] = name;\r\n        _self[_DYN_IS_ASYNC /* @min:%2eisAsync */] = isAsync;\r\n        _self[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */] = function () { return false; };\r\n        if (isFunction(payloadDetails)) {\r\n            // Create an accessor to minimize the potential performance impact of executing the payloadDetails callback\r\n            var theDetails_1;\r\n            accessorDefined = objDefineAccessors(_self, \"payload\", function () {\r\n                // Delay the execution of the payloadDetails until needed\r\n                if (!theDetails_1 && isFunction(payloadDetails)) {\r\n                    theDetails_1 = payloadDetails();\r\n                    // clear it out now so the referenced objects can be garbage collected\r\n                    payloadDetails = null;\r\n                }\r\n                return theDetails_1;\r\n            });\r\n        }\r\n        _self[_DYN_GET_CTX /* @min:%2egetCtx */] = function (key) {\r\n            if (key) {\r\n                // The parent and child links are located directly on the object (for better viewing in the DebugPlugin)\r\n                if (key === PerfEvent[strParentContextKey] || key === PerfEvent[strChildrenContextKey]) {\r\n                    return _self[key];\r\n                }\r\n                return (_self[strExecutionContextKey] || {})[key];\r\n            }\r\n            return null;\r\n        };\r\n        _self[_DYN_SET_CTX /* @min:%2esetCtx */] = function (key, value) {\r\n            if (key) {\r\n                // Put the parent and child links directly on the object (for better viewing in the DebugPlugin)\r\n                if (key === PerfEvent[strParentContextKey]) {\r\n                    // Simple assumption, if we are setting a parent then we must be a child\r\n                    if (!_self[key]) {\r\n                        _self[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */] = function () { return true; };\r\n                    }\r\n                    _self[key] = value;\r\n                }\r\n                else if (key === PerfEvent[strChildrenContextKey]) {\r\n                    _self[key] = value;\r\n                }\r\n                else {\r\n                    var ctx = _self[strExecutionContextKey] = _self[strExecutionContextKey] || {};\r\n                    ctx[key] = value;\r\n                }\r\n            }\r\n        };\r\n        _self[_DYN_COMPLETE /* @min:%2ecomplete */] = function () {\r\n            var childTime = 0;\r\n            var childEvts = _self[_DYN_GET_CTX /* @min:%2egetCtx */](PerfEvent[strChildrenContextKey]);\r\n            if (isArray(childEvts)) {\r\n                for (var lp = 0; lp < childEvts[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    var childEvt = childEvts[lp];\r\n                    if (childEvt) {\r\n                        childTime += childEvt[_DYN_TIME /* @min:%2etime */];\r\n                    }\r\n                }\r\n            }\r\n            _self[_DYN_TIME /* @min:%2etime */] = dateNow() - _self.start;\r\n            _self.exTime = _self[_DYN_TIME /* @min:%2etime */] - childTime;\r\n            _self[_DYN_COMPLETE /* @min:%2ecomplete */] = function () { };\r\n            if (!accessorDefined && isFunction(payloadDetails)) {\r\n                // If we couldn't define the property set during complete -- to minimize the perf impact until after the time\r\n                _self.payload = payloadDetails();\r\n            }\r\n        };\r\n    }\r\n    PerfEvent.ParentContextKey = \"parent\";\r\n    PerfEvent.ChildrenContextKey = \"childEvts\";\r\n    return PerfEvent;\r\n}());\r\nexport { PerfEvent };\r\nvar PerfManager = /** @class */ (function () {\r\n    function PerfManager(manager) {\r\n        /**\r\n         * General bucket used for execution context set and retrieved via setCtx() and getCtx.\r\n         * Defined as private so it can be visualized via the DebugPlugin\r\n         */\r\n        this.ctx = {};\r\n        dynamicProto(PerfManager, this, function (_self) {\r\n            _self.create = function (src, payloadDetails, isAsync) {\r\n                // TODO (@MSNev): at some point we will want to add additional configuration to \"select\" which events to instrument\r\n                // for now this is just a simple do everything.\r\n                return new PerfEvent(src, payloadDetails, isAsync);\r\n            };\r\n            _self.fire = function (perfEvent) {\r\n                if (perfEvent) {\r\n                    perfEvent[_DYN_COMPLETE /* @min:%2ecomplete */]();\r\n                    if (manager && isFunction(manager[STR_PERF_EVENT /* @min:%2eperfEvent */])) {\r\n                        manager[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent);\r\n                    }\r\n                }\r\n            };\r\n            _self[_DYN_SET_CTX /* @min:%2esetCtx */] = function (key, value) {\r\n                if (key) {\r\n                    var ctx = _self[strExecutionContextKey] = _self[strExecutionContextKey] || {};\r\n                    ctx[key] = value;\r\n                }\r\n            };\r\n            _self[_DYN_GET_CTX /* @min:%2egetCtx */] = function (key) {\r\n                return (_self[strExecutionContextKey] || {})[key];\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for PerfManager.prototype.create.\r\n// Removed Stub for PerfManager.prototype.fire.\r\n// Removed Stub for PerfManager.prototype.setCtx.\r\n// Removed Stub for PerfManager.prototype.getCtx.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    PerfManager.__ieDyn=1;\n\n    return PerfManager;\r\n}());\r\nexport { PerfManager };\r\nvar doPerfActiveKey = \"CoreUtils.doPerf\";\r\n/**\r\n * Helper function to wrap a function with a perf event\r\n * @param mgrSource - The Performance Manager or a Performance provider source (may be null)\r\n * @param getSource - The callback to create the source name for the event (if perf monitoring is enabled)\r\n * @param func - The function to call and measure\r\n * @param details - A function to return the payload details\r\n * @param isAsync - Is the event / function being call asynchronously or synchronously\r\n */\r\nexport function doPerf(mgrSource, getSource, func, details, isAsync) {\r\n    if (mgrSource) {\r\n        var perfMgr = mgrSource;\r\n        if (perfMgr[STR_GET_PERF_MGR]) {\r\n            // Looks like a perf manager provider object\r\n            perfMgr = perfMgr[STR_GET_PERF_MGR]();\r\n        }\r\n        if (perfMgr) {\r\n            var perfEvt = void 0;\r\n            var currentActive = perfMgr[_DYN_GET_CTX /* @min:%2egetCtx */](doPerfActiveKey);\r\n            try {\r\n                perfEvt = perfMgr.create(getSource(), details, isAsync);\r\n                if (perfEvt) {\r\n                    if (currentActive && perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                        perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */](PerfEvent[strParentContextKey], currentActive);\r\n                        if (currentActive[_DYN_GET_CTX /* @min:%2egetCtx */] && currentActive[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                            var children = currentActive[_DYN_GET_CTX /* @min:%2egetCtx */](PerfEvent[strChildrenContextKey]);\r\n                            if (!children) {\r\n                                children = [];\r\n                                currentActive[_DYN_SET_CTX /* @min:%2esetCtx */](PerfEvent[strChildrenContextKey], children);\r\n                            }\r\n                            children[_DYN_PUSH /* @min:%2epush */](perfEvt);\r\n                        }\r\n                    }\r\n                    // Set this event as the active event now\r\n                    perfMgr[_DYN_SET_CTX /* @min:%2esetCtx */](doPerfActiveKey, perfEvt);\r\n                    return func(perfEvt);\r\n                }\r\n            }\r\n            catch (ex) {\r\n                if (perfEvt && perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                    perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */](\"exception\", ex);\r\n                }\r\n            }\r\n            finally {\r\n                // fire the perf event\r\n                if (perfEvt) {\r\n                    perfMgr.fire(perfEvt);\r\n                }\r\n                // Reset the active event to the previous value\r\n                perfMgr[_DYN_SET_CTX /* @min:%2esetCtx */](doPerfActiveKey, currentActive);\r\n            }\r\n        }\r\n    }\r\n    return func();\r\n}\r\n/**\r\n * Set the global performance manager to use when there is no core instance or it has not been initialized yet.\r\n * @param perfManager - The IPerfManager instance to use when no performance manager is supplied.\r\n */\r\nexport function setGblPerfMgr(perfManager) {\r\n    _defaultPerfManager = perfManager;\r\n}\r\n/**\r\n * Get the current global performance manager that will be used with no performance manager is supplied.\r\n * @returns - The current default manager\r\n */\r\nexport function getGblPerfMgr() {\r\n    return _defaultPerfManager;\r\n}\r\n//# sourceMappingURL=PerfManager.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { _DYN_CALL, _DYN_CONFIG, _DYN_CREATE_NEW, _DYN_DIAG_LOG, _DYN_GET_NEXT, _DYN_GET_PLUGIN, _DYN_IDENTIFIER, _DYN_IS_ASYNC, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_LOGGER, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_UPDATE } from \"../__DynamicConstants\";\r\nimport { _throwInternal, safeGetLogger } from \"./DiagnosticLogger\";\r\nimport { dumpObj } from \"./EnvUtils\";\r\nimport { arrForEach, isArray, isFunction, isNullOrUndefined, isObject, isUndefined, objExtend, objForEachKey, objFreeze, objKeys, proxyFunctions } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_DISABLED, STR_EMPTY, STR_EXTENSION_CONFIG, STR_PRIORITY, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { doPerf } from \"./PerfManager\";\r\nimport { _getPluginState } from \"./TelemetryHelpers\";\r\nvar strTelemetryPluginChain = \"TelemetryPluginChain\";\r\nvar strHasRunFlags = \"_hasRun\";\r\nvar strGetTelCtx = \"_getTelCtx\";\r\nvar _chainId = 0;\r\nfunction _getNextProxyStart(proxy, core, startAt) {\r\n    while (proxy) {\r\n        if (proxy[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]() === startAt) {\r\n            return proxy;\r\n        }\r\n        proxy = proxy[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n    }\r\n    // This wasn't found in the existing chain so create an isolated one with just this plugin\r\n    return createTelemetryProxyChain([startAt], core[_DYN_CONFIG /* @min:%2econfig */] || {}, core);\r\n}\r\n/**\r\n * @ignore\r\n * @param telemetryChain\r\n * @param config\r\n * @param core\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n * @returns\r\n */\r\nfunction _createInternalContext(telemetryChain, config, core, startAt) {\r\n    // We have a special case where we want to start execution from this specific plugin\r\n    // or we simply reuse the existing telemetry plugin chain (normal execution case)\r\n    var _nextProxy = null; // By Default set as no next plugin\r\n    var _onComplete = [];\r\n    if (startAt !== null) {\r\n        // There is no next element (null) vs not defined (undefined) so use the full chain\r\n        _nextProxy = startAt ? _getNextProxyStart(telemetryChain, core, startAt) : telemetryChain;\r\n    }\r\n    var context = {\r\n        _next: _moveNext,\r\n        ctx: {\r\n            core: function () {\r\n                return core;\r\n            },\r\n            diagLog: function () {\r\n                return safeGetLogger(core, config);\r\n            },\r\n            getCfg: function () {\r\n                return config;\r\n            },\r\n            getExtCfg: _getExtCfg,\r\n            getConfig: _getConfig,\r\n            hasNext: function () {\r\n                return !!_nextProxy;\r\n            },\r\n            getNext: function () {\r\n                return _nextProxy;\r\n            },\r\n            setNext: function (nextPlugin) {\r\n                _nextProxy = nextPlugin;\r\n            },\r\n            iterate: _iterateChain,\r\n            onComplete: _addOnComplete\r\n        }\r\n    };\r\n    function _addOnComplete(onComplete, that) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (onComplete) {\r\n            _onComplete[_DYN_PUSH /* @min:%2epush */]({\r\n                func: onComplete,\r\n                self: !isUndefined(that) ? that : context.ctx,\r\n                args: args\r\n            });\r\n        }\r\n    }\r\n    function _moveNext() {\r\n        var nextProxy = _nextProxy;\r\n        // Automatically move to the next plugin\r\n        _nextProxy = nextProxy ? nextProxy[_DYN_GET_NEXT /* @min:%2egetNext */]() : null;\r\n        if (!nextProxy) {\r\n            var onComplete = _onComplete;\r\n            if (onComplete && onComplete[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                arrForEach(onComplete, function (completeDetails) {\r\n                    try {\r\n                        completeDetails.func[_DYN_CALL /* @min:%2ecall */](completeDetails.self, completeDetails.args);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(core[_DYN_LOGGER /* @min:%2elogger */], 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unexpected Exception during onComplete - \" + dumpObj(e));\r\n                    }\r\n                });\r\n                _onComplete = [];\r\n            }\r\n        }\r\n        return nextProxy;\r\n    }\r\n    function _getExtCfg(identifier, defaultValue, mergeDefault) {\r\n        if (defaultValue === void 0) { defaultValue = {}; }\r\n        if (mergeDefault === void 0) { mergeDefault = 0 /* GetExtCfgMergeType.None */; }\r\n        var theConfig;\r\n        if (config) {\r\n            var extConfig = config[STR_EXTENSION_CONFIG /* @min:%2eextensionConfig */];\r\n            if (extConfig && identifier) {\r\n                theConfig = extConfig[identifier];\r\n            }\r\n        }\r\n        if (!theConfig) {\r\n            // Just use the defaults\r\n            theConfig = defaultValue;\r\n        }\r\n        else if (isObject(defaultValue)) {\r\n            if (mergeDefault !== 0 /* GetExtCfgMergeType.None */) {\r\n                // Merge the defaults and configured values\r\n                var newConfig_1 = objExtend(true, defaultValue, theConfig);\r\n                if (config && mergeDefault === 2 /* GetExtCfgMergeType.MergeDefaultFromRootOrDefault */) {\r\n                    // Enumerate over the defaultValues and if not already populated attempt to\r\n                    // find a value from the root config\r\n                    objForEachKey(defaultValue, function (field) {\r\n                        // for each unspecified field, set the default value\r\n                        if (isNullOrUndefined(newConfig_1[field])) {\r\n                            var cfgValue = config[field];\r\n                            if (!isNullOrUndefined(cfgValue)) {\r\n                                newConfig_1[field] = cfgValue;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                theConfig = newConfig_1;\r\n            }\r\n        }\r\n        return theConfig;\r\n    }\r\n    function _getConfig(identifier, field, defaultValue) {\r\n        if (defaultValue === void 0) { defaultValue = false; }\r\n        var theValue;\r\n        var extConfig = _getExtCfg(identifier, null);\r\n        if (extConfig && !isNullOrUndefined(extConfig[field])) {\r\n            theValue = extConfig[field];\r\n        }\r\n        else if (config && !isNullOrUndefined(config[field])) {\r\n            theValue = config[field];\r\n        }\r\n        return !isNullOrUndefined(theValue) ? theValue : defaultValue;\r\n    }\r\n    function _iterateChain(cb) {\r\n        // Keep processing until we reach the end of the chain\r\n        var nextPlugin;\r\n        while (!!(nextPlugin = context._next())) {\r\n            var plugin = nextPlugin[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]();\r\n            if (plugin) {\r\n                // callback with the current on\r\n                cb(plugin);\r\n            }\r\n        }\r\n    }\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryContext(telemetryChain, config, core, startAt) {\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(env) {\r\n        var nextPlugin = internalContext._next();\r\n        // Run the next plugin which will call \"processNext()\"\r\n        nextPlugin && nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, context);\r\n        return !nextPlugin;\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config, core, startAt);\r\n        }\r\n        return createProcessTelemetryContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), config, core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain for handling the unloading of the chain\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryUnloadContext(telemetryChain, core, startAt) {\r\n    var config = core[_DYN_CONFIG /* @min:%2econfig */] || {};\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(unloadState) {\r\n        var nextPlugin = internalContext._next();\r\n        nextPlugin && nextPlugin.unload(context, unloadState);\r\n        return !nextPlugin;\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config, core, startAt);\r\n        }\r\n        return createProcessTelemetryUnloadContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain for updating the configuration\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryUpdateContext(telemetryChain, core, startAt) {\r\n    var config = core[_DYN_CONFIG /* @min:%2econfig */] || {};\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(updateState) {\r\n        return context.iterate(function (plugin) {\r\n            if (isFunction(plugin[_DYN_UPDATE /* @min:%2eupdate */])) {\r\n                plugin[_DYN_UPDATE /* @min:%2eupdate */](context, updateState);\r\n            }\r\n        });\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config, core, startAt);\r\n        }\r\n        return createProcessTelemetryUpdateContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates an execution chain from the array of plugins\r\n * @param plugins - The array of plugins that will be executed in this order\r\n * @param defItemCtx - The default execution context to use when no telemetry context is passed to processTelemetry(), this\r\n * should be for legacy plugins only. Currently, only used for passing the current core instance and to provide better error\r\n * reporting (hasRun) when errors occur.\r\n */\r\nexport function createTelemetryProxyChain(plugins, config, core, startAt) {\r\n    var firstProxy = null;\r\n    var add = startAt ? false : true;\r\n    if (isArray(plugins) && plugins[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        // Create the proxies and wire up the next plugin chain\r\n        var lastProxy_1 = null;\r\n        arrForEach(plugins, function (thePlugin) {\r\n            if (!add && startAt === thePlugin) {\r\n                add = true;\r\n            }\r\n            if (add && thePlugin && isFunction(thePlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Only add plugins that are processors\r\n                var newProxy = createTelemetryPluginProxy(thePlugin, config, core);\r\n                if (!firstProxy) {\r\n                    firstProxy = newProxy;\r\n                }\r\n                if (lastProxy_1) {\r\n                    // Set this new proxy as the next for the previous one\r\n                    lastProxy_1._setNext(newProxy);\r\n                }\r\n                lastProxy_1 = newProxy;\r\n            }\r\n        });\r\n    }\r\n    if (startAt && !firstProxy) {\r\n        // Special case where the \"startAt\" was not in the original list of plugins\r\n        return createTelemetryProxyChain([startAt], config, core);\r\n    }\r\n    return firstProxy;\r\n}\r\n/**\r\n * Create the processing telemetry proxy instance, the proxy is used to abstract the current plugin to allow monitoring and\r\n * execution plugins while passing around the dynamic execution state (IProcessTelemetryContext), the proxy instance no longer\r\n * contains any execution state and can be reused between requests (this was not the case for 2.7.2 and earlier with the\r\n * TelemetryPluginChain class).\r\n * @param plugin - The plugin instance to proxy\r\n * @param config - The default execution context to use when no telemetry context is passed to processTelemetry(), this\r\n * should be for legacy plugins only. Currently, only used for passing the current core instance and to provide better error\r\n * reporting (hasRun) when errors occur.\r\n * @returns\r\n */\r\nexport function createTelemetryPluginProxy(plugin, config, core) {\r\n    var nextProxy = null;\r\n    var hasProcessTelemetry = isFunction(plugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */]);\r\n    var hasSetNext = isFunction(plugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */]);\r\n    var chainId;\r\n    if (plugin) {\r\n        chainId = plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"-\" + plugin[STR_PRIORITY /* @min:%2epriority */] + \"-\" + _chainId++;\r\n    }\r\n    else {\r\n        chainId = \"Unknown-0-\" + _chainId++;\r\n    }\r\n    var proxyChain = {\r\n        getPlugin: function () {\r\n            return plugin;\r\n        },\r\n        getNext: function () {\r\n            return nextProxy;\r\n        },\r\n        processTelemetry: _processTelemetry,\r\n        unload: _unloadPlugin,\r\n        update: _updatePlugin,\r\n        _id: chainId,\r\n        _setNext: function (nextPlugin) {\r\n            nextProxy = nextPlugin;\r\n        }\r\n    };\r\n    function _getTelCtx() {\r\n        var itemCtx;\r\n        // Looks like a plugin didn't pass the (optional) context, so create a new one\r\n        if (plugin && isFunction(plugin[strGetTelCtx])) {\r\n            // This plugin extends from the BaseTelemetryPlugin so lets use it\r\n            itemCtx = plugin[strGetTelCtx]();\r\n        }\r\n        if (!itemCtx) {\r\n            // Create a temporary one\r\n            itemCtx = createProcessTelemetryContext(proxyChain, config, core);\r\n        }\r\n        return itemCtx;\r\n    }\r\n    function _processChain(itemCtx, processPluginFn, name, details, isAsync) {\r\n        var hasRun = false;\r\n        var identifier = plugin ? plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] : strTelemetryPluginChain;\r\n        var hasRunContext = itemCtx[strHasRunFlags];\r\n        if (!hasRunContext) {\r\n            // Assign and populate\r\n            hasRunContext = itemCtx[strHasRunFlags] = {};\r\n        }\r\n        // Ensure that we keep the context in sync\r\n        itemCtx.setNext(nextProxy);\r\n        if (plugin) {\r\n            doPerf(itemCtx[STR_CORE /* @min:%2ecore */](), function () { return identifier + \":\" + name; }, function () {\r\n                // Mark this component as having run\r\n                hasRunContext[chainId] = true;\r\n                try {\r\n                    // Set a flag on the next plugin so we know if it was attempted to be executed\r\n                    var nextId = nextProxy ? nextProxy._id : STR_EMPTY;\r\n                    if (nextId) {\r\n                        hasRunContext[nextId] = false;\r\n                    }\r\n                    hasRun = processPluginFn(itemCtx);\r\n                }\r\n                catch (error) {\r\n                    var hasNextRun = nextProxy ? hasRunContext[nextProxy._id] : true;\r\n                    if (hasNextRun) {\r\n                        // The next plugin after us has already run so set this one as complete\r\n                        hasRun = true;\r\n                    }\r\n                    if (!nextProxy || !hasNextRun) {\r\n                        // Either we have no next plugin or the current one did not attempt to call the next plugin\r\n                        // Which means the current one is the root of the failure so log/report this failure\r\n                        _throwInternal(itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 73 /* _eInternalMessageId.PluginException */, \"Plugin [\" + identifier + \"] failed during \" + name + \" - \" + dumpObj(error) + \", run flags: \" + dumpObj(hasRunContext));\r\n                    }\r\n                }\r\n            }, details, isAsync);\r\n        }\r\n        return hasRun;\r\n    }\r\n    function _processTelemetry(env, itemCtx) {\r\n        itemCtx = itemCtx || _getTelCtx();\r\n        function _callProcessTelemetry(itemCtx) {\r\n            if (!plugin || !hasProcessTelemetry) {\r\n                return false;\r\n            }\r\n            var pluginState = _getPluginState(plugin);\r\n            if (pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] || pluginState[STR_DISABLED]) {\r\n                return false;\r\n            }\r\n            // Ensure that we keep the context in sync (for processNext()), just in case a plugin\r\n            // doesn't calls processTelemetry() instead of itemContext.processNext() or some\r\n            // other form of error occurred\r\n            if (hasSetNext) {\r\n                // Backward compatibility setting the next plugin on the instance\r\n                plugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */](nextProxy);\r\n            }\r\n            plugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, itemCtx);\r\n            // Process Telemetry is expected to call itemCtx.processNext() or nextPlugin.processTelemetry()\r\n            return true;\r\n        }\r\n        if (!_processChain(itemCtx, _callProcessTelemetry, \"processTelemetry\", function () { return ({ item: env }); }, !(env.sync))) {\r\n            // The underlying plugin is either not defined, not enabled or does not have a processTelemetry implementation\r\n            // so we still want the next plugin to be executed.\r\n            itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](env);\r\n        }\r\n    }\r\n    function _unloadPlugin(unloadCtx, unloadState) {\r\n        function _callTeardown() {\r\n            // Setting default of hasRun as false so the proxyProcessFn() is called as teardown() doesn't have to exist or call unloadNext().\r\n            var hasRun = false;\r\n            if (plugin) {\r\n                var pluginState = _getPluginState(plugin);\r\n                var pluginCore = plugin[STR_CORE] || pluginState[STR_CORE /* @min:%2ecore */];\r\n                // Only teardown the plugin if it was initialized by the current core (i.e. It's not a shared plugin)\r\n                if (plugin && (!pluginCore || pluginCore === unloadCtx.core()) && !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */]) {\r\n                    // Handle plugins that don't extend from the BaseTelemetryPlugin\r\n                    pluginState[STR_CORE /* @min:%2ecore */] = null;\r\n                    pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] = true;\r\n                    pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = false;\r\n                    if (plugin[_DYN_TEARDOWN /* @min:%2eteardown */] && plugin[_DYN_TEARDOWN /* @min:%2eteardown */](unloadCtx, unloadState) === true) {\r\n                        // plugin told us that it was going to (or has) call unloadCtx.processNext()\r\n                        hasRun = true;\r\n                    }\r\n                }\r\n            }\r\n            return hasRun;\r\n        }\r\n        if (!_processChain(unloadCtx, _callTeardown, \"unload\", function () { }, unloadState[_DYN_IS_ASYNC /* @min:%2eisAsync */])) {\r\n            // Only called if we hasRun was not true\r\n            unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n        }\r\n    }\r\n    function _updatePlugin(updateCtx, updateState) {\r\n        function _callUpdate() {\r\n            // Setting default of hasRun as false so the proxyProcessFn() is called as teardown() doesn't have to exist or call unloadNext().\r\n            var hasRun = false;\r\n            if (plugin) {\r\n                var pluginState = _getPluginState(plugin);\r\n                var pluginCore = plugin[STR_CORE] || pluginState[STR_CORE /* @min:%2ecore */];\r\n                // Only update the plugin if it was initialized by the current core (i.e. It's not a shared plugin)\r\n                if (plugin && (!pluginCore || pluginCore === updateCtx.core()) && !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */]) {\r\n                    if (plugin[_DYN_UPDATE /* @min:%2eupdate */] && plugin[_DYN_UPDATE /* @min:%2eupdate */](updateCtx, updateState) === true) {\r\n                        // plugin told us that it was going to (or has) call unloadCtx.processNext()\r\n                        hasRun = true;\r\n                    }\r\n                }\r\n            }\r\n            return hasRun;\r\n        }\r\n        if (!_processChain(updateCtx, _callUpdate, \"update\", function () { }, false)) {\r\n            // Only called if we hasRun was not true\r\n            updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](updateState);\r\n        }\r\n    }\r\n    return objFreeze(proxyChain);\r\n}\r\n/**\r\n * This class will be removed!\r\n * @deprecated use createProcessTelemetryContext() instead\r\n */\r\nvar ProcessTelemetryContext = /** @class */ (function () {\r\n    /**\r\n     * Creates a new Telemetry Item context with the current config, core and plugin execution chain\r\n     * @param plugins - The plugin instances that will be executed\r\n     * @param config - The current config\r\n     * @param core - The current core instance\r\n     */\r\n    function ProcessTelemetryContext(pluginChain, config, core, startAt) {\r\n        var _self = this;\r\n        var context = createProcessTelemetryContext(pluginChain, config, core, startAt);\r\n        // Proxy all functions of the context to this object\r\n        proxyFunctions(_self, context, objKeys(context));\r\n    }\r\n    return ProcessTelemetryContext;\r\n}());\r\nexport { ProcessTelemetryContext };\r\n//# sourceMappingURL=ProcessTelemetryContext.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { getCrypto, getMsCrypto, isIE } from \"./EnvUtils\";\r\nimport { dateNow } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nvar UInt32Mask = 0x100000000;\r\nvar MaxUInt32 = 0xffffffff;\r\n// MWC based Random generator (for IE)\r\nvar _mwcSeeded = false;\r\nvar _mwcW = 123456789;\r\nvar _mwcZ = 987654321;\r\n// Takes any integer\r\nfunction _mwcSeed(seedValue) {\r\n    if (seedValue < 0) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        seedValue >>>= 0;\r\n    }\r\n    _mwcW = (123456789 + seedValue) & MaxUInt32;\r\n    _mwcZ = (987654321 - seedValue) & MaxUInt32;\r\n    _mwcSeeded = true;\r\n}\r\nfunction _autoSeedMwc() {\r\n    // Simple initialization using default Math.random() - So we inherit any entropy from the browser\r\n    // and bitwise XOR with the current milliseconds\r\n    try {\r\n        var now = dateNow() & 0x7fffffff;\r\n        _mwcSeed(((Math.random() * UInt32Mask) ^ now) + now);\r\n    }\r\n    catch (e) {\r\n        // Don't crash if something goes wrong\r\n    }\r\n}\r\n/**\r\n * Generate a random value between 0 and maxValue, max value should be limited to a 32-bit maximum.\r\n * So maxValue(16) will produce a number from 0..16 (range of 17)\r\n * @param maxValue\r\n */\r\nexport function randomValue(maxValue) {\r\n    if (maxValue > 0) {\r\n        return Math.floor((random32() / MaxUInt32) * (maxValue + 1)) >>> 0;\r\n    }\r\n    return 0;\r\n}\r\n/**\r\n * generate a random 32-bit number (0x000000..0xFFFFFFFF) or (-0x80000000..0x7FFFFFFF), defaults un-unsigned.\r\n * @param signed - True to return a signed 32-bit number (-0x80000000..0x7FFFFFFF) otherwise an unsigned one (0x000000..0xFFFFFFFF)\r\n */\r\nexport function random32(signed) {\r\n    var value = 0;\r\n    var c = getCrypto() || getMsCrypto();\r\n    if (c && c.getRandomValues) {\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = c.getRandomValues(new Uint32Array(1))[0] & MaxUInt32;\r\n    }\r\n    if (value === 0 && isIE()) {\r\n        // For IE 6, 7, 8 (especially on XP) Math.random is not very random\r\n        if (!_mwcSeeded) {\r\n            // Set the seed for the Mwc algorithm\r\n            _autoSeedMwc();\r\n        }\r\n        // Don't use Math.random for IE\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = mwcRandom32() & MaxUInt32;\r\n    }\r\n    if (value === 0) {\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = Math.floor((UInt32Mask * Math.random()) | 0);\r\n    }\r\n    if (!signed) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        value >>>= 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Seed the MWC random number generator with the specified seed or a random value\r\n * @param value - optional the number to used as the seed, if undefined, null or zero a random value will be chosen\r\n */\r\nexport function mwcRandomSeed(value) {\r\n    if (!value) {\r\n        _autoSeedMwc();\r\n    }\r\n    else {\r\n        _mwcSeed(value);\r\n    }\r\n}\r\n/**\r\n * Generate a random 32-bit number between (0x000000..0xFFFFFFFF) or (-0x80000000..0x7FFFFFFF), using MWC (Multiply with carry)\r\n * instead of Math.random() defaults to un-signed.\r\n * Used as a replacement random generator for IE to avoid issues with older IE instances.\r\n * @param signed - True to return a signed 32-bit number (-0x80000000..0x7FFFFFFF) otherwise an unsigned one (0x000000..0xFFFFFFFF)\r\n */\r\nexport function mwcRandom32(signed) {\r\n    _mwcZ = (36969 * (_mwcZ & 0xFFFF) + (_mwcZ >> 16)) & MaxUInt32;\r\n    _mwcW = (18000 * (_mwcW & 0xFFFF) + (_mwcW >> 16)) & MaxUInt32;\r\n    var value = (((_mwcZ << 16) + (_mwcW & 0xFFFF)) >>> 0) & MaxUInt32 | 0;\r\n    if (!signed) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        value >>>= 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Generate random base64 id string.\r\n * The default length is 22 which is 132-bits so almost the same as a GUID but as base64 (the previous default was 5)\r\n * @param maxLength - Optional value to specify the length of the id to be generated, defaults to 22\r\n */\r\nexport function newId(maxLength) {\r\n    if (maxLength === void 0) { maxLength = 22; }\r\n    var base64chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    // Start with an initial random number, consuming the value in reverse byte order\r\n    var number = random32() >>> 0; // Make sure it's a +ve number\r\n    var chars = 0;\r\n    var result = STR_EMPTY;\r\n    while (result[_DYN_LENGTH /* @min:%2elength */] < maxLength) {\r\n        chars++;\r\n        result += base64chars.charAt(number & 0x3F);\r\n        number >>>= 6; // Zero fill with right shift\r\n        if (chars === 5) {\r\n            // 5 base64 characters === 30 bits so we don't have enough bits for another base64 char\r\n            // So add on another 30 bits and make sure it's +ve\r\n            number = (((random32() << 2) & 0xFFFFFFFF) | (number & 0x03)) >>> 0;\r\n            chars = 0; // We need to reset the number every 5 chars (30 bits)\r\n        }\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=RandomHelper.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { _DYN_CALL, _DYN_GET_NEXT, _DYN_GET_PLUGIN, _DYN_INITIALIZE, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_SPAN_ID, _DYN_TEARDOWN, _DYN_TRACE_FLAGS, _DYN_TRACE_ID, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { createElmNodeData } from \"./DataCacheHelper\";\r\nimport { arrForEach, isFunction } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_PRIORITY, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { isValidSpanId, isValidTraceId } from \"./W3cTraceParent\";\r\nvar pluginStateData = createElmNodeData(\"plugin\");\r\nexport function _getPluginState(plugin) {\r\n    return pluginStateData.get(plugin, \"state\", {}, true);\r\n}\r\n/**\r\n * Initialize the queue of plugins\r\n * @param plugins - The array of plugins to initialize and setting of the next plugin\r\n * @param config The current config for the instance\r\n * @param core THe current core instance\r\n * @param extensions The extensions\r\n */\r\nexport function initializePlugins(processContext, extensions) {\r\n    // Set the next plugin and identified the uninitialized plugins\r\n    var initPlugins = [];\r\n    var lastPlugin = null;\r\n    var proxy = processContext[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n    var pluginState;\r\n    while (proxy) {\r\n        var thePlugin = proxy[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]();\r\n        if (thePlugin) {\r\n            if (lastPlugin &&\r\n                isFunction(lastPlugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */]) &&\r\n                isFunction(thePlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Set this plugin as the next for the previous one\r\n                lastPlugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */](thePlugin);\r\n            }\r\n            var isInitialized = false;\r\n            if (isFunction(thePlugin[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */])) {\r\n                isInitialized = thePlugin[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]();\r\n            }\r\n            else {\r\n                pluginState = _getPluginState(thePlugin);\r\n                isInitialized = pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */];\r\n            }\r\n            if (!isInitialized) {\r\n                initPlugins[_DYN_PUSH /* @min:%2epush */](thePlugin);\r\n            }\r\n            lastPlugin = thePlugin;\r\n            proxy = proxy[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n        }\r\n    }\r\n    // Now initialize the plugins\r\n    arrForEach(initPlugins, function (thePlugin) {\r\n        var core = processContext[STR_CORE]();\r\n        thePlugin[_DYN_INITIALIZE /* @min:%2einitialize */](processContext.getCfg(), core, extensions, processContext[_DYN_GET_NEXT /* @min:%2egetNext */]());\r\n        pluginState = _getPluginState(thePlugin);\r\n        // Only add the core to the state if the plugin didn't set it (doesn't extent from BaseTelemetryPlugin)\r\n        if (!thePlugin[STR_CORE] && !pluginState[STR_CORE]) {\r\n            pluginState[STR_CORE] = core;\r\n        }\r\n        pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = true;\r\n        delete pluginState[_DYN_TEARDOWN /* @min:%2eteardown */];\r\n    });\r\n}\r\nexport function sortPlugins(plugins) {\r\n    // Sort by priority\r\n    return plugins.sort(function (extA, extB) {\r\n        var result = 0;\r\n        if (extB) {\r\n            var bHasProcess = isFunction(extB[STR_PROCESS_TELEMETRY]);\r\n            if (isFunction(extA[STR_PROCESS_TELEMETRY])) {\r\n                result = bHasProcess ? extA[STR_PRIORITY] - extB[STR_PRIORITY] : 1;\r\n            }\r\n            else if (bHasProcess) {\r\n                result = -1;\r\n            }\r\n        }\r\n        else {\r\n            result = extA ? 1 : -1;\r\n        }\r\n        return result;\r\n    });\r\n    // sort complete\r\n}\r\n/**\r\n * Teardown / Unload helper to perform teardown/unloading operations for the provided components synchronously or asynchronously, this will call any\r\n * _doTeardown() or _doUnload() functions on the provided components to allow them to finish removal.\r\n * @param components - The components you want to unload\r\n * @param unloadCtx - This is the context that should be used during unloading.\r\n * @param unloadState - The details / state of the unload process, it holds details like whether it should be unloaded synchronously or asynchronously and the reason for the unload.\r\n * @param asyncCallback - An optional callback that the plugin must call if it returns true to inform the caller that it has completed any async unload/teardown operations.\r\n * @returns boolean - true if the plugin has or will call asyncCallback, this allows the plugin to perform any asynchronous operations.\r\n */\r\nexport function unloadComponents(components, unloadCtx, unloadState, asyncCallback) {\r\n    var idx = 0;\r\n    function _doUnload() {\r\n        while (idx < components[_DYN_LENGTH /* @min:%2elength */]) {\r\n            var component = components[idx++];\r\n            if (component) {\r\n                var func = component._doUnload || component[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */];\r\n                if (isFunction(func)) {\r\n                    if (func[_DYN_CALL /* @min:%2ecall */](component, unloadCtx, unloadState, _doUnload) === true) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return _doUnload();\r\n}\r\n/**\r\n * Creates a IDistributedTraceContext which optionally also \"sets\" the value on a parent\r\n * @param parentCtx - An optional parent distributed trace instance\r\n * @returns A new IDistributedTraceContext instance that uses an internal temporary object\r\n */\r\nexport function createDistributedTraceContext(parentCtx) {\r\n    var trace = {};\r\n    return {\r\n        getName: function () {\r\n            return trace[_DYN_NAME /* @min:%2ename */];\r\n        },\r\n        setName: function (newValue) {\r\n            parentCtx && parentCtx.setName(newValue);\r\n            trace[_DYN_NAME /* @min:%2ename */] = newValue;\r\n        },\r\n        getTraceId: function () {\r\n            return trace[_DYN_TRACE_ID /* @min:%2etraceId */];\r\n        },\r\n        setTraceId: function (newValue) {\r\n            parentCtx && parentCtx.setTraceId(newValue);\r\n            if (isValidTraceId(newValue)) {\r\n                trace[_DYN_TRACE_ID /* @min:%2etraceId */] = newValue;\r\n            }\r\n        },\r\n        getSpanId: function () {\r\n            return trace[_DYN_SPAN_ID /* @min:%2espanId */];\r\n        },\r\n        setSpanId: function (newValue) {\r\n            parentCtx && parentCtx.setSpanId(newValue);\r\n            if (isValidSpanId(newValue)) {\r\n                trace[_DYN_SPAN_ID /* @min:%2espanId */] = newValue;\r\n            }\r\n        },\r\n        getTraceFlags: function () {\r\n            return trace[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */];\r\n        },\r\n        setTraceFlags: function (newTraceFlags) {\r\n            parentCtx && parentCtx.setTraceFlags(newTraceFlags);\r\n            trace[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */] = newTraceFlags;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=TelemetryHelpers.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_DIAG_LOG, _DYN_PUSH } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { dumpObj } from \"./EnvUtils\";\r\nimport { arrForEach } from \"./HelperFuncs\";\r\nexport function createUnloadHandlerContainer() {\r\n    var handlers = [];\r\n    function _addHandler(handler) {\r\n        if (handler) {\r\n            handlers[_DYN_PUSH /* @min:%2epush */](handler);\r\n        }\r\n    }\r\n    function _runHandlers(unloadCtx, unloadState) {\r\n        arrForEach(handlers, function (handler) {\r\n            try {\r\n                handler(unloadCtx, unloadState);\r\n            }\r\n            catch (e) {\r\n                _throwInternal(unloadCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unexpected error calling unload handler - \" + dumpObj(e));\r\n            }\r\n        });\r\n        handlers = [];\r\n    }\r\n    return {\r\n        add: _addHandler,\r\n        run: _runHandlers\r\n    };\r\n}\r\n//# sourceMappingURL=UnloadHandlerContainer.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { _DYN_LENGTH, _DYN_SPAN_ID, _DYN_SUBSTR, _DYN_TRACE_FLAGS, _DYN_TRACE_ID, _DYN_VERSION } from \"../__DynamicConstants\";\r\nimport { generateW3CId } from \"./CoreUtils\";\r\nimport { findMetaTag, findNamedServerTiming } from \"./EnvUtils\";\r\nimport { isArray, isString, strTrim } from \"./HelperFuncs\";\r\n// using {0,16} for leading and trailing whitespace just to constrain the possible runtime of a random string\r\nvar TRACE_PARENT_REGEX = /^([\\da-f]{2})-([\\da-f]{32})-([\\da-f]{16})-([\\da-f]{2})(-[^\\s]*)?$/;\r\nvar DEFAULT_VERSION = \"00\";\r\nvar INVALID_VERSION = \"ff\";\r\nvar INVALID_TRACE_ID = \"00000000000000000000000000000000\";\r\nvar INVALID_SPAN_ID = \"0000000000000000\";\r\nvar SAMPLED_FLAG = 0x01;\r\nfunction _isValid(value, len, invalidValue) {\r\n    if (value && value[_DYN_LENGTH /* @min:%2elength */] === len && value !== invalidValue) {\r\n        return !!value.match(/^[\\da-f]*$/);\r\n    }\r\n    return false;\r\n}\r\nfunction _formatValue(value, len, defValue) {\r\n    if (_isValid(value, len)) {\r\n        return value;\r\n    }\r\n    return defValue;\r\n}\r\nfunction _formatFlags(value) {\r\n    if (isNaN(value) || value < 0 || value > 255) {\r\n        value = 0x01;\r\n    }\r\n    var result = value.toString(16);\r\n    while (result[_DYN_LENGTH /* @min:%2elength */] < 2) {\r\n        result = \"0\" + result;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Create a new ITraceParent instance using the provided values.\r\n * @param traceId - The traceId to use, when invalid a new random W3C id will be generated.\r\n * @param spanId - The parent/span id to use, a new random value will be generated if it is invalid.\r\n * @param flags - The traceFlags to use, defaults to zero (0) if not supplied or invalid\r\n * @param version - The version to used, defaults to version \"01\" if not supplied or invalid.\r\n * @returns\r\n */\r\nexport function createTraceParent(traceId, spanId, flags, version) {\r\n    var _a;\r\n    return _a = {},\r\n        _a[_DYN_VERSION /* @min:version */] = _isValid(version, 2, INVALID_VERSION) ? version : DEFAULT_VERSION,\r\n        _a[_DYN_TRACE_ID /* @min:traceId */] = isValidTraceId(traceId) ? traceId : generateW3CId(),\r\n        _a.spanId = isValidSpanId(spanId) ? spanId : generateW3CId()[_DYN_SUBSTR /* @min:%2esubstr */](0, 16),\r\n        _a.traceFlags = flags >= 0 && flags <= 0xFF ? flags : 1,\r\n        _a;\r\n}\r\n/**\r\n * Attempt to parse the provided string as a W3C TraceParent header value (https://www.w3.org/TR/trace-context/#traceparent-header)\r\n *\r\n * @param value\r\n * @returns\r\n */\r\nexport function parseTraceParent(value) {\r\n    var _a;\r\n    if (!value) {\r\n        // Don't pass a null/undefined or empty string\r\n        return null;\r\n    }\r\n    if (isArray(value)) {\r\n        // The value may have been encoded on the page into an array so handle this automatically\r\n        value = value[0] || \"\";\r\n    }\r\n    if (!value || !isString(value) || value[_DYN_LENGTH /* @min:%2elength */] > 8192) {\r\n        // limit potential processing based on total length\r\n        return null;\r\n    }\r\n    // See https://www.w3.org/TR/trace-context/#versioning-of-traceparent\r\n    var match = TRACE_PARENT_REGEX.exec(strTrim(value));\r\n    if (!match || // No match\r\n        match[1] === INVALID_VERSION || // version ff is forbidden\r\n        match[2] === INVALID_TRACE_ID || // All zeros is considered to be invalid\r\n        match[3] === INVALID_SPAN_ID) { // All zeros is considered to be invalid\r\n        return null;\r\n    }\r\n    return _a = {},\r\n        _a[_DYN_VERSION /* @min:version */] = match[1],\r\n        _a[_DYN_TRACE_ID /* @min:traceId */] = match[2],\r\n        _a[_DYN_SPAN_ID /* @min:spanId */] = match[3],\r\n        _a[_DYN_TRACE_FLAGS /* @min:traceFlags */] = parseInt(match[4], 16),\r\n        _a;\r\n}\r\n/**\r\n * Is the provided W3c Trace Id a valid string representation, it must be a 32-character string\r\n * of lowercase hexadecimal characters for example, 4bf92f3577b34da6a3ce929d0e0e4736.\r\n * If all characters as zero (00000000000000000000000000000000) it will be considered an invalid value.\r\n * @param value - The W3c trace Id to be validated\r\n * @returns true if valid otherwise false\r\n */\r\nexport function isValidTraceId(value) {\r\n    return _isValid(value, 32, INVALID_TRACE_ID);\r\n}\r\n/**\r\n * Is the provided W3c span id (aka. parent id) a valid string representation, it must be a 16-character\r\n * string of lowercase hexadecimal characters, for example, 00f067aa0ba902b7.\r\n * If all characters are zero (0000000000000000) this is considered an invalid value.\r\n * @param value - The W3c span id to be validated\r\n * @returns true if valid otherwise false\r\n */\r\nexport function isValidSpanId(value) {\r\n    return _isValid(value, 16, INVALID_SPAN_ID);\r\n}\r\n/**\r\n * Validates that the provided ITraceParent instance conforms to the currently supported specifications\r\n * @param value\r\n * @returns\r\n */\r\nexport function isValidTraceParent(value) {\r\n    if (!value ||\r\n        !_isValid(value[_DYN_VERSION /* @min:%2eversion */], 2, INVALID_VERSION) ||\r\n        !_isValid(value[_DYN_TRACE_ID /* @min:%2etraceId */], 32, INVALID_TRACE_ID) ||\r\n        !_isValid(value[_DYN_SPAN_ID /* @min:%2espanId */], 16, INVALID_SPAN_ID) ||\r\n        !_isValid(_formatFlags(value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */]), 2)) {\r\n        // Each known field must contain a valid value\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Is the parsed traceParent indicating that the trace is currently sampled.\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function isSampledFlag(value) {\r\n    if (isValidTraceParent(value)) {\r\n        return (value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */] & SAMPLED_FLAG) === SAMPLED_FLAG;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Format the ITraceParent value as a string using the supported and know version formats.\r\n * So even if the passed traceParent is a later version the string value returned from this\r\n * function will convert it to only the known version formats.\r\n * This currently only supports version \"00\" and invalid \"ff\"\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function formatTraceParent(value) {\r\n    if (value) {\r\n        // Special Note: This only supports formatting as version 00, future versions should encode any known supported version\r\n        // So parsing a future version will populate the correct version value but reformatting will reduce it to version 00.\r\n        var flags = _formatFlags(value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */]);\r\n        if (!_isValid(flags, 2)) {\r\n            flags = \"01\";\r\n        }\r\n        var version = value[_DYN_VERSION /* @min:%2eversion */] || DEFAULT_VERSION;\r\n        if (version !== \"00\" && version !== \"ff\") {\r\n            // Reduce version to \"00\"\r\n            version = DEFAULT_VERSION;\r\n        }\r\n        // Format as version 00\r\n        return \"\".concat(version, \"-\").concat(_formatValue(value.traceId, 32, INVALID_TRACE_ID), \"-\").concat(_formatValue(value.spanId, 16, INVALID_SPAN_ID), \"-\").concat(flags);\r\n    }\r\n    return \"\";\r\n}\r\n/**\r\n * Helper function to fetch the passed traceparent from the page, looking for it as a meta-tag or a Server-Timing header.\r\n * @returns\r\n */\r\nexport function findW3cTraceParent() {\r\n    var name = \"traceparent\";\r\n    var traceParent = parseTraceParent(findMetaTag(name));\r\n    if (!traceParent) {\r\n        traceParent = parseTraceParent(findNamedServerTiming(name));\r\n    }\r\n    return traceParent;\r\n}\r\n//# sourceMappingURL=W3cTraceParent.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 8\r\nexport var _DYN_NAME = \"name\"; // Count: 11\r\nexport var _DYN_GET_NOTIFY_MGR = \"getNotifyMgr\"; // Count: 3\r\nexport var _DYN_IDENTIFIER = \"identifier\"; // Count: 8\r\nexport var _DYN_PUSH = \"push\"; // Count: 30\r\nexport var _DYN_IS_INITIALIZED = \"isInitialized\"; // Count: 10\r\nexport var _DYN_CONFIG = \"config\"; // Count: 7\r\nexport var _DYN_INSTRUMENTATION_KEY = \"instrumentationKey\"; // Count: 3\r\nexport var _DYN_LOGGER = \"logger\"; // Count: 9\r\nexport var _DYN_LENGTH = \"length\"; // Count: 43\r\nexport var _DYN_TIME = \"time\"; // Count: 5\r\nexport var _DYN_PROCESS_NEXT = \"processNext\"; // Count: 21\r\nexport var _DYN_GET_PROCESS_TEL_CONT0 = \"getProcessTelContext\"; // Count: 2\r\nexport var _DYN_ADD_NOTIFICATION_LIS1 = \"addNotificationListener\"; // Count: 5\r\nexport var _DYN_REMOVE_NOTIFICATION_2 = \"removeNotificationListener\"; // Count: 5\r\nexport var _DYN_STOP_POLLING_INTERNA3 = \"stopPollingInternalLogs\"; // Count: 2\r\nexport var _DYN_ON_COMPLETE = \"onComplete\"; // Count: 4\r\nexport var _DYN_GET_PLUGIN = \"getPlugin\"; // Count: 5\r\nexport var _DYN_FLUSH = \"flush\"; // Count: 5\r\nexport var _DYN__EXTENSIONS = \"_extensions\"; // Count: 4\r\nexport var _DYN_SPLICE = \"splice\"; // Count: 6\r\nexport var _DYN_TEARDOWN = \"teardown\"; // Count: 10\r\nexport var _DYN_MESSAGE_ID = \"messageId\"; // Count: 4\r\nexport var _DYN_MESSAGE = \"message\"; // Count: 7\r\nexport var _DYN_IS_ASYNC = \"isAsync\"; // Count: 7\r\nexport var _DYN__DO_TEARDOWN = \"_doTeardown\"; // Count: 4\r\nexport var _DYN_UPDATE = \"update\"; // Count: 7\r\nexport var _DYN_GET_NEXT = \"getNext\"; // Count: 12\r\nexport var _DYN_DIAG_LOG = \"diagLog\"; // Count: 8\r\nexport var _DYN_SET_NEXT_PLUGIN = \"setNextPlugin\"; // Count: 5\r\nexport var _DYN_CREATE_NEW = \"createNew\"; // Count: 6\r\nexport var _DYN_COOKIE_CFG = \"cookieCfg\"; // Count: 3\r\nexport var _DYN_INDEX_OF = \"indexOf\"; // Count: 6\r\nexport var _DYN_SUBSTRING = \"substring\"; // Count: 10\r\nexport var _DYN_USER_AGENT = \"userAgent\"; // Count: 5\r\nexport var _DYN_SPLIT = \"split\"; // Count: 5\r\nexport var _DYN_SET_ENABLED = \"setEnabled\"; // Count: 5\r\nexport var _DYN_SUBSTR = \"substr\"; // Count: 6\r\nexport var _DYN_NODE_TYPE = \"nodeType\"; // Count: 3\r\nexport var _DYN_APPLY = \"apply\"; // Count: 6\r\nexport var _DYN_REPLACE = \"replace\"; // Count: 10\r\nexport var _DYN_ENABLE_DEBUG_EXCEPTI4 = \"enableDebugExceptions\"; // Count: 2\r\nexport var _DYN_LOG_INTERNAL_MESSAGE = \"logInternalMessage\"; // Count: 2\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 5\r\nexport var _DYN_CALL = \"call\"; // Count: 18\r\nexport var _DYN_TYPE = \"type\"; // Count: 14\r\nexport var _DYN_HANDLER = \"handler\"; // Count: 5\r\nexport var _DYN_LISTENERS = \"listeners\"; // Count: 6\r\nexport var _DYN_IS_CHILD_EVT = \"isChildEvt\"; // Count: 3\r\nexport var _DYN_GET_CTX = \"getCtx\"; // Count: 6\r\nexport var _DYN_SET_CTX = \"setCtx\"; // Count: 10\r\nexport var _DYN_COMPLETE = \"complete\"; // Count: 3\r\nexport var _DYN_TRACE_ID = \"traceId\"; // Count: 5\r\nexport var _DYN_SPAN_ID = \"spanId\"; // Count: 5\r\nexport var _DYN_TRACE_FLAGS = \"traceFlags\"; // Count: 6\r\nexport var _DYN_VERSION = \"version\"; // Count: 4\r\n//# sourceMappingURL=__DynamicConstants.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nexport var strShimFunction = \"function\";\r\nexport var strShimObject = \"object\";\r\nexport var strShimUndefined = \"undefined\";\r\nexport var strShimPrototype = \"prototype\";\r\nexport var strShimHasOwnProperty = \"hasOwnProperty\";\r\nexport var strDefault = \"default\";\r\nexport var ObjClass = Object;\r\nexport var ObjProto = ObjClass[strShimPrototype];\r\nexport var ObjAssign = ObjClass[\"assign\"];\r\nexport var ObjCreate = ObjClass[\"create\"];\r\nexport var ObjDefineProperty = ObjClass[\"defineProperty\"];\r\nexport var ObjHasOwnProperty = ObjProto[strShimHasOwnProperty];\r\n//# sourceMappingURL=Constants.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { ObjCreate, strShimFunction, strShimObject, strShimPrototype, strShimUndefined } from \"./Constants\";\r\nvar _cachedGlobal = null;\r\n/**\r\n * Returns the current global scope object, for a normal web page this will be the current\r\n * window, for a Web Worker this will be current worker global scope via \"self\". The internal\r\n * implementation returns the first available instance object in the following order\r\n * - globalThis (New standard)\r\n * - self (Will return the current window instance for supported browsers)\r\n * - window (fallback for older browser implementations)\r\n * - global (NodeJS standard)\r\n * - <null> (When all else fails)\r\n * While the return type is a Window for the normal case, not all environments will support all\r\n * of the properties or functions.\r\n */\r\nexport function getGlobal(useCached) {\r\n    if (useCached === void 0) { useCached = true; }\r\n    var result = useCached === false ? null : _cachedGlobal;\r\n    if (!result) {\r\n        if (typeof globalThis !== strShimUndefined) {\r\n            result = globalThis;\r\n        }\r\n        if (!result && typeof self !== strShimUndefined) {\r\n            result = self;\r\n        }\r\n        if (!result && typeof window !== strShimUndefined) {\r\n            result = window;\r\n        }\r\n        if (!result && typeof global !== strShimUndefined) {\r\n            result = global;\r\n        }\r\n        _cachedGlobal = result;\r\n    }\r\n    return result;\r\n}\r\nexport function throwTypeError(message) {\r\n    throw new TypeError(message);\r\n}\r\n/**\r\n * Creates an object that has the specified prototype, and that optionally contains specified properties. This helper exists to avoid adding a polyfil\r\n * for older browsers that do not define Object.create eg. ES3 only, IE8 just in case any page checks for presence/absence of the prototype implementation.\r\n * Note: For consistency this will not use the Object.create implementation if it exists as this would cause a testing requirement to test with and without the implementations\r\n * @param obj Object to use as a prototype. May be null\r\n */\r\nexport function objCreateFn(obj) {\r\n    var func = ObjCreate;\r\n    // Use build in Object.create\r\n    if (func) {\r\n        // Use Object create method if it exists\r\n        return func(obj);\r\n    }\r\n    if (obj == null) {\r\n        return {};\r\n    }\r\n    var type = typeof obj;\r\n    if (type !== strShimObject && type !== strShimFunction) {\r\n        throwTypeError(\"Object prototype may only be an Object:\" + obj);\r\n    }\r\n    function tmpFunc() { }\r\n    tmpFunc[strShimPrototype] = obj;\r\n    return new tmpFunc();\r\n}\r\n//# sourceMappingURL=Helpers.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { ObjAssign, ObjClass, ObjCreate, ObjDefineProperty, ObjHasOwnProperty, ObjProto, strDefault, strShimFunction, strShimHasOwnProperty, strShimPrototype } from \"./Constants\";\r\nimport { getGlobal, objCreateFn, throwTypeError } from \"./Helpers\";\r\n// Most of these functions have been directly shamelessly \"lifted\" from the https://github.com/@microsoft/tslib and\r\n// modified to be ES3 compatible and applying several minification and tree-shaking techniques so that Application Insights\r\n// can successfully use TypeScript \"importHelpers\" which imports tslib during compilation but it will use these at runtime\r\n// Which is also why all of the functions have not been included as Application Insights currently doesn't use or require\r\n// them.\r\nexport var SymbolObj = (getGlobal() || {})[\"Symbol\"];\r\nexport var ReflectObj = (getGlobal() || {})[\"Reflect\"];\r\nexport var __hasSymbol = !!SymbolObj;\r\nexport var __hasReflect = !!ReflectObj;\r\nvar strDecorate = \"decorate\";\r\nvar strMetadata = \"metadata\";\r\nvar strGetOwnPropertySymbols = \"getOwnPropertySymbols\";\r\nvar strIterator = \"iterator\";\r\nexport var __objAssignFnImpl = function (t) {\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) {\r\n            if (ObjProto[strShimHasOwnProperty].call(s, p)) {\r\n                t[p] = s[p];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n};\r\nexport var __assignFn = ObjAssign || __objAssignFnImpl;\r\n// tslint:disable-next-line: only-arrow-functions\r\nvar extendStaticsFn = function (d, b) {\r\n    extendStaticsFn = ObjClass[\"setPrototypeOf\"] ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        ({ __proto__: [] } instanceof Array && function (d, b) {\r\n            d.__proto__ = b;\r\n        }) ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        function (d, b) {\r\n            for (var p in b) {\r\n                if (b[strShimHasOwnProperty](p)) {\r\n                    d[p] = b[p];\r\n                }\r\n            }\r\n        };\r\n    return extendStaticsFn(d, b);\r\n};\r\nexport function __extendsFn(d, b) {\r\n    if (typeof b !== strShimFunction && b !== null) {\r\n        throwTypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    }\r\n    extendStaticsFn(d, b);\r\n    function __() {\r\n        this.constructor = d;\r\n    }\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    d[strShimPrototype] = b === null ? objCreateFn(b) : (__[strShimPrototype] = b[strShimPrototype], new __());\r\n}\r\nexport function __restFn(s, e) {\r\n    var t = {};\r\n    for (var k in s) {\r\n        if (ObjHasOwnProperty.call(s, k) && e.indexOf(k) < 0) {\r\n            t[k] = s[k];\r\n        }\r\n    }\r\n    if (s != null && typeof ObjClass[strGetOwnPropertySymbols] === strShimFunction) {\r\n        for (var i = 0, p = ObjClass[strGetOwnPropertySymbols](s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && ObjProto[\"propertyIsEnumerable\"].call(s, p[i])) {\r\n                t[p[i]] = s[p[i]];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n}\r\nexport function __decorateFn(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = ObjClass[\"getOwnPropertyDescriptor\"](target, key) : desc, d;\r\n    if (__hasReflect && typeof ReflectObj[strDecorate] === strShimFunction) {\r\n        r = ReflectObj[strDecorate](decorators, target, key, desc);\r\n    }\r\n    else {\r\n        for (var i = decorators.length - 1; i >= 0; i--) {\r\n            // eslint-disable-next-line no-cond-assign\r\n            if (d = decorators[i]) {\r\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n            }\r\n        }\r\n    }\r\n    // tslint:disable-next-line:ban-comma-operator\r\n    return c > 3 && r && ObjDefineProperty(target, key, r), r;\r\n}\r\nexport function __paramFn(paramIndex, decorator) {\r\n    return function (target, key) {\r\n        decorator(target, key, paramIndex);\r\n    };\r\n}\r\nexport function __metadataFn(metadataKey, metadataValue) {\r\n    if (__hasReflect && ReflectObj[strMetadata] === strShimFunction) {\r\n        return ReflectObj[strMetadata](metadataKey, metadataValue);\r\n    }\r\n}\r\nexport function __exportStarFn(m, o) {\r\n    for (var p in m) {\r\n        if (p !== strDefault && !ObjHasOwnProperty.call(o, p)) {\r\n            __createBindingFn(o, m, p);\r\n        }\r\n    }\r\n}\r\nexport function __createBindingFn(o, m, k, k2) {\r\n    if (k2 === undefined) {\r\n        k2 = k;\r\n    }\r\n    if (!!ObjCreate) {\r\n        ObjDefineProperty(o, k2, {\r\n            enumerable: true,\r\n            get: function () {\r\n                return m[k];\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        o[k2] = m[k];\r\n    }\r\n}\r\nexport function __valuesFn(o) {\r\n    var s = typeof SymbolObj === strShimFunction && SymbolObj[strIterator], m = s && o[s], i = 0;\r\n    if (m) {\r\n        return m.call(o);\r\n    }\r\n    if (o && typeof o.length === \"number\") {\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) {\r\n                    o = void 0;\r\n                }\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    }\r\n    throwTypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\nexport function __readFn(o, n) {\r\n    var m = typeof SymbolObj === strShimFunction && o[SymbolObj[strIterator]];\r\n    if (!m) {\r\n        return o;\r\n    }\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\r\n            ar.push(r.value);\r\n        }\r\n    }\r\n    catch (error) {\r\n        e = {\r\n            error: error\r\n        };\r\n    }\r\n    finally {\r\n        try {\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            if (r && !r.done && (m = i[\"return\"])) {\r\n                m.call(i);\r\n            }\r\n        }\r\n        finally {\r\n            if (e) {\r\n                // eslint-disable-next-line no-unsafe-finally\r\n                throw e.error;\r\n            }\r\n        }\r\n    }\r\n    return ar;\r\n}\r\n/** @deprecated */\r\nexport function __spreadArraysFn() {\r\n    var theArgs = arguments;\r\n    // Calculate new total size\r\n    for (var s = 0, i = 0, il = theArgs.length; i < il; i++) {\r\n        s += theArgs[i].length;\r\n    }\r\n    // Create new full array\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++) {\r\n        for (var a = theArgs[i], j = 0, jl = a.length; j < jl; j++, k++) {\r\n            r[k] = a[j];\r\n        }\r\n    }\r\n    return r;\r\n}\r\nexport function __spreadArrayFn(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) {\r\n        to[j] = from[i];\r\n    }\r\n    return to;\r\n}\r\nexport function __makeTemplateObjectFn(cooked, raw) {\r\n    if (ObjDefineProperty) {\r\n        ObjDefineProperty(cooked, \"raw\", { value: raw });\r\n    }\r\n    else {\r\n        cooked.raw = raw;\r\n    }\r\n    return cooked;\r\n}\r\nexport function __importStarFn(mod) {\r\n    if (mod && mod.__esModule) {\r\n        return mod;\r\n    }\r\n    var result = {};\r\n    if (mod != null) {\r\n        for (var k in mod) {\r\n            if (k !== strDefault && Object.prototype.hasOwnProperty.call(mod, k)) {\r\n                __createBindingFn(result, mod, k);\r\n            }\r\n        }\r\n    }\r\n    // Set default module\r\n    if (!!ObjCreate) {\r\n        ObjDefineProperty(result, strDefault, { enumerable: true, value: mod });\r\n    }\r\n    else {\r\n        result[strDefault] = mod;\r\n    }\r\n    return result;\r\n}\r\nexport function __importDefaultFn(mod) {\r\n    return (mod && mod.__esModule) ? mod : { strDefault: mod };\r\n}\r\n//# sourceMappingURL=TsLibShims.js.map","/*!\n * Application Insights JavaScript SDK - Web Snippet, 1.0.1\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar webSnippet = \"!function(T,l,y){var S=T.location,k=\\\"script\\\",D=\\\"instrumentationKey\\\",C=\\\"ingestionendpoint\\\",I=\\\"disableExceptionTracking\\\",E=\\\"ai.device.\\\",b=\\\"toLowerCase\\\",w=\\\"crossOrigin\\\",N=\\\"POST\\\",e=\\\"appInsightsSDK\\\",t=y.name||\\\"appInsights\\\";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:\\\"5\\\",version:2,config:d};function v(e,t){var n={},a=\\\"Browser\\\";return n[E+\\\"id\\\"]=a[b](),n[E+\\\"type\\\"]=a,n[\\\"ai.operation.name\\\"]=S&&S.pathname||\\\"_unknown_\\\",n[\\\"ai.internal.sdkVersion\\\"]=\\\"javascript:snippet_\\\"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=\\\"\\\"+e;return 1===t.length&&(t=\\\"0\\\"+t),t}return e.getUTCFullYear()+\\\"-\\\"+t(1+e.getUTCMonth())+\\\"-\\\"+t(e.getUTCDate())+\\\"T\\\"+t(e.getUTCHours())+\\\":\\\"+t(e.getUTCMinutes())+\\\":\\\"+t(e.getUTCSeconds())+\\\".\\\"+((e.getUTCMilliseconds()/1e3).toFixed(3)+\\\"\\\").slice(2,5)+\\\"Z\\\"}(),iKey:e,name:\\\"Microsoft.ApplicationInsights.\\\"+e.replace(/-/g,\\\"\\\")+\\\".\\\"+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(\\\";\\\"),a=0;a<n.length;a++){var i=n[a].split(\\\"=\\\");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]=\\\"https://\\\"+(o?o+\\\".\\\":\\\"\\\")+\\\"dc.\\\"+(r||\\\"services.visualstudio.com\\\")}return e}(),c=s[D]||d[D]||\\\"\\\",u=s[C],p=u?u+\\\"/v2/track\\\":d.endpointUrl,(l=[]).push((n=\\\"SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)\\\",a=t,i=p,(o=(r=v(c,\\\"Exception\\\")).data).baseType=\\\"ExceptionData\\\",o.baseData.exceptions=[{typeName:\\\"SDKLoadFailed\\\",message:n.replace(/\\\\./g,\\\"-\\\"),hasFullStack:!1,stack:n+\\\"\\\\nSnippet failed to load [\\\"+a+\\\"] -- Telemetry is disabled\\\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\\\nHost: \\\"+(S&&S.pathname||\\\"_unknown_\\\")+\\\"\\\\nEndpoint: \\\"+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,\\\"Message\\\"),r=i.data;r.baseType=\\\"MessageData\\\";var o=r.baseData;return o.message=\\'AI (Internal): 99 message:\\\"\\'+(\\\"SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) (\\\"+n+\\\")\\\").replace(/\\\\\\\"/g,\\\"\\\")+\\'\\\"\\',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:\\\"cors\\\"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader(\\\"Content-type\\\",\\\"application/json\\\"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&\\\"\\\"!==e||\\\"undefined\\\"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){\\\"loaded\\\"!==n.readyState&&\\\"complete\\\"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName(\\\"head\\\")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n=\\\"track\\\",r=\\\"TrackPage\\\",o=\\\"TrackEvent\\\";t([n+\\\"Event\\\",n+\\\"PageView\\\",n+\\\"Exception\\\",n+\\\"Trace\\\",n+\\\"DependencyData\\\",n+\\\"Metric\\\",n+\\\"PageViewPerformance\\\",\\\"start\\\"+r,\\\"stop\\\"+r,\\\"start\\\"+o,\\\"stop\\\"+o,\\\"addTelemetryInitializer\\\",\\\"setAuthenticatedUserContext\\\",\\\"clearAuthenticatedUserContext\\\",\\\"flush\\\"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c=\\\"onerror\\\";t([\\\"_\\\"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m[\\\"_\\\"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\\r\\nsrc: \\\"https://js.monitor.azure.com/scripts/b/ai.2.min.js\\\", // The SDK URL Source\\r\\n// name: \\\"appInsights\\\", // Global SDK Instance name defaults to \\\"appInsights\\\" when not supplied\\r\\n// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\\r\\n// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\\r\\n// crossOrigin: \\\"anonymous\\\", // When supplied this will add the provided value as the cross origin attribute on the script tag\\r\\n// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won\\'t get called)\\r\\ncfg: { // Application Insights Configuration\\r\\n    instrumentationKey: \\\"INSTRUMENTATION_KEY\\\"\\r\\n}});\";\n\nexport { webSnippet };\n","/*!\n * Microsoft Dynamic Proto Utility, 1.1.7\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar _a;\r\nvar UNDEFINED = \"undefined\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Constructor = 'constructor';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Prototype = 'prototype';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strFunction = 'function';\r\n/**\r\n * Used to define the name of the instance function lookup table\r\n * @ignore\r\n */\r\nvar DynInstFuncTable = '_dynInstFuncs';\r\n/**\r\n * Name used to tag the dynamic prototype function\r\n * @ignore\r\n */\r\nvar DynProxyTag = '_isDynProxy';\r\n/**\r\n * Name added to a prototype to define the dynamic prototype \"class\" name used to lookup the function table\r\n * @ignore\r\n */\r\nvar DynClassName = '_dynClass';\r\n/**\r\n * Prefix added to the classname to avoid any name clashes with other instance level properties\r\n * @ignore\r\n */\r\nvar DynClassNamePrefix = '_dynCls$';\r\n/**\r\n * A tag which is used to check if we have already to attempted to set the instance function if one is not present\r\n * @ignore\r\n */\r\nvar DynInstChkTag = '_dynInstChk';\r\n/**\r\n * A tag which is used to check if we are allows to try and set an instance function is one is not present. Using the same\r\n * tag name as the function level but a different const name for readability only.\r\n */\r\nvar DynAllowInstChkTag = DynInstChkTag;\r\n/**\r\n * The global (imported) instances where the global performance options are stored\r\n */\r\nvar DynProtoDefaultOptions = '_dfOpts';\r\n/**\r\n * Value used as the name of a class when it cannot be determined\r\n * @ignore\r\n */\r\nvar UnknownValue = '_unknown_';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar str__Proto = \"__proto__\";\r\n/**\r\n * The polyfill version of __proto__ so that it doesn't cause issues for anyone not expecting it to exist\r\n */\r\nvar DynProtoBaseProto = \"_dyn\" + str__Proto;\r\n/**\r\n * Runtime Global holder for dynamicProto settings\r\n */\r\nvar DynProtoGlobalSettings = \"__dynProto$Gbl\";\r\n/**\r\n * Track the current prototype for IE8 as you can't look back to get the prototype\r\n */\r\nvar DynProtoCurrent = \"_dynInstProto\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strUseBaseInst = 'useBaseInst';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strSetInstFuncs = 'setInstFuncs';\r\nvar Obj = Object;\r\n/**\r\n * Pre-lookup to check if we are running on a modern browser (i.e. not IE8)\r\n * @ignore\r\n */\r\nvar _objGetPrototypeOf = Obj[\"getPrototypeOf\"];\r\n/**\r\n * Pre-lookup to check for the existence of this function\r\n */\r\nvar _objGetOwnProps = Obj[\"getOwnPropertyNames\"];\r\n/**\r\n * Gets the runtime global reference\r\n * @returns\r\n */\r\nfunction _getGlobal() {\r\n    var result;\r\n    if (typeof globalThis !== UNDEFINED) {\r\n        result = globalThis;\r\n    }\r\n    if (!result && typeof self !== UNDEFINED) {\r\n        result = self;\r\n    }\r\n    if (!result && typeof window !== UNDEFINED) {\r\n        result = window;\r\n    }\r\n    if (!result && typeof global !== UNDEFINED) {\r\n        result = global;\r\n    }\r\n    return result || {};\r\n}\r\n// Since 1.1.7 moving these to the runtime global to work around mixed version and module issues\r\n// See Issue https://github.com/microsoft/DynamicProto-JS/issues/57 for details\r\nvar _gbl = _getGlobal();\r\nvar _gblInst = _gbl[DynProtoGlobalSettings] || (_gbl[DynProtoGlobalSettings] = {\r\n    o: (_a = {},\r\n        _a[strSetInstFuncs] = true,\r\n        _a[strUseBaseInst] = true,\r\n        _a),\r\n    n: 1000 // Start new global index @ 1000 so we \"fix\" some cases when mixed with 1.1.6 or earlier\r\n});\r\n/**\r\n * Helper to check if the object contains a property of the name\r\n * @ignore\r\n */\r\nfunction _hasOwnProperty(obj, prop) {\r\n    return obj && Obj[Prototype].hasOwnProperty.call(obj, prop);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype or Array prototype\r\n * @ignore\r\n */\r\nfunction _isObjectOrArrayPrototype(target) {\r\n    return target && (target === Obj[Prototype] || target === Array[Prototype]);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype, Array prototype or Function prototype\r\n * @ignore\r\n */\r\nfunction _isObjectArrayOrFunctionPrototype(target) {\r\n    return _isObjectOrArrayPrototype(target) || target === Function[Prototype];\r\n}\r\n/**\r\n * Helper used to get the prototype of the target object as getPrototypeOf is not available in an ES3 environment.\r\n * @ignore\r\n */\r\nfunction _getObjProto(target) {\r\n    var newProto;\r\n    if (target) {\r\n        // This method doesn't exist in older browsers (e.g. IE8)\r\n        if (_objGetPrototypeOf) {\r\n            return _objGetPrototypeOf(target);\r\n        }\r\n        var curProto = target[str__Proto] || target[Prototype] || (target[Constructor] ? target[Constructor][Prototype] : null);\r\n        // Using the pre-calculated value as IE8 doesn't support looking up the prototype of a prototype and thus fails for more than 1 base class\r\n        newProto = target[DynProtoBaseProto] || curProto;\r\n        if (!_hasOwnProperty(target, DynProtoBaseProto)) {\r\n            // As this prototype doesn't have this property then this is from an inherited class so newProto is the base to return so save it\r\n            // so we can look it up value (which for a multiple hierarchy dynamicProto will be the base class)\r\n            delete target[DynProtoCurrent]; // Delete any current value allocated to this instance so we pick up the value from prototype hierarchy\r\n            newProto = target[DynProtoBaseProto] = target[DynProtoCurrent] || target[DynProtoBaseProto];\r\n            target[DynProtoCurrent] = curProto;\r\n        }\r\n    }\r\n    return newProto;\r\n}\r\n/**\r\n * Helper to get the properties of an object, including none enumerable ones as functions on a prototype in ES6\r\n * are not enumerable.\r\n * @param target\r\n */\r\nfunction _forEachProp(target, func) {\r\n    var props = [];\r\n    if (_objGetOwnProps) {\r\n        props = _objGetOwnProps(target);\r\n    }\r\n    else {\r\n        for (var name_1 in target) {\r\n            if (typeof name_1 === \"string\" && _hasOwnProperty(target, name_1)) {\r\n                props.push(name_1);\r\n            }\r\n        }\r\n    }\r\n    if (props && props.length > 0) {\r\n        for (var lp = 0; lp < props.length; lp++) {\r\n            func(props[lp]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Helper function to check whether the provided function name is a potential candidate for dynamic\r\n * callback and prototype generation.\r\n * @param target The target object, may be a prototype or class object\r\n * @param funcName The function name\r\n * @param skipOwn Skips the check for own property\r\n * @ignore\r\n */\r\nfunction _isDynamicCandidate(target, funcName, skipOwn) {\r\n    return (funcName !== Constructor && typeof target[funcName] === strFunction && (skipOwn || _hasOwnProperty(target, funcName)));\r\n}\r\n/**\r\n * Helper to throw a TypeError exception\r\n * @param message the message\r\n * @ignore\r\n */\r\nfunction _throwTypeError(message) {\r\n    throw new TypeError(\"DynamicProto: \" + message);\r\n}\r\n/**\r\n * Returns a collection of the instance functions that are defined directly on the thisTarget object, it does\r\n * not return any inherited functions\r\n * @param thisTarget The object to get the instance functions from\r\n * @ignore\r\n */\r\nfunction _getInstanceFuncs(thisTarget) {\r\n    // Get the base proto\r\n    var instFuncs = {};\r\n    // Save any existing instance functions\r\n    _forEachProp(thisTarget, function (name) {\r\n        // Don't include any dynamic prototype instances - as we only want the real functions\r\n        if (!instFuncs[name] && _isDynamicCandidate(thisTarget, name, false)) {\r\n            // Create an instance callback for passing the base function to the caller\r\n            instFuncs[name] = thisTarget[name];\r\n        }\r\n    });\r\n    return instFuncs;\r\n}\r\n/**\r\n * Returns whether the value is included in the array\r\n * @param values The array of values\r\n * @param value  The value\r\n */\r\nfunction _hasVisited(values, value) {\r\n    for (var lp = values.length - 1; lp >= 0; lp--) {\r\n        if (values[lp] === value) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Returns an object that contains callback functions for all \"base/super\" functions, this is used to \"save\"\r\n * enabling calling super.xxx() functions without requiring that the base \"class\" has defined a prototype references\r\n * @param target The current instance\r\n * @ignore\r\n */\r\nfunction _getBaseFuncs(classProto, thisTarget, instFuncs, useBaseInst) {\r\n    function _instFuncProxy(target, funcHost, funcName) {\r\n        var theFunc = funcHost[funcName];\r\n        if (theFunc[DynProxyTag] && useBaseInst) {\r\n            // grab and reuse the hosted looking function (if available) otherwise the original passed function\r\n            var instFuncTable = target[DynInstFuncTable] || {};\r\n            if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n                theFunc = (instFuncTable[funcHost[DynClassName]] || {})[funcName] || theFunc;\r\n            }\r\n        }\r\n        return function () {\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return theFunc.apply(target, arguments);\r\n        };\r\n    }\r\n    // Start creating a new baseFuncs by creating proxies for the instance functions (as they may get replaced)\r\n    var baseFuncs = {};\r\n    _forEachProp(instFuncs, function (name) {\r\n        // Create an instance callback for passing the base function to the caller\r\n        baseFuncs[name] = _instFuncProxy(thisTarget, instFuncs, name);\r\n    });\r\n    // Get the base prototype functions\r\n    var baseProto = _getObjProto(classProto);\r\n    var visited = [];\r\n    // Don't include base object functions for Object, Array or Function\r\n    while (baseProto && !_isObjectArrayOrFunctionPrototype(baseProto) && !_hasVisited(visited, baseProto)) {\r\n        // look for prototype functions\r\n        _forEachProp(baseProto, function (name) {\r\n            // Don't include any dynamic prototype instances - as we only want the real functions\r\n            // For IE 7/8 the prototype lookup doesn't provide the full chain so we need to bypass the \r\n            // hasOwnProperty check we get all of the methods, main difference is that IE7/8 doesn't return\r\n            // the Object prototype methods while bypassing the check\r\n            if (!baseFuncs[name] && _isDynamicCandidate(baseProto, name, !_objGetPrototypeOf)) {\r\n                // Create an instance callback for passing the base function to the caller\r\n                baseFuncs[name] = _instFuncProxy(thisTarget, baseProto, name);\r\n            }\r\n        });\r\n        // We need to find all possible functions that might be overloaded by walking the entire prototype chain\r\n        // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n        // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n        visited.push(baseProto);\r\n        baseProto = _getObjProto(baseProto);\r\n    }\r\n    return baseFuncs;\r\n}\r\nfunction _getInstFunc(target, funcName, proto, currentDynProtoProxy) {\r\n    var instFunc = null;\r\n    // We need to check whether the class name is defined directly on this prototype otherwise\r\n    // it will walk the proto chain and return any parent proto classname.\r\n    if (target && _hasOwnProperty(proto, DynClassName)) {\r\n        var instFuncTable = target[DynInstFuncTable] || {};\r\n        instFunc = (instFuncTable[proto[DynClassName]] || {})[funcName];\r\n        if (!instFunc) {\r\n            // Avoid stack overflow from recursive calling the same function\r\n            _throwTypeError(\"Missing [\" + funcName + \"] \" + strFunction);\r\n        }\r\n        // We have the instance function, lets check it we can speed up further calls\r\n        // by adding the instance function back directly on the instance (avoiding the dynamic func lookup)\r\n        if (!instFunc[DynInstChkTag] && instFuncTable[DynAllowInstChkTag] !== false) {\r\n            // If the instance already has an instance function we can't replace it\r\n            var canAddInst = !_hasOwnProperty(target, funcName);\r\n            // Get current prototype\r\n            var objProto = _getObjProto(target);\r\n            var visited = [];\r\n            // Lookup the function starting at the top (instance level prototype) and traverse down, if the first matching function\r\n            // if nothing is found or if the first hit is a dynamic proto instance then we can safely add an instance shortcut\r\n            while (canAddInst && objProto && !_isObjectArrayOrFunctionPrototype(objProto) && !_hasVisited(visited, objProto)) {\r\n                var protoFunc = objProto[funcName];\r\n                if (protoFunc) {\r\n                    canAddInst = (protoFunc === currentDynProtoProxy);\r\n                    break;\r\n                }\r\n                // We need to find all possible initial functions to ensure that we don't bypass a valid override function\r\n                visited.push(objProto);\r\n                objProto = _getObjProto(objProto);\r\n            }\r\n            try {\r\n                if (canAddInst) {\r\n                    // This instance doesn't have an instance func and the class hierarchy does have a higher level prototype version\r\n                    // so it's safe to directly assign for any subsequent calls (for better performance)\r\n                    target[funcName] = instFunc;\r\n                }\r\n                // Block further attempts to set the instance function for any\r\n                instFunc[DynInstChkTag] = 1;\r\n            }\r\n            catch (e) {\r\n                // Don't crash if the object is readonly or the runtime doesn't allow changing this\r\n                // And set a flag so we don't try again for any function\r\n                instFuncTable[DynAllowInstChkTag] = false;\r\n            }\r\n        }\r\n    }\r\n    return instFunc;\r\n}\r\nfunction _getProtoFunc(funcName, proto, currentDynProtoProxy) {\r\n    var protoFunc = proto[funcName];\r\n    // Check that the prototype function is not a self reference -- try to avoid stack overflow!\r\n    if (protoFunc === currentDynProtoProxy) {\r\n        // It is so lookup the base prototype\r\n        protoFunc = _getObjProto(proto)[funcName];\r\n    }\r\n    if (typeof protoFunc !== strFunction) {\r\n        _throwTypeError(\"[\" + funcName + \"] is not a \" + strFunction);\r\n    }\r\n    return protoFunc;\r\n}\r\n/**\r\n * Add the required dynamic prototype methods to the the class prototype\r\n * @param proto - The class prototype\r\n * @param className - The instance classname\r\n * @param target - The target instance\r\n * @param baseInstFuncs - The base instance functions\r\n * @param setInstanceFunc - Flag to allow prototype function to reset the instance function if one does not exist\r\n * @ignore\r\n */\r\nfunction _populatePrototype(proto, className, target, baseInstFuncs, setInstanceFunc) {\r\n    function _createDynamicPrototype(proto, funcName) {\r\n        var dynProtoProxy = function () {\r\n            // Use the instance or prototype function\r\n            var instFunc = _getInstFunc(this, funcName, proto, dynProtoProxy) || _getProtoFunc(funcName, proto, dynProtoProxy);\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return instFunc.apply(this, arguments);\r\n        };\r\n        // Tag this function as a proxy to support replacing dynamic proxy elements (primary use case is for unit testing\r\n        // via which can dynamically replace the prototype function reference)\r\n        dynProtoProxy[DynProxyTag] = 1;\r\n        return dynProtoProxy;\r\n    }\r\n    if (!_isObjectOrArrayPrototype(proto)) {\r\n        var instFuncTable = target[DynInstFuncTable] = target[DynInstFuncTable] || {};\r\n        var instFuncs_1 = instFuncTable[className] = (instFuncTable[className] || {}); // fetch and assign if as it may not exist yet\r\n        // Set whether we are allow to lookup instances, if someone has set to false then do not re-enable\r\n        if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n            instFuncTable[DynAllowInstChkTag] = !!setInstanceFunc;\r\n        }\r\n        _forEachProp(target, function (name) {\r\n            // Only add overridden functions\r\n            if (_isDynamicCandidate(target, name, false) && target[name] !== baseInstFuncs[name]) {\r\n                // Save the instance Function to the lookup table and remove it from the instance as it's not a dynamic proto function\r\n                instFuncs_1[name] = target[name];\r\n                delete target[name];\r\n                // Add a dynamic proto if one doesn't exist or if a prototype function exists and it's not a dynamic one\r\n                if (!_hasOwnProperty(proto, name) || (proto[name] && !proto[name][DynProxyTag])) {\r\n                    proto[name] = _createDynamicPrototype(proto, name);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Checks whether the passed prototype object appears to be correct by walking the prototype hierarchy of the instance\r\n * @param classProto The class prototype instance\r\n * @param thisTarget The current instance that will be checked whether the passed prototype instance is in the hierarchy\r\n * @ignore\r\n */\r\nfunction _checkPrototype(classProto, thisTarget) {\r\n    // This method doesn't existing in older browsers (e.g. IE8)\r\n    if (_objGetPrototypeOf) {\r\n        // As this is primarily a coding time check, don't bother checking if running in IE8 or lower\r\n        var visited = [];\r\n        var thisProto = _getObjProto(thisTarget);\r\n        while (thisProto && !_isObjectArrayOrFunctionPrototype(thisProto) && !_hasVisited(visited, thisProto)) {\r\n            if (thisProto === classProto) {\r\n                return true;\r\n            }\r\n            // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n            // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n            visited.push(thisProto);\r\n            thisProto = _getObjProto(thisProto);\r\n        }\r\n        return false;\r\n    }\r\n    // If objGetPrototypeOf doesn't exist then just assume everything is ok.\r\n    return true;\r\n}\r\n/**\r\n * Gets the current prototype name using the ES6 name if available otherwise falling back to a use unknown as the name.\r\n * It's not critical for this to return a name, it's used to decorate the generated unique name for easier debugging only.\r\n * @param target\r\n * @param unknownValue\r\n * @ignore\r\n */\r\nfunction _getObjName(target, unknownValue) {\r\n    if (_hasOwnProperty(target, Prototype)) {\r\n        // Look like a prototype\r\n        return target.name || unknownValue || UnknownValue;\r\n    }\r\n    return (((target || {})[Constructor]) || {}).name || unknownValue || UnknownValue;\r\n}\r\n/**\r\n * Helper function when creating dynamic (inline) functions for classes, this helper performs the following tasks :-\r\n * - Saves references to all defined base class functions\r\n * - Calls the delegateFunc with the current target (this) and a base object reference that can be used to call all \"super\" functions.\r\n * - Will populate the class prototype for all overridden functions to support class extension that call the prototype instance.\r\n * Callers should use this helper when declaring all function within the constructor of a class, as mentioned above the delegateFunc is\r\n * passed both the target \"this\" and an object that can be used to call any base (super) functions, using this based object in place of\r\n * super.XXX() (which gets expanded to _super.prototype.XXX()) provides a better minification outcome and also ensures the correct \"this\"\r\n * context is maintained as TypeScript creates incorrect references using super.XXXX() for dynamically defined functions i.e. Functions\r\n * defined in the constructor or some other function (rather than declared as complete typescript functions).\r\n * ### Usage\r\n * ```typescript\r\n * import dynamicProto from \"@microsoft/dynamicproto-js\";\r\n * class ExampleClass extends BaseClass {\r\n *     constructor() {\r\n *         dynamicProto(ExampleClass, this, (_self, base) => {\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.newFunc = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     ...\r\n *                 }\r\n *             }\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.myFunction = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     // Call the base version of the function that we are overriding\r\n *                     base.myFunction();\r\n *                 }\r\n *                 ...\r\n *             }\r\n *             _self.initialize = () => {\r\n *                 ...\r\n *             }\r\n *             // Warnings: While the following will work as _self is simply a reference to\r\n *             // this, if anyone overrides myFunction() the overridden will be called first\r\n *             // as the normal JavaScript method resolution will occur and the defined\r\n *             // _self.initialize() function is actually gets removed from the instance and\r\n *             // a proxy prototype version is created to reference the created method.\r\n *             _self.initialize();\r\n *         });\r\n *     }\r\n * }\r\n * ```\r\n * @typeparam DPType This is the generic type of the class, used to keep intellisense valid\r\n * @typeparam DPCls The type that contains the prototype of the current class\r\n * @param theClass - This is the current class instance which contains the prototype for the current class\r\n * @param target - The current \"this\" (target) reference, when the class has been extended this.prototype will not be the 'theClass' value.\r\n * @param delegateFunc - The callback function (closure) that will create the dynamic function\r\n * @param options - Additional options to configure how the dynamic prototype operates\r\n */\r\nfunction dynamicProto(theClass, target, delegateFunc, options) {\r\n    // Make sure that the passed theClass argument looks correct\r\n    if (!_hasOwnProperty(theClass, Prototype)) {\r\n        _throwTypeError(\"theClass is an invalid class definition.\");\r\n    }\r\n    // Quick check to make sure that the passed theClass argument looks correct (this is a common copy/paste error)\r\n    var classProto = theClass[Prototype];\r\n    if (!_checkPrototype(classProto, target)) {\r\n        _throwTypeError(\"[\" + _getObjName(theClass) + \"] not in hierarchy of [\" + _getObjName(target) + \"]\");\r\n    }\r\n    var className = null;\r\n    if (_hasOwnProperty(classProto, DynClassName)) {\r\n        // Only grab the class name if it's defined on this prototype (i.e. don't walk the prototype chain)\r\n        className = classProto[DynClassName];\r\n    }\r\n    else {\r\n        // As not all browser support name on the prototype creating a unique dynamic one if we have not already\r\n        // assigned one, so we can use a simple string as the lookup rather than an object for the dynamic instance\r\n        // function table lookup.\r\n        className = DynClassNamePrefix + _getObjName(theClass, \"_\") + \"$\" + _gblInst.n;\r\n        _gblInst.n++;\r\n        classProto[DynClassName] = className;\r\n    }\r\n    var perfOptions = dynamicProto[DynProtoDefaultOptions];\r\n    var useBaseInst = !!perfOptions[strUseBaseInst];\r\n    if (useBaseInst && options && options[strUseBaseInst] !== undefined) {\r\n        useBaseInst = !!options[strUseBaseInst];\r\n    }\r\n    // Get the current instance functions\r\n    var instFuncs = _getInstanceFuncs(target);\r\n    // Get all of the functions for any base instance (before they are potentially overridden)\r\n    var baseFuncs = _getBaseFuncs(classProto, target, instFuncs, useBaseInst);\r\n    // Execute the delegate passing in both the current target \"this\" and \"base\" function references\r\n    // Note casting the same type as we don't actually have the base class here and this will provide some intellisense support\r\n    delegateFunc(target, baseFuncs);\r\n    // Don't allow setting instance functions for older IE instances\r\n    var setInstanceFunc = !!_objGetPrototypeOf && !!perfOptions[strSetInstFuncs];\r\n    if (setInstanceFunc && options) {\r\n        setInstanceFunc = !!options[strSetInstFuncs];\r\n    }\r\n    // Populate the Prototype for any overridden instance functions\r\n    _populatePrototype(classProto, className, target, instFuncs, setInstanceFunc !== false);\r\n}\r\n/**\r\n * Exposes the default global options to allow global configuration, if the global values are disabled these will override\r\n * any passed values. This is primarily exposed to support unit-testing without the need for individual classes to expose\r\n * their internal usage of dynamic proto.\r\n */\r\ndynamicProto[DynProtoDefaultOptions] = _gblInst.o;\n\nexport { dynamicProto as default };\n//# sourceMappingURL=dynamicproto-js.js.map\n","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** only globals that common to node and browsers are allowed */\n// eslint-disable-next-line node/no-unsupported-features/es-builtins\nexport var _globalThis = typeof globalThis === 'object' ? globalThis : global;\n//# sourceMappingURL=globalThis.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// this is autogenerated file, see scripts/version-update.js\nexport var VERSION = '1.2.0';\n//# sourceMappingURL=version.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { VERSION } from '../version';\nvar re = /^(\\d+)\\.(\\d+)\\.(\\d+)(-(.+))?$/;\n/**\n * Create a function to test an API version to see if it is compatible with the provided ownVersion.\n *\n * The returned function has the following semantics:\n * - Exact match is always compatible\n * - Major versions must match exactly\n *    - 1.x package cannot use global 2.x package\n *    - 2.x package cannot use global 1.x package\n * - The minor version of the API module requesting access to the global API must be less than or equal to the minor version of this API\n *    - 1.3 package may use 1.4 global because the later global contains all functions 1.3 expects\n *    - 1.4 package may NOT use 1.3 global because it may try to call functions which don't exist on 1.3\n * - If the major version is 0, the minor version is treated as the major and the patch is treated as the minor\n * - Patch and build tag differences are not considered at this time\n *\n * @param ownVersion version which should be checked against\n */\nexport function _makeCompatibilityCheck(ownVersion) {\n    var acceptedVersions = new Set([ownVersion]);\n    var rejectedVersions = new Set();\n    var myVersionMatch = ownVersion.match(re);\n    if (!myVersionMatch) {\n        // we cannot guarantee compatibility so we always return noop\n        return function () { return false; };\n    }\n    var ownVersionParsed = {\n        major: +myVersionMatch[1],\n        minor: +myVersionMatch[2],\n        patch: +myVersionMatch[3],\n        prerelease: myVersionMatch[4],\n    };\n    // if ownVersion has a prerelease tag, versions must match exactly\n    if (ownVersionParsed.prerelease != null) {\n        return function isExactmatch(globalVersion) {\n            return globalVersion === ownVersion;\n        };\n    }\n    function _reject(v) {\n        rejectedVersions.add(v);\n        return false;\n    }\n    function _accept(v) {\n        acceptedVersions.add(v);\n        return true;\n    }\n    return function isCompatible(globalVersion) {\n        if (acceptedVersions.has(globalVersion)) {\n            return true;\n        }\n        if (rejectedVersions.has(globalVersion)) {\n            return false;\n        }\n        var globalVersionMatch = globalVersion.match(re);\n        if (!globalVersionMatch) {\n            // cannot parse other version\n            // we cannot guarantee compatibility so we always noop\n            return _reject(globalVersion);\n        }\n        var globalVersionParsed = {\n            major: +globalVersionMatch[1],\n            minor: +globalVersionMatch[2],\n            patch: +globalVersionMatch[3],\n            prerelease: globalVersionMatch[4],\n        };\n        // if globalVersion has a prerelease tag, versions must match exactly\n        if (globalVersionParsed.prerelease != null) {\n            return _reject(globalVersion);\n        }\n        // major versions must match\n        if (ownVersionParsed.major !== globalVersionParsed.major) {\n            return _reject(globalVersion);\n        }\n        if (ownVersionParsed.major === 0) {\n            if (ownVersionParsed.minor === globalVersionParsed.minor &&\n                ownVersionParsed.patch <= globalVersionParsed.patch) {\n                return _accept(globalVersion);\n            }\n            return _reject(globalVersion);\n        }\n        if (ownVersionParsed.minor <= globalVersionParsed.minor) {\n            return _accept(globalVersion);\n        }\n        return _reject(globalVersion);\n    };\n}\n/**\n * Test an API version to see if it is compatible with this API.\n *\n * - Exact match is always compatible\n * - Major versions must match exactly\n *    - 1.x package cannot use global 2.x package\n *    - 2.x package cannot use global 1.x package\n * - The minor version of the API module requesting access to the global API must be less than or equal to the minor version of this API\n *    - 1.3 package may use 1.4 global because the later global contains all functions 1.3 expects\n *    - 1.4 package may NOT use 1.3 global because it may try to call functions which don't exist on 1.3\n * - If the major version is 0, the minor version is treated as the major and the patch is treated as the minor\n * - Patch and build tag differences are not considered at this time\n *\n * @param version version of the API requesting an instance of the global API\n */\nexport var isCompatible = _makeCompatibilityCheck(VERSION);\n//# sourceMappingURL=semver.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { _globalThis } from '../platform';\nimport { VERSION } from '../version';\nimport { isCompatible } from './semver';\nvar major = VERSION.split('.')[0];\nvar GLOBAL_OPENTELEMETRY_API_KEY = Symbol.for(\"opentelemetry.js.api.\" + major);\nvar _global = _globalThis;\nexport function registerGlobal(type, instance, diag, allowOverride) {\n    var _a;\n    if (allowOverride === void 0) { allowOverride = false; }\n    var api = (_global[GLOBAL_OPENTELEMETRY_API_KEY] = (_a = _global[GLOBAL_OPENTELEMETRY_API_KEY]) !== null && _a !== void 0 ? _a : {\n        version: VERSION,\n    });\n    if (!allowOverride && api[type]) {\n        // already registered an API of this type\n        var err = new Error(\"@opentelemetry/api: Attempted duplicate registration of API: \" + type);\n        diag.error(err.stack || err.message);\n        return false;\n    }\n    if (api.version !== VERSION) {\n        // All registered APIs must be of the same version exactly\n        var err = new Error('@opentelemetry/api: All API registration versions must match');\n        diag.error(err.stack || err.message);\n        return false;\n    }\n    api[type] = instance;\n    diag.debug(\"@opentelemetry/api: Registered a global for \" + type + \" v\" + VERSION + \".\");\n    return true;\n}\nexport function getGlobal(type) {\n    var _a, _b;\n    var globalVersion = (_a = _global[GLOBAL_OPENTELEMETRY_API_KEY]) === null || _a === void 0 ? void 0 : _a.version;\n    if (!globalVersion || !isCompatible(globalVersion)) {\n        return;\n    }\n    return (_b = _global[GLOBAL_OPENTELEMETRY_API_KEY]) === null || _b === void 0 ? void 0 : _b[type];\n}\nexport function unregisterGlobal(type, diag) {\n    diag.debug(\"@opentelemetry/api: Unregistering a global for \" + type + \" v\" + VERSION + \".\");\n    var api = _global[GLOBAL_OPENTELEMETRY_API_KEY];\n    if (api) {\n        delete api[type];\n    }\n}\n//# sourceMappingURL=global-utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getGlobal } from '../internal/global-utils';\n/**\n * Component Logger which is meant to be used as part of any component which\n * will add automatically additional namespace in front of the log message.\n * It will then forward all message to global diag logger\n * @example\n * const cLogger = diag.createComponentLogger({ namespace: '@opentelemetry/instrumentation-http' });\n * cLogger.debug('test');\n * // @opentelemetry/instrumentation-http test\n */\nvar DiagComponentLogger = /** @class */ (function () {\n    function DiagComponentLogger(props) {\n        this._namespace = props.namespace || 'DiagComponentLogger';\n    }\n    DiagComponentLogger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return logProxy('debug', this._namespace, args);\n    };\n    DiagComponentLogger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return logProxy('error', this._namespace, args);\n    };\n    DiagComponentLogger.prototype.info = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return logProxy('info', this._namespace, args);\n    };\n    DiagComponentLogger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return logProxy('warn', this._namespace, args);\n    };\n    DiagComponentLogger.prototype.verbose = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return logProxy('verbose', this._namespace, args);\n    };\n    return DiagComponentLogger;\n}());\nexport { DiagComponentLogger };\nfunction logProxy(funcName, namespace, args) {\n    var logger = getGlobal('diag');\n    // shortcut if logger not set\n    if (!logger) {\n        return;\n    }\n    args.unshift(namespace);\n    return logger[funcName].apply(logger, args);\n}\n//# sourceMappingURL=ComponentLogger.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Defines the available internal logging levels for the diagnostic logger, the numeric values\n * of the levels are defined to match the original values from the initial LogLevel to avoid\n * compatibility/migration issues for any implementation that assume the numeric ordering.\n */\nexport var DiagLogLevel;\n(function (DiagLogLevel) {\n    /** Diagnostic Logging level setting to disable all logging (except and forced logs) */\n    DiagLogLevel[DiagLogLevel[\"NONE\"] = 0] = \"NONE\";\n    /** Identifies an error scenario */\n    DiagLogLevel[DiagLogLevel[\"ERROR\"] = 30] = \"ERROR\";\n    /** Identifies a warning scenario */\n    DiagLogLevel[DiagLogLevel[\"WARN\"] = 50] = \"WARN\";\n    /** General informational log message */\n    DiagLogLevel[DiagLogLevel[\"INFO\"] = 60] = \"INFO\";\n    /** General debug log message */\n    DiagLogLevel[DiagLogLevel[\"DEBUG\"] = 70] = \"DEBUG\";\n    /**\n     * Detailed trace level logging should only be used for development, should only be set\n     * in a development environment.\n     */\n    DiagLogLevel[DiagLogLevel[\"VERBOSE\"] = 80] = \"VERBOSE\";\n    /** Used to set the logging level to include all logging */\n    DiagLogLevel[DiagLogLevel[\"ALL\"] = 9999] = \"ALL\";\n})(DiagLogLevel || (DiagLogLevel = {}));\n//# sourceMappingURL=types.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DiagComponentLogger } from '../diag/ComponentLogger';\nimport { createLogLevelDiagLogger } from '../diag/internal/logLevelLogger';\nimport { DiagLogLevel, } from '../diag/types';\nimport { getGlobal, registerGlobal, unregisterGlobal, } from '../internal/global-utils';\nvar API_NAME = 'diag';\n/**\n * Singleton object which represents the entry point to the OpenTelemetry internal\n * diagnostic API\n */\nvar DiagAPI = /** @class */ (function () {\n    /**\n     * Private internal constructor\n     * @private\n     */\n    function DiagAPI() {\n        function _logProxy(funcName) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                var logger = getGlobal('diag');\n                // shortcut if logger not set\n                if (!logger)\n                    return;\n                return logger[funcName].apply(logger, args);\n            };\n        }\n        // Using self local variable for minification purposes as 'this' cannot be minified\n        var self = this;\n        // DiagAPI specific functions\n        self.setLogger = function (logger, logLevel) {\n            var _a, _b;\n            if (logLevel === void 0) { logLevel = DiagLogLevel.INFO; }\n            if (logger === self) {\n                // There isn't much we can do here.\n                // Logging to the console might break the user application.\n                // Try to log to self. If a logger was previously registered it will receive the log.\n                var err = new Error('Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation');\n                self.error((_a = err.stack) !== null && _a !== void 0 ? _a : err.message);\n                return false;\n            }\n            var oldLogger = getGlobal('diag');\n            var newLogger = createLogLevelDiagLogger(logLevel, logger);\n            // There already is an logger registered. We'll let it know before overwriting it.\n            if (oldLogger) {\n                var stack = (_b = new Error().stack) !== null && _b !== void 0 ? _b : '<failed to generate stacktrace>';\n                oldLogger.warn(\"Current logger will be overwritten from \" + stack);\n                newLogger.warn(\"Current logger will overwrite one already registered from \" + stack);\n            }\n            return registerGlobal('diag', newLogger, self, true);\n        };\n        self.disable = function () {\n            unregisterGlobal(API_NAME, self);\n        };\n        self.createComponentLogger = function (options) {\n            return new DiagComponentLogger(options);\n        };\n        self.verbose = _logProxy('verbose');\n        self.debug = _logProxy('debug');\n        self.info = _logProxy('info');\n        self.warn = _logProxy('warn');\n        self.error = _logProxy('error');\n    }\n    /** Get the singleton instance of the DiagAPI API */\n    DiagAPI.instance = function () {\n        if (!this._instance) {\n            this._instance = new DiagAPI();\n        }\n        return this._instance;\n    };\n    return DiagAPI;\n}());\nexport { DiagAPI };\n//# sourceMappingURL=diag.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DiagLogLevel } from '../types';\nexport function createLogLevelDiagLogger(maxLevel, logger) {\n    if (maxLevel < DiagLogLevel.NONE) {\n        maxLevel = DiagLogLevel.NONE;\n    }\n    else if (maxLevel > DiagLogLevel.ALL) {\n        maxLevel = DiagLogLevel.ALL;\n    }\n    // In case the logger is null or undefined\n    logger = logger || {};\n    function _filterFunc(funcName, theLevel) {\n        var theFunc = logger[funcName];\n        if (typeof theFunc === 'function' && maxLevel >= theLevel) {\n            return theFunc.bind(logger);\n        }\n        return function () { };\n    }\n    return {\n        error: _filterFunc('error', DiagLogLevel.ERROR),\n        warn: _filterFunc('warn', DiagLogLevel.WARN),\n        info: _filterFunc('info', DiagLogLevel.INFO),\n        debug: _filterFunc('debug', DiagLogLevel.DEBUG),\n        verbose: _filterFunc('verbose', DiagLogLevel.VERBOSE),\n    };\n}\n//# sourceMappingURL=logLevelLogger.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar BaggageImpl = /** @class */ (function () {\n    function BaggageImpl(entries) {\n        this._entries = entries ? new Map(entries) : new Map();\n    }\n    BaggageImpl.prototype.getEntry = function (key) {\n        var entry = this._entries.get(key);\n        if (!entry) {\n            return undefined;\n        }\n        return Object.assign({}, entry);\n    };\n    BaggageImpl.prototype.getAllEntries = function () {\n        return Array.from(this._entries.entries()).map(function (_a) {\n            var k = _a[0], v = _a[1];\n            return [k, v];\n        });\n    };\n    BaggageImpl.prototype.setEntry = function (key, entry) {\n        var newBaggage = new BaggageImpl(this._entries);\n        newBaggage._entries.set(key, entry);\n        return newBaggage;\n    };\n    BaggageImpl.prototype.removeEntry = function (key) {\n        var newBaggage = new BaggageImpl(this._entries);\n        newBaggage._entries.delete(key);\n        return newBaggage;\n    };\n    BaggageImpl.prototype.removeEntries = function () {\n        var keys = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            keys[_i] = arguments[_i];\n        }\n        var newBaggage = new BaggageImpl(this._entries);\n        for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n            var key = keys_1[_a];\n            newBaggage._entries.delete(key);\n        }\n        return newBaggage;\n    };\n    BaggageImpl.prototype.clear = function () {\n        return new BaggageImpl();\n    };\n    return BaggageImpl;\n}());\nexport { BaggageImpl };\n//# sourceMappingURL=baggage-impl.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Symbol used to make BaggageEntryMetadata an opaque type\n */\nexport var baggageEntryMetadataSymbol = Symbol('BaggageEntryMetadata');\n//# sourceMappingURL=symbol.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DiagAPI } from '../api/diag';\nimport { BaggageImpl } from './internal/baggage-impl';\nimport { baggageEntryMetadataSymbol } from './internal/symbol';\nvar diag = DiagAPI.instance();\n/**\n * Create a new Baggage with optional entries\n *\n * @param entries An array of baggage entries the new baggage should contain\n */\nexport function createBaggage(entries) {\n    if (entries === void 0) { entries = {}; }\n    return new BaggageImpl(new Map(Object.entries(entries)));\n}\n/**\n * Create a serializable BaggageEntryMetadata object from a string.\n *\n * @param str string metadata. Format is currently not defined by the spec and has no special meaning.\n *\n */\nexport function baggageEntryMetadataFromString(str) {\n    if (typeof str !== 'string') {\n        diag.error(\"Cannot create baggage metadata from unknown type: \" + typeof str);\n        str = '';\n    }\n    return {\n        __TYPE__: baggageEntryMetadataSymbol,\n        toString: function () {\n            return str;\n        },\n    };\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar consoleMap = [\n    { n: 'error', c: 'error' },\n    { n: 'warn', c: 'warn' },\n    { n: 'info', c: 'info' },\n    { n: 'debug', c: 'debug' },\n    { n: 'verbose', c: 'trace' },\n];\n/**\n * A simple Immutable Console based diagnostic logger which will output any messages to the Console.\n * If you want to limit the amount of logging to a specific level or lower use the\n * {@link createLogLevelDiagLogger}\n */\nvar DiagConsoleLogger = /** @class */ (function () {\n    function DiagConsoleLogger() {\n        function _consoleFunc(funcName) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                if (console) {\n                    // Some environments only expose the console when the F12 developer console is open\n                    // eslint-disable-next-line no-console\n                    var theFunc = console[funcName];\n                    if (typeof theFunc !== 'function') {\n                        // Not all environments support all functions\n                        // eslint-disable-next-line no-console\n                        theFunc = console.log;\n                    }\n                    // One last final check\n                    if (typeof theFunc === 'function') {\n                        return theFunc.apply(console, args);\n                    }\n                }\n            };\n        }\n        for (var i = 0; i < consoleMap.length; i++) {\n            this[consoleMap[i].n] = _consoleFunc(consoleMap[i].c);\n        }\n    }\n    return DiagConsoleLogger;\n}());\nexport { DiagConsoleLogger };\n//# sourceMappingURL=consoleLogger.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var defaultTextMapGetter = {\n    get: function (carrier, key) {\n        if (carrier == null) {\n            return undefined;\n        }\n        return carrier[key];\n    },\n    keys: function (carrier) {\n        if (carrier == null) {\n            return [];\n        }\n        return Object.keys(carrier);\n    },\n};\nexport var defaultTextMapSetter = {\n    set: function (carrier, key, value) {\n        if (carrier == null) {\n            return;\n        }\n        carrier[key] = value;\n    },\n};\n//# sourceMappingURL=TextMapPropagator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** Get a key to uniquely identify a context value */\nexport function createContextKey(description) {\n    // The specification states that for the same input, multiple calls should\n    // return different keys. Due to the nature of the JS dependency management\n    // system, this creates problems where multiple versions of some package\n    // could hold different keys for the same property.\n    //\n    // Therefore, we use Symbol.for which returns the same key for the same input.\n    return Symbol.for(description);\n}\nvar BaseContext = /** @class */ (function () {\n    /**\n     * Construct a new context which inherits values from an optional parent context.\n     *\n     * @param parentContext a context from which to inherit values\n     */\n    function BaseContext(parentContext) {\n        // for minification\n        var self = this;\n        self._currentContext = parentContext ? new Map(parentContext) : new Map();\n        self.getValue = function (key) { return self._currentContext.get(key); };\n        self.setValue = function (key, value) {\n            var context = new BaseContext(self._currentContext);\n            context._currentContext.set(key, value);\n            return context;\n        };\n        self.deleteValue = function (key) {\n            var context = new BaseContext(self._currentContext);\n            context._currentContext.delete(key);\n            return context;\n        };\n    }\n    return BaseContext;\n}());\n/** The root context is used as the default parent context when there is no active context */\nexport var ROOT_CONTEXT = new BaseContext();\n//# sourceMappingURL=context.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var TraceFlags;\n(function (TraceFlags) {\n    /** Represents no flag set. */\n    TraceFlags[TraceFlags[\"NONE\"] = 0] = \"NONE\";\n    /** Bit to represent whether trace is sampled in trace flags. */\n    TraceFlags[TraceFlags[\"SAMPLED\"] = 1] = \"SAMPLED\";\n})(TraceFlags || (TraceFlags = {}));\n//# sourceMappingURL=trace_flags.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport { ROOT_CONTEXT } from './context';\nvar NoopContextManager = /** @class */ (function () {\n    function NoopContextManager() {\n    }\n    NoopContextManager.prototype.active = function () {\n        return ROOT_CONTEXT;\n    };\n    NoopContextManager.prototype.with = function (_context, fn, thisArg) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        return fn.call.apply(fn, __spreadArray([thisArg], args));\n    };\n    NoopContextManager.prototype.bind = function (_context, target) {\n        return target;\n    };\n    NoopContextManager.prototype.enable = function () {\n        return this;\n    };\n    NoopContextManager.prototype.disable = function () {\n        return this;\n    };\n    return NoopContextManager;\n}());\nexport { NoopContextManager };\n//# sourceMappingURL=NoopContextManager.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport { NoopContextManager } from '../context/NoopContextManager';\nimport { getGlobal, registerGlobal, unregisterGlobal, } from '../internal/global-utils';\nimport { DiagAPI } from './diag';\nvar API_NAME = 'context';\nvar NOOP_CONTEXT_MANAGER = new NoopContextManager();\n/**\n * Singleton object which represents the entry point to the OpenTelemetry Context API\n */\nvar ContextAPI = /** @class */ (function () {\n    /** Empty private constructor prevents end users from constructing a new instance of the API */\n    function ContextAPI() {\n    }\n    /** Get the singleton instance of the Context API */\n    ContextAPI.getInstance = function () {\n        if (!this._instance) {\n            this._instance = new ContextAPI();\n        }\n        return this._instance;\n    };\n    /**\n     * Set the current context manager.\n     *\n     * @returns true if the context manager was successfully registered, else false\n     */\n    ContextAPI.prototype.setGlobalContextManager = function (contextManager) {\n        return registerGlobal(API_NAME, contextManager, DiagAPI.instance());\n    };\n    /**\n     * Get the currently active context\n     */\n    ContextAPI.prototype.active = function () {\n        return this._getContextManager().active();\n    };\n    /**\n     * Execute a function with an active context\n     *\n     * @param context context to be active during function execution\n     * @param fn function to execute in a context\n     * @param thisArg optional receiver to be used for calling fn\n     * @param args optional arguments forwarded to fn\n     */\n    ContextAPI.prototype.with = function (context, fn, thisArg) {\n        var _a;\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        return (_a = this._getContextManager()).with.apply(_a, __spreadArray([context, fn, thisArg], args));\n    };\n    /**\n     * Bind a context to a target function or event emitter\n     *\n     * @param context context to bind to the event emitter or function. Defaults to the currently active context\n     * @param target function or event emitter to bind\n     */\n    ContextAPI.prototype.bind = function (context, target) {\n        return this._getContextManager().bind(context, target);\n    };\n    ContextAPI.prototype._getContextManager = function () {\n        return getGlobal(API_NAME) || NOOP_CONTEXT_MANAGER;\n    };\n    /** Disable and remove the global context manager */\n    ContextAPI.prototype.disable = function () {\n        this._getContextManager().disable();\n        unregisterGlobal(API_NAME, DiagAPI.instance());\n    };\n    return ContextAPI;\n}());\nexport { ContextAPI };\n//# sourceMappingURL=context.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { TraceFlags } from './trace_flags';\nexport var INVALID_SPANID = '0000000000000000';\nexport var INVALID_TRACEID = '00000000000000000000000000000000';\nexport var INVALID_SPAN_CONTEXT = {\n    traceId: INVALID_TRACEID,\n    spanId: INVALID_SPANID,\n    traceFlags: TraceFlags.NONE,\n};\n//# sourceMappingURL=invalid-span-constants.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { INVALID_SPAN_CONTEXT } from './invalid-span-constants';\n/**\n * The NonRecordingSpan is the default {@link Span} that is used when no Span\n * implementation is available. All operations are no-op including context\n * propagation.\n */\nvar NonRecordingSpan = /** @class */ (function () {\n    function NonRecordingSpan(_spanContext) {\n        if (_spanContext === void 0) { _spanContext = INVALID_SPAN_CONTEXT; }\n        this._spanContext = _spanContext;\n    }\n    // Returns a SpanContext.\n    NonRecordingSpan.prototype.spanContext = function () {\n        return this._spanContext;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.setAttribute = function (_key, _value) {\n        return this;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.setAttributes = function (_attributes) {\n        return this;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.addEvent = function (_name, _attributes) {\n        return this;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.setStatus = function (_status) {\n        return this;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.updateName = function (_name) {\n        return this;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.end = function (_endTime) { };\n    // isRecording always returns false for NonRecordingSpan.\n    NonRecordingSpan.prototype.isRecording = function () {\n        return false;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.recordException = function (_exception, _time) { };\n    return NonRecordingSpan;\n}());\nexport { NonRecordingSpan };\n//# sourceMappingURL=NonRecordingSpan.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createContextKey } from '../context/context';\nimport { NonRecordingSpan } from './NonRecordingSpan';\nimport { ContextAPI } from '../api/context';\n/**\n * span key\n */\nvar SPAN_KEY = createContextKey('OpenTelemetry Context Key SPAN');\n/**\n * Return the span if one exists\n *\n * @param context context to get span from\n */\nexport function getSpan(context) {\n    return context.getValue(SPAN_KEY) || undefined;\n}\n/**\n * Gets the span from the current context, if one exists.\n */\nexport function getActiveSpan() {\n    return getSpan(ContextAPI.getInstance().active());\n}\n/**\n * Set the span on a context\n *\n * @param context context to use as parent\n * @param span span to set active\n */\nexport function setSpan(context, span) {\n    return context.setValue(SPAN_KEY, span);\n}\n/**\n * Remove current span stored in the context\n *\n * @param context context to delete span from\n */\nexport function deleteSpan(context) {\n    return context.deleteValue(SPAN_KEY);\n}\n/**\n * Wrap span context in a NoopSpan and set as span in a new\n * context\n *\n * @param context context to set active span on\n * @param spanContext span context to be wrapped\n */\nexport function setSpanContext(context, spanContext) {\n    return setSpan(context, new NonRecordingSpan(spanContext));\n}\n/**\n * Get the span context of the span if it exists.\n *\n * @param context context to get values from\n */\nexport function getSpanContext(context) {\n    var _a;\n    return (_a = getSpan(context)) === null || _a === void 0 ? void 0 : _a.spanContext();\n}\n//# sourceMappingURL=context-utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { INVALID_SPANID, INVALID_TRACEID } from './invalid-span-constants';\nimport { NonRecordingSpan } from './NonRecordingSpan';\nvar VALID_TRACEID_REGEX = /^([0-9a-f]{32})$/i;\nvar VALID_SPANID_REGEX = /^[0-9a-f]{16}$/i;\nexport function isValidTraceId(traceId) {\n    return VALID_TRACEID_REGEX.test(traceId) && traceId !== INVALID_TRACEID;\n}\nexport function isValidSpanId(spanId) {\n    return VALID_SPANID_REGEX.test(spanId) && spanId !== INVALID_SPANID;\n}\n/**\n * Returns true if this {@link SpanContext} is valid.\n * @return true if this {@link SpanContext} is valid.\n */\nexport function isSpanContextValid(spanContext) {\n    return (isValidTraceId(spanContext.traceId) && isValidSpanId(spanContext.spanId));\n}\n/**\n * Wrap the given {@link SpanContext} in a new non-recording {@link Span}\n *\n * @param spanContext span context to be wrapped\n * @returns a new non-recording {@link Span} with the provided context\n */\nexport function wrapSpanContext(spanContext) {\n    return new NonRecordingSpan(spanContext);\n}\n//# sourceMappingURL=spancontext-utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ContextAPI } from '../api/context';\nimport { getSpanContext, setSpan } from '../trace/context-utils';\nimport { NonRecordingSpan } from './NonRecordingSpan';\nimport { isSpanContextValid } from './spancontext-utils';\nvar context = ContextAPI.getInstance();\n/**\n * No-op implementations of {@link Tracer}.\n */\nvar NoopTracer = /** @class */ (function () {\n    function NoopTracer() {\n    }\n    // startSpan starts a noop span.\n    NoopTracer.prototype.startSpan = function (name, options, context) {\n        var root = Boolean(options === null || options === void 0 ? void 0 : options.root);\n        if (root) {\n            return new NonRecordingSpan();\n        }\n        var parentFromContext = context && getSpanContext(context);\n        if (isSpanContext(parentFromContext) &&\n            isSpanContextValid(parentFromContext)) {\n            return new NonRecordingSpan(parentFromContext);\n        }\n        else {\n            return new NonRecordingSpan();\n        }\n    };\n    NoopTracer.prototype.startActiveSpan = function (name, arg2, arg3, arg4) {\n        var opts;\n        var ctx;\n        var fn;\n        if (arguments.length < 2) {\n            return;\n        }\n        else if (arguments.length === 2) {\n            fn = arg2;\n        }\n        else if (arguments.length === 3) {\n            opts = arg2;\n            fn = arg3;\n        }\n        else {\n            opts = arg2;\n            ctx = arg3;\n            fn = arg4;\n        }\n        var parentContext = ctx !== null && ctx !== void 0 ? ctx : context.active();\n        var span = this.startSpan(name, opts, parentContext);\n        var contextWithSpanSet = setSpan(parentContext, span);\n        return context.with(contextWithSpanSet, fn, undefined, span);\n    };\n    return NoopTracer;\n}());\nexport { NoopTracer };\nfunction isSpanContext(spanContext) {\n    return (typeof spanContext === 'object' &&\n        typeof spanContext['spanId'] === 'string' &&\n        typeof spanContext['traceId'] === 'string' &&\n        typeof spanContext['traceFlags'] === 'number');\n}\n//# sourceMappingURL=NoopTracer.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @deprecated use the one declared in @opentelemetry/sdk-trace-base instead.\n * A sampling decision that determines how a {@link Span} will be recorded\n * and collected.\n */\nexport var SamplingDecision;\n(function (SamplingDecision) {\n    /**\n     * `Span.isRecording() === false`, span will not be recorded and all events\n     * and attributes will be dropped.\n     */\n    SamplingDecision[SamplingDecision[\"NOT_RECORD\"] = 0] = \"NOT_RECORD\";\n    /**\n     * `Span.isRecording() === true`, but `Sampled` flag in {@link TraceFlags}\n     * MUST NOT be set.\n     */\n    SamplingDecision[SamplingDecision[\"RECORD\"] = 1] = \"RECORD\";\n    /**\n     * `Span.isRecording() === true` AND `Sampled` flag in {@link TraceFlags}\n     * MUST be set.\n     */\n    SamplingDecision[SamplingDecision[\"RECORD_AND_SAMPLED\"] = 2] = \"RECORD_AND_SAMPLED\";\n})(SamplingDecision || (SamplingDecision = {}));\n//# sourceMappingURL=SamplingResult.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var SpanKind;\n(function (SpanKind) {\n    /** Default value. Indicates that the span is used internally. */\n    SpanKind[SpanKind[\"INTERNAL\"] = 0] = \"INTERNAL\";\n    /**\n     * Indicates that the span covers server-side handling of an RPC or other\n     * remote request.\n     */\n    SpanKind[SpanKind[\"SERVER\"] = 1] = \"SERVER\";\n    /**\n     * Indicates that the span covers the client-side wrapper around an RPC or\n     * other remote request.\n     */\n    SpanKind[SpanKind[\"CLIENT\"] = 2] = \"CLIENT\";\n    /**\n     * Indicates that the span describes producer sending a message to a\n     * broker. Unlike client and server, there is no direct critical path latency\n     * relationship between producer and consumer spans.\n     */\n    SpanKind[SpanKind[\"PRODUCER\"] = 3] = \"PRODUCER\";\n    /**\n     * Indicates that the span describes consumer receiving a message from a\n     * broker. Unlike client and server, there is no direct critical path latency\n     * relationship between producer and consumer spans.\n     */\n    SpanKind[SpanKind[\"CONSUMER\"] = 4] = \"CONSUMER\";\n})(SpanKind || (SpanKind = {}));\n//# sourceMappingURL=span_kind.js.map","/**\n * An enumeration of status codes.\n */\nexport var SpanStatusCode;\n(function (SpanStatusCode) {\n    /**\n     * The default status.\n     */\n    SpanStatusCode[SpanStatusCode[\"UNSET\"] = 0] = \"UNSET\";\n    /**\n     * The operation has been validated by an Application developer or\n     * Operator to have completed successfully.\n     */\n    SpanStatusCode[SpanStatusCode[\"OK\"] = 1] = \"OK\";\n    /**\n     * The operation contains an error.\n     */\n    SpanStatusCode[SpanStatusCode[\"ERROR\"] = 2] = \"ERROR\";\n})(SpanStatusCode || (SpanStatusCode = {}));\n//# sourceMappingURL=status.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { NoopTracer } from './NoopTracer';\nvar NOOP_TRACER = new NoopTracer();\n/**\n * Proxy tracer provided by the proxy tracer provider\n */\nvar ProxyTracer = /** @class */ (function () {\n    function ProxyTracer(_provider, name, version, options) {\n        this._provider = _provider;\n        this.name = name;\n        this.version = version;\n        this.options = options;\n    }\n    ProxyTracer.prototype.startSpan = function (name, options, context) {\n        return this._getTracer().startSpan(name, options, context);\n    };\n    ProxyTracer.prototype.startActiveSpan = function (_name, _options, _context, _fn) {\n        var tracer = this._getTracer();\n        return Reflect.apply(tracer.startActiveSpan, tracer, arguments);\n    };\n    /**\n     * Try to get a tracer from the proxy tracer provider.\n     * If the proxy tracer provider has no delegate, return a noop tracer.\n     */\n    ProxyTracer.prototype._getTracer = function () {\n        if (this._delegate) {\n            return this._delegate;\n        }\n        var tracer = this._provider.getDelegateTracer(this.name, this.version, this.options);\n        if (!tracer) {\n            return NOOP_TRACER;\n        }\n        this._delegate = tracer;\n        return this._delegate;\n    };\n    return ProxyTracer;\n}());\nexport { ProxyTracer };\n//# sourceMappingURL=ProxyTracer.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ProxyTracer } from './ProxyTracer';\nimport { NoopTracerProvider } from './NoopTracerProvider';\nvar NOOP_TRACER_PROVIDER = new NoopTracerProvider();\n/**\n * Tracer provider which provides {@link ProxyTracer}s.\n *\n * Before a delegate is set, tracers provided are NoOp.\n *   When a delegate is set, traces are provided from the delegate.\n *   When a delegate is set after tracers have already been provided,\n *   all tracers already provided will use the provided delegate implementation.\n */\nvar ProxyTracerProvider = /** @class */ (function () {\n    function ProxyTracerProvider() {\n    }\n    /**\n     * Get a {@link ProxyTracer}\n     */\n    ProxyTracerProvider.prototype.getTracer = function (name, version, options) {\n        var _a;\n        return ((_a = this.getDelegateTracer(name, version, options)) !== null && _a !== void 0 ? _a : new ProxyTracer(this, name, version, options));\n    };\n    ProxyTracerProvider.prototype.getDelegate = function () {\n        var _a;\n        return (_a = this._delegate) !== null && _a !== void 0 ? _a : NOOP_TRACER_PROVIDER;\n    };\n    /**\n     * Set the delegate tracer provider\n     */\n    ProxyTracerProvider.prototype.setDelegate = function (delegate) {\n        this._delegate = delegate;\n    };\n    ProxyTracerProvider.prototype.getDelegateTracer = function (name, version, options) {\n        var _a;\n        return (_a = this._delegate) === null || _a === void 0 ? void 0 : _a.getTracer(name, version, options);\n    };\n    return ProxyTracerProvider;\n}());\nexport { ProxyTracerProvider };\n//# sourceMappingURL=ProxyTracerProvider.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { NoopTracer } from './NoopTracer';\n/**\n * An implementation of the {@link TracerProvider} which returns an impotent\n * Tracer for all calls to `getTracer`.\n *\n * All operations are no-op.\n */\nvar NoopTracerProvider = /** @class */ (function () {\n    function NoopTracerProvider() {\n    }\n    NoopTracerProvider.prototype.getTracer = function (_name, _version, _options) {\n        return new NoopTracer();\n    };\n    return NoopTracerProvider;\n}());\nexport { NoopTracerProvider };\n//# sourceMappingURL=NoopTracerProvider.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar VALID_KEY_CHAR_RANGE = '[_0-9a-z-*/]';\nvar VALID_KEY = \"[a-z]\" + VALID_KEY_CHAR_RANGE + \"{0,255}\";\nvar VALID_VENDOR_KEY = \"[a-z0-9]\" + VALID_KEY_CHAR_RANGE + \"{0,240}@[a-z]\" + VALID_KEY_CHAR_RANGE + \"{0,13}\";\nvar VALID_KEY_REGEX = new RegExp(\"^(?:\" + VALID_KEY + \"|\" + VALID_VENDOR_KEY + \")$\");\nvar VALID_VALUE_BASE_REGEX = /^[ -~]{0,255}[!-~]$/;\nvar INVALID_VALUE_COMMA_EQUAL_REGEX = /,|=/;\n/**\n * Key is opaque string up to 256 characters printable. It MUST begin with a\n * lowercase letter, and can only contain lowercase letters a-z, digits 0-9,\n * underscores _, dashes -, asterisks *, and forward slashes /.\n * For multi-tenant vendor scenarios, an at sign (@) can be used to prefix the\n * vendor name. Vendors SHOULD set the tenant ID at the beginning of the key.\n * see https://www.w3.org/TR/trace-context/#key\n */\nexport function validateKey(key) {\n    return VALID_KEY_REGEX.test(key);\n}\n/**\n * Value is opaque string up to 256 characters printable ASCII RFC0020\n * characters (i.e., the range 0x20 to 0x7E) except comma , and =.\n */\nexport function validateValue(value) {\n    return (VALID_VALUE_BASE_REGEX.test(value) &&\n        !INVALID_VALUE_COMMA_EQUAL_REGEX.test(value));\n}\n//# sourceMappingURL=tracestate-validators.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { validateKey, validateValue } from './tracestate-validators';\nvar MAX_TRACE_STATE_ITEMS = 32;\nvar MAX_TRACE_STATE_LEN = 512;\nvar LIST_MEMBERS_SEPARATOR = ',';\nvar LIST_MEMBER_KEY_VALUE_SPLITTER = '=';\n/**\n * TraceState must be a class and not a simple object type because of the spec\n * requirement (https://www.w3.org/TR/trace-context/#tracestate-field).\n *\n * Here is the list of allowed mutations:\n * - New key-value pair should be added into the beginning of the list\n * - The value of any key can be updated. Modified keys MUST be moved to the\n * beginning of the list.\n */\nvar TraceStateImpl = /** @class */ (function () {\n    function TraceStateImpl(rawTraceState) {\n        this._internalState = new Map();\n        if (rawTraceState)\n            this._parse(rawTraceState);\n    }\n    TraceStateImpl.prototype.set = function (key, value) {\n        // TODO: Benchmark the different approaches(map vs list) and\n        // use the faster one.\n        var traceState = this._clone();\n        if (traceState._internalState.has(key)) {\n            traceState._internalState.delete(key);\n        }\n        traceState._internalState.set(key, value);\n        return traceState;\n    };\n    TraceStateImpl.prototype.unset = function (key) {\n        var traceState = this._clone();\n        traceState._internalState.delete(key);\n        return traceState;\n    };\n    TraceStateImpl.prototype.get = function (key) {\n        return this._internalState.get(key);\n    };\n    TraceStateImpl.prototype.serialize = function () {\n        var _this = this;\n        return this._keys()\n            .reduce(function (agg, key) {\n            agg.push(key + LIST_MEMBER_KEY_VALUE_SPLITTER + _this.get(key));\n            return agg;\n        }, [])\n            .join(LIST_MEMBERS_SEPARATOR);\n    };\n    TraceStateImpl.prototype._parse = function (rawTraceState) {\n        if (rawTraceState.length > MAX_TRACE_STATE_LEN)\n            return;\n        this._internalState = rawTraceState\n            .split(LIST_MEMBERS_SEPARATOR)\n            .reverse() // Store in reverse so new keys (.set(...)) will be placed at the beginning\n            .reduce(function (agg, part) {\n            var listMember = part.trim(); // Optional Whitespace (OWS) handling\n            var i = listMember.indexOf(LIST_MEMBER_KEY_VALUE_SPLITTER);\n            if (i !== -1) {\n                var key = listMember.slice(0, i);\n                var value = listMember.slice(i + 1, part.length);\n                if (validateKey(key) && validateValue(value)) {\n                    agg.set(key, value);\n                }\n                else {\n                    // TODO: Consider to add warning log\n                }\n            }\n            return agg;\n        }, new Map());\n        // Because of the reverse() requirement, trunc must be done after map is created\n        if (this._internalState.size > MAX_TRACE_STATE_ITEMS) {\n            this._internalState = new Map(Array.from(this._internalState.entries())\n                .reverse() // Use reverse same as original tracestate parse chain\n                .slice(0, MAX_TRACE_STATE_ITEMS));\n        }\n    };\n    TraceStateImpl.prototype._keys = function () {\n        return Array.from(this._internalState.keys()).reverse();\n    };\n    TraceStateImpl.prototype._clone = function () {\n        var traceState = new TraceStateImpl();\n        traceState._internalState = new Map(this._internalState);\n        return traceState;\n    };\n    return TraceStateImpl;\n}());\nexport { TraceStateImpl };\n//# sourceMappingURL=tracestate-impl.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { TraceStateImpl } from './tracestate-impl';\nexport function createTraceState(rawTraceState) {\n    return new TraceStateImpl(rawTraceState);\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getGlobal, registerGlobal, unregisterGlobal, } from '../internal/global-utils';\nimport { ProxyTracerProvider } from '../trace/ProxyTracerProvider';\nimport { isSpanContextValid, wrapSpanContext, } from '../trace/spancontext-utils';\nimport { deleteSpan, getActiveSpan, getSpan, getSpanContext, setSpan, setSpanContext, } from '../trace/context-utils';\nimport { DiagAPI } from './diag';\nvar API_NAME = 'trace';\n/**\n * Singleton object which represents the entry point to the OpenTelemetry Tracing API\n */\nvar TraceAPI = /** @class */ (function () {\n    /** Empty private constructor prevents end users from constructing a new instance of the API */\n    function TraceAPI() {\n        this._proxyTracerProvider = new ProxyTracerProvider();\n        this.wrapSpanContext = wrapSpanContext;\n        this.isSpanContextValid = isSpanContextValid;\n        this.deleteSpan = deleteSpan;\n        this.getSpan = getSpan;\n        this.getActiveSpan = getActiveSpan;\n        this.getSpanContext = getSpanContext;\n        this.setSpan = setSpan;\n        this.setSpanContext = setSpanContext;\n    }\n    /** Get the singleton instance of the Trace API */\n    TraceAPI.getInstance = function () {\n        if (!this._instance) {\n            this._instance = new TraceAPI();\n        }\n        return this._instance;\n    };\n    /**\n     * Set the current global tracer.\n     *\n     * @returns true if the tracer provider was successfully registered, else false\n     */\n    TraceAPI.prototype.setGlobalTracerProvider = function (provider) {\n        var success = registerGlobal(API_NAME, this._proxyTracerProvider, DiagAPI.instance());\n        if (success) {\n            this._proxyTracerProvider.setDelegate(provider);\n        }\n        return success;\n    };\n    /**\n     * Returns the global tracer provider.\n     */\n    TraceAPI.prototype.getTracerProvider = function () {\n        return getGlobal(API_NAME) || this._proxyTracerProvider;\n    };\n    /**\n     * Returns a tracer from the global tracer provider.\n     */\n    TraceAPI.prototype.getTracer = function (name, version) {\n        return this.getTracerProvider().getTracer(name, version);\n    };\n    /** Remove the global tracer provider */\n    TraceAPI.prototype.disable = function () {\n        unregisterGlobal(API_NAME, DiagAPI.instance());\n        this._proxyTracerProvider = new ProxyTracerProvider();\n    };\n    return TraceAPI;\n}());\nexport { TraceAPI };\n//# sourceMappingURL=trace.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * No-op implementations of {@link TextMapPropagator}.\n */\nvar NoopTextMapPropagator = /** @class */ (function () {\n    function NoopTextMapPropagator() {\n    }\n    /** Noop inject function does nothing */\n    NoopTextMapPropagator.prototype.inject = function (_context, _carrier) { };\n    /** Noop extract function does nothing and returns the input context */\n    NoopTextMapPropagator.prototype.extract = function (context, _carrier) {\n        return context;\n    };\n    NoopTextMapPropagator.prototype.fields = function () {\n        return [];\n    };\n    return NoopTextMapPropagator;\n}());\nexport { NoopTextMapPropagator };\n//# sourceMappingURL=NoopTextMapPropagator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createContextKey } from '../context/context';\n/**\n * Baggage key\n */\nvar BAGGAGE_KEY = createContextKey('OpenTelemetry Baggage Key');\n/**\n * Retrieve the current baggage from the given context\n *\n * @param {Context} Context that manage all context values\n * @returns {Baggage} Extracted baggage from the context\n */\nexport function getBaggage(context) {\n    return context.getValue(BAGGAGE_KEY) || undefined;\n}\n/**\n * Store a baggage in the given context\n *\n * @param {Context} Context that manage all context values\n * @param {Baggage} baggage that will be set in the actual context\n */\nexport function setBaggage(context, baggage) {\n    return context.setValue(BAGGAGE_KEY, baggage);\n}\n/**\n * Delete the baggage stored in the given context\n *\n * @param {Context} Context that manage all context values\n */\nexport function deleteBaggage(context) {\n    return context.deleteValue(BAGGAGE_KEY);\n}\n//# sourceMappingURL=context-helpers.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getGlobal, registerGlobal, unregisterGlobal, } from '../internal/global-utils';\nimport { NoopTextMapPropagator } from '../propagation/NoopTextMapPropagator';\nimport { defaultTextMapGetter, defaultTextMapSetter, } from '../propagation/TextMapPropagator';\nimport { getBaggage, setBaggage, deleteBaggage, } from '../baggage/context-helpers';\nimport { createBaggage } from '../baggage/utils';\nimport { DiagAPI } from './diag';\nvar API_NAME = 'propagation';\nvar NOOP_TEXT_MAP_PROPAGATOR = new NoopTextMapPropagator();\n/**\n * Singleton object which represents the entry point to the OpenTelemetry Propagation API\n */\nvar PropagationAPI = /** @class */ (function () {\n    /** Empty private constructor prevents end users from constructing a new instance of the API */\n    function PropagationAPI() {\n        this.createBaggage = createBaggage;\n        this.getBaggage = getBaggage;\n        this.setBaggage = setBaggage;\n        this.deleteBaggage = deleteBaggage;\n    }\n    /** Get the singleton instance of the Propagator API */\n    PropagationAPI.getInstance = function () {\n        if (!this._instance) {\n            this._instance = new PropagationAPI();\n        }\n        return this._instance;\n    };\n    /**\n     * Set the current propagator.\n     *\n     * @returns true if the propagator was successfully registered, else false\n     */\n    PropagationAPI.prototype.setGlobalPropagator = function (propagator) {\n        return registerGlobal(API_NAME, propagator, DiagAPI.instance());\n    };\n    /**\n     * Inject context into a carrier to be propagated inter-process\n     *\n     * @param context Context carrying tracing data to inject\n     * @param carrier carrier to inject context into\n     * @param setter Function used to set values on the carrier\n     */\n    PropagationAPI.prototype.inject = function (context, carrier, setter) {\n        if (setter === void 0) { setter = defaultTextMapSetter; }\n        return this._getGlobalPropagator().inject(context, carrier, setter);\n    };\n    /**\n     * Extract context from a carrier\n     *\n     * @param context Context which the newly created context will inherit from\n     * @param carrier Carrier to extract context from\n     * @param getter Function used to extract keys from a carrier\n     */\n    PropagationAPI.prototype.extract = function (context, carrier, getter) {\n        if (getter === void 0) { getter = defaultTextMapGetter; }\n        return this._getGlobalPropagator().extract(context, carrier, getter);\n    };\n    /**\n     * Return a list of all fields which may be used by the propagator.\n     */\n    PropagationAPI.prototype.fields = function () {\n        return this._getGlobalPropagator().fields();\n    };\n    /** Remove the global propagator */\n    PropagationAPI.prototype.disable = function () {\n        unregisterGlobal(API_NAME, DiagAPI.instance());\n    };\n    PropagationAPI.prototype._getGlobalPropagator = function () {\n        return getGlobal(API_NAME) || NOOP_TEXT_MAP_PROPAGATOR;\n    };\n    return PropagationAPI;\n}());\nexport { PropagationAPI };\n//# sourceMappingURL=propagation.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport * from './baggage/types';\nexport { baggageEntryMetadataFromString } from './baggage/utils';\nexport * from './common/Exception';\nexport * from './common/Time';\nexport * from './common/Attributes';\nexport * from './diag';\nexport * from './propagation/TextMapPropagator';\nexport * from './trace/attributes';\nexport * from './trace/link';\nexport * from './trace/ProxyTracer';\nexport * from './trace/ProxyTracerProvider';\nexport * from './trace/Sampler';\nexport * from './trace/SamplingResult';\nexport * from './trace/span_context';\nexport * from './trace/span_kind';\nexport * from './trace/span';\nexport * from './trace/SpanOptions';\nexport * from './trace/status';\nexport * from './trace/trace_flags';\nexport * from './trace/trace_state';\nexport { createTraceState } from './trace/internal/utils';\nexport * from './trace/tracer_provider';\nexport * from './trace/tracer';\nexport * from './trace/tracer_options';\nexport { isSpanContextValid, isValidTraceId, isValidSpanId, } from './trace/spancontext-utils';\nexport { INVALID_SPANID, INVALID_TRACEID, INVALID_SPAN_CONTEXT, } from './trace/invalid-span-constants';\nexport * from './context/context';\nexport * from './context/types';\nimport { ContextAPI } from './api/context';\n/** Entrypoint for context API */\nexport var context = ContextAPI.getInstance();\nimport { TraceAPI } from './api/trace';\n/** Entrypoint for trace API */\nexport var trace = TraceAPI.getInstance();\nimport { PropagationAPI } from './api/propagation';\n/** Entrypoint for propagation API */\nexport var propagation = PropagationAPI.getInstance();\nimport { DiagAPI } from './api/diag';\n/**\n * Entrypoint for Diag API.\n * Defines Diagnostic handler used for internal diagnostic logging operations.\n * The default provides a Noop DiagLogger implementation which may be changed via the\n * diag.setLogger(logger: DiagLogger) function.\n */\nexport var diag = DiagAPI.instance();\nexport default {\n    trace: trace,\n    context: context,\n    propagation: propagation,\n    diag: diag,\n};\n//# sourceMappingURL=index.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createContextKey } from '@opentelemetry/api';\nvar SUPPRESS_TRACING_KEY = createContextKey('OpenTelemetry SDK Context Key SUPPRESS_TRACING');\nexport function suppressTracing(context) {\n    return context.setValue(SUPPRESS_TRACING_KEY, true);\n}\nexport function unsuppressTracing(context) {\n    return context.deleteValue(SUPPRESS_TRACING_KEY);\n}\nexport function isTracingSuppressed(context) {\n    return context.getValue(SUPPRESS_TRACING_KEY) === true;\n}\n//# sourceMappingURL=suppress-tracing.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var BAGGAGE_KEY_PAIR_SEPARATOR = '=';\nexport var BAGGAGE_PROPERTIES_SEPARATOR = ';';\nexport var BAGGAGE_ITEMS_SEPARATOR = ',';\n// Name of the http header used to propagate the baggage\nexport var BAGGAGE_HEADER = 'baggage';\n// Maximum number of name-value pairs allowed by w3c spec\nexport var BAGGAGE_MAX_NAME_VALUE_PAIRS = 180;\n// Maximum number of bytes per a single name-value pair allowed by w3c spec\nexport var BAGGAGE_MAX_PER_NAME_VALUE_PAIRS = 4096;\n// Maximum total length of all name-value pairs allowed by w3c spec\nexport var BAGGAGE_MAX_TOTAL_LENGTH = 8192;\n//# sourceMappingURL=constants.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { baggageEntryMetadataFromString } from '@opentelemetry/api';\nimport { BAGGAGE_ITEMS_SEPARATOR, BAGGAGE_PROPERTIES_SEPARATOR, BAGGAGE_KEY_PAIR_SEPARATOR, BAGGAGE_MAX_TOTAL_LENGTH, } from './constants';\nexport function serializeKeyPairs(keyPairs) {\n    return keyPairs.reduce(function (hValue, current) {\n        var value = \"\" + hValue + (hValue !== '' ? BAGGAGE_ITEMS_SEPARATOR : '') + current;\n        return value.length > BAGGAGE_MAX_TOTAL_LENGTH ? hValue : value;\n    }, '');\n}\nexport function getKeyPairs(baggage) {\n    return baggage.getAllEntries().map(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        var entry = encodeURIComponent(key) + \"=\" + encodeURIComponent(value.value);\n        // include opaque metadata if provided\n        // NOTE: we intentionally don't URI-encode the metadata - that responsibility falls on the metadata implementation\n        if (value.metadata !== undefined) {\n            entry += BAGGAGE_PROPERTIES_SEPARATOR + value.metadata.toString();\n        }\n        return entry;\n    });\n}\nexport function parsePairKeyValue(entry) {\n    var valueProps = entry.split(BAGGAGE_PROPERTIES_SEPARATOR);\n    if (valueProps.length <= 0)\n        return;\n    var keyPairPart = valueProps.shift();\n    if (!keyPairPart)\n        return;\n    var keyPair = keyPairPart.split(BAGGAGE_KEY_PAIR_SEPARATOR);\n    if (keyPair.length !== 2)\n        return;\n    var key = decodeURIComponent(keyPair[0].trim());\n    var value = decodeURIComponent(keyPair[1].trim());\n    var metadata;\n    if (valueProps.length > 0) {\n        metadata = baggageEntryMetadataFromString(valueProps.join(BAGGAGE_PROPERTIES_SEPARATOR));\n    }\n    return { key: key, value: value, metadata: metadata };\n}\n/**\n * Parse a string serialized in the baggage HTTP Format (without metadata):\n * https://github.com/w3c/baggage/blob/master/baggage/HTTP_HEADER_FORMAT.md\n */\nexport function parseKeyPairsIntoRecord(value) {\n    if (typeof value !== 'string' || value.length === 0)\n        return {};\n    return value\n        .split(BAGGAGE_ITEMS_SEPARATOR)\n        .map(function (entry) {\n        return parsePairKeyValue(entry);\n    })\n        .filter(function (keyPair) { return keyPair !== undefined && keyPair.value.length > 0; })\n        .reduce(function (headers, keyPair) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        headers[keyPair.key] = keyPair.value;\n        return headers;\n    }, {});\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { propagation, } from '@opentelemetry/api';\nimport { isTracingSuppressed } from '../../trace/suppress-tracing';\nimport { BAGGAGE_HEADER, BAGGAGE_ITEMS_SEPARATOR, BAGGAGE_MAX_NAME_VALUE_PAIRS, BAGGAGE_MAX_PER_NAME_VALUE_PAIRS } from '../constants';\nimport { getKeyPairs, parsePairKeyValue, serializeKeyPairs } from '../utils';\n/**\n * Propagates {@link Baggage} through Context format propagation.\n *\n * Based on the Baggage specification:\n * https://w3c.github.io/baggage/\n */\nvar W3CBaggagePropagator = /** @class */ (function () {\n    function W3CBaggagePropagator() {\n    }\n    W3CBaggagePropagator.prototype.inject = function (context, carrier, setter) {\n        var baggage = propagation.getBaggage(context);\n        if (!baggage || isTracingSuppressed(context))\n            return;\n        var keyPairs = getKeyPairs(baggage)\n            .filter(function (pair) {\n            return pair.length <= BAGGAGE_MAX_PER_NAME_VALUE_PAIRS;\n        })\n            .slice(0, BAGGAGE_MAX_NAME_VALUE_PAIRS);\n        var headerValue = serializeKeyPairs(keyPairs);\n        if (headerValue.length > 0) {\n            setter.set(carrier, BAGGAGE_HEADER, headerValue);\n        }\n    };\n    W3CBaggagePropagator.prototype.extract = function (context, carrier, getter) {\n        var headerValue = getter.get(carrier, BAGGAGE_HEADER);\n        var baggageString = Array.isArray(headerValue) ? headerValue.join(BAGGAGE_ITEMS_SEPARATOR) : headerValue;\n        if (!baggageString)\n            return context;\n        var baggage = {};\n        if (baggageString.length === 0) {\n            return context;\n        }\n        var pairs = baggageString.split(BAGGAGE_ITEMS_SEPARATOR);\n        pairs.forEach(function (entry) {\n            var keyPair = parsePairKeyValue(entry);\n            if (keyPair) {\n                var baggageEntry = { value: keyPair.value };\n                if (keyPair.metadata) {\n                    baggageEntry.metadata = keyPair.metadata;\n                }\n                baggage[keyPair.key] = baggageEntry;\n            }\n        });\n        if (Object.entries(baggage).length === 0) {\n            return context;\n        }\n        return propagation.setBaggage(context, propagation.createBaggage(baggage));\n    };\n    W3CBaggagePropagator.prototype.fields = function () {\n        return [BAGGAGE_HEADER];\n    };\n    return W3CBaggagePropagator;\n}());\nexport { W3CBaggagePropagator };\n//# sourceMappingURL=W3CBaggagePropagator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A utility for returning wall times anchored to a given point in time. Wall time measurements will\n * not be taken from the system, but instead are computed by adding a monotonic clock time\n * to the anchor point.\n *\n * This is needed because the system time can change and result in unexpected situations like\n * spans ending before they are started. Creating an anchored clock for each local root span\n * ensures that span timings and durations are accurate while preventing span times from drifting\n * too far from the system clock.\n *\n * Only creating an anchored clock once per local trace ensures span times are correct relative\n * to each other. For example, a child span will never have a start time before its parent even\n * if the system clock is corrected during the local trace.\n *\n * Heavily inspired by the OTel Java anchored clock\n * https://github.com/open-telemetry/opentelemetry-java/blob/main/sdk/trace/src/main/java/io/opentelemetry/sdk/trace/AnchoredClock.java\n */\nvar AnchoredClock = /** @class */ (function () {\n    /**\n     * Create a new AnchoredClock anchored to the current time returned by systemClock.\n     *\n     * @param systemClock should be a clock that returns the number of milliseconds since January 1 1970 such as Date\n     * @param monotonicClock should be a clock that counts milliseconds monotonically such as window.performance or perf_hooks.performance\n     */\n    function AnchoredClock(systemClock, monotonicClock) {\n        this._monotonicClock = monotonicClock;\n        this._epochMillis = systemClock.now();\n        this._performanceMillis = monotonicClock.now();\n    }\n    /**\n     * Returns the current time by adding the number of milliseconds since the\n     * AnchoredClock was created to the creation epoch time\n     */\n    AnchoredClock.prototype.now = function () {\n        var delta = this._monotonicClock.now() - this._performanceMillis;\n        return this._epochMillis + delta;\n    };\n    return AnchoredClock;\n}());\nexport { AnchoredClock };\n//# sourceMappingURL=anchored-clock.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { diag } from '@opentelemetry/api';\nexport function sanitizeAttributes(attributes) {\n    var e_1, _a;\n    var out = {};\n    if (typeof attributes !== 'object' || attributes == null) {\n        return out;\n    }\n    try {\n        for (var _b = __values(Object.entries(attributes)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var _d = __read(_c.value, 2), key = _d[0], val = _d[1];\n            if (!isAttributeKey(key)) {\n                diag.warn(\"Invalid attribute key: \" + key);\n                continue;\n            }\n            if (!isAttributeValue(val)) {\n                diag.warn(\"Invalid attribute value set for key: \" + key);\n                continue;\n            }\n            if (Array.isArray(val)) {\n                out[key] = val.slice();\n            }\n            else {\n                out[key] = val;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return out;\n}\nexport function isAttributeKey(key) {\n    return typeof key === 'string' && key.length > 0;\n}\nexport function isAttributeValue(val) {\n    if (val == null) {\n        return true;\n    }\n    if (Array.isArray(val)) {\n        return isHomogeneousAttributeValueArray(val);\n    }\n    return isValidPrimitiveAttributeValue(val);\n}\nfunction isHomogeneousAttributeValueArray(arr) {\n    var e_2, _a;\n    var type;\n    try {\n        for (var arr_1 = __values(arr), arr_1_1 = arr_1.next(); !arr_1_1.done; arr_1_1 = arr_1.next()) {\n            var element = arr_1_1.value;\n            // null/undefined elements are allowed\n            if (element == null)\n                continue;\n            if (!type) {\n                if (isValidPrimitiveAttributeValue(element)) {\n                    type = typeof element;\n                    continue;\n                }\n                // encountered an invalid primitive\n                return false;\n            }\n            if (typeof element === type) {\n                continue;\n            }\n            return false;\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (arr_1_1 && !arr_1_1.done && (_a = arr_1.return)) _a.call(arr_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return true;\n}\nfunction isValidPrimitiveAttributeValue(val) {\n    switch (typeof val) {\n        case 'number':\n        case 'boolean':\n        case 'string':\n            return true;\n    }\n    return false;\n}\n//# sourceMappingURL=attributes.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { diag } from '@opentelemetry/api';\n/**\n * Returns a function that logs an error using the provided logger, or a\n * console logger if one was not provided.\n */\nexport function loggingErrorHandler() {\n    return function (ex) {\n        diag.error(stringifyException(ex));\n    };\n}\n/**\n * Converts an exception into a string representation\n * @param {Exception} ex\n */\nfunction stringifyException(ex) {\n    if (typeof ex === 'string') {\n        return ex;\n    }\n    else {\n        return JSON.stringify(flattenException(ex));\n    }\n}\n/**\n * Flattens an exception into key-value pairs by traversing the prototype chain\n * and coercing values to strings. Duplicate properties will not be overwritten;\n * the first insert wins.\n */\nfunction flattenException(ex) {\n    var result = {};\n    var current = ex;\n    while (current !== null) {\n        Object.getOwnPropertyNames(current).forEach(function (propertyName) {\n            if (result[propertyName])\n                return;\n            var value = current[propertyName];\n            if (value) {\n                result[propertyName] = String(value);\n            }\n        });\n        current = Object.getPrototypeOf(current);\n    }\n    return result;\n}\n//# sourceMappingURL=logging-error-handler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { loggingErrorHandler } from './logging-error-handler';\n/** The global error handler delegate */\nvar delegateHandler = loggingErrorHandler();\n/**\n * Set the global error handler\n * @param {ErrorHandler} handler\n */\nexport function setGlobalErrorHandler(handler) {\n    delegateHandler = handler;\n}\n/**\n * Return the global error handler\n * @param {Exception} ex\n */\nexport function globalErrorHandler(ex) {\n    try {\n        delegateHandler(ex);\n    }\n    catch (_a) { } // eslint-disable-line no-empty\n}\n//# sourceMappingURL=global-error-handler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var TracesSamplerValues;\n(function (TracesSamplerValues) {\n    TracesSamplerValues[\"AlwaysOff\"] = \"always_off\";\n    TracesSamplerValues[\"AlwaysOn\"] = \"always_on\";\n    TracesSamplerValues[\"ParentBasedAlwaysOff\"] = \"parentbased_always_off\";\n    TracesSamplerValues[\"ParentBasedAlwaysOn\"] = \"parentbased_always_on\";\n    TracesSamplerValues[\"ParentBasedTraceIdRatio\"] = \"parentbased_traceidratio\";\n    TracesSamplerValues[\"TraceIdRatio\"] = \"traceidratio\";\n})(TracesSamplerValues || (TracesSamplerValues = {}));\n//# sourceMappingURL=sampling.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Updates to this file should also be replicated to @opentelemetry/api and\n// @opentelemetry/api-metrics too.\n/**\n * - globalThis (New standard)\n * - self (Will return the current window instance for supported browsers)\n * - window (fallback for older browser implementations)\n * - global (NodeJS implementation)\n * - <object> (When all else fails)\n */\n/** only globals that common to node and browsers are allowed */\n// eslint-disable-next-line node/no-unsupported-features/es-builtins, no-undef\nexport var _globalThis = typeof globalThis === 'object' ? globalThis :\n    typeof self === 'object' ? self :\n        typeof window === 'object' ? window :\n            typeof global === 'object' ? global :\n                {};\n//# sourceMappingURL=globalThis.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DiagLogLevel } from '@opentelemetry/api';\nimport { TracesSamplerValues } from './sampling';\nimport { _globalThis } from '../platform/browser/globalThis';\nvar DEFAULT_LIST_SEPARATOR = ',';\n/**\n * Environment interface to define all names\n */\nvar ENVIRONMENT_NUMBERS_KEYS = [\n    'OTEL_BSP_EXPORT_TIMEOUT',\n    'OTEL_BSP_MAX_EXPORT_BATCH_SIZE',\n    'OTEL_BSP_MAX_QUEUE_SIZE',\n    'OTEL_BSP_SCHEDULE_DELAY',\n    'OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT',\n    'OTEL_ATTRIBUTE_COUNT_LIMIT',\n    'OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT',\n    'OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT',\n    'OTEL_SPAN_EVENT_COUNT_LIMIT',\n    'OTEL_SPAN_LINK_COUNT_LIMIT',\n    'OTEL_EXPORTER_OTLP_TIMEOUT',\n    'OTEL_EXPORTER_OTLP_TRACES_TIMEOUT',\n    'OTEL_EXPORTER_OTLP_METRICS_TIMEOUT',\n    'OTEL_EXPORTER_JAEGER_AGENT_PORT',\n];\nfunction isEnvVarANumber(key) {\n    return (ENVIRONMENT_NUMBERS_KEYS.indexOf(key) > -1);\n}\nvar ENVIRONMENT_LISTS_KEYS = [\n    'OTEL_NO_PATCH_MODULES',\n    'OTEL_PROPAGATORS',\n];\nfunction isEnvVarAList(key) {\n    return ENVIRONMENT_LISTS_KEYS.indexOf(key) > -1;\n}\nexport var DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT = Infinity;\nexport var DEFAULT_ATTRIBUTE_COUNT_LIMIT = 128;\n/**\n * Default environment variables\n */\nexport var DEFAULT_ENVIRONMENT = {\n    CONTAINER_NAME: '',\n    ECS_CONTAINER_METADATA_URI_V4: '',\n    ECS_CONTAINER_METADATA_URI: '',\n    HOSTNAME: '',\n    KUBERNETES_SERVICE_HOST: '',\n    NAMESPACE: '',\n    OTEL_BSP_EXPORT_TIMEOUT: 30000,\n    OTEL_BSP_MAX_EXPORT_BATCH_SIZE: 512,\n    OTEL_BSP_MAX_QUEUE_SIZE: 2048,\n    OTEL_BSP_SCHEDULE_DELAY: 5000,\n    OTEL_EXPORTER_JAEGER_AGENT_HOST: '',\n    OTEL_EXPORTER_JAEGER_AGENT_PORT: 6832,\n    OTEL_EXPORTER_JAEGER_ENDPOINT: '',\n    OTEL_EXPORTER_JAEGER_PASSWORD: '',\n    OTEL_EXPORTER_JAEGER_USER: '',\n    OTEL_EXPORTER_OTLP_ENDPOINT: '',\n    OTEL_EXPORTER_OTLP_TRACES_ENDPOINT: '',\n    OTEL_EXPORTER_OTLP_METRICS_ENDPOINT: '',\n    OTEL_EXPORTER_OTLP_HEADERS: '',\n    OTEL_EXPORTER_OTLP_TRACES_HEADERS: '',\n    OTEL_EXPORTER_OTLP_METRICS_HEADERS: '',\n    OTEL_EXPORTER_OTLP_TIMEOUT: 10000,\n    OTEL_EXPORTER_OTLP_TRACES_TIMEOUT: 10000,\n    OTEL_EXPORTER_OTLP_METRICS_TIMEOUT: 10000,\n    OTEL_EXPORTER_ZIPKIN_ENDPOINT: 'http://localhost:9411/api/v2/spans',\n    OTEL_LOG_LEVEL: DiagLogLevel.INFO,\n    OTEL_NO_PATCH_MODULES: [],\n    OTEL_PROPAGATORS: ['tracecontext', 'baggage'],\n    OTEL_RESOURCE_ATTRIBUTES: '',\n    OTEL_SERVICE_NAME: '',\n    OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT: DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,\n    OTEL_ATTRIBUTE_COUNT_LIMIT: DEFAULT_ATTRIBUTE_COUNT_LIMIT,\n    OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT: DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,\n    OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT: DEFAULT_ATTRIBUTE_COUNT_LIMIT,\n    OTEL_SPAN_EVENT_COUNT_LIMIT: 128,\n    OTEL_SPAN_LINK_COUNT_LIMIT: 128,\n    OTEL_TRACES_EXPORTER: 'none',\n    OTEL_TRACES_SAMPLER: TracesSamplerValues.ParentBasedAlwaysOn,\n    OTEL_TRACES_SAMPLER_ARG: '',\n    OTEL_EXPORTER_OTLP_INSECURE: '',\n    OTEL_EXPORTER_OTLP_TRACES_INSECURE: '',\n    OTEL_EXPORTER_OTLP_METRICS_INSECURE: '',\n    OTEL_EXPORTER_OTLP_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_COMPRESSION: '',\n    OTEL_EXPORTER_OTLP_TRACES_COMPRESSION: '',\n    OTEL_EXPORTER_OTLP_METRICS_COMPRESSION: '',\n    OTEL_EXPORTER_OTLP_CLIENT_KEY: '',\n    OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY: '',\n    OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY: '',\n    OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE: ''\n};\n/**\n * Parses a variable as number with number validation\n * @param name\n * @param environment\n * @param values\n * @param min\n * @param max\n */\nfunction parseNumber(name, environment, values, min, max) {\n    if (min === void 0) { min = -Infinity; }\n    if (max === void 0) { max = Infinity; }\n    if (typeof values[name] !== 'undefined') {\n        var value = Number(values[name]);\n        if (!isNaN(value)) {\n            if (value < min) {\n                environment[name] = min;\n            }\n            else if (value > max) {\n                environment[name] = max;\n            }\n            else {\n                environment[name] = value;\n            }\n        }\n    }\n}\n/**\n * Parses list-like strings from input into output.\n * @param name\n * @param environment\n * @param values\n * @param separator\n */\nfunction parseStringList(name, output, input, separator) {\n    if (separator === void 0) { separator = DEFAULT_LIST_SEPARATOR; }\n    var givenValue = input[name];\n    if (typeof givenValue === 'string') {\n        output[name] = givenValue.split(separator).map(function (v) { return v.trim(); });\n    }\n}\n// The support string -> DiagLogLevel mappings\nvar logLevelMap = {\n    ALL: DiagLogLevel.ALL,\n    VERBOSE: DiagLogLevel.VERBOSE,\n    DEBUG: DiagLogLevel.DEBUG,\n    INFO: DiagLogLevel.INFO,\n    WARN: DiagLogLevel.WARN,\n    ERROR: DiagLogLevel.ERROR,\n    NONE: DiagLogLevel.NONE,\n};\n/**\n * Environmentally sets log level if valid log level string is provided\n * @param key\n * @param environment\n * @param values\n */\nfunction setLogLevelFromEnv(key, environment, values) {\n    var value = values[key];\n    if (typeof value === 'string') {\n        var theLevel = logLevelMap[value.toUpperCase()];\n        if (theLevel != null) {\n            environment[key] = theLevel;\n        }\n    }\n}\n/**\n * Parses environment values\n * @param values\n */\nexport function parseEnvironment(values) {\n    var environment = {};\n    for (var env in DEFAULT_ENVIRONMENT) {\n        var key = env;\n        switch (key) {\n            case 'OTEL_LOG_LEVEL':\n                setLogLevelFromEnv(key, environment, values);\n                break;\n            default:\n                if (isEnvVarANumber(key)) {\n                    parseNumber(key, environment, values);\n                }\n                else if (isEnvVarAList(key)) {\n                    parseStringList(key, environment, values);\n                }\n                else {\n                    var value = values[key];\n                    if (typeof value !== 'undefined' && value !== null) {\n                        environment[key] = String(value);\n                    }\n                }\n        }\n    }\n    return environment;\n}\n/**\n * Get environment in node or browser without\n * populating default values.\n */\nexport function getEnvWithoutDefaults() {\n    return typeof process !== 'undefined' ?\n        parseEnvironment(process.env) :\n        parseEnvironment(_globalThis);\n}\n//# sourceMappingURL=environment.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as os from 'os';\nimport { DEFAULT_ENVIRONMENT, parseEnvironment, } from '../../utils/environment';\n/**\n * Gets the environment variables\n */\nexport function getEnv() {\n    var processEnv = parseEnvironment(process.env);\n    return Object.assign({\n        HOSTNAME: os.hostname(),\n    }, DEFAULT_ENVIRONMENT, processEnv);\n}\n//# sourceMappingURL=environment.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** only globals that common to node and browsers are allowed */\n// eslint-disable-next-line node/no-unsupported-features/es-builtins\nexport var _globalThis = typeof globalThis === 'object' ? globalThis : global;\n//# sourceMappingURL=globalThis.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction intValue(charCode) {\n    // 0-9\n    if (charCode >= 48 && charCode <= 57) {\n        return charCode - 48;\n    }\n    // a-f\n    if (charCode >= 97 && charCode <= 102) {\n        return charCode - 87;\n    }\n    // A-F\n    return charCode - 55;\n}\nvar buf8 = Buffer.alloc(8);\nvar buf16 = Buffer.alloc(16);\nexport function hexToBase64(hexStr) {\n    var buf;\n    if (hexStr.length === 16) {\n        buf = buf8;\n    }\n    else if (hexStr.length === 32) {\n        buf = buf16;\n    }\n    else {\n        buf = Buffer.alloc(hexStr.length / 2);\n    }\n    var offset = 0;\n    for (var i = 0; i < hexStr.length; i += 2) {\n        var hi = intValue(hexStr.charCodeAt(i));\n        var lo = intValue(hexStr.charCodeAt(i + 1));\n        buf.writeUInt8((hi << 4) | lo, offset++);\n    }\n    return buf.toString('base64');\n}\n//# sourceMappingURL=hex-to-base64.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar SPAN_ID_BYTES = 8;\nvar TRACE_ID_BYTES = 16;\n/**\n * @deprecated Use the one defined in @opentelemetry/sdk-trace-base instead.\n */\nvar RandomIdGenerator = /** @class */ (function () {\n    function RandomIdGenerator() {\n        /**\n         * Returns a random 16-byte trace ID formatted/encoded as a 32 lowercase hex\n         * characters corresponding to 128 bits.\n         */\n        this.generateTraceId = getIdGenerator(TRACE_ID_BYTES);\n        /**\n         * Returns a random 8-byte span ID formatted/encoded as a 16 lowercase hex\n         * characters corresponding to 64 bits.\n         */\n        this.generateSpanId = getIdGenerator(SPAN_ID_BYTES);\n    }\n    return RandomIdGenerator;\n}());\nexport { RandomIdGenerator };\nvar SHARED_BUFFER = Buffer.allocUnsafe(TRACE_ID_BYTES);\nfunction getIdGenerator(bytes) {\n    return function generateId() {\n        for (var i = 0; i < bytes / 4; i++) {\n            // unsigned right shift drops decimal part of the number\n            // it is required because if a number between 2**32 and 2**32 - 1 is generated, an out of range error is thrown by writeUInt32BE\n            SHARED_BUFFER.writeUInt32BE((Math.random() * Math.pow(2, 32)) >>> 0, i * 4);\n        }\n        // If buffer is all 0, set the last byte to 1 to guarantee a valid w3c id is generated\n        for (var i = 0; i < bytes; i++) {\n            if (SHARED_BUFFER[i] > 0) {\n                break;\n            }\n            else if (i === bytes - 1) {\n                SHARED_BUFFER[bytes - 1] = 1;\n            }\n        }\n        return SHARED_BUFFER.toString('hex', 0, bytes);\n    };\n}\n//# sourceMappingURL=RandomIdGenerator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { performance } from 'perf_hooks';\nexport var otperformance = performance;\n//# sourceMappingURL=performance.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { VERSION } from '../../version';\nimport { TelemetrySdkLanguageValues, SemanticResourceAttributes, } from '@opentelemetry/semantic-conventions';\n/** Constants describing the SDK in use */\nexport var SDK_INFO = (_a = {},\n    _a[SemanticResourceAttributes.TELEMETRY_SDK_NAME] = 'opentelemetry',\n    _a[SemanticResourceAttributes.PROCESS_RUNTIME_NAME] = 'node',\n    _a[SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE] = TelemetrySdkLanguageValues.NODEJS,\n    _a[SemanticResourceAttributes.TELEMETRY_SDK_VERSION] = VERSION,\n    _a);\n//# sourceMappingURL=sdk-info.js.map","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"perf_hooks\");","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// this is autogenerated file, see scripts/version-update.js\nexport var VERSION = '1.7.0';\n//# sourceMappingURL=version.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function unrefTimer(timer) {\n    timer.unref();\n}\n//# sourceMappingURL=timer-util.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { otperformance as performance } from '../platform';\nvar NANOSECOND_DIGITS = 9;\nvar SECOND_TO_NANOSECONDS = Math.pow(10, NANOSECOND_DIGITS);\n/**\n * Converts a number to HrTime, HrTime = [number, number].\n * The first number is UNIX Epoch time in seconds since 00:00:00 UTC on 1 January 1970.\n * The second number represents the partial second elapsed since Unix Epoch time represented by first number in nanoseconds.\n * For example, 2021-01-01T12:30:10.150Z in UNIX Epoch time in milliseconds is represented as 1609504210150.\n * numberToHrtime calculates the first number by converting and truncating the Epoch time in milliseconds to seconds:\n * HrTime[0] = Math.trunc(1609504210150 / 1000) = 1609504210.\n * numberToHrtime calculates the second number by converting the digits after the decimal point of the subtraction, (1609504210150 / 1000) - HrTime[0], to nanoseconds:\n * HrTime[1] = Number((1609504210.150 - HrTime[0]).toFixed(9)) * SECOND_TO_NANOSECONDS = 150000000.\n * This is represented in HrTime format as [1609504210, 150000000].\n * @param epochMillis\n */\nfunction numberToHrtime(epochMillis) {\n    var epochSeconds = epochMillis / 1000;\n    // Decimals only.\n    var seconds = Math.trunc(epochSeconds);\n    // Round sub-nanosecond accuracy to nanosecond.\n    var nanos = Number((epochSeconds - seconds).toFixed(NANOSECOND_DIGITS)) *\n        SECOND_TO_NANOSECONDS;\n    return [seconds, nanos];\n}\nfunction getTimeOrigin() {\n    var timeOrigin = performance.timeOrigin;\n    if (typeof timeOrigin !== 'number') {\n        var perf = performance;\n        timeOrigin = perf.timing && perf.timing.fetchStart;\n    }\n    return timeOrigin;\n}\n/**\n * Returns an hrtime calculated via performance component.\n * @param performanceNow\n */\nexport function hrTime(performanceNow) {\n    var timeOrigin = numberToHrtime(getTimeOrigin());\n    var now = numberToHrtime(typeof performanceNow === 'number' ? performanceNow : performance.now());\n    var seconds = timeOrigin[0] + now[0];\n    var nanos = timeOrigin[1] + now[1];\n    // Nanoseconds\n    if (nanos > SECOND_TO_NANOSECONDS) {\n        nanos -= SECOND_TO_NANOSECONDS;\n        seconds += 1;\n    }\n    return [seconds, nanos];\n}\n/**\n *\n * Converts a TimeInput to an HrTime, defaults to _hrtime().\n * @param time\n */\nexport function timeInputToHrTime(time) {\n    // process.hrtime\n    if (isTimeInputHrTime(time)) {\n        return time;\n    }\n    else if (typeof time === 'number') {\n        // Must be a performance.now() if it's smaller than process start time.\n        if (time < getTimeOrigin()) {\n            return hrTime(time);\n        }\n        else {\n            // epoch milliseconds or performance.timeOrigin\n            return numberToHrtime(time);\n        }\n    }\n    else if (time instanceof Date) {\n        return numberToHrtime(time.getTime());\n    }\n    else {\n        throw TypeError('Invalid input type');\n    }\n}\n/**\n * Returns a duration of two hrTime.\n * @param startTime\n * @param endTime\n */\nexport function hrTimeDuration(startTime, endTime) {\n    var seconds = endTime[0] - startTime[0];\n    var nanos = endTime[1] - startTime[1];\n    // overflow\n    if (nanos < 0) {\n        seconds -= 1;\n        // negate\n        nanos += SECOND_TO_NANOSECONDS;\n    }\n    return [seconds, nanos];\n}\n/**\n * Convert hrTime to timestamp, for example \"2019-05-14T17:00:00.000123456Z\"\n * @param time\n */\nexport function hrTimeToTimeStamp(time) {\n    var precision = NANOSECOND_DIGITS;\n    var tmp = \"\" + '0'.repeat(precision) + time[1] + \"Z\";\n    var nanoString = tmp.substr(tmp.length - precision - 1);\n    var date = new Date(time[0] * 1000).toISOString();\n    return date.replace('000Z', nanoString);\n}\n/**\n * Convert hrTime to nanoseconds.\n * @param time\n */\nexport function hrTimeToNanoseconds(time) {\n    return time[0] * SECOND_TO_NANOSECONDS + time[1];\n}\n/**\n * Convert hrTime to milliseconds.\n * @param time\n */\nexport function hrTimeToMilliseconds(time) {\n    return Math.round(time[0] * 1e3 + time[1] / 1e6);\n}\n/**\n * Convert hrTime to microseconds.\n * @param time\n */\nexport function hrTimeToMicroseconds(time) {\n    return Math.round(time[0] * 1e6 + time[1] / 1e3);\n}\n/**\n * check if time is HrTime\n * @param value\n */\nexport function isTimeInputHrTime(value) {\n    return (Array.isArray(value) &&\n        value.length === 2 &&\n        typeof value[0] === 'number' &&\n        typeof value[1] === 'number');\n}\n/**\n * check if input value is a correct types.TimeInput\n * @param value\n */\nexport function isTimeInput(value) {\n    return (isTimeInputHrTime(value) ||\n        typeof value === 'number' ||\n        value instanceof Date);\n}\n//# sourceMappingURL=time.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var ExportResultCode;\n(function (ExportResultCode) {\n    ExportResultCode[ExportResultCode[\"SUCCESS\"] = 0] = \"SUCCESS\";\n    ExportResultCode[ExportResultCode[\"FAILED\"] = 1] = \"FAILED\";\n})(ExportResultCode || (ExportResultCode = {}));\n//# sourceMappingURL=ExportResult.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { diag, } from '@opentelemetry/api';\n/** Combines multiple propagators into a single propagator. */\nvar CompositePropagator = /** @class */ (function () {\n    /**\n     * Construct a composite propagator from a list of propagators.\n     *\n     * @param [config] Configuration object for composite propagator\n     */\n    function CompositePropagator(config) {\n        if (config === void 0) { config = {}; }\n        var _a;\n        this._propagators = (_a = config.propagators) !== null && _a !== void 0 ? _a : [];\n        this._fields = Array.from(new Set(this._propagators\n            // older propagators may not have fields function, null check to be sure\n            .map(function (p) { return (typeof p.fields === 'function' ? p.fields() : []); })\n            .reduce(function (x, y) { return x.concat(y); }, [])));\n    }\n    /**\n     * Run each of the configured propagators with the given context and carrier.\n     * Propagators are run in the order they are configured, so if multiple\n     * propagators write the same carrier key, the propagator later in the list\n     * will \"win\".\n     *\n     * @param context Context to inject\n     * @param carrier Carrier into which context will be injected\n     */\n    CompositePropagator.prototype.inject = function (context, carrier, setter) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(this._propagators), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var propagator = _c.value;\n                try {\n                    propagator.inject(context, carrier, setter);\n                }\n                catch (err) {\n                    diag.warn(\"Failed to inject with \" + propagator.constructor.name + \". Err: \" + err.message);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /**\n     * Run each of the configured propagators with the given context and carrier.\n     * Propagators are run in the order they are configured, so if multiple\n     * propagators write the same context key, the propagator later in the list\n     * will \"win\".\n     *\n     * @param context Context to add values to\n     * @param carrier Carrier from which to extract context\n     */\n    CompositePropagator.prototype.extract = function (context, carrier, getter) {\n        return this._propagators.reduce(function (ctx, propagator) {\n            try {\n                return propagator.extract(ctx, carrier, getter);\n            }\n            catch (err) {\n                diag.warn(\"Failed to inject with \" + propagator.constructor.name + \". Err: \" + err.message);\n            }\n            return ctx;\n        }, context);\n    };\n    CompositePropagator.prototype.fields = function () {\n        // return a new array so our fields cannot be modified\n        return this._fields.slice();\n    };\n    return CompositePropagator;\n}());\nexport { CompositePropagator };\n//# sourceMappingURL=composite.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar VALID_KEY_CHAR_RANGE = '[_0-9a-z-*/]';\nvar VALID_KEY = \"[a-z]\" + VALID_KEY_CHAR_RANGE + \"{0,255}\";\nvar VALID_VENDOR_KEY = \"[a-z0-9]\" + VALID_KEY_CHAR_RANGE + \"{0,240}@[a-z]\" + VALID_KEY_CHAR_RANGE + \"{0,13}\";\nvar VALID_KEY_REGEX = new RegExp(\"^(?:\" + VALID_KEY + \"|\" + VALID_VENDOR_KEY + \")$\");\nvar VALID_VALUE_BASE_REGEX = /^[ -~]{0,255}[!-~]$/;\nvar INVALID_VALUE_COMMA_EQUAL_REGEX = /,|=/;\n/**\n * Key is opaque string up to 256 characters printable. It MUST begin with a\n * lowercase letter, and can only contain lowercase letters a-z, digits 0-9,\n * underscores _, dashes -, asterisks *, and forward slashes /.\n * For multi-tenant vendor scenarios, an at sign (@) can be used to prefix the\n * vendor name. Vendors SHOULD set the tenant ID at the beginning of the key.\n * see https://www.w3.org/TR/trace-context/#key\n */\nexport function validateKey(key) {\n    return VALID_KEY_REGEX.test(key);\n}\n/**\n * Value is opaque string up to 256 characters printable ASCII RFC0020\n * characters (i.e., the range 0x20 to 0x7E) except comma , and =.\n */\nexport function validateValue(value) {\n    return (VALID_VALUE_BASE_REGEX.test(value) &&\n        !INVALID_VALUE_COMMA_EQUAL_REGEX.test(value));\n}\n//# sourceMappingURL=validators.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { validateKey, validateValue } from '../internal/validators';\nvar MAX_TRACE_STATE_ITEMS = 32;\nvar MAX_TRACE_STATE_LEN = 512;\nvar LIST_MEMBERS_SEPARATOR = ',';\nvar LIST_MEMBER_KEY_VALUE_SPLITTER = '=';\n/**\n * TraceState must be a class and not a simple object type because of the spec\n * requirement (https://www.w3.org/TR/trace-context/#tracestate-field).\n *\n * Here is the list of allowed mutations:\n * - New key-value pair should be added into the beginning of the list\n * - The value of any key can be updated. Modified keys MUST be moved to the\n * beginning of the list.\n */\nvar TraceState = /** @class */ (function () {\n    function TraceState(rawTraceState) {\n        this._internalState = new Map();\n        if (rawTraceState)\n            this._parse(rawTraceState);\n    }\n    TraceState.prototype.set = function (key, value) {\n        // TODO: Benchmark the different approaches(map vs list) and\n        // use the faster one.\n        var traceState = this._clone();\n        if (traceState._internalState.has(key)) {\n            traceState._internalState.delete(key);\n        }\n        traceState._internalState.set(key, value);\n        return traceState;\n    };\n    TraceState.prototype.unset = function (key) {\n        var traceState = this._clone();\n        traceState._internalState.delete(key);\n        return traceState;\n    };\n    TraceState.prototype.get = function (key) {\n        return this._internalState.get(key);\n    };\n    TraceState.prototype.serialize = function () {\n        var _this = this;\n        return this._keys()\n            .reduce(function (agg, key) {\n            agg.push(key + LIST_MEMBER_KEY_VALUE_SPLITTER + _this.get(key));\n            return agg;\n        }, [])\n            .join(LIST_MEMBERS_SEPARATOR);\n    };\n    TraceState.prototype._parse = function (rawTraceState) {\n        if (rawTraceState.length > MAX_TRACE_STATE_LEN)\n            return;\n        this._internalState = rawTraceState\n            .split(LIST_MEMBERS_SEPARATOR)\n            .reverse() // Store in reverse so new keys (.set(...)) will be placed at the beginning\n            .reduce(function (agg, part) {\n            var listMember = part.trim(); // Optional Whitespace (OWS) handling\n            var i = listMember.indexOf(LIST_MEMBER_KEY_VALUE_SPLITTER);\n            if (i !== -1) {\n                var key = listMember.slice(0, i);\n                var value = listMember.slice(i + 1, part.length);\n                if (validateKey(key) && validateValue(value)) {\n                    agg.set(key, value);\n                }\n                else {\n                    // TODO: Consider to add warning log\n                }\n            }\n            return agg;\n        }, new Map());\n        // Because of the reverse() requirement, trunc must be done after map is created\n        if (this._internalState.size > MAX_TRACE_STATE_ITEMS) {\n            this._internalState = new Map(Array.from(this._internalState.entries())\n                .reverse() // Use reverse same as original tracestate parse chain\n                .slice(0, MAX_TRACE_STATE_ITEMS));\n        }\n    };\n    TraceState.prototype._keys = function () {\n        return Array.from(this._internalState.keys()).reverse();\n    };\n    TraceState.prototype._clone = function () {\n        var traceState = new TraceState();\n        traceState._internalState = new Map(this._internalState);\n        return traceState;\n    };\n    return TraceState;\n}());\nexport { TraceState };\n//# sourceMappingURL=TraceState.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isSpanContextValid, trace, TraceFlags, } from '@opentelemetry/api';\nimport { isTracingSuppressed } from './suppress-tracing';\nimport { TraceState } from './TraceState';\nexport var TRACE_PARENT_HEADER = 'traceparent';\nexport var TRACE_STATE_HEADER = 'tracestate';\nvar VERSION = '00';\nvar VERSION_PART = '(?!ff)[\\\\da-f]{2}';\nvar TRACE_ID_PART = '(?![0]{32})[\\\\da-f]{32}';\nvar PARENT_ID_PART = '(?![0]{16})[\\\\da-f]{16}';\nvar FLAGS_PART = '[\\\\da-f]{2}';\nvar TRACE_PARENT_REGEX = new RegExp(\"^\\\\s?(\" + VERSION_PART + \")-(\" + TRACE_ID_PART + \")-(\" + PARENT_ID_PART + \")-(\" + FLAGS_PART + \")(-.*)?\\\\s?$\");\n/**\n * Parses information from the [traceparent] span tag and converts it into {@link SpanContext}\n * @param traceParent - A meta property that comes from server.\n *     It should be dynamically generated server side to have the server's request trace Id,\n *     a parent span Id that was set on the server's request span,\n *     and the trace flags to indicate the server's sampling decision\n *     (01 = sampled, 00 = not sampled).\n *     for example: '{version}-{traceId}-{spanId}-{sampleDecision}'\n *     For more information see {@link https://www.w3.org/TR/trace-context/}\n */\nexport function parseTraceParent(traceParent) {\n    var match = TRACE_PARENT_REGEX.exec(traceParent);\n    if (!match)\n        return null;\n    // According to the specification the implementation should be compatible\n    // with future versions. If there are more parts, we only reject it if it's using version 00\n    // See https://www.w3.org/TR/trace-context/#versioning-of-traceparent\n    if (match[1] === '00' && match[5])\n        return null;\n    return {\n        traceId: match[2],\n        spanId: match[3],\n        traceFlags: parseInt(match[4], 16),\n    };\n}\n/**\n * Propagates {@link SpanContext} through Trace Context format propagation.\n *\n * Based on the Trace Context specification:\n * https://www.w3.org/TR/trace-context/\n */\nvar W3CTraceContextPropagator = /** @class */ (function () {\n    function W3CTraceContextPropagator() {\n    }\n    W3CTraceContextPropagator.prototype.inject = function (context, carrier, setter) {\n        var spanContext = trace.getSpanContext(context);\n        if (!spanContext ||\n            isTracingSuppressed(context) ||\n            !isSpanContextValid(spanContext))\n            return;\n        var traceParent = VERSION + \"-\" + spanContext.traceId + \"-\" + spanContext.spanId + \"-0\" + Number(spanContext.traceFlags || TraceFlags.NONE).toString(16);\n        setter.set(carrier, TRACE_PARENT_HEADER, traceParent);\n        if (spanContext.traceState) {\n            setter.set(carrier, TRACE_STATE_HEADER, spanContext.traceState.serialize());\n        }\n    };\n    W3CTraceContextPropagator.prototype.extract = function (context, carrier, getter) {\n        var traceParentHeader = getter.get(carrier, TRACE_PARENT_HEADER);\n        if (!traceParentHeader)\n            return context;\n        var traceParent = Array.isArray(traceParentHeader)\n            ? traceParentHeader[0]\n            : traceParentHeader;\n        if (typeof traceParent !== 'string')\n            return context;\n        var spanContext = parseTraceParent(traceParent);\n        if (!spanContext)\n            return context;\n        spanContext.isRemote = true;\n        var traceStateHeader = getter.get(carrier, TRACE_STATE_HEADER);\n        if (traceStateHeader) {\n            // If more than one `tracestate` header is found, we merge them into a\n            // single header.\n            var state = Array.isArray(traceStateHeader)\n                ? traceStateHeader.join(',')\n                : traceStateHeader;\n            spanContext.traceState = new TraceState(typeof state === 'string' ? state : undefined);\n        }\n        return trace.setSpanContext(context, spanContext);\n    };\n    W3CTraceContextPropagator.prototype.fields = function () {\n        return [TRACE_PARENT_HEADER, TRACE_STATE_HEADER];\n    };\n    return W3CTraceContextPropagator;\n}());\nexport { W3CTraceContextPropagator };\n//# sourceMappingURL=W3CTraceContextPropagator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createContextKey } from '@opentelemetry/api';\nvar RPC_METADATA_KEY = createContextKey('OpenTelemetry SDK Context Key RPC_METADATA');\nexport var RPCType;\n(function (RPCType) {\n    RPCType[\"HTTP\"] = \"http\";\n})(RPCType || (RPCType = {}));\nexport function setRPCMetadata(context, meta) {\n    return context.setValue(RPC_METADATA_KEY, meta);\n}\nexport function deleteRPCMetadata(context) {\n    return context.deleteValue(RPC_METADATA_KEY);\n}\nexport function getRPCMetadata(context) {\n    return context.getValue(RPC_METADATA_KEY);\n}\n//# sourceMappingURL=rpc-metadata.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SamplingDecision } from '@opentelemetry/api';\n/**\n * @deprecated Use the one defined in @opentelemetry/sdk-trace-base instead.\n * Sampler that samples no traces.\n */\nvar AlwaysOffSampler = /** @class */ (function () {\n    function AlwaysOffSampler() {\n    }\n    AlwaysOffSampler.prototype.shouldSample = function () {\n        return {\n            decision: SamplingDecision.NOT_RECORD,\n        };\n    };\n    AlwaysOffSampler.prototype.toString = function () {\n        return 'AlwaysOffSampler';\n    };\n    return AlwaysOffSampler;\n}());\nexport { AlwaysOffSampler };\n//# sourceMappingURL=AlwaysOffSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * based on lodash in order to support esm builds without esModuleInterop.\n * lodash is using MIT License.\n **/\nvar objectTag = '[object Object]';\nvar nullTag = '[object Null]';\nvar undefinedTag = '[object Undefined]';\nvar funcProto = Function.prototype;\nvar funcToString = funcProto.toString;\nvar objectCtorString = funcToString.call(Object);\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\nvar objectProto = Object.prototype;\nvar hasOwnProperty = objectProto.hasOwnProperty;\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\nvar nativeObjectToString = objectProto.toString;\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n    return function (arg) {\n        return func(transform(arg));\n    };\n}\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nexport function isPlainObject(value) {\n    if (!isObjectLike(value) || baseGetTag(value) !== objectTag) {\n        return false;\n    }\n    var proto = getPrototype(value);\n    if (proto === null) {\n        return true;\n    }\n    var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n    return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n        funcToString.call(Ctor) === objectCtorString;\n}\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n    return value != null && typeof value == 'object';\n}\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n    if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n    }\n    return (symToStringTag && symToStringTag in Object(value))\n        ? getRawTag(value)\n        : objectToString(value);\n}\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n    var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];\n    var unmasked = false;\n    try {\n        value[symToStringTag] = undefined;\n        unmasked = true;\n    }\n    catch (e) {\n        // silence\n    }\n    var result = nativeObjectToString.call(value);\n    if (unmasked) {\n        if (isOwn) {\n            value[symToStringTag] = tag;\n        }\n        else {\n            delete value[symToStringTag];\n        }\n    }\n    return result;\n}\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n    return nativeObjectToString.call(value);\n}\n//# sourceMappingURL=lodash.merge.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SamplingDecision } from '@opentelemetry/api';\n/**\n * @deprecated Use the one defined in @opentelemetry/sdk-trace-base instead.\n * Sampler that samples all traces.\n */\nvar AlwaysOnSampler = /** @class */ (function () {\n    function AlwaysOnSampler() {\n    }\n    AlwaysOnSampler.prototype.shouldSample = function () {\n        return {\n            decision: SamplingDecision.RECORD_AND_SAMPLED,\n        };\n    };\n    AlwaysOnSampler.prototype.toString = function () {\n        return 'AlwaysOnSampler';\n    };\n    return AlwaysOnSampler;\n}());\nexport { AlwaysOnSampler };\n//# sourceMappingURL=AlwaysOnSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isSpanContextValid, TraceFlags, trace, } from '@opentelemetry/api';\nimport { globalErrorHandler } from '../../common/global-error-handler';\nimport { AlwaysOffSampler } from './AlwaysOffSampler';\nimport { AlwaysOnSampler } from './AlwaysOnSampler';\n/**\n * @deprecated Use the one defined in @opentelemetry/sdk-trace-base instead.\n * A composite sampler that either respects the parent span's sampling decision\n * or delegates to `delegateSampler` for root spans.\n */\nvar ParentBasedSampler = /** @class */ (function () {\n    function ParentBasedSampler(config) {\n        var _a, _b, _c, _d;\n        this._root = config.root;\n        if (!this._root) {\n            globalErrorHandler(new Error('ParentBasedSampler must have a root sampler configured'));\n            this._root = new AlwaysOnSampler();\n        }\n        this._remoteParentSampled =\n            (_a = config.remoteParentSampled) !== null && _a !== void 0 ? _a : new AlwaysOnSampler();\n        this._remoteParentNotSampled =\n            (_b = config.remoteParentNotSampled) !== null && _b !== void 0 ? _b : new AlwaysOffSampler();\n        this._localParentSampled =\n            (_c = config.localParentSampled) !== null && _c !== void 0 ? _c : new AlwaysOnSampler();\n        this._localParentNotSampled =\n            (_d = config.localParentNotSampled) !== null && _d !== void 0 ? _d : new AlwaysOffSampler();\n    }\n    ParentBasedSampler.prototype.shouldSample = function (context, traceId, spanName, spanKind, attributes, links) {\n        var parentContext = trace.getSpanContext(context);\n        if (!parentContext || !isSpanContextValid(parentContext)) {\n            return this._root.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        if (parentContext.isRemote) {\n            if (parentContext.traceFlags & TraceFlags.SAMPLED) {\n                return this._remoteParentSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n            }\n            return this._remoteParentNotSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        if (parentContext.traceFlags & TraceFlags.SAMPLED) {\n            return this._localParentSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        return this._localParentNotSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n    };\n    ParentBasedSampler.prototype.toString = function () {\n        return \"ParentBased{root=\" + this._root.toString() + \", remoteParentSampled=\" + this._remoteParentSampled.toString() + \", remoteParentNotSampled=\" + this._remoteParentNotSampled.toString() + \", localParentSampled=\" + this._localParentSampled.toString() + \", localParentNotSampled=\" + this._localParentNotSampled.toString() + \"}\";\n    };\n    return ParentBasedSampler;\n}());\nexport { ParentBasedSampler };\n//# sourceMappingURL=ParentBasedSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SamplingDecision, isValidTraceId, } from '@opentelemetry/api';\n/**\n * @deprecated Use the one defined in @opentelemetry/sdk-trace-base instead.\n * Sampler that samples a given fraction of traces based of trace id deterministically.\n */\nvar TraceIdRatioBasedSampler = /** @class */ (function () {\n    function TraceIdRatioBasedSampler(_ratio) {\n        if (_ratio === void 0) { _ratio = 0; }\n        this._ratio = _ratio;\n        this._ratio = this._normalize(_ratio);\n        this._upperBound = Math.floor(this._ratio * 0xffffffff);\n    }\n    TraceIdRatioBasedSampler.prototype.shouldSample = function (context, traceId) {\n        return {\n            decision: isValidTraceId(traceId) && this._accumulate(traceId) < this._upperBound\n                ? SamplingDecision.RECORD_AND_SAMPLED\n                : SamplingDecision.NOT_RECORD,\n        };\n    };\n    TraceIdRatioBasedSampler.prototype.toString = function () {\n        return \"TraceIdRatioBased{\" + this._ratio + \"}\";\n    };\n    TraceIdRatioBasedSampler.prototype._normalize = function (ratio) {\n        if (typeof ratio !== 'number' || isNaN(ratio))\n            return 0;\n        return ratio >= 1 ? 1 : ratio <= 0 ? 0 : ratio;\n    };\n    TraceIdRatioBasedSampler.prototype._accumulate = function (traceId) {\n        var accumulation = 0;\n        for (var i = 0; i < traceId.length / 8; i++) {\n            var pos = i * 8;\n            var part = parseInt(traceId.slice(pos, pos + 8), 16);\n            accumulation = (accumulation ^ part) >>> 0;\n        }\n        return accumulation;\n    };\n    return TraceIdRatioBasedSampler;\n}());\nexport { TraceIdRatioBasedSampler };\n//# sourceMappingURL=TraceIdRatioBasedSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isPlainObject } from './lodash.merge';\nvar MAX_LEVEL = 20;\n/**\n * Merges objects together\n * @param args - objects / values to be merged\n */\nexport function merge() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var result = args.shift();\n    var objects = new WeakMap();\n    while (args.length > 0) {\n        result = mergeTwoObjects(result, args.shift(), 0, objects);\n    }\n    return result;\n}\nfunction takeValue(value) {\n    if (isArray(value)) {\n        return value.slice();\n    }\n    return value;\n}\n/**\n * Merges two objects\n * @param one - first object\n * @param two - second object\n * @param level - current deep level\n * @param objects - objects holder that has been already referenced - to prevent\n * cyclic dependency\n */\nfunction mergeTwoObjects(one, two, level, objects) {\n    if (level === void 0) { level = 0; }\n    var result;\n    if (level > MAX_LEVEL) {\n        return undefined;\n    }\n    level++;\n    if (isPrimitive(one) || isPrimitive(two) || isFunction(two)) {\n        result = takeValue(two);\n    }\n    else if (isArray(one)) {\n        result = one.slice();\n        if (isArray(two)) {\n            for (var i = 0, j = two.length; i < j; i++) {\n                result.push(takeValue(two[i]));\n            }\n        }\n        else if (isObject(two)) {\n            var keys = Object.keys(two);\n            for (var i = 0, j = keys.length; i < j; i++) {\n                var key = keys[i];\n                result[key] = takeValue(two[key]);\n            }\n        }\n    }\n    else if (isObject(one)) {\n        if (isObject(two)) {\n            if (!shouldMerge(one, two)) {\n                return two;\n            }\n            result = Object.assign({}, one);\n            var keys = Object.keys(two);\n            for (var i = 0, j = keys.length; i < j; i++) {\n                var key = keys[i];\n                var twoValue = two[key];\n                if (isPrimitive(twoValue)) {\n                    if (typeof twoValue === 'undefined') {\n                        delete result[key];\n                    }\n                    else {\n                        // result[key] = takeValue(twoValue);\n                        result[key] = twoValue;\n                    }\n                }\n                else {\n                    var obj1 = result[key];\n                    var obj2 = twoValue;\n                    if (wasObjectReferenced(one, key, objects) ||\n                        wasObjectReferenced(two, key, objects)) {\n                        delete result[key];\n                    }\n                    else {\n                        if (isObject(obj1) && isObject(obj2)) {\n                            var arr1 = objects.get(obj1) || [];\n                            var arr2 = objects.get(obj2) || [];\n                            arr1.push({ obj: one, key: key });\n                            arr2.push({ obj: two, key: key });\n                            objects.set(obj1, arr1);\n                            objects.set(obj2, arr2);\n                        }\n                        result[key] = mergeTwoObjects(result[key], twoValue, level, objects);\n                    }\n                }\n            }\n        }\n        else {\n            result = two;\n        }\n    }\n    return result;\n}\n/**\n * Function to check if object has been already reference\n * @param obj\n * @param key\n * @param objects\n */\nfunction wasObjectReferenced(obj, key, objects) {\n    var arr = objects.get(obj[key]) || [];\n    for (var i = 0, j = arr.length; i < j; i++) {\n        var info = arr[i];\n        if (info.key === key && info.obj === obj) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction isArray(value) {\n    return Array.isArray(value);\n}\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\nfunction isObject(value) {\n    return !isPrimitive(value) && !isArray(value) && !isFunction(value) && typeof value === 'object';\n}\nfunction isPrimitive(value) {\n    return typeof value === 'string' ||\n        typeof value === 'number' ||\n        typeof value === 'boolean' ||\n        typeof value === 'undefined' ||\n        value instanceof Date ||\n        value instanceof RegExp ||\n        value === null;\n}\nfunction shouldMerge(one, two) {\n    if (!isPlainObject(one) || !isPlainObject(two)) {\n        return false;\n    }\n    return true;\n}\n//# sourceMappingURL=merge.js.map","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function urlMatches(url, urlToMatch) {\n    if (typeof urlToMatch === 'string') {\n        return url === urlToMatch;\n    }\n    else {\n        return !!url.match(urlToMatch);\n    }\n}\n/**\n * Check if {@param url} should be ignored when comparing against {@param ignoredUrls}\n * @param url\n * @param ignoredUrls\n */\nexport function isUrlIgnored(url, ignoredUrls) {\n    var e_1, _a;\n    if (!ignoredUrls) {\n        return false;\n    }\n    try {\n        for (var ignoredUrls_1 = __values(ignoredUrls), ignoredUrls_1_1 = ignoredUrls_1.next(); !ignoredUrls_1_1.done; ignoredUrls_1_1 = ignoredUrls_1.next()) {\n            var ignoreUrl = ignoredUrls_1_1.value;\n            if (urlMatches(url, ignoreUrl)) {\n                return true;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (ignoredUrls_1_1 && !ignoredUrls_1_1.done && (_a = ignoredUrls_1.return)) _a.call(ignoredUrls_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\n//# sourceMappingURL=url.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Checks if certain function has been already wrapped\n * @param func\n */\nexport function isWrapped(func) {\n    return (typeof func === 'function' &&\n        typeof func.__original === 'function' &&\n        typeof func.__unwrap === 'function' &&\n        func.__wrapped === true);\n}\n//# sourceMappingURL=wrap.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Deferred = /** @class */ (function () {\n    function Deferred() {\n        var _this = this;\n        this._promise = new Promise(function (resolve, reject) {\n            _this._resolve = resolve;\n            _this._reject = reject;\n        });\n    }\n    Object.defineProperty(Deferred.prototype, \"promise\", {\n        get: function () {\n            return this._promise;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Deferred.prototype.resolve = function (val) {\n        this._resolve(val);\n    };\n    Deferred.prototype.reject = function (err) {\n        this._reject(err);\n    };\n    return Deferred;\n}());\nexport { Deferred };\n//# sourceMappingURL=promise.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { Deferred } from './promise';\n/**\n * Bind the callback and only invoke the callback once regardless how many times `BindOnceFuture.call` is invoked.\n */\nvar BindOnceFuture = /** @class */ (function () {\n    function BindOnceFuture(_callback, _that) {\n        this._callback = _callback;\n        this._that = _that;\n        this._isCalled = false;\n        this._deferred = new Deferred();\n    }\n    Object.defineProperty(BindOnceFuture.prototype, \"isCalled\", {\n        get: function () {\n            return this._isCalled;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BindOnceFuture.prototype, \"promise\", {\n        get: function () {\n            return this._deferred.promise;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BindOnceFuture.prototype.call = function () {\n        var _a;\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this._isCalled) {\n            this._isCalled = true;\n            try {\n                Promise.resolve((_a = this._callback).call.apply(_a, __spreadArray([this._that], __read(args), false)))\n                    .then(function (val) { return _this._deferred.resolve(val); }, function (err) { return _this._deferred.reject(err); });\n            }\n            catch (err) {\n                this._deferred.reject(err);\n            }\n        }\n        return this._deferred.promise;\n    };\n    return BindOnceFuture;\n}());\nexport { BindOnceFuture };\n//# sourceMappingURL=callback.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A sampling decision that determines how a {@link Span} will be recorded\n * and collected.\n */\nexport var SamplingDecision;\n(function (SamplingDecision) {\n    /**\n     * `Span.isRecording() === false`, span will not be recorded and all events\n     * and attributes will be dropped.\n     */\n    SamplingDecision[SamplingDecision[\"NOT_RECORD\"] = 0] = \"NOT_RECORD\";\n    /**\n     * `Span.isRecording() === true`, but `Sampled` flag in {@link TraceFlags}\n     * MUST NOT be set.\n     */\n    SamplingDecision[SamplingDecision[\"RECORD\"] = 1] = \"RECORD\";\n    /**\n     * `Span.isRecording() === true` AND `Sampled` flag in {@link TraceFlags}\n     * MUST be set.\n     */\n    SamplingDecision[SamplingDecision[\"RECORD_AND_SAMPLED\"] = 2] = \"RECORD_AND_SAMPLED\";\n})(SamplingDecision || (SamplingDecision = {}));\n//# sourceMappingURL=Sampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport * as api from '@opentelemetry/api';\nimport { hrTimeDuration, isAttributeValue, isTimeInput, otperformance, sanitizeAttributes, timeInputToHrTime } from '@opentelemetry/core';\nimport { SemanticAttributes } from '@opentelemetry/semantic-conventions';\nimport { ExceptionEventName } from './enums';\n/**\n * This class represents a span.\n */\nvar Span = /** @class */ (function () {\n    /**\n     * Constructs a new Span instance.\n     *\n     * @deprecated calling Span constructor directly is not supported. Please use tracer.startSpan.\n     * */\n    function Span(parentTracer, context, spanName, spanContext, kind, parentSpanId, links, startTime, clock) {\n        if (links === void 0) { links = []; }\n        if (clock === void 0) { clock = otperformance; }\n        this.attributes = {};\n        this.links = [];\n        this.events = [];\n        this.status = {\n            code: api.SpanStatusCode.UNSET,\n        };\n        this.endTime = [0, 0];\n        this._ended = false;\n        this._duration = [-1, -1];\n        this._clock = clock;\n        this.name = spanName;\n        this._spanContext = spanContext;\n        this.parentSpanId = parentSpanId;\n        this.kind = kind;\n        this.links = links;\n        this.startTime = timeInputToHrTime(startTime !== null && startTime !== void 0 ? startTime : clock.now());\n        this.resource = parentTracer.resource;\n        this.instrumentationLibrary = parentTracer.instrumentationLibrary;\n        this._spanLimits = parentTracer.getSpanLimits();\n        this._spanProcessor = parentTracer.getActiveSpanProcessor();\n        this._spanProcessor.onStart(this, context);\n        this._attributeValueLengthLimit = this._spanLimits.attributeValueLengthLimit || 0;\n    }\n    Span.prototype.spanContext = function () {\n        return this._spanContext;\n    };\n    Span.prototype.setAttribute = function (key, value) {\n        if (value == null || this._isSpanEnded())\n            return this;\n        if (key.length === 0) {\n            api.diag.warn(\"Invalid attribute key: \" + key);\n            return this;\n        }\n        if (!isAttributeValue(value)) {\n            api.diag.warn(\"Invalid attribute value set for key: \" + key);\n            return this;\n        }\n        if (Object.keys(this.attributes).length >=\n            this._spanLimits.attributeCountLimit &&\n            !Object.prototype.hasOwnProperty.call(this.attributes, key)) {\n            return this;\n        }\n        this.attributes[key] = this._truncateToSize(value);\n        return this;\n    };\n    Span.prototype.setAttributes = function (attributes) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(Object.entries(attributes)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), k = _d[0], v = _d[1];\n                this.setAttribute(k, v);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return this;\n    };\n    /**\n     *\n     * @param name Span Name\n     * @param [attributesOrStartTime] Span attributes or start time\n     *     if type is {@type TimeInput} and 3rd param is undefined\n     * @param [startTime] Specified start time for the event\n     */\n    Span.prototype.addEvent = function (name, attributesOrStartTime, startTime) {\n        if (this._isSpanEnded())\n            return this;\n        if (this._spanLimits.eventCountLimit === 0) {\n            api.diag.warn('No events allowed.');\n            return this;\n        }\n        if (this.events.length >= this._spanLimits.eventCountLimit) {\n            api.diag.warn('Dropping extra events.');\n            this.events.shift();\n        }\n        if (isTimeInput(attributesOrStartTime)) {\n            if (typeof startTime === 'undefined') {\n                startTime = attributesOrStartTime;\n            }\n            attributesOrStartTime = undefined;\n        }\n        if (typeof startTime === 'undefined') {\n            startTime = this._clock.now();\n        }\n        var attributes = sanitizeAttributes(attributesOrStartTime);\n        this.events.push({\n            name: name,\n            attributes: attributes,\n            time: timeInputToHrTime(startTime),\n        });\n        return this;\n    };\n    Span.prototype.setStatus = function (status) {\n        if (this._isSpanEnded())\n            return this;\n        this.status = status;\n        return this;\n    };\n    Span.prototype.updateName = function (name) {\n        if (this._isSpanEnded())\n            return this;\n        this.name = name;\n        return this;\n    };\n    Span.prototype.end = function (endTime) {\n        if (this._isSpanEnded()) {\n            api.diag.error('You can only call end() on a span once.');\n            return;\n        }\n        this._ended = true;\n        this.endTime = timeInputToHrTime(endTime !== null && endTime !== void 0 ? endTime : this._clock.now());\n        this._duration = hrTimeDuration(this.startTime, this.endTime);\n        if (this._duration[0] < 0) {\n            api.diag.warn('Inconsistent start and end time, startTime > endTime', this.startTime, this.endTime);\n        }\n        this._spanProcessor.onEnd(this);\n    };\n    Span.prototype.isRecording = function () {\n        return this._ended === false;\n    };\n    Span.prototype.recordException = function (exception, time) {\n        if (time === void 0) { time = this._clock.now(); }\n        var attributes = {};\n        if (typeof exception === 'string') {\n            attributes[SemanticAttributes.EXCEPTION_MESSAGE] = exception;\n        }\n        else if (exception) {\n            if (exception.code) {\n                attributes[SemanticAttributes.EXCEPTION_TYPE] = exception.code.toString();\n            }\n            else if (exception.name) {\n                attributes[SemanticAttributes.EXCEPTION_TYPE] = exception.name;\n            }\n            if (exception.message) {\n                attributes[SemanticAttributes.EXCEPTION_MESSAGE] = exception.message;\n            }\n            if (exception.stack) {\n                attributes[SemanticAttributes.EXCEPTION_STACKTRACE] = exception.stack;\n            }\n        }\n        // these are minimum requirements from spec\n        if (attributes[SemanticAttributes.EXCEPTION_TYPE] ||\n            attributes[SemanticAttributes.EXCEPTION_MESSAGE]) {\n            this.addEvent(ExceptionEventName, attributes, time);\n        }\n        else {\n            api.diag.warn(\"Failed to record an exception \" + exception);\n        }\n    };\n    Object.defineProperty(Span.prototype, \"duration\", {\n        get: function () {\n            return this._duration;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Span.prototype, \"ended\", {\n        get: function () {\n            return this._ended;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Span.prototype._isSpanEnded = function () {\n        if (this._ended) {\n            api.diag.warn(\"Can not execute the operation on ended Span {traceId: \" + this._spanContext.traceId + \", spanId: \" + this._spanContext.spanId + \"}\");\n        }\n        return this._ended;\n    };\n    // Utility function to truncate given value within size\n    // for value type of string, will truncate to given limit\n    // for type of non-string, will return same value\n    Span.prototype._truncateToLimitUtil = function (value, limit) {\n        if (value.length <= limit) {\n            return value;\n        }\n        return value.substr(0, limit);\n    };\n    /**\n     * If the given attribute value is of type string and has more characters than given {@code attributeValueLengthLimit} then\n     * return string with trucated to {@code attributeValueLengthLimit} characters\n     *\n     * If the given attribute value is array of strings then\n     * return new array of strings with each element truncated to {@code attributeValueLengthLimit} characters\n     *\n     * Otherwise return same Attribute {@code value}\n     *\n     * @param value Attribute value\n     * @returns truncated attribute value if required, otherwise same value\n     */\n    Span.prototype._truncateToSize = function (value) {\n        var _this = this;\n        var limit = this._attributeValueLengthLimit;\n        // Check limit\n        if (limit <= 0) {\n            // Negative values are invalid, so do not truncate\n            api.diag.warn(\"Attribute value limit must be positive, got \" + limit);\n            return value;\n        }\n        // String\n        if (typeof value === 'string') {\n            return this._truncateToLimitUtil(value, limit);\n        }\n        // Array of strings\n        if (Array.isArray(value)) {\n            return value.map(function (val) { return typeof val === 'string' ? _this._truncateToLimitUtil(val, limit) : val; });\n        }\n        // Other types, no need to apply value length limit\n        return value;\n    };\n    return Span;\n}());\nexport { Span };\n//# sourceMappingURL=Span.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Event name definitions\nexport var ExceptionEventName = 'exception';\n//# sourceMappingURL=enums.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SamplingDecision } from '../Sampler';\n/** Sampler that samples no traces. */\nvar AlwaysOffSampler = /** @class */ (function () {\n    function AlwaysOffSampler() {\n    }\n    AlwaysOffSampler.prototype.shouldSample = function () {\n        return {\n            decision: SamplingDecision.NOT_RECORD,\n        };\n    };\n    AlwaysOffSampler.prototype.toString = function () {\n        return 'AlwaysOffSampler';\n    };\n    return AlwaysOffSampler;\n}());\nexport { AlwaysOffSampler };\n//# sourceMappingURL=AlwaysOffSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SamplingDecision } from '../Sampler';\n/** Sampler that samples all traces. */\nvar AlwaysOnSampler = /** @class */ (function () {\n    function AlwaysOnSampler() {\n    }\n    AlwaysOnSampler.prototype.shouldSample = function () {\n        return {\n            decision: SamplingDecision.RECORD_AND_SAMPLED,\n        };\n    };\n    AlwaysOnSampler.prototype.toString = function () {\n        return 'AlwaysOnSampler';\n    };\n    return AlwaysOnSampler;\n}());\nexport { AlwaysOnSampler };\n//# sourceMappingURL=AlwaysOnSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isSpanContextValid, TraceFlags, trace, } from '@opentelemetry/api';\nimport { globalErrorHandler } from '@opentelemetry/core';\nimport { AlwaysOffSampler } from './AlwaysOffSampler';\nimport { AlwaysOnSampler } from './AlwaysOnSampler';\n/**\n * A composite sampler that either respects the parent span's sampling decision\n * or delegates to `delegateSampler` for root spans.\n */\nvar ParentBasedSampler = /** @class */ (function () {\n    function ParentBasedSampler(config) {\n        var _a, _b, _c, _d;\n        this._root = config.root;\n        if (!this._root) {\n            globalErrorHandler(new Error('ParentBasedSampler must have a root sampler configured'));\n            this._root = new AlwaysOnSampler();\n        }\n        this._remoteParentSampled =\n            (_a = config.remoteParentSampled) !== null && _a !== void 0 ? _a : new AlwaysOnSampler();\n        this._remoteParentNotSampled =\n            (_b = config.remoteParentNotSampled) !== null && _b !== void 0 ? _b : new AlwaysOffSampler();\n        this._localParentSampled =\n            (_c = config.localParentSampled) !== null && _c !== void 0 ? _c : new AlwaysOnSampler();\n        this._localParentNotSampled =\n            (_d = config.localParentNotSampled) !== null && _d !== void 0 ? _d : new AlwaysOffSampler();\n    }\n    ParentBasedSampler.prototype.shouldSample = function (context, traceId, spanName, spanKind, attributes, links) {\n        var parentContext = trace.getSpanContext(context);\n        if (!parentContext || !isSpanContextValid(parentContext)) {\n            return this._root.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        if (parentContext.isRemote) {\n            if (parentContext.traceFlags & TraceFlags.SAMPLED) {\n                return this._remoteParentSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n            }\n            return this._remoteParentNotSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        if (parentContext.traceFlags & TraceFlags.SAMPLED) {\n            return this._localParentSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        return this._localParentNotSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n    };\n    ParentBasedSampler.prototype.toString = function () {\n        return \"ParentBased{root=\" + this._root.toString() + \", remoteParentSampled=\" + this._remoteParentSampled.toString() + \", remoteParentNotSampled=\" + this._remoteParentNotSampled.toString() + \", localParentSampled=\" + this._localParentSampled.toString() + \", localParentNotSampled=\" + this._localParentNotSampled.toString() + \"}\";\n    };\n    return ParentBasedSampler;\n}());\nexport { ParentBasedSampler };\n//# sourceMappingURL=ParentBasedSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isValidTraceId } from '@opentelemetry/api';\nimport { SamplingDecision } from '../Sampler';\n/** Sampler that samples a given fraction of traces based of trace id deterministically. */\nvar TraceIdRatioBasedSampler = /** @class */ (function () {\n    function TraceIdRatioBasedSampler(_ratio) {\n        if (_ratio === void 0) { _ratio = 0; }\n        this._ratio = _ratio;\n        this._ratio = this._normalize(_ratio);\n        this._upperBound = Math.floor(this._ratio * 0xffffffff);\n    }\n    TraceIdRatioBasedSampler.prototype.shouldSample = function (context, traceId) {\n        return {\n            decision: isValidTraceId(traceId) && this._accumulate(traceId) < this._upperBound\n                ? SamplingDecision.RECORD_AND_SAMPLED\n                : SamplingDecision.NOT_RECORD,\n        };\n    };\n    TraceIdRatioBasedSampler.prototype.toString = function () {\n        return \"TraceIdRatioBased{\" + this._ratio + \"}\";\n    };\n    TraceIdRatioBasedSampler.prototype._normalize = function (ratio) {\n        if (typeof ratio !== 'number' || isNaN(ratio))\n            return 0;\n        return ratio >= 1 ? 1 : ratio <= 0 ? 0 : ratio;\n    };\n    TraceIdRatioBasedSampler.prototype._accumulate = function (traceId) {\n        var accumulation = 0;\n        for (var i = 0; i < traceId.length / 8; i++) {\n            var pos = i * 8;\n            var part = parseInt(traceId.slice(pos, pos + 8), 16);\n            accumulation = (accumulation ^ part) >>> 0;\n        }\n        return accumulation;\n    };\n    return TraceIdRatioBasedSampler;\n}());\nexport { TraceIdRatioBasedSampler };\n//# sourceMappingURL=TraceIdRatioBasedSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { diag } from '@opentelemetry/api';\nimport { getEnv, TracesSamplerValues, } from '@opentelemetry/core';\nimport { AlwaysOffSampler } from './sampler/AlwaysOffSampler';\nimport { AlwaysOnSampler } from './sampler/AlwaysOnSampler';\nimport { ParentBasedSampler } from './sampler/ParentBasedSampler';\nimport { TraceIdRatioBasedSampler } from './sampler/TraceIdRatioBasedSampler';\nvar env = getEnv();\nvar FALLBACK_OTEL_TRACES_SAMPLER = TracesSamplerValues.AlwaysOn;\nvar DEFAULT_RATIO = 1;\n/**\n * Load default configuration. For fields with primitive values, any user-provided\n * value will override the corresponding default value. For fields with\n * non-primitive values (like `spanLimits`), the user-provided value will be\n * used to extend the default value.\n */\n// object needs to be wrapped in this function and called when needed otherwise\n// envs are parsed before tests are ran - causes tests using these envs to fail\nexport function loadDefaultConfig() {\n    return {\n        sampler: buildSamplerFromEnv(env),\n        forceFlushTimeoutMillis: 30000,\n        generalLimits: {\n            attributeValueLengthLimit: getEnv().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,\n            attributeCountLimit: getEnv().OTEL_ATTRIBUTE_COUNT_LIMIT,\n        },\n        spanLimits: {\n            attributeValueLengthLimit: getEnv().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,\n            attributeCountLimit: getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,\n            linkCountLimit: getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,\n            eventCountLimit: getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT,\n        },\n    };\n}\n/**\n * Based on environment, builds a sampler, complies with specification.\n * @param environment optional, by default uses getEnv(), but allows passing a value to reuse parsed environment\n */\nexport function buildSamplerFromEnv(environment) {\n    if (environment === void 0) { environment = getEnv(); }\n    switch (environment.OTEL_TRACES_SAMPLER) {\n        case TracesSamplerValues.AlwaysOn:\n            return new AlwaysOnSampler();\n        case TracesSamplerValues.AlwaysOff:\n            return new AlwaysOffSampler();\n        case TracesSamplerValues.ParentBasedAlwaysOn:\n            return new ParentBasedSampler({\n                root: new AlwaysOnSampler(),\n            });\n        case TracesSamplerValues.ParentBasedAlwaysOff:\n            return new ParentBasedSampler({\n                root: new AlwaysOffSampler(),\n            });\n        case TracesSamplerValues.TraceIdRatio:\n            return new TraceIdRatioBasedSampler(getSamplerProbabilityFromEnv(environment));\n        case TracesSamplerValues.ParentBasedTraceIdRatio:\n            return new ParentBasedSampler({\n                root: new TraceIdRatioBasedSampler(getSamplerProbabilityFromEnv(environment)),\n            });\n        default:\n            diag.error(\"OTEL_TRACES_SAMPLER value \\\"\" + environment.OTEL_TRACES_SAMPLER + \" invalid, defaulting to \" + FALLBACK_OTEL_TRACES_SAMPLER + \"\\\".\");\n            return new AlwaysOnSampler();\n    }\n}\nfunction getSamplerProbabilityFromEnv(environment) {\n    if (environment.OTEL_TRACES_SAMPLER_ARG === undefined ||\n        environment.OTEL_TRACES_SAMPLER_ARG === '') {\n        diag.error(\"OTEL_TRACES_SAMPLER_ARG is blank, defaulting to \" + DEFAULT_RATIO + \".\");\n        return DEFAULT_RATIO;\n    }\n    var probability = Number(environment.OTEL_TRACES_SAMPLER_ARG);\n    if (isNaN(probability)) {\n        diag.error(\"OTEL_TRACES_SAMPLER_ARG=\" + environment.OTEL_TRACES_SAMPLER_ARG + \" was given, but it is invalid, defaulting to \" + DEFAULT_RATIO + \".\");\n        return DEFAULT_RATIO;\n    }\n    if (probability < 0 || probability > 1) {\n        diag.error(\"OTEL_TRACES_SAMPLER_ARG=\" + environment.OTEL_TRACES_SAMPLER_ARG + \" was given, but it is out of range ([0..1]), defaulting to \" + DEFAULT_RATIO + \".\");\n        return DEFAULT_RATIO;\n    }\n    return probability;\n}\n//# sourceMappingURL=config.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { context, TraceFlags } from '@opentelemetry/api';\nimport { BindOnceFuture, ExportResultCode, getEnv, globalErrorHandler, suppressTracing, unrefTimer, } from '@opentelemetry/core';\n/**\n * Implementation of the {@link SpanProcessor} that batches spans exported by\n * the SDK then pushes them to the exporter pipeline.\n */\nvar BatchSpanProcessorBase = /** @class */ (function () {\n    function BatchSpanProcessorBase(_exporter, config) {\n        this._exporter = _exporter;\n        this._finishedSpans = [];\n        var env = getEnv();\n        this._maxExportBatchSize =\n            typeof (config === null || config === void 0 ? void 0 : config.maxExportBatchSize) === 'number'\n                ? config.maxExportBatchSize\n                : env.OTEL_BSP_MAX_EXPORT_BATCH_SIZE;\n        this._maxQueueSize =\n            typeof (config === null || config === void 0 ? void 0 : config.maxQueueSize) === 'number'\n                ? config.maxQueueSize\n                : env.OTEL_BSP_MAX_QUEUE_SIZE;\n        this._scheduledDelayMillis =\n            typeof (config === null || config === void 0 ? void 0 : config.scheduledDelayMillis) === 'number'\n                ? config.scheduledDelayMillis\n                : env.OTEL_BSP_SCHEDULE_DELAY;\n        this._exportTimeoutMillis =\n            typeof (config === null || config === void 0 ? void 0 : config.exportTimeoutMillis) === 'number'\n                ? config.exportTimeoutMillis\n                : env.OTEL_BSP_EXPORT_TIMEOUT;\n        this._shutdownOnce = new BindOnceFuture(this._shutdown, this);\n    }\n    BatchSpanProcessorBase.prototype.forceFlush = function () {\n        if (this._shutdownOnce.isCalled) {\n            return this._shutdownOnce.promise;\n        }\n        return this._flushAll();\n    };\n    // does nothing.\n    BatchSpanProcessorBase.prototype.onStart = function (_span, _parentContext) { };\n    BatchSpanProcessorBase.prototype.onEnd = function (span) {\n        if (this._shutdownOnce.isCalled) {\n            return;\n        }\n        if ((span.spanContext().traceFlags & TraceFlags.SAMPLED) === 0) {\n            return;\n        }\n        this._addToBuffer(span);\n    };\n    BatchSpanProcessorBase.prototype.shutdown = function () {\n        return this._shutdownOnce.call();\n    };\n    BatchSpanProcessorBase.prototype._shutdown = function () {\n        var _this = this;\n        return Promise.resolve()\n            .then(function () {\n            return _this.onShutdown();\n        })\n            .then(function () {\n            return _this._flushAll();\n        })\n            .then(function () {\n            return _this._exporter.shutdown();\n        });\n    };\n    /** Add a span in the buffer. */\n    BatchSpanProcessorBase.prototype._addToBuffer = function (span) {\n        if (this._finishedSpans.length >= this._maxQueueSize) {\n            // limit reached, drop span\n            return;\n        }\n        this._finishedSpans.push(span);\n        this._maybeStartTimer();\n    };\n    /**\n     * Send all spans to the exporter respecting the batch size limit\n     * This function is used only on forceFlush or shutdown,\n     * for all other cases _flush should be used\n     * */\n    BatchSpanProcessorBase.prototype._flushAll = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var promises = [];\n            // calculate number of batches\n            var count = Math.ceil(_this._finishedSpans.length / _this._maxExportBatchSize);\n            for (var i = 0, j = count; i < j; i++) {\n                promises.push(_this._flushOneBatch());\n            }\n            Promise.all(promises)\n                .then(function () {\n                resolve();\n            })\n                .catch(reject);\n        });\n    };\n    BatchSpanProcessorBase.prototype._flushOneBatch = function () {\n        var _this = this;\n        this._clearTimer();\n        if (this._finishedSpans.length === 0) {\n            return Promise.resolve();\n        }\n        return new Promise(function (resolve, reject) {\n            var timer = setTimeout(function () {\n                // don't wait anymore for export, this way the next batch can start\n                reject(new Error('Timeout'));\n            }, _this._exportTimeoutMillis);\n            // prevent downstream exporter calls from generating spans\n            context.with(suppressTracing(context.active()), function () {\n                // Reset the finished spans buffer here because the next invocations of the _flush method\n                // could pass the same finished spans to the exporter if the buffer is cleared\n                // outside of the execution of this callback.\n                _this._exporter.export(_this._finishedSpans.splice(0, _this._maxExportBatchSize), function (result) {\n                    var _a;\n                    clearTimeout(timer);\n                    if (result.code === ExportResultCode.SUCCESS) {\n                        resolve();\n                    }\n                    else {\n                        reject((_a = result.error) !== null && _a !== void 0 ? _a : new Error('BatchSpanProcessor: span export failed'));\n                    }\n                });\n            });\n        });\n    };\n    BatchSpanProcessorBase.prototype._maybeStartTimer = function () {\n        var _this = this;\n        if (this._timer !== undefined)\n            return;\n        this._timer = setTimeout(function () {\n            _this._flushOneBatch()\n                .then(function () {\n                if (_this._finishedSpans.length > 0) {\n                    _this._clearTimer();\n                    _this._maybeStartTimer();\n                }\n            })\n                .catch(function (e) {\n                globalErrorHandler(e);\n            });\n        }, this._scheduledDelayMillis);\n        unrefTimer(this._timer);\n    };\n    BatchSpanProcessorBase.prototype._clearTimer = function () {\n        if (this._timer !== undefined) {\n            clearTimeout(this._timer);\n            this._timer = undefined;\n        }\n    };\n    return BatchSpanProcessorBase;\n}());\nexport { BatchSpanProcessorBase };\n//# sourceMappingURL=BatchSpanProcessorBase.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BatchSpanProcessorBase } from '../../../export/BatchSpanProcessorBase';\nvar BatchSpanProcessor = /** @class */ (function (_super) {\n    __extends(BatchSpanProcessor, _super);\n    function BatchSpanProcessor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BatchSpanProcessor.prototype.onShutdown = function () { };\n    return BatchSpanProcessor;\n}(BatchSpanProcessorBase));\nexport { BatchSpanProcessor };\n//# sourceMappingURL=BatchSpanProcessor.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar SPAN_ID_BYTES = 8;\nvar TRACE_ID_BYTES = 16;\nvar RandomIdGenerator = /** @class */ (function () {\n    function RandomIdGenerator() {\n        /**\n         * Returns a random 16-byte trace ID formatted/encoded as a 32 lowercase hex\n         * characters corresponding to 128 bits.\n         */\n        this.generateTraceId = getIdGenerator(TRACE_ID_BYTES);\n        /**\n         * Returns a random 8-byte span ID formatted/encoded as a 16 lowercase hex\n         * characters corresponding to 64 bits.\n         */\n        this.generateSpanId = getIdGenerator(SPAN_ID_BYTES);\n    }\n    return RandomIdGenerator;\n}());\nexport { RandomIdGenerator };\nvar SHARED_BUFFER = Buffer.allocUnsafe(TRACE_ID_BYTES);\nfunction getIdGenerator(bytes) {\n    return function generateId() {\n        for (var i = 0; i < bytes / 4; i++) {\n            // unsigned right shift drops decimal part of the number\n            // it is required because if a number between 2**32 and 2**32 - 1 is generated, an out of range error is thrown by writeUInt32BE\n            SHARED_BUFFER.writeUInt32BE((Math.random() * Math.pow(2, 32)) >>> 0, i * 4);\n        }\n        // If buffer is all 0, set the last byte to 1 to guarantee a valid w3c id is generated\n        for (var i = 0; i < bytes; i++) {\n            if (SHARED_BUFFER[i] > 0) {\n                break;\n            }\n            else if (i === bytes - 1) {\n                SHARED_BUFFER[bytes - 1] = 1;\n            }\n        }\n        return SHARED_BUFFER.toString('hex', 0, bytes);\n    };\n}\n//# sourceMappingURL=RandomIdGenerator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as api from '@opentelemetry/api';\nimport { sanitizeAttributes, isTracingSuppressed, AnchoredClock, otperformance, } from '@opentelemetry/core';\nimport { Span } from './Span';\nimport { mergeConfig } from './utility';\nimport { RandomIdGenerator } from './platform';\n/**\n * This class represents a basic tracer.\n */\nvar Tracer = /** @class */ (function () {\n    /**\n     * Constructs a new Tracer instance.\n     */\n    function Tracer(instrumentationLibrary, config, _tracerProvider) {\n        this._tracerProvider = _tracerProvider;\n        var localConfig = mergeConfig(config);\n        this._sampler = localConfig.sampler;\n        this._generalLimits = localConfig.generalLimits;\n        this._spanLimits = localConfig.spanLimits;\n        this._idGenerator = config.idGenerator || new RandomIdGenerator();\n        this.resource = _tracerProvider.resource;\n        this.instrumentationLibrary = instrumentationLibrary;\n    }\n    /**\n     * Starts a new Span or returns the default NoopSpan based on the sampling\n     * decision.\n     */\n    Tracer.prototype.startSpan = function (name, options, context) {\n        var _a, _b;\n        if (options === void 0) { options = {}; }\n        if (context === void 0) { context = api.context.active(); }\n        // remove span from context in case a root span is requested via options\n        if (options.root) {\n            context = api.trace.deleteSpan(context);\n        }\n        var parentSpan = api.trace.getSpan(context);\n        var clock;\n        if (parentSpan) {\n            clock = parentSpan['_clock'];\n        }\n        if (!clock) {\n            clock = new AnchoredClock(Date, otperformance);\n            if (parentSpan) {\n                parentSpan['_clock'] = clock;\n            }\n        }\n        if (isTracingSuppressed(context)) {\n            api.diag.debug('Instrumentation suppressed, returning Noop Span');\n            var nonRecordingSpan = api.trace.wrapSpanContext(api.INVALID_SPAN_CONTEXT);\n            nonRecordingSpan['_clock'] = clock;\n            return nonRecordingSpan;\n        }\n        var parentSpanContext = parentSpan === null || parentSpan === void 0 ? void 0 : parentSpan.spanContext();\n        var spanId = this._idGenerator.generateSpanId();\n        var traceId;\n        var traceState;\n        var parentSpanId;\n        if (!parentSpanContext || !api.trace.isSpanContextValid(parentSpanContext)) {\n            // New root span.\n            traceId = this._idGenerator.generateTraceId();\n        }\n        else {\n            // New child span.\n            traceId = parentSpanContext.traceId;\n            traceState = parentSpanContext.traceState;\n            parentSpanId = parentSpanContext.spanId;\n        }\n        var spanKind = (_a = options.kind) !== null && _a !== void 0 ? _a : api.SpanKind.INTERNAL;\n        var links = ((_b = options.links) !== null && _b !== void 0 ? _b : []).map(function (link) {\n            return {\n                context: link.context,\n                attributes: sanitizeAttributes(link.attributes),\n            };\n        });\n        var attributes = sanitizeAttributes(options.attributes);\n        // make sampling decision\n        var samplingResult = this._sampler.shouldSample(context, traceId, name, spanKind, attributes, links);\n        var traceFlags = samplingResult.decision === api.SamplingDecision.RECORD_AND_SAMPLED\n            ? api.TraceFlags.SAMPLED\n            : api.TraceFlags.NONE;\n        var spanContext = { traceId: traceId, spanId: spanId, traceFlags: traceFlags, traceState: traceState };\n        if (samplingResult.decision === api.SamplingDecision.NOT_RECORD) {\n            api.diag.debug('Recording is off, propagating context in a non-recording span');\n            var nonRecordingSpan = api.trace.wrapSpanContext(spanContext);\n            nonRecordingSpan['_clock'] = clock;\n            return nonRecordingSpan;\n        }\n        var span = new Span(this, context, name, spanContext, spanKind, parentSpanId, links, options.startTime, clock);\n        // Set initial span attributes. The attributes object may have been mutated\n        // by the sampler, so we sanitize the merged attributes before setting them.\n        var initAttributes = sanitizeAttributes(Object.assign(attributes, samplingResult.attributes));\n        span.setAttributes(initAttributes);\n        return span;\n    };\n    Tracer.prototype.startActiveSpan = function (name, arg2, arg3, arg4) {\n        var opts;\n        var ctx;\n        var fn;\n        if (arguments.length < 2) {\n            return;\n        }\n        else if (arguments.length === 2) {\n            fn = arg2;\n        }\n        else if (arguments.length === 3) {\n            opts = arg2;\n            fn = arg3;\n        }\n        else {\n            opts = arg2;\n            ctx = arg3;\n            fn = arg4;\n        }\n        var parentContext = ctx !== null && ctx !== void 0 ? ctx : api.context.active();\n        var span = this.startSpan(name, opts, parentContext);\n        var contextWithSpanSet = api.trace.setSpan(parentContext, span);\n        return api.context.with(contextWithSpanSet, fn, undefined, span);\n    };\n    /** Returns the active {@link GeneralLimits}. */\n    Tracer.prototype.getGeneralLimits = function () {\n        return this._generalLimits;\n    };\n    /** Returns the active {@link SpanLimits}. */\n    Tracer.prototype.getSpanLimits = function () {\n        return this._spanLimits;\n    };\n    Tracer.prototype.getActiveSpanProcessor = function () {\n        return this._tracerProvider.getActiveSpanProcessor();\n    };\n    return Tracer;\n}());\nexport { Tracer };\n//# sourceMappingURL=Tracer.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { buildSamplerFromEnv, loadDefaultConfig } from './config';\nimport { DEFAULT_ATTRIBUTE_COUNT_LIMIT, DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT, getEnvWithoutDefaults, } from '@opentelemetry/core';\n/**\n * Function to merge Default configuration (as specified in './config') with\n * user provided configurations.\n */\nexport function mergeConfig(userConfig) {\n    var perInstanceDefaults = {\n        sampler: buildSamplerFromEnv(),\n    };\n    var DEFAULT_CONFIG = loadDefaultConfig();\n    var target = Object.assign({}, DEFAULT_CONFIG, perInstanceDefaults, userConfig);\n    target.generalLimits = Object.assign({}, DEFAULT_CONFIG.generalLimits, userConfig.generalLimits || {});\n    target.spanLimits = Object.assign({}, DEFAULT_CONFIG.spanLimits, userConfig.spanLimits || {});\n    return target;\n}\n/**\n * When general limits are provided and model specific limits are not,\n * configures the model specific limits by using the values from the general ones.\n * @param userConfig User provided tracer configuration\n */\nexport function reconfigureLimits(userConfig) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n    var spanLimits = Object.assign({}, userConfig.spanLimits);\n    var parsedEnvConfig = getEnvWithoutDefaults();\n    /**\n     * Reassign span attribute count limit to use first non null value defined by user or use default value\n     */\n    spanLimits.attributeCountLimit =\n        (_f = (_e = (_d = (_b = (_a = userConfig.spanLimits) === null || _a === void 0 ? void 0 : _a.attributeCountLimit) !== null && _b !== void 0 ? _b : (_c = userConfig.generalLimits) === null || _c === void 0 ? void 0 : _c.attributeCountLimit) !== null && _d !== void 0 ? _d : parsedEnvConfig.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT) !== null && _e !== void 0 ? _e : parsedEnvConfig.OTEL_ATTRIBUTE_COUNT_LIMIT) !== null && _f !== void 0 ? _f : DEFAULT_ATTRIBUTE_COUNT_LIMIT;\n    /**\n     * Reassign span attribute value length limit to use first non null value defined by user or use default value\n     */\n    spanLimits.attributeValueLengthLimit =\n        (_m = (_l = (_k = (_h = (_g = userConfig.spanLimits) === null || _g === void 0 ? void 0 : _g.attributeValueLengthLimit) !== null && _h !== void 0 ? _h : (_j = userConfig.generalLimits) === null || _j === void 0 ? void 0 : _j.attributeValueLengthLimit) !== null && _k !== void 0 ? _k : parsedEnvConfig.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT) !== null && _l !== void 0 ? _l : parsedEnvConfig.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT) !== null && _m !== void 0 ? _m : DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT;\n    return Object.assign({}, userConfig, { spanLimits: spanLimits });\n}\n//# sourceMappingURL=utility.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { context, diag, propagation, trace, } from '@opentelemetry/api';\nimport { CompositePropagator, W3CBaggagePropagator, W3CTraceContextPropagator, getEnv, merge, } from '@opentelemetry/core';\nimport { Resource } from '@opentelemetry/resources';\nimport { Tracer } from '.';\nimport { loadDefaultConfig } from './config';\nimport { MultiSpanProcessor } from './MultiSpanProcessor';\nimport { NoopSpanProcessor } from './export/NoopSpanProcessor';\nimport { BatchSpanProcessor } from './platform';\nimport { reconfigureLimits } from './utility';\nexport var ForceFlushState;\n(function (ForceFlushState) {\n    ForceFlushState[ForceFlushState[\"resolved\"] = 0] = \"resolved\";\n    ForceFlushState[ForceFlushState[\"timeout\"] = 1] = \"timeout\";\n    ForceFlushState[ForceFlushState[\"error\"] = 2] = \"error\";\n    ForceFlushState[ForceFlushState[\"unresolved\"] = 3] = \"unresolved\";\n})(ForceFlushState || (ForceFlushState = {}));\n/**\n * This class represents a basic tracer provider which platform libraries can extend\n */\nvar BasicTracerProvider = /** @class */ (function () {\n    function BasicTracerProvider(config) {\n        if (config === void 0) { config = {}; }\n        var _a;\n        this._registeredSpanProcessors = [];\n        this._tracers = new Map();\n        var mergedConfig = merge({}, loadDefaultConfig(), reconfigureLimits(config));\n        this.resource = (_a = mergedConfig.resource) !== null && _a !== void 0 ? _a : Resource.empty();\n        this.resource = Resource.default().merge(this.resource);\n        this._config = Object.assign({}, mergedConfig, {\n            resource: this.resource,\n        });\n        var defaultExporter = this._buildExporterFromEnv();\n        if (defaultExporter !== undefined) {\n            var batchProcessor = new BatchSpanProcessor(defaultExporter);\n            this.activeSpanProcessor = batchProcessor;\n        }\n        else {\n            this.activeSpanProcessor = new NoopSpanProcessor();\n        }\n    }\n    BasicTracerProvider.prototype.getTracer = function (name, version, options) {\n        var key = name + \"@\" + (version || '') + \":\" + ((options === null || options === void 0 ? void 0 : options.schemaUrl) || '');\n        if (!this._tracers.has(key)) {\n            this._tracers.set(key, new Tracer({ name: name, version: version, schemaUrl: options === null || options === void 0 ? void 0 : options.schemaUrl }, this._config, this));\n        }\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        return this._tracers.get(key);\n    };\n    /**\n     * Adds a new {@link SpanProcessor} to this tracer.\n     * @param spanProcessor the new SpanProcessor to be added.\n     */\n    BasicTracerProvider.prototype.addSpanProcessor = function (spanProcessor) {\n        if (this._registeredSpanProcessors.length === 0) {\n            // since we might have enabled by default a batchProcessor, we disable it\n            // before adding the new one\n            this.activeSpanProcessor\n                .shutdown()\n                .catch(function (err) {\n                return diag.error('Error while trying to shutdown current span processor', err);\n            });\n        }\n        this._registeredSpanProcessors.push(spanProcessor);\n        this.activeSpanProcessor = new MultiSpanProcessor(this._registeredSpanProcessors);\n    };\n    BasicTracerProvider.prototype.getActiveSpanProcessor = function () {\n        return this.activeSpanProcessor;\n    };\n    /**\n     * Register this TracerProvider for use with the OpenTelemetry API.\n     * Undefined values may be replaced with defaults, and\n     * null values will be skipped.\n     *\n     * @param config Configuration object for SDK registration\n     */\n    BasicTracerProvider.prototype.register = function (config) {\n        if (config === void 0) { config = {}; }\n        trace.setGlobalTracerProvider(this);\n        if (config.propagator === undefined) {\n            config.propagator = this._buildPropagatorFromEnv();\n        }\n        if (config.contextManager) {\n            context.setGlobalContextManager(config.contextManager);\n        }\n        if (config.propagator) {\n            propagation.setGlobalPropagator(config.propagator);\n        }\n    };\n    BasicTracerProvider.prototype.forceFlush = function () {\n        var timeout = this._config.forceFlushTimeoutMillis;\n        var promises = this._registeredSpanProcessors.map(function (spanProcessor) {\n            return new Promise(function (resolve) {\n                var state;\n                var timeoutInterval = setTimeout(function () {\n                    resolve(new Error(\"Span processor did not completed within timeout period of \" + timeout + \" ms\"));\n                    state = ForceFlushState.timeout;\n                }, timeout);\n                spanProcessor\n                    .forceFlush()\n                    .then(function () {\n                    clearTimeout(timeoutInterval);\n                    if (state !== ForceFlushState.timeout) {\n                        state = ForceFlushState.resolved;\n                        resolve(state);\n                    }\n                })\n                    .catch(function (error) {\n                    clearTimeout(timeoutInterval);\n                    state = ForceFlushState.error;\n                    resolve(error);\n                });\n            });\n        });\n        return new Promise(function (resolve, reject) {\n            Promise.all(promises)\n                .then(function (results) {\n                var errors = results.filter(function (result) { return result !== ForceFlushState.resolved; });\n                if (errors.length > 0) {\n                    reject(errors);\n                }\n                else {\n                    resolve();\n                }\n            })\n                .catch(function (error) { return reject([error]); });\n        });\n    };\n    BasicTracerProvider.prototype.shutdown = function () {\n        return this.activeSpanProcessor.shutdown();\n    };\n    /**\n     * TS cannot yet infer the type of this.constructor:\n     * https://github.com/Microsoft/TypeScript/issues/3841#issuecomment-337560146\n     * There is no need to override either of the getters in your child class.\n     * The type of the registered component maps should be the same across all\n     * classes in the inheritance tree.\n     */\n    BasicTracerProvider.prototype._getPropagator = function (name) {\n        var _a;\n        return (_a = (this.constructor._registeredPropagators).get(name)) === null || _a === void 0 ? void 0 : _a();\n    };\n    BasicTracerProvider.prototype._getSpanExporter = function (name) {\n        var _a;\n        return (_a = (this.constructor._registeredExporters).get(name)) === null || _a === void 0 ? void 0 : _a();\n    };\n    BasicTracerProvider.prototype._buildPropagatorFromEnv = function () {\n        var _this = this;\n        // per spec, propagators from env must be deduplicated\n        var uniquePropagatorNames = Array.from(new Set(getEnv().OTEL_PROPAGATORS));\n        var propagators = uniquePropagatorNames.map(function (name) {\n            var propagator = _this._getPropagator(name);\n            if (!propagator) {\n                diag.warn(\"Propagator \\\"\" + name + \"\\\" requested through environment variable is unavailable.\");\n            }\n            return propagator;\n        });\n        var validPropagators = propagators.reduce(function (list, item) {\n            if (item) {\n                list.push(item);\n            }\n            return list;\n        }, []);\n        if (validPropagators.length === 0) {\n            return;\n        }\n        else if (uniquePropagatorNames.length === 1) {\n            return validPropagators[0];\n        }\n        else {\n            return new CompositePropagator({\n                propagators: validPropagators,\n            });\n        }\n    };\n    BasicTracerProvider.prototype._buildExporterFromEnv = function () {\n        var exporterName = getEnv().OTEL_TRACES_EXPORTER;\n        if (exporterName === 'none')\n            return;\n        var exporter = this._getSpanExporter(exporterName);\n        if (!exporter) {\n            diag.error(\"Exporter \\\"\" + exporterName + \"\\\" requested through environment variable is unavailable.\");\n        }\n        return exporter;\n    };\n    BasicTracerProvider._registeredPropagators = new Map([\n        ['tracecontext', function () { return new W3CTraceContextPropagator(); }],\n        ['baggage', function () { return new W3CBaggagePropagator(); }],\n    ]);\n    BasicTracerProvider._registeredExporters = new Map();\n    return BasicTracerProvider;\n}());\nexport { BasicTracerProvider };\n//# sourceMappingURL=BasicTracerProvider.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';\nimport { Resource } from '../../Resource';\nimport { platform, release } from 'os';\n/**\n * OSDetector detects the resources related to the operating system (OS) on\n * which the process represented by this resource is running.\n */\nvar OSDetector = /** @class */ (function () {\n    function OSDetector() {\n    }\n    OSDetector.prototype.detect = function (_config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var attributes;\n            var _a;\n            return __generator(this, function (_b) {\n                attributes = (_a = {},\n                    _a[SemanticResourceAttributes.OS_TYPE] = this._normalizeType(platform()),\n                    _a[SemanticResourceAttributes.OS_VERSION] = release(),\n                    _a);\n                return [2 /*return*/, new Resource(attributes)];\n            });\n        });\n    };\n    OSDetector.prototype._normalizeType = function (nodePlatform) {\n        // Maps from https://nodejs.org/api/os.html#osplatform to arch values in spec:\n        // https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/resource/semantic_conventions/os.md\n        switch (nodePlatform) {\n            case 'sunos':\n                return 'solaris';\n            case 'win32':\n                return 'windows';\n            default:\n                return nodePlatform;\n        }\n    };\n    return OSDetector;\n}());\nexport var osDetector = new OSDetector();\n//# sourceMappingURL=OSDetector.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';\nimport { Resource } from '../../Resource';\nimport { arch, hostname } from 'os';\n/**\n * HostDetector detects the resources related to the host current process is\n * running on. Currently only non-cloud-based attributes are included.\n */\nvar HostDetector = /** @class */ (function () {\n    function HostDetector() {\n    }\n    HostDetector.prototype.detect = function (_config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var attributes;\n            var _a;\n            return __generator(this, function (_b) {\n                attributes = (_a = {},\n                    _a[SemanticResourceAttributes.HOST_NAME] = hostname(),\n                    _a[SemanticResourceAttributes.HOST_ARCH] = this._normalizeArch(arch()),\n                    _a);\n                return [2 /*return*/, new Resource(attributes)];\n            });\n        });\n    };\n    HostDetector.prototype._normalizeArch = function (nodeArchString) {\n        // Maps from https://nodejs.org/api/os.html#osarch to arch values in spec:\n        // https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/resource/semantic_conventions/host.md\n        switch (nodeArchString) {\n            case 'arm':\n                return 'arm32';\n            case 'ppc':\n                return 'ppc32';\n            case 'x64':\n                return 'amd64';\n            default:\n                return nodeArchString;\n        }\n    };\n    return HostDetector;\n}());\nexport var hostDetector = new HostDetector();\n//# sourceMappingURL=HostDetector.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';\nimport { SDK_INFO } from '@opentelemetry/core';\nimport { defaultServiceName } from './platform';\n/**\n * A Resource describes the entity for which a signals (metrics or trace) are\n * collected.\n */\nvar Resource = /** @class */ (function () {\n    function Resource(\n    /**\n     * A dictionary of attributes with string keys and values that provide\n     * information about the entity as numbers, strings or booleans\n     * TODO: Consider to add check/validation on attributes.\n     */\n    attributes) {\n        this.attributes = attributes;\n    }\n    /**\n     * Returns an empty Resource\n     */\n    Resource.empty = function () {\n        return Resource.EMPTY;\n    };\n    /**\n     * Returns a Resource that indentifies the SDK in use.\n     */\n    Resource.default = function () {\n        var _a;\n        return new Resource((_a = {},\n            _a[SemanticResourceAttributes.SERVICE_NAME] = defaultServiceName(),\n            _a[SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE] = SDK_INFO[SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],\n            _a[SemanticResourceAttributes.TELEMETRY_SDK_NAME] = SDK_INFO[SemanticResourceAttributes.TELEMETRY_SDK_NAME],\n            _a[SemanticResourceAttributes.TELEMETRY_SDK_VERSION] = SDK_INFO[SemanticResourceAttributes.TELEMETRY_SDK_VERSION],\n            _a));\n    };\n    /**\n     * Returns a new, merged {@link Resource} by merging the current Resource\n     * with the other Resource. In case of a collision, other Resource takes\n     * precedence.\n     *\n     * @param other the Resource that will be merged with this.\n     * @returns the newly merged Resource.\n     */\n    Resource.prototype.merge = function (other) {\n        if (!other || !Object.keys(other.attributes).length)\n            return this;\n        // SpanAttributes from resource overwrite attributes from other resource.\n        var mergedAttributes = Object.assign({}, this.attributes, other.attributes);\n        return new Resource(mergedAttributes);\n    };\n    Resource.EMPTY = new Resource({});\n    return Resource;\n}());\nexport { Resource };\n//# sourceMappingURL=Resource.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function defaultServiceName() {\n    return \"unknown_service:\" + process.argv0;\n}\n//# sourceMappingURL=default-service-name.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { diag } from '@opentelemetry/api';\nimport { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';\nimport { Resource } from '..';\n/**\n * BrowserDetector will be used to detect the resources related to browser.\n */\nvar BrowserDetector = /** @class */ (function () {\n    function BrowserDetector() {\n    }\n    BrowserDetector.prototype.detect = function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var isBrowser, browserResource;\n            var _a;\n            return __generator(this, function (_b) {\n                isBrowser = typeof navigator !== 'undefined';\n                if (!isBrowser) {\n                    return [2 /*return*/, Resource.empty()];\n                }\n                browserResource = (_a = {},\n                    _a[SemanticResourceAttributes.PROCESS_RUNTIME_NAME] = 'browser',\n                    _a[SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION] = 'Web Browser',\n                    _a[SemanticResourceAttributes.PROCESS_RUNTIME_VERSION] = navigator.userAgent,\n                    _a);\n                return [2 /*return*/, this._getResourceAttributes(browserResource, config)];\n            });\n        });\n    };\n    /**\n     * Validates process resource attribute map from process variables\n     *\n     * @param browserResource The un-sanitized resource attributes from process as key/value pairs.\n     * @param config: Config\n     * @returns The sanitized resource attributes.\n     */\n    BrowserDetector.prototype._getResourceAttributes = function (browserResource, _config) {\n        if (browserResource[SemanticResourceAttributes.PROCESS_RUNTIME_VERSION] === '') {\n            diag.debug('BrowserDetector failed: Unable to find required browser resources. ');\n            return Resource.empty();\n        }\n        else {\n            return new Resource(__assign({}, browserResource));\n        }\n    };\n    return BrowserDetector;\n}());\nexport var browserDetector = new BrowserDetector();\n//# sourceMappingURL=BrowserDetector.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { diag } from '@opentelemetry/api';\nimport { getEnv } from '@opentelemetry/core';\nimport { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';\nimport { Resource } from '../Resource';\n/**\n * EnvDetector can be used to detect the presence of and create a Resource\n * from the OTEL_RESOURCE_ATTRIBUTES environment variable.\n */\nvar EnvDetector = /** @class */ (function () {\n    function EnvDetector() {\n        // Type, attribute keys, and attribute values should not exceed 256 characters.\n        this._MAX_LENGTH = 255;\n        // OTEL_RESOURCE_ATTRIBUTES is a comma-separated list of attributes.\n        this._COMMA_SEPARATOR = ',';\n        // OTEL_RESOURCE_ATTRIBUTES contains key value pair separated by '='.\n        this._LABEL_KEY_VALUE_SPLITTER = '=';\n        this._ERROR_MESSAGE_INVALID_CHARS = 'should be a ASCII string with a length greater than 0 and not exceed ' +\n            this._MAX_LENGTH +\n            ' characters.';\n        this._ERROR_MESSAGE_INVALID_VALUE = 'should be a ASCII string with a length not exceed ' +\n            this._MAX_LENGTH +\n            ' characters.';\n    }\n    /**\n     * Returns a {@link Resource} populated with attributes from the\n     * OTEL_RESOURCE_ATTRIBUTES environment variable. Note this is an async\n     * function to conform to the Detector interface.\n     *\n     * @param config The resource detection config\n     */\n    EnvDetector.prototype.detect = function (_config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var attributes, env, rawAttributes, serviceName, parsedAttributes;\n            return __generator(this, function (_a) {\n                attributes = {};\n                env = getEnv();\n                rawAttributes = env.OTEL_RESOURCE_ATTRIBUTES;\n                serviceName = env.OTEL_SERVICE_NAME;\n                if (rawAttributes) {\n                    try {\n                        parsedAttributes = this._parseResourceAttributes(rawAttributes);\n                        Object.assign(attributes, parsedAttributes);\n                    }\n                    catch (e) {\n                        diag.debug(\"EnvDetector failed: \" + e.message);\n                    }\n                }\n                if (serviceName) {\n                    attributes[SemanticResourceAttributes.SERVICE_NAME] = serviceName;\n                }\n                return [2 /*return*/, new Resource(attributes)];\n            });\n        });\n    };\n    /**\n     * Creates an attribute map from the OTEL_RESOURCE_ATTRIBUTES environment\n     * variable.\n     *\n     * OTEL_RESOURCE_ATTRIBUTES: A comma-separated list of attributes describing\n     * the source in more detail, e.g. “key1=val1,key2=val2”. Domain names and\n     * paths are accepted as attribute keys. Values may be quoted or unquoted in\n     * general. If a value contains whitespaces, =, or \" characters, it must\n     * always be quoted.\n     *\n     * @param rawEnvAttributes The resource attributes as a comma-seperated list\n     * of key/value pairs.\n     * @returns The sanitized resource attributes.\n     */\n    EnvDetector.prototype._parseResourceAttributes = function (rawEnvAttributes) {\n        var e_1, _a;\n        if (!rawEnvAttributes)\n            return {};\n        var attributes = {};\n        var rawAttributes = rawEnvAttributes.split(this._COMMA_SEPARATOR, -1);\n        try {\n            for (var rawAttributes_1 = __values(rawAttributes), rawAttributes_1_1 = rawAttributes_1.next(); !rawAttributes_1_1.done; rawAttributes_1_1 = rawAttributes_1.next()) {\n                var rawAttribute = rawAttributes_1_1.value;\n                var keyValuePair = rawAttribute.split(this._LABEL_KEY_VALUE_SPLITTER, -1);\n                if (keyValuePair.length !== 2) {\n                    continue;\n                }\n                var _b = __read(keyValuePair, 2), key = _b[0], value = _b[1];\n                // Leading and trailing whitespaces are trimmed.\n                key = key.trim();\n                value = value.trim().split('^\"|\"$').join('');\n                if (!this._isValidAndNotEmpty(key)) {\n                    throw new Error(\"Attribute key \" + this._ERROR_MESSAGE_INVALID_CHARS);\n                }\n                if (!this._isValid(value)) {\n                    throw new Error(\"Attribute value \" + this._ERROR_MESSAGE_INVALID_VALUE);\n                }\n                attributes[key] = value;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (rawAttributes_1_1 && !rawAttributes_1_1.done && (_a = rawAttributes_1.return)) _a.call(rawAttributes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return attributes;\n    };\n    /**\n     * Determines whether the given String is a valid printable ASCII string with\n     * a length not exceed _MAX_LENGTH characters.\n     *\n     * @param str The String to be validated.\n     * @returns Whether the String is valid.\n     */\n    EnvDetector.prototype._isValid = function (name) {\n        return name.length <= this._MAX_LENGTH && this._isPrintableString(name);\n    };\n    EnvDetector.prototype._isPrintableString = function (str) {\n        for (var i = 0; i < str.length; i++) {\n            var ch = str.charAt(i);\n            if (ch <= ' ' || ch >= '~') {\n                return false;\n            }\n        }\n        return true;\n    };\n    /**\n     * Determines whether the given String is a valid printable ASCII string with\n     * a length greater than 0 and not exceed _MAX_LENGTH characters.\n     *\n     * @param str The String to be validated.\n     * @returns Whether the String is valid and not empty.\n     */\n    EnvDetector.prototype._isValidAndNotEmpty = function (str) {\n        return str.length > 0 && this._isValid(str);\n    };\n    return EnvDetector;\n}());\nexport var envDetector = new EnvDetector();\n//# sourceMappingURL=EnvDetector.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { diag } from '@opentelemetry/api';\nimport { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';\nimport { Resource } from '../Resource';\n/**\n * ProcessDetector will be used to detect the resources related current process running\n * and being instrumented from the NodeJS Process module.\n */\nvar ProcessDetector = /** @class */ (function () {\n    function ProcessDetector() {\n    }\n    ProcessDetector.prototype.detect = function (config) {\n        return __awaiter(this, void 0, void 0, function () {\n            var processResource;\n            var _a;\n            return __generator(this, function (_b) {\n                // Skip if not in Node.js environment.\n                if (typeof process !== 'object') {\n                    return [2 /*return*/, Resource.empty()];\n                }\n                processResource = (_a = {},\n                    _a[SemanticResourceAttributes.PROCESS_PID] = process.pid,\n                    _a[SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME] = process.title || '',\n                    _a[SemanticResourceAttributes.PROCESS_COMMAND] = process.argv[1] || '',\n                    _a[SemanticResourceAttributes.PROCESS_COMMAND_LINE] = process.argv.join(' ') || '',\n                    _a[SemanticResourceAttributes.PROCESS_RUNTIME_VERSION] = process.versions.node,\n                    _a[SemanticResourceAttributes.PROCESS_RUNTIME_NAME] = 'nodejs',\n                    _a[SemanticResourceAttributes.PROCESS_RUNTIME_DESCRIPTION] = 'Node.js',\n                    _a);\n                return [2 /*return*/, this._getResourceAttributes(processResource, config)];\n            });\n        });\n    };\n    /**\n     * Validates process resource attribute map from process varaibls\n     *\n     * @param processResource The unsantized resource attributes from process as key/value pairs.\n     * @param config: Config\n     * @returns The sanitized resource attributes.\n     */\n    ProcessDetector.prototype._getResourceAttributes = function (processResource, _config) {\n        if (processResource[SemanticResourceAttributes.PROCESS_EXECUTABLE_NAME] ===\n            '' ||\n            processResource[SemanticResourceAttributes.PROCESS_EXECUTABLE_PATH] ===\n                '' ||\n            processResource[SemanticResourceAttributes.PROCESS_COMMAND] === '' ||\n            processResource[SemanticResourceAttributes.PROCESS_COMMAND_LINE] === '' ||\n            processResource[SemanticResourceAttributes.PROCESS_RUNTIME_VERSION] === '') {\n            diag.debug('ProcessDetector failed: Unable to find required process resources. ');\n            return Resource.empty();\n        }\n        else {\n            return new Resource(__assign({}, processResource));\n        }\n    };\n    return ProcessDetector;\n}());\nexport var processDetector = new ProcessDetector();\n//# sourceMappingURL=ProcessDetector.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { globalErrorHandler } from '@opentelemetry/core';\n/**\n * Implementation of the {@link SpanProcessor} that simply forwards all\n * received events to a list of {@link SpanProcessor}s.\n */\nvar MultiSpanProcessor = /** @class */ (function () {\n    function MultiSpanProcessor(_spanProcessors) {\n        this._spanProcessors = _spanProcessors;\n    }\n    MultiSpanProcessor.prototype.forceFlush = function () {\n        var e_1, _a;\n        var promises = [];\n        try {\n            for (var _b = __values(this._spanProcessors), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var spanProcessor = _c.value;\n                promises.push(spanProcessor.forceFlush());\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return new Promise(function (resolve) {\n            Promise.all(promises)\n                .then(function () {\n                resolve();\n            })\n                .catch(function (error) {\n                globalErrorHandler(error || new Error('MultiSpanProcessor: forceFlush failed'));\n                resolve();\n            });\n        });\n    };\n    MultiSpanProcessor.prototype.onStart = function (span, context) {\n        var e_2, _a;\n        try {\n            for (var _b = __values(this._spanProcessors), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var spanProcessor = _c.value;\n                spanProcessor.onStart(span, context);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    MultiSpanProcessor.prototype.onEnd = function (span) {\n        var e_3, _a;\n        try {\n            for (var _b = __values(this._spanProcessors), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var spanProcessor = _c.value;\n                spanProcessor.onEnd(span);\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    MultiSpanProcessor.prototype.shutdown = function () {\n        var e_4, _a;\n        var promises = [];\n        try {\n            for (var _b = __values(this._spanProcessors), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var spanProcessor = _c.value;\n                promises.push(spanProcessor.shutdown());\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return new Promise(function (resolve, reject) {\n            Promise.all(promises).then(function () {\n                resolve();\n            }, reject);\n        });\n    };\n    return MultiSpanProcessor;\n}());\nexport { MultiSpanProcessor };\n//# sourceMappingURL=MultiSpanProcessor.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** No-op implementation of SpanProcessor */\nvar NoopSpanProcessor = /** @class */ (function () {\n    function NoopSpanProcessor() {\n    }\n    NoopSpanProcessor.prototype.onStart = function (_span, _context) { };\n    NoopSpanProcessor.prototype.onEnd = function (_span) { };\n    NoopSpanProcessor.prototype.shutdown = function () {\n        return Promise.resolve();\n    };\n    NoopSpanProcessor.prototype.forceFlush = function () {\n        return Promise.resolve();\n    };\n    return NoopSpanProcessor;\n}());\nexport { NoopSpanProcessor };\n//# sourceMappingURL=NoopSpanProcessor.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { ExportResultCode, hrTimeToMicroseconds, } from '@opentelemetry/core';\n/**\n * This is implementation of {@link SpanExporter} that prints spans to the\n * console. This class can be used for diagnostic purposes.\n */\n/* eslint-disable no-console */\nvar ConsoleSpanExporter = /** @class */ (function () {\n    function ConsoleSpanExporter() {\n    }\n    /**\n     * Export spans.\n     * @param spans\n     * @param resultCallback\n     */\n    ConsoleSpanExporter.prototype.export = function (spans, resultCallback) {\n        return this._sendSpans(spans, resultCallback);\n    };\n    /**\n     * Shutdown the exporter.\n     */\n    ConsoleSpanExporter.prototype.shutdown = function () {\n        this._sendSpans([]);\n        return Promise.resolve();\n    };\n    /**\n     * converts span info into more readable format\n     * @param span\n     */\n    ConsoleSpanExporter.prototype._exportInfo = function (span) {\n        return {\n            traceId: span.spanContext().traceId,\n            parentId: span.parentSpanId,\n            name: span.name,\n            id: span.spanContext().spanId,\n            kind: span.kind,\n            timestamp: hrTimeToMicroseconds(span.startTime),\n            duration: hrTimeToMicroseconds(span.duration),\n            attributes: span.attributes,\n            status: span.status,\n            events: span.events,\n            links: span.links\n        };\n    };\n    /**\n     * Showing spans in console\n     * @param spans\n     * @param done\n     */\n    ConsoleSpanExporter.prototype._sendSpans = function (spans, done) {\n        var e_1, _a;\n        try {\n            for (var spans_1 = __values(spans), spans_1_1 = spans_1.next(); !spans_1_1.done; spans_1_1 = spans_1.next()) {\n                var span = spans_1_1.value;\n                console.dir(this._exportInfo(span), { depth: 3 });\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (spans_1_1 && !spans_1_1.done && (_a = spans_1.return)) _a.call(spans_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (done) {\n            return done({ code: ExportResultCode.SUCCESS });\n        }\n    };\n    return ConsoleSpanExporter;\n}());\nexport { ConsoleSpanExporter };\n//# sourceMappingURL=ConsoleSpanExporter.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { ExportResultCode } from '@opentelemetry/core';\n/**\n * This class can be used for testing purposes. It stores the exported spans\n * in a list in memory that can be retrieved using the `getFinishedSpans()`\n * method.\n */\nvar InMemorySpanExporter = /** @class */ (function () {\n    function InMemorySpanExporter() {\n        this._finishedSpans = [];\n        /**\n         * Indicates if the exporter has been \"shutdown.\"\n         * When false, exported spans will not be stored in-memory.\n         */\n        this._stopped = false;\n    }\n    InMemorySpanExporter.prototype.export = function (spans, resultCallback) {\n        var _a;\n        if (this._stopped)\n            return resultCallback({\n                code: ExportResultCode.FAILED,\n                error: new Error('Exporter has been stopped'),\n            });\n        (_a = this._finishedSpans).push.apply(_a, __spreadArray([], __read(spans), false));\n        setTimeout(function () { return resultCallback({ code: ExportResultCode.SUCCESS }); }, 0);\n    };\n    InMemorySpanExporter.prototype.shutdown = function () {\n        this._stopped = true;\n        this._finishedSpans = [];\n        return Promise.resolve();\n    };\n    InMemorySpanExporter.prototype.reset = function () {\n        this._finishedSpans = [];\n    };\n    InMemorySpanExporter.prototype.getFinishedSpans = function () {\n        return this._finishedSpans;\n    };\n    return InMemorySpanExporter;\n}());\nexport { InMemorySpanExporter };\n//# sourceMappingURL=InMemorySpanExporter.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { context, TraceFlags } from '@opentelemetry/api';\nimport { ExportResultCode, globalErrorHandler, suppressTracing, BindOnceFuture, } from '@opentelemetry/core';\n/**\n * An implementation of the {@link SpanProcessor} that converts the {@link Span}\n * to {@link ReadableSpan} and passes it to the configured exporter.\n *\n * Only spans that are sampled are converted.\n */\nvar SimpleSpanProcessor = /** @class */ (function () {\n    function SimpleSpanProcessor(_exporter) {\n        this._exporter = _exporter;\n        this._shutdownOnce = new BindOnceFuture(this._shutdown, this);\n    }\n    SimpleSpanProcessor.prototype.forceFlush = function () {\n        // do nothing as all spans are being exported without waiting\n        return Promise.resolve();\n    };\n    // does nothing.\n    SimpleSpanProcessor.prototype.onStart = function (_span, _parentContext) { };\n    SimpleSpanProcessor.prototype.onEnd = function (span) {\n        var _this = this;\n        if (this._shutdownOnce.isCalled) {\n            return;\n        }\n        if ((span.spanContext().traceFlags & TraceFlags.SAMPLED) === 0) {\n            return;\n        }\n        // prevent downstream exporter calls from generating spans\n        context.with(suppressTracing(context.active()), function () {\n            _this._exporter.export([span], function (result) {\n                var _a;\n                if (result.code !== ExportResultCode.SUCCESS) {\n                    globalErrorHandler((_a = result.error) !== null && _a !== void 0 ? _a : new Error(\"SimpleSpanProcessor: span export failed (status \" + result + \")\"));\n                }\n            });\n        });\n    };\n    SimpleSpanProcessor.prototype.shutdown = function () {\n        return this._shutdownOnce.call();\n    };\n    SimpleSpanProcessor.prototype._shutdown = function () {\n        return this._exporter.shutdown();\n    };\n    return SimpleSpanProcessor;\n}());\nexport { SimpleSpanProcessor };\n//# sourceMappingURL=SimpleSpanProcessor.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// DO NOT EDIT, this is an Auto-generated file from scripts/semconv/templates//templates/SemanticAttributes.ts.j2\nexport var SemanticAttributes = {\n    /**\n    * The full invoked ARN as provided on the `Context` passed to the function (`Lambda-Runtime-Invoked-Function-Arn` header on the `/runtime/invocation/next` applicable).\n    *\n    * Note: This may be different from `faas.id` if an alias is involved.\n    */\n    AWS_LAMBDA_INVOKED_ARN: 'aws.lambda.invoked_arn',\n    /**\n    * An identifier for the database management system (DBMS) product being used. See below for a list of well-known identifiers.\n    */\n    DB_SYSTEM: 'db.system',\n    /**\n    * The connection string used to connect to the database. It is recommended to remove embedded credentials.\n    */\n    DB_CONNECTION_STRING: 'db.connection_string',\n    /**\n    * Username for accessing the database.\n    */\n    DB_USER: 'db.user',\n    /**\n    * The fully-qualified class name of the [Java Database Connectivity (JDBC)](https://docs.oracle.com/javase/8/docs/technotes/guides/jdbc/) driver used to connect.\n    */\n    DB_JDBC_DRIVER_CLASSNAME: 'db.jdbc.driver_classname',\n    /**\n    * If no [tech-specific attribute](#call-level-attributes-for-specific-technologies) is defined, this attribute is used to report the name of the database being accessed. For commands that switch the database, this should be set to the target database (even if the command fails).\n    *\n    * Note: In some SQL databases, the database name to be used is called &#34;schema name&#34;.\n    */\n    DB_NAME: 'db.name',\n    /**\n    * The database statement being executed.\n    *\n    * Note: The value may be sanitized to exclude sensitive information.\n    */\n    DB_STATEMENT: 'db.statement',\n    /**\n    * The name of the operation being executed, e.g. the [MongoDB command name](https://docs.mongodb.com/manual/reference/command/#database-operations) such as `findAndModify`, or the SQL keyword.\n    *\n    * Note: When setting this to an SQL keyword, it is not recommended to attempt any client-side parsing of `db.statement` just to get this property, but it should be set if the operation name is provided by the library being instrumented. If the SQL statement has an ambiguous operation, or performs more than one operation, this value may be omitted.\n    */\n    DB_OPERATION: 'db.operation',\n    /**\n    * The Microsoft SQL Server [instance name](https://docs.microsoft.com/en-us/sql/connect/jdbc/building-the-connection-url?view=sql-server-ver15) connecting to. This name is used to determine the port of a named instance.\n    *\n    * Note: If setting a `db.mssql.instance_name`, `net.peer.port` is no longer required (but still recommended if non-standard).\n    */\n    DB_MSSQL_INSTANCE_NAME: 'db.mssql.instance_name',\n    /**\n    * The name of the keyspace being accessed. To be used instead of the generic `db.name` attribute.\n    */\n    DB_CASSANDRA_KEYSPACE: 'db.cassandra.keyspace',\n    /**\n    * The fetch size used for paging, i.e. how many rows will be returned at once.\n    */\n    DB_CASSANDRA_PAGE_SIZE: 'db.cassandra.page_size',\n    /**\n    * The consistency level of the query. Based on consistency values from [CQL](https://docs.datastax.com/en/cassandra-oss/3.0/cassandra/dml/dmlConfigConsistency.html).\n    */\n    DB_CASSANDRA_CONSISTENCY_LEVEL: 'db.cassandra.consistency_level',\n    /**\n    * The name of the primary table that the operation is acting upon, including the schema name (if applicable).\n    *\n    * Note: This mirrors the db.sql.table attribute but references cassandra rather than sql. It is not recommended to attempt any client-side parsing of `db.statement` just to get this property, but it should be set if it is provided by the library being instrumented. If the operation is acting upon an anonymous table, or more than one table, this value MUST NOT be set.\n    */\n    DB_CASSANDRA_TABLE: 'db.cassandra.table',\n    /**\n    * Whether or not the query is idempotent.\n    */\n    DB_CASSANDRA_IDEMPOTENCE: 'db.cassandra.idempotence',\n    /**\n    * The number of times a query was speculatively executed. Not set or `0` if the query was not executed speculatively.\n    */\n    DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT: 'db.cassandra.speculative_execution_count',\n    /**\n    * The ID of the coordinating node for a query.\n    */\n    DB_CASSANDRA_COORDINATOR_ID: 'db.cassandra.coordinator.id',\n    /**\n    * The data center of the coordinating node for a query.\n    */\n    DB_CASSANDRA_COORDINATOR_DC: 'db.cassandra.coordinator.dc',\n    /**\n    * The [HBase namespace](https://hbase.apache.org/book.html#_namespace) being accessed. To be used instead of the generic `db.name` attribute.\n    */\n    DB_HBASE_NAMESPACE: 'db.hbase.namespace',\n    /**\n    * The index of the database being accessed as used in the [`SELECT` command](https://redis.io/commands/select), provided as an integer. To be used instead of the generic `db.name` attribute.\n    */\n    DB_REDIS_DATABASE_INDEX: 'db.redis.database_index',\n    /**\n    * The collection being accessed within the database stated in `db.name`.\n    */\n    DB_MONGODB_COLLECTION: 'db.mongodb.collection',\n    /**\n    * The name of the primary table that the operation is acting upon, including the schema name (if applicable).\n    *\n    * Note: It is not recommended to attempt any client-side parsing of `db.statement` just to get this property, but it should be set if it is provided by the library being instrumented. If the operation is acting upon an anonymous table, or more than one table, this value MUST NOT be set.\n    */\n    DB_SQL_TABLE: 'db.sql.table',\n    /**\n    * The type of the exception (its fully-qualified class name, if applicable). The dynamic type of the exception should be preferred over the static type in languages that support it.\n    */\n    EXCEPTION_TYPE: 'exception.type',\n    /**\n    * The exception message.\n    */\n    EXCEPTION_MESSAGE: 'exception.message',\n    /**\n    * A stacktrace as a string in the natural representation for the language runtime. The representation is to be determined and documented by each language SIG.\n    */\n    EXCEPTION_STACKTRACE: 'exception.stacktrace',\n    /**\n    * SHOULD be set to true if the exception event is recorded at a point where it is known that the exception is escaping the scope of the span.\n    *\n    * Note: An exception is considered to have escaped (or left) the scope of a span,\n  if that span is ended while the exception is still logically &#34;in flight&#34;.\n  This may be actually &#34;in flight&#34; in some languages (e.g. if the exception\n  is passed to a Context manager&#39;s `__exit__` method in Python) but will\n  usually be caught at the point of recording the exception in most languages.\n  \n  It is usually not possible to determine at the point where an exception is thrown\n  whether it will escape the scope of a span.\n  However, it is trivial to know that an exception\n  will escape, if one checks for an active exception just before ending the span,\n  as done in the [example above](#exception-end-example).\n  \n  It follows that an exception may still escape the scope of the span\n  even if the `exception.escaped` attribute was not set or set to false,\n  since the event might have been recorded at a time where it was not\n  clear whether the exception will escape.\n    */\n    EXCEPTION_ESCAPED: 'exception.escaped',\n    /**\n    * Type of the trigger on which the function is executed.\n    */\n    FAAS_TRIGGER: 'faas.trigger',\n    /**\n    * The execution ID of the current function execution.\n    */\n    FAAS_EXECUTION: 'faas.execution',\n    /**\n    * The name of the source on which the triggering operation was performed. For example, in Cloud Storage or S3 corresponds to the bucket name, and in Cosmos DB to the database name.\n    */\n    FAAS_DOCUMENT_COLLECTION: 'faas.document.collection',\n    /**\n    * Describes the type of the operation that was performed on the data.\n    */\n    FAAS_DOCUMENT_OPERATION: 'faas.document.operation',\n    /**\n    * A string containing the time when the data was accessed in the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) format expressed in [UTC](https://www.w3.org/TR/NOTE-datetime).\n    */\n    FAAS_DOCUMENT_TIME: 'faas.document.time',\n    /**\n    * The document name/table subjected to the operation. For example, in Cloud Storage or S3 is the name of the file, and in Cosmos DB the table name.\n    */\n    FAAS_DOCUMENT_NAME: 'faas.document.name',\n    /**\n    * A string containing the function invocation time in the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) format expressed in [UTC](https://www.w3.org/TR/NOTE-datetime).\n    */\n    FAAS_TIME: 'faas.time',\n    /**\n    * A string containing the schedule period as [Cron Expression](https://docs.oracle.com/cd/E12058_01/doc/doc.1014/e12030/cron_expressions.htm).\n    */\n    FAAS_CRON: 'faas.cron',\n    /**\n    * A boolean that is true if the serverless function is executed for the first time (aka cold-start).\n    */\n    FAAS_COLDSTART: 'faas.coldstart',\n    /**\n    * The name of the invoked function.\n    *\n    * Note: SHOULD be equal to the `faas.name` resource attribute of the invoked function.\n    */\n    FAAS_INVOKED_NAME: 'faas.invoked_name',\n    /**\n    * The cloud provider of the invoked function.\n    *\n    * Note: SHOULD be equal to the `cloud.provider` resource attribute of the invoked function.\n    */\n    FAAS_INVOKED_PROVIDER: 'faas.invoked_provider',\n    /**\n    * The cloud region of the invoked function.\n    *\n    * Note: SHOULD be equal to the `cloud.region` resource attribute of the invoked function.\n    */\n    FAAS_INVOKED_REGION: 'faas.invoked_region',\n    /**\n    * Transport protocol used. See note below.\n    */\n    NET_TRANSPORT: 'net.transport',\n    /**\n    * Remote address of the peer (dotted decimal for IPv4 or [RFC5952](https://tools.ietf.org/html/rfc5952) for IPv6).\n    */\n    NET_PEER_IP: 'net.peer.ip',\n    /**\n    * Remote port number.\n    */\n    NET_PEER_PORT: 'net.peer.port',\n    /**\n    * Remote hostname or similar, see note below.\n    */\n    NET_PEER_NAME: 'net.peer.name',\n    /**\n    * Like `net.peer.ip` but for the host IP. Useful in case of a multi-IP host.\n    */\n    NET_HOST_IP: 'net.host.ip',\n    /**\n    * Like `net.peer.port` but for the host port.\n    */\n    NET_HOST_PORT: 'net.host.port',\n    /**\n    * Local hostname or similar, see note below.\n    */\n    NET_HOST_NAME: 'net.host.name',\n    /**\n    * The internet connection type currently being used by the host.\n    */\n    NET_HOST_CONNECTION_TYPE: 'net.host.connection.type',\n    /**\n    * This describes more details regarding the connection.type. It may be the type of cell technology connection, but it could be used for describing details about a wifi connection.\n    */\n    NET_HOST_CONNECTION_SUBTYPE: 'net.host.connection.subtype',\n    /**\n    * The name of the mobile carrier.\n    */\n    NET_HOST_CARRIER_NAME: 'net.host.carrier.name',\n    /**\n    * The mobile carrier country code.\n    */\n    NET_HOST_CARRIER_MCC: 'net.host.carrier.mcc',\n    /**\n    * The mobile carrier network code.\n    */\n    NET_HOST_CARRIER_MNC: 'net.host.carrier.mnc',\n    /**\n    * The ISO 3166-1 alpha-2 2-character country code associated with the mobile carrier network.\n    */\n    NET_HOST_CARRIER_ICC: 'net.host.carrier.icc',\n    /**\n    * The [`service.name`](../../resource/semantic_conventions/README.md#service) of the remote service. SHOULD be equal to the actual `service.name` resource attribute of the remote service if any.\n    */\n    PEER_SERVICE: 'peer.service',\n    /**\n    * Username or client_id extracted from the access token or [Authorization](https://tools.ietf.org/html/rfc7235#section-4.2) header in the inbound request from outside the system.\n    */\n    ENDUSER_ID: 'enduser.id',\n    /**\n    * Actual/assumed role the client is making the request under extracted from token or application security context.\n    */\n    ENDUSER_ROLE: 'enduser.role',\n    /**\n    * Scopes or granted authorities the client currently possesses extracted from token or application security context. The value would come from the scope associated with an [OAuth 2.0 Access Token](https://tools.ietf.org/html/rfc6749#section-3.3) or an attribute value in a [SAML 2.0 Assertion](http://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html).\n    */\n    ENDUSER_SCOPE: 'enduser.scope',\n    /**\n    * Current &#34;managed&#34; thread ID (as opposed to OS thread ID).\n    */\n    THREAD_ID: 'thread.id',\n    /**\n    * Current thread name.\n    */\n    THREAD_NAME: 'thread.name',\n    /**\n    * The method or function name, or equivalent (usually rightmost part of the code unit&#39;s name).\n    */\n    CODE_FUNCTION: 'code.function',\n    /**\n    * The &#34;namespace&#34; within which `code.function` is defined. Usually the qualified class or module name, such that `code.namespace` + some separator + `code.function` form a unique identifier for the code unit.\n    */\n    CODE_NAMESPACE: 'code.namespace',\n    /**\n    * The source code file name that identifies the code unit as uniquely as possible (preferably an absolute file path).\n    */\n    CODE_FILEPATH: 'code.filepath',\n    /**\n    * The line number in `code.filepath` best representing the operation. It SHOULD point within the code unit named in `code.function`.\n    */\n    CODE_LINENO: 'code.lineno',\n    /**\n    * HTTP request method.\n    */\n    HTTP_METHOD: 'http.method',\n    /**\n    * Full HTTP request URL in the form `scheme://host[:port]/path?query[#fragment]`. Usually the fragment is not transmitted over HTTP, but if it is known, it should be included nevertheless.\n    *\n    * Note: `http.url` MUST NOT contain credentials passed via URL in form of `https://username:password@www.example.com/`. In such case the attribute&#39;s value should be `https://www.example.com/`.\n    */\n    HTTP_URL: 'http.url',\n    /**\n    * The full request target as passed in a HTTP request line or equivalent.\n    */\n    HTTP_TARGET: 'http.target',\n    /**\n    * The value of the [HTTP host header](https://tools.ietf.org/html/rfc7230#section-5.4). An empty Host header should also be reported, see note.\n    *\n    * Note: When the header is present but empty the attribute SHOULD be set to the empty string. Note that this is a valid situation that is expected in certain cases, according the aforementioned [section of RFC 7230](https://tools.ietf.org/html/rfc7230#section-5.4). When the header is not set the attribute MUST NOT be set.\n    */\n    HTTP_HOST: 'http.host',\n    /**\n    * The URI scheme identifying the used protocol.\n    */\n    HTTP_SCHEME: 'http.scheme',\n    /**\n    * [HTTP response status code](https://tools.ietf.org/html/rfc7231#section-6).\n    */\n    HTTP_STATUS_CODE: 'http.status_code',\n    /**\n    * Kind of HTTP protocol used.\n    *\n    * Note: If `net.transport` is not specified, it can be assumed to be `IP.TCP` except if `http.flavor` is `QUIC`, in which case `IP.UDP` is assumed.\n    */\n    HTTP_FLAVOR: 'http.flavor',\n    /**\n    * Value of the [HTTP User-Agent](https://tools.ietf.org/html/rfc7231#section-5.5.3) header sent by the client.\n    */\n    HTTP_USER_AGENT: 'http.user_agent',\n    /**\n    * The size of the request payload body in bytes. This is the number of bytes transferred excluding headers and is often, but not always, present as the [Content-Length](https://tools.ietf.org/html/rfc7230#section-3.3.2) header. For requests using transport encoding, this should be the compressed size.\n    */\n    HTTP_REQUEST_CONTENT_LENGTH: 'http.request_content_length',\n    /**\n    * The size of the uncompressed request payload body after transport decoding. Not set if transport encoding not used.\n    */\n    HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED: 'http.request_content_length_uncompressed',\n    /**\n    * The size of the response payload body in bytes. This is the number of bytes transferred excluding headers and is often, but not always, present as the [Content-Length](https://tools.ietf.org/html/rfc7230#section-3.3.2) header. For requests using transport encoding, this should be the compressed size.\n    */\n    HTTP_RESPONSE_CONTENT_LENGTH: 'http.response_content_length',\n    /**\n    * The size of the uncompressed response payload body after transport decoding. Not set if transport encoding not used.\n    */\n    HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED: 'http.response_content_length_uncompressed',\n    /**\n    * The primary server name of the matched virtual host. This should be obtained via configuration. If no such configuration can be obtained, this attribute MUST NOT be set ( `net.host.name` should be used instead).\n    *\n    * Note: `http.url` is usually not readily available on the server side but would have to be assembled in a cumbersome and sometimes lossy process from other information (see e.g. open-telemetry/opentelemetry-python/pull/148). It is thus preferred to supply the raw data that is available.\n    */\n    HTTP_SERVER_NAME: 'http.server_name',\n    /**\n    * The matched route (path template).\n    */\n    HTTP_ROUTE: 'http.route',\n    /**\n    * The IP address of the original client behind all proxies, if known (e.g. from [X-Forwarded-For](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For)).\n    *\n    * Note: This is not necessarily the same as `net.peer.ip`, which would\n  identify the network-level peer, which may be a proxy.\n  \n  This attribute should be set when a source of information different\n  from the one used for `net.peer.ip`, is available even if that other\n  source just confirms the same value as `net.peer.ip`.\n  Rationale: For `net.peer.ip`, one typically does not know if it\n  comes from a proxy, reverse proxy, or the actual client. Setting\n  `http.client_ip` when it&#39;s the same as `net.peer.ip` means that\n  one is at least somewhat confident that the address is not that of\n  the closest proxy.\n    */\n    HTTP_CLIENT_IP: 'http.client_ip',\n    /**\n    * The keys in the `RequestItems` object field.\n    */\n    AWS_DYNAMODB_TABLE_NAMES: 'aws.dynamodb.table_names',\n    /**\n    * The JSON-serialized value of each item in the `ConsumedCapacity` response field.\n    */\n    AWS_DYNAMODB_CONSUMED_CAPACITY: 'aws.dynamodb.consumed_capacity',\n    /**\n    * The JSON-serialized value of the `ItemCollectionMetrics` response field.\n    */\n    AWS_DYNAMODB_ITEM_COLLECTION_METRICS: 'aws.dynamodb.item_collection_metrics',\n    /**\n    * The value of the `ProvisionedThroughput.ReadCapacityUnits` request parameter.\n    */\n    AWS_DYNAMODB_PROVISIONED_READ_CAPACITY: 'aws.dynamodb.provisioned_read_capacity',\n    /**\n    * The value of the `ProvisionedThroughput.WriteCapacityUnits` request parameter.\n    */\n    AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY: 'aws.dynamodb.provisioned_write_capacity',\n    /**\n    * The value of the `ConsistentRead` request parameter.\n    */\n    AWS_DYNAMODB_CONSISTENT_READ: 'aws.dynamodb.consistent_read',\n    /**\n    * The value of the `ProjectionExpression` request parameter.\n    */\n    AWS_DYNAMODB_PROJECTION: 'aws.dynamodb.projection',\n    /**\n    * The value of the `Limit` request parameter.\n    */\n    AWS_DYNAMODB_LIMIT: 'aws.dynamodb.limit',\n    /**\n    * The value of the `AttributesToGet` request parameter.\n    */\n    AWS_DYNAMODB_ATTRIBUTES_TO_GET: 'aws.dynamodb.attributes_to_get',\n    /**\n    * The value of the `IndexName` request parameter.\n    */\n    AWS_DYNAMODB_INDEX_NAME: 'aws.dynamodb.index_name',\n    /**\n    * The value of the `Select` request parameter.\n    */\n    AWS_DYNAMODB_SELECT: 'aws.dynamodb.select',\n    /**\n    * The JSON-serialized value of each item of the `GlobalSecondaryIndexes` request field.\n    */\n    AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES: 'aws.dynamodb.global_secondary_indexes',\n    /**\n    * The JSON-serialized value of each item of the `LocalSecondaryIndexes` request field.\n    */\n    AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES: 'aws.dynamodb.local_secondary_indexes',\n    /**\n    * The value of the `ExclusiveStartTableName` request parameter.\n    */\n    AWS_DYNAMODB_EXCLUSIVE_START_TABLE: 'aws.dynamodb.exclusive_start_table',\n    /**\n    * The the number of items in the `TableNames` response parameter.\n    */\n    AWS_DYNAMODB_TABLE_COUNT: 'aws.dynamodb.table_count',\n    /**\n    * The value of the `ScanIndexForward` request parameter.\n    */\n    AWS_DYNAMODB_SCAN_FORWARD: 'aws.dynamodb.scan_forward',\n    /**\n    * The value of the `Segment` request parameter.\n    */\n    AWS_DYNAMODB_SEGMENT: 'aws.dynamodb.segment',\n    /**\n    * The value of the `TotalSegments` request parameter.\n    */\n    AWS_DYNAMODB_TOTAL_SEGMENTS: 'aws.dynamodb.total_segments',\n    /**\n    * The value of the `Count` response parameter.\n    */\n    AWS_DYNAMODB_COUNT: 'aws.dynamodb.count',\n    /**\n    * The value of the `ScannedCount` response parameter.\n    */\n    AWS_DYNAMODB_SCANNED_COUNT: 'aws.dynamodb.scanned_count',\n    /**\n    * The JSON-serialized value of each item in the `AttributeDefinitions` request field.\n    */\n    AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS: 'aws.dynamodb.attribute_definitions',\n    /**\n    * The JSON-serialized value of each item in the the `GlobalSecondaryIndexUpdates` request field.\n    */\n    AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES: 'aws.dynamodb.global_secondary_index_updates',\n    /**\n    * A string identifying the messaging system.\n    */\n    MESSAGING_SYSTEM: 'messaging.system',\n    /**\n    * The message destination name. This might be equal to the span name but is required nevertheless.\n    */\n    MESSAGING_DESTINATION: 'messaging.destination',\n    /**\n    * The kind of message destination.\n    */\n    MESSAGING_DESTINATION_KIND: 'messaging.destination_kind',\n    /**\n    * A boolean that is true if the message destination is temporary.\n    */\n    MESSAGING_TEMP_DESTINATION: 'messaging.temp_destination',\n    /**\n    * The name of the transport protocol.\n    */\n    MESSAGING_PROTOCOL: 'messaging.protocol',\n    /**\n    * The version of the transport protocol.\n    */\n    MESSAGING_PROTOCOL_VERSION: 'messaging.protocol_version',\n    /**\n    * Connection string.\n    */\n    MESSAGING_URL: 'messaging.url',\n    /**\n    * A value used by the messaging system as an identifier for the message, represented as a string.\n    */\n    MESSAGING_MESSAGE_ID: 'messaging.message_id',\n    /**\n    * The [conversation ID](#conversations) identifying the conversation to which the message belongs, represented as a string. Sometimes called &#34;Correlation ID&#34;.\n    */\n    MESSAGING_CONVERSATION_ID: 'messaging.conversation_id',\n    /**\n    * The (uncompressed) size of the message payload in bytes. Also use this attribute if it is unknown whether the compressed or uncompressed payload size is reported.\n    */\n    MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES: 'messaging.message_payload_size_bytes',\n    /**\n    * The compressed size of the message payload in bytes.\n    */\n    MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES: 'messaging.message_payload_compressed_size_bytes',\n    /**\n    * A string identifying the kind of message consumption as defined in the [Operation names](#operation-names) section above. If the operation is &#34;send&#34;, this attribute MUST NOT be set, since the operation can be inferred from the span kind in that case.\n    */\n    MESSAGING_OPERATION: 'messaging.operation',\n    /**\n    * The identifier for the consumer receiving a message. For Kafka, set it to `{messaging.kafka.consumer_group} - {messaging.kafka.client_id}`, if both are present, or only `messaging.kafka.consumer_group`. For brokers, such as RabbitMQ and Artemis, set it to the `client_id` of the client consuming the message.\n    */\n    MESSAGING_CONSUMER_ID: 'messaging.consumer_id',\n    /**\n    * RabbitMQ message routing key.\n    */\n    MESSAGING_RABBITMQ_ROUTING_KEY: 'messaging.rabbitmq.routing_key',\n    /**\n    * Message keys in Kafka are used for grouping alike messages to ensure they&#39;re processed on the same partition. They differ from `messaging.message_id` in that they&#39;re not unique. If the key is `null`, the attribute MUST NOT be set.\n    *\n    * Note: If the key type is not string, it&#39;s string representation has to be supplied for the attribute. If the key has no unambiguous, canonical string form, don&#39;t include its value.\n    */\n    MESSAGING_KAFKA_MESSAGE_KEY: 'messaging.kafka.message_key',\n    /**\n    * Name of the Kafka Consumer Group that is handling the message. Only applies to consumers, not producers.\n    */\n    MESSAGING_KAFKA_CONSUMER_GROUP: 'messaging.kafka.consumer_group',\n    /**\n    * Client Id for the Consumer or Producer that is handling the message.\n    */\n    MESSAGING_KAFKA_CLIENT_ID: 'messaging.kafka.client_id',\n    /**\n    * Partition the message is sent to.\n    */\n    MESSAGING_KAFKA_PARTITION: 'messaging.kafka.partition',\n    /**\n    * A boolean that is true if the message is a tombstone.\n    */\n    MESSAGING_KAFKA_TOMBSTONE: 'messaging.kafka.tombstone',\n    /**\n    * A string identifying the remoting system.\n    */\n    RPC_SYSTEM: 'rpc.system',\n    /**\n    * The full (logical) name of the service being called, including its package name, if applicable.\n    *\n    * Note: This is the logical name of the service from the RPC interface perspective, which can be different from the name of any implementing class. The `code.namespace` attribute may be used to store the latter (despite the attribute name, it may include a class name; e.g., class with method actually executing the call on the server side, RPC client stub class on the client side).\n    */\n    RPC_SERVICE: 'rpc.service',\n    /**\n    * The name of the (logical) method being called, must be equal to the $method part in the span name.\n    *\n    * Note: This is the logical name of the method from the RPC interface perspective, which can be different from the name of any implementing method/function. The `code.function` attribute may be used to store the latter (e.g., method actually executing the call on the server side, RPC client stub method on the client side).\n    */\n    RPC_METHOD: 'rpc.method',\n    /**\n    * The [numeric status code](https://github.com/grpc/grpc/blob/v1.33.2/doc/statuscodes.md) of the gRPC request.\n    */\n    RPC_GRPC_STATUS_CODE: 'rpc.grpc.status_code',\n    /**\n    * Protocol version as in `jsonrpc` property of request/response. Since JSON-RPC 1.0 does not specify this, the value can be omitted.\n    */\n    RPC_JSONRPC_VERSION: 'rpc.jsonrpc.version',\n    /**\n    * `id` property of request or response. Since protocol allows id to be int, string, `null` or missing (for notifications), value is expected to be cast to string for simplicity. Use empty string in case of `null` value. Omit entirely if this is a notification.\n    */\n    RPC_JSONRPC_REQUEST_ID: 'rpc.jsonrpc.request_id',\n    /**\n    * `error.code` property of response if it is an error response.\n    */\n    RPC_JSONRPC_ERROR_CODE: 'rpc.jsonrpc.error_code',\n    /**\n    * `error.message` property of response if it is an error response.\n    */\n    RPC_JSONRPC_ERROR_MESSAGE: 'rpc.jsonrpc.error_message',\n    /**\n    * Whether this is a received or sent message.\n    */\n    MESSAGE_TYPE: 'message.type',\n    /**\n    * MUST be calculated as two different counters starting from `1` one for sent messages and one for received message.\n    *\n    * Note: This way we guarantee that the values will be consistent between different implementations.\n    */\n    MESSAGE_ID: 'message.id',\n    /**\n    * Compressed size of the message in bytes.\n    */\n    MESSAGE_COMPRESSED_SIZE: 'message.compressed_size',\n    /**\n    * Uncompressed size of the message in bytes.\n    */\n    MESSAGE_UNCOMPRESSED_SIZE: 'message.uncompressed_size',\n};\nexport var DbSystemValues = {\n    /** Some other SQL database. Fallback only. See notes. */\n    OTHER_SQL: 'other_sql',\n    /** Microsoft SQL Server. */\n    MSSQL: 'mssql',\n    /** MySQL. */\n    MYSQL: 'mysql',\n    /** Oracle Database. */\n    ORACLE: 'oracle',\n    /** IBM Db2. */\n    DB2: 'db2',\n    /** PostgreSQL. */\n    POSTGRESQL: 'postgresql',\n    /** Amazon Redshift. */\n    REDSHIFT: 'redshift',\n    /** Apache Hive. */\n    HIVE: 'hive',\n    /** Cloudscape. */\n    CLOUDSCAPE: 'cloudscape',\n    /** HyperSQL DataBase. */\n    HSQLDB: 'hsqldb',\n    /** Progress Database. */\n    PROGRESS: 'progress',\n    /** SAP MaxDB. */\n    MAXDB: 'maxdb',\n    /** SAP HANA. */\n    HANADB: 'hanadb',\n    /** Ingres. */\n    INGRES: 'ingres',\n    /** FirstSQL. */\n    FIRSTSQL: 'firstsql',\n    /** EnterpriseDB. */\n    EDB: 'edb',\n    /** InterSystems Caché. */\n    CACHE: 'cache',\n    /** Adabas (Adaptable Database System). */\n    ADABAS: 'adabas',\n    /** Firebird. */\n    FIREBIRD: 'firebird',\n    /** Apache Derby. */\n    DERBY: 'derby',\n    /** FileMaker. */\n    FILEMAKER: 'filemaker',\n    /** Informix. */\n    INFORMIX: 'informix',\n    /** InstantDB. */\n    INSTANTDB: 'instantdb',\n    /** InterBase. */\n    INTERBASE: 'interbase',\n    /** MariaDB. */\n    MARIADB: 'mariadb',\n    /** Netezza. */\n    NETEZZA: 'netezza',\n    /** Pervasive PSQL. */\n    PERVASIVE: 'pervasive',\n    /** PointBase. */\n    POINTBASE: 'pointbase',\n    /** SQLite. */\n    SQLITE: 'sqlite',\n    /** Sybase. */\n    SYBASE: 'sybase',\n    /** Teradata. */\n    TERADATA: 'teradata',\n    /** Vertica. */\n    VERTICA: 'vertica',\n    /** H2. */\n    H2: 'h2',\n    /** ColdFusion IMQ. */\n    COLDFUSION: 'coldfusion',\n    /** Apache Cassandra. */\n    CASSANDRA: 'cassandra',\n    /** Apache HBase. */\n    HBASE: 'hbase',\n    /** MongoDB. */\n    MONGODB: 'mongodb',\n    /** Redis. */\n    REDIS: 'redis',\n    /** Couchbase. */\n    COUCHBASE: 'couchbase',\n    /** CouchDB. */\n    COUCHDB: 'couchdb',\n    /** Microsoft Azure Cosmos DB. */\n    COSMOSDB: 'cosmosdb',\n    /** Amazon DynamoDB. */\n    DYNAMODB: 'dynamodb',\n    /** Neo4j. */\n    NEO4J: 'neo4j',\n    /** Apache Geode. */\n    GEODE: 'geode',\n    /** Elasticsearch. */\n    ELASTICSEARCH: 'elasticsearch',\n    /** Memcached. */\n    MEMCACHED: 'memcached',\n    /** CockroachDB. */\n    COCKROACHDB: 'cockroachdb',\n};\nexport var DbCassandraConsistencyLevelValues = {\n    /** all. */\n    ALL: 'all',\n    /** each_quorum. */\n    EACH_QUORUM: 'each_quorum',\n    /** quorum. */\n    QUORUM: 'quorum',\n    /** local_quorum. */\n    LOCAL_QUORUM: 'local_quorum',\n    /** one. */\n    ONE: 'one',\n    /** two. */\n    TWO: 'two',\n    /** three. */\n    THREE: 'three',\n    /** local_one. */\n    LOCAL_ONE: 'local_one',\n    /** any. */\n    ANY: 'any',\n    /** serial. */\n    SERIAL: 'serial',\n    /** local_serial. */\n    LOCAL_SERIAL: 'local_serial',\n};\nexport var FaasTriggerValues = {\n    /** A response to some data source operation such as a database or filesystem read/write. */\n    DATASOURCE: 'datasource',\n    /** To provide an answer to an inbound HTTP request. */\n    HTTP: 'http',\n    /** A function is set to be executed when messages are sent to a messaging system. */\n    PUBSUB: 'pubsub',\n    /** A function is scheduled to be executed regularly. */\n    TIMER: 'timer',\n    /** If none of the others apply. */\n    OTHER: 'other',\n};\nexport var FaasDocumentOperationValues = {\n    /** When a new object is created. */\n    INSERT: 'insert',\n    /** When an object is modified. */\n    EDIT: 'edit',\n    /** When an object is deleted. */\n    DELETE: 'delete',\n};\nexport var FaasInvokedProviderValues = {\n    /** Alibaba Cloud. */\n    ALIBABA_CLOUD: 'alibaba_cloud',\n    /** Amazon Web Services. */\n    AWS: 'aws',\n    /** Microsoft Azure. */\n    AZURE: 'azure',\n    /** Google Cloud Platform. */\n    GCP: 'gcp',\n};\nexport var NetTransportValues = {\n    /** ip_tcp. */\n    IP_TCP: 'ip_tcp',\n    /** ip_udp. */\n    IP_UDP: 'ip_udp',\n    /** Another IP-based protocol. */\n    IP: 'ip',\n    /** Unix Domain socket. See below. */\n    UNIX: 'unix',\n    /** Named or anonymous pipe. See note below. */\n    PIPE: 'pipe',\n    /** In-process communication. */\n    INPROC: 'inproc',\n    /** Something else (non IP-based). */\n    OTHER: 'other',\n};\nexport var NetHostConnectionTypeValues = {\n    /** wifi. */\n    WIFI: 'wifi',\n    /** wired. */\n    WIRED: 'wired',\n    /** cell. */\n    CELL: 'cell',\n    /** unavailable. */\n    UNAVAILABLE: 'unavailable',\n    /** unknown. */\n    UNKNOWN: 'unknown',\n};\nexport var NetHostConnectionSubtypeValues = {\n    /** GPRS. */\n    GPRS: 'gprs',\n    /** EDGE. */\n    EDGE: 'edge',\n    /** UMTS. */\n    UMTS: 'umts',\n    /** CDMA. */\n    CDMA: 'cdma',\n    /** EVDO Rel. 0. */\n    EVDO_0: 'evdo_0',\n    /** EVDO Rev. A. */\n    EVDO_A: 'evdo_a',\n    /** CDMA2000 1XRTT. */\n    CDMA2000_1XRTT: 'cdma2000_1xrtt',\n    /** HSDPA. */\n    HSDPA: 'hsdpa',\n    /** HSUPA. */\n    HSUPA: 'hsupa',\n    /** HSPA. */\n    HSPA: 'hspa',\n    /** IDEN. */\n    IDEN: 'iden',\n    /** EVDO Rev. B. */\n    EVDO_B: 'evdo_b',\n    /** LTE. */\n    LTE: 'lte',\n    /** EHRPD. */\n    EHRPD: 'ehrpd',\n    /** HSPAP. */\n    HSPAP: 'hspap',\n    /** GSM. */\n    GSM: 'gsm',\n    /** TD-SCDMA. */\n    TD_SCDMA: 'td_scdma',\n    /** IWLAN. */\n    IWLAN: 'iwlan',\n    /** 5G NR (New Radio). */\n    NR: 'nr',\n    /** 5G NRNSA (New Radio Non-Standalone). */\n    NRNSA: 'nrnsa',\n    /** LTE CA. */\n    LTE_CA: 'lte_ca',\n};\nexport var HttpFlavorValues = {\n    /** HTTP 1.0. */\n    HTTP_1_0: '1.0',\n    /** HTTP 1.1. */\n    HTTP_1_1: '1.1',\n    /** HTTP 2. */\n    HTTP_2_0: '2.0',\n    /** SPDY protocol. */\n    SPDY: 'SPDY',\n    /** QUIC protocol. */\n    QUIC: 'QUIC',\n};\nexport var MessagingDestinationKindValues = {\n    /** A message sent to a queue. */\n    QUEUE: 'queue',\n    /** A message sent to a topic. */\n    TOPIC: 'topic',\n};\nexport var MessagingOperationValues = {\n    /** receive. */\n    RECEIVE: 'receive',\n    /** process. */\n    PROCESS: 'process',\n};\nexport var RpcGrpcStatusCodeValues = {\n    /** OK. */\n    OK: 0,\n    /** CANCELLED. */\n    CANCELLED: 1,\n    /** UNKNOWN. */\n    UNKNOWN: 2,\n    /** INVALID_ARGUMENT. */\n    INVALID_ARGUMENT: 3,\n    /** DEADLINE_EXCEEDED. */\n    DEADLINE_EXCEEDED: 4,\n    /** NOT_FOUND. */\n    NOT_FOUND: 5,\n    /** ALREADY_EXISTS. */\n    ALREADY_EXISTS: 6,\n    /** PERMISSION_DENIED. */\n    PERMISSION_DENIED: 7,\n    /** RESOURCE_EXHAUSTED. */\n    RESOURCE_EXHAUSTED: 8,\n    /** FAILED_PRECONDITION. */\n    FAILED_PRECONDITION: 9,\n    /** ABORTED. */\n    ABORTED: 10,\n    /** OUT_OF_RANGE. */\n    OUT_OF_RANGE: 11,\n    /** UNIMPLEMENTED. */\n    UNIMPLEMENTED: 12,\n    /** INTERNAL. */\n    INTERNAL: 13,\n    /** UNAVAILABLE. */\n    UNAVAILABLE: 14,\n    /** DATA_LOSS. */\n    DATA_LOSS: 15,\n    /** UNAUTHENTICATED. */\n    UNAUTHENTICATED: 16,\n};\nexport var MessageTypeValues = {\n    /** sent. */\n    SENT: 'SENT',\n    /** received. */\n    RECEIVED: 'RECEIVED',\n};\n//# sourceMappingURL=SemanticAttributes.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// DO NOT EDIT, this is an Auto-generated file from scripts/semconv/templates//templates/SemanticAttributes.ts.j2\nexport var SemanticResourceAttributes = {\n    /**\n    * Name of the cloud provider.\n    */\n    CLOUD_PROVIDER: 'cloud.provider',\n    /**\n    * The cloud account ID the resource is assigned to.\n    */\n    CLOUD_ACCOUNT_ID: 'cloud.account.id',\n    /**\n    * The geographical region the resource is running. Refer to your provider&#39;s docs to see the available regions, for example [Alibaba Cloud regions](https://www.alibabacloud.com/help/doc-detail/40654.htm), [AWS regions](https://aws.amazon.com/about-aws/global-infrastructure/regions_az/), [Azure regions](https://azure.microsoft.com/en-us/global-infrastructure/geographies/), or [Google Cloud regions](https://cloud.google.com/about/locations).\n    */\n    CLOUD_REGION: 'cloud.region',\n    /**\n    * Cloud regions often have multiple, isolated locations known as zones to increase availability. Availability zone represents the zone where the resource is running.\n    *\n    * Note: Availability zones are called &#34;zones&#34; on Alibaba Cloud and Google Cloud.\n    */\n    CLOUD_AVAILABILITY_ZONE: 'cloud.availability_zone',\n    /**\n    * The cloud platform in use.\n    *\n    * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n    */\n    CLOUD_PLATFORM: 'cloud.platform',\n    /**\n    * The Amazon Resource Name (ARN) of an [ECS container instance](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ECS_instances.html).\n    */\n    AWS_ECS_CONTAINER_ARN: 'aws.ecs.container.arn',\n    /**\n    * The ARN of an [ECS cluster](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/clusters.html).\n    */\n    AWS_ECS_CLUSTER_ARN: 'aws.ecs.cluster.arn',\n    /**\n    * The [launch type](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/launch_types.html) for an ECS task.\n    */\n    AWS_ECS_LAUNCHTYPE: 'aws.ecs.launchtype',\n    /**\n    * The ARN of an [ECS task definition](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definitions.html).\n    */\n    AWS_ECS_TASK_ARN: 'aws.ecs.task.arn',\n    /**\n    * The task definition family this task definition is a member of.\n    */\n    AWS_ECS_TASK_FAMILY: 'aws.ecs.task.family',\n    /**\n    * The revision for this task definition.\n    */\n    AWS_ECS_TASK_REVISION: 'aws.ecs.task.revision',\n    /**\n    * The ARN of an EKS cluster.\n    */\n    AWS_EKS_CLUSTER_ARN: 'aws.eks.cluster.arn',\n    /**\n    * The name(s) of the AWS log group(s) an application is writing to.\n    *\n    * Note: Multiple log groups must be supported for cases like multi-container applications, where a single application has sidecar containers, and each write to their own log group.\n    */\n    AWS_LOG_GROUP_NAMES: 'aws.log.group.names',\n    /**\n    * The Amazon Resource Name(s) (ARN) of the AWS log group(s).\n    *\n    * Note: See the [log group ARN format documentation](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/iam-access-control-overview-cwl.html#CWL_ARN_Format).\n    */\n    AWS_LOG_GROUP_ARNS: 'aws.log.group.arns',\n    /**\n    * The name(s) of the AWS log stream(s) an application is writing to.\n    */\n    AWS_LOG_STREAM_NAMES: 'aws.log.stream.names',\n    /**\n    * The ARN(s) of the AWS log stream(s).\n    *\n    * Note: See the [log stream ARN format documentation](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/iam-access-control-overview-cwl.html#CWL_ARN_Format). One log group can contain several log streams, so these ARNs necessarily identify both a log group and a log stream.\n    */\n    AWS_LOG_STREAM_ARNS: 'aws.log.stream.arns',\n    /**\n    * Container name.\n    */\n    CONTAINER_NAME: 'container.name',\n    /**\n    * Container ID. Usually a UUID, as for example used to [identify Docker containers](https://docs.docker.com/engine/reference/run/#container-identification). The UUID might be abbreviated.\n    */\n    CONTAINER_ID: 'container.id',\n    /**\n    * The container runtime managing this container.\n    */\n    CONTAINER_RUNTIME: 'container.runtime',\n    /**\n    * Name of the image the container was built on.\n    */\n    CONTAINER_IMAGE_NAME: 'container.image.name',\n    /**\n    * Container image tag.\n    */\n    CONTAINER_IMAGE_TAG: 'container.image.tag',\n    /**\n    * Name of the [deployment environment](https://en.wikipedia.org/wiki/Deployment_environment) (aka deployment tier).\n    */\n    DEPLOYMENT_ENVIRONMENT: 'deployment.environment',\n    /**\n    * A unique identifier representing the device.\n    *\n    * Note: The device identifier MUST only be defined using the values outlined below. This value is not an advertising identifier and MUST NOT be used as such. On iOS (Swift or Objective-C), this value MUST be equal to the [vendor identifier](https://developer.apple.com/documentation/uikit/uidevice/1620059-identifierforvendor). On Android (Java or Kotlin), this value MUST be equal to the Firebase Installation ID or a globally unique UUID which is persisted across sessions in your application. More information can be found [here](https://developer.android.com/training/articles/user-data-ids) on best practices and exact implementation details. Caution should be taken when storing personal data or anything which can identify a user. GDPR and data protection laws may apply, ensure you do your own due diligence.\n    */\n    DEVICE_ID: 'device.id',\n    /**\n    * The model identifier for the device.\n    *\n    * Note: It&#39;s recommended this value represents a machine readable version of the model identifier rather than the market or consumer-friendly name of the device.\n    */\n    DEVICE_MODEL_IDENTIFIER: 'device.model.identifier',\n    /**\n    * The marketing name for the device model.\n    *\n    * Note: It&#39;s recommended this value represents a human readable version of the device model rather than a machine readable alternative.\n    */\n    DEVICE_MODEL_NAME: 'device.model.name',\n    /**\n    * The name of the single function that this runtime instance executes.\n    *\n    * Note: This is the name of the function as configured/deployed on the FaaS platform and is usually different from the name of the callback function (which may be stored in the [`code.namespace`/`code.function`](../../trace/semantic_conventions/span-general.md#source-code-attributes) span attributes).\n    */\n    FAAS_NAME: 'faas.name',\n    /**\n    * The unique ID of the single function that this runtime instance executes.\n    *\n    * Note: Depending on the cloud provider, use:\n  \n  * **AWS Lambda:** The function [ARN](https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html).\n  Take care not to use the &#34;invoked ARN&#34; directly but replace any\n  [alias suffix](https://docs.aws.amazon.com/lambda/latest/dg/configuration-aliases.html) with the resolved function version, as the same runtime instance may be invokable with multiple\n  different aliases.\n  * **GCP:** The [URI of the resource](https://cloud.google.com/iam/docs/full-resource-names)\n  * **Azure:** The [Fully Qualified Resource ID](https://docs.microsoft.com/en-us/rest/api/resources/resources/get-by-id).\n  \n  On some providers, it may not be possible to determine the full ID at startup,\n  which is why this field cannot be made required. For example, on AWS the account ID\n  part of the ARN is not available without calling another AWS API\n  which may be deemed too slow for a short-running lambda function.\n  As an alternative, consider setting `faas.id` as a span attribute instead.\n    */\n    FAAS_ID: 'faas.id',\n    /**\n    * The immutable version of the function being executed.\n    *\n    * Note: Depending on the cloud provider and platform, use:\n  \n  * **AWS Lambda:** The [function version](https://docs.aws.amazon.com/lambda/latest/dg/configuration-versions.html)\n    (an integer represented as a decimal string).\n  * **Google Cloud Run:** The [revision](https://cloud.google.com/run/docs/managing/revisions)\n    (i.e., the function name plus the revision suffix).\n  * **Google Cloud Functions:** The value of the\n    [`K_REVISION` environment variable](https://cloud.google.com/functions/docs/env-var#runtime_environment_variables_set_automatically).\n  * **Azure Functions:** Not applicable. Do not set this attribute.\n    */\n    FAAS_VERSION: 'faas.version',\n    /**\n    * The execution environment ID as a string, that will be potentially reused for other invocations to the same function/function version.\n    *\n    * Note: * **AWS Lambda:** Use the (full) log stream name.\n    */\n    FAAS_INSTANCE: 'faas.instance',\n    /**\n    * The amount of memory available to the serverless function in MiB.\n    *\n    * Note: It&#39;s recommended to set this attribute since e.g. too little memory can easily stop a Java AWS Lambda function from working correctly. On AWS Lambda, the environment variable `AWS_LAMBDA_FUNCTION_MEMORY_SIZE` provides this information.\n    */\n    FAAS_MAX_MEMORY: 'faas.max_memory',\n    /**\n    * Unique host ID. For Cloud, this must be the instance_id assigned by the cloud provider.\n    */\n    HOST_ID: 'host.id',\n    /**\n    * Name of the host. On Unix systems, it may contain what the hostname command returns, or the fully qualified hostname, or another name specified by the user.\n    */\n    HOST_NAME: 'host.name',\n    /**\n    * Type of host. For Cloud, this must be the machine type.\n    */\n    HOST_TYPE: 'host.type',\n    /**\n    * The CPU architecture the host system is running on.\n    */\n    HOST_ARCH: 'host.arch',\n    /**\n    * Name of the VM image or OS install the host was instantiated from.\n    */\n    HOST_IMAGE_NAME: 'host.image.name',\n    /**\n    * VM image ID. For Cloud, this value is from the provider.\n    */\n    HOST_IMAGE_ID: 'host.image.id',\n    /**\n    * The version string of the VM image as defined in [Version SpanAttributes](README.md#version-attributes).\n    */\n    HOST_IMAGE_VERSION: 'host.image.version',\n    /**\n    * The name of the cluster.\n    */\n    K8S_CLUSTER_NAME: 'k8s.cluster.name',\n    /**\n    * The name of the Node.\n    */\n    K8S_NODE_NAME: 'k8s.node.name',\n    /**\n    * The UID of the Node.\n    */\n    K8S_NODE_UID: 'k8s.node.uid',\n    /**\n    * The name of the namespace that the pod is running in.\n    */\n    K8S_NAMESPACE_NAME: 'k8s.namespace.name',\n    /**\n    * The UID of the Pod.\n    */\n    K8S_POD_UID: 'k8s.pod.uid',\n    /**\n    * The name of the Pod.\n    */\n    K8S_POD_NAME: 'k8s.pod.name',\n    /**\n    * The name of the Container in a Pod template.\n    */\n    K8S_CONTAINER_NAME: 'k8s.container.name',\n    /**\n    * The UID of the ReplicaSet.\n    */\n    K8S_REPLICASET_UID: 'k8s.replicaset.uid',\n    /**\n    * The name of the ReplicaSet.\n    */\n    K8S_REPLICASET_NAME: 'k8s.replicaset.name',\n    /**\n    * The UID of the Deployment.\n    */\n    K8S_DEPLOYMENT_UID: 'k8s.deployment.uid',\n    /**\n    * The name of the Deployment.\n    */\n    K8S_DEPLOYMENT_NAME: 'k8s.deployment.name',\n    /**\n    * The UID of the StatefulSet.\n    */\n    K8S_STATEFULSET_UID: 'k8s.statefulset.uid',\n    /**\n    * The name of the StatefulSet.\n    */\n    K8S_STATEFULSET_NAME: 'k8s.statefulset.name',\n    /**\n    * The UID of the DaemonSet.\n    */\n    K8S_DAEMONSET_UID: 'k8s.daemonset.uid',\n    /**\n    * The name of the DaemonSet.\n    */\n    K8S_DAEMONSET_NAME: 'k8s.daemonset.name',\n    /**\n    * The UID of the Job.\n    */\n    K8S_JOB_UID: 'k8s.job.uid',\n    /**\n    * The name of the Job.\n    */\n    K8S_JOB_NAME: 'k8s.job.name',\n    /**\n    * The UID of the CronJob.\n    */\n    K8S_CRONJOB_UID: 'k8s.cronjob.uid',\n    /**\n    * The name of the CronJob.\n    */\n    K8S_CRONJOB_NAME: 'k8s.cronjob.name',\n    /**\n    * The operating system type.\n    */\n    OS_TYPE: 'os.type',\n    /**\n    * Human readable (not intended to be parsed) OS version information, like e.g. reported by `ver` or `lsb_release -a` commands.\n    */\n    OS_DESCRIPTION: 'os.description',\n    /**\n    * Human readable operating system name.\n    */\n    OS_NAME: 'os.name',\n    /**\n    * The version string of the operating system as defined in [Version SpanAttributes](../../resource/semantic_conventions/README.md#version-attributes).\n    */\n    OS_VERSION: 'os.version',\n    /**\n    * Process identifier (PID).\n    */\n    PROCESS_PID: 'process.pid',\n    /**\n    * The name of the process executable. On Linux based systems, can be set to the `Name` in `proc/[pid]/status`. On Windows, can be set to the base name of `GetProcessImageFileNameW`.\n    */\n    PROCESS_EXECUTABLE_NAME: 'process.executable.name',\n    /**\n    * The full path to the process executable. On Linux based systems, can be set to the target of `proc/[pid]/exe`. On Windows, can be set to the result of `GetProcessImageFileNameW`.\n    */\n    PROCESS_EXECUTABLE_PATH: 'process.executable.path',\n    /**\n    * The command used to launch the process (i.e. the command name). On Linux based systems, can be set to the zeroth string in `proc/[pid]/cmdline`. On Windows, can be set to the first parameter extracted from `GetCommandLineW`.\n    */\n    PROCESS_COMMAND: 'process.command',\n    /**\n    * The full command used to launch the process as a single string representing the full command. On Windows, can be set to the result of `GetCommandLineW`. Do not set this if you have to assemble it just for monitoring; use `process.command_args` instead.\n    */\n    PROCESS_COMMAND_LINE: 'process.command_line',\n    /**\n    * All the command arguments (including the command/executable itself) as received by the process. On Linux-based systems (and some other Unixoid systems supporting procfs), can be set according to the list of null-delimited strings extracted from `proc/[pid]/cmdline`. For libc-based executables, this would be the full argv vector passed to `main`.\n    */\n    PROCESS_COMMAND_ARGS: 'process.command_args',\n    /**\n    * The username of the user that owns the process.\n    */\n    PROCESS_OWNER: 'process.owner',\n    /**\n    * The name of the runtime of this process. For compiled native binaries, this SHOULD be the name of the compiler.\n    */\n    PROCESS_RUNTIME_NAME: 'process.runtime.name',\n    /**\n    * The version of the runtime of this process, as returned by the runtime without modification.\n    */\n    PROCESS_RUNTIME_VERSION: 'process.runtime.version',\n    /**\n    * An additional description about the runtime of the process, for example a specific vendor customization of the runtime environment.\n    */\n    PROCESS_RUNTIME_DESCRIPTION: 'process.runtime.description',\n    /**\n    * Logical name of the service.\n    *\n    * Note: MUST be the same for all instances of horizontally scaled services. If the value was not specified, SDKs MUST fallback to `unknown_service:` concatenated with [`process.executable.name`](process.md#process), e.g. `unknown_service:bash`. If `process.executable.name` is not available, the value MUST be set to `unknown_service`.\n    */\n    SERVICE_NAME: 'service.name',\n    /**\n    * A namespace for `service.name`.\n    *\n    * Note: A string value having a meaning that helps to distinguish a group of services, for example the team name that owns a group of services. `service.name` is expected to be unique within the same namespace. If `service.namespace` is not specified in the Resource then `service.name` is expected to be unique for all services that have no explicit namespace defined (so the empty/unspecified namespace is simply one more valid namespace). Zero-length namespace string is assumed equal to unspecified namespace.\n    */\n    SERVICE_NAMESPACE: 'service.namespace',\n    /**\n    * The string ID of the service instance.\n    *\n    * Note: MUST be unique for each instance of the same `service.namespace,service.name` pair (in other words `service.namespace,service.name,service.instance.id` triplet MUST be globally unique). The ID helps to distinguish instances of the same service that exist at the same time (e.g. instances of a horizontally scaled service). It is preferable for the ID to be persistent and stay the same for the lifetime of the service instance, however it is acceptable that the ID is ephemeral and changes during important lifetime events for the service (e.g. service restarts). If the service has no inherent unique ID that can be used as the value of this attribute it is recommended to generate a random Version 1 or Version 4 RFC 4122 UUID (services aiming for reproducible UUIDs may also use Version 5, see RFC 4122 for more recommendations).\n    */\n    SERVICE_INSTANCE_ID: 'service.instance.id',\n    /**\n    * The version string of the service API or implementation.\n    */\n    SERVICE_VERSION: 'service.version',\n    /**\n    * The name of the telemetry SDK as defined above.\n    */\n    TELEMETRY_SDK_NAME: 'telemetry.sdk.name',\n    /**\n    * The language of the telemetry SDK.\n    */\n    TELEMETRY_SDK_LANGUAGE: 'telemetry.sdk.language',\n    /**\n    * The version string of the telemetry SDK.\n    */\n    TELEMETRY_SDK_VERSION: 'telemetry.sdk.version',\n    /**\n    * The version string of the auto instrumentation agent, if used.\n    */\n    TELEMETRY_AUTO_VERSION: 'telemetry.auto.version',\n    /**\n    * The name of the web engine.\n    */\n    WEBENGINE_NAME: 'webengine.name',\n    /**\n    * The version of the web engine.\n    */\n    WEBENGINE_VERSION: 'webengine.version',\n    /**\n    * Additional description of the web engine (e.g. detailed version and edition information).\n    */\n    WEBENGINE_DESCRIPTION: 'webengine.description',\n};\nexport var CloudProviderValues = {\n    /** Alibaba Cloud. */\n    ALIBABA_CLOUD: 'alibaba_cloud',\n    /** Amazon Web Services. */\n    AWS: 'aws',\n    /** Microsoft Azure. */\n    AZURE: 'azure',\n    /** Google Cloud Platform. */\n    GCP: 'gcp',\n};\nexport var CloudPlatformValues = {\n    /** Alibaba Cloud Elastic Compute Service. */\n    ALIBABA_CLOUD_ECS: 'alibaba_cloud_ecs',\n    /** Alibaba Cloud Function Compute. */\n    ALIBABA_CLOUD_FC: 'alibaba_cloud_fc',\n    /** AWS Elastic Compute Cloud. */\n    AWS_EC2: 'aws_ec2',\n    /** AWS Elastic Container Service. */\n    AWS_ECS: 'aws_ecs',\n    /** AWS Elastic Kubernetes Service. */\n    AWS_EKS: 'aws_eks',\n    /** AWS Lambda. */\n    AWS_LAMBDA: 'aws_lambda',\n    /** AWS Elastic Beanstalk. */\n    AWS_ELASTIC_BEANSTALK: 'aws_elastic_beanstalk',\n    /** Azure Virtual Machines. */\n    AZURE_VM: 'azure_vm',\n    /** Azure Container Instances. */\n    AZURE_CONTAINER_INSTANCES: 'azure_container_instances',\n    /** Azure Kubernetes Service. */\n    AZURE_AKS: 'azure_aks',\n    /** Azure Functions. */\n    AZURE_FUNCTIONS: 'azure_functions',\n    /** Azure App Service. */\n    AZURE_APP_SERVICE: 'azure_app_service',\n    /** Google Cloud Compute Engine (GCE). */\n    GCP_COMPUTE_ENGINE: 'gcp_compute_engine',\n    /** Google Cloud Run. */\n    GCP_CLOUD_RUN: 'gcp_cloud_run',\n    /** Google Cloud Kubernetes Engine (GKE). */\n    GCP_KUBERNETES_ENGINE: 'gcp_kubernetes_engine',\n    /** Google Cloud Functions (GCF). */\n    GCP_CLOUD_FUNCTIONS: 'gcp_cloud_functions',\n    /** Google Cloud App Engine (GAE). */\n    GCP_APP_ENGINE: 'gcp_app_engine',\n};\nexport var AwsEcsLaunchtypeValues = {\n    /** ec2. */\n    EC2: 'ec2',\n    /** fargate. */\n    FARGATE: 'fargate',\n};\nexport var HostArchValues = {\n    /** AMD64. */\n    AMD64: 'amd64',\n    /** ARM32. */\n    ARM32: 'arm32',\n    /** ARM64. */\n    ARM64: 'arm64',\n    /** Itanium. */\n    IA64: 'ia64',\n    /** 32-bit PowerPC. */\n    PPC32: 'ppc32',\n    /** 64-bit PowerPC. */\n    PPC64: 'ppc64',\n    /** 32-bit x86. */\n    X86: 'x86',\n};\nexport var OsTypeValues = {\n    /** Microsoft Windows. */\n    WINDOWS: 'windows',\n    /** Linux. */\n    LINUX: 'linux',\n    /** Apple Darwin. */\n    DARWIN: 'darwin',\n    /** FreeBSD. */\n    FREEBSD: 'freebsd',\n    /** NetBSD. */\n    NETBSD: 'netbsd',\n    /** OpenBSD. */\n    OPENBSD: 'openbsd',\n    /** DragonFly BSD. */\n    DRAGONFLYBSD: 'dragonflybsd',\n    /** HP-UX (Hewlett Packard Unix). */\n    HPUX: 'hpux',\n    /** AIX (Advanced Interactive eXecutive). */\n    AIX: 'aix',\n    /** Oracle Solaris. */\n    SOLARIS: 'solaris',\n    /** IBM z/OS. */\n    Z_OS: 'z_os',\n};\nexport var TelemetrySdkLanguageValues = {\n    /** cpp. */\n    CPP: 'cpp',\n    /** dotnet. */\n    DOTNET: 'dotnet',\n    /** erlang. */\n    ERLANG: 'erlang',\n    /** go. */\n    GO: 'go',\n    /** java. */\n    JAVA: 'java',\n    /** nodejs. */\n    NODEJS: 'nodejs',\n    /** php. */\n    PHP: 'php',\n    /** python. */\n    PYTHON: 'python',\n    /** ruby. */\n    RUBY: 'ruby',\n    /** webjs. */\n    WEBJS: 'webjs',\n};\n//# sourceMappingURL=SemanticResourceAttributes.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.oneDataSystemClientFactory = void 0;\n/**\n * Configures 1DS properly and returns the core client object\n * @param key The ingestion key\n * @param xhrOverride An optional override to use for requests instead of the XHTMLRequest object. Useful for node environments\n * @returns The AI core object\n */\nconst getAICore = async (key, vscodeAPI, xhrOverride) => {\n    const oneDs = await Promise.resolve().then(() => __importStar(require(/* webpackMode: \"eager\" */ \"@microsoft/1ds-core-js\")));\n    const postPlugin = await Promise.resolve().then(() => __importStar(require(/* webpackMode: \"eager\" */ \"@microsoft/1ds-post-js\")));\n    const appInsightsCore = new oneDs.AppInsightsCore();\n    const collectorChannelPlugin = new postPlugin.PostChannel();\n    // Configure the app insights core to send to collector++ and disable logging of debug info\n    const coreConfig = {\n        instrumentationKey: key,\n        endpointUrl: \"https://mobile.events.data.microsoft.com/OneCollector/1.0\",\n        loggingLevelTelemetry: 0,\n        loggingLevelConsole: 0,\n        disableCookiesUsage: true,\n        disableDbgExt: true,\n        disableInstrumentationKeyValidation: true,\n        channels: [[\n                collectorChannelPlugin\n            ]]\n    };\n    if (xhrOverride) {\n        coreConfig.extensionConfig = {};\n        // Configure the channel to use a XHR Request override since it's not available in node\n        const channelConfig = {\n            alwaysUseXhrOverride: true,\n            httpXHROverride: xhrOverride\n        };\n        coreConfig.extensionConfig[collectorChannelPlugin.identifier] = channelConfig;\n    }\n    const config = vscodeAPI.workspace.getConfiguration(\"telemetry\");\n    const internalTesting = config.get(\"internalTesting\");\n    appInsightsCore.initialize(coreConfig, []);\n    appInsightsCore.addTelemetryInitializer((envelope) => {\n        // Only add this flag when `telemetry.internalTesting` is enabled\n        if (!internalTesting) {\n            return;\n        }\n        envelope[\"ext\"] = envelope[\"ext\"] ?? {};\n        envelope[\"ext\"][\"utc\"] = envelope[\"ext\"][\"utc\"] ?? {};\n        // Sets it to be internal only based on Windows UTC flagging\n        envelope[\"ext\"][\"utc\"][\"flags\"] = 0x0000811ECD;\n    });\n    return appInsightsCore;\n};\n/**\n * Configures and creates a telemetry client using the 1DS sdk\n * @param key The ingestion key\n * @param xhrOverride An optional override to use for requests instead of the XHTMLRequest object. Useful for node environments\n */\nconst oneDataSystemClientFactory = async (key, vscodeAPI, xhrOverride) => {\n    const appInsightsCore = await getAICore(key, vscodeAPI, xhrOverride);\n    // Shape the app insights core from 1DS into a standard format\n    const telemetryClient = {\n        logEvent: (eventName, data) => {\n            try {\n                appInsightsCore?.track({\n                    name: eventName,\n                    baseData: { name: eventName, properties: data?.properties, measurements: data?.measurements }\n                });\n            }\n            catch (e) {\n                throw new Error(\"Failed to log event to app insights!\\n\" + e.message);\n            }\n        },\n        flush: async () => {\n            try {\n                appInsightsCore?.unload();\n            }\n            catch (e) {\n                throw new Error(\"Failed to flush app insights!\\n\" + e.message);\n            }\n        }\n    };\n    return telemetryClient;\n};\nexports.oneDataSystemClientFactory = oneDataSystemClientFactory;\n//# sourceMappingURL=1dsClientFactory.js.map","\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseTelemetryReporter = void 0;\nclass BaseTelemetryReporter {\n    constructor(telemetrySender, vscodeAPI, initializationOptions) {\n        this.telemetrySender = telemetrySender;\n        this.vscodeAPI = vscodeAPI;\n        this.userOptIn = false;\n        this.errorOptIn = false;\n        this.disposables = [];\n        this.telemetryLogger = this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender, initializationOptions);\n        // Keep track of the user's opt-in status\n        this.updateUserOptIn();\n        this.telemetryLogger.onDidChangeEnableStates(() => {\n            this.updateUserOptIn();\n        });\n    }\n    /**\n     * Updates the user's telemetry opt-in status\n     */\n    updateUserOptIn() {\n        this.errorOptIn = this.telemetryLogger.isErrorsEnabled;\n        this.userOptIn = this.telemetryLogger.isUsageEnabled;\n        // The sender is lazy loaded so if telemetry is off it's not loaded in\n        if (this.telemetryLogger.isErrorsEnabled || this.telemetryLogger.isUsageEnabled) {\n            this.telemetrySender.instantiateSender();\n        }\n    }\n    get telemetryLevel() {\n        if (this.errorOptIn && this.userOptIn) {\n            return \"all\";\n        }\n        else if (this.errorOptIn) {\n            return \"error\";\n        }\n        else {\n            return \"off\";\n        }\n    }\n    /**\n     * Internal function which logs telemetry events and takes extra options.\n     * @param eventName The name of the event\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryEvent(eventName, properties, measurements, dangerous) {\n        // If it's dangerous we skip going through the logger as the logger checks opt-in status, etc.\n        if (dangerous) {\n            this.telemetrySender.sendEventData(eventName, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logUsage(eventName, { properties, measurements });\n        }\n    }\n    /**\n     * Given an event name, some properties, and measurements sends a telemetry event.\n     * Properties are sanitized on best-effort basis to remove sensitive data prior to sending.\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryEvent(eventName, properties, measurements) {\n        this.internalSendTelemetryEvent(eventName, properties, measurements, false);\n    }\n    /**\n     * **DANGEROUS** Given an event name, some properties, and measurements sends a telemetry event without checking telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures, defaults to true\n     */\n    sendDangerousTelemetryEvent(eventName, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryEvent(eventName, properties, measurements, true);\n    }\n    /**\n     * Internal function which logs telemetry error events and takes extra options.\n     * @param eventName The name of the event\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryErrorEvent(eventName, properties, measurements, dangerous) {\n        if (dangerous) {\n            this.telemetrySender.sendEventData(eventName, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logError(eventName, { properties, measurements });\n        }\n    }\n    /**\n     * Given an event name, some properties, and measurements sends an error event\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryErrorEvent(eventName, properties, measurements) {\n        this.internalSendTelemetryErrorEvent(eventName, properties, measurements, false);\n    }\n    /**\n     * **DANGEROUS** Given an event name, some properties, and measurements sends a telemetry error event without checking telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to run the properties and measures through sanitiziation, defaults to true\n     */\n    sendDangerousTelemetryErrorEvent(eventName, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryErrorEvent(eventName, properties, measurements, true);\n    }\n    /**\n     * Internal function which logs telemetry exceptions and takes extra options\n     * @param error: The error to send\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryException(error, properties, measurements, dangerous) {\n        if (dangerous) {\n            this.telemetrySender.sendErrorData(error, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logError(error, { properties, measurements });\n        }\n    }\n    /**\n     * Given an error, properties, and measurements. Sends an exception event\n     * @param error The error to send\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryException(error, properties, measurements) {\n        this.internalSendTelemetryException(error, properties, measurements, false);\n    }\n    /**\n     * **DANGEROUS** Given an error, properties, and measurements. Sends an exception event without checking the telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures, defaults to true\n     */\n    sendDangerousTelemetryException(error, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryException(error, properties, measurements, true);\n    }\n    /**\n     * Disposes of the telemetry reporter\n     */\n    dispose() {\n        this.telemetryLogger.dispose();\n        return Promise.all(this.disposables.map(d => d.dispose()));\n    }\n}\nexports.BaseTelemetryReporter = BaseTelemetryReporter;\n//# sourceMappingURL=baseTelemetryReporter.js.map","\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseTelemetrySender = void 0;\nvar InstantiationStatus;\n(function (InstantiationStatus) {\n    InstantiationStatus[InstantiationStatus[\"NOT_INSTANTIATED\"] = 0] = \"NOT_INSTANTIATED\";\n    InstantiationStatus[InstantiationStatus[\"INSTANTIATING\"] = 1] = \"INSTANTIATING\";\n    InstantiationStatus[InstantiationStatus[\"INSTANTIATED\"] = 2] = \"INSTANTIATED\";\n})(InstantiationStatus || (InstantiationStatus = {}));\nclass BaseTelemetrySender {\n    constructor(key, clientFactory) {\n        // Whether or not the client has been instantiated\n        this._instantiationStatus = InstantiationStatus.NOT_INSTANTIATED;\n        // Queues used to store events until the sender is ready\n        this._eventQueue = [];\n        this._exceptionQueue = [];\n        this._clientFactory = clientFactory;\n        this._key = key;\n    }\n    /**\n     * Sends the event to the passed in telemetry client\n     * The sender does no telemetry level checks as those are done by the reporter.\n     * @param eventName The name of the event to log\n     * @param data The data contanied in the event\n     */\n    sendEventData(eventName, data) {\n        if (!this._telemetryClient) {\n            if (this._instantiationStatus !== InstantiationStatus.INSTANTIATED) {\n                this._eventQueue.push({ eventName, data });\n            }\n            return;\n        }\n        this._telemetryClient.logEvent(eventName, data);\n    }\n    /**\n     * Sends an exception to the passed in telemetry client\n     * The sender does no telemetry level checks as those are done by the reporter.\n     * @param exception The exception to collect\n     * @param data Data associated with the exception\n     */\n    sendErrorData(exception, data) {\n        if (!this._telemetryClient) {\n            if (this._instantiationStatus !== InstantiationStatus.INSTANTIATED) {\n                this._exceptionQueue.push({ exception, data });\n            }\n            return;\n        }\n        // No-op TODO @lramos15 convert into an unhandled error event\n    }\n    /**\n     * Flushes the buffered telemetry data\n     */\n    async flush() {\n        if (this._telemetryClient) {\n            await this._telemetryClient.flush();\n            this._telemetryClient = undefined;\n        }\n        return;\n    }\n    /**\n     * Flushes the queued events that existed before the client was instantiated\n     */\n    _flushQueues() {\n        this._eventQueue.forEach(({ eventName, data }) => this.sendEventData(eventName, data));\n        this._eventQueue = [];\n        this._exceptionQueue.forEach(({ exception, data }) => this.sendErrorData(exception, data));\n        this._exceptionQueue = [];\n    }\n    /**\n     * Instantiates the telemetry client to make the sender \"active\"\n     */\n    instantiateSender() {\n        if (this._instantiationStatus !== InstantiationStatus.NOT_INSTANTIATED) {\n            return;\n        }\n        this._instantiationStatus = InstantiationStatus.INSTANTIATING;\n        // Call the client factory to get the client and then let it know it's instatntiated\n        this._clientFactory(this._key).then(client => {\n            this._telemetryClient = client;\n            this._instantiationStatus = InstantiationStatus.INSTANTIATED;\n            this._flushQueues();\n        }).catch(err => {\n            console.error(err);\n            // If it failed to instntiate, then we don't want to try again.\n            // So we mark it as instantiated. See #94\n            this._instantiationStatus = InstantiationStatus.INSTANTIATED;\n        });\n    }\n}\nexports.BaseTelemetrySender = BaseTelemetrySender;\n//# sourceMappingURL=baseTelemetrySender.js.map","\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TelemetryUtil = void 0;\nclass TelemetryUtil {\n    static applyReplacements(data, replacementOptions) {\n        for (const key of Object.keys(data)) {\n            for (const option of replacementOptions) {\n                if (option.lookup.test(key)) {\n                    if (option.replacementString !== undefined) {\n                        data[key] = option.replacementString;\n                    }\n                    else {\n                        delete data[key];\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Given a key checks if it is a valid 1DS key\n     * @param key The key to check if it's a valid 1DS key\n     */\n    static shouldUseOneDataSystemSDK(key) {\n        // Simple to check to ensure the key is the right length and the dashes are in the right spot\n        return (key.length === 74 &&\n            key[32] === \"-\" &&\n            key[41] === \"-\" &&\n            key[46] === \"-\" &&\n            key[51] === \"-\" &&\n            key[56] === \"-\" &&\n            key[69] === \"-\");\n    }\n    // This also includes the common properties which core mixes in\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.nodeArch\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.uikind\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.remotename\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.isnewappinstall\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.product\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.telemetryclientversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    static getAdditionalCommonProperties(osShim) {\n        return {\n            \"common.os\": osShim.platform,\n            \"common.nodeArch\": osShim.architecture,\n            \"common.platformversion\": (osShim.release || \"\").replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, \"$1$2$3\"),\n            // Do not change this string as it gets found and replaced upon packaging\n            \"common.telemetryclientversion\": \"0.7.4-preview\"\n        };\n    }\n    // Get singleton instance of TelemetryUtil\n    static getInstance() {\n        if (!TelemetryUtil._instance) {\n            TelemetryUtil._instance = new TelemetryUtil();\n        }\n        return TelemetryUtil._instance;\n    }\n}\nexports.TelemetryUtil = TelemetryUtil;\n//# sourceMappingURL=util.js.map","\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst os = __importStar(require(\"os\"));\nconst vscode = __importStar(require(\"vscode\"));\nconst https = __importStar(require(\"https\"));\nconst baseTelemetryReporter_1 = require(\"../common/baseTelemetryReporter\");\nconst baseTelemetrySender_1 = require(\"../common/baseTelemetrySender\");\nconst util_1 = require(\"../common/util\");\nconst _1dsClientFactory_1 = require(\"../common/1dsClientFactory\");\n/**\n * A factory function which creates a telemetry client to be used by an sender to send telemetry in a node application.\n *\n * @param key The app insights key\n * @param replacementOptions Optional list of {@link ReplacementOption replacements} to apply to the telemetry client. This allows\n * the sender to filter out any sensitive or unnecessary information from the telemetry server.\n *\n * @returns A promise which resolves to the telemetry client or rejects upon error\n */\nconst appInsightsClientFactory = async (key, replacementOptions) => {\n    let appInsightsClient;\n    try {\n        process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"] = \"1\";\n        const appInsights = await Promise.resolve().then(() => __importStar(require(/* webpackMode: \"eager\" */ \"applicationinsights\")));\n        //check if another instance is already initialized\n        if (appInsights.defaultClient) {\n            appInsightsClient = new appInsights.TelemetryClient(key);\n            // no other way to enable offline mode\n            appInsightsClient.channel.setUseDiskRetryCaching(true);\n        }\n        else {\n            appInsights.setup(key)\n                .setAutoCollectRequests(false)\n                .setAutoCollectPerformance(false)\n                .setAutoCollectExceptions(false)\n                .setAutoCollectDependencies(false)\n                .setAutoDependencyCorrelation(false)\n                .setAutoCollectConsole(false)\n                .setAutoCollectHeartbeat(false)\n                .setUseDiskRetryCaching(true)\n                .start();\n            appInsightsClient = appInsights.defaultClient;\n        }\n        if (vscode && vscode.env) {\n            appInsightsClient.context.tags[appInsightsClient.context.keys.userId] = vscode.env.machineId;\n            appInsightsClient.context.tags[appInsightsClient.context.keys.sessionId] = vscode.env.sessionId;\n            appInsightsClient.context.tags[appInsightsClient.context.keys.cloudRole] = vscode.env.appName;\n            appInsightsClient.context.tags[appInsightsClient.context.keys.cloudRoleInstance] = vscode.env.appName;\n        }\n    }\n    catch (e) {\n        return Promise.reject(\"Failed to initialize app insights!\\n\" + e.message);\n    }\n    if (replacementOptions?.length) {\n        addReplacementOptions(appInsightsClient, replacementOptions);\n    }\n    // Sets the appinsights client into a standardized form\n    const telemetryClient = {\n        logEvent: (eventName, data) => {\n            try {\n                appInsightsClient?.trackEvent({\n                    name: eventName,\n                    properties: data?.properties,\n                    measurements: data?.measurements\n                });\n            }\n            catch (e) {\n                throw new Error(\"Failed to log event to app insights!\\n\" + e.message);\n            }\n        },\n        flush: async () => {\n            try {\n                appInsightsClient?.flush();\n            }\n            catch (e) {\n                throw new Error(\"Failed to flush app insights!\\n\" + e.message);\n            }\n        }\n    };\n    return telemetryClient;\n};\n/**\n * Adds replacement options to this {@link TelemetryClient}.\n *\n * If any replacement options are specified, this function will search through any event about to be\n * sent to the telemetry server and replace any matches with the specified replacement string. Both\n * the envelope and the base data will be searched.\n *\n * @param appInsightsClient The {@link TelemetryClient} to add the filters to.\n * @param replacementOptions The replacement options to add.\n */\nfunction addReplacementOptions(appInsightsClient, replacementOptions) {\n    appInsightsClient.addTelemetryProcessor((event) => {\n        if (Array.isArray(event.tags)) {\n            event.tags.forEach(tag => util_1.TelemetryUtil.applyReplacements(tag, replacementOptions));\n        }\n        else if (event.tags) {\n            util_1.TelemetryUtil.applyReplacements(event.tags, replacementOptions);\n        }\n        if (event.data.baseData) {\n            util_1.TelemetryUtil.applyReplacements(event.data.baseData, replacementOptions);\n        }\n        return true;\n    });\n}\n/**\n * Create a replacement for the XHTMLRequest object utilizing nodes HTTP module.\n * @returns A XHR override object used to override the XHTMLRequest object in the 1DS SDK\n */\nfunction getXHROverride() {\n    // Override the way events get sent since node doesn't have XHTMLRequest\n    const customHttpXHROverride = {\n        sendPOST: (payload, oncomplete) => {\n            const options = {\n                method: \"POST\",\n                headers: {\n                    ...payload.headers,\n                    \"Content-Type\": \"application/json\",\n                    \"Content-Length\": Buffer.byteLength(payload.data)\n                }\n            };\n            try {\n                const req = https.request(payload.urlString, options, res => {\n                    res.on(\"data\", function (responseData) {\n                        oncomplete(res.statusCode ?? 200, res.headers, responseData.toString());\n                    });\n                    // On response with error send status of 0 and a blank response to oncomplete so we can retry events\n                    res.on(\"error\", function () {\n                        oncomplete(0, {});\n                    });\n                });\n                req.write(payload.data);\n                req.end();\n            }\n            catch {\n                // If it errors out, send status of 0 and a blank response to oncomplete so we can retry events\n                oncomplete(0, {});\n            }\n        }\n    };\n    return customHttpXHROverride;\n}\nclass TelemetryReporter extends baseTelemetryReporter_1.BaseTelemetryReporter {\n    constructor(key, replacementOptions) {\n        let clientFactory = (key) => appInsightsClientFactory(key, replacementOptions);\n        // If key is usable by 1DS use the 1DS SDk\n        if (util_1.TelemetryUtil.shouldUseOneDataSystemSDK(key)) {\n            clientFactory = (key) => (0, _1dsClientFactory_1.oneDataSystemClientFactory)(key, vscode, getXHROverride());\n        }\n        const osShim = {\n            release: os.release(),\n            platform: os.platform(),\n            architecture: os.arch(),\n        };\n        const sender = new baseTelemetrySender_1.BaseTelemetrySender(key, clientFactory);\n        if (key && key.indexOf(\"AIF-\") === 0) {\n            throw new Error(\"AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions\");\n        }\n        super(sender, vscode, { additionalCommonProperties: util_1.TelemetryUtil.getAdditionalCommonProperties(osShim) });\n    }\n}\nexports.default = TelemetryReporter;\n//# sourceMappingURL=telemetryReporter.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AsyncScopeManager = exports.OpenTelemetryScopeManagerWrapper = void 0;\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar events_1 = require(\"events\");\r\nvar OpenTelemetryScopeManagerWrapper = /** @class */ (function () {\r\n    function OpenTelemetryScopeManagerWrapper() {\r\n    }\r\n    OpenTelemetryScopeManagerWrapper.prototype.active = function () {\r\n        var _this = this;\r\n        var context = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        return __assign(__assign({}, context), { getValue: function (key) {\r\n                // todo: lazy import activeSymbol from opentelemetry/api\r\n                if (!_this._activeSymbol) {\r\n                    _this._activeSymbol = key;\r\n                    return context;\r\n                }\r\n                if (key === _this._activeSymbol) {\r\n                    return context;\r\n                }\r\n                return false;\r\n            }, setValue: function () { } });\r\n    };\r\n    OpenTelemetryScopeManagerWrapper.prototype.with = function (span, fn) {\r\n        var parentSpanId = span.parentSpanId;\r\n        var name = span.name;\r\n        var correlationContext = OpenTelemetryScopeManagerWrapper._spanToContext(span, parentSpanId, name);\r\n        return CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, fn)();\r\n    };\r\n    OpenTelemetryScopeManagerWrapper.prototype.bind = function (target) {\r\n        if (typeof target === \"function\") {\r\n            return CorrelationContextManager_1.CorrelationContextManager.wrapCallback(target);\r\n        }\r\n        else if (target instanceof events_1.EventEmitter) {\r\n            CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(target);\r\n        }\r\n        return target;\r\n    };\r\n    OpenTelemetryScopeManagerWrapper.prototype.enable = function () {\r\n        CorrelationContextManager_1.CorrelationContextManager.enable();\r\n        return this;\r\n    };\r\n    OpenTelemetryScopeManagerWrapper.prototype.disable = function () {\r\n        CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        return this;\r\n    };\r\n    OpenTelemetryScopeManagerWrapper._spanToContext = function (span, parentSpanId, name) {\r\n        var spanContext = span.spanContext ? span.spanContext() : span.context(); // context is available in OT API <v0.19.0\r\n        var context = __assign(__assign({}, span.spanContext()), { traceFlags: span.spanContext().traceFlags });\r\n        var parentId = parentSpanId ? \"|\" + spanContext.traceId + \".\" + parentSpanId + \".\" : spanContext.traceId;\r\n        var aiContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        if (aiContext) {\r\n            context.traceId = aiContext.operation.id;\r\n            // If parent is no available use current context\r\n            if (!parentSpanId) {\r\n                parentId = aiContext.operation.parentId;\r\n            }\r\n        }\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.spanToContextObject(context, parentId, name);\r\n        return correlationContext;\r\n    };\r\n    return OpenTelemetryScopeManagerWrapper;\r\n}());\r\nexports.OpenTelemetryScopeManagerWrapper = OpenTelemetryScopeManagerWrapper;\r\nexports.AsyncScopeManager = new OpenTelemetryScopeManagerWrapper();\r\n//# sourceMappingURL=AsyncHooksScopeManager.js.map","\"use strict\";\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectConsole = /** @class */ (function () {\r\n    function AutoCollectConsole(client) {\r\n        if (!!AutoCollectConsole.INSTANCE) {\r\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\r\n        }\r\n        this._client = client;\r\n        AutoCollectConsole.INSTANCE = this;\r\n    }\r\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\r\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectConsole.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectConsole.prototype.dispose = function () {\r\n        AutoCollectConsole.INSTANCE = null;\r\n        this.enable(false, false);\r\n    };\r\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\r\n    return AutoCollectConsole;\r\n}());\r\nmodule.exports = AutoCollectConsole;\r\n//# sourceMappingURL=Console.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CorrelationContextManager = void 0;\r\nvar Logging = require(\"../Library/Logging\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar Traceparent = require(\"../Library/Traceparent\");\r\nvar Tracestate = require(\"../Library/Tracestate\");\r\nvar HttpRequestParser = require(\"./HttpRequestParser\");\r\nvar Util = require(\"../Library/Util\");\r\nvar CorrelationContextManager = /** @class */ (function () {\r\n    function CorrelationContextManager() {\r\n    }\r\n    /**\r\n     *  Provides the current Context.\r\n     *  The context is the most recent one entered into for the current\r\n     *  logical chain of execution, including across asynchronous calls.\r\n     */\r\n    CorrelationContextManager.getCurrentContext = function () {\r\n        if (!CorrelationContextManager.enabled) {\r\n            return null;\r\n        }\r\n        var context = CorrelationContextManager.session.get(CorrelationContextManager.CONTEXT_NAME);\r\n        if (context === undefined) { // cast undefined to null\r\n            return null;\r\n        }\r\n        return context;\r\n    };\r\n    /**\r\n     *  A helper to generate objects conforming to the CorrelationContext interface\r\n     */\r\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader, traceparent, tracestate) {\r\n        parentId = parentId || operationId;\r\n        if (this.enabled) {\r\n            return {\r\n                operation: {\r\n                    name: operationName,\r\n                    id: operationId,\r\n                    parentId: parentId,\r\n                    traceparent: traceparent,\r\n                    tracestate: tracestate\r\n                },\r\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    CorrelationContextManager.spanToContextObject = function (spanContext, parentId, name) {\r\n        var traceContext = new Traceparent();\r\n        traceContext.traceId = spanContext.traceId;\r\n        traceContext.spanId = spanContext.spanId;\r\n        traceContext.traceFlag = Traceparent.formatOpenTelemetryTraceFlags(spanContext.traceFlags) || Traceparent.DEFAULT_TRACE_FLAG;\r\n        traceContext.parentId = parentId;\r\n        return CorrelationContextManager.generateContextObject(traceContext.traceId, traceContext.parentId, name, null, traceContext);\r\n    };\r\n    /**\r\n     *  Runs a function inside a given Context.\r\n     *  All logical children of the execution path that entered this Context\r\n     *  will receive this Context object on calls to GetCurrentContext.\r\n     */\r\n    CorrelationContextManager.runWithContext = function (context, fn) {\r\n        var _a;\r\n        if (CorrelationContextManager.enabled) {\r\n            try {\r\n                return CorrelationContextManager.session.bind(fn, (_a = {}, _a[CorrelationContextManager.CONTEXT_NAME] = context, _a))();\r\n            }\r\n            catch (error) {\r\n                Logging.warn(\"Error binding to session context\", Util.dumpObj(error));\r\n            }\r\n        }\r\n        return fn();\r\n    };\r\n    /**\r\n     * Wrapper for cls-hooked bindEmitter method\r\n     */\r\n    CorrelationContextManager.wrapEmitter = function (emitter) {\r\n        if (CorrelationContextManager.enabled) {\r\n            try {\r\n                CorrelationContextManager.session.bindEmitter(emitter);\r\n            }\r\n            catch (error) {\r\n                Logging.warn(\"Error binding to session context\", Util.dumpObj(error));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *  Patches a callback to restore the correct Context when getCurrentContext\r\n     *  is run within it. This is necessary if automatic correlation fails to work\r\n     *  with user-included libraries.\r\n     *\r\n     *  The supplied callback will be given the same context that was present for\r\n     *  the call to wrapCallback.  */\r\n    CorrelationContextManager.wrapCallback = function (fn, context) {\r\n        var _a;\r\n        if (CorrelationContextManager.enabled) {\r\n            try {\r\n                return CorrelationContextManager.session.bind(fn, context ? (_a = {},\r\n                    _a[CorrelationContextManager.CONTEXT_NAME] = context,\r\n                    _a) : undefined);\r\n            }\r\n            catch (error) {\r\n                Logging.warn(\"Error binding to session context\", Util.dumpObj(error));\r\n            }\r\n        }\r\n        return fn;\r\n    };\r\n    /**\r\n     *  Enables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.enable = function (forceClsHooked) {\r\n        if (this.enabled) {\r\n            return;\r\n        }\r\n        if (!this.isNodeVersionCompatible()) {\r\n            this.enabled = false;\r\n            return;\r\n        }\r\n        if (!CorrelationContextManager.hasEverEnabled) {\r\n            this.forceClsHooked = forceClsHooked;\r\n            this.hasEverEnabled = true;\r\n            if (typeof this.cls === \"undefined\") {\r\n                if ((CorrelationContextManager.forceClsHooked === true) || (CorrelationContextManager.forceClsHooked === undefined && CorrelationContextManager.shouldUseClsHooked())) {\r\n                    this.cls = require(\"cls-hooked\");\r\n                }\r\n                else {\r\n                    this.cls = require(\"continuation-local-storage\");\r\n                }\r\n            }\r\n            CorrelationContextManager.session = this.cls.createNamespace(\"AI-CLS-Session\");\r\n            DiagChannel.registerContextPreservation(function (cb) {\r\n                try {\r\n                    return CorrelationContextManager.session.bind(cb);\r\n                }\r\n                catch (error) {\r\n                    Logging.warn(\"Error binding to session context\", Util.dumpObj(error));\r\n                }\r\n            });\r\n        }\r\n        this.enabled = true;\r\n    };\r\n    /**\r\n     * Create new correlation context.\r\n     */\r\n    CorrelationContextManager.startOperation = function (input, request) {\r\n        var traceContext = input && input.traceContext || null;\r\n        var span = input && input.spanContext ? input : null;\r\n        var spanContext = input && input.traceId ? input : null;\r\n        var headers = input && input.headers;\r\n        // OpenTelemetry Span\r\n        if (span) {\r\n            return this.spanToContextObject(span.spanContext(), span.parentSpanId, span.name);\r\n        }\r\n        // OpenTelemetry SpanContext\r\n        if (spanContext) {\r\n            return this.spanToContextObject(spanContext, \"|\" + spanContext.traceId + \".\" + spanContext.spanId + \".\", typeof request === \"string\" ? request : \"\");\r\n        }\r\n        // AzFunction TraceContext\r\n        if (traceContext) {\r\n            var traceparent = null;\r\n            var tracestate = null;\r\n            if (request.headers) {\r\n                if (request.headers.traceparent) {\r\n                    traceparent = new Traceparent(request.headers.traceparent);\r\n                }\r\n                else if (request.headers[\"request-id\"]) {\r\n                    traceparent = new Traceparent(null, request.headers[\"request-id\"]);\r\n                }\r\n                if (request.headers.tracestate) {\r\n                    tracestate = new Tracestate(request.headers.tracestate);\r\n                }\r\n            }\r\n            if (!traceparent) {\r\n                traceparent = new Traceparent(traceContext.traceparent);\r\n            }\r\n            if (!tracestate) {\r\n                tracestate = new Tracestate(traceContext.tracestate);\r\n            }\r\n            var parser = typeof request === \"object\"\r\n                ? new HttpRequestParser(request)\r\n                : null;\r\n            var correlationContext = CorrelationContextManager.generateContextObject(traceparent.traceId, traceparent.parentId, typeof request === \"string\"\r\n                ? request\r\n                : parser.getOperationName({}), parser && parser.getCorrelationContextHeader() || undefined, traceparent, tracestate);\r\n            return correlationContext;\r\n        }\r\n        // No TraceContext available, parse as http.IncomingMessage\r\n        if (headers) {\r\n            var traceparent = new Traceparent(headers.traceparent ? headers.traceparent.toString() : null);\r\n            var tracestate = new Tracestate(headers.tracestate ? headers.tracestate.toString() : null);\r\n            var parser = new HttpRequestParser(input);\r\n            var correlationContext = CorrelationContextManager.generateContextObject(traceparent.traceId, traceparent.parentId, parser.getOperationName({}), parser.getCorrelationContextHeader(), traceparent, tracestate);\r\n            return correlationContext;\r\n        }\r\n        Logging.warn(\"startOperation was called with invalid arguments\", arguments);\r\n        return null;\r\n    };\r\n    /**\r\n     *  Disables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.disable = function () {\r\n        this.enabled = false;\r\n    };\r\n    /**\r\n     * Reset the namespace\r\n     */\r\n    CorrelationContextManager.reset = function () {\r\n        if (CorrelationContextManager.hasEverEnabled) {\r\n            CorrelationContextManager.session = null;\r\n            CorrelationContextManager.session = this.cls.createNamespace(\"AI-CLS-Session\");\r\n        }\r\n    };\r\n    /**\r\n     *  Reports if CorrelationContextManager is able to run in this environment\r\n     */\r\n    CorrelationContextManager.isNodeVersionCompatible = function () {\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\r\n    };\r\n    /**\r\n     * We only want to use cls-hooked when it uses async_hooks api (8.2+), else\r\n     * use async-listener (plain -cls)\r\n     */\r\n    CorrelationContextManager.shouldUseClsHooked = function () {\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        return (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 2);\r\n    };\r\n    /**\r\n     * A TypeError is triggered by cls-hooked for node [8.0, 8.2)\r\n     * @internal Used in tests only\r\n     */\r\n    CorrelationContextManager.canUseClsHooked = function () {\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        var greater800 = (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 0);\r\n        var less820 = (parseInt(nodeVer[0]) < 8) || (parseInt(nodeVer[0]) <= 8 && parseInt(nodeVer[1]) < 2);\r\n        var greater470 = parseInt(nodeVer[0]) > 4 || (parseInt(nodeVer[0]) >= 4 && parseInt(nodeVer[1]) >= 7); // cls-hooked requires node 4.7+\r\n        return !(greater800 && less820) && greater470;\r\n    };\r\n    CorrelationContextManager.enabled = false;\r\n    CorrelationContextManager.hasEverEnabled = false;\r\n    CorrelationContextManager.forceClsHooked = undefined; // true: use cls-hooked, false: use cls, undefined: choose based on node version\r\n    CorrelationContextManager.CONTEXT_NAME = \"ApplicationInsights-Context\";\r\n    return CorrelationContextManager;\r\n}());\r\nexports.CorrelationContextManager = CorrelationContextManager;\r\nvar CustomPropertiesImpl = /** @class */ (function () {\r\n    function CustomPropertiesImpl(header) {\r\n        this.props = [];\r\n        this.addHeaderData(header);\r\n    }\r\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\r\n        var keyvals = header ? header.split(\", \") : [];\r\n        this.props = keyvals.map(function (keyval) {\r\n            var parts = keyval.split(\"=\");\r\n            return { key: parts[0], value: parts[1] };\r\n        }).concat(this.props);\r\n    };\r\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\r\n        return this.props.map(function (keyval) {\r\n            return keyval.key + \"=\" + keyval.value;\r\n        }).join(\", \");\r\n    };\r\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                return keyval.value;\r\n            }\r\n        }\r\n        return;\r\n    };\r\n    // TODO: Strictly according to the spec, properties which are recieved from\r\n    // an incoming request should be left untouched, while we may add our own new\r\n    // properties. The logic here will need to change to track that.\r\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\r\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\r\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\r\n            return;\r\n        }\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                keyval.value = val;\r\n                return;\r\n            }\r\n        }\r\n        this.props.push({ key: prop, value: val });\r\n    };\r\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\r\n    return CustomPropertiesImpl;\r\n}());\r\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\r\nvar AutoCollectExceptions = /** @class */ (function () {\r\n    function AutoCollectExceptions(client) {\r\n        if (!!AutoCollectExceptions.INSTANCE) {\r\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectExceptions.INSTANCE = this;\r\n        this._client = client;\r\n        // Only use for 13.7.0+\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        AutoCollectExceptions._canUseUncaughtExceptionMonitor = parseInt(nodeVer[0]) > 13 || (parseInt(nodeVer[0]) === 13 && parseInt(nodeVer[1]) >= 7);\r\n    }\r\n    AutoCollectExceptions.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        if (isEnabled) {\r\n            this._isInitialized = true;\r\n            if (!this._exceptionListenerHandle) {\r\n                // For scenarios like Promise.reject(), an error won't be passed to the handle. Create a placeholder\r\n                // error for these scenarios.\r\n                var handle = function (reThrow, name, error) {\r\n                    if (error === void 0) { error = new Error(AutoCollectExceptions._FALLBACK_ERROR_MESSAGE); }\r\n                    var exceptionTelemetry = { exception: error };\r\n                    // Add full error in context so it could used in telemetryProcessors\r\n                    exceptionTelemetry.contextObjects = {};\r\n                    exceptionTelemetry.contextObjects[\"Error\"] = error;\r\n                    _this._client.trackException(exceptionTelemetry);\r\n                    _this._client.flush({ isAppCrashing: true });\r\n                    // only rethrow when we are the only listener\r\n                    if (reThrow && name && process.listeners(name).length === 1) {\r\n                        console.error(error);\r\n                        process.exit(1);\r\n                    }\r\n                };\r\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\r\n                    // Node.js >= 13.7.0, use uncaughtExceptionMonitor. It handles both promises and exceptions\r\n                    this._exceptionListenerHandle = handle.bind(this, false, undefined); // never rethrows\r\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\r\n                }\r\n                else {\r\n                    this._exceptionListenerHandle = handle.bind(this, true, AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME);\r\n                    this._rejectionListenerHandle = handle.bind(this, false, undefined); // never rethrows\r\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                    process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this._exceptionListenerHandle) {\r\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\r\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\r\n                }\r\n                else {\r\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                    process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n                }\r\n                this._exceptionListenerHandle = undefined;\r\n                this._rejectionListenerHandle = undefined;\r\n                delete this._exceptionListenerHandle;\r\n                delete this._rejectionListenerHandle;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectExceptions.prototype.dispose = function () {\r\n        AutoCollectExceptions.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectExceptions.INSTANCE = null;\r\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME = \"uncaughtExceptionMonitor\";\r\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME = \"uncaughtException\";\r\n    AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME = \"unhandledRejection\";\r\n    AutoCollectExceptions._RETHROW_EXIT_MESSAGE = \"Application Insights Rethrow Exception Handler\";\r\n    AutoCollectExceptions._FALLBACK_ERROR_MESSAGE = \"A promise was rejected without providing an error. Application Insights generated this error stack for you.\";\r\n    AutoCollectExceptions._canUseUncaughtExceptionMonitor = false;\r\n    return AutoCollectExceptions;\r\n}());\r\nmodule.exports = AutoCollectExceptions;\r\n//# sourceMappingURL=Exceptions.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar Vm = require(\"../Library/AzureVirtualMachine\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar Context = require(\"../Library/Context\");\r\nvar HeartBeat = /** @class */ (function () {\r\n    function HeartBeat(client) {\r\n        this._collectionInterval = 900000;\r\n        if (!HeartBeat.INSTANCE) {\r\n            HeartBeat.INSTANCE = this;\r\n        }\r\n        this._isInitialized = false;\r\n        this._client = client;\r\n    }\r\n    HeartBeat.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._handle = setInterval(function () { return _this.trackHeartBeat(_this._client.config, function () { }); }, this._collectionInterval);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = null;\r\n            }\r\n        }\r\n    };\r\n    HeartBeat.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    HeartBeat.isEnabled = function () {\r\n        return HeartBeat.INSTANCE && HeartBeat.INSTANCE._isEnabled;\r\n    };\r\n    HeartBeat.prototype.trackHeartBeat = function (config, callback) {\r\n        var _this = this;\r\n        var waiting = false;\r\n        var properties = {};\r\n        var sdkVersion = Context.sdkVersion; // \"node\" or \"node-nativeperf\"\r\n        properties[\"sdk\"] = sdkVersion;\r\n        properties[\"osType\"] = os.type();\r\n        if (process.env.WEBSITE_SITE_NAME) { // Web apps\r\n            properties[\"appSrv_SiteName\"] = process.env.WEBSITE_SITE_NAME || \"\";\r\n            properties[\"appSrv_wsStamp\"] = process.env.WEBSITE_HOME_STAMPNAME || \"\";\r\n            properties[\"appSrv_wsHost\"] = process.env.WEBSITE_HOSTNAME || \"\";\r\n        }\r\n        else if (process.env.FUNCTIONS_WORKER_RUNTIME) { // Function apps\r\n            properties[\"azfunction_appId\"] = process.env.WEBSITE_HOSTNAME;\r\n        }\r\n        else if (config) {\r\n            if (this._isVM === undefined) {\r\n                waiting = true;\r\n                Vm.AzureVirtualMachine.getAzureComputeMetadata(config, function (vmInfo) {\r\n                    _this._isVM = vmInfo.isVM;\r\n                    if (_this._isVM) {\r\n                        properties[\"azInst_vmId\"] = vmInfo.id;\r\n                        properties[\"azInst_subscriptionId\"] = vmInfo.subscriptionId;\r\n                        properties[\"azInst_osType\"] = vmInfo.osType;\r\n                    }\r\n                    _this._client.trackMetric({ name: Constants.HeartBeatMetricName, value: 0, properties: properties });\r\n                    callback();\r\n                });\r\n            }\r\n        }\r\n        if (!waiting) {\r\n            this._client.trackMetric({ name: Constants.HeartBeatMetricName, value: 0, properties: properties });\r\n            callback();\r\n        }\r\n    };\r\n    HeartBeat.prototype.dispose = function () {\r\n        HeartBeat.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    return HeartBeat;\r\n}());\r\nmodule.exports = HeartBeat;\r\n//# sourceMappingURL=HeartBeat.js.map","\"use strict\";\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\nvar Traceparent = require(\"../Library/Traceparent\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectHttpDependencies = /** @class */ (function () {\r\n    function AutoCollectHttpDependencies(client) {\r\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\r\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpDependencies.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._initialize();\r\n        }\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/azure-coretracing.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpDependencies.prototype._initialize = function () {\r\n        var _this = this;\r\n        this._isInitialized = true;\r\n        var originalRequest = http.request;\r\n        var originalHttpsRequest = https.request;\r\n        var clientRequestPatch = function (request, options) {\r\n            try {\r\n                var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\r\n                    !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\r\n                // If someone else patched traceparent headers onto this request\r\n                var userAgentHeader = null;\r\n                // Azure SDK special handling\r\n                if (options.headers) {\r\n                    userAgentHeader = options.headers[\"User-Agent\"] || options.headers[\"user-agent\"];\r\n                    if (userAgentHeader && userAgentHeader.toString().indexOf(\"azsdk-js\") !== -1) {\r\n                        shouldCollect = false;\r\n                    }\r\n                }\r\n                if (request && options && shouldCollect) {\r\n                    CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\r\n                    if (_this._isEnabled) {\r\n                        // Mark as auto collected\r\n                        request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\r\n                        // If there is no context create one, this apply when no request is triggering the dependency\r\n                        if (!CorrelationContextManager_1.CorrelationContextManager.getCurrentContext()) {\r\n                            // Create correlation context and wrap execution\r\n                            var operationId = null;\r\n                            if (CorrelationIdManager.w3cEnabled) {\r\n                                var traceparent = new Traceparent();\r\n                                operationId = traceparent.traceId;\r\n                            }\r\n                            else {\r\n                                var requestId = CorrelationIdManager.generateRequestId(null);\r\n                                operationId = CorrelationIdManager.getRootId(requestId);\r\n                            }\r\n                            var correlationContext = CorrelationContextManager_1.CorrelationContextManager.generateContextObject(operationId);\r\n                            CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\r\n                                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\r\n                            });\r\n                        }\r\n                        else {\r\n                            AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (err) {\r\n                Logging.warn(\"Failed to generate dependency telemetry.\", Util.dumpObj(err));\r\n            }\r\n        };\r\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\r\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\r\n        // Patch both and leave a flag to not double-count on versions that just call through\r\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\r\n        http.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalRequest.call.apply(originalRequest, __spreadArrays([http, options], requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        https.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, __spreadArrays([https, options], requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        // Node 8 calls http.request from http.get using a local reference!\r\n        // We have to patch .get manually in this case and can't just assume request is enough\r\n        // We have to replace the entire method in this case. We can't call the original.\r\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\r\n        http.get = function (options) {\r\n            var _a;\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = http.request).call.apply(_a, __spreadArrays([http, options], requestArgs));\r\n            request.end();\r\n            return request;\r\n        };\r\n        https.get = function (options) {\r\n            var _a;\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = https.request).call.apply(_a, __spreadArrays([https, options], requestArgs));\r\n            request.end();\r\n            return request;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks an outgoing request. Because it may set headers this method must be called before\r\n     * writing content to or ending the request.\r\n     */\r\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\r\n        if (!telemetry.options || !telemetry.request || !client) {\r\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\r\n            return;\r\n        }\r\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\r\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var uniqueRequestId;\r\n        var uniqueTraceparent;\r\n        if (currentContext && currentContext.operation && currentContext.operation.traceparent && Traceparent.isValidTraceId(currentContext.operation.traceparent.traceId)) {\r\n            currentContext.operation.traceparent.updateSpanId();\r\n            uniqueRequestId = currentContext.operation.traceparent.getBackCompatRequestId();\r\n        }\r\n        else if (CorrelationIdManager.w3cEnabled) {\r\n            // Start an operation now so that we can include the w3c headers in the outgoing request\r\n            var traceparent = new Traceparent();\r\n            uniqueTraceparent = traceparent.toString();\r\n            uniqueRequestId = traceparent.getBackCompatRequestId();\r\n        }\r\n        else {\r\n            uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + \".\");\r\n        }\r\n        // Add the source correlationId to the request headers, if a value was not already provided.\r\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\r\n        // are not included in the v0.10 type declarations currently used. So check if the\r\n        // methods exist before invoking them.\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\r\n            if (client.config && client.config.correlationId) {\r\n                // getHeader returns \"any\" type in newer versions of node. In basic scenarios, this will be <string | string[] | number>, but could be modified to anything else via middleware\r\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\r\n                try {\r\n                    Util.safeIncludeCorrelationHeader(client, telemetry.request, correlationHeader);\r\n                }\r\n                catch (err) {\r\n                    Logging.warn(\"Request-Context header could not be set. Correlation of requests may be lost\", err);\r\n                }\r\n                if (currentContext && currentContext.operation) {\r\n                    try {\r\n                        telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\r\n                        // Also set legacy headers\r\n                        if (!client.config.ignoreLegacyHeaders) {\r\n                            telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\r\n                            telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\r\n                        }\r\n                        // Set W3C headers, if available\r\n                        if (uniqueTraceparent || currentContext.operation.traceparent) {\r\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, uniqueTraceparent || currentContext.operation.traceparent.toString());\r\n                        }\r\n                        else if (CorrelationIdManager.w3cEnabled) {\r\n                            // should never get here since we set uniqueTraceparent above for the w3cEnabled scenario\r\n                            var traceparent = new Traceparent().toString();\r\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, traceparent);\r\n                        }\r\n                        if (currentContext.operation.tracestate) {\r\n                            var tracestate = currentContext.operation.tracestate.toString();\r\n                            if (tracestate) {\r\n                                telemetry.request.setHeader(RequestResponseHeaders.traceStateHeader, tracestate);\r\n                            }\r\n                        }\r\n                        var correlationContextHeader = currentContext.customProperties.serializeToHeader();\r\n                        if (correlationContextHeader) {\r\n                            telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\r\n                        }\r\n                    }\r\n                    catch (err) {\r\n                        Logging.warn(\"Correlation headers could not be set. Correlation of requests may be lost.\", err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // Collect dependency telemetry about the request when it finishes.\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on(\"response\", function (response) {\r\n                if (telemetry.isProcessed) {\r\n                    return;\r\n                }\r\n                telemetry.isProcessed = true;\r\n                requestParser.onResponse(response);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n            telemetry.request.on(\"error\", function (error) {\r\n                if (telemetry.isProcessed) {\r\n                    return;\r\n                }\r\n                telemetry.isProcessed = true;\r\n                requestParser.onError(error);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"Error\"] = error;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n            telemetry.request.on(\"abort\", function () {\r\n                if (telemetry.isProcessed) {\r\n                    return;\r\n                }\r\n                telemetry.isProcessed = true;\r\n                requestParser.onError(new Error(\"The request has been aborted and the network socket has closed.\"));\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.dispose = function () {\r\n        AutoCollectHttpDependencies.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectHttpDependencies.disableCollectionRequestOption = \"disableAppInsightsAutoCollection\";\r\n    AutoCollectHttpDependencies.requestNumber = 1;\r\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = \"_appInsightsAutoCollected\";\r\n    return AutoCollectHttpDependencies;\r\n}());\r\nmodule.exports = AutoCollectHttpDependencies;\r\n//# sourceMappingURL=HttpDependencies.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\n/**\r\n * Helper class to read data from the request/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpDependencyParser = /** @class */ (function (_super) {\r\n    __extends(HttpDependencyParser, _super);\r\n    function HttpDependencyParser(requestOptions, request) {\r\n        var _this = _super.call(this) || this;\r\n        if (request && request.method && requestOptions) {\r\n            // The ClientRequest.method property isn't documented, but is always there.\r\n            _this.method = request.method;\r\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\r\n            _this.startTime = +new Date();\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Called when the ClientRequest emits an error event.\r\n     */\r\n    HttpDependencyParser.prototype.onError = function (error) {\r\n        this._setStatus(undefined, error);\r\n    };\r\n    /**\r\n     * Called when the ClientRequest emits a response event.\r\n     */\r\n    HttpDependencyParser.prototype.onResponse = function (response) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\r\n    };\r\n    /**\r\n     * Gets a dependency data contract object for a completed ClientRequest.\r\n     */\r\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\r\n        var dependencyName = this.method.toUpperCase();\r\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        var remoteDependencyTarget = \"\";\r\n        try {\r\n            var urlObject = new url.URL(this.url);\r\n            urlObject.search = undefined;\r\n            urlObject.hash = undefined;\r\n            dependencyName += \" \" + urlObject.pathname;\r\n            remoteDependencyTarget = urlObject.hostname;\r\n            if (urlObject.port) {\r\n                remoteDependencyTarget += \":\" + urlObject.port;\r\n            }\r\n        }\r\n        catch (ex) { // Invalid URL\r\n            // Ignore error\r\n        }\r\n        if (this.correlationId) {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\r\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\r\n                remoteDependencyTarget += \" | \" + this.correlationId;\r\n            }\r\n        }\r\n        else {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        }\r\n        var dependencyTelemetry = {\r\n            id: dependencyId,\r\n            name: dependencyName,\r\n            data: this.url,\r\n            duration: this.duration,\r\n            success: this._isSuccess(),\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            properties: this.properties || {},\r\n            dependencyTypeName: remoteDependencyType,\r\n            target: remoteDependencyTarget\r\n        };\r\n        if (baseTelemetry && baseTelemetry.time) {\r\n            dependencyTelemetry.time = baseTelemetry.time;\r\n        }\r\n        else if (this.startTime) {\r\n            dependencyTelemetry.time = new Date(this.startTime);\r\n        }\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!dependencyTelemetry[key]) {\r\n                    dependencyTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return dependencyTelemetry;\r\n    };\r\n    /**\r\n     * Builds a URL from request options, using the same logic as http.request(). This is\r\n     * necessary because a ClientRequest object does not expose a url property.\r\n     */\r\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\r\n        if (typeof options === \"string\") {\r\n            if (options.indexOf(\"http://\") === 0 || options.indexOf(\"https://\") === 0) {\r\n                // protocol exists, parse normally\r\n                try {\r\n                    options = new url.URL(options);\r\n                }\r\n                catch (ex) {\r\n                    // Ignore error\r\n                }\r\n            }\r\n            else {\r\n                // protocol not found, insert http/https where appropriate\r\n                try {\r\n                    var parsed = new url.URL(\"http://\" + options);\r\n                    if (parsed.port === \"443\") {\r\n                        options = new url.URL(\"https://\" + options);\r\n                    }\r\n                    else {\r\n                        options = new url.URL(\"http://\" + options);\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    // Ignore error\r\n                }\r\n            }\r\n        }\r\n        else if (options && typeof url.URL === \"function\" && options instanceof url.URL) {\r\n            return url.format(options);\r\n        }\r\n        else {\r\n            // Avoid modifying the original options object.\r\n            var originalOptions_1 = options;\r\n            options = {};\r\n            if (originalOptions_1) {\r\n                Object.keys(originalOptions_1).forEach(function (key) {\r\n                    options[key] = originalOptions_1[key];\r\n                });\r\n            }\r\n        }\r\n        // Oddly, url.format ignores path and only uses pathname and search,\r\n        // so create them from the path, if path was specified\r\n        if (options.path && options.host) {\r\n            // need to force a protocol to make parameter valid - base url is required when input is a relative url\r\n            try {\r\n                var parsedQuery = new url.URL(options.path, \"http://\" + options.host + options.path);\r\n                options.pathname = parsedQuery.pathname;\r\n                options.search = parsedQuery.search;\r\n            }\r\n            catch (ex) {\r\n                // Ignore error\r\n            }\r\n        }\r\n        // Sometimes the hostname is provided but not the host\r\n        // Add in the path when this occurs\r\n        if (options.path && options.hostname && !options.host) {\r\n            // need to force a protocol to make parameter valid - base url is required when input is a relative url\r\n            try {\r\n                var parsedQuery = new url.URL(options.path, \"http://\" + options.hostname + options.path);\r\n                options.pathname = parsedQuery.pathname;\r\n                options.search = parsedQuery.search;\r\n            }\r\n            catch (ex) {\r\n                // Ignore error\r\n            }\r\n        }\r\n        // Similarly, url.format ignores hostname and port if host is specified,\r\n        // even if host doesn't have the port, but http.request does not work\r\n        // this way. It will use the port if one is not specified in host,\r\n        // effectively treating host as hostname, but will use the port specified\r\n        // in host if it exists.\r\n        if (options.host && options.port) {\r\n            // Force a protocol so it will parse the host as the host, not path.\r\n            // It is discarded and not used, so it doesn't matter if it doesn't match\r\n            try {\r\n                var parsedHost = new url.URL(\"http://\" + options.host);\r\n                if (!parsedHost.port && options.port) {\r\n                    options.hostname = options.host;\r\n                    delete options.host;\r\n                }\r\n            }\r\n            catch (ex) {\r\n                // Ignore error\r\n            }\r\n        }\r\n        // Mix in default values used by http.request and others\r\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || (request.protocol) || undefined;\r\n        options.hostname = options.hostname || \"localhost\";\r\n        return url.format(options);\r\n    };\r\n    return HttpDependencyParser;\r\n}(RequestParser));\r\nmodule.exports = HttpDependencyParser;\r\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\nvar Tracestate = require(\"../Library/Tracestate\");\r\nvar Traceparent = require(\"../Library/Traceparent\");\r\n/**\r\n * Helper class to read data from the request/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpRequestParser = /** @class */ (function (_super) {\r\n    __extends(HttpRequestParser, _super);\r\n    function HttpRequestParser(request, requestId) {\r\n        var _this = _super.call(this) || this;\r\n        if (request) {\r\n            _this.method = request.method;\r\n            _this.url = _this._getAbsoluteUrl(request);\r\n            _this.startTime = +new Date();\r\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\r\n            _this.parseHeaders(request, requestId);\r\n            if (request.connection) {\r\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\r\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\r\n        this._setStatus(undefined, error);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\r\n        var name = this.method;\r\n        try {\r\n            name += \" \" + new url.URL(this.url).pathname;\r\n        }\r\n        catch (ex) { // Invalid URL\r\n            // Ignore error\r\n        }\r\n        var requestTelemetry = {\r\n            id: this.requestId,\r\n            name: name,\r\n            url: this.url,\r\n            /*\r\n            See https://github.com/microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\r\n            for reference\r\n            */\r\n            source: this.sourceCorrelationId,\r\n            duration: this.duration,\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            success: this._isSuccess(),\r\n            properties: this.properties\r\n        };\r\n        if (baseTelemetry && baseTelemetry.time) {\r\n            requestTelemetry.time = baseTelemetry.time;\r\n        }\r\n        else if (this.startTime) {\r\n            requestTelemetry.time = new Date(this.startTime);\r\n        }\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!requestTelemetry[key]) {\r\n                    requestTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return requestTelemetry;\r\n    };\r\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\r\n        // create a copy of the context for requests since client info will be used here\r\n        var newTags = {};\r\n        for (var key in tags) {\r\n            newTags[key] = tags[key];\r\n        }\r\n        // don't override tags if they are already set\r\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\r\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\r\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\r\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\r\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\r\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\r\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\r\n        return newTags;\r\n    };\r\n    HttpRequestParser.prototype.getOperationId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\r\n    };\r\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\r\n    };\r\n    HttpRequestParser.prototype.getOperationName = function (tags) {\r\n        if (tags[HttpRequestParser.keys.operationName]) {\r\n            return tags[HttpRequestParser.keys.operationName];\r\n        }\r\n        var pathName = \"\";\r\n        try {\r\n            pathName = new url.URL(this.url).pathname;\r\n        }\r\n        catch (ex) { // Invalid URL\r\n            // Ignore error\r\n        }\r\n        var operationName = this.method;\r\n        if (pathName) {\r\n            operationName += \" \" + pathName;\r\n        }\r\n        return operationName;\r\n    };\r\n    HttpRequestParser.prototype.getRequestId = function () {\r\n        return this.requestId;\r\n    };\r\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\r\n        return this.correlationContextHeader;\r\n    };\r\n    HttpRequestParser.prototype.getTraceparent = function () {\r\n        return this.traceparent;\r\n    };\r\n    HttpRequestParser.prototype.getTracestate = function () {\r\n        return this.tracestate;\r\n    };\r\n    HttpRequestParser.prototype.getLegacyRootId = function () {\r\n        return this.legacyRootId;\r\n    };\r\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\r\n        if (!request.headers) {\r\n            return request.url;\r\n        }\r\n        var encrypted = request.connection ? request.connection.encrypted : null;\r\n        var protocol = (encrypted || request.headers[\"x-forwarded-proto\"] == \"https\") ? \"https\" : \"http\";\r\n        var baseUrl = protocol + \"://\" + request.headers.host + \"/\";\r\n        var pathName = \"\";\r\n        var search = \"\";\r\n        try {\r\n            var requestUrl = new url.URL(request.url, baseUrl);\r\n            pathName = requestUrl.pathname;\r\n            search = requestUrl.search;\r\n        }\r\n        catch (ex) {\r\n            // Ignore errors\r\n        }\r\n        var absoluteUrl = url.format({\r\n            protocol: protocol,\r\n            host: request.headers.host,\r\n            pathname: pathName,\r\n            search: search\r\n        });\r\n        return absoluteUrl;\r\n    };\r\n    HttpRequestParser.prototype._getIp = function () {\r\n        // regex to match ipv4 without port\r\n        // Note: including the port would cause the payload to be rejected by the data collector\r\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\r\n        var check = function (str) {\r\n            var results = ipMatch.exec(str);\r\n            if (results) {\r\n                return results[0];\r\n            }\r\n        };\r\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\r\n            || check(this.rawHeaders[\"x-client-ip\"])\r\n            || check(this.rawHeaders[\"x-real-ip\"])\r\n            || check(this.connectionRemoteAddress)\r\n            || check(this.socketRemoteAddress)\r\n            || check(this.legacySocketRemoteAddress);\r\n        // node v12 returns this if the address is \"localhost\"\r\n        if (!ip\r\n            && this.connectionRemoteAddress\r\n            && this.connectionRemoteAddress.substr\r\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\r\n            ip = \"127.0.0.1\";\r\n        }\r\n        return ip;\r\n    };\r\n    HttpRequestParser.prototype._getId = function (name) {\r\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\r\n            typeof this.rawHeaders[\"cookie\"] === \"string\" && this.rawHeaders[\"cookie\"]) || \"\";\r\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\r\n        return value;\r\n    };\r\n    /**\r\n     * Sets this operation's operationId, parentId, requestId (and legacyRootId, if necessary) based on this operation's traceparent\r\n     */\r\n    HttpRequestParser.prototype.setBackCompatFromThisTraceContext = function () {\r\n        // Set operationId\r\n        this.operationId = this.traceparent.traceId;\r\n        if (this.traceparent.legacyRootId) {\r\n            this.legacyRootId = this.traceparent.legacyRootId;\r\n        }\r\n        // Set parentId with existing spanId\r\n        this.parentId = this.traceparent.parentId;\r\n        // Update the spanId and set the current requestId\r\n        this.traceparent.updateSpanId();\r\n        this.requestId = this.traceparent.getBackCompatRequestId();\r\n    };\r\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\r\n        this.rawHeaders = request.headers || request.rawHeaders;\r\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\r\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\r\n        if (request.headers) {\r\n            var tracestateHeader = request.headers[RequestResponseHeaders.traceStateHeader] ? request.headers[RequestResponseHeaders.traceStateHeader].toString() : null; // w3c header\r\n            var traceparentHeader = request.headers[RequestResponseHeaders.traceparentHeader] ? request.headers[RequestResponseHeaders.traceparentHeader].toString() : null; // w3c header\r\n            var requestIdHeader = request.headers[RequestResponseHeaders.requestIdHeader] ? request.headers[RequestResponseHeaders.requestIdHeader].toString() : null; // default AI header\r\n            var legacy_parentId = request.headers[RequestResponseHeaders.parentIdHeader] ? request.headers[RequestResponseHeaders.parentIdHeader].toString() : null; // legacy AI header\r\n            var legacy_rootId = request.headers[RequestResponseHeaders.rootIdHeader] ? request.headers[RequestResponseHeaders.rootIdHeader].toString() : null; // legacy AI header\r\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader] ? request.headers[RequestResponseHeaders.correlationContextHeader].toString() : null;\r\n            if (CorrelationIdManager.w3cEnabled && (traceparentHeader || tracestateHeader)) {\r\n                // Parse W3C Trace Context headers\r\n                this.traceparent = new Traceparent(traceparentHeader ? traceparentHeader.toString() : null); // new traceparent is always created from this\r\n                this.tracestate = traceparentHeader && tracestateHeader && new Tracestate(tracestateHeader ? tracestateHeader.toString() : null); // discard tracestate if no traceparent is present\r\n                this.setBackCompatFromThisTraceContext();\r\n            }\r\n            else if (requestIdHeader) {\r\n                // Parse AI headers\r\n                if (CorrelationIdManager.w3cEnabled) {\r\n                    this.traceparent = new Traceparent(null, requestIdHeader);\r\n                    this.setBackCompatFromThisTraceContext();\r\n                }\r\n                else {\r\n                    this.parentId = requestIdHeader;\r\n                    this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\r\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n                }\r\n            }\r\n            else {\r\n                // Legacy fallback\r\n                if (CorrelationIdManager.w3cEnabled) {\r\n                    this.traceparent = new Traceparent();\r\n                    this.traceparent.parentId = legacy_parentId;\r\n                    this.traceparent.legacyRootId = legacy_rootId || legacy_parentId;\r\n                    this.setBackCompatFromThisTraceContext();\r\n                }\r\n                else {\r\n                    this.parentId = legacy_parentId;\r\n                    this.requestId = CorrelationIdManager.generateRequestId(legacy_rootId || this.parentId);\r\n                    this.correlationContextHeader = null;\r\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n                }\r\n            }\r\n            if (requestId) {\r\n                // For the scenarios that don't guarantee an AI-created context,\r\n                // override the requestId with the provided one.\r\n                this.requestId = requestId;\r\n                this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n            }\r\n        }\r\n    };\r\n    HttpRequestParser.parseId = function (cookieValue) {\r\n        var cookieParts = cookieValue.split(\"|\");\r\n        if (cookieParts.length > 0) {\r\n            return cookieParts[0];\r\n        }\r\n        return \"\"; // old behavior was to return \"\" for incorrect parsing\r\n    };\r\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\r\n    return HttpRequestParser;\r\n}(RequestParser));\r\nmodule.exports = HttpRequestParser;\r\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpRequestParser = require(\"./HttpRequestParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar AutoCollectPerformance = require(\"./Performance\");\r\nvar AutoCollectHttpRequests = /** @class */ (function () {\r\n    function AutoCollectHttpRequests(client) {\r\n        if (!!AutoCollectHttpRequests.INSTANCE) {\r\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpRequests.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        // Autocorrelation requires automatic monitoring of incoming server requests\r\n        // Disabling autocollection but enabling autocorrelation will still enable\r\n        // request monitoring but will not produce request events\r\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\r\n            this.useAutoCorrelation(this._isAutoCorrelating);\r\n            this._initialize();\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled, forceClsHooked) {\r\n        if (isEnabled && !this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.enable(forceClsHooked);\r\n        }\r\n        else if (!isEnabled && this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        }\r\n        this._isAutoCorrelating = isEnabled;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\r\n        return this._isAutoCorrelating;\r\n    };\r\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\r\n        if (!this._isAutoCorrelating) {\r\n            return;\r\n        }\r\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader(), requestParser.getTraceparent(), requestParser.getTracestate());\r\n    };\r\n    AutoCollectHttpRequests.prototype._registerRequest = function (request, response, onRequest) {\r\n        var _this = this;\r\n        // Set up correlation context\r\n        var requestParser = new HttpRequestParser(request);\r\n        var correlationContext = this._generateCorrelationContext(requestParser);\r\n        // Note: Check for if correlation is enabled happens within this method.\r\n        // If not enabled, function will directly call the callback.\r\n        CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\r\n            if (_this._isEnabled) {\r\n                // Mark as auto collected\r\n                request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\r\n                // Auto collect request\r\n                AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser);\r\n            }\r\n            if (typeof onRequest === \"function\") {\r\n                onRequest(request, response);\r\n            }\r\n        });\r\n    };\r\n    AutoCollectHttpRequests.prototype._initialize = function () {\r\n        this._isInitialized = true;\r\n        // Avoid the creation of multiple handler on http(s).createServer\r\n        if (AutoCollectHttpRequests.HANDLER_READY) {\r\n            return;\r\n        }\r\n        AutoCollectHttpRequests.HANDLER_READY = true;\r\n        var wrapOnRequestHandler = function (onRequest) {\r\n            if (!onRequest) {\r\n                return undefined;\r\n            }\r\n            if (typeof onRequest !== \"function\") {\r\n                throw new Error(\"onRequest handler must be a function\");\r\n            }\r\n            return function (request, response) {\r\n                var _a;\r\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\r\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(response);\r\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\r\n                if (request && shouldCollect) {\r\n                    (_a = AutoCollectHttpRequests.INSTANCE) === null || _a === void 0 ? void 0 : _a._registerRequest(request, response, onRequest);\r\n                }\r\n                else {\r\n                    if (typeof onRequest === \"function\") {\r\n                        onRequest(request, response);\r\n                    }\r\n                }\r\n            };\r\n        };\r\n        // The `http.createServer` function will instantiate a new http.Server object.\r\n        // Inside the Server's constructor, it is using addListener to register the\r\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\r\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\r\n        //    the http.createServer call. Or\r\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\r\n        //    fresh server instance. This seems more stable for possible future changes as\r\n        //    it also covers the case where the Server might not use addListener to manage\r\n        //    the callback internally.\r\n        //    And also as long as the constructor uses addListener to add the handle, it is\r\n        //    ok to patch the addListener after construction only. Because if we would patch\r\n        //    the prototype one and the createServer method, we would wrap the handler twice\r\n        //    in case of the constructor call.\r\n        var wrapServerEventHandler = function (server) {\r\n            var originalAddListener = server.addListener.bind(server);\r\n            server.addListener = function (eventType, eventHandler) {\r\n                switch (eventType) {\r\n                    case \"request\":\r\n                    case \"checkContinue\":\r\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\r\n                    default:\r\n                        return originalAddListener(eventType, eventHandler);\r\n                }\r\n            };\r\n            // on is an alias to addListener only\r\n            server.on = server.addListener;\r\n        };\r\n        var originalHttpServer = http.createServer;\r\n        // options parameter was added in Node.js v9.6.0, v8.12.0\r\n        // function createServer(requestListener?: RequestListener): Server;\r\n        // function createServer(options: ServerOptions, requestListener?: RequestListener): Server;\r\n        http.createServer = function (param1, param2) {\r\n            // todo: get a pointer to the server so the IP address can be read from server.address\r\n            if (param2 && typeof param2 === \"function\") {\r\n                var server = originalHttpServer(param1, wrapOnRequestHandler(param2));\r\n                wrapServerEventHandler(server);\r\n                return server;\r\n            }\r\n            else {\r\n                var server = originalHttpServer(wrapOnRequestHandler(param1));\r\n                wrapServerEventHandler(server);\r\n                return server;\r\n            }\r\n        };\r\n        var originalHttpsServer = https.createServer;\r\n        https.createServer = function (options, onRequest) {\r\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\r\n            wrapServerEventHandler(server);\r\n            return server;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\r\n     */\r\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        telemetry.isProcessed = false;\r\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\r\n        // Overwrite correlation context with request parser results\r\n        if (correlationContext) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\r\n    };\r\n    /**\r\n     * Tracks a request by listening to the response 'finish' event\r\n     */\r\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        telemetry.isProcessed = false;\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\r\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        }\r\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\r\n        if (correlationContext && !_requestParser) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        // response listeners\r\n        if (telemetry.response.once) {\r\n            telemetry.response.once(\"finish\", function () {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\r\n            });\r\n        }\r\n        // track a failed request if an error is emitted\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on(\"error\", function (error) {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\r\n            });\r\n        }\r\n        // track an aborted request if an aborted event is emitted\r\n        // Newer versions of Node.js runtime will trigger error event as well, we need to ensure telemetry is not generated multiple times\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on(\"aborted\", function () {\r\n                var errorMessage = \"The request has been aborted and the network socket has closed.\";\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, errorMessage);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Add the target correlationId to the response headers, if not already provided.\r\n     */\r\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\r\n        if (client.config && client.config.correlationId &&\r\n            response.getHeader && response.setHeader && !response.headersSent) {\r\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\r\n            Util.safeIncludeCorrelationHeader(client, response, correlationHeader);\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\r\n        if (telemetry.isProcessed) {\r\n            return;\r\n        }\r\n        telemetry.isProcessed = true;\r\n        if (error) {\r\n            requestParser.onError(error, ellapsedMilliseconds);\r\n        }\r\n        else {\r\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\r\n        }\r\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\r\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\r\n        if (telemetry.tagOverrides) {\r\n            for (var key in telemetry.tagOverrides) {\r\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\r\n            }\r\n        }\r\n        var legacyRootId = requestParser.getLegacyRootId();\r\n        if (legacyRootId) {\r\n            requestTelemetry.properties[\"ai_legacyRootId\"] = legacyRootId;\r\n        }\r\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\r\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\r\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\r\n        client.trackRequest(requestTelemetry);\r\n    };\r\n    AutoCollectHttpRequests.prototype.dispose = function () {\r\n        AutoCollectHttpRequests.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n        CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        this._isAutoCorrelating = false;\r\n    };\r\n    AutoCollectHttpRequests.HANDLER_READY = false;\r\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = \"_appInsightsAutoCollected\";\r\n    return AutoCollectHttpRequests;\r\n}());\r\nmodule.exports = AutoCollectHttpRequests;\r\n//# sourceMappingURL=HttpRequests.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AutoCollectNativePerformance = void 0;\r\nvar Context = require(\"../Library/Context\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar AutoCollectNativePerformance = /** @class */ (function () {\r\n    function AutoCollectNativePerformance(client) {\r\n        this._disabledMetrics = {};\r\n        // Note: Only 1 instance of this can exist. So when we reconstruct this object,\r\n        // just disable old native instance and reset JS member variables\r\n        if (AutoCollectNativePerformance.INSTANCE) {\r\n            AutoCollectNativePerformance.INSTANCE.dispose();\r\n        }\r\n        AutoCollectNativePerformance.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    /**\r\n     * Start instance of native metrics agent.\r\n     *\r\n     * @param {boolean} isEnabled\r\n     * @param {number} [collectionInterval=60000]\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype.enable = function (isEnabled, disabledMetrics, collectionInterval) {\r\n        var _this = this;\r\n        if (disabledMetrics === void 0) { disabledMetrics = {}; }\r\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\r\n        if (AutoCollectNativePerformance._metricsAvailable == undefined && isEnabled && !this._isInitialized) {\r\n            // Try to require in the native-metrics library. If it's found initialize it, else do nothing and never try again.\r\n            try {\r\n                var NativeMetricsEmitters = require(\"applicationinsights-native-metrics\");\r\n                AutoCollectNativePerformance._emitter = new NativeMetricsEmitters();\r\n                AutoCollectNativePerformance._metricsAvailable = true;\r\n                Logging.info(\"Native metrics module successfully loaded!\");\r\n            }\r\n            catch (err) {\r\n                // Package not available. Never try again\r\n                AutoCollectNativePerformance._metricsAvailable = false;\r\n                return;\r\n            }\r\n        }\r\n        this._isEnabled = isEnabled;\r\n        this._disabledMetrics = disabledMetrics;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        // Enable the emitter if we were able to construct one\r\n        if (this._isEnabled && AutoCollectNativePerformance._emitter) {\r\n            // enable self\r\n            AutoCollectNativePerformance._emitter.enable(true, collectionInterval);\r\n            if (!this._handle) {\r\n                this._handle = setInterval(function () { return _this._trackNativeMetrics(); }, collectionInterval);\r\n                this._handle.unref();\r\n            }\r\n        }\r\n        else if (AutoCollectNativePerformance._emitter) {\r\n            // disable self\r\n            AutoCollectNativePerformance._emitter.enable(false);\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Cleanup this instance of AutoCollectNativePerformance\r\n     *\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype.dispose = function () {\r\n        this.enable(false);\r\n    };\r\n    /**\r\n     * Parse environment variable and overwrite isEnabled based on respective fields being set\r\n     *\r\n     * @private\r\n     * @static\r\n     * @param {(boolean | IDisabledExtendedMetrics)} collectExtendedMetrics\r\n     * @param {(IBaseConfig)} customConfig\r\n     * @returns {(boolean | IDisabledExtendedMetrics)}\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.parseEnabled = function (collectExtendedMetrics, customConfig) {\r\n        var disableAll = customConfig.disableAllExtendedMetrics;\r\n        var individualOptOuts = customConfig.extendedMetricDisablers;\r\n        // case 1: disable all env var set, RETURN with isEnabled=false\r\n        if (disableAll) {\r\n            return { isEnabled: false, disabledMetrics: {} };\r\n        }\r\n        // case 2: individual env vars set, RETURN with isEnabled=true, disabledMetrics={...}\r\n        if (individualOptOuts) {\r\n            var optOutsArr = individualOptOuts.split(\",\");\r\n            var disabledMetrics = {};\r\n            if (optOutsArr.length > 0) {\r\n                for (var _i = 0, optOutsArr_1 = optOutsArr; _i < optOutsArr_1.length; _i++) {\r\n                    var opt = optOutsArr_1[_i];\r\n                    disabledMetrics[opt] = true;\r\n                }\r\n            }\r\n            // case 2a: collectExtendedMetrics is an object, overwrite existing ones if they exist\r\n            if (typeof collectExtendedMetrics === \"object\") {\r\n                return { isEnabled: true, disabledMetrics: __assign(__assign({}, collectExtendedMetrics), disabledMetrics) };\r\n            }\r\n            // case 2b: collectExtendedMetrics is a boolean, set disabledMetrics as is\r\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: disabledMetrics };\r\n        }\r\n        // case 4: no env vars set, input arg is a boolean, RETURN with isEnabled=collectExtendedMetrics, disabledMetrics={}\r\n        if (typeof collectExtendedMetrics === \"boolean\") {\r\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: {} };\r\n        }\r\n        else { // use else so we don't need to force typing on collectExtendedMetrics\r\n            // case 5: no env vars set, input arg is object, RETURN with isEnabled=true, disabledMetrics=collectExtendedMetrics\r\n            return { isEnabled: true, disabledMetrics: collectExtendedMetrics };\r\n        }\r\n    };\r\n    /**\r\n     * Trigger an iteration of native metrics collection\r\n     *\r\n     * @private\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackNativeMetrics = function () {\r\n        var shouldSendAll = true;\r\n        if (typeof this._isEnabled !== \"object\") {\r\n            shouldSendAll = this._isEnabled;\r\n        }\r\n        if (shouldSendAll) {\r\n            this._trackGarbageCollection();\r\n            this._trackEventLoop();\r\n            this._trackHeapUsage();\r\n        }\r\n    };\r\n    /**\r\n     * Tracks garbage collection stats for this interval. One custom metric is sent per type of garbage\r\n     * collection that occurred during this collection interval.\r\n     *\r\n     * @private\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackGarbageCollection = function () {\r\n        var _a;\r\n        if (this._disabledMetrics.gc) {\r\n            return;\r\n        }\r\n        var gcData = AutoCollectNativePerformance._emitter.getGCData();\r\n        for (var gc in gcData) {\r\n            var metrics = gcData[gc].metrics;\r\n            var name_1 = gc + \" Garbage Collection Duration\";\r\n            var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\r\n            this._client.trackMetric({\r\n                name: name_1,\r\n                value: metrics.total,\r\n                count: metrics.count,\r\n                max: metrics.max,\r\n                min: metrics.min,\r\n                stdDev: stdDev,\r\n                tagOverrides: (_a = {},\r\n                    _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                    _a)\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Tracks event loop ticks per interval as a custom metric. Also included in the metric is min/max/avg\r\n     * time spent in event loop for this interval.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackEventLoop = function () {\r\n        var _a;\r\n        if (this._disabledMetrics.loop) {\r\n            return;\r\n        }\r\n        var loopData = AutoCollectNativePerformance._emitter.getLoopData();\r\n        var metrics = loopData.loopUsage;\r\n        if (metrics.count == 0) {\r\n            return;\r\n        }\r\n        var name = \"Event Loop CPU Time\";\r\n        var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\r\n        this._client.trackMetric({\r\n            name: name,\r\n            value: metrics.total,\r\n            count: metrics.count,\r\n            min: metrics.min,\r\n            max: metrics.max,\r\n            stdDev: stdDev,\r\n            tagOverrides: (_a = {},\r\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _a)\r\n        });\r\n    };\r\n    /**\r\n     * Track heap memory usage metrics as a custom metric.\r\n     *\r\n     * @private\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackHeapUsage = function () {\r\n        var _a, _b, _c;\r\n        if (this._disabledMetrics.heap) {\r\n            return;\r\n        }\r\n        var memoryUsage = process.memoryUsage();\r\n        var heapUsed = memoryUsage.heapUsed, heapTotal = memoryUsage.heapTotal, rss = memoryUsage.rss;\r\n        this._client.trackMetric({\r\n            name: \"Memory Usage (Heap)\",\r\n            value: heapUsed,\r\n            count: 1,\r\n            tagOverrides: (_a = {},\r\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _a)\r\n        });\r\n        this._client.trackMetric({\r\n            name: \"Memory Total (Heap)\",\r\n            value: heapTotal,\r\n            count: 1,\r\n            tagOverrides: (_b = {},\r\n                _b[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _b)\r\n        });\r\n        this._client.trackMetric({\r\n            name: \"Memory Usage (Non-Heap)\",\r\n            value: rss - heapTotal,\r\n            count: 1,\r\n            tagOverrides: (_c = {},\r\n                _c[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _c)\r\n        });\r\n    };\r\n    return AutoCollectNativePerformance;\r\n}());\r\nexports.AutoCollectNativePerformance = AutoCollectNativePerformance;\r\n//# sourceMappingURL=NativePerformance.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NetworkStatsbeat = void 0;\r\nvar NetworkStatsbeat = /** @class */ (function () {\r\n    function NetworkStatsbeat(endpoint, host) {\r\n        this.endpoint = endpoint;\r\n        this.host = host;\r\n        this.totalRequestCount = 0;\r\n        this.totalSuccesfulRequestCount = 0;\r\n        this.totalFailedRequestCount = [];\r\n        this.retryCount = [];\r\n        this.exceptionCount = [];\r\n        this.throttleCount = [];\r\n        this.intervalRequestExecutionTime = 0;\r\n        this.lastIntervalRequestExecutionTime = 0;\r\n        this.lastTime = +new Date;\r\n        this.lastRequestCount = 0;\r\n    }\r\n    return NetworkStatsbeat;\r\n}());\r\nexports.NetworkStatsbeat = NetworkStatsbeat;\r\n//# sourceMappingURL=NetworkStatsbeat.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar AutoCollectPerformance = /** @class */ (function () {\r\n    /**\r\n     * @param enableLiveMetricsCounters - enable sending additional live metrics information (dependency metrics, exception metrics, committed memory)\r\n     */\r\n    function AutoCollectPerformance(client, collectionInterval, enableLiveMetricsCounters) {\r\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\r\n        if (enableLiveMetricsCounters === void 0) { enableLiveMetricsCounters = false; }\r\n        this._lastIntervalRequestExecutionTime = 0; // the sum of durations which took place during from app start until last interval\r\n        this._lastIntervalDependencyExecutionTime = 0;\r\n        if (!AutoCollectPerformance.INSTANCE) {\r\n            AutoCollectPerformance.INSTANCE = this;\r\n        }\r\n        this._lastRequests = { totalRequestCount: 0, totalFailedRequestCount: 0, time: 0 };\r\n        this._lastDependencies = { totalDependencyCount: 0, totalFailedDependencyCount: 0, time: 0 };\r\n        this._lastExceptions = { totalExceptionCount: 0, time: 0 };\r\n        this._isInitialized = false;\r\n        this._client = client;\r\n        this._collectionInterval = collectionInterval;\r\n        this._enableLiveMetricsCounters = enableLiveMetricsCounters;\r\n    }\r\n    AutoCollectPerformance.prototype.enable = function (isEnabled, collectionInterval) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._lastCpus = os.cpus();\r\n                this._lastRequests = {\r\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n                    time: +new Date\r\n                };\r\n                this._lastDependencies = {\r\n                    totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\r\n                    totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\r\n                    time: +new Date\r\n                };\r\n                this._lastExceptions = {\r\n                    totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\r\n                    time: +new Date\r\n                };\r\n                if (typeof process.cpuUsage === \"function\") {\r\n                    this._lastAppCpuUsage = process.cpuUsage();\r\n                }\r\n                this._lastHrtime = process.hrtime();\r\n                this._collectionInterval = collectionInterval || this._collectionInterval;\r\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, this._collectionInterval);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectPerformance.countRequest = function (duration, success) {\r\n        var durationMs;\r\n        if (!AutoCollectPerformance.isEnabled()) {\r\n            return;\r\n        }\r\n        if (typeof duration === \"string\") {\r\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\r\n            durationMs = +new Date(\"1970-01-01T\" + duration + \"Z\"); // convert to num ms, returns NaN if wrong\r\n        }\r\n        else if (typeof duration === \"number\") {\r\n            durationMs = duration;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        AutoCollectPerformance._intervalRequestExecutionTime += durationMs;\r\n        if (success === false) {\r\n            AutoCollectPerformance._totalFailedRequestCount++;\r\n        }\r\n        AutoCollectPerformance._totalRequestCount++;\r\n    };\r\n    AutoCollectPerformance.countException = function () {\r\n        AutoCollectPerformance._totalExceptionCount++;\r\n    };\r\n    AutoCollectPerformance.countDependency = function (duration, success) {\r\n        var durationMs;\r\n        if (!AutoCollectPerformance.isEnabled()) {\r\n            return;\r\n        }\r\n        if (typeof duration === \"string\") {\r\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\r\n            durationMs = +new Date(\"1970-01-01T\" + duration + \"Z\"); // convert to num ms, returns NaN if wrong\r\n        }\r\n        else if (typeof duration === \"number\") {\r\n            durationMs = duration;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        AutoCollectPerformance._intervalDependencyExecutionTime += durationMs;\r\n        if (success === false) {\r\n            AutoCollectPerformance._totalFailedDependencyCount++;\r\n        }\r\n        AutoCollectPerformance._totalDependencyCount++;\r\n    };\r\n    AutoCollectPerformance.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectPerformance.isEnabled = function () {\r\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\r\n    };\r\n    AutoCollectPerformance.prototype.trackPerformance = function () {\r\n        this._trackCpu();\r\n        this._trackMemory();\r\n        this._trackNetwork();\r\n        this._trackDependencyRate();\r\n        this._trackExceptionRate();\r\n    };\r\n    AutoCollectPerformance.prototype._trackCpu = function () {\r\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\r\n        // to find the delta since the last measurement\r\n        var cpus = os.cpus();\r\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\r\n            var totalUser = 0;\r\n            var totalSys = 0;\r\n            var totalNice = 0;\r\n            var totalIdle = 0;\r\n            var totalIrq = 0;\r\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\r\n                var cpu = cpus[i];\r\n                var lastCpu = this._lastCpus[i];\r\n                var name = \"% cpu(\" + i + \") \";\r\n                var model = cpu.model;\r\n                var speed = cpu.speed;\r\n                var times = cpu.times;\r\n                var lastTimes = lastCpu.times;\r\n                // user cpu time (or) % CPU time spent in user space\r\n                var user = (times.user - lastTimes.user) || 0;\r\n                totalUser += user;\r\n                // system cpu time (or) % CPU time spent in kernel space\r\n                var sys = (times.sys - lastTimes.sys) || 0;\r\n                totalSys += sys;\r\n                // user nice cpu time (or) % CPU time spent on low priority processes\r\n                var nice = (times.nice - lastTimes.nice) || 0;\r\n                totalNice += nice;\r\n                // idle cpu time (or) % CPU time spent idle\r\n                var idle = (times.idle - lastTimes.idle) || 0;\r\n                totalIdle += idle;\r\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\r\n                var irq = (times.irq - lastTimes.irq) || 0;\r\n                totalIrq += irq;\r\n            }\r\n            // Calculate % of total cpu time (user + system) this App Process used (Only supported by node v6.1.0+)\r\n            var appCpuPercent = undefined;\r\n            if (typeof process.cpuUsage === \"function\") {\r\n                var appCpuUsage = process.cpuUsage();\r\n                var hrtime = process.hrtime();\r\n                var totalApp = ((appCpuUsage.user - this._lastAppCpuUsage.user) + (appCpuUsage.system - this._lastAppCpuUsage.system)) || 0;\r\n                if (typeof this._lastHrtime !== \"undefined\" && this._lastHrtime.length === 2) {\r\n                    var elapsedTime = ((hrtime[0] - this._lastHrtime[0]) * 1e6 + (hrtime[1] - this._lastHrtime[1]) / 1e3) || 0; // convert to microseconds\r\n                    appCpuPercent = 100 * totalApp / (elapsedTime * cpus.length);\r\n                }\r\n                // Set previous\r\n                this._lastAppCpuUsage = appCpuUsage;\r\n                this._lastHrtime = hrtime;\r\n            }\r\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\r\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESSOR_TIME, value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\r\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESS_TIME, value: appCpuPercent || ((totalUser / combinedTotal) * 100) });\r\n        }\r\n        this._lastCpus = cpus;\r\n    };\r\n    AutoCollectPerformance.prototype._trackMemory = function () {\r\n        var freeMem = os.freemem();\r\n        var usedMem = process.memoryUsage().rss;\r\n        var committedMemory = os.totalmem() - freeMem;\r\n        this._client.trackMetric({ name: Constants.PerformanceCounter.PRIVATE_BYTES, value: usedMem });\r\n        this._client.trackMetric({ name: Constants.PerformanceCounter.AVAILABLE_BYTES, value: freeMem });\r\n        // Only supported by quickpulse service\r\n        if (this._enableLiveMetricsCounters) {\r\n            this._client.trackMetric({ name: Constants.QuickPulseCounter.COMMITTED_BYTES, value: committedMemory });\r\n        }\r\n    };\r\n    AutoCollectPerformance.prototype._trackNetwork = function () {\r\n        // track total request counters\r\n        var lastRequests = this._lastRequests;\r\n        var requests = {\r\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n            time: +new Date\r\n        };\r\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\r\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\r\n        var elapsedMs = requests.time - lastRequests.time;\r\n        var elapsedSeconds = elapsedMs / 1000;\r\n        var averageRequestExecutionTime = ((AutoCollectPerformance._intervalRequestExecutionTime - this._lastIntervalRequestExecutionTime) / intervalRequests) || 0; // default to 0 in case no requests in this interval\r\n        this._lastIntervalRequestExecutionTime = AutoCollectPerformance._intervalRequestExecutionTime; // reset\r\n        if (elapsedMs > 0) {\r\n            var requestsPerSec = intervalRequests / elapsedSeconds;\r\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\r\n            this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_RATE, value: requestsPerSec });\r\n            // Only send duration to live metrics if it has been updated!\r\n            if (!this._enableLiveMetricsCounters || intervalRequests > 0) {\r\n                this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_DURATION, value: averageRequestExecutionTime });\r\n            }\r\n            // Only supported by quickpulse service\r\n            if (this._enableLiveMetricsCounters) {\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.REQUEST_FAILURE_RATE, value: failedRequestsPerSec });\r\n            }\r\n        }\r\n        this._lastRequests = requests;\r\n    };\r\n    // Static counter is accumulated externally. Report the rate to client here\r\n    // Note: This is currently only used with QuickPulse client\r\n    AutoCollectPerformance.prototype._trackDependencyRate = function () {\r\n        if (this._enableLiveMetricsCounters) {\r\n            var lastDependencies = this._lastDependencies;\r\n            var dependencies = {\r\n                totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\r\n                totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\r\n                time: +new Date\r\n            };\r\n            var intervalDependencies = (dependencies.totalDependencyCount - lastDependencies.totalDependencyCount) || 0;\r\n            var intervalFailedDependencies = (dependencies.totalFailedDependencyCount - lastDependencies.totalFailedDependencyCount) || 0;\r\n            var elapsedMs = dependencies.time - lastDependencies.time;\r\n            var elapsedSeconds = elapsedMs / 1000;\r\n            var averageDependencyExecutionTime = ((AutoCollectPerformance._intervalDependencyExecutionTime - this._lastIntervalDependencyExecutionTime) / intervalDependencies) || 0;\r\n            this._lastIntervalDependencyExecutionTime = AutoCollectPerformance._intervalDependencyExecutionTime; // reset\r\n            if (elapsedMs > 0) {\r\n                var dependenciesPerSec = intervalDependencies / elapsedSeconds;\r\n                var failedDependenciesPerSec = intervalFailedDependencies / elapsedSeconds;\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_RATE, value: dependenciesPerSec });\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_FAILURE_RATE, value: failedDependenciesPerSec });\r\n                // redundant check for livemetrics, but kept for consistency w/ requests\r\n                // Only send duration to live metrics if it has been updated!\r\n                if (!this._enableLiveMetricsCounters || intervalDependencies > 0) {\r\n                    this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_DURATION, value: averageDependencyExecutionTime });\r\n                }\r\n            }\r\n            this._lastDependencies = dependencies;\r\n        }\r\n    };\r\n    // Static counter is accumulated externally. Report the rate to client here\r\n    // Note: This is currently only used with QuickPulse client\r\n    AutoCollectPerformance.prototype._trackExceptionRate = function () {\r\n        if (this._enableLiveMetricsCounters) {\r\n            var lastExceptions = this._lastExceptions;\r\n            var exceptions = {\r\n                totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\r\n                time: +new Date\r\n            };\r\n            var intervalExceptions = (exceptions.totalExceptionCount - lastExceptions.totalExceptionCount) || 0;\r\n            var elapsedMs = exceptions.time - lastExceptions.time;\r\n            var elapsedSeconds = elapsedMs / 1000;\r\n            if (elapsedMs > 0) {\r\n                var exceptionsPerSec = intervalExceptions / elapsedSeconds;\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.EXCEPTION_RATE, value: exceptionsPerSec });\r\n            }\r\n            this._lastExceptions = exceptions;\r\n        }\r\n    };\r\n    AutoCollectPerformance.prototype.dispose = function () {\r\n        AutoCollectPerformance.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectPerformance._totalRequestCount = 0;\r\n    AutoCollectPerformance._totalFailedRequestCount = 0;\r\n    AutoCollectPerformance._totalDependencyCount = 0;\r\n    AutoCollectPerformance._totalFailedDependencyCount = 0;\r\n    AutoCollectPerformance._totalExceptionCount = 0;\r\n    AutoCollectPerformance._intervalDependencyExecutionTime = 0;\r\n    AutoCollectPerformance._intervalRequestExecutionTime = 0;\r\n    return AutoCollectPerformance;\r\n}());\r\nmodule.exports = AutoCollectPerformance;\r\n//# sourceMappingURL=Performance.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar AggregatedMetricCounters_1 = require(\"../Declarations/Metrics/AggregatedMetricCounters\");\r\nvar AggregatedMetricDimensions_1 = require(\"../Declarations/Metrics/AggregatedMetricDimensions\");\r\nvar AutoCollectPreAggregatedMetrics = /** @class */ (function () {\r\n    /**\r\n     * @param client - Telemetry Client\r\n     * @param collectionInterval - Metric collection interval in ms\r\n     */\r\n    function AutoCollectPreAggregatedMetrics(client, collectionInterval) {\r\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\r\n        if (!AutoCollectPreAggregatedMetrics.INSTANCE) {\r\n            AutoCollectPreAggregatedMetrics.INSTANCE = this;\r\n        }\r\n        this._isInitialized = false;\r\n        AutoCollectPreAggregatedMetrics._dependencyCountersCollection = [];\r\n        AutoCollectPreAggregatedMetrics._requestCountersCollection = [];\r\n        AutoCollectPreAggregatedMetrics._exceptionCountersCollection = [];\r\n        AutoCollectPreAggregatedMetrics._traceCountersCollection = [];\r\n        this._client = client;\r\n        this._collectionInterval = collectionInterval;\r\n    }\r\n    AutoCollectPreAggregatedMetrics.prototype.enable = function (isEnabled, collectionInterval) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._collectionInterval = collectionInterval || this._collectionInterval;\r\n                this._handle = setInterval(function () { return _this.trackPreAggregatedMetrics(); }, this._collectionInterval);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectPreAggregatedMetrics.countException = function (dimensions) {\r\n        if (!AutoCollectPreAggregatedMetrics.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = AutoCollectPreAggregatedMetrics._getAggregatedCounter(dimensions, this._exceptionCountersCollection);\r\n        counter.totalCount++;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.countTrace = function (dimensions) {\r\n        if (!AutoCollectPreAggregatedMetrics.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = AutoCollectPreAggregatedMetrics._getAggregatedCounter(dimensions, this._traceCountersCollection);\r\n        counter.totalCount++;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.countRequest = function (duration, dimensions) {\r\n        if (!AutoCollectPreAggregatedMetrics.isEnabled()) {\r\n            return;\r\n        }\r\n        var durationMs;\r\n        var counter = AutoCollectPreAggregatedMetrics._getAggregatedCounter(dimensions, this._requestCountersCollection);\r\n        if (typeof duration === \"string\") {\r\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\r\n            durationMs = +new Date(\"1970-01-01T\" + duration + \"Z\"); // convert to num ms, returns NaN if wrong\r\n        }\r\n        else if (typeof duration === \"number\") {\r\n            durationMs = duration;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        counter.intervalExecutionTime += durationMs;\r\n        counter.totalCount++;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.countDependency = function (duration, dimensions) {\r\n        if (!AutoCollectPreAggregatedMetrics.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = AutoCollectPreAggregatedMetrics._getAggregatedCounter(dimensions, this._dependencyCountersCollection);\r\n        var durationMs;\r\n        if (typeof duration === \"string\") {\r\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\r\n            durationMs = +new Date(\"1970-01-01T\" + duration + \"Z\"); // convert to num ms, returns NaN if wrong\r\n        }\r\n        else if (typeof duration === \"number\") {\r\n            durationMs = duration;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        counter.intervalExecutionTime += durationMs;\r\n        counter.totalCount++;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.isEnabled = function () {\r\n        return AutoCollectPreAggregatedMetrics.INSTANCE && AutoCollectPreAggregatedMetrics.INSTANCE._isEnabled;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype.trackPreAggregatedMetrics = function () {\r\n        this._trackRequestMetrics();\r\n        this._trackDependencyMetrics();\r\n        this._trackExceptionMetrics();\r\n        this._trackTraceMetrics();\r\n    };\r\n    AutoCollectPreAggregatedMetrics._getAggregatedCounter = function (dimensions, counterCollection) {\r\n        var notMatch = false;\r\n        // Check if counter with specified dimensions is available\r\n        for (var i = 0; i < counterCollection.length; i++) {\r\n            // Same object\r\n            if (dimensions === counterCollection[i].dimensions) {\r\n                return counterCollection[i];\r\n            }\r\n            // Diferent number of keys skip\r\n            if (Object.keys(dimensions).length !== Object.keys(counterCollection[i].dimensions).length) {\r\n                continue;\r\n            }\r\n            // Check dimension values\r\n            for (var dim in dimensions) {\r\n                if (dimensions[dim] != counterCollection[i].dimensions[dim]) {\r\n                    notMatch = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!notMatch) { // Found\r\n                return counterCollection[i];\r\n            }\r\n            notMatch = false;\r\n        }\r\n        // Create a new one if not found\r\n        var newCounter = new AggregatedMetricCounters_1.AggregatedMetricCounter(dimensions);\r\n        counterCollection.push(newCounter);\r\n        return newCounter;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype._trackRequestMetrics = function () {\r\n        for (var i = 0; i < AutoCollectPreAggregatedMetrics._requestCountersCollection.length; i++) {\r\n            var currentCounter = AutoCollectPreAggregatedMetrics._requestCountersCollection[i];\r\n            currentCounter.time = +new Date;\r\n            var intervalRequests = (currentCounter.totalCount - currentCounter.lastTotalCount) || 0;\r\n            var elapsedMs = currentCounter.time - currentCounter.lastTime;\r\n            var averageRequestExecutionTime = ((currentCounter.intervalExecutionTime - currentCounter.lastIntervalExecutionTime) / intervalRequests) || 0;\r\n            currentCounter.lastIntervalExecutionTime = currentCounter.intervalExecutionTime; // reset\r\n            if (elapsedMs > 0 && intervalRequests > 0) {\r\n                this._trackPreAggregatedMetric({\r\n                    name: \"Server response time\",\r\n                    dimensions: currentCounter.dimensions,\r\n                    value: averageRequestExecutionTime,\r\n                    count: intervalRequests,\r\n                    aggregationInterval: elapsedMs,\r\n                    metricType: Constants.MetricId.REQUESTS_DURATION\r\n                });\r\n            }\r\n            // Set last counters\r\n            currentCounter.lastTotalCount = currentCounter.totalCount;\r\n            currentCounter.lastTime = currentCounter.time;\r\n        }\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype._trackDependencyMetrics = function () {\r\n        for (var i = 0; i < AutoCollectPreAggregatedMetrics._dependencyCountersCollection.length; i++) {\r\n            var currentCounter = AutoCollectPreAggregatedMetrics._dependencyCountersCollection[i];\r\n            currentCounter.time = +new Date;\r\n            var intervalDependencies = (currentCounter.totalCount - currentCounter.lastTotalCount) || 0;\r\n            var elapsedMs = currentCounter.time - currentCounter.lastTime;\r\n            var averageDependencyExecutionTime = ((currentCounter.intervalExecutionTime - currentCounter.lastIntervalExecutionTime) / intervalDependencies) || 0;\r\n            currentCounter.lastIntervalExecutionTime = currentCounter.intervalExecutionTime; // reset\r\n            if (elapsedMs > 0 && intervalDependencies > 0) {\r\n                this._trackPreAggregatedMetric({\r\n                    name: \"Dependency duration\",\r\n                    dimensions: currentCounter.dimensions,\r\n                    value: averageDependencyExecutionTime,\r\n                    count: intervalDependencies,\r\n                    aggregationInterval: elapsedMs,\r\n                    metricType: Constants.MetricId.DEPENDENCIES_DURATION\r\n                });\r\n            }\r\n            // Set last counters\r\n            currentCounter.lastTotalCount = currentCounter.totalCount;\r\n            currentCounter.lastTime = currentCounter.time;\r\n        }\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype._trackExceptionMetrics = function () {\r\n        for (var i = 0; i < AutoCollectPreAggregatedMetrics._exceptionCountersCollection.length; i++) {\r\n            var currentCounter = AutoCollectPreAggregatedMetrics._exceptionCountersCollection[i];\r\n            currentCounter.time = +new Date;\r\n            var intervalExceptions = (currentCounter.totalCount - currentCounter.lastTotalCount) || 0;\r\n            var elapsedMs = currentCounter.time - currentCounter.lastTime;\r\n            if (elapsedMs > 0 && intervalExceptions > 0) {\r\n                this._trackPreAggregatedMetric({\r\n                    name: \"Exceptions\",\r\n                    dimensions: currentCounter.dimensions,\r\n                    value: intervalExceptions,\r\n                    count: intervalExceptions,\r\n                    aggregationInterval: elapsedMs,\r\n                    metricType: Constants.MetricId.EXCEPTIONS_COUNT\r\n                });\r\n            }\r\n            // Set last counters\r\n            currentCounter.lastTotalCount = currentCounter.totalCount;\r\n            currentCounter.lastTime = currentCounter.time;\r\n        }\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype._trackTraceMetrics = function () {\r\n        for (var i = 0; i < AutoCollectPreAggregatedMetrics._traceCountersCollection.length; i++) {\r\n            var currentCounter = AutoCollectPreAggregatedMetrics._traceCountersCollection[i];\r\n            currentCounter.time = +new Date;\r\n            var intervalTraces = (currentCounter.totalCount - currentCounter.lastTotalCount) || 0;\r\n            var elapsedMs = currentCounter.time - currentCounter.lastTime;\r\n            if (elapsedMs > 0 && intervalTraces > 0) {\r\n                this._trackPreAggregatedMetric({\r\n                    name: \"Traces\",\r\n                    dimensions: currentCounter.dimensions,\r\n                    value: intervalTraces,\r\n                    count: intervalTraces,\r\n                    aggregationInterval: elapsedMs,\r\n                    metricType: Constants.MetricId.TRACES_COUNT\r\n                });\r\n            }\r\n            // Set last counters\r\n            currentCounter.lastTotalCount = currentCounter.totalCount;\r\n            currentCounter.lastTime = currentCounter.time;\r\n        }\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype._trackPreAggregatedMetric = function (metric) {\r\n        // Build metric properties\r\n        var metricProperties = {};\r\n        for (var dim in metric.dimensions) {\r\n            metricProperties[AggregatedMetricDimensions_1.PreaggregatedMetricPropertyNames[dim]] = metric.dimensions[dim];\r\n        }\r\n        metricProperties = __assign(__assign({}, metricProperties), { \"_MS.MetricId\": metric.metricType, \"_MS.AggregationIntervalMs\": String(metric.aggregationInterval), \"_MS.IsAutocollected\": \"True\" });\r\n        var telemetry = {\r\n            name: metric.name,\r\n            value: metric.value,\r\n            count: metric.count,\r\n            properties: metricProperties,\r\n            kind: \"Aggregation\"\r\n        };\r\n        this._client.trackMetric(telemetry);\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype.dispose = function () {\r\n        AutoCollectPreAggregatedMetrics.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    return AutoCollectPreAggregatedMetrics;\r\n}());\r\nmodule.exports = AutoCollectPreAggregatedMetrics;\r\n//# sourceMappingURL=PreAggregatedMetrics.js.map","\"use strict\";\r\n/**\r\n * Base class for helpers that read data from HTTP request/response objects and convert them\r\n * into the telemetry contract objects.\r\n */\r\nvar RequestParser = /** @class */ (function () {\r\n    function RequestParser() {\r\n    }\r\n    /**\r\n     * Gets a url parsed out from request options\r\n     */\r\n    RequestParser.prototype.getUrl = function () {\r\n        return this.url;\r\n    };\r\n    RequestParser.prototype.RequestParser = function () {\r\n        this.startTime = +new Date();\r\n    };\r\n    RequestParser.prototype._setStatus = function (status, error) {\r\n        var endTime = +new Date();\r\n        this.duration = endTime - this.startTime;\r\n        this.statusCode = status;\r\n        var properties = this.properties || {};\r\n        if (error) {\r\n            if (typeof error === \"string\") {\r\n                properties[\"error\"] = error;\r\n            }\r\n            else if (error instanceof Error) {\r\n                properties[\"error\"] = error.message;\r\n            }\r\n            else if (typeof error === \"object\") {\r\n                for (var key in error) {\r\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\r\n                }\r\n            }\r\n        }\r\n        this.properties = properties;\r\n    };\r\n    RequestParser.prototype._isSuccess = function () {\r\n        return (0 < this.statusCode) && (this.statusCode < 400);\r\n    };\r\n    return RequestParser;\r\n}());\r\nmodule.exports = RequestParser;\r\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar os = require(\"os\");\r\nvar EnvelopeFactory = require(\"../Library/EnvelopeFactory\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Sender = require(\"../Library/Sender\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Vm = require(\"../Library/AzureVirtualMachine\");\r\nvar Config = require(\"../Library/Config\");\r\nvar Context = require(\"../Library/Context\");\r\nvar Network = require(\"./NetworkStatsbeat\");\r\nvar Util = require(\"../Library/Util\");\r\nvar STATSBEAT_LANGUAGE = \"node\";\r\nvar Statsbeat = /** @class */ (function () {\r\n    function Statsbeat(config, context) {\r\n        this._attach = Constants.StatsbeatAttach.sdk; // Default is SDK\r\n        this._feature = Constants.StatsbeatFeature.NONE;\r\n        this._instrumentation = Constants.StatsbeatInstrumentation.NONE;\r\n        this._isInitialized = false;\r\n        this._statbeatMetrics = [];\r\n        this._networkStatsbeatCollection = [];\r\n        this._config = config;\r\n        this._context = context || new Context();\r\n        var statsbeatConnectionString = this._getConnectionString(config);\r\n        this._statsbeatConfig = new Config(statsbeatConnectionString);\r\n        this._statsbeatConfig.samplingPercentage = 100; // Do not sample\r\n        this._sender = new Sender(this._statsbeatConfig, null, null, null, null, true, this._shutdownStatsbeat.bind(this));\r\n    }\r\n    Statsbeat.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._getCustomProperties();\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._handle = setInterval(function () {\r\n                    _this.trackShortIntervalStatsbeats();\r\n                }, Statsbeat.STATS_COLLECTION_SHORT_INTERVAL);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n            if (!this._longHandle) {\r\n                // On first enablement\r\n                this.trackLongIntervalStatsbeats();\r\n                this._longHandle = setInterval(function () {\r\n                    _this.trackLongIntervalStatsbeats();\r\n                }, Statsbeat.STATS_COLLECTION_LONG_INTERVAL);\r\n                this._longHandle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = null;\r\n            }\r\n            if (this._longHandle) {\r\n                clearInterval(this._longHandle);\r\n                this._longHandle = null;\r\n            }\r\n        }\r\n    };\r\n    Statsbeat.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    Statsbeat.prototype.isEnabled = function () {\r\n        return this._isEnabled;\r\n    };\r\n    Statsbeat.prototype.setCodelessAttach = function () {\r\n        this._attach = Constants.StatsbeatAttach.codeless;\r\n    };\r\n    Statsbeat.prototype.addFeature = function (feature) {\r\n        this._feature |= feature;\r\n    };\r\n    Statsbeat.prototype.removeFeature = function (feature) {\r\n        this._feature &= ~feature;\r\n    };\r\n    Statsbeat.prototype.addInstrumentation = function (instrumentation) {\r\n        this._instrumentation |= instrumentation;\r\n    };\r\n    Statsbeat.prototype.removeInstrumentation = function (instrumentation) {\r\n        this._instrumentation &= ~instrumentation;\r\n    };\r\n    Statsbeat.prototype.countRequest = function (endpoint, host, duration, success, statusCode) {\r\n        if (!this.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = this._getNetworkStatsbeatCounter(endpoint, host);\r\n        counter.totalRequestCount++;\r\n        counter.intervalRequestExecutionTime += duration;\r\n        if (success === false) {\r\n            if (!statusCode) {\r\n                return;\r\n            }\r\n            var currentStatusCounter = counter.totalFailedRequestCount.find(function (statusCounter) { return statusCode === statusCounter.statusCode; });\r\n            if (currentStatusCounter) {\r\n                currentStatusCounter.count++;\r\n            }\r\n            else {\r\n                counter.totalFailedRequestCount.push({ statusCode: statusCode, count: 1 });\r\n            }\r\n        }\r\n        else {\r\n            counter.totalSuccesfulRequestCount++;\r\n        }\r\n    };\r\n    Statsbeat.prototype.countException = function (endpoint, host, exceptionType) {\r\n        if (!this.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = this._getNetworkStatsbeatCounter(endpoint, host);\r\n        var currentErrorCounter = counter.exceptionCount.find(function (exceptionCounter) { return exceptionType.name === exceptionCounter.exceptionType; });\r\n        if (currentErrorCounter) {\r\n            currentErrorCounter.count++;\r\n        }\r\n        else {\r\n            counter.exceptionCount.push({ exceptionType: exceptionType.name, count: 1 });\r\n        }\r\n    };\r\n    Statsbeat.prototype.countThrottle = function (endpoint, host, statusCode) {\r\n        if (!this.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = this._getNetworkStatsbeatCounter(endpoint, host);\r\n        var currentStatusCounter = counter.throttleCount.find(function (statusCounter) { return statusCode === statusCounter.statusCode; });\r\n        if (currentStatusCounter) {\r\n            currentStatusCounter.count++;\r\n        }\r\n        else {\r\n            counter.throttleCount.push({ statusCode: statusCode, count: 1 });\r\n        }\r\n    };\r\n    Statsbeat.prototype.countRetry = function (endpoint, host, statusCode) {\r\n        if (!this.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = this._getNetworkStatsbeatCounter(endpoint, host);\r\n        var currentStatusCounter = counter.retryCount.find(function (statusCounter) { return statusCode === statusCounter.statusCode; });\r\n        if (currentStatusCounter) {\r\n            currentStatusCounter.count++;\r\n        }\r\n        else {\r\n            counter.retryCount.push({ statusCode: statusCode, count: 1 });\r\n        }\r\n    };\r\n    Statsbeat.prototype.trackShortIntervalStatsbeats = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var networkProperties, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 3, , 4]);\r\n                        return [4 /*yield*/, this._getResourceProvider()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        networkProperties = {\r\n                            \"os\": this._os,\r\n                            \"rp\": this._resourceProvider,\r\n                            \"cikey\": this._cikey,\r\n                            \"runtimeVersion\": this._runtimeVersion,\r\n                            \"language\": this._language,\r\n                            \"version\": this._sdkVersion,\r\n                            \"attach\": this._attach\r\n                        };\r\n                        this._trackRequestDuration(networkProperties);\r\n                        this._trackRequestsCount(networkProperties);\r\n                        return [4 /*yield*/, this._sendStatsbeats()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        error_1 = _a.sent();\r\n                        Logging.info(Statsbeat.TAG, \"Failed to send Statsbeat metrics: \" + Util.dumpObj(error_1));\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Statsbeat.prototype.trackLongIntervalStatsbeats = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var commonProperties, attachProperties, instrumentationProperties, featureProperties, error_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 3, , 4]);\r\n                        return [4 /*yield*/, this._getResourceProvider()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        commonProperties = {\r\n                            \"os\": this._os,\r\n                            \"rp\": this._resourceProvider,\r\n                            \"cikey\": this._cikey,\r\n                            \"runtimeVersion\": this._runtimeVersion,\r\n                            \"language\": this._language,\r\n                            \"version\": this._sdkVersion,\r\n                            \"attach\": this._attach\r\n                        };\r\n                        attachProperties = Object.assign({\r\n                            \"rpId\": this._resourceIdentifier\r\n                        }, commonProperties);\r\n                        this._statbeatMetrics.push({ name: Constants.StatsbeatCounter.ATTACH, value: 1, properties: attachProperties });\r\n                        if (this._instrumentation != Constants.StatsbeatInstrumentation.NONE) { // Only send if there are some instrumentations enabled\r\n                            instrumentationProperties = Object.assign({ \"feature\": this._instrumentation, \"type\": Constants.StatsbeatFeatureType.Instrumentation }, commonProperties);\r\n                            this._statbeatMetrics.push({ name: Constants.StatsbeatCounter.FEATURE, value: 1, properties: instrumentationProperties });\r\n                        }\r\n                        if (this._feature != Constants.StatsbeatFeature.NONE) { // Only send if there are some features enabled\r\n                            featureProperties = Object.assign({ \"feature\": this._feature, \"type\": Constants.StatsbeatFeatureType.Feature }, commonProperties);\r\n                            this._statbeatMetrics.push({ name: Constants.StatsbeatCounter.FEATURE, value: 1, properties: featureProperties });\r\n                        }\r\n                        return [4 /*yield*/, this._sendStatsbeats()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        error_2 = _a.sent();\r\n                        Logging.info(Statsbeat.TAG, \"Failed to send Statsbeat metrics: \" + Util.dumpObj(error_2));\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Statsbeat.prototype._getNetworkStatsbeatCounter = function (endpoint, host) {\r\n        var shortHost = this._getShortHost(host);\r\n        // Check if counter is available\r\n        for (var i = 0; i < this._networkStatsbeatCollection.length; i++) {\r\n            // Same object\r\n            if (endpoint === this._networkStatsbeatCollection[i].endpoint &&\r\n                shortHost === this._networkStatsbeatCollection[i].host) {\r\n                return this._networkStatsbeatCollection[i];\r\n            }\r\n        }\r\n        // Create a new one if not found\r\n        var newCounter = new Network.NetworkStatsbeat(endpoint, shortHost);\r\n        this._networkStatsbeatCollection.push(newCounter);\r\n        return newCounter;\r\n    };\r\n    Statsbeat.prototype._trackRequestDuration = function (commonProperties) {\r\n        for (var i = 0; i < this._networkStatsbeatCollection.length; i++) {\r\n            var currentCounter = this._networkStatsbeatCollection[i];\r\n            currentCounter.time = +new Date;\r\n            var intervalRequests = (currentCounter.totalRequestCount - currentCounter.lastRequestCount) || 0;\r\n            var averageRequestExecutionTime = ((currentCounter.intervalRequestExecutionTime - currentCounter.lastIntervalRequestExecutionTime) / intervalRequests) || 0;\r\n            currentCounter.lastIntervalRequestExecutionTime = currentCounter.intervalRequestExecutionTime; // reset\r\n            if (intervalRequests > 0) {\r\n                // Add extra properties\r\n                var properties = Object.assign({\r\n                    \"endpoint\": this._networkStatsbeatCollection[i].endpoint,\r\n                    \"host\": this._networkStatsbeatCollection[i].host\r\n                }, commonProperties);\r\n                this._statbeatMetrics.push({\r\n                    name: Constants.StatsbeatCounter.REQUEST_DURATION,\r\n                    value: averageRequestExecutionTime,\r\n                    properties: properties\r\n                });\r\n            }\r\n            // Set last counters\r\n            currentCounter.lastRequestCount = currentCounter.totalRequestCount;\r\n            currentCounter.lastTime = currentCounter.time;\r\n        }\r\n    };\r\n    Statsbeat.prototype._getShortHost = function (originalHost) {\r\n        var shortHost = originalHost;\r\n        try {\r\n            var hostRegex = new RegExp(/^https?:\\/\\/(?:www\\.)?([^\\/.-]+)/);\r\n            var res = hostRegex.exec(originalHost);\r\n            if (res != null && res.length > 1) {\r\n                shortHost = res[1];\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Ignore error\r\n        }\r\n        return shortHost;\r\n    };\r\n    Statsbeat.prototype._trackRequestsCount = function (commonProperties) {\r\n        var _this = this;\r\n        var _loop_1 = function (i) {\r\n            currentCounter = this_1._networkStatsbeatCollection[i];\r\n            var properties = Object.assign({ \"endpoint\": currentCounter.endpoint, \"host\": currentCounter.host }, commonProperties);\r\n            if (currentCounter.totalSuccesfulRequestCount > 0) {\r\n                this_1._statbeatMetrics.push({\r\n                    name: Constants.StatsbeatCounter.REQUEST_SUCCESS,\r\n                    value: currentCounter.totalSuccesfulRequestCount,\r\n                    properties: properties\r\n                });\r\n                currentCounter.totalSuccesfulRequestCount = 0; //Reset\r\n            }\r\n            if (currentCounter.totalFailedRequestCount.length > 0) {\r\n                currentCounter.totalFailedRequestCount.forEach(function (currentCounter) {\r\n                    properties = Object.assign(__assign(__assign({}, properties), { \"statusCode\": currentCounter.statusCode }));\r\n                    _this._statbeatMetrics.push({\r\n                        name: Constants.StatsbeatCounter.REQUEST_FAILURE,\r\n                        value: currentCounter.count,\r\n                        properties: properties\r\n                    });\r\n                });\r\n                currentCounter.totalFailedRequestCount = []; //Reset\r\n            }\r\n            if (currentCounter.retryCount.length > 0) {\r\n                currentCounter.retryCount.forEach(function (currentCounter) {\r\n                    properties = Object.assign(__assign(__assign({}, properties), { \"statusCode\": currentCounter.statusCode }));\r\n                    _this._statbeatMetrics.push({\r\n                        name: Constants.StatsbeatCounter.RETRY_COUNT,\r\n                        value: currentCounter.count,\r\n                        properties: properties\r\n                    });\r\n                });\r\n                currentCounter.retryCount = []; //Reset\r\n            }\r\n            if (currentCounter.throttleCount.length > 0) {\r\n                currentCounter.throttleCount.forEach(function (currentCounter) {\r\n                    properties = Object.assign(__assign(__assign({}, properties), { \"statusCode\": currentCounter.statusCode }));\r\n                    _this._statbeatMetrics.push({\r\n                        name: Constants.StatsbeatCounter.THROTTLE_COUNT,\r\n                        value: currentCounter.count,\r\n                        properties: properties\r\n                    });\r\n                });\r\n                currentCounter.throttleCount = []; //Reset\r\n            }\r\n            if (currentCounter.exceptionCount.length > 0) {\r\n                currentCounter.exceptionCount.forEach(function (currentCounter) {\r\n                    properties = Object.assign(__assign(__assign({}, properties), { \"exceptionType\": currentCounter.exceptionType }));\r\n                    _this._statbeatMetrics.push({\r\n                        name: Constants.StatsbeatCounter.EXCEPTION_COUNT,\r\n                        value: currentCounter.count,\r\n                        properties: properties\r\n                    });\r\n                });\r\n                currentCounter.exceptionCount = []; //Reset\r\n            }\r\n        };\r\n        var this_1 = this, currentCounter;\r\n        for (var i = 0; i < this._networkStatsbeatCollection.length; i++) {\r\n            _loop_1(i);\r\n        }\r\n    };\r\n    Statsbeat.prototype._sendStatsbeats = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var envelopes, i, statsbeat, envelope;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        envelopes = [];\r\n                        for (i = 0; i < this._statbeatMetrics.length; i++) {\r\n                            statsbeat = {\r\n                                name: this._statbeatMetrics[i].name,\r\n                                value: this._statbeatMetrics[i].value,\r\n                                properties: this._statbeatMetrics[i].properties\r\n                            };\r\n                            envelope = EnvelopeFactory.createEnvelope(statsbeat, Contracts.TelemetryType.Metric, null, this._context, this._statsbeatConfig);\r\n                            envelope.name = Constants.StatsbeatTelemetryName;\r\n                            envelopes.push(envelope);\r\n                        }\r\n                        this._statbeatMetrics = [];\r\n                        return [4 /*yield*/, this._sender.send(envelopes)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Statsbeat.prototype._getCustomProperties = function () {\r\n        this._language = STATSBEAT_LANGUAGE;\r\n        this._cikey = this._config.instrumentationKey;\r\n        this._sdkVersion = Context.sdkVersion; // \"node\" or \"node-nativeperf\"\r\n        this._os = os.type();\r\n        this._runtimeVersion = process.version;\r\n    };\r\n    Statsbeat.prototype._getResourceProvider = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            // Check resource provider\r\n            var waiting = false;\r\n            _this._resourceProvider = Constants.StatsbeatResourceProvider.unknown;\r\n            _this._resourceIdentifier = Constants.StatsbeatResourceProvider.unknown;\r\n            if (process.env.WEBSITE_SITE_NAME) { // Web apps\r\n                _this._resourceProvider = Constants.StatsbeatResourceProvider.appsvc;\r\n                _this._resourceIdentifier = process.env.WEBSITE_SITE_NAME;\r\n                if (process.env.WEBSITE_HOME_STAMPNAME) {\r\n                    _this._resourceIdentifier += \"/\" + process.env.WEBSITE_HOME_STAMPNAME;\r\n                }\r\n            }\r\n            else if (process.env.FUNCTIONS_WORKER_RUNTIME) { // Function apps\r\n                _this._resourceProvider = Constants.StatsbeatResourceProvider.functions;\r\n                if (process.env.WEBSITE_HOSTNAME) {\r\n                    _this._resourceIdentifier = process.env.WEBSITE_HOSTNAME;\r\n                }\r\n            }\r\n            else if (_this._config) {\r\n                if (_this._isVM === undefined || _this._isVM == true) {\r\n                    waiting = true;\r\n                    Vm.AzureVirtualMachine.getAzureComputeMetadata(_this._config, function (vmInfo) {\r\n                        _this._isVM = vmInfo.isVM;\r\n                        if (_this._isVM) {\r\n                            _this._resourceProvider = Constants.StatsbeatResourceProvider.vm;\r\n                            _this._resourceIdentifier = vmInfo.id + \"/\" + vmInfo.subscriptionId;\r\n                            // Override OS as VM info have higher precedence\r\n                            if (vmInfo.osType) {\r\n                                _this._os = vmInfo.osType;\r\n                            }\r\n                        }\r\n                        resolve();\r\n                    });\r\n                }\r\n                else {\r\n                    _this._resourceProvider = Constants.StatsbeatResourceProvider.unknown;\r\n                }\r\n            }\r\n            if (!waiting) {\r\n                resolve();\r\n            }\r\n        });\r\n    };\r\n    Statsbeat.prototype._shutdownStatsbeat = function () {\r\n        this.enable(false); // Disable Statsbeat as is it failed 3 times cosnecutively during initialization, is possible SDK is running in private or restricted network \r\n    };\r\n    Statsbeat.prototype._getConnectionString = function (config) {\r\n        var currentEndpoint = config.endpointUrl;\r\n        var euEndpoints = [\r\n            \"westeurope\",\r\n            \"northeurope\",\r\n            \"francecentral\",\r\n            \"francesouth\",\r\n            \"germanywestcentral\",\r\n            \"norwayeast\",\r\n            \"norwaywest\",\r\n            \"swedencentral\",\r\n            \"switzerlandnorth\",\r\n            \"switzerlandwest\"\r\n        ];\r\n        for (var i = 0; i < euEndpoints.length; i++) {\r\n            if (currentEndpoint.indexOf(euEndpoints[i]) > -1) {\r\n                return Statsbeat.EU_CONNECTION_STRING;\r\n            }\r\n        }\r\n        return Statsbeat.NON_EU_CONNECTION_STRING;\r\n    };\r\n    Statsbeat.NON_EU_CONNECTION_STRING = \"InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com\";\r\n    Statsbeat.EU_CONNECTION_STRING = \"InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com\";\r\n    Statsbeat.STATS_COLLECTION_SHORT_INTERVAL = 900000; // 15 minutes\r\n    Statsbeat.STATS_COLLECTION_LONG_INTERVAL = 86400000; // 1 day\r\n    Statsbeat.TAG = \"Statsbeat\";\r\n    return Statsbeat;\r\n}());\r\nmodule.exports = Statsbeat;\r\n//# sourceMappingURL=Statsbeat.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar zlib = require(\"zlib\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar snippetInjectionHelper = require(\"../Library/SnippetInjectionHelper\");\r\nvar prefixHelper = require(\"../Library/PrefixHelper\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar ConnectionStringParser = require(\"../Library/ConnectionStringParser\");\r\nvar applicationinsights_web_snippet_1 = require(\"@microsoft/applicationinsights-web-snippet\");\r\nvar WebSnippet = /** @class */ (function () {\r\n    function WebSnippet(client) {\r\n        var _a;\r\n        this._isIkeyValid = true;\r\n        if (!!WebSnippet.INSTANCE) {\r\n            throw new Error(\"Web snippet injection should be configured from the applicationInsights object\");\r\n        }\r\n        WebSnippet.INSTANCE = this;\r\n        // AI URL used to validate if snippet already included\r\n        WebSnippet._aiUrl = Constants.WEB_INSTRUMENTATION_DEFAULT_SOURCE;\r\n        WebSnippet._aiDeprecatedUrl = Constants.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;\r\n        var clientWebIkey = this._getWebSnippetIkey((_a = client.config) === null || _a === void 0 ? void 0 : _a.webInstrumentationConnectionString);\r\n        this._webInstrumentationIkey = clientWebIkey || client.config.instrumentationKey;\r\n        this._clientWebInstrumentationConfig = client.config.webInstrumentationConfig;\r\n        this._clientWebInstrumentationSrc = client.config.webInstrumentationSrc;\r\n        this._statsbeat = client.getStatsbeat();\r\n    }\r\n    WebSnippet.prototype.enable = function (isEnabled, webInstrumentationConnectionString) {\r\n        this._isEnabled = isEnabled;\r\n        this._webInstrumentationIkey = this._getWebSnippetIkey(webInstrumentationConnectionString) || this._webInstrumentationIkey;\r\n        WebSnippet._snippet = this._getWebInstrumentationReplacedStr();\r\n        if (this._isEnabled && !this._isInitialized && this._isIkeyValid) {\r\n            if (this._statsbeat) {\r\n                this._statsbeat.addFeature(Constants.StatsbeatFeature.WEB_SNIPPET);\r\n            }\r\n            this._initialize();\r\n        }\r\n        else if (!this._isEnabled) {\r\n            if (this._statsbeat) {\r\n                this._statsbeat.removeFeature(Constants.StatsbeatFeature.WEB_SNIPPET);\r\n            }\r\n        }\r\n    };\r\n    WebSnippet.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    WebSnippet.prototype._getWebSnippetIkey = function (connectionString) {\r\n        var iKey = null;\r\n        try {\r\n            var csCode = ConnectionStringParser.parse(connectionString);\r\n            var iKeyCode = csCode.instrumentationkey || \"\";\r\n            if (!ConnectionStringParser.isIkeyValid(iKeyCode)) {\r\n                this._isIkeyValid = false;\r\n                Logging.info(\"Invalid web Instrumentation connection string, web Instrumentation is not enabled.\");\r\n            }\r\n            else {\r\n                this._isIkeyValid = true;\r\n                iKey = iKeyCode;\r\n            }\r\n        }\r\n        catch (err) {\r\n            Logging.info(\"get web snippet ikey error: \" + err);\r\n        }\r\n        return iKey;\r\n    };\r\n    WebSnippet.prototype._getWebInstrumentationReplacedStr = function () {\r\n        var configStr = this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig);\r\n        var osStr = prefixHelper.getOsPrefix();\r\n        var rpStr = prefixHelper.getResourceProvider();\r\n        var snippetReplacedStr = this._webInstrumentationIkey + \"\\\",\\r\\n\" + configStr + \" disableIkeyDeprecationMessage: true,\\r\\n sdkExtension: \\\"\" + rpStr + osStr + \"d_n_\";\r\n        var replacedSnippet = applicationinsights_web_snippet_1.webSnippet.replace(\"INSTRUMENTATION_KEY\", snippetReplacedStr);\r\n        if (this._clientWebInstrumentationSrc) {\r\n            return replacedSnippet.replace(Constants.WEB_INSTRUMENTATION_DEFAULT_SOURCE + \".2.min.js\", this._clientWebInstrumentationSrc);\r\n        }\r\n        return replacedSnippet;\r\n    };\r\n    // Do not use string replace here, because double quote should be kept.\r\n    // we want to transfer all values of config to the web snippet in the following way:\r\n    // cfg: {\r\n    //      config1: \"config1 string value\",\r\n    //      config2: true,\r\n    //      config3: 1,\r\n    //      ...\r\n    //}});\r\n    WebSnippet.prototype._getClientWebInstrumentationConfigStr = function (config) {\r\n        var configStr = \"\";\r\n        try {\r\n            if (config != undefined && config.length > 0) {\r\n                config.forEach(function (item) {\r\n                    var key = item.name;\r\n                    if (key === undefined)\r\n                        return;\r\n                    var val = item.value;\r\n                    var entry = \"\";\r\n                    // NOTE: users should convert object/function to string themselves\r\n                    // Type \"function\" and \"object\" will be skipped!\r\n                    switch (typeof val) {\r\n                        case \"function\":\r\n                            break;\r\n                        case \"object\":\r\n                            break;\r\n                        case \"string\":\r\n                            entry = \" \" + key + \": \\\"\" + val + \"\\\",\\r\\n\";\r\n                            configStr += entry;\r\n                            break;\r\n                        default:\r\n                            entry = \" \" + key + \": \" + val + \",\\r\\n\";\r\n                            configStr += entry;\r\n                            break;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (e) {\r\n            // if has any errors here, web Instrumentation will be disabled.\r\n            this._isEnabled = false;\r\n            Logging.info(\"Parse client web instrumentation error. Web Instrumentation is disabled\");\r\n        }\r\n        return configStr;\r\n    };\r\n    WebSnippet.prototype._initialize = function () {\r\n        this._isInitialized = true;\r\n        var originalHttpServer = http.createServer;\r\n        var originalHttpsServer = https.createServer;\r\n        var isEnabled = this._isEnabled;\r\n        http.createServer = function (requestListener) {\r\n            var originalRequestListener = requestListener;\r\n            if (originalRequestListener) {\r\n                requestListener = function (request, response) {\r\n                    // Patch response write method\r\n                    var originalResponseWrite = response.write;\r\n                    var isGetRequest = request.method == \"GET\";\r\n                    response.write = function wrap(a, b, c) {\r\n                        //only patch GET request\r\n                        try {\r\n                            if (isEnabled && isGetRequest) {\r\n                                var headers = snippetInjectionHelper.getContentEncodingFromHeaders(response);\r\n                                var writeBufferType = undefined;\r\n                                if (typeof b === \"string\") {\r\n                                    writeBufferType = b;\r\n                                }\r\n                                if (headers === null || headers === undefined) {\r\n                                    if (WebSnippet.INSTANCE.ValidateInjection(response, a)) {\r\n                                        arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(response, a, undefined, writeBufferType);\r\n                                    }\r\n                                }\r\n                                else if (headers.length) {\r\n                                    var encodeType = headers[0];\r\n                                    arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(response, a, encodeType);\r\n                                }\r\n                            }\r\n                        }\r\n                        catch (err) {\r\n                            Logging.warn(\"Inject snippet error: \" + err);\r\n                        }\r\n                        return originalResponseWrite.apply(response, arguments);\r\n                    };\r\n                    // Patch response end method for cases when HTML is added there\r\n                    var originalResponseEnd = response.end;\r\n                    response.end = function wrap(a, b, c) {\r\n                        if (isEnabled && isGetRequest) {\r\n                            try {\r\n                                if (isEnabled && isGetRequest) {\r\n                                    var headers = snippetInjectionHelper.getContentEncodingFromHeaders(response);\r\n                                    var endBufferType = undefined;\r\n                                    if (typeof b === \"string\") {\r\n                                        endBufferType = b;\r\n                                    }\r\n                                    if (headers === null || headers === undefined) {\r\n                                        if (WebSnippet.INSTANCE.ValidateInjection(response, a)) {\r\n                                            arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(response, a, undefined, endBufferType);\r\n                                        }\r\n                                    }\r\n                                    else if (headers.length) {\r\n                                        var encodeType = headers[0];\r\n                                        arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(response, a, encodeType);\r\n                                    }\r\n                                }\r\n                            }\r\n                            catch (err) {\r\n                                Logging.warn(\"Inject snipet error: \" + err);\r\n                            }\r\n                        }\r\n                        return originalResponseEnd.apply(response, arguments);\r\n                    };\r\n                    return originalRequestListener(request, response);\r\n                };\r\n            }\r\n            return originalHttpServer(requestListener);\r\n        };\r\n        https.createServer = function (options, httpsRequestListener) {\r\n            var originalHttpsRequestListener = httpsRequestListener;\r\n            if (originalHttpsRequestListener) {\r\n                httpsRequestListener = function (req, res) {\r\n                    var isGetHttpsRequest = req.method == \"GET\";\r\n                    var originalHttpsResponseWrite = res.write;\r\n                    var originalHttpsResponseEnd = res.end;\r\n                    res.write = function wrap(a, b, c) {\r\n                        try {\r\n                            if (isEnabled && isGetHttpsRequest) {\r\n                                var headers = snippetInjectionHelper.getContentEncodingFromHeaders(res);\r\n                                var writeBufferType = undefined;\r\n                                if (typeof b === \"string\") {\r\n                                    writeBufferType = b;\r\n                                }\r\n                                if (headers === null || headers === undefined) {\r\n                                    if (WebSnippet.INSTANCE.ValidateInjection(res, a)) {\r\n                                        arguments[0] = this.InjectWebSnippet(res, a, undefined, writeBufferType);\r\n                                    }\r\n                                }\r\n                                else if (headers.length) {\r\n                                    var encodeType = headers[0];\r\n                                    arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(res, a, encodeType);\r\n                                }\r\n                            }\r\n                        }\r\n                        catch (err) {\r\n                            Logging.warn(\"Inject snippet error: \" + err);\r\n                        }\r\n                        return originalHttpsResponseWrite.apply(res, arguments);\r\n                    };\r\n                    res.end = function wrap(a, b, c) {\r\n                        try {\r\n                            if (isEnabled && isGetHttpsRequest) {\r\n                                var headers = snippetInjectionHelper.getContentEncodingFromHeaders(res);\r\n                                var endBufferType = undefined;\r\n                                if (typeof b === \"string\") {\r\n                                    endBufferType = b;\r\n                                }\r\n                                if (headers === null || headers === undefined) {\r\n                                    if (WebSnippet.INSTANCE.ValidateInjection(res, a)) {\r\n                                        arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(res, a, undefined, endBufferType);\r\n                                    }\r\n                                }\r\n                                else if (headers.length) {\r\n                                    var encodeType = headers[0];\r\n                                    arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(res, a, encodeType);\r\n                                }\r\n                            }\r\n                        }\r\n                        catch (err) {\r\n                            Logging.warn(\"Inject snippet error: \" + err);\r\n                        }\r\n                        return originalHttpsResponseEnd.apply(res, arguments);\r\n                    };\r\n                    return originalHttpsRequestListener(req, res);\r\n                };\r\n                return originalHttpsServer(options, httpsRequestListener);\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * Validate response and try to inject Web snippet\r\n     */\r\n    WebSnippet.prototype.ValidateInjection = function (response, input) {\r\n        try {\r\n            if (!response || !input || response.statusCode != 200)\r\n                return false;\r\n            var isContentHtml = snippetInjectionHelper.isContentTypeHeaderHtml(response);\r\n            if (!isContentHtml)\r\n                return false;\r\n            var inputStr = input.slice().toString();\r\n            if (inputStr.indexOf(\"<head>\") >= 0 && inputStr.indexOf(\"</head>\") >= 0) {\r\n                // Check if snippet not already present looking for AI Web SDK URL\r\n                if (inputStr.indexOf(WebSnippet._aiUrl) < 0 && inputStr.indexOf(WebSnippet._aiDeprecatedUrl) < 0) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            Logging.info(\"validate injections error: \" + err);\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Inject Web snippet\r\n     */\r\n    WebSnippet.prototype.InjectWebSnippet = function (response, input, encodeType, bufferEncodeType) {\r\n        try {\r\n            var isCompressedBuffer = !!encodeType;\r\n            if (!isCompressedBuffer) {\r\n                var html = input.toString();\r\n                var index = html.indexOf(\"</head>\");\r\n                if (index < 0)\r\n                    return input;\r\n                var newHtml = snippetInjectionHelper.insertSnippetByIndex(index, html, WebSnippet._snippet);\r\n                if (typeof input === \"string\") {\r\n                    response.removeHeader(\"Content-Length\");\r\n                    input = newHtml;\r\n                    response.setHeader(\"Content-Length\", Buffer.byteLength(input));\r\n                }\r\n                else if (Buffer.isBuffer(input)) {\r\n                    var bufferType = bufferEncodeType ? bufferEncodeType : \"utf8\";\r\n                    var isValidBufferType = snippetInjectionHelper.isBufferType(input, bufferType);\r\n                    if (isValidBufferType) {\r\n                        response.removeHeader(\"Content-Length\");\r\n                        var encodedString = Buffer.from(newHtml).toString(bufferType);\r\n                        input = Buffer.from(encodedString, bufferType);\r\n                        response.setHeader(\"Content-Length\", input.length);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                response.removeHeader(\"Content-Length\");\r\n                input = this._getInjectedCompressBuffer(response, input, encodeType);\r\n                response.setHeader(\"Content-Length\", input.length);\r\n            }\r\n        }\r\n        catch (ex) {\r\n            Logging.warn(\"Failed to inject web snippet and change content-lenght headers. Exception:\" + ex);\r\n        }\r\n        return input;\r\n    };\r\n    //***********************\r\n    // should NOT use sync functions here. But currently cannot get async functions to work\r\n    // because reponse.write return boolean\r\n    // and also this function do not support partial compression as well\r\n    // need more investigation\r\n    WebSnippet.prototype._getInjectedCompressBuffer = function (response, input, encodeType) {\r\n        try {\r\n            switch (encodeType) {\r\n                case snippetInjectionHelper.contentEncodingMethod.GZIP:\r\n                    var gunzipBuffer = zlib.gunzipSync(input);\r\n                    if (this.ValidateInjection(response, gunzipBuffer)) {\r\n                        var injectedGunzipBuffer = this.InjectWebSnippet(response, gunzipBuffer);\r\n                        input = zlib.gzipSync(injectedGunzipBuffer);\r\n                    }\r\n                    break;\r\n                case snippetInjectionHelper.contentEncodingMethod.DEFLATE:\r\n                    var inflateBuffer = zlib.inflateSync(input);\r\n                    if (this.ValidateInjection(response, inflateBuffer)) {\r\n                        var injectedInflateBuffer = this.InjectWebSnippet(response, inflateBuffer);\r\n                        input = zlib.deflateSync(injectedInflateBuffer);\r\n                    }\r\n                    break;\r\n                case snippetInjectionHelper.contentEncodingMethod.BR:\r\n                    var BrotliDecompressSync = snippetInjectionHelper.getBrotliDecompressSync(zlib);\r\n                    var BrotliCompressSync = snippetInjectionHelper.getBrotliCompressSync(zlib);\r\n                    if (BrotliDecompressSync && BrotliCompressSync) {\r\n                        var decompressBuffer = BrotliDecompressSync(input);\r\n                        if (this.ValidateInjection(response, decompressBuffer)) {\r\n                            var injectedDecompressBuffer = this.InjectWebSnippet(response, decompressBuffer);\r\n                            input = BrotliCompressSync(injectedDecompressBuffer);\r\n                        }\r\n                        break;\r\n                    }\r\n            }\r\n        }\r\n        catch (err) {\r\n            Logging.info(\"get web injection compress buffer error: \" + err);\r\n        }\r\n        return input;\r\n    };\r\n    WebSnippet.prototype.dispose = function () {\r\n        WebSnippet.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    return WebSnippet;\r\n}());\r\nmodule.exports = WebSnippet;\r\n//# sourceMappingURL=WebSnippet.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parseEventHubSpan = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar api_1 = require(\"@opentelemetry/api\");\r\nvar core_1 = require(\"@opentelemetry/core\");\r\nvar semantic_conventions_1 = require(\"@opentelemetry/semantic-conventions\");\r\nvar Constants_1 = require(\"../../../Declarations/Constants\");\r\n/**\r\n * Average span.links[].attributes.enqueuedTime\r\n */\r\nvar getTimeSinceEnqueued = function (span) {\r\n    var countEnqueueDiffs = 0;\r\n    var sumEnqueueDiffs = 0;\r\n    var startTimeMs = core_1.hrTimeToMilliseconds(span.startTime);\r\n    span.links.forEach(function (_a) {\r\n        var attributes = _a.attributes;\r\n        var enqueuedTime = attributes === null || attributes === void 0 ? void 0 : attributes[Constants_1.ENQUEUED_TIME];\r\n        if (enqueuedTime) {\r\n            countEnqueueDiffs += 1;\r\n            sumEnqueueDiffs += startTimeMs - (parseFloat(enqueuedTime.toString()) || 0);\r\n        }\r\n    });\r\n    return Math.max(sumEnqueueDiffs / (countEnqueueDiffs || 1), 0);\r\n};\r\n/**\r\n * Implementation of Mapping to Azure Monitor\r\n *\r\n * https://gist.github.com/lmolkova/e4215c0f44a49ef824983382762e6b92#file-z_azure_monitor_exporter_mapping-md\r\n */\r\nvar parseEventHubSpan = function (span, telemetry) {\r\n    var _a;\r\n    var namespace = span.attributes[Constants_1.AzNamespace];\r\n    var peerAddress = (span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_NAME] ||\r\n        span.attributes[\"peer.address\"] ||\r\n        \"unknown\").replace(/\\/$/g, \"\"); // remove trailing \"/\"\r\n    var messageBusDestination = (span.attributes[Constants_1.MessageBusDestination] || \"unknown\");\r\n    switch (span.kind) {\r\n        case api_1.SpanKind.CLIENT:\r\n            telemetry.dependencyTypeName = namespace;\r\n            telemetry.target = peerAddress + \"/\" + messageBusDestination;\r\n            break;\r\n        case api_1.SpanKind.PRODUCER:\r\n            telemetry.dependencyTypeName = Constants_1.DependencyTypeName.QueueMessage + \" | \" + namespace;\r\n            telemetry.target = peerAddress + \"/\" + messageBusDestination;\r\n            break;\r\n        case api_1.SpanKind.CONSUMER:\r\n            telemetry.source = peerAddress + \"/\" + messageBusDestination;\r\n            telemetry.measurements = __assign(__assign({}, telemetry.measurements), (_a = {}, _a[Constants_1.TIME_SINCE_ENQUEUED] = getTimeSinceEnqueued(span), _a));\r\n            break;\r\n        default: // no op\r\n    }\r\n};\r\nexports.parseEventHubSpan = parseEventHubSpan;\r\n//# sourceMappingURL=EventHub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.spanToTelemetryContract = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar url_1 = require(\"url\");\r\nvar api_1 = require(\"@opentelemetry/api\");\r\nvar semantic_conventions_1 = require(\"@opentelemetry/semantic-conventions\");\r\nvar Constants = require(\"../../Declarations/Constants\");\r\nvar EventHub_1 = require(\"./Azure/EventHub\");\r\nvar Util = require(\"../../Library/Util\");\r\nfunction createPropertiesFromSpan(span) {\r\n    var properties = {};\r\n    for (var _i = 0, _a = Object.keys(span.attributes); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        if (!(key.startsWith(\"http.\") ||\r\n            key.startsWith(\"rpc.\") ||\r\n            key.startsWith(\"db.\") ||\r\n            key.startsWith(\"peer.\") ||\r\n            key.startsWith(\"net.\"))) {\r\n            properties[key] = span.attributes[key];\r\n        }\r\n    }\r\n    var links = span.links.map(function (link) { return ({\r\n        operation_Id: link.context.traceId,\r\n        id: link.context.spanId\r\n    }); });\r\n    if (links.length > 0) {\r\n        properties[\"_MS.links\"] = Util.stringify(links);\r\n    }\r\n    return properties;\r\n}\r\nfunction isSqlDB(dbSystem) {\r\n    return (dbSystem === semantic_conventions_1.DbSystemValues.DB2 ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.DERBY ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.MARIADB ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.MSSQL ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.ORACLE ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.SQLITE ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.OTHER_SQL ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.HSQLDB ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.H2);\r\n}\r\nfunction getUrl(span) {\r\n    var httpMethod = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_METHOD];\r\n    if (httpMethod) {\r\n        var httpUrl = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_URL];\r\n        if (httpUrl) {\r\n            return String(httpUrl);\r\n        }\r\n        else {\r\n            var httpScheme = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_SCHEME];\r\n            var httpTarget = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_TARGET];\r\n            if (httpScheme && httpTarget) {\r\n                var httpHost = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_HOST];\r\n                if (httpHost) {\r\n                    return httpScheme + \"://\" + httpHost + httpTarget;\r\n                }\r\n                else {\r\n                    var netPeerPort = span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_PORT];\r\n                    if (netPeerPort) {\r\n                        var netPeerName = span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_NAME];\r\n                        if (netPeerName) {\r\n                            return httpScheme + \"://\" + netPeerName + \":\" + netPeerPort + httpTarget;\r\n                        }\r\n                        else {\r\n                            var netPeerIp = span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_IP];\r\n                            if (netPeerIp) {\r\n                                return httpScheme + \"://\" + netPeerIp + \":\" + netPeerPort + httpTarget;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\nfunction getDependencyTarget(span) {\r\n    var peerService = span.attributes[semantic_conventions_1.SemanticAttributes.PEER_SERVICE];\r\n    var httpHost = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_HOST];\r\n    var httpUrl = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_URL];\r\n    var netPeerName = span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_NAME];\r\n    var netPeerIp = span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_IP];\r\n    if (peerService) {\r\n        return String(peerService);\r\n    }\r\n    else if (httpHost) {\r\n        return String(httpHost);\r\n    }\r\n    else if (httpUrl) {\r\n        return String(httpUrl);\r\n    }\r\n    else if (netPeerName) {\r\n        return String(netPeerName);\r\n    }\r\n    else if (netPeerIp) {\r\n        return String(netPeerIp);\r\n    }\r\n    return \"\";\r\n}\r\nfunction createDependencyData(span) {\r\n    var remoteDependency = {\r\n        name: span.name,\r\n        success: span.status.code != api_1.SpanStatusCode.ERROR,\r\n        resultCode: \"0\",\r\n        duration: 0,\r\n        data: \"\",\r\n        dependencyTypeName: \"\"\r\n    };\r\n    if (span.kind === api_1.SpanKind.PRODUCER) {\r\n        remoteDependency.dependencyTypeName = Constants.DependencyTypeName.QueueMessage;\r\n    }\r\n    if (span.kind === api_1.SpanKind.INTERNAL && span.parentSpanId) {\r\n        remoteDependency.dependencyTypeName = Constants.DependencyTypeName.InProc;\r\n    }\r\n    var httpMethod = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_METHOD];\r\n    var dbSystem = span.attributes[semantic_conventions_1.SemanticAttributes.DB_SYSTEM];\r\n    var rpcSystem = span.attributes[semantic_conventions_1.SemanticAttributes.RPC_SYSTEM];\r\n    // HTTP Dependency\r\n    if (httpMethod) {\r\n        remoteDependency.dependencyTypeName = Constants.DependencyTypeName.Http;\r\n        var httpUrl = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_URL];\r\n        if (httpUrl) {\r\n            var pathName = \"\";\r\n            try {\r\n                var dependencyUrl = new url_1.URL(String(httpUrl));\r\n                pathName = dependencyUrl.pathname;\r\n            }\r\n            catch (ex) {\r\n                // Ignore error\r\n            }\r\n            remoteDependency.name = httpMethod + \" \" + pathName;\r\n        }\r\n        remoteDependency.data = getUrl(span);\r\n        var httpStatusCode = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_STATUS_CODE];\r\n        if (httpStatusCode) {\r\n            remoteDependency.resultCode = String(httpStatusCode);\r\n        }\r\n        var target = getDependencyTarget(span);\r\n        if (target) {\r\n            try {\r\n                // Remove default port\r\n                var portRegex = new RegExp(/(https?)(:\\/\\/.*)(:\\d+)(\\S*)/);\r\n                var res = portRegex.exec(target);\r\n                if (res != null) {\r\n                    var protocol = res[1];\r\n                    var port = res[3];\r\n                    if ((protocol == \"https\" && port == \":443\") || (protocol == \"http\" && port == \":80\")) {\r\n                        // Drop port\r\n                        target = res[1] + res[2] + res[4];\r\n                    }\r\n                }\r\n            }\r\n            catch (error) {\r\n                // Ignore error\r\n            }\r\n            remoteDependency.target = \"\" + target;\r\n        }\r\n    }\r\n    // DB Dependency\r\n    else if (dbSystem) {\r\n        // TODO: Remove special logic when Azure UX supports OpenTelemetry dbSystem\r\n        if (String(dbSystem) === semantic_conventions_1.DbSystemValues.MYSQL) {\r\n            remoteDependency.dependencyTypeName = \"mysql\";\r\n        }\r\n        else if (String(dbSystem) === semantic_conventions_1.DbSystemValues.POSTGRESQL) {\r\n            remoteDependency.dependencyTypeName = \"postgresql\";\r\n        }\r\n        else if (String(dbSystem) === semantic_conventions_1.DbSystemValues.MONGODB) {\r\n            remoteDependency.dependencyTypeName = \"mongodb\";\r\n        }\r\n        else if (String(dbSystem) === semantic_conventions_1.DbSystemValues.REDIS) {\r\n            remoteDependency.dependencyTypeName = \"redis\";\r\n        }\r\n        else if (isSqlDB(String(dbSystem))) {\r\n            remoteDependency.dependencyTypeName = \"SQL\";\r\n        }\r\n        else {\r\n            remoteDependency.dependencyTypeName = String(dbSystem);\r\n        }\r\n        var dbStatement = span.attributes[semantic_conventions_1.SemanticAttributes.DB_STATEMENT];\r\n        var dbOperation = span.attributes[semantic_conventions_1.SemanticAttributes.DB_OPERATION];\r\n        if (dbStatement) {\r\n            remoteDependency.data = String(dbStatement);\r\n        }\r\n        else if (dbOperation) {\r\n            remoteDependency.data = String(dbOperation);\r\n        }\r\n        var target = getDependencyTarget(span);\r\n        var dbName = span.attributes[semantic_conventions_1.SemanticAttributes.DB_NAME];\r\n        if (target) {\r\n            remoteDependency.target = dbName ? target + \"|\" + dbName : \"\" + target;\r\n        }\r\n        else {\r\n            remoteDependency.target = dbName ? \"\" + dbName : \"\" + dbSystem;\r\n        }\r\n    }\r\n    // grpc Dependency\r\n    else if (rpcSystem) {\r\n        remoteDependency.dependencyTypeName = Constants.DependencyTypeName.Grpc;\r\n        var grpcStatusCode = span.attributes[semantic_conventions_1.SemanticAttributes.RPC_GRPC_STATUS_CODE];\r\n        if (grpcStatusCode) {\r\n            remoteDependency.resultCode = String(grpcStatusCode);\r\n        }\r\n        var target = getDependencyTarget(span);\r\n        if (target) {\r\n            remoteDependency.target = \"\" + target;\r\n        }\r\n        else if (rpcSystem) {\r\n            remoteDependency.target = String(rpcSystem);\r\n        }\r\n    }\r\n    return remoteDependency;\r\n}\r\nfunction createRequestData(span) {\r\n    var requestData = {\r\n        name: span.name,\r\n        success: span.status.code != api_1.SpanStatusCode.ERROR,\r\n        resultCode: \"0\",\r\n        duration: 0,\r\n        url: \"\",\r\n        source: undefined\r\n    };\r\n    var httpMethod = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_METHOD];\r\n    var grpcStatusCode = span.attributes[semantic_conventions_1.SemanticAttributes.RPC_GRPC_STATUS_CODE];\r\n    if (httpMethod) {\r\n        // Try to get request name for server spans\r\n        if (span.kind == api_1.SpanKind.SERVER) {\r\n            var httpRoute = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_ROUTE];\r\n            var httpUrl = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_URL];\r\n            if (httpRoute) {\r\n                requestData.name = httpMethod + \" \" + httpRoute;\r\n            }\r\n            else if (httpUrl) {\r\n                try {\r\n                    var url = new url_1.URL(String(httpUrl));\r\n                    requestData.name = httpMethod + \" \" + url.pathname;\r\n                }\r\n                catch (ex) {\r\n                    // Ignore error\r\n                }\r\n            }\r\n        }\r\n        requestData.url = getUrl(span);\r\n        var httpStatusCode = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_STATUS_CODE];\r\n        if (httpStatusCode) {\r\n            requestData.resultCode = String(httpStatusCode);\r\n        }\r\n    }\r\n    else if (grpcStatusCode) {\r\n        requestData.resultCode = String(grpcStatusCode);\r\n    }\r\n    return requestData;\r\n}\r\nfunction spanToTelemetryContract(span) {\r\n    var telemetry;\r\n    switch (span.kind) {\r\n        case api_1.SpanKind.CLIENT:\r\n        case api_1.SpanKind.PRODUCER:\r\n        case api_1.SpanKind.INTERNAL:\r\n            telemetry = createDependencyData(span);\r\n            break;\r\n        case api_1.SpanKind.SERVER:\r\n        case api_1.SpanKind.CONSUMER:\r\n            telemetry = createRequestData(span);\r\n            break;\r\n    }\r\n    var spanContext = span.spanContext ? span.spanContext() : span.context(); // context is available in OT API <v0.19.0\r\n    var id = \"\" + spanContext.spanId;\r\n    var duration = Math.round(span.duration[0] * 1e3 + span.duration[1] / 1e6);\r\n    telemetry.id = id;\r\n    telemetry.duration = duration;\r\n    telemetry.properties = createPropertiesFromSpan(span);\r\n    // Azure SDK\r\n    if (span.attributes[Constants.AzNamespace]) {\r\n        if (span.kind === api_1.SpanKind.INTERNAL) {\r\n            telemetry.dependencyTypeName = Constants.DependencyTypeName.InProc + \" | \" + span.attributes[Constants.AzNamespace];\r\n        }\r\n        if (span.attributes[Constants.AzNamespace] === Constants.MicrosoftEventHub) {\r\n            EventHub_1.parseEventHubSpan(span, telemetry);\r\n        }\r\n    }\r\n    return telemetry;\r\n}\r\nexports.spanToTelemetryContract = spanToTelemetryContract;\r\n//# sourceMappingURL=SpanParser.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.subscriber = void 0;\r\nvar api_1 = require(\"@opentelemetry/api\");\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar SpanParser = require(\"./SpanParser\");\r\nvar AsyncHooksScopeManager_1 = require(\"../AsyncHooksScopeManager\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    try {\r\n        var span_1 = event.data;\r\n        var telemetry_1 = SpanParser.spanToTelemetryContract(span_1);\r\n        AsyncHooksScopeManager_1.AsyncScopeManager.with(span_1, function () {\r\n            clients.forEach(function (client) {\r\n                if (span_1.kind === api_1.SpanKind.SERVER || span_1.kind === api_1.SpanKind.CONSUMER) {\r\n                    client.trackRequest(telemetry_1);\r\n                }\r\n                else if (span_1.kind === api_1.SpanKind.CLIENT || span_1.kind === api_1.SpanKind.INTERNAL || span_1.kind === api_1.SpanKind.PRODUCER) {\r\n                    client.trackDependency(telemetry_1);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    catch (err) {\r\n        { /** ignore errors */ }\r\n    }\r\n};\r\nexports.subscriber = subscriber;\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"azure-coretracing\", exports.subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.AZURE_CORE_TRACING);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"azure-coretracing\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=azure-coretracing.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.dispose = exports.enable = void 0;\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\r\nvar bunyanToAILevelMap = {\r\n    10: Contracts_1.SeverityLevel.Verbose,\r\n    20: Contracts_1.SeverityLevel.Verbose,\r\n    30: Contracts_1.SeverityLevel.Information,\r\n    40: Contracts_1.SeverityLevel.Warning,\r\n    50: Contracts_1.SeverityLevel.Error,\r\n    60: Contracts_1.SeverityLevel.Critical\r\n};\r\nvar subscriber = function (event) {\r\n    var message = event.data.result;\r\n    clients.forEach(function (client) {\r\n        try {\r\n            // Try to parse message as Bunyan log is JSON\r\n            var log = JSON.parse(message);\r\n            if (log.err) {\r\n                var bunyanError = new Error(log.err.message);\r\n                bunyanError.name = log.err.name;\r\n                bunyanError.stack = log.err.stack;\r\n                client.trackException({ exception: bunyanError });\r\n                return;\r\n            }\r\n        }\r\n        catch (err) {\r\n            // Ignore error\r\n        }\r\n        var AIlevel = bunyanToAILevelMap[event.data.level];\r\n        client.trackTrace({ message: message, severity: AIlevel });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.BUNYAN);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\nfunction dispose() {\r\n    diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\r\n    clients = [];\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.dispose = exports.enable = void 0;\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    var message = event.data.message;\r\n    clients.forEach(function (client) {\r\n        if (message instanceof Error) {\r\n            client.trackException({ exception: message });\r\n        }\r\n        else {\r\n            // Message can have a trailing newline\r\n            if (message.lastIndexOf(\"\\n\") == message.length - 1) {\r\n                message = message.substring(0, message.length - 1);\r\n            }\r\n            client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\r\n        }\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.CONSOLE);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\nfunction dispose() {\r\n    diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\r\n    clients = [];\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.registerContextPreservation = exports.IsInitialized = void 0;\r\nvar Logging = require(\"../../Library/Logging\");\r\nvar JsonConfig_1 = require(\"../../Library/JsonConfig\");\r\nexports.IsInitialized = !JsonConfig_1.JsonConfig.getInstance().noDiagnosticChannel;\r\nvar TAG = \"DiagnosticChannel\";\r\nif (exports.IsInitialized) {\r\n    var publishers = require(\"diagnostic-channel-publishers\");\r\n    var individualOptOuts = JsonConfig_1.JsonConfig.getInstance().noPatchModules;\r\n    var unpatchedModules = individualOptOuts.split(\",\");\r\n    var modules = {\r\n        bunyan: publishers.bunyan,\r\n        console: publishers.console,\r\n        mongodb: publishers.mongodb,\r\n        mongodbCore: publishers.mongodbCore,\r\n        mysql: publishers.mysql,\r\n        redis: publishers.redis,\r\n        pg: publishers.pg,\r\n        pgPool: publishers.pgPool,\r\n        winston: publishers.winston,\r\n        azuresdk: publishers.azuresdk\r\n    };\r\n    for (var mod in modules) {\r\n        if (unpatchedModules.indexOf(mod) === -1) {\r\n            modules[mod].enable();\r\n            Logging.info(TAG, \"Subscribed to \" + mod + \" events\");\r\n        }\r\n    }\r\n    if (unpatchedModules.length > 0) {\r\n        Logging.info(TAG, \"Some modules will not be patched\", unpatchedModules);\r\n    }\r\n}\r\nelse {\r\n    Logging.info(TAG, \"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set\");\r\n}\r\nfunction registerContextPreservation(cb) {\r\n    if (!exports.IsInitialized) {\r\n        return;\r\n    }\r\n    var diagChannel = require(\"diagnostic-channel\");\r\n    diagChannel.channel.addContextPreservation(cb);\r\n}\r\nexports.registerContextPreservation = registerContextPreservation;\r\n//# sourceMappingURL=initialization.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.subscriber = void 0;\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    if (event.data.event.commandName === \"ismaster\") {\r\n        // suppress noisy ismaster commands\r\n        return;\r\n    }\r\n    clients.forEach(function (client) {\r\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: event.data.event.commandName,\r\n            name: event.data.event.commandName,\r\n            duration: event.data.event.duration,\r\n            success: event.data.succeeded,\r\n            /* TODO: transmit result code from mongo */\r\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\r\n            time: event.data.startedData.time,\r\n            dependencyTypeName: \"mongodb\"\r\n        });\r\n    });\r\n};\r\nexports.subscriber = subscriber;\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.MONGODB);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.subscriber = void 0;\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var queryObj = event.data.query || {};\r\n        var sqlString = queryObj.sql || \"Unknown query\";\r\n        var success = !event.data.err;\r\n        var connection = queryObj._connection || {};\r\n        var connectionConfig = connection.config || {};\r\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: sqlString,\r\n            name: sqlString,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            /* TODO: transmit result code from mysql */\r\n            resultCode: success ? \"0\" : \"1\",\r\n            time: event.data.time,\r\n            dependencyTypeName: \"mysql\"\r\n        });\r\n    });\r\n};\r\nexports.subscriber = subscriber;\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.MYSQL);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.subscriber = void 0;\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var q = event.data.query;\r\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\r\n        var success = !event.data.error;\r\n        var conn = event.data.database.host + \":\" + event.data.database.port;\r\n        client.trackDependency({\r\n            target: conn,\r\n            data: sql,\r\n            name: sql,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            resultCode: success ? \"0\" : \"1\",\r\n            time: event.data.time,\r\n            dependencyTypeName: \"postgres\"\r\n        });\r\n    });\r\n};\r\nexports.subscriber = subscriber;\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.POSTGRES);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.subscriber = void 0;\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        if (event.data.commandObj.command === \"info\") {\r\n            // We don't want to report 'info', it's irrelevant\r\n            return;\r\n        }\r\n        client.trackDependency({\r\n            target: event.data.address,\r\n            name: event.data.commandObj.command,\r\n            data: event.data.commandObj.command,\r\n            duration: event.data.duration,\r\n            success: !event.data.err,\r\n            /* TODO: transmit result code from redis */\r\n            resultCode: event.data.err ? \"1\" : \"0\",\r\n            time: event.data.time,\r\n            dependencyTypeName: \"redis\"\r\n        });\r\n    });\r\n};\r\nexports.subscriber = subscriber;\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.REDIS);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.dispose = exports.enable = void 0;\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar winstonToAILevelMap = {\r\n    syslog: function (og) {\r\n        var map = {\r\n            emerg: Contracts_1.SeverityLevel.Critical,\r\n            alert: Contracts_1.SeverityLevel.Critical,\r\n            crit: Contracts_1.SeverityLevel.Critical,\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warning: Contracts_1.SeverityLevel.Warning,\r\n            notice: Contracts_1.SeverityLevel.Information,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            debug: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    npm: function (og) {\r\n        var map = {\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warn: Contracts_1.SeverityLevel.Warning,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            verbose: Contracts_1.SeverityLevel.Verbose,\r\n            debug: Contracts_1.SeverityLevel.Verbose,\r\n            silly: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    unknown: function (og) {\r\n        return Contracts_1.SeverityLevel.Information;\r\n    }\r\n};\r\nvar subscriber = function (event) {\r\n    var message = event.data.message;\r\n    clients.forEach(function (client) {\r\n        if (message instanceof Error) {\r\n            client.trackException({\r\n                exception: message,\r\n                properties: event.data.meta\r\n            });\r\n        }\r\n        else {\r\n            var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\r\n            client.trackTrace({\r\n                message: message,\r\n                severity: AIlevel,\r\n                properties: event.data.meta\r\n            });\r\n        }\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.WINSTON);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\nfunction dispose() {\r\n    diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\r\n    clients = [];\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WEB_INSTRUMENTATION_DEPRECATED_SOURCE = exports.WEB_INSTRUMENTATION_DEFAULT_SOURCE = exports.TIME_SINCE_ENQUEUED = exports.ENQUEUED_TIME = exports.MessageBusDestination = exports.MicrosoftEventHub = exports.AzNamespace = exports.StatsbeatNetworkCategory = exports.StatsbeatFeatureType = exports.StatsbeatInstrumentation = exports.StatsbeatFeature = exports.StatsbeatCounter = exports.StatsbeatAttach = exports.StatsbeatResourceProvider = exports.StatsbeatTelemetryName = exports.HeartBeatMetricName = exports.DependencyTypeName = exports.TelemetryTypeStringToQuickPulseDocumentType = exports.TelemetryTypeStringToQuickPulseType = exports.QuickPulseType = exports.QuickPulseDocumentType = exports.PerformanceToQuickPulseCounter = exports.MetricId = exports.PerformanceCounter = exports.QuickPulseCounter = exports.DEFAULT_LIVEMETRICS_HOST = exports.DEFAULT_LIVEMETRICS_ENDPOINT = exports.DEFAULT_BREEZE_ENDPOINT = exports.APPLICATION_INSIGHTS_SDK_VERSION = void 0;\r\nexports.APPLICATION_INSIGHTS_SDK_VERSION = \"2.3.6\";\r\nexports.DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\r\nexports.DEFAULT_LIVEMETRICS_ENDPOINT = \"https://rt.services.visualstudio.com\";\r\nexports.DEFAULT_LIVEMETRICS_HOST = \"rt.services.visualstudio.com\";\r\nvar QuickPulseCounter;\r\n(function (QuickPulseCounter) {\r\n    // Memory\r\n    QuickPulseCounter[\"COMMITTED_BYTES\"] = \"\\\\Memory\\\\Committed Bytes\";\r\n    // CPU\r\n    QuickPulseCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\r\n    // Request\r\n    QuickPulseCounter[\"REQUEST_RATE\"] = \"\\\\ApplicationInsights\\\\Requests/Sec\";\r\n    QuickPulseCounter[\"REQUEST_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Requests Failed/Sec\";\r\n    QuickPulseCounter[\"REQUEST_DURATION\"] = \"\\\\ApplicationInsights\\\\Request Duration\";\r\n    // Dependency\r\n    QuickPulseCounter[\"DEPENDENCY_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls/Sec\";\r\n    QuickPulseCounter[\"DEPENDENCY_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls Failed/Sec\";\r\n    QuickPulseCounter[\"DEPENDENCY_DURATION\"] = \"\\\\ApplicationInsights\\\\Dependency Call Duration\";\r\n    // Exception\r\n    QuickPulseCounter[\"EXCEPTION_RATE\"] = \"\\\\ApplicationInsights\\\\Exceptions/Sec\";\r\n})(QuickPulseCounter = exports.QuickPulseCounter || (exports.QuickPulseCounter = {}));\r\nvar PerformanceCounter;\r\n(function (PerformanceCounter) {\r\n    // Memory\r\n    PerformanceCounter[\"PRIVATE_BYTES\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\";\r\n    PerformanceCounter[\"AVAILABLE_BYTES\"] = \"\\\\Memory\\\\Available Bytes\";\r\n    // CPU\r\n    PerformanceCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\r\n    PerformanceCounter[\"PROCESS_TIME\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\";\r\n    // Requests\r\n    PerformanceCounter[\"REQUEST_RATE\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\";\r\n    PerformanceCounter[\"REQUEST_DURATION\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\";\r\n})(PerformanceCounter = exports.PerformanceCounter || (exports.PerformanceCounter = {}));\r\nvar MetricId;\r\n(function (MetricId) {\r\n    MetricId[\"REQUESTS_DURATION\"] = \"requests/duration\";\r\n    MetricId[\"DEPENDENCIES_DURATION\"] = \"dependencies/duration\";\r\n    MetricId[\"EXCEPTIONS_COUNT\"] = \"exceptions/count\";\r\n    MetricId[\"TRACES_COUNT\"] = \"traces/count\";\r\n})(MetricId = exports.MetricId || (exports.MetricId = {}));\r\n/**\r\n * Map a PerformanceCounter/QuickPulseCounter to a QuickPulseCounter. If no mapping exists, mapping is *undefined*\r\n */\r\nexports.PerformanceToQuickPulseCounter = (_a = {},\r\n    _a[PerformanceCounter.PROCESSOR_TIME] = QuickPulseCounter.PROCESSOR_TIME,\r\n    _a[PerformanceCounter.REQUEST_RATE] = QuickPulseCounter.REQUEST_RATE,\r\n    _a[PerformanceCounter.REQUEST_DURATION] = QuickPulseCounter.REQUEST_DURATION,\r\n    // Remap quick pulse only counters\r\n    _a[QuickPulseCounter.COMMITTED_BYTES] = QuickPulseCounter.COMMITTED_BYTES,\r\n    _a[QuickPulseCounter.REQUEST_FAILURE_RATE] = QuickPulseCounter.REQUEST_FAILURE_RATE,\r\n    _a[QuickPulseCounter.DEPENDENCY_RATE] = QuickPulseCounter.DEPENDENCY_RATE,\r\n    _a[QuickPulseCounter.DEPENDENCY_FAILURE_RATE] = QuickPulseCounter.DEPENDENCY_FAILURE_RATE,\r\n    _a[QuickPulseCounter.DEPENDENCY_DURATION] = QuickPulseCounter.DEPENDENCY_DURATION,\r\n    _a[QuickPulseCounter.EXCEPTION_RATE] = QuickPulseCounter.EXCEPTION_RATE,\r\n    _a);\r\nexports.QuickPulseDocumentType = {\r\n    Event: \"Event\",\r\n    Exception: \"Exception\",\r\n    Trace: \"Trace\",\r\n    Metric: \"Metric\",\r\n    Request: \"Request\",\r\n    Dependency: \"RemoteDependency\",\r\n    Availability: \"Availability\",\r\n    PageView: \"PageView\"\r\n};\r\nexports.QuickPulseType = {\r\n    Event: \"EventTelemetryDocument\",\r\n    Exception: \"ExceptionTelemetryDocument\",\r\n    Trace: \"TraceTelemetryDocument\",\r\n    Metric: \"MetricTelemetryDocument\",\r\n    Request: \"RequestTelemetryDocument\",\r\n    Dependency: \"DependencyTelemetryDocument\",\r\n    Availability: \"AvailabilityTelemetryDocument\",\r\n    PageView: \"PageViewTelemetryDocument\"\r\n};\r\nexports.TelemetryTypeStringToQuickPulseType = {\r\n    EventData: exports.QuickPulseType.Event,\r\n    ExceptionData: exports.QuickPulseType.Exception,\r\n    MessageData: exports.QuickPulseType.Trace,\r\n    MetricData: exports.QuickPulseType.Metric,\r\n    RequestData: exports.QuickPulseType.Request,\r\n    RemoteDependencyData: exports.QuickPulseType.Dependency,\r\n    AvailabilityData: exports.QuickPulseType.Availability,\r\n    PageViewData: exports.QuickPulseType.PageView\r\n};\r\nexports.TelemetryTypeStringToQuickPulseDocumentType = {\r\n    EventData: exports.QuickPulseDocumentType.Event,\r\n    ExceptionData: exports.QuickPulseDocumentType.Exception,\r\n    MessageData: exports.QuickPulseDocumentType.Trace,\r\n    MetricData: exports.QuickPulseDocumentType.Metric,\r\n    RequestData: exports.QuickPulseDocumentType.Request,\r\n    RemoteDependencyData: exports.QuickPulseDocumentType.Dependency,\r\n    AvailabilityData: exports.QuickPulseDocumentType.Availability,\r\n    PageViewData: exports.QuickPulseDocumentType.PageView\r\n};\r\nexports.DependencyTypeName = {\r\n    Grpc: \"GRPC\",\r\n    Http: \"HTTP\",\r\n    InProc: \"InProc\",\r\n    Sql: \"SQL\",\r\n    QueueMessage: \"Queue Message\"\r\n};\r\nexports.HeartBeatMetricName = \"HeartBeat\";\r\nexports.StatsbeatTelemetryName = \"Statsbeat\";\r\nexports.StatsbeatResourceProvider = {\r\n    appsvc: \"appsvc\",\r\n    functions: \"functions\",\r\n    vm: \"vm\",\r\n    unknown: \"unknown\"\r\n};\r\nexports.StatsbeatAttach = {\r\n    codeless: \"codeless\",\r\n    sdk: \"sdk\"\r\n};\r\nexports.StatsbeatCounter = {\r\n    REQUEST_SUCCESS: \"Request Success Count\",\r\n    REQUEST_FAILURE: \"Request Failure Count\",\r\n    REQUEST_DURATION: \"Request Duration\",\r\n    RETRY_COUNT: \"Retry Count\",\r\n    THROTTLE_COUNT: \"Throttle Count\",\r\n    EXCEPTION_COUNT: \"Exception Count\",\r\n    ATTACH: \"Attach\",\r\n    FEATURE: \"Feature\"\r\n};\r\nvar StatsbeatFeature;\r\n(function (StatsbeatFeature) {\r\n    StatsbeatFeature[StatsbeatFeature[\"NONE\"] = 0] = \"NONE\";\r\n    StatsbeatFeature[StatsbeatFeature[\"DISK_RETRY\"] = 1] = \"DISK_RETRY\";\r\n    StatsbeatFeature[StatsbeatFeature[\"AAD_HANDLING\"] = 2] = \"AAD_HANDLING\";\r\n    StatsbeatFeature[StatsbeatFeature[\"WEB_SNIPPET\"] = 4] = \"WEB_SNIPPET\";\r\n})(StatsbeatFeature = exports.StatsbeatFeature || (exports.StatsbeatFeature = {}));\r\nvar StatsbeatInstrumentation;\r\n(function (StatsbeatInstrumentation) {\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"NONE\"] = 0] = \"NONE\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"AZURE_CORE_TRACING\"] = 1] = \"AZURE_CORE_TRACING\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"MONGODB\"] = 2] = \"MONGODB\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"MYSQL\"] = 4] = \"MYSQL\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"REDIS\"] = 8] = \"REDIS\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"POSTGRES\"] = 16] = \"POSTGRES\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"BUNYAN\"] = 32] = \"BUNYAN\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"WINSTON\"] = 64] = \"WINSTON\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"CONSOLE\"] = 128] = \"CONSOLE\";\r\n})(StatsbeatInstrumentation = exports.StatsbeatInstrumentation || (exports.StatsbeatInstrumentation = {}));\r\nvar StatsbeatFeatureType;\r\n(function (StatsbeatFeatureType) {\r\n    StatsbeatFeatureType[StatsbeatFeatureType[\"Feature\"] = 0] = \"Feature\";\r\n    StatsbeatFeatureType[StatsbeatFeatureType[\"Instrumentation\"] = 1] = \"Instrumentation\";\r\n})(StatsbeatFeatureType = exports.StatsbeatFeatureType || (exports.StatsbeatFeatureType = {}));\r\nvar StatsbeatNetworkCategory;\r\n(function (StatsbeatNetworkCategory) {\r\n    StatsbeatNetworkCategory[StatsbeatNetworkCategory[\"Breeze\"] = 0] = \"Breeze\";\r\n    StatsbeatNetworkCategory[StatsbeatNetworkCategory[\"Quickpulse\"] = 1] = \"Quickpulse\";\r\n})(StatsbeatNetworkCategory = exports.StatsbeatNetworkCategory || (exports.StatsbeatNetworkCategory = {}));\r\n//Azure SDK Span Attributes\r\nexports.AzNamespace = \"az.namespace\";\r\nexports.MicrosoftEventHub = \"Microsoft.EventHub\";\r\nexports.MessageBusDestination = \"message_bus.destination\";\r\n/**\r\n * AI enqueued time attribute.\r\n * @internal\r\n */\r\nexports.ENQUEUED_TIME = \"enqueuedTime\";\r\n/**\r\n * AI time since enqueued attribute.\r\n * @internal\r\n */\r\nexports.TIME_SINCE_ENQUEUED = \"timeSinceEnqueued\";\r\nexports.WEB_INSTRUMENTATION_DEFAULT_SOURCE = \"https://js.monitor.azure.com/scripts/b/ai\";\r\nexports.WEB_INSTRUMENTATION_DEPRECATED_SOURCE = \"https://az416426.vo.msecnd.net/scripts/b/ai\";\r\n//# sourceMappingURL=Constants.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.domainSupportsProperties = exports.RemoteDependencyDataConstants = void 0;\r\nvar Generated_1 = require(\"./Generated\");\r\nvar RemoteDependencyDataConstants = /** @class */ (function () {\r\n    function RemoteDependencyDataConstants() {\r\n    }\r\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\r\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\r\n    return RemoteDependencyDataConstants;\r\n}());\r\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\r\nfunction domainSupportsProperties(domain) {\r\n    return \"properties\" in domain || // Do extra typechecks in case the type supports it but properties is null/undefined\r\n        domain instanceof Generated_1.EventData ||\r\n        domain instanceof Generated_1.ExceptionData ||\r\n        domain instanceof Generated_1.MessageData ||\r\n        domain instanceof Generated_1.MetricData ||\r\n        domain instanceof Generated_1.PageViewData ||\r\n        domain instanceof Generated_1.RemoteDependencyData ||\r\n        domain instanceof Generated_1.RequestData;\r\n}\r\nexports.domainSupportsProperties = domainSupportsProperties;\r\n//# sourceMappingURL=Constants.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of AvailabilityData represent the result of executing an availability test.\r\n */\r\nvar AvailabilityData = /** @class */ (function (_super) {\r\n    __extends(AvailabilityData, _super);\r\n    function AvailabilityData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return AvailabilityData;\r\n}(Domain));\r\nmodule.exports = AvailabilityData;\r\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Data struct to contain only C section with custom fields.\r\n */\r\nvar Base = /** @class */ (function () {\r\n    function Base() {\r\n    }\r\n    return Base;\r\n}());\r\nmodule.exports = Base;\r\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nvar ContextTagKeys = /** @class */ (function () {\r\n    function ContextTagKeys() {\r\n        this.applicationVersion = \"ai.application.ver\";\r\n        this.deviceId = \"ai.device.id\";\r\n        this.deviceLocale = \"ai.device.locale\";\r\n        this.deviceModel = \"ai.device.model\";\r\n        this.deviceOEMName = \"ai.device.oemName\";\r\n        this.deviceOSVersion = \"ai.device.osVersion\";\r\n        this.deviceType = \"ai.device.type\";\r\n        this.locationIp = \"ai.location.ip\";\r\n        this.operationId = \"ai.operation.id\";\r\n        this.operationName = \"ai.operation.name\";\r\n        this.operationParentId = \"ai.operation.parentId\";\r\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\r\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\r\n        this.sessionId = \"ai.session.id\";\r\n        this.sessionIsFirst = \"ai.session.isFirst\";\r\n        this.userAccountId = \"ai.user.accountId\";\r\n        this.userId = \"ai.user.id\";\r\n        this.userAuthUserId = \"ai.user.authUserId\";\r\n        this.cloudRole = \"ai.cloud.role\";\r\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\r\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\r\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\r\n        this.internalNodeName = \"ai.internal.nodeName\";\r\n    }\r\n    return ContextTagKeys;\r\n}());\r\nmodule.exports = ContextTagKeys;\r\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Base = require(\"./Base\");\r\n\"use strict\";\r\n/**\r\n * Data struct to contain both B and C sections.\r\n */\r\nvar Data = /** @class */ (function (_super) {\r\n    __extends(Data, _super);\r\n    function Data() {\r\n        return _super.call(this) || this;\r\n    }\r\n    return Data;\r\n}(Base));\r\nmodule.exports = Data;\r\n//# sourceMappingURL=Data.js.map","\"use strict\";\r\n// THIS FILE WAS AUTOGENERATED\r\nvar DataPointType = require(\"./DataPointType\");\r\n\"use strict\";\r\n/**\r\n * Metric data single measurement.\r\n */\r\nvar DataPoint = /** @class */ (function () {\r\n    function DataPoint() {\r\n        this.kind = DataPointType.Measurement;\r\n    }\r\n    return DataPoint;\r\n}());\r\nmodule.exports = DataPoint;\r\n//# sourceMappingURL=DataPoint.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Type of the metric data measurement.\r\n */\r\nvar DataPointType;\r\n(function (DataPointType) {\r\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\r\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\r\n})(DataPointType || (DataPointType = {}));\r\nmodule.exports = DataPointType;\r\n//# sourceMappingURL=DataPointType.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * The abstract common base of all domains.\r\n */\r\nvar Domain = /** @class */ (function () {\r\n    function Domain() {\r\n    }\r\n    return Domain;\r\n}());\r\nmodule.exports = Domain;\r\n//# sourceMappingURL=Domain.js.map","\"use strict\";\r\n/**\r\n * System variables for a telemetry item.\r\n */\r\nvar Envelope = /** @class */ (function () {\r\n    function Envelope() {\r\n        this.ver = 1;\r\n        this.sampleRate = 100.0;\r\n        this.tags = {};\r\n    }\r\n    return Envelope;\r\n}());\r\nmodule.exports = Envelope;\r\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\r\n */\r\nvar EventData = /** @class */ (function (_super) {\r\n    __extends(EventData, _super);\r\n    function EventData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return EventData;\r\n}(Domain));\r\nmodule.exports = EventData;\r\n//# sourceMappingURL=EventData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\r\n */\r\nvar ExceptionData = /** @class */ (function (_super) {\r\n    __extends(ExceptionData, _super);\r\n    function ExceptionData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.exceptions = [];\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return ExceptionData;\r\n}(Domain));\r\nmodule.exports = ExceptionData;\r\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\r\n/**\r\n * Exception details of the exception in a chain.\r\n */\r\nvar ExceptionDetails = /** @class */ (function () {\r\n    function ExceptionDetails() {\r\n        this.hasFullStack = true;\r\n        this.parsedStack = [];\r\n    }\r\n    return ExceptionDetails;\r\n}());\r\nmodule.exports = ExceptionDetails;\r\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\r\n */\r\nvar MessageData = /** @class */ (function (_super) {\r\n    __extends(MessageData, _super);\r\n    function MessageData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MessageData;\r\n}(Domain));\r\nmodule.exports = MessageData;\r\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\r\n */\r\nvar MetricData = /** @class */ (function (_super) {\r\n    __extends(MetricData, _super);\r\n    function MetricData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.metrics = [];\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MetricData;\r\n}(Domain));\r\nmodule.exports = MetricData;\r\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar EventData = require(\"./EventData\");\r\n\"use strict\";\r\n/**\r\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\r\n */\r\nvar PageViewData = /** @class */ (function (_super) {\r\n    __extends(PageViewData, _super);\r\n    function PageViewData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return PageViewData;\r\n}(EventData));\r\nmodule.exports = PageViewData;\r\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\r\n */\r\nvar RemoteDependencyData = /** @class */ (function (_super) {\r\n    __extends(RemoteDependencyData, _super);\r\n    function RemoteDependencyData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.success = true;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RemoteDependencyData;\r\n}(Domain));\r\nmodule.exports = RemoteDependencyData;\r\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\r\n */\r\nvar RequestData = /** @class */ (function (_super) {\r\n    __extends(RequestData, _super);\r\n    function RequestData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RequestData;\r\n}(Domain));\r\nmodule.exports = RequestData;\r\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Defines the level of severity for the event.\r\n */\r\nvar SeverityLevel;\r\n(function (SeverityLevel) {\r\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\r\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\r\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\r\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\r\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\r\n})(SeverityLevel || (SeverityLevel = {}));\r\nmodule.exports = SeverityLevel;\r\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Stack frame information.\r\n */\r\nvar StackFrame = /** @class */ (function () {\r\n    function StackFrame() {\r\n    }\r\n    return StackFrame;\r\n}());\r\nmodule.exports = StackFrame;\r\n//# sourceMappingURL=StackFrame.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AvailabilityData = require(\"./AvailabilityData\");\r\nexports.Base = require(\"./Base\");\r\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\r\nexports.Data = require(\"./Data\");\r\nexports.DataPoint = require(\"./DataPoint\");\r\nexports.DataPointType = require(\"./DataPointType\");\r\nexports.Domain = require(\"./Domain\");\r\nexports.Envelope = require(\"./Envelope\");\r\nexports.EventData = require(\"./EventData\");\r\nexports.ExceptionData = require(\"./ExceptionData\");\r\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\r\nexports.MessageData = require(\"./MessageData\");\r\nexports.MetricData = require(\"./MetricData\");\r\nexports.PageViewData = require(\"./PageViewData\");\r\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\r\nexports.RequestData = require(\"./RequestData\");\r\nexports.SeverityLevel = require(\"./SeverityLevel\");\r\nexports.StackFrame = require(\"./StackFrame\");\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=DependencyDocumentQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=DocumentQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=EnvelopeQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=EventDocumentQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=ExceptionDocumentQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=MessageDocumentQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=MetricQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=RequestDocumentQuickPulse.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./MetricQuickPulse\"), exports);\r\n__exportStar(require(\"./EnvelopeQuickPulse\"), exports);\r\n__exportStar(require(\"./DocumentQuickPulse\"), exports);\r\n__exportStar(require(\"./ExceptionDocumentQuickPulse\"), exports);\r\n__exportStar(require(\"./MessageDocumentQuickPulse\"), exports);\r\n__exportStar(require(\"./DependencyDocumentQuickPulse\"), exports);\r\n__exportStar(require(\"./RequestDocumentQuickPulse\"), exports);\r\n__exportStar(require(\"./EventDocumentQuickPulse\"), exports);\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=AvailabilityTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=DependencyTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=EnvelopeTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=EventTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=ExceptionTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=MetricTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=NodeHttpDependencyTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=NodeHttpRequestTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=PageViewTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=RequestTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=Telemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TelemetryType = exports.TelemetryTypeString = exports.baseTypeToTelemetryType = exports.telemetryTypeToBaseType = void 0;\r\n/**\r\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\r\n * @param type Type to convert to BaseData string\r\n */\r\nfunction telemetryTypeToBaseType(type) {\r\n    switch (type) {\r\n        case TelemetryType.Event:\r\n            return \"EventData\";\r\n        case TelemetryType.Exception:\r\n            return \"ExceptionData\";\r\n        case TelemetryType.Trace:\r\n            return \"MessageData\";\r\n        case TelemetryType.Metric:\r\n            return \"MetricData\";\r\n        case TelemetryType.Request:\r\n            return \"RequestData\";\r\n        case TelemetryType.Dependency:\r\n            return \"RemoteDependencyData\";\r\n        case TelemetryType.Availability:\r\n            return \"AvailabilityData\";\r\n        case TelemetryType.PageView:\r\n            return \"PageViewData\";\r\n    }\r\n    return undefined;\r\n}\r\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\r\n/**\r\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\r\n * @param baseType BaseData string to convert to TelemetryType\r\n */\r\nfunction baseTypeToTelemetryType(baseType) {\r\n    switch (baseType) {\r\n        case \"EventData\":\r\n            return TelemetryType.Event;\r\n        case \"ExceptionData\":\r\n            return TelemetryType.Exception;\r\n        case \"MessageData\":\r\n            return TelemetryType.Trace;\r\n        case \"MetricData\":\r\n            return TelemetryType.Metric;\r\n        case \"RequestData\":\r\n            return TelemetryType.Request;\r\n        case \"RemoteDependencyData\":\r\n            return TelemetryType.Dependency;\r\n        case \"AvailabilityData\":\r\n            return TelemetryType.Availability;\r\n        case \"PageViewData\":\r\n            return TelemetryType.PageView;\r\n    }\r\n    return undefined;\r\n}\r\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\r\nexports.TelemetryTypeString = {\r\n    Event: \"EventData\",\r\n    Exception: \"ExceptionData\",\r\n    Trace: \"MessageData\",\r\n    Metric: \"MetricData\",\r\n    Request: \"RequestData\",\r\n    Dependency: \"RemoteDependencyData\",\r\n    Availability: \"AvailabilityData\",\r\n    PageView: \"PageViewData\"\r\n};\r\n/**\r\n * Telemetry types supported by this SDK\r\n */\r\nvar TelemetryType;\r\n(function (TelemetryType) {\r\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\r\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\r\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\r\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\r\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\r\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\r\n    TelemetryType[TelemetryType[\"Availability\"] = 6] = \"Availability\";\r\n    TelemetryType[TelemetryType[\"PageView\"] = 7] = \"PageView\";\r\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\r\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=TraceTelemetry.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./DependencyTelemetry\"), exports);\r\n__exportStar(require(\"./EventTelemetry\"), exports);\r\n__exportStar(require(\"./ExceptionTelemetry\"), exports);\r\n__exportStar(require(\"./MetricTelemetry\"), exports);\r\n__exportStar(require(\"./RequestTelemetry\"), exports);\r\n__exportStar(require(\"./TraceTelemetry\"), exports);\r\n__exportStar(require(\"./Telemetry\"), exports);\r\n__exportStar(require(\"./NodeHttpDependencyTelemetry\"), exports);\r\n__exportStar(require(\"./NodeHttpRequestTelemetry\"), exports);\r\n__exportStar(require(\"./AvailabilityTelemetry\"), exports);\r\n__exportStar(require(\"./PageViewTelemetry\"), exports);\r\n__exportStar(require(\"./EnvelopeTelemetry\"), exports);\r\n__exportStar(require(\"./TelemetryType\"), exports);\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./Constants\"), exports);\r\n__exportStar(require(\"./Generated\"), exports);\r\n__exportStar(require(\"./TelemetryTypes\"), exports);\r\n__exportStar(require(\"./QuickPulseTypes\"), exports);\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AggregatedMetricCounter = void 0;\r\nvar AggregatedMetricCounter = /** @class */ (function () {\r\n    function AggregatedMetricCounter(dimensions) {\r\n        this.dimensions = dimensions;\r\n        this.totalCount = 0;\r\n        this.lastTotalCount = 0;\r\n        this.intervalExecutionTime = 0;\r\n        this.lastTime = +new Date;\r\n        this.lastIntervalExecutionTime = 0;\r\n    }\r\n    return AggregatedMetricCounter;\r\n}());\r\nexports.AggregatedMetricCounter = AggregatedMetricCounter;\r\n//# sourceMappingURL=AggregatedMetricCounters.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PreaggregatedMetricPropertyNames = void 0;\r\n// Names expected in Breeze side for dimensions\r\nexports.PreaggregatedMetricPropertyNames = {\r\n    cloudRoleInstance: \"cloud/roleInstance\",\r\n    cloudRoleName: \"cloud/roleName\",\r\n    operationSynthetic: \"operation/synthetic\",\r\n    requestSuccess: \"Request.Success\",\r\n    requestResultCode: \"request/resultCode\",\r\n    dependencyType: \"Dependency.Type\",\r\n    dependencyTarget: \"dependency/target\",\r\n    dependencySuccess: \"Dependency.Success\",\r\n    dependencyResultCode: \"dependency/resultCode\",\r\n    traceSeverityLevel: \"trace/severityLevel\"\r\n};\r\n//# sourceMappingURL=AggregatedMetricDimensions.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar azureCore = require(\"@azure/core-http\");\r\nvar applicationInsightsResource = \"https://monitor.azure.com//.default\";\r\nvar AuthorizationHandler = /** @class */ (function () {\r\n    function AuthorizationHandler(credential) {\r\n        var scopes = [applicationInsightsResource];\r\n        var emptyPolicy = {\r\n            sendRequest: function (httpRequest) {\r\n                return null;\r\n            }\r\n        };\r\n        this._azureTokenPolicy = azureCore.bearerTokenAuthenticationPolicy(credential, scopes).create(emptyPolicy, new azureCore.RequestPolicyOptions());\r\n    }\r\n    /**\r\n    * Applies the Bearer token to the request through the Authorization header.\r\n    */\r\n    AuthorizationHandler.prototype.addAuthorizationHeader = function (requestOptions) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var authHeaderName, webResource;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        authHeaderName = azureCore.Constants.HeaderConstants.AUTHORIZATION;\r\n                        webResource = new azureCore.WebResource(\"https://\");\r\n                        return [4 /*yield*/, this._azureTokenPolicy.sendRequest(webResource)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        requestOptions.headers[authHeaderName] = webResource.headers.get(authHeaderName);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return AuthorizationHandler;\r\n}());\r\nmodule.exports = AuthorizationHandler;\r\n//# sourceMappingURL=AuthorizationHandler.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AzureVirtualMachine = void 0;\r\nvar Logging = require(\"./Logging\");\r\nvar Util = require(\"./Util\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar AIMS_URI = \"http://169.254.169.254/metadata/instance/compute\";\r\nvar AIMS_API_VERSION = \"api-version=2017-12-01\";\r\nvar AIMS_FORMAT = \"format=json\";\r\nvar ConnectionErrorMessage = \"UNREACH\"; // EHOSTUNREACH, ENETUNREACH\r\nvar AzureVirtualMachine = /** @class */ (function () {\r\n    function AzureVirtualMachine() {\r\n    }\r\n    AzureVirtualMachine.getAzureComputeMetadata = function (config, callback) {\r\n        var _a;\r\n        var _this = this;\r\n        var vmInfo = {};\r\n        var metadataRequestUrl = AIMS_URI + \"?\" + AIMS_API_VERSION + \"&\" + AIMS_FORMAT;\r\n        var requestOptions = (_a = {\r\n                method: \"GET\"\r\n            },\r\n            _a[AutoCollectHttpDependencies.disableCollectionRequestOption] = true,\r\n            _a.headers = {\r\n                \"Metadata\": \"True\"\r\n            },\r\n            _a);\r\n        var req = Util.makeRequest(config, metadataRequestUrl, requestOptions, function (res) {\r\n            if (res.statusCode === 200) {\r\n                // Success; VM\r\n                vmInfo.isVM = true;\r\n                var virtualMachineData_1 = \"\";\r\n                res.on(\"data\", function (data) {\r\n                    virtualMachineData_1 += data;\r\n                });\r\n                res.on(\"end\", function () {\r\n                    try {\r\n                        var data = JSON.parse(virtualMachineData_1);\r\n                        vmInfo.id = data[\"vmId\"] || \"\";\r\n                        vmInfo.subscriptionId = data[\"subscriptionId\"] || \"\";\r\n                        vmInfo.osType = data[\"osType\"] || \"\";\r\n                    }\r\n                    catch (error) {\r\n                        // Failed to parse JSON\r\n                        Logging.info(AzureVirtualMachine.TAG, error);\r\n                    }\r\n                    callback(vmInfo);\r\n                });\r\n            }\r\n            else {\r\n                callback(vmInfo);\r\n            }\r\n        }, false, false);\r\n        if (req) {\r\n            setTimeout(function () {\r\n                _this._requestTimedOut = true;\r\n                req.abort();\r\n            }, AzureVirtualMachine.HTTP_TIMEOUT);\r\n            req.on(\"error\", function (error) {\r\n                // Unable to contact endpoint.\r\n                // Do nothing for now.\r\n                if (_this._requestTimedOut) {\r\n                    if (error) {\r\n                        error.name = \"telemetry timeout\";\r\n                        error.message = \"telemetry request timed out\";\r\n                    }\r\n                }\r\n                if (error && error.message && error.message.indexOf(ConnectionErrorMessage) > -1) {\r\n                    vmInfo.isVM = false; // confirm it's not in VM\r\n                }\r\n                else {\r\n                    // Only log when is not determined if VM or not to avoid noise outside of Azure VMs\r\n                    Logging.info(AzureVirtualMachine.TAG, error);\r\n                }\r\n                callback(vmInfo);\r\n            });\r\n            req.end();\r\n        }\r\n    };\r\n    AzureVirtualMachine.HTTP_TIMEOUT = 2500; // 2.5 seconds\r\n    AzureVirtualMachine.TAG = \"AzureVirtualMachine\";\r\n    return AzureVirtualMachine;\r\n}());\r\nexports.AzureVirtualMachine = AzureVirtualMachine;\r\n//# sourceMappingURL=AzureVirtualMachine.js.map","\"use strict\";\r\nvar Logging = require(\"./Logging\");\r\nvar Util = require(\"./Util\");\r\nvar Channel = /** @class */ (function () {\r\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\r\n        this._buffer = [];\r\n        this._lastSend = 0;\r\n        this._isDisabled = isDisabled;\r\n        this._getBatchSize = getBatchSize;\r\n        this._getBatchIntervalMs = getBatchIntervalMs;\r\n        this._sender = sender;\r\n    }\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occurred while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\r\n    };\r\n    /**\r\n     * Add a telemetry item to the send buffer\r\n     */\r\n    Channel.prototype.send = function (envelope) {\r\n        var _this = this;\r\n        // if master off switch is set, don't send any data\r\n        if (this._isDisabled()) {\r\n            // Do not send/save data\r\n            return;\r\n        }\r\n        // validate input\r\n        if (!envelope) {\r\n            Logging.warn(\"Cannot send null/undefined telemetry\");\r\n            return;\r\n        }\r\n        // enqueue the payload\r\n        this._buffer.push(envelope);\r\n        // flush if we would exceed the max-size limit by adding this item\r\n        if (this._buffer.length >= this._getBatchSize()) {\r\n            this.triggerSend(false);\r\n            return;\r\n        }\r\n        // ensure an invocation timeout is set if anything is in the buffer\r\n        if (!this._timeoutHandle && this._buffer.length > 0) {\r\n            this._timeoutHandle = setTimeout(function () {\r\n                _this._timeoutHandle = null;\r\n                _this.triggerSend(false);\r\n            }, this._getBatchIntervalMs());\r\n        }\r\n    };\r\n    /**\r\n     * Immediately send buffered data\r\n     */\r\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\r\n        var bufferIsEmpty = this._buffer.length < 1;\r\n        if (!bufferIsEmpty) {\r\n            // invoke send\r\n            if (isNodeCrashing || Util.isNodeExit) {\r\n                this._sender.saveOnCrash(this._buffer);\r\n                if (typeof callback === \"function\") {\r\n                    callback(\"data saved on crash\");\r\n                }\r\n            }\r\n            else {\r\n                this._sender.send(this._buffer, callback);\r\n            }\r\n        }\r\n        // update lastSend time to enable throttling\r\n        this._lastSend = +new Date;\r\n        // clear buffer\r\n        this._buffer = [];\r\n        clearTimeout(this._timeoutHandle);\r\n        this._timeoutHandle = null;\r\n        if (bufferIsEmpty && typeof callback === \"function\") {\r\n            callback(\"no data to send\");\r\n        }\r\n    };\r\n    return Channel;\r\n}());\r\nmodule.exports = Channel;\r\n//# sourceMappingURL=Channel.js.map","\"use strict\";\r\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\r\nvar ConnectionStringParser = require(\"./ConnectionStringParser\");\r\nvar Logging = require(\"./Logging\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar url = require(\"url\");\r\nvar JsonConfig_1 = require(\"./JsonConfig\");\r\nvar Config = /** @class */ (function () {\r\n    function Config(setupString) {\r\n        var _this = this;\r\n        this._endpointBase = Constants.DEFAULT_BREEZE_ENDPOINT;\r\n        // Load config values from env variables and JSON if available\r\n        this._mergeConfig();\r\n        var connectionStringEnv = this._connectionString;\r\n        var csCode = ConnectionStringParser.parse(setupString);\r\n        var csEnv = ConnectionStringParser.parse(connectionStringEnv);\r\n        var iKeyCode = !csCode.instrumentationkey && Object.keys(csCode).length > 0\r\n            ? null // CS was valid but instrumentation key was not provided, null and grab from env var\r\n            : setupString; // CS was invalid, so it must be an ikey\r\n        var instrumentationKeyEnv = this._instrumentationKey;\r\n        this.instrumentationKey = csCode.instrumentationkey || iKeyCode /* === instrumentationKey */ || csEnv.instrumentationkey || instrumentationKeyEnv;\r\n        var endpoint = \"\" + (this.endpointUrl || csCode.ingestionendpoint || csEnv.ingestionendpoint || this._endpointBase);\r\n        if (endpoint.endsWith(\"/\")) {\r\n            // Remove extra '/' if present\r\n            endpoint = endpoint.slice(0, -1);\r\n        }\r\n        this.endpointUrl = endpoint + \"/v2.1/track\";\r\n        this.maxBatchSize = this.maxBatchSize || 250;\r\n        this.maxBatchIntervalMs = this.maxBatchIntervalMs || 15000;\r\n        this.disableAppInsights = this.disableAppInsights || false;\r\n        this.samplingPercentage = this.samplingPercentage || 100;\r\n        this.correlationIdRetryIntervalMs = this.correlationIdRetryIntervalMs || 30 * 1000;\r\n        this.enableWebInstrumentation = this.enableWebInstrumentation || this.enableAutoWebSnippetInjection || false;\r\n        this.webInstrumentationConfig = this.webInstrumentationConfig || null;\r\n        this.enableAutoWebSnippetInjection = this.enableWebInstrumentation;\r\n        this.correlationHeaderExcludedDomains =\r\n            this.correlationHeaderExcludedDomains ||\r\n                [\r\n                    \"*.core.windows.net\",\r\n                    \"*.core.chinacloudapi.cn\",\r\n                    \"*.core.cloudapi.de\",\r\n                    \"*.core.usgovcloudapi.net\",\r\n                    \"*.core.microsoft.scloud\",\r\n                    \"*.core.eaglex.ic.gov\"\r\n                ];\r\n        this._setCorrelationId = function (correlationId) { return _this.correlationId = correlationId; };\r\n        this.ignoreLegacyHeaders = this.ignoreLegacyHeaders || false;\r\n        this.profileQueryEndpoint = csCode.ingestionendpoint || csEnv.ingestionendpoint || process.env[Config.ENV_profileQueryEndpoint] || this._endpointBase;\r\n        this.quickPulseHost = this.quickPulseHost || csCode.liveendpoint || csEnv.liveendpoint || process.env[Config.ENV_quickPulseHost] || Constants.DEFAULT_LIVEMETRICS_HOST;\r\n        this.webInstrumentationConnectionString = this.webInstrumentationConnectionString || this._webInstrumentationConnectionString || \"\";\r\n        this.webSnippetConnectionString = this.webInstrumentationConnectionString;\r\n        // Parse quickPulseHost if it starts with http(s)://\r\n        if (this.quickPulseHost.match(/^https?:\\/\\//)) {\r\n            this.quickPulseHost = new url.URL(this.quickPulseHost).host;\r\n        }\r\n    }\r\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\r\n        get: function () {\r\n            return this._profileQueryEndpoint;\r\n        },\r\n        set: function (endpoint) {\r\n            CorrelationIdManager.cancelCorrelationIdQuery(this, this._setCorrelationId);\r\n            this._profileQueryEndpoint = endpoint;\r\n            this.correlationId = CorrelationIdManager.correlationIdPrefix; // Reset the correlationId while we wait for the new query\r\n            CorrelationIdManager.queryCorrelationId(this, this._setCorrelationId);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Config.prototype, \"instrumentationKey\", {\r\n        get: function () {\r\n            return this._instrumentationKey;\r\n        },\r\n        set: function (iKey) {\r\n            if (!Config._validateInstrumentationKey(iKey)) {\r\n                Logging.warn(\"An invalid instrumentation key was provided. There may be resulting telemetry loss\", this.instrumentationKey);\r\n            }\r\n            this._instrumentationKey = iKey;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Config.prototype, \"webSnippetConnectionString\", {\r\n        get: function () {\r\n            return this._webInstrumentationConnectionString;\r\n        },\r\n        set: function (connectionString) {\r\n            this._webInstrumentationConnectionString = connectionString;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Config.prototype, \"webInstrumentationConnectionString\", {\r\n        get: function () {\r\n            return this._webInstrumentationConnectionString;\r\n        },\r\n        set: function (connectionString) {\r\n            this._webInstrumentationConnectionString = connectionString;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Config.prototype._mergeConfig = function () {\r\n        var jsonConfig = JsonConfig_1.JsonConfig.getInstance();\r\n        this._connectionString = jsonConfig.connectionString;\r\n        this._instrumentationKey = jsonConfig.instrumentationKey;\r\n        this.correlationHeaderExcludedDomains = jsonConfig.correlationHeaderExcludedDomains;\r\n        this.correlationIdRetryIntervalMs = jsonConfig.correlationIdRetryIntervalMs;\r\n        this.disableAllExtendedMetrics = jsonConfig.disableAllExtendedMetrics;\r\n        this.disableAppInsights = jsonConfig.disableAppInsights;\r\n        this.disableStatsbeat = jsonConfig.disableStatsbeat;\r\n        this.distributedTracingMode = jsonConfig.distributedTracingMode;\r\n        this.enableAutoCollectConsole = jsonConfig.enableAutoCollectConsole;\r\n        this.enableAutoCollectDependencies = jsonConfig.enableAutoCollectDependencies;\r\n        this.enableAutoCollectExceptions = jsonConfig.enableAutoCollectExceptions;\r\n        this.enableAutoCollectExtendedMetrics = jsonConfig.enableAutoCollectExtendedMetrics;\r\n        this.enableAutoCollectExternalLoggers = jsonConfig.enableAutoCollectExternalLoggers;\r\n        this.enableAutoCollectHeartbeat = jsonConfig.enableAutoCollectHeartbeat;\r\n        this.enableAutoCollectPerformance = jsonConfig.enableAutoCollectPerformance;\r\n        this.enableAutoCollectPreAggregatedMetrics = jsonConfig.enableAutoCollectPreAggregatedMetrics;\r\n        this.enableAutoCollectRequests = jsonConfig.enableAutoCollectRequests;\r\n        this.enableAutoDependencyCorrelation = jsonConfig.enableAutoDependencyCorrelation;\r\n        this.enableInternalDebugLogging = jsonConfig.enableInternalDebugLogging;\r\n        this.enableInternalWarningLogging = jsonConfig.enableInternalWarningLogging;\r\n        this.enableResendInterval = jsonConfig.enableResendInterval;\r\n        this.enableMaxBytesOnDisk = jsonConfig.enableMaxBytesOnDisk;\r\n        this.enableSendLiveMetrics = jsonConfig.enableSendLiveMetrics;\r\n        this.enableUseAsyncHooks = jsonConfig.enableUseAsyncHooks;\r\n        this.enableUseDiskRetryCaching = jsonConfig.enableUseDiskRetryCaching;\r\n        this.endpointUrl = jsonConfig.endpointUrl;\r\n        this.extendedMetricDisablers = jsonConfig.extendedMetricDisablers;\r\n        this.ignoreLegacyHeaders = jsonConfig.ignoreLegacyHeaders;\r\n        this.maxBatchIntervalMs = jsonConfig.maxBatchIntervalMs;\r\n        this.maxBatchSize = jsonConfig.maxBatchSize;\r\n        this.proxyHttpUrl = jsonConfig.proxyHttpUrl;\r\n        this.proxyHttpsUrl = jsonConfig.proxyHttpsUrl;\r\n        this.quickPulseHost = jsonConfig.quickPulseHost;\r\n        this.samplingPercentage = jsonConfig.samplingPercentage;\r\n        this.enableWebInstrumentation = jsonConfig.enableWebInstrumentation;\r\n        this._webInstrumentationConnectionString = jsonConfig.webInstrumentationConnectionString;\r\n        this.webInstrumentationConfig = jsonConfig.webInstrumentationConfig;\r\n        this.webInstrumentationSrc = jsonConfig.webInstrumentationSrc;\r\n    };\r\n    /**\r\n    * Validate UUID Format\r\n    * Specs taken from breeze repo\r\n    * The definition of a VALID instrumentation key is as follows:\r\n    * Not none\r\n    * Not empty\r\n    * Every character is a hex character [0-9a-f]\r\n    * 32 characters are separated into 5 sections via 4 dashes\r\n    * First section has 8 characters\r\n    * Second section has 4 characters\r\n    * Third section has 4 characters\r\n    * Fourth section has 4 characters\r\n    * Fifth section has 12 characters\r\n    */\r\n    Config._validateInstrumentationKey = function (iKey) {\r\n        var UUID_Regex = \"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$\";\r\n        var regexp = new RegExp(UUID_Regex);\r\n        return regexp.test(iKey);\r\n    };\r\n    Config.ENV_azurePrefix = \"APPSETTING_\"; // Azure adds this prefix to all environment variables\r\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\"; // This key is provided in the readme\r\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\r\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\r\n    Config.ENV_quickPulseHost = \"APPINSIGHTS_QUICKPULSE_HOST\";\r\n    return Config;\r\n}());\r\nmodule.exports = Config;\r\n//# sourceMappingURL=Config.js.map","\"use strict\";\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar ConnectionStringParser = /** @class */ (function () {\r\n    function ConnectionStringParser() {\r\n    }\r\n    ConnectionStringParser.parse = function (connectionString) {\r\n        if (!connectionString) {\r\n            return {};\r\n        }\r\n        var kvPairs = connectionString.split(ConnectionStringParser._FIELDS_SEPARATOR);\r\n        var result = kvPairs.reduce(function (fields, kv) {\r\n            var kvParts = kv.split(ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR);\r\n            if (kvParts.length === 2) { // only save fields with valid formats\r\n                var key = kvParts[0].toLowerCase();\r\n                var value = kvParts[1];\r\n                fields[key] = value;\r\n            }\r\n            return fields;\r\n        }, {});\r\n        if (Object.keys(result).length > 0) {\r\n            // this is a valid connection string, so parse the results\r\n            if (result.endpointsuffix) {\r\n                // use endpoint suffix where overrides are not provided\r\n                var locationPrefix = result.location ? result.location + \".\" : \"\";\r\n                result.ingestionendpoint = result.ingestionendpoint || (\"https://\" + locationPrefix + \"dc.\" + result.endpointsuffix);\r\n                result.liveendpoint = result.liveendpoint || (\"https://\" + locationPrefix + \"live.\" + result.endpointsuffix);\r\n            }\r\n            // apply the default endpoints\r\n            result.ingestionendpoint = result.ingestionendpoint || Constants.DEFAULT_BREEZE_ENDPOINT;\r\n            result.liveendpoint = result.liveendpoint || Constants.DEFAULT_LIVEMETRICS_ENDPOINT;\r\n        }\r\n        return result;\r\n    };\r\n    ConnectionStringParser.isIkeyValid = function (iKey) {\r\n        if (!iKey || iKey == \"\")\r\n            return false;\r\n        var UUID_Regex = \"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$\";\r\n        var regexp = new RegExp(UUID_Regex);\r\n        return regexp.test(iKey);\r\n    };\r\n    ConnectionStringParser._FIELDS_SEPARATOR = \";\";\r\n    ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR = \"=\";\r\n    return ConnectionStringParser;\r\n}());\r\nmodule.exports = ConnectionStringParser;\r\n//# sourceMappingURL=ConnectionStringParser.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Constants_1 = require(\"../Declarations/Constants\");\r\nvar Logging = require(\"./Logging\");\r\nvar Context = /** @class */ (function () {\r\n    function Context(packageJsonPath) {\r\n        this.keys = new Contracts.ContextTagKeys();\r\n        this.tags = {};\r\n        this._loadApplicationContext(packageJsonPath);\r\n        this._loadDeviceContext();\r\n        this._loadInternalContext();\r\n    }\r\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\r\n        // note: this should return the host package.json\r\n        packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\r\n        if (!Context.appVersion[packageJsonPath]) {\r\n            Context.appVersion[packageJsonPath] = \"unknown\";\r\n            try {\r\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\r\n                if (packageJson && typeof packageJson.version === \"string\") {\r\n                    Context.appVersion[packageJsonPath] = packageJson.version;\r\n                }\r\n            }\r\n            catch (exception) {\r\n                Logging.info(\"unable to read app version: \", exception);\r\n            }\r\n        }\r\n        this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\r\n    };\r\n    Context.prototype._loadDeviceContext = function () {\r\n        this.tags[this.keys.deviceId] = \"\";\r\n        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();\r\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\r\n        this.tags[this.keys.cloudRole] = Context.DefaultRoleName;\r\n        // not yet supported tags\r\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\r\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\r\n    };\r\n    Context.prototype._loadInternalContext = function () {\r\n        Context.sdkVersion = Constants_1.APPLICATION_INSIGHTS_SDK_VERSION;\r\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\r\n    };\r\n    Context.DefaultRoleName = \"Web\";\r\n    Context.appVersion = {};\r\n    Context.sdkVersion = null;\r\n    return Context;\r\n}());\r\nmodule.exports = Context;\r\n//# sourceMappingURL=Context.js.map","\"use strict\";\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar CorrelationIdManager = /** @class */ (function () {\r\n    function CorrelationIdManager() {\r\n    }\r\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\r\n        var _this = this;\r\n        // GET request to `${this.endpointBase}/api/profiles/${this.instrumentationKey}/appId`\r\n        // If it 404s, the iKey is bad and we should give up\r\n        // If it fails otherwise, try again later\r\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\r\n        if (CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString)) {\r\n            callback(CorrelationIdManager.completedLookups[appIdUrlString]);\r\n            return;\r\n        }\r\n        else if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n            CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);\r\n            return;\r\n        }\r\n        CorrelationIdManager.pendingLookups[appIdUrlString] = [callback];\r\n        var fetchAppId = function () {\r\n            if (!CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n                // This query has been cancelled.\r\n                return;\r\n            }\r\n            var requestOptions = {\r\n                method: \"GET\",\r\n                // Ensure this request is not captured by auto-collection.\r\n                // Note: we don't refer to the property in HttpDependencyParser because that would cause a cyclical dependency\r\n                disableAppInsightsAutoCollection: true\r\n            };\r\n            Logging.info(CorrelationIdManager.TAG, requestOptions);\r\n            var req = Util.makeRequest(config, appIdUrlString, requestOptions, function (res) {\r\n                if (res.statusCode === 200) {\r\n                    // Success; extract the appId from the body\r\n                    var appId_1 = \"\";\r\n                    res.setEncoding(\"utf-8\");\r\n                    res.on(\"data\", function (data) {\r\n                        appId_1 += data;\r\n                    });\r\n                    res.on(\"end\", function () {\r\n                        Logging.info(CorrelationIdManager.TAG, appId_1);\r\n                        var result = CorrelationIdManager.correlationIdPrefix + appId_1;\r\n                        CorrelationIdManager.completedLookups[appIdUrlString] = result;\r\n                        if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n                            CorrelationIdManager.pendingLookups[appIdUrlString].forEach(function (cb) { return cb(result); });\r\n                        }\r\n                        delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n                    });\r\n                }\r\n                else if (res.statusCode >= 400 && res.statusCode < 500) {\r\n                    // Not found, probably a bad key. Do not try again.\r\n                    CorrelationIdManager.completedLookups[appIdUrlString] = undefined;\r\n                    delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n                }\r\n                else {\r\n                    // Keep retrying\r\n                    return;\r\n                }\r\n                // Do not retry\r\n                if (CorrelationIdManager._handle) {\r\n                    clearTimeout(CorrelationIdManager._handle);\r\n                    CorrelationIdManager._handle = undefined;\r\n                }\r\n            }, true, false);\r\n            if (req) {\r\n                req.setTimeout(CorrelationIdManager.HTTP_TIMEOUT, function () {\r\n                    _this._requestTimedOut = true;\r\n                    req.abort();\r\n                });\r\n                req.on(\"error\", function (error) {\r\n                    // Unable to contact endpoint.\r\n                    // Do nothing for now.\r\n                    if (_this._requestTimedOut) {\r\n                        error.name = \"telemetry timeout\";\r\n                        error.message = \"telemetry request timed out\";\r\n                    }\r\n                    Logging.warn(CorrelationIdManager.TAG, error);\r\n                    if (_this._handle) {\r\n                        clearTimeout(CorrelationIdManager._handle);\r\n                        CorrelationIdManager._handle = undefined;\r\n                    }\r\n                });\r\n                req.end();\r\n            }\r\n        };\r\n        if (!CorrelationIdManager._handle) {\r\n            CorrelationIdManager._handle = setTimeout(fetchAppId, config.correlationIdRetryIntervalMs);\r\n            CorrelationIdManager._handle.unref(); // Don't block apps from terminating\r\n        }\r\n        // Initial fetch\r\n        setImmediate(fetchAppId);\r\n    };\r\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\r\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\r\n        var pendingLookups = CorrelationIdManager.pendingLookups[appIdUrlString];\r\n        if (pendingLookups) {\r\n            CorrelationIdManager.pendingLookups[appIdUrlString] = pendingLookups.filter(function (cb) { return cb != callback; });\r\n            if (CorrelationIdManager.pendingLookups[appIdUrlString].length == 0) {\r\n                delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\r\n     * @param parentId\r\n     */\r\n    CorrelationIdManager.generateRequestId = function (parentId) {\r\n        if (parentId) {\r\n            parentId = parentId[0] == \"|\" ? parentId : \"|\" + parentId;\r\n            if (parentId[parentId.length - 1] !== \".\") {\r\n                parentId += \".\";\r\n            }\r\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\r\n            return CorrelationIdManager.appendSuffix(parentId, suffix, \"_\");\r\n        }\r\n        else {\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n    };\r\n    /**\r\n     * Given a hierarchical identifier of the form |X.*\r\n     * return the root identifier X\r\n     * @param id\r\n     */\r\n    CorrelationIdManager.getRootId = function (id) {\r\n        var endIndex = id.indexOf(\".\");\r\n        if (endIndex < 0) {\r\n            endIndex = id.length;\r\n        }\r\n        var startIndex = id[0] === \"|\" ? 1 : 0;\r\n        return id.substring(startIndex, endIndex);\r\n    };\r\n    CorrelationIdManager.generateRootId = function () {\r\n        return \"|\" + Util.w3cTraceId() + \".\";\r\n    };\r\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\r\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\r\n            return parentId + suffix + delimiter;\r\n        }\r\n        // Combined identifier would be too long, so we must truncate it.\r\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\r\n        // overflow delimiter '#'\r\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\r\n        if (parentId.length > trimPosition) {\r\n            for (; trimPosition > 1; --trimPosition) {\r\n                var c = parentId[trimPosition - 1];\r\n                if (c === \".\" || c === \"_\") {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (trimPosition <= 1) {\r\n            // parentId is not a valid ID\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n        suffix = Util.randomu32().toString(16);\r\n        while (suffix.length < 8) {\r\n            suffix = \"0\" + suffix;\r\n        }\r\n        return parentId.substring(0, trimPosition) + suffix + \"#\";\r\n    };\r\n    CorrelationIdManager.TAG = \"CorrelationIdManager\";\r\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\r\n    CorrelationIdManager.w3cEnabled = true;\r\n    CorrelationIdManager.HTTP_TIMEOUT = 2500; // 2.5 seconds\r\n    // To avoid extraneous HTTP requests, we maintain a queue of callbacks waiting on a particular appId lookup,\r\n    // as well as a cache of completed lookups so future requests can be resolved immediately.\r\n    CorrelationIdManager.pendingLookups = {};\r\n    CorrelationIdManager.completedLookups = {};\r\n    CorrelationIdManager.requestIdMaxLength = 1024;\r\n    CorrelationIdManager.currentRootId = Util.randomu32();\r\n    return CorrelationIdManager;\r\n}());\r\nmodule.exports = CorrelationIdManager;\r\n//# sourceMappingURL=CorrelationIdManager.js.map","\"use strict\";\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"./Util\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\n/**\r\n * Manages the logic of creating envelopes from Telemetry objects\r\n */\r\nvar EnvelopeFactory = /** @class */ (function () {\r\n    function EnvelopeFactory() {\r\n    }\r\n    /**\r\n     * Creates envelope ready to be sent by Channel\r\n     * @param telemetry Telemetry data\r\n     * @param telemetryType Type of telemetry\r\n     * @param commonProperties Bag of custom common properties to be added to the envelope\r\n     * @param context Client context\r\n     * @param config Client configuration\r\n     */\r\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\r\n        var data = null;\r\n        switch (telemetryType) {\r\n            case Contracts.TelemetryType.Trace:\r\n                data = EnvelopeFactory.createTraceData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Dependency:\r\n                data = EnvelopeFactory.createDependencyData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Event:\r\n                data = EnvelopeFactory.createEventData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Exception:\r\n                data = EnvelopeFactory.createExceptionData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Request:\r\n                data = EnvelopeFactory.createRequestData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Metric:\r\n                data = EnvelopeFactory.createMetricData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Availability:\r\n                data = EnvelopeFactory.createAvailabilityData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.PageView:\r\n                data = EnvelopeFactory.createPageViewData(telemetry);\r\n                break;\r\n        }\r\n        if (data && data.baseData) {\r\n            if (Contracts.domainSupportsProperties(data.baseData)) { // Do instanceof check. TS will automatically cast and allow the properties property\r\n                if (commonProperties) {\r\n                    // if no properties are specified just add the common ones\r\n                    if (!data.baseData.properties) {\r\n                        data.baseData.properties = commonProperties;\r\n                    }\r\n                    else {\r\n                        // otherwise, check each of the common ones\r\n                        for (var name in commonProperties) {\r\n                            // only override if the property `name` has not been set on this item\r\n                            if (!data.baseData.properties[name]) {\r\n                                data.baseData.properties[name] = commonProperties[name];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (data.baseData.properties) {\r\n                    // sanitize properties\r\n                    data.baseData.properties = Util.validateStringMap(data.baseData.properties);\r\n                }\r\n            }\r\n        }\r\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\r\n        var envelope = new Contracts.Envelope();\r\n        envelope.data = data;\r\n        envelope.iKey = iKey;\r\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\r\n        envelope.name =\r\n            \"Microsoft.ApplicationInsights.\" +\r\n                iKey.replace(/-/g, \"\") +\r\n                \".\" +\r\n                data.baseType.substr(0, data.baseType.length - 4);\r\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\r\n        envelope.time = (new Date()).toISOString();\r\n        envelope.ver = 1;\r\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\r\n        // Exclude metrics from sampling by default\r\n        if (telemetryType === Contracts.TelemetryType.Metric) {\r\n            envelope.sampleRate = 100;\r\n        }\r\n        return envelope;\r\n    };\r\n    EnvelopeFactory.createTraceData = function (telemetry) {\r\n        var trace = new Contracts.MessageData();\r\n        trace.message = telemetry.message;\r\n        trace.properties = telemetry.properties;\r\n        if (!isNaN(telemetry.severity)) {\r\n            trace.severityLevel = telemetry.severity;\r\n        }\r\n        else {\r\n            trace.severityLevel = Contracts.SeverityLevel.Information;\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\r\n        data.baseData = trace;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createDependencyData = function (telemetry) {\r\n        var remoteDependency = new Contracts.RemoteDependencyData();\r\n        if (typeof telemetry.name === \"string\") {\r\n            remoteDependency.name = telemetry.name.length > 1024 ? telemetry.name.slice(0, 1021) + \"...\" : telemetry.name;\r\n        }\r\n        remoteDependency.data = telemetry.data;\r\n        remoteDependency.target = telemetry.target;\r\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\r\n        remoteDependency.success = telemetry.success;\r\n        remoteDependency.type = telemetry.dependencyTypeName;\r\n        remoteDependency.properties = telemetry.properties;\r\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode.toString() : \"0\");\r\n        if (telemetry.id) {\r\n            remoteDependency.id = telemetry.id;\r\n        }\r\n        else {\r\n            remoteDependency.id = Util.w3cTraceId();\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\r\n        data.baseData = remoteDependency;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createEventData = function (telemetry) {\r\n        var event = new Contracts.EventData();\r\n        event.name = telemetry.name;\r\n        event.properties = telemetry.properties;\r\n        event.measurements = telemetry.measurements;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\r\n        data.baseData = event;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createExceptionData = function (telemetry) {\r\n        var exception = new Contracts.ExceptionData();\r\n        exception.properties = telemetry.properties;\r\n        if (!isNaN(telemetry.severity)) {\r\n            exception.severityLevel = telemetry.severity;\r\n        }\r\n        else {\r\n            exception.severityLevel = Contracts.SeverityLevel.Error;\r\n        }\r\n        exception.measurements = telemetry.measurements;\r\n        exception.exceptions = [];\r\n        var stack = telemetry.exception[\"stack\"];\r\n        var exceptionDetails = new Contracts.ExceptionDetails();\r\n        exceptionDetails.message = telemetry.exception.message;\r\n        exceptionDetails.typeName = telemetry.exception.name;\r\n        exceptionDetails.parsedStack = this.parseStack(stack);\r\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\r\n        exception.exceptions.push(exceptionDetails);\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\r\n        data.baseData = exception;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createRequestData = function (telemetry) {\r\n        var requestData = new Contracts.RequestData();\r\n        if (telemetry.id) {\r\n            requestData.id = telemetry.id;\r\n        }\r\n        else {\r\n            requestData.id = Util.w3cTraceId();\r\n        }\r\n        requestData.name = telemetry.name;\r\n        requestData.url = telemetry.url;\r\n        requestData.source = telemetry.source;\r\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\r\n        requestData.responseCode = (telemetry.resultCode ? telemetry.resultCode.toString() : \"0\");\r\n        requestData.success = telemetry.success;\r\n        requestData.properties = telemetry.properties;\r\n        requestData.measurements = telemetry.measurements;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\r\n        data.baseData = requestData;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createMetricData = function (telemetry) {\r\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\r\n        metrics.metrics = [];\r\n        var metric = new Contracts.DataPoint();\r\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\r\n        metric.kind = Contracts.DataPointType.Aggregation;\r\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\r\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\r\n        metric.name = telemetry.name;\r\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\r\n        metric.value = telemetry.value;\r\n        metric.ns = telemetry.namespace;\r\n        metrics.metrics.push(metric);\r\n        metrics.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\r\n        data.baseData = metrics;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createAvailabilityData = function (telemetry) {\r\n        var availabilityData = new Contracts.AvailabilityData();\r\n        if (telemetry.id) {\r\n            availabilityData.id = telemetry.id;\r\n        }\r\n        else {\r\n            availabilityData.id = Util.w3cTraceId();\r\n        }\r\n        availabilityData.name = telemetry.name;\r\n        availabilityData.duration = Util.msToTimeSpan(telemetry.duration);\r\n        availabilityData.success = telemetry.success;\r\n        availabilityData.runLocation = telemetry.runLocation;\r\n        availabilityData.message = telemetry.message;\r\n        availabilityData.measurements = telemetry.measurements;\r\n        availabilityData.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Availability);\r\n        data.baseData = availabilityData;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createPageViewData = function (telemetry) {\r\n        var pageViewData = new Contracts.PageViewData();\r\n        pageViewData.name = telemetry.name;\r\n        pageViewData.duration = Util.msToTimeSpan(telemetry.duration);\r\n        pageViewData.url = telemetry.url;\r\n        pageViewData.measurements = telemetry.measurements;\r\n        pageViewData.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.PageView);\r\n        data.baseData = pageViewData;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        // Make a copy of context tags so we don't alter the actual object\r\n        // Also perform tag overriding\r\n        var newTags = {};\r\n        if (context && context.tags) {\r\n            for (var key in context.tags) {\r\n                newTags[key] = context.tags[key];\r\n            }\r\n        }\r\n        if (tagOverrides) {\r\n            for (var key in tagOverrides) {\r\n                newTags[key] = tagOverrides[key];\r\n            }\r\n        }\r\n        // Fill in internally-populated values if not already set\r\n        if (correlationContext) {\r\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\r\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\r\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\r\n        }\r\n        return newTags;\r\n    };\r\n    EnvelopeFactory.parseStack = function (stack) {\r\n        var parsedStack = undefined;\r\n        if (typeof stack === \"string\") {\r\n            var frames = stack.split(\"\\n\");\r\n            parsedStack = [];\r\n            var level = 0;\r\n            var totalSizeInBytes = 0;\r\n            for (var i = 0; i <= frames.length; i++) {\r\n                var frame = frames[i];\r\n                if (_StackFrame.regex.test(frame)) {\r\n                    var parsedFrame = new _StackFrame(frames[i], level++);\r\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\r\n                    parsedStack.push(parsedFrame);\r\n                }\r\n            }\r\n            // DP Constraint - exception parsed stack must be < 32KB\r\n            // remove frames from the middle to meet the threshold\r\n            var exceptionParsedStackThreshold = 32 * 1024;\r\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\r\n                var left = 0;\r\n                var right = parsedStack.length - 1;\r\n                var size = 0;\r\n                var acceptedLeft = left;\r\n                var acceptedRight = right;\r\n                while (left < right) {\r\n                    // check size\r\n                    var lSize = parsedStack[left].sizeInBytes;\r\n                    var rSize = parsedStack[right].sizeInBytes;\r\n                    size += lSize + rSize;\r\n                    if (size > exceptionParsedStackThreshold) {\r\n                        // remove extra frames from the middle\r\n                        var howMany = acceptedRight - acceptedLeft + 1;\r\n                        parsedStack.splice(acceptedLeft, howMany);\r\n                        break;\r\n                    }\r\n                    // update pointers\r\n                    acceptedLeft = left;\r\n                    acceptedRight = right;\r\n                    left++;\r\n                    right--;\r\n                }\r\n            }\r\n        }\r\n        return parsedStack;\r\n    };\r\n    return EnvelopeFactory;\r\n}());\r\nvar _StackFrame = /** @class */ (function () {\r\n    function _StackFrame(frame, level) {\r\n        this.sizeInBytes = 0;\r\n        this.level = level;\r\n        this.method = \"<no_method>\";\r\n        this.assembly = Util.trim(frame);\r\n        var matches = frame.match(_StackFrame.regex);\r\n        if (matches && matches.length >= 5) {\r\n            this.method = Util.trim(matches[2]) || this.method;\r\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\r\n            this.line = parseInt(matches[5]) || 0;\r\n        }\r\n        this.sizeInBytes += this.method.length;\r\n        this.sizeInBytes += this.fileName.length;\r\n        this.sizeInBytes += this.assembly.length;\r\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\r\n        this.sizeInBytes += _StackFrame.baseSize;\r\n        this.sizeInBytes += this.level.toString().length;\r\n        this.sizeInBytes += this.line.toString().length;\r\n    }\r\n    // regex to match stack frames from ie/chrome/ff\r\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\r\n    _StackFrame.regex = /^(\\s+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\n]+):(\\d+):(\\d+)(\\)?)$/;\r\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\r\n    return _StackFrame;\r\n}());\r\nmodule.exports = EnvelopeFactory;\r\n//# sourceMappingURL=EnvelopeFactory.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FileAccessControl = void 0;\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar child_process = require(\"child_process\");\r\nvar Logging = require(\"./Logging\");\r\nvar FileAccessControl = /** @class */ (function () {\r\n    function FileAccessControl() {\r\n    }\r\n    // Check if file access control could be enabled\r\n    FileAccessControl.checkFileProtection = function () {\r\n        if (!FileAccessControl.OS_PROVIDES_FILE_PROTECTION && !FileAccessControl.OS_FILE_PROTECTION_CHECKED) {\r\n            FileAccessControl.OS_FILE_PROTECTION_CHECKED = true;\r\n            // Node's chmod levels do not appropriately restrict file access on Windows\r\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\r\n            // access to the temporary directory used for disk retry mode.\r\n            if (FileAccessControl.USE_ICACLS) {\r\n                // This should be async - but it's currently safer to have this synchronous\r\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\r\n                try {\r\n                    FileAccessControl.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(FileAccessControl.ICACLS_PATH);\r\n                }\r\n                catch (e) {\r\n                    // Ignore errors\r\n                }\r\n                if (!FileAccessControl.OS_PROVIDES_FILE_PROTECTION) {\r\n                    Logging.warn(FileAccessControl.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\r\n                }\r\n            }\r\n            else {\r\n                // chmod works everywhere else\r\n                FileAccessControl.OS_PROVIDES_FILE_PROTECTION = true;\r\n            }\r\n        }\r\n    };\r\n    FileAccessControl.applyACLRules = function (directory) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var identity, ex_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!FileAccessControl.USE_ICACLS) return [3 /*break*/, 7];\r\n                        if (!(FileAccessControl.ACLED_DIRECTORIES[directory] === undefined)) return [3 /*break*/, 6];\r\n                        // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\r\n                        // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\r\n                        // This is better than the alternative of potentially infinitely spawned processes\r\n                        FileAccessControl.ACLED_DIRECTORIES[directory] = false;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 4, , 5]);\r\n                        return [4 /*yield*/, this._getACLIdentity()];\r\n                    case 2:\r\n                        identity = _a.sent();\r\n                        return [4 /*yield*/, this._runICACLS(this._getACLArguments(directory, identity))];\r\n                    case 3:\r\n                        _a.sent();\r\n                        FileAccessControl.ACLED_DIRECTORIES[directory] = true;\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        ex_1 = _a.sent();\r\n                        FileAccessControl.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\r\n                        throw ex_1;\r\n                    case 5: return [3 /*break*/, 7];\r\n                    case 6:\r\n                        if (!FileAccessControl.ACLED_DIRECTORIES[directory]) {\r\n                            throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\r\n                        }\r\n                        _a.label = 7;\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FileAccessControl.applyACLRulesSync = function (directory) {\r\n        if (FileAccessControl.USE_ICACLS) {\r\n            // For performance, only run ACL rules if we haven't already during this session\r\n            if (FileAccessControl.ACLED_DIRECTORIES[directory] === undefined) {\r\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\r\n                FileAccessControl.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\r\n                return;\r\n            }\r\n            else if (!FileAccessControl.ACLED_DIRECTORIES[directory]) { // falsy but not undefined\r\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\r\n            }\r\n        }\r\n    };\r\n    FileAccessControl._runICACLS = function (args) {\r\n        return new Promise(function (resolve, reject) {\r\n            var aclProc = child_process.spawn(FileAccessControl.ICACLS_PATH, args, { windowsHide: true });\r\n            aclProc.on(\"error\", function (e) { return reject(e); });\r\n            aclProc.on(\"close\", function (code, signal) {\r\n                if (code === 0) {\r\n                    resolve();\r\n                }\r\n                else {\r\n                    reject(new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FileAccessControl._runICACLSSync = function (args) {\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var aclProc = child_process.spawnSync(FileAccessControl.ICACLS_PATH, args, { windowsHide: true });\r\n            if (aclProc.error) {\r\n                throw aclProc.error;\r\n            }\r\n            else if (aclProc.status !== 0) {\r\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\r\n        }\r\n    };\r\n    FileAccessControl._getACLIdentity = function () {\r\n        return new Promise(function (resolve, reject) {\r\n            if (FileAccessControl.ACL_IDENTITY) {\r\n                resolve(FileAccessControl.ACL_IDENTITY);\r\n            }\r\n            var psProc = child_process.spawn(FileAccessControl.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n                windowsHide: true,\r\n                stdio: [\"ignore\", \"pipe\", \"pipe\"] // Needed to prevent hanging on Win 7\r\n            });\r\n            var data = \"\";\r\n            psProc.stdout.on(\"data\", function (d) { return data += d; });\r\n            psProc.on(\"error\", function (e) { return reject(e); });\r\n            psProc.on(\"close\", function (code, signal) {\r\n                FileAccessControl.ACL_IDENTITY = data && data.trim();\r\n                if (code === 0) {\r\n                    resolve(FileAccessControl.ACL_IDENTITY);\r\n                }\r\n                else {\r\n                    reject(new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"));\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FileAccessControl._getACLIdentitySync = function () {\r\n        if (FileAccessControl.ACL_IDENTITY) {\r\n            return FileAccessControl.ACL_IDENTITY;\r\n        }\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var psProc = child_process.spawnSync(FileAccessControl.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n                windowsHide: true,\r\n                stdio: [\"ignore\", \"pipe\", \"pipe\"] // Needed to prevent hanging on Win 7\r\n            });\r\n            if (psProc.error) {\r\n                throw psProc.error;\r\n            }\r\n            else if (psProc.status !== 0) {\r\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\r\n            }\r\n            FileAccessControl.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\r\n            return FileAccessControl.ACL_IDENTITY;\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\r\n        }\r\n    };\r\n    FileAccessControl._getACLArguments = function (directory, identity) {\r\n        return [directory,\r\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\r\n            \"/grant\", identity + \":(OI)(CI)F\", // Full permission for current user\r\n            \"/inheritance:r\"]; // Remove all inherited permissions\r\n    };\r\n    FileAccessControl.TAG = \"FileAccessControl\";\r\n    FileAccessControl.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\r\n    FileAccessControl.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\r\n    FileAccessControl.ACLED_DIRECTORIES = {};\r\n    FileAccessControl.ACL_IDENTITY = null;\r\n    FileAccessControl.OS_FILE_PROTECTION_CHECKED = false;\r\n    FileAccessControl.OS_PROVIDES_FILE_PROTECTION = false;\r\n    FileAccessControl.USE_ICACLS = os.type() === \"Windows_NT\";\r\n    return FileAccessControl;\r\n}());\r\nexports.FileAccessControl = FileAccessControl;\r\n//# sourceMappingURL=FileAccessControl.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getShallowFileSize = exports.getShallowDirectorySizeSync = exports.getShallowDirectorySize = exports.confirmDirExists = exports.unlinkAsync = exports.readdirAsync = exports.readFileAsync = exports.writeFileAsync = exports.appendFileAsync = exports.accessAsync = exports.mkdirAsync = exports.lstatAsync = exports.statAsync = void 0;\r\nvar fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar util_1 = require(\"util\");\r\nexports.statAsync = util_1.promisify(fs.stat);\r\nexports.lstatAsync = util_1.promisify(fs.lstat);\r\nexports.mkdirAsync = util_1.promisify(fs.mkdir);\r\nexports.accessAsync = util_1.promisify(fs.access);\r\nexports.appendFileAsync = util_1.promisify(fs.appendFile);\r\nexports.writeFileAsync = util_1.promisify(fs.writeFile);\r\nexports.readFileAsync = util_1.promisify(fs.readFile);\r\nexports.readdirAsync = util_1.promisify(fs.readdir);\r\nexports.unlinkAsync = util_1.promisify(fs.unlink);\r\n/**\r\n * Validate directory exists.\r\n */\r\nvar confirmDirExists = function (directory) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var stats, err_1, mkdirErr_1;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                _a.trys.push([0, 2, , 7]);\r\n                return [4 /*yield*/, exports.lstatAsync(directory)];\r\n            case 1:\r\n                stats = _a.sent();\r\n                if (!stats.isDirectory()) {\r\n                    throw new Error(\"Path existed but was not a directory\");\r\n                }\r\n                return [3 /*break*/, 7];\r\n            case 2:\r\n                err_1 = _a.sent();\r\n                if (!(err_1 && err_1.code === \"ENOENT\")) return [3 /*break*/, 6];\r\n                _a.label = 3;\r\n            case 3:\r\n                _a.trys.push([3, 5, , 6]);\r\n                return [4 /*yield*/, exports.mkdirAsync(directory)];\r\n            case 4:\r\n                _a.sent();\r\n                return [3 /*break*/, 6];\r\n            case 5:\r\n                mkdirErr_1 = _a.sent();\r\n                if (mkdirErr_1 && mkdirErr_1.code !== \"EEXIST\") {\r\n                    // Handle race condition by ignoring EEXIST\r\n                    throw mkdirErr_1;\r\n                }\r\n                return [3 /*break*/, 6];\r\n            case 6: return [3 /*break*/, 7];\r\n            case 7: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nexports.confirmDirExists = confirmDirExists;\r\n/**\r\n * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\r\n */\r\nvar getShallowDirectorySize = function (directory) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var files, totalSize, _i, files_1, file, fileStats;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, exports.readdirAsync(directory)];\r\n            case 1:\r\n                files = _a.sent();\r\n                totalSize = 0;\r\n                _i = 0, files_1 = files;\r\n                _a.label = 2;\r\n            case 2:\r\n                if (!(_i < files_1.length)) return [3 /*break*/, 5];\r\n                file = files_1[_i];\r\n                return [4 /*yield*/, exports.statAsync(path.join(directory, file))];\r\n            case 3:\r\n                fileStats = _a.sent();\r\n                if (fileStats.isFile()) {\r\n                    totalSize += fileStats.size;\r\n                }\r\n                _a.label = 4;\r\n            case 4:\r\n                _i++;\r\n                return [3 /*break*/, 2];\r\n            case 5: return [2 /*return*/, totalSize];\r\n        }\r\n    });\r\n}); };\r\nexports.getShallowDirectorySize = getShallowDirectorySize;\r\n/**\r\n* Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\r\n*/\r\nvar getShallowDirectorySizeSync = function (directory) {\r\n    var files = fs.readdirSync(directory);\r\n    var totalSize = 0;\r\n    for (var i = 0; i < files.length; i++) {\r\n        totalSize += fs.statSync(path.join(directory, files[i])).size;\r\n    }\r\n    return totalSize;\r\n};\r\nexports.getShallowDirectorySizeSync = getShallowDirectorySizeSync;\r\n/**\r\n* Computes the size (in bytes) of a file asynchronously.\r\n*/\r\nvar getShallowFileSize = function (filePath) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var fileStats;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, exports.statAsync(filePath)];\r\n            case 1:\r\n                fileStats = _a.sent();\r\n                if (fileStats.isFile()) {\r\n                    return [2 /*return*/, fileStats.size];\r\n                }\r\n                return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nexports.getShallowFileSize = getShallowFileSize;\r\n//# sourceMappingURL=FileSystemHelper.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=Functions.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar FileSystemHelper = require(\"./FileSystemHelper\");\r\nvar InternalAzureLogger = /** @class */ (function () {\r\n    function InternalAzureLogger() {\r\n        var _this = this;\r\n        this.TAG = \"Logger\";\r\n        this._cleanupTimeOut = 60 * 30 * 1000; // 30 minutes;\r\n        this._logToFile = false;\r\n        this._logToConsole = true;\r\n        var logDestination = process.env.APPLICATIONINSIGHTS_LOG_DESTINATION; // destination can be one of file, console or file+console\r\n        if (logDestination == \"file+console\") {\r\n            this._logToFile = true;\r\n        }\r\n        if (logDestination == \"file\") {\r\n            this._logToFile = true;\r\n            this._logToConsole = false;\r\n        }\r\n        this.maxSizeBytes = 50000;\r\n        this.maxHistory = 1;\r\n        this._logFileName = \"applicationinsights.log\";\r\n        // If custom path not provided use temp folder, /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        var logFilePath = process.env.APPLICATIONINSIGHTS_LOGDIR;\r\n        if (!logFilePath) {\r\n            this._tempDir = path.join(os.tmpdir(), \"appInsights-node\");\r\n        }\r\n        else {\r\n            if (path.isAbsolute(logFilePath)) {\r\n                this._tempDir = logFilePath;\r\n            }\r\n            else {\r\n                this._tempDir = path.join(process.cwd(), logFilePath);\r\n            }\r\n        }\r\n        this._fileFullPath = path.join(this._tempDir, this._logFileName);\r\n        this._backUpNameFormat = \".\" + this._logFileName; // {currentime}.applicationinsights.log\r\n        if (this._logToFile) {\r\n            if (!InternalAzureLogger._fileCleanupTimer) {\r\n                InternalAzureLogger._fileCleanupTimer = setInterval(function () { _this._fileCleanupTask(); }, this._cleanupTimeOut);\r\n                InternalAzureLogger._fileCleanupTimer.unref();\r\n            }\r\n        }\r\n    }\r\n    InternalAzureLogger.prototype.info = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        var args = message ? __spreadArrays([message], optionalParams) : optionalParams;\r\n        if (this._logToFile) {\r\n            this._storeToDisk(args);\r\n        }\r\n        if (this._logToConsole) {\r\n            console.info.apply(console, args);\r\n        }\r\n    };\r\n    InternalAzureLogger.prototype.warning = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        var args = message ? __spreadArrays([message], optionalParams) : optionalParams;\r\n        if (this._logToFile) {\r\n            this._storeToDisk(args);\r\n        }\r\n        if (this._logToConsole) {\r\n            console.warn.apply(console, args);\r\n        }\r\n    };\r\n    InternalAzureLogger.getInstance = function () {\r\n        if (!InternalAzureLogger._instance) {\r\n            InternalAzureLogger._instance = new InternalAzureLogger();\r\n        }\r\n        return InternalAzureLogger._instance;\r\n    };\r\n    InternalAzureLogger.prototype._storeToDisk = function (args) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data, err_1, appendError_1, err_2, size, err_3;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        data = args + \"\\r\\n\";\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, FileSystemHelper.confirmDirExists(this._tempDir)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        err_1 = _a.sent();\r\n                        console.log(this.TAG, \"Failed to create directory for log file: \" + (err_1 && err_1.message));\r\n                        return [2 /*return*/];\r\n                    case 4:\r\n                        _a.trys.push([4, 6, , 11]);\r\n                        return [4 /*yield*/, FileSystemHelper.accessAsync(this._fileFullPath, fs.constants.F_OK)];\r\n                    case 5:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 11];\r\n                    case 6:\r\n                        appendError_1 = _a.sent();\r\n                        _a.label = 7;\r\n                    case 7:\r\n                        _a.trys.push([7, 9, , 10]);\r\n                        return [4 /*yield*/, FileSystemHelper.appendFileAsync(this._fileFullPath, data)];\r\n                    case 8:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                    case 9:\r\n                        err_2 = _a.sent();\r\n                        console.log(this.TAG, \"Failed to put log into file: \" + (appendError_1 && appendError_1.message));\r\n                        return [2 /*return*/];\r\n                    case 10: return [3 /*break*/, 11];\r\n                    case 11:\r\n                        _a.trys.push([11, 17, , 18]);\r\n                        return [4 /*yield*/, FileSystemHelper.getShallowFileSize(this._fileFullPath)];\r\n                    case 12:\r\n                        size = _a.sent();\r\n                        if (!(size > this.maxSizeBytes)) return [3 /*break*/, 14];\r\n                        return [4 /*yield*/, this._createBackupFile(data)];\r\n                    case 13:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 16];\r\n                    case 14: return [4 /*yield*/, FileSystemHelper.appendFileAsync(this._fileFullPath, data)];\r\n                    case 15:\r\n                        _a.sent();\r\n                        _a.label = 16;\r\n                    case 16: return [3 /*break*/, 18];\r\n                    case 17:\r\n                        err_3 = _a.sent();\r\n                        console.log(this.TAG, \"Failed to create backup file: \" + (err_3 && err_3.message));\r\n                        return [3 /*break*/, 18];\r\n                    case 18: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    InternalAzureLogger.prototype._createBackupFile = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var buffer, backupPath, err_4;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 3, 4, 5]);\r\n                        return [4 /*yield*/, FileSystemHelper.readFileAsync(this._fileFullPath)];\r\n                    case 1:\r\n                        buffer = _a.sent();\r\n                        backupPath = path.join(this._tempDir, new Date().getTime() + \".\" + this._logFileName);\r\n                        return [4 /*yield*/, FileSystemHelper.writeFileAsync(backupPath, buffer)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 3:\r\n                        err_4 = _a.sent();\r\n                        console.log(\"Failed to generate backup log file\", err_4);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        // Store logs\r\n                        FileSystemHelper.writeFileAsync(this._fileFullPath, data);\r\n                        return [7 /*endfinally*/];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    InternalAzureLogger.prototype._fileCleanupTask = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var files, totalFiles, i, pathToDelete, err_5;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 6, , 7]);\r\n                        return [4 /*yield*/, FileSystemHelper.readdirAsync(this._tempDir)];\r\n                    case 1:\r\n                        files = _a.sent();\r\n                        // Filter only backup files\r\n                        files = files.filter(function (f) { return path.basename(f).indexOf(_this._backUpNameFormat) > -1; });\r\n                        // Sort by creation date\r\n                        files.sort(function (a, b) {\r\n                            // Check expiration\r\n                            var aCreationDate = new Date(parseInt(a.split(_this._backUpNameFormat)[0]));\r\n                            var bCreationDate = new Date(parseInt(b.split(_this._backUpNameFormat)[0]));\r\n                            if (aCreationDate < bCreationDate) {\r\n                                return -1;\r\n                            }\r\n                            if (aCreationDate >= bCreationDate) {\r\n                                return 1;\r\n                            }\r\n                        });\r\n                        totalFiles = files.length;\r\n                        i = 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(i < totalFiles - this.maxHistory)) return [3 /*break*/, 5];\r\n                        pathToDelete = path.join(this._tempDir, files[i]);\r\n                        return [4 /*yield*/, FileSystemHelper.unlinkAsync(pathToDelete)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 7];\r\n                    case 6:\r\n                        err_5 = _a.sent();\r\n                        console.log(this.TAG, \"Failed to cleanup log files: \" + (err_5 && err_5.message));\r\n                        return [3 /*break*/, 7];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    InternalAzureLogger._fileCleanupTimer = null;\r\n    return InternalAzureLogger;\r\n}());\r\nmodule.exports = InternalAzureLogger;\r\n//# sourceMappingURL=InternalAzureLogger.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.JsonConfig = void 0;\r\nvar fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar Logging = require(\"./Logging\");\r\nvar ENV_CONFIGURATION_FILE = \"APPLICATIONINSIGHTS_CONFIGURATION_FILE\";\r\n// Azure Connection String\r\nvar ENV_connectionString = \"APPLICATIONINSIGHTS_CONNECTION_STRING\";\r\n// Instrumentation Key\r\nvar ENV_azurePrefix = \"APPSETTING_\"; // Azure adds this prefix to all environment variables\r\nvar ENV_instrumentationKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\r\nvar ENV_legacyInstrumentationKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\r\n// Native Metrics Opt Outs\r\nvar ENV_nativeMetricsDisablers = \"APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC\";\r\nvar ENV_nativeMetricsDisableAll = \"APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS\";\r\nvar ENV_http_proxy = \"http_proxy\";\r\nvar ENV_https_proxy = \"https_proxy\";\r\nvar ENV_noDiagnosticChannel = \"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\";\r\nvar ENV_noStatsbeat = \"APPLICATION_INSIGHTS_NO_STATSBEAT\";\r\nvar ENV_noHttpAgentKeepAlive = \"APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE\";\r\nvar ENV_noPatchModules = \"APPLICATION_INSIGHTS_NO_PATCH_MODULES\";\r\nvar ENV_webInstrumentationEnable = \"APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED\";\r\nvar ENV_webInstrumentation_connectionString = \"APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING\";\r\nvar ENV_webInstrumentation_source = \"APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE\";\r\n// Old web instrumentation env variables are to be deprecated\r\n// Those env variables will NOT be exposed in doc after version 2.3.5\r\nvar ENV_webSnippetEnable = \"APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED\";\r\nvar ENV_webSnippet_connectionString = \"APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING\";\r\nvar JsonConfig = /** @class */ (function () {\r\n    function JsonConfig() {\r\n        // Load env variables first\r\n        this.connectionString = process.env[ENV_connectionString];\r\n        this.instrumentationKey = process.env[ENV_instrumentationKey]\r\n            || process.env[ENV_azurePrefix + ENV_instrumentationKey]\r\n            || process.env[ENV_legacyInstrumentationKey]\r\n            || process.env[ENV_azurePrefix + ENV_legacyInstrumentationKey];\r\n        if (!this.connectionString && this.instrumentationKey) {\r\n            Logging.warn(\"APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK.\");\r\n        }\r\n        this.disableAllExtendedMetrics = !!process.env[ENV_nativeMetricsDisableAll];\r\n        this.extendedMetricDisablers = process.env[ENV_nativeMetricsDisablers];\r\n        this.proxyHttpUrl = process.env[ENV_http_proxy];\r\n        this.proxyHttpsUrl = process.env[ENV_https_proxy];\r\n        this.noDiagnosticChannel = !!process.env[ENV_noDiagnosticChannel];\r\n        this.disableStatsbeat = !!process.env[ENV_noStatsbeat];\r\n        this.noHttpAgentKeepAlive = !!process.env[ENV_noHttpAgentKeepAlive];\r\n        this.noPatchModules = process.env[ENV_noPatchModules] || \"\";\r\n        this.enableWebInstrumentation = !!process.env[ENV_webInstrumentationEnable] || !!process.env[ENV_webSnippetEnable];\r\n        this.webInstrumentationSrc = process.env[ENV_webInstrumentation_source] || \"\";\r\n        this.webInstrumentationConnectionString = process.env[ENV_webInstrumentation_connectionString] || process.env[ENV_webSnippet_connectionString] || \"\";\r\n        this.enableAutoWebSnippetInjection = this.enableWebInstrumentation;\r\n        this.webSnippetConnectionString = this.webInstrumentationConnectionString;\r\n        this._loadJsonFile();\r\n    }\r\n    JsonConfig.getInstance = function () {\r\n        if (!JsonConfig._instance) {\r\n            JsonConfig._instance = new JsonConfig();\r\n        }\r\n        return JsonConfig._instance;\r\n    };\r\n    JsonConfig.prototype._loadJsonFile = function () {\r\n        var configFileName = \"applicationinsights.json\";\r\n        var rootPath = path.join(__dirname, \"../../\"); // Root of applicationinsights folder (__dirname = ../out/Library)\r\n        var tempDir = path.join(rootPath, configFileName); // default\r\n        var configFile = process.env[ENV_CONFIGURATION_FILE];\r\n        if (configFile) {\r\n            if (path.isAbsolute(configFile)) {\r\n                tempDir = configFile;\r\n            }\r\n            else {\r\n                tempDir = path.join(rootPath, configFile); // Relative path to applicationinsights folder\r\n            }\r\n        }\r\n        try {\r\n            var jsonConfig = JSON.parse(fs.readFileSync(tempDir, \"utf8\"));\r\n            if (jsonConfig.disableStatsbeat != undefined) {\r\n                this.disableStatsbeat = jsonConfig.disableStatsbeat;\r\n            }\r\n            if (jsonConfig.disableAllExtendedMetrics != undefined) {\r\n                this.disableAllExtendedMetrics = jsonConfig.disableStatsbeat;\r\n            }\r\n            if (jsonConfig.noDiagnosticChannel != undefined) {\r\n                this.noDiagnosticChannel = jsonConfig.noDiagnosticChannel;\r\n            }\r\n            if (jsonConfig.noHttpAgentKeepAlive != undefined) {\r\n                this.noHttpAgentKeepAlive = jsonConfig.noHttpAgentKeepAlive;\r\n            }\r\n            if (jsonConfig.connectionString != undefined) {\r\n                this.connectionString = jsonConfig.connectionString;\r\n            }\r\n            if (jsonConfig.extendedMetricDisablers != undefined) {\r\n                this.extendedMetricDisablers = jsonConfig.extendedMetricDisablers;\r\n            }\r\n            if (jsonConfig.noDiagnosticChannel != undefined) {\r\n                this.noDiagnosticChannel = jsonConfig.noDiagnosticChannel;\r\n            }\r\n            if (jsonConfig.proxyHttpUrl != undefined) {\r\n                this.proxyHttpUrl = jsonConfig.proxyHttpUrl;\r\n            }\r\n            if (jsonConfig.proxyHttpsUrl != undefined) {\r\n                this.proxyHttpsUrl = jsonConfig.proxyHttpsUrl;\r\n            }\r\n            if (jsonConfig.proxyHttpsUrl != undefined) {\r\n                this.proxyHttpsUrl = jsonConfig.proxyHttpsUrl;\r\n            }\r\n            if (jsonConfig.noPatchModules != undefined) {\r\n                this.noPatchModules = jsonConfig.noPatchModules;\r\n            }\r\n            if (jsonConfig.enableAutoWebSnippetInjection != undefined) {\r\n                this.enableWebInstrumentation = jsonConfig.enableAutoWebSnippetInjection;\r\n                this.enableAutoWebSnippetInjection = this.enableWebInstrumentation;\r\n            }\r\n            if (jsonConfig.enableWebInstrumentation != undefined) {\r\n                this.enableWebInstrumentation = jsonConfig.enableWebInstrumentation;\r\n                this.enableAutoWebSnippetInjection = this.enableWebInstrumentation;\r\n            }\r\n            if (jsonConfig.webSnippetConnectionString != undefined) {\r\n                this.webInstrumentationConnectionString = jsonConfig.webSnippetConnectionString;\r\n                this.webSnippetConnectionString = this.webInstrumentationConnectionString;\r\n            }\r\n            if (jsonConfig.webInstrumentationConnectionString != undefined) {\r\n                this.webInstrumentationConnectionString = jsonConfig.webInstrumentationConnectionString;\r\n                this.webSnippetConnectionString = this.webInstrumentationConnectionString;\r\n            }\r\n            if (jsonConfig.webInstrumentationConfig != undefined) {\r\n                this.webInstrumentationConfig = jsonConfig.webInstrumentationConfig;\r\n            }\r\n            if (jsonConfig.webInstrumentationSrc != undefined) {\r\n                this.webInstrumentationSrc = jsonConfig.webInstrumentationSrc;\r\n            }\r\n            this.endpointUrl = jsonConfig.endpointUrl;\r\n            this.maxBatchSize = jsonConfig.maxBatchSize;\r\n            this.maxBatchIntervalMs = jsonConfig.maxBatchIntervalMs;\r\n            this.disableAppInsights = jsonConfig.disableAppInsights;\r\n            this.samplingPercentage = jsonConfig.samplingPercentage;\r\n            this.correlationIdRetryIntervalMs = jsonConfig.correlationIdRetryIntervalMs;\r\n            this.correlationHeaderExcludedDomains = jsonConfig.correlationHeaderExcludedDomains;\r\n            this.ignoreLegacyHeaders = jsonConfig.ignoreLegacyHeaders;\r\n            this.distributedTracingMode = jsonConfig.distributedTracingMode;\r\n            this.enableAutoCollectExternalLoggers = jsonConfig.enableAutoCollectExternalLoggers;\r\n            this.enableAutoCollectConsole = jsonConfig.enableAutoCollectConsole;\r\n            this.enableAutoCollectExceptions = jsonConfig.enableAutoCollectExceptions;\r\n            this.enableAutoCollectPerformance = jsonConfig.enableAutoCollectPerformance;\r\n            this.enableAutoCollectExtendedMetrics = jsonConfig.enableAutoCollectExtendedMetrics;\r\n            this.enableAutoCollectPreAggregatedMetrics = jsonConfig.enableAutoCollectPreAggregatedMetrics;\r\n            this.enableAutoCollectHeartbeat = jsonConfig.enableAutoCollectHeartbeat;\r\n            this.enableAutoCollectRequests = jsonConfig.enableAutoCollectRequests;\r\n            this.enableAutoCollectDependencies = jsonConfig.enableAutoCollectDependencies;\r\n            this.enableAutoDependencyCorrelation = jsonConfig.enableAutoDependencyCorrelation;\r\n            this.enableUseAsyncHooks = jsonConfig.enableUseAsyncHooks;\r\n            this.enableUseDiskRetryCaching = jsonConfig.enableUseDiskRetryCaching;\r\n            this.enableResendInterval = jsonConfig.enableResendInterval;\r\n            this.enableMaxBytesOnDisk = jsonConfig.enableMaxBytesOnDisk;\r\n            this.enableInternalDebugLogging = jsonConfig.enableInternalDebugLogging;\r\n            this.enableInternalWarningLogging = jsonConfig.enableInternalWarningLogging;\r\n            this.enableSendLiveMetrics = jsonConfig.enableSendLiveMetrics;\r\n            this.quickPulseHost = jsonConfig.quickPulseHost;\r\n        }\r\n        catch (err) {\r\n            Logging.info(\"Missing or invalid JSON config file: \", err);\r\n        }\r\n    };\r\n    return JsonConfig;\r\n}());\r\nexports.JsonConfig = JsonConfig;\r\n//# sourceMappingURL=JsonConfig.js.map","\"use strict\";\r\nvar InternalAzureLogger = require(\"./InternalAzureLogger\");\r\nvar Logging = /** @class */ (function () {\r\n    function Logging() {\r\n    }\r\n    Logging.info = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (this.enableDebug) {\r\n            InternalAzureLogger.getInstance().info(this.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.warn = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (!this.disableWarnings) {\r\n            InternalAzureLogger.getInstance().warning(this.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.enableDebug = false;\r\n    Logging.disableWarnings = false;\r\n    Logging.TAG = \"ApplicationInsights:\";\r\n    return Logging;\r\n}());\r\nmodule.exports = Logging;\r\n//# sourceMappingURL=Logging.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar TelemetryClient = require(\"./TelemetryClient\");\r\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\r\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\r\nvar Logging = require(\"./Logging\");\r\n/**\r\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\r\n * in addition to Node-specific helper functions.\r\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\r\n * In most cases, `appInsights.defaultClient` should be used instead.\r\n */\r\nvar NodeClient = /** @class */ (function (_super) {\r\n    __extends(NodeClient, _super);\r\n    function NodeClient() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waiting for request completion\r\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\r\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\r\n     * @param telemetry Object encapsulating incoming request, response and duration information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\r\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\r\n            ServerRequestTracking.trackRequestSync(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\r\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\r\n     * @param telemetry Object encapsulating incoming request and response information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\r\n        if (telemetry.duration || telemetry.error) {\r\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\r\n        }\r\n        if (telemetry && telemetry.request && telemetry.response) {\r\n            ServerRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\r\n     * the specified headers and will log the telemetry when outgoing request is complete\r\n     * @param telemetry Object encapsulating outgoing request information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\r\n        if (telemetry && telemetry.request) {\r\n            ClientRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\r\n        }\r\n    };\r\n    return NodeClient;\r\n}(TelemetryClient));\r\nmodule.exports = NodeClient;\r\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getResourceProvider = exports.getOsPrefix = exports.isFunctionApp = exports.isWebApp = exports.isLinux = exports.isWindows = void 0;\r\nvar isWindows = function () {\r\n    return process.platform === \"win32\";\r\n};\r\nexports.isWindows = isWindows;\r\nvar isLinux = function () {\r\n    return process.platform === \"linux\";\r\n};\r\nexports.isLinux = isLinux;\r\nvar isWebApp = function () {\r\n    return process.env.WEBSITE_SITE_NAME ? true : false;\r\n};\r\nexports.isWebApp = isWebApp;\r\nvar isFunctionApp = function () {\r\n    return process.env.FUNCTIONS_WORKER_RUNTIME ? true : false;\r\n};\r\nexports.isFunctionApp = isFunctionApp;\r\n/**\r\n * Get prefix for OS\r\n * Windows system: \"w\"\r\n * Linux system: \"l\"\r\n * non-Windows and non-Linux system: \"u\" (unknown)\r\n */\r\nvar getOsPrefix = function () {\r\n    return exports.isWindows() ? \"w\" : exports.isLinux() ? \"l\" : \"u\";\r\n};\r\nexports.getOsPrefix = getOsPrefix;\r\n/**\r\n * TODO: add vm resource provider\r\n * Get prefix resource provider, vm will considered as \"unknown RP\"\r\n * Web App: \"a\"\r\n * Function App: \"f\"\r\n * non-Web and non-Function APP: \"u\" (unknown)\r\n */\r\nvar getResourceProvider = function () {\r\n    return exports.isWebApp() ? \"a\" : exports.isFunctionApp() ? \"f\" : \"u\";\r\n};\r\nexports.getResourceProvider = getResourceProvider;\r\n//# sourceMappingURL=PrefixHelper.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar os = require(\"os\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar StreamId = Util.w3cTraceId(); // Create a guid\r\nvar QuickPulseEnvelopeFactory = /** @class */ (function () {\r\n    function QuickPulseEnvelopeFactory() {\r\n    }\r\n    QuickPulseEnvelopeFactory.createQuickPulseEnvelope = function (metrics, documents, config, context) {\r\n        var machineName = (os && typeof os.hostname === \"function\"\r\n            && os.hostname()) || \"Unknown\"; // Note: os.hostname() was added in node v0.3.3\r\n        var instance = (context.tags\r\n            && context.keys\r\n            && context.keys.cloudRoleInstance\r\n            && context.tags[context.keys.cloudRoleInstance]) || machineName;\r\n        var roleName = (context.tags\r\n            && context.keys\r\n            && context.keys.cloudRole\r\n            && context.tags[context.keys.cloudRole]) || null;\r\n        var envelope = {\r\n            Documents: documents.length > 0 ? documents : null,\r\n            InstrumentationKey: config.instrumentationKey || \"\",\r\n            Metrics: metrics.length > 0 ? metrics : null,\r\n            InvariantVersion: 1,\r\n            Timestamp: \"/Date(\" + Date.now() + \")/\",\r\n            Version: context.tags[context.keys.internalSdkVersion],\r\n            StreamId: StreamId,\r\n            MachineName: machineName,\r\n            Instance: instance,\r\n            RoleName: roleName\r\n        };\r\n        return envelope;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseMetric = function (telemetry) {\r\n        var data;\r\n        data = {\r\n            Name: telemetry.name,\r\n            Value: telemetry.value,\r\n            Weight: telemetry.count || 1\r\n        };\r\n        return data;\r\n    };\r\n    QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument = function (envelope) {\r\n        switch (envelope.data.baseType) {\r\n            case Contracts.TelemetryTypeString.Event:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseEventDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Exception:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Trace:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseTraceDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Dependency:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Request:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseRequestDocument(envelope);\r\n        }\r\n        return null;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseEventDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var name = envelope.data.baseData.name;\r\n        var eventDocument = __assign(__assign({}, document), { Name: name });\r\n        return eventDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseTraceDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var severityLevel = envelope.data.baseData.severityLevel || 0;\r\n        var traceDocument = __assign(__assign({}, document), { Message: envelope.data.baseData.message, SeverityLevel: Contracts.SeverityLevel[severityLevel] });\r\n        return traceDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var exceptionDetails = envelope.data.baseData.exceptions;\r\n        var exception = \"\";\r\n        var exceptionMessage = \"\";\r\n        var exceptionType = \"\";\r\n        // Try to fill exception information from first error only\r\n        if (exceptionDetails && exceptionDetails.length > 0) {\r\n            // Try to grab the stack from parsedStack or stack\r\n            if (exceptionDetails[0].parsedStack && exceptionDetails[0].parsedStack.length > 0) {\r\n                exceptionDetails[0].parsedStack.forEach(function (err) {\r\n                    exception += err.assembly + \"\\n\";\r\n                });\r\n            }\r\n            else if (exceptionDetails[0].stack && exceptionDetails[0].stack.length > 0) {\r\n                exception = exceptionDetails[0].stack;\r\n            }\r\n            exceptionMessage = exceptionDetails[0].message;\r\n            exceptionType = exceptionDetails[0].typeName;\r\n        }\r\n        var exceptionDocument = __assign(__assign({}, document), { Exception: exception, ExceptionMessage: exceptionMessage, ExceptionType: exceptionType });\r\n        return exceptionDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseRequestDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var baseData = envelope.data.baseData;\r\n        var requestDocument = __assign(__assign({}, document), { Name: baseData.name, Success: baseData.success, Duration: baseData.duration, ResponseCode: baseData.responseCode, OperationName: baseData.name // TODO: is this correct?\r\n         });\r\n        return requestDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var baseData = envelope.data.baseData;\r\n        var dependencyDocument = __assign(__assign({}, document), { Name: baseData.name, Target: baseData.target, Success: baseData.success, Duration: baseData.duration, ResultCode: baseData.resultCode, CommandName: baseData.data, OperationName: document.OperationId, DependencyTypeName: baseData.type });\r\n        return dependencyDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseDocument = function (envelope) {\r\n        var documentType;\r\n        var __type;\r\n        var operationId, properties;\r\n        if (envelope.data.baseType) {\r\n            __type = Constants.TelemetryTypeStringToQuickPulseType[envelope.data.baseType];\r\n            documentType = Constants.TelemetryTypeStringToQuickPulseDocumentType[envelope.data.baseType];\r\n        }\r\n        else {\r\n            // Remark: This should never be hit because createQuickPulseDocument is only called within\r\n            // valid baseType values\r\n            Logging.warn(\"Document type invalid; not sending live metric document\", envelope.data.baseType);\r\n        }\r\n        operationId = envelope.tags[QuickPulseEnvelopeFactory.keys.operationId];\r\n        properties = QuickPulseEnvelopeFactory.aggregateProperties(envelope);\r\n        var document = {\r\n            DocumentType: documentType,\r\n            __type: __type,\r\n            OperationId: operationId,\r\n            Version: \"1.0\",\r\n            Properties: properties\r\n        };\r\n        return document;\r\n    };\r\n    QuickPulseEnvelopeFactory.aggregateProperties = function (envelope) {\r\n        var properties = [];\r\n        // Collect measurements\r\n        var meas = (envelope.data.baseData).measurements || {};\r\n        for (var key in meas) {\r\n            if (meas.hasOwnProperty(key)) {\r\n                var value = meas[key];\r\n                var property = { key: key, value: value };\r\n                properties.push(property);\r\n            }\r\n        }\r\n        // Collect properties\r\n        var props = (envelope.data.baseData).properties || {};\r\n        for (var key in props) {\r\n            if (props.hasOwnProperty(key)) {\r\n                var value = props[key];\r\n                var property = { key: key, value: value };\r\n                properties.push(property);\r\n            }\r\n        }\r\n        return properties;\r\n    };\r\n    QuickPulseEnvelopeFactory.keys = new Contracts.ContextTagKeys();\r\n    return QuickPulseEnvelopeFactory;\r\n}());\r\nmodule.exports = QuickPulseEnvelopeFactory;\r\n//# sourceMappingURL=QuickPulseEnvelopeFactory.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar https = require(\"https\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar Logging = require(\"./Logging\");\r\nvar QuickPulseUtil = require(\"./QuickPulseUtil\");\r\nvar Util = require(\"./Util\");\r\nvar url = require(\"url\");\r\nvar QuickPulseConfig = {\r\n    method: \"POST\",\r\n    time: \"x-ms-qps-transmission-time\",\r\n    pollingIntervalHint: \"x-ms-qps-service-polling-interval-hint\",\r\n    endpointRedirect: \"x-ms-qps-service-endpoint-redirect-v2\",\r\n    instanceName: \"x-ms-qps-instance-name\",\r\n    streamId: \"x-ms-qps-stream-id\",\r\n    machineName: \"x-ms-qps-machine-name\",\r\n    roleName: \"x-ms-qps-role-name\",\r\n    streamid: \"x-ms-qps-stream-id\",\r\n    invariantVersion: \"x-ms-qps-invariant-version\",\r\n    subscribed: \"x-ms-qps-subscribed\"\r\n};\r\nvar QuickPulseSender = /** @class */ (function () {\r\n    function QuickPulseSender(config, getAuthorizationHandler) {\r\n        this._config = config;\r\n        this._consecutiveErrors = 0;\r\n        this._getAuthorizationHandler = getAuthorizationHandler;\r\n    }\r\n    QuickPulseSender.prototype.ping = function (envelope, redirectedHostEndpoint, done) {\r\n        var pingHeaders = [\r\n            { name: QuickPulseConfig.streamId, value: envelope.StreamId },\r\n            { name: QuickPulseConfig.machineName, value: envelope.MachineName },\r\n            { name: QuickPulseConfig.roleName, value: envelope.RoleName },\r\n            { name: QuickPulseConfig.instanceName, value: envelope.Instance },\r\n            { name: QuickPulseConfig.invariantVersion, value: envelope.InvariantVersion.toString() }\r\n        ];\r\n        this._submitData(envelope, redirectedHostEndpoint, done, \"ping\", pingHeaders);\r\n    };\r\n    QuickPulseSender.prototype.post = function (envelope, redirectedHostEndpoint, done) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: \r\n                    // Important: When POSTing data, envelope must be an array\r\n                    return [4 /*yield*/, this._submitData([envelope], redirectedHostEndpoint, done, \"post\")];\r\n                    case 1:\r\n                        // Important: When POSTing data, envelope must be an array\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    QuickPulseSender.prototype._submitData = function (envelope, redirectedHostEndpoint, done, postOrPing, additionalHeaders) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var payload, options, authHandler, authError_1, notice, req;\r\n            var _a, _b;\r\n            var _this = this;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        payload = Util.stringify(envelope);\r\n                        options = (_a = {},\r\n                            _a[AutoCollectHttpDependencies.disableCollectionRequestOption] = true,\r\n                            _a.host = (redirectedHostEndpoint && redirectedHostEndpoint.length > 0) ? redirectedHostEndpoint : this._config.quickPulseHost,\r\n                            _a.method = QuickPulseConfig.method,\r\n                            _a.path = \"/QuickPulseService.svc/\" + postOrPing + \"?ikey=\" + this._config.instrumentationKey,\r\n                            _a.headers = (_b = {\r\n                                    \"Expect\": \"100-continue\"\r\n                                },\r\n                                _b[QuickPulseConfig.time] = QuickPulseUtil.getTransmissionTime(),\r\n                                _b[\"Content-Type\"] = \"application\\/json\",\r\n                                _b[\"Content-Length\"] = Buffer.byteLength(payload),\r\n                                _b),\r\n                            _a);\r\n                        if (additionalHeaders && additionalHeaders.length > 0) {\r\n                            additionalHeaders.forEach(function (header) { return options.headers[header.name] = header.value; });\r\n                        }\r\n                        if (!(postOrPing === \"post\")) return [3 /*break*/, 4];\r\n                        authHandler = this._getAuthorizationHandler ? this._getAuthorizationHandler(this._config) : null;\r\n                        if (!authHandler) return [3 /*break*/, 4];\r\n                        _c.label = 1;\r\n                    case 1:\r\n                        _c.trys.push([1, 3, , 4]);\r\n                        // Add bearer token\r\n                        return [4 /*yield*/, authHandler.addAuthorizationHeader(options)];\r\n                    case 2:\r\n                        // Add bearer token\r\n                        _c.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        authError_1 = _c.sent();\r\n                        notice = \"Failed to get AAD bearer token for the Application. Error:\";\r\n                        Logging.info(QuickPulseSender.TAG, notice, authError_1);\r\n                        // Do not send request to Quickpulse if auth fails, data will be dropped\r\n                        return [2 /*return*/];\r\n                    case 4:\r\n                        // HTTPS only\r\n                        if (this._config.httpsAgent) {\r\n                            options.agent = this._config.httpsAgent;\r\n                        }\r\n                        else {\r\n                            options.agent = Util.tlsRestrictedAgent;\r\n                        }\r\n                        req = https.request(options, function (res) {\r\n                            if (res.statusCode == 200) {\r\n                                var shouldPOSTData = res.headers[QuickPulseConfig.subscribed] === \"true\";\r\n                                var redirectHeader = null;\r\n                                try {\r\n                                    redirectHeader = res.headers[QuickPulseConfig.endpointRedirect] ? new url.URL(res.headers[QuickPulseConfig.endpointRedirect].toString()).host : null;\r\n                                }\r\n                                catch (error) {\r\n                                    _this._onError(\"Failed to parse redirect header from QuickPulse: \" + Util.dumpObj(error));\r\n                                }\r\n                                var pollingIntervalHint = res.headers[QuickPulseConfig.pollingIntervalHint] ? parseInt(res.headers[QuickPulseConfig.pollingIntervalHint].toString()) : null;\r\n                                _this._consecutiveErrors = 0;\r\n                                done(shouldPOSTData, res, redirectHeader, pollingIntervalHint);\r\n                            }\r\n                            else {\r\n                                _this._onError(\"StatusCode:\" + res.statusCode + \" StatusMessage:\" + res.statusMessage);\r\n                                done();\r\n                            }\r\n                        });\r\n                        req.on(\"error\", function (error) {\r\n                            _this._onError(error);\r\n                            done();\r\n                        });\r\n                        req.write(payload);\r\n                        req.end();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    QuickPulseSender.prototype._onError = function (error) {\r\n        // Unable to contact qps endpoint.\r\n        // Do nothing for now.\r\n        this._consecutiveErrors++;\r\n        // LOG every error, but WARN instead when X number of consecutive errors occur\r\n        var notice = \"Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:\";\r\n        if (this._consecutiveErrors % QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN === 0) {\r\n            notice = \"Live Metrics endpoint could not be reached \" + this._consecutiveErrors + \" consecutive times. Most recent error:\";\r\n            Logging.warn(QuickPulseSender.TAG, notice, error);\r\n        }\r\n        else {\r\n            // Potentially transient error, do not change the ping/post state yet.\r\n            Logging.info(QuickPulseSender.TAG, notice, error);\r\n        }\r\n    };\r\n    QuickPulseSender.TAG = \"QuickPulseSender\";\r\n    QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN = 25;\r\n    return QuickPulseSender;\r\n}());\r\nmodule.exports = QuickPulseSender;\r\n//# sourceMappingURL=QuickPulseSender.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar Logging = require(\"./Logging\");\r\nvar QuickPulseEnvelopeFactory = require(\"./QuickPulseEnvelopeFactory\");\r\nvar QuickPulseSender = require(\"./QuickPulseSender\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar Context = require(\"./Context\");\r\n/** State Container for sending to the QuickPulse Service */\r\nvar QuickPulseStateManager = /** @class */ (function () {\r\n    function QuickPulseStateManager(config, context, getAuthorizationHandler) {\r\n        this._isCollectingData = false;\r\n        this._lastSuccessTime = Date.now();\r\n        this._lastSendSucceeded = true;\r\n        this._metrics = {};\r\n        this._documents = [];\r\n        this._collectors = [];\r\n        this._redirectedHost = null;\r\n        this._pollingIntervalHint = -1;\r\n        this.config = config;\r\n        this.context = context || new Context();\r\n        this._sender = new QuickPulseSender(this.config, getAuthorizationHandler);\r\n        this._isEnabled = false;\r\n    }\r\n    /**\r\n     *\r\n     * @param collector\r\n     */\r\n    QuickPulseStateManager.prototype.addCollector = function (collector) {\r\n        this._collectors.push(collector);\r\n    };\r\n    /**\r\n     * Override of TelemetryClient.trackMetric\r\n     */\r\n    QuickPulseStateManager.prototype.trackMetric = function (telemetry) {\r\n        this._addMetric(telemetry);\r\n    };\r\n    /**\r\n     * Add a document to the current buffer\r\n     * @param envelope\r\n     */\r\n    QuickPulseStateManager.prototype.addDocument = function (envelope) {\r\n        // Only add documents in buffer when Live Metrics is collecting data\r\n        if (this._isCollectingData) {\r\n            var document_1 = QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument(envelope);\r\n            if (document_1) {\r\n                this._documents.push(document_1);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Enable or disable communication with QuickPulseService\r\n     * @param isEnabled\r\n     */\r\n    QuickPulseStateManager.prototype.enable = function (isEnabled) {\r\n        if (isEnabled && !this._isEnabled) {\r\n            this._isEnabled = true;\r\n            this._goQuickPulse();\r\n        }\r\n        else if (!isEnabled && this._isEnabled) {\r\n            this._isEnabled = false;\r\n            clearTimeout(this._handle);\r\n            this._handle = undefined;\r\n        }\r\n    };\r\n    /**\r\n     * Enable or disable all collectors in this instance\r\n     * @param enable\r\n     */\r\n    QuickPulseStateManager.prototype.enableCollectors = function (enable) {\r\n        this._collectors.forEach(function (collector) {\r\n            collector.enable(enable);\r\n        });\r\n    };\r\n    /**\r\n     * Add the metric to this buffer. If same metric already exists in this buffer, add weight to it\r\n     * @param telemetry\r\n     */\r\n    QuickPulseStateManager.prototype._addMetric = function (telemetry) {\r\n        var value = telemetry.value;\r\n        var count = telemetry.count || 1;\r\n        var name = Constants.PerformanceToQuickPulseCounter[telemetry.name];\r\n        if (name) {\r\n            if (this._metrics[name]) {\r\n                this._metrics[name].Value = (this._metrics[name].Value * this._metrics[name].Weight + value * count) / (this._metrics[name].Weight + count);\r\n                this._metrics[name].Weight += count;\r\n            }\r\n            else {\r\n                this._metrics[name] = QuickPulseEnvelopeFactory.createQuickPulseMetric(telemetry);\r\n                this._metrics[name].Name = name;\r\n                this._metrics[name].Weight = 1;\r\n            }\r\n        }\r\n    };\r\n    QuickPulseStateManager.prototype._resetQuickPulseBuffer = function () {\r\n        delete this._metrics;\r\n        this._metrics = {};\r\n        this._documents.length = 0;\r\n    };\r\n    QuickPulseStateManager.prototype._goQuickPulse = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var metrics, envelope, pingInterval, currentTimeout;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        metrics = Object.keys(this._metrics).map(function (k) { return _this._metrics[k]; });\r\n                        envelope = QuickPulseEnvelopeFactory.createQuickPulseEnvelope(metrics, this._documents.slice(), this.config, this.context);\r\n                        // Clear this document, metric buffer\r\n                        this._resetQuickPulseBuffer();\r\n                        if (!this._isCollectingData) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this._post(envelope)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        this._ping(envelope);\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        pingInterval = this._pollingIntervalHint > 0 ? this._pollingIntervalHint : QuickPulseStateManager.PING_INTERVAL;\r\n                        currentTimeout = this._isCollectingData ? QuickPulseStateManager.POST_INTERVAL : pingInterval;\r\n                        if (this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_POST_WAIT_TIME && !this._lastSendSucceeded) {\r\n                            // Haven't posted successfully in 20 seconds, so wait 60 seconds and ping\r\n                            this._isCollectingData = false;\r\n                            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\r\n                        }\r\n                        else if (!this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_PING_WAIT_TIME && !this._lastSendSucceeded) {\r\n                            // Haven't pinged successfully in 60 seconds, so wait another 60 seconds\r\n                            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\r\n                        }\r\n                        this._lastSendSucceeded = null;\r\n                        this._handle = setTimeout(this._goQuickPulse.bind(this), currentTimeout);\r\n                        this._handle.unref(); // Don't block apps from terminating\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    QuickPulseStateManager.prototype._ping = function (envelope) {\r\n        this._sender.ping(envelope, this._redirectedHost, this._quickPulseDone.bind(this));\r\n    };\r\n    QuickPulseStateManager.prototype._post = function (envelope) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._sender.post(envelope, this._redirectedHost, this._quickPulseDone.bind(this))];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Change the current QPS send state. (shouldPOST == undefined) --> error, but do not change the state yet.\r\n     */\r\n    QuickPulseStateManager.prototype._quickPulseDone = function (shouldPOST, res, redirectedHost, pollingIntervalHint) {\r\n        if (shouldPOST != undefined) {\r\n            if (this._isCollectingData !== shouldPOST) {\r\n                Logging.info(\"Live Metrics sending data\", shouldPOST);\r\n                this.enableCollectors(shouldPOST);\r\n            }\r\n            this._isCollectingData = shouldPOST;\r\n            if (redirectedHost && redirectedHost.length > 0) {\r\n                this._redirectedHost = redirectedHost;\r\n                Logging.info(\"Redirecting endpoint to: \", redirectedHost);\r\n            }\r\n            if (pollingIntervalHint && pollingIntervalHint > 0) {\r\n                this._pollingIntervalHint = pollingIntervalHint;\r\n            }\r\n            if (res && res.statusCode < 300 && res.statusCode >= 200) {\r\n                this._lastSuccessTime = Date.now();\r\n                this._lastSendSucceeded = true;\r\n            }\r\n            else {\r\n                this._lastSendSucceeded = false;\r\n            }\r\n        }\r\n        else {\r\n            // Received an error, keep the state as is\r\n            this._lastSendSucceeded = false;\r\n        }\r\n    };\r\n    QuickPulseStateManager.MAX_POST_WAIT_TIME = 20000;\r\n    QuickPulseStateManager.MAX_PING_WAIT_TIME = 60000;\r\n    QuickPulseStateManager.FALLBACK_INTERVAL = 60000;\r\n    QuickPulseStateManager.PING_INTERVAL = 5000;\r\n    QuickPulseStateManager.POST_INTERVAL = 1000;\r\n    return QuickPulseStateManager;\r\n}());\r\nmodule.exports = QuickPulseStateManager;\r\n//# sourceMappingURL=QuickPulseStateManager.js.map","\"use strict\";\r\n/**\r\n * @description UTC time the request was made. Expressed as the number of 100-nanosecond intervals that have elapsed since 12:00:00 midnight on January 1, 0001. This is used for clock skew calculations, so the value can never be stale (cached).\r\n *\r\n * @example\r\n * 8/5/2020 10:15:00 PM UTC => 637322625000000000\r\n * 8/5/2020 10:15:01 PM UTC => 637322625010000000\r\n *\r\n * @returns {number}\r\n */\r\nvar getTransmissionTime = function () {\r\n    return (Date.now() + 62135596800000) * 10000;\r\n};\r\nmodule.exports = { getTransmissionTime: getTransmissionTime };\r\n//# sourceMappingURL=QuickPulseUtil.js.map","\"use strict\";\r\nmodule.exports = {\r\n    /**\r\n     * Request-Context header\r\n     */\r\n    requestContextHeader: \"request-context\",\r\n    /**\r\n     * Source instrumentation header that is added by an application while making http\r\n     * requests and retrieved by the other application when processing incoming requests.\r\n     */\r\n    requestContextSourceKey: \"appId\",\r\n    /**\r\n     * Target instrumentation header that is added to the response and retrieved by the\r\n     * calling application when processing incoming responses.\r\n     */\r\n    requestContextTargetKey: \"appId\",\r\n    /**\r\n     * Request-Id header\r\n     */\r\n    requestIdHeader: \"request-id\",\r\n    /**\r\n     * Legacy Header containing the id of the immediate caller\r\n     */\r\n    parentIdHeader: \"x-ms-request-id\",\r\n    /**\r\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\r\n     * across transactions\r\n     */\r\n    rootIdHeader: \"x-ms-request-root-id\",\r\n    /**\r\n     * Correlation-Context header\r\n     *\r\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\r\n     */\r\n    correlationContextHeader: \"correlation-context\",\r\n    /**\r\n     * W3C distributed tracing protocol header\r\n     */\r\n    traceparentHeader: \"traceparent\",\r\n    /**\r\n     * W3C distributed tracing protocol state header\r\n     */\r\n    traceStateHeader: \"tracestate\"\r\n};\r\n//# sourceMappingURL=RequestResponseHeaders.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar zlib = require(\"zlib\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar FileSystemHelper = require(\"./FileSystemHelper\");\r\nvar Util = require(\"./Util\");\r\nvar url_1 = require(\"url\");\r\nvar Logging = require(\"./Logging\");\r\nvar FileAccessControl_1 = require(\"./FileAccessControl\");\r\nvar legacyThrottleStatusCode = 439; //  - Too many requests and refresh cache\r\nvar throttleStatusCode = 402; // Monthly Quota Exceeded (new SDK)\r\nvar RESPONSE_CODES_INDICATING_REACHED_BREEZE = [200, 206, 402, 408, 429, 439, 500];\r\nvar Sender = /** @class */ (function () {\r\n    function Sender(config, getAuthorizationHandler, onSuccess, onError, statsbeat, isStatsbeatSender, shutdownStatsbeat) {\r\n        this._redirectedHost = null;\r\n        this._config = config;\r\n        this._onSuccess = onSuccess;\r\n        this._onError = onError;\r\n        this._statsbeat = statsbeat;\r\n        this._enableDiskRetryMode = false;\r\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\r\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\r\n        this._numConsecutiveFailures = 0;\r\n        this._numConsecutiveRedirects = 0;\r\n        this._resendTimer = null;\r\n        this._getAuthorizationHandler = getAuthorizationHandler;\r\n        this._fileCleanupTimer = null;\r\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        this._tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        this._isStatsbeatSender = isStatsbeatSender || false;\r\n        this._shutdownStatsbeat = shutdownStatsbeat;\r\n        this._failedToIngestCounter = 0;\r\n        this._statsbeatHasReachedIngestionAtLeastOnce = false;\r\n    }\r\n    /**\r\n    * Enable or disable offline mode\r\n    */\r\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\r\n        var _this = this;\r\n        if (value) {\r\n            FileAccessControl_1.FileAccessControl.checkFileProtection(); // Only check file protection when disk retry is enabled\r\n        }\r\n        this._enableDiskRetryMode = FileAccessControl_1.FileAccessControl.OS_PROVIDES_FILE_PROTECTION && value;\r\n        if (typeof resendInterval === \"number\" && resendInterval >= 0) {\r\n            this._resendInterval = Math.floor(resendInterval);\r\n        }\r\n        if (typeof maxBytesOnDisk === \"number\" && maxBytesOnDisk >= 0) {\r\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\r\n        }\r\n        if (value && !FileAccessControl_1.FileAccessControl.OS_PROVIDES_FILE_PROTECTION) {\r\n            this._enableDiskRetryMode = false;\r\n            this._logWarn(\"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\r\n        }\r\n        if (this._enableDiskRetryMode) {\r\n            if (this._statsbeat) {\r\n                this._statsbeat.addFeature(Constants.StatsbeatFeature.DISK_RETRY);\r\n            }\r\n            // Starts file cleanup task\r\n            if (!this._fileCleanupTimer) {\r\n                this._fileCleanupTimer = setTimeout(function () { _this._fileCleanupTask(); }, Sender.CLEANUP_TIMEOUT);\r\n                this._fileCleanupTimer.unref();\r\n            }\r\n        }\r\n        else {\r\n            if (this._statsbeat) {\r\n                this._statsbeat.removeFeature(Constants.StatsbeatFeature.DISK_RETRY);\r\n            }\r\n            if (this._fileCleanupTimer) {\r\n                clearTimeout(this._fileCleanupTimer);\r\n            }\r\n        }\r\n    };\r\n    Sender.prototype.send = function (envelopes, callback) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var endpointUrl, endpointHost, options, authHandler, authError_1, errorMsg, batch_1, payload_1;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!envelopes) return [3 /*break*/, 5];\r\n                        endpointUrl = this._redirectedHost || this._config.endpointUrl;\r\n                        endpointHost = new url_1.URL(endpointUrl).hostname;\r\n                        options = {\r\n                            method: \"POST\",\r\n                            withCredentials: false,\r\n                            headers: {\r\n                                \"Content-Type\": \"application/x-json-stream\"\r\n                            }\r\n                        };\r\n                        authHandler = this._getAuthorizationHandler ? this._getAuthorizationHandler(this._config) : null;\r\n                        if (!authHandler) return [3 /*break*/, 4];\r\n                        if (this._statsbeat) {\r\n                            this._statsbeat.addFeature(Constants.StatsbeatFeature.AAD_HANDLING);\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        // Add bearer token\r\n                        return [4 /*yield*/, authHandler.addAuthorizationHeader(options)];\r\n                    case 2:\r\n                        // Add bearer token\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        authError_1 = _a.sent();\r\n                        errorMsg = \"Failed to get AAD bearer token for the Application.\";\r\n                        if (this._enableDiskRetryMode) {\r\n                            errorMsg += \"This batch of telemetry items will be retried. \";\r\n                            this._storeToDisk(envelopes);\r\n                        }\r\n                        errorMsg += \"Error:\" + authError_1.toString();\r\n                        this._logWarn(errorMsg);\r\n                        if (typeof callback === \"function\") {\r\n                            callback(errorMsg);\r\n                        }\r\n                        return [2 /*return*/]; // If AAD auth fails do not send to Breeze\r\n                    case 4:\r\n                        batch_1 = \"\";\r\n                        envelopes.forEach(function (envelope) {\r\n                            var payload = Util.stringify(envelope);\r\n                            if (typeof payload !== \"string\") {\r\n                                return;\r\n                            }\r\n                            batch_1 += payload + \"\\n\";\r\n                        });\r\n                        // Remove last \\n\r\n                        if (batch_1.length > 0) {\r\n                            batch_1 = batch_1.substring(0, batch_1.length - 1);\r\n                        }\r\n                        payload_1 = Buffer.from ? Buffer.from(batch_1) : new Buffer(batch_1);\r\n                        zlib.gzip(payload_1, function (err, buffer) {\r\n                            var dataToSend = buffer;\r\n                            if (err) {\r\n                                _this._logWarn(Util.dumpObj(err));\r\n                                dataToSend = payload_1; // something went wrong so send without gzip\r\n                                options.headers[\"Content-Length\"] = payload_1.length.toString();\r\n                            }\r\n                            else {\r\n                                options.headers[\"Content-Encoding\"] = \"gzip\";\r\n                                options.headers[\"Content-Length\"] = buffer.length.toString();\r\n                            }\r\n                            _this._logInfo(Util.dumpObj(options));\r\n                            // Ensure this request is not captured by auto-collection.\r\n                            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\r\n                            var startTime = +new Date();\r\n                            var requestCallback = function (res) {\r\n                                res.setEncoding(\"utf-8\");\r\n                                //returns empty if the data is accepted\r\n                                var responseString = \"\";\r\n                                res.on(\"data\", function (data) {\r\n                                    responseString += data;\r\n                                });\r\n                                res.on(\"end\", function () {\r\n                                    var endTime = +new Date();\r\n                                    var duration = endTime - startTime;\r\n                                    _this._numConsecutiveFailures = 0;\r\n                                    // Handling of Statsbeat instance sending data, should turn it off if is not able to reach ingestion endpoint\r\n                                    if (_this._isStatsbeatSender && !_this._statsbeatHasReachedIngestionAtLeastOnce) {\r\n                                        if (RESPONSE_CODES_INDICATING_REACHED_BREEZE.includes(res.statusCode)) {\r\n                                            _this._statsbeatHasReachedIngestionAtLeastOnce = true;\r\n                                        }\r\n                                        else {\r\n                                            _this._statsbeatFailedToIngest();\r\n                                        }\r\n                                    }\r\n                                    if (_this._statsbeat) {\r\n                                        if (res.statusCode == throttleStatusCode || res.statusCode == legacyThrottleStatusCode) { // Throttle\r\n                                            _this._statsbeat.countThrottle(Constants.StatsbeatNetworkCategory.Breeze, endpointHost, res.statusCode);\r\n                                        }\r\n                                        else {\r\n                                            _this._statsbeat.countRequest(Constants.StatsbeatNetworkCategory.Breeze, endpointHost, duration, res.statusCode === 200, res.statusCode);\r\n                                        }\r\n                                    }\r\n                                    if (_this._enableDiskRetryMode) {\r\n                                        // try to send any cached events if the user is back online\r\n                                        if (res.statusCode === 200) {\r\n                                            if (!_this._resendTimer) {\r\n                                                _this._resendTimer = setTimeout(function () {\r\n                                                    _this._resendTimer = null;\r\n                                                    _this._sendFirstFileOnDisk();\r\n                                                }, _this._resendInterval);\r\n                                                _this._resendTimer.unref();\r\n                                            }\r\n                                        }\r\n                                        else if (_this._isRetriable(res.statusCode)) {\r\n                                            try {\r\n                                                if (_this._statsbeat) {\r\n                                                    _this._statsbeat.countRetry(Constants.StatsbeatNetworkCategory.Breeze, endpointHost, res.statusCode);\r\n                                                }\r\n                                                var breezeResponse = JSON.parse(responseString);\r\n                                                var filteredEnvelopes_1 = [];\r\n                                                if (breezeResponse.errors) {\r\n                                                    breezeResponse.errors.forEach(function (error) {\r\n                                                        // Only retry errors if 429, 500 or 503 response codes\r\n                                                        if (error.statusCode == 429 || error.statusCode == 500 || error.statusCode == 503) {\r\n                                                            filteredEnvelopes_1.push(envelopes[error.index]);\r\n                                                        }\r\n                                                    });\r\n                                                    if (filteredEnvelopes_1.length > 0) {\r\n                                                        _this._storeToDisk(filteredEnvelopes_1);\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            catch (ex) {\r\n                                                _this._storeToDisk(envelopes); // Retriable status code with not valid Breeze response\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    // Redirect handling\r\n                                    if (res.statusCode === 307 || // Temporary Redirect\r\n                                        res.statusCode === 308) { // Permanent Redirect\r\n                                        _this._numConsecutiveRedirects++;\r\n                                        // To prevent circular redirects\r\n                                        if (_this._numConsecutiveRedirects < 10) {\r\n                                            // Try to get redirect header\r\n                                            var locationHeader = res.headers[\"location\"] ? res.headers[\"location\"].toString() : null;\r\n                                            if (locationHeader) {\r\n                                                _this._redirectedHost = locationHeader;\r\n                                                // Send to redirect endpoint as HTTPs library doesn't handle redirect automatically\r\n                                                _this.send(envelopes, callback);\r\n                                            }\r\n                                        }\r\n                                        else {\r\n                                            var circularRedirectError = { name: \"Circular Redirect\", message: \"Error sending telemetry because of circular redirects.\" };\r\n                                            if (_this._statsbeat) {\r\n                                                _this._statsbeat.countException(Constants.StatsbeatNetworkCategory.Breeze, endpointHost, circularRedirectError);\r\n                                            }\r\n                                            if (typeof callback === \"function\") {\r\n                                                callback(\"Error sending telemetry because of circular redirects.\");\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    else {\r\n                                        _this._numConsecutiveRedirects = 0;\r\n                                        if (typeof callback === \"function\") {\r\n                                            callback(responseString);\r\n                                        }\r\n                                        _this._logInfo(responseString);\r\n                                        if (typeof _this._onSuccess === \"function\") {\r\n                                            _this._onSuccess(responseString);\r\n                                        }\r\n                                    }\r\n                                });\r\n                            };\r\n                            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\r\n                            // Needed as of Node.js v13 default timeouts on HTTP requests are no longer default\r\n                            // Timeout should trigger the request on error function to run\r\n                            req.setTimeout(Sender.HTTP_TIMEOUT, function () {\r\n                                _this._requestTimedOut = true;\r\n                                req.abort();\r\n                            });\r\n                            req.on(\"error\", function (error) {\r\n                                if (_this._isStatsbeatSender && !_this._statsbeatHasReachedIngestionAtLeastOnce) {\r\n                                    _this._statsbeatFailedToIngest();\r\n                                }\r\n                                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\r\n                                _this._numConsecutiveFailures++;\r\n                                if (_this._statsbeat) {\r\n                                    _this._statsbeat.countException(Constants.StatsbeatNetworkCategory.Breeze, endpointHost, error);\r\n                                }\r\n                                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\r\n                                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\r\n                                // Continue informing on each failure if verbose logging is being used\r\n                                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\r\n                                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\r\n                                    if (_this._enableDiskRetryMode) {\r\n                                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\r\n                                    }\r\n                                    _this._logWarn(notice, Util.dumpObj(error));\r\n                                }\r\n                                else {\r\n                                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\r\n                                    _this._logInfo(notice, Util.dumpObj(error));\r\n                                }\r\n                                _this._onErrorHelper(error);\r\n                                if (typeof callback === \"function\") {\r\n                                    if (error) {\r\n                                        // If the error type is a timeout we want to provide more meaningful output\r\n                                        if (_this._requestTimedOut) {\r\n                                            error.name = \"telemetry timeout\";\r\n                                            error.message = \"telemetry request timed out\";\r\n                                        }\r\n                                        callback(Util.dumpObj(error));\r\n                                    }\r\n                                    else {\r\n                                        callback(\"Error sending telemetry\");\r\n                                    }\r\n                                }\r\n                                if (_this._enableDiskRetryMode) {\r\n                                    _this._storeToDisk(envelopes);\r\n                                }\r\n                            });\r\n                            req.write(dataToSend);\r\n                            req.end();\r\n                        });\r\n                        _a.label = 5;\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Sender.prototype.saveOnCrash = function (envelopes) {\r\n        if (this._enableDiskRetryMode) {\r\n            this._storeToDiskSync(Util.stringify(envelopes));\r\n        }\r\n    };\r\n    Sender.prototype._isRetriable = function (statusCode) {\r\n        return (statusCode === 206 || // Partial Accept\r\n            statusCode === 401 || // Unauthorized\r\n            statusCode === 403 || // Forbidden\r\n            statusCode === 408 || // Timeout\r\n            statusCode === 429 || // Too many requests\r\n            statusCode === 500 || // Server Error\r\n            statusCode === 502 || // Bad Gateway\r\n            statusCode === 503 || // Server Unavailable\r\n            statusCode === 504 // Gateway Timeout\r\n        );\r\n    };\r\n    Sender.prototype._logInfo = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (!this._isStatsbeatSender) {\r\n            Logging.info(Sender.TAG, message, optionalParams);\r\n        }\r\n    };\r\n    Sender.prototype._logWarn = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (!this._isStatsbeatSender) {\r\n            Logging.warn(Sender.TAG, message, optionalParams);\r\n        }\r\n    };\r\n    Sender.prototype._statsbeatFailedToIngest = function () {\r\n        if (this._shutdownStatsbeat) { // Check if callback is available\r\n            this._failedToIngestCounter++;\r\n            if (this._failedToIngestCounter >= 3) {\r\n                this._shutdownStatsbeat();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk in the temp directory\r\n     */\r\n    Sender.prototype._storeToDisk = function (envelopes) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ex_1, ex_2, size, ex_3, fileName, fileFullPath, ex_4;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        this._logInfo(\"Checking existence of data storage directory: \" + this._tempDir);\r\n                        return [4 /*yield*/, FileSystemHelper.confirmDirExists(this._tempDir)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        ex_1 = _a.sent();\r\n                        this._logWarn(\"Failed to create folder to put telemetry: \" + Util.dumpObj(ex_1));\r\n                        this._onErrorHelper(ex_1);\r\n                        return [2 /*return*/];\r\n                    case 3:\r\n                        _a.trys.push([3, 5, , 6]);\r\n                        return [4 /*yield*/, FileAccessControl_1.FileAccessControl.applyACLRules(this._tempDir)];\r\n                    case 4:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        ex_2 = _a.sent();\r\n                        this._logWarn(\"Failed to apply file access control to folder: \" + Util.dumpObj(ex_2));\r\n                        this._onErrorHelper(ex_2);\r\n                        return [2 /*return*/];\r\n                    case 6:\r\n                        _a.trys.push([6, 8, , 9]);\r\n                        return [4 /*yield*/, FileSystemHelper.getShallowDirectorySize(this._tempDir)];\r\n                    case 7:\r\n                        size = _a.sent();\r\n                        if (size > this._maxBytesOnDisk) {\r\n                            this._logWarn(\"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [3 /*break*/, 9];\r\n                    case 8:\r\n                        ex_3 = _a.sent();\r\n                        this._logWarn(\"Failed to read directory for retriable telemetry: \" + Util.dumpObj(ex_3));\r\n                        this._onErrorHelper(ex_3);\r\n                        return [2 /*return*/];\r\n                    case 9:\r\n                        _a.trys.push([9, 11, , 12]);\r\n                        fileName = new Date().getTime() + \".ai.json\";\r\n                        fileFullPath = path.join(this._tempDir, fileName);\r\n                        // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\r\n                        // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\r\n                        this._logInfo(\"saving data to disk at: \" + fileFullPath);\r\n                        return [4 /*yield*/, FileSystemHelper.writeFileAsync(fileFullPath, Util.stringify(envelopes), { mode: 384 })];\r\n                    case 10:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 12];\r\n                    case 11:\r\n                        ex_4 = _a.sent();\r\n                        this._logWarn(\"Failed to persist telemetry to disk: \" + Util.dumpObj(ex_4));\r\n                        this._onErrorHelper(ex_4);\r\n                        return [2 /*return*/];\r\n                    case 12: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk using sync file operations\r\n     * this is used when storing data before crashes\r\n     */\r\n    Sender.prototype._storeToDiskSync = function (payload) {\r\n        try {\r\n            this._logInfo(\"Checking existence of data storage directory: \" + this._tempDir);\r\n            if (!fs.existsSync(this._tempDir)) {\r\n                fs.mkdirSync(this._tempDir);\r\n            }\r\n            // Make sure permissions are valid\r\n            FileAccessControl_1.FileAccessControl.applyACLRulesSync(this._tempDir);\r\n            var dirSize = FileSystemHelper.getShallowDirectorySizeSync(this._tempDir);\r\n            if (dirSize > this._maxBytesOnDisk) {\r\n                this._logInfo(\"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\r\n                return;\r\n            }\r\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\r\n            //would require an external dependency\r\n            var fileName = new Date().getTime() + \".ai.json\";\r\n            var fileFullPath = path.join(this._tempDir, fileName);\r\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\r\n            this._logInfo(\"saving data before crash to disk at: \" + fileFullPath);\r\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\r\n        }\r\n        catch (error) {\r\n            this._logWarn(\"Error while saving data to disk: \" + Util.dumpObj(error));\r\n            this._onErrorHelper(error);\r\n        }\r\n    };\r\n    /**\r\n     * Check for temp telemetry files\r\n     * reads the first file if exist, deletes it and tries to send its load\r\n     */\r\n    Sender.prototype._sendFirstFileOnDisk = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var files, firstFile, filePath, buffer, envelopes, err_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 6, , 7]);\r\n                        return [4 /*yield*/, FileSystemHelper.readdirAsync(this._tempDir)];\r\n                    case 1:\r\n                        files = _a.sent();\r\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\r\n                        if (!(files.length > 0)) return [3 /*break*/, 5];\r\n                        firstFile = files[0];\r\n                        filePath = path.join(this._tempDir, firstFile);\r\n                        return [4 /*yield*/, FileSystemHelper.readFileAsync(filePath)];\r\n                    case 2:\r\n                        buffer = _a.sent();\r\n                        // delete the file first to prevent double sending\r\n                        return [4 /*yield*/, FileSystemHelper.unlinkAsync(filePath)];\r\n                    case 3:\r\n                        // delete the file first to prevent double sending\r\n                        _a.sent();\r\n                        envelopes = JSON.parse(buffer.toString());\r\n                        return [4 /*yield*/, this.send(envelopes)];\r\n                    case 4:\r\n                        _a.sent();\r\n                        _a.label = 5;\r\n                    case 5: return [3 /*break*/, 7];\r\n                    case 6:\r\n                        err_1 = _a.sent();\r\n                        this._onErrorHelper(err_1);\r\n                        return [3 /*break*/, 7];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Sender.prototype._onErrorHelper = function (error) {\r\n        if (typeof this._onError === \"function\") {\r\n            this._onError(error);\r\n        }\r\n    };\r\n    Sender.prototype._fileCleanupTask = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var files, i, fileCreationDate, expired, filePath, err_2;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 6, , 7]);\r\n                        return [4 /*yield*/, FileSystemHelper.readdirAsync(this._tempDir)];\r\n                    case 1:\r\n                        files = _a.sent();\r\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\r\n                        if (!(files.length > 0)) return [3 /*break*/, 5];\r\n                        i = 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(i < files.length)) return [3 /*break*/, 5];\r\n                        fileCreationDate = new Date(parseInt(files[i].split(\".ai.json\")[0]));\r\n                        expired = new Date(+(new Date()) - Sender.FILE_RETEMPTION_PERIOD) > fileCreationDate;\r\n                        if (!expired) return [3 /*break*/, 4];\r\n                        filePath = path.join(this._tempDir, files[i]);\r\n                        return [4 /*yield*/, FileSystemHelper.unlinkAsync(filePath).catch(function (err) {\r\n                                _this._onErrorHelper(err);\r\n                            })];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 7];\r\n                    case 6:\r\n                        err_2 = _a.sent();\r\n                        if (err_2.code != \"ENOENT\") {\r\n                            this._onErrorHelper(err_2);\r\n                        }\r\n                        return [3 /*break*/, 7];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Sender.TAG = \"Sender\";\r\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throttling from the service side\r\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000; // 1 minute\r\n    Sender.MAX_BYTES_ON_DISK = 50 * 1024 * 1024; // 50 mb\r\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\r\n    Sender.CLEANUP_TIMEOUT = 60 * 60 * 1000; // 1 hour\r\n    Sender.FILE_RETEMPTION_PERIOD = 7 * 24 * 60 * 60 * 1000; // 7 days\r\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\r\n    Sender.HTTP_TIMEOUT = 20000; // 20 seconds\r\n    return Sender;\r\n}());\r\nmodule.exports = Sender;\r\n//# sourceMappingURL=Sender.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isContentTypeHeaderHtml = exports.insertSnippetByIndex = exports.getContentEncodingFromHeaders = exports.isSupportedContentEncoding = exports.findBufferEncodingType = exports.isBufferType = exports.getBrotliDecompressSync = exports.getBrotliDecompressAsync = exports.getBrotliCompressSync = exports.getBrotliCompressAsync = exports.inflateAsync = exports.deflateAsync = exports.gunzipAsync = exports.gzipAsync = exports.isBrotliSupperted = exports.bufferEncodingTypes = exports.contentEncodingMethod = void 0;\r\nvar zlib = require(\"zlib\");\r\nvar util_1 = require(\"util\");\r\n// currently support the following encoding types\r\nvar contentEncodingMethod;\r\n(function (contentEncodingMethod) {\r\n    contentEncodingMethod[\"GZIP\"] = \"gzip\";\r\n    contentEncodingMethod[\"DEFLATE\"] = \"deflate\";\r\n    contentEncodingMethod[\"BR\"] = \"br\";\r\n})(contentEncodingMethod = exports.contentEncodingMethod || (exports.contentEncodingMethod = {}));\r\n//current supported encoding types\r\nexports.bufferEncodingTypes = [\"utf8\", \"utf16le\", \"latin1\", \"base64\", \"hex\", \"ascii\", \"binary\", \"ucs2\"];\r\n//for node version under 10, Brotli compression is not supported.\r\nvar isBrotliSupperted = function () {\r\n    var majVer = process.versions.node.split(\".\")[0];\r\n    return parseInt(majVer) >= 10;\r\n};\r\nexports.isBrotliSupperted = isBrotliSupperted;\r\nexports.gzipAsync = util_1.promisify(zlib.gzip);\r\nexports.gunzipAsync = util_1.promisify(zlib.gunzip);\r\nexports.deflateAsync = util_1.promisify(zlib.deflate);\r\nexports.inflateAsync = util_1.promisify(zlib.inflate);\r\nvar getBrotliCompressAsync = function (zlibObject) {\r\n    var isMajorVer = exports.isBrotliSupperted();\r\n    if (isMajorVer && typeof zlibObject.brotliCompress === \"function\") {\r\n        return util_1.promisify(zlibObject.brotliCompress);\r\n    }\r\n    return null;\r\n};\r\nexports.getBrotliCompressAsync = getBrotliCompressAsync;\r\nvar getBrotliCompressSync = function (zlibObject) {\r\n    var isMajorVer = exports.isBrotliSupperted();\r\n    if (isMajorVer && typeof zlibObject.brotliCompressSync === \"function\") {\r\n        return zlibObject.brotliCompressSync;\r\n    }\r\n    return null;\r\n};\r\nexports.getBrotliCompressSync = getBrotliCompressSync;\r\nvar getBrotliDecompressAsync = function (zlibObject) {\r\n    var isMajorVer = exports.isBrotliSupperted();\r\n    if (isMajorVer && typeof zlibObject.brotliDecompress === \"function\") {\r\n        return util_1.promisify(zlibObject.brotliDecompress);\r\n    }\r\n    return null;\r\n};\r\nexports.getBrotliDecompressAsync = getBrotliDecompressAsync;\r\nvar getBrotliDecompressSync = function (zlibObject) {\r\n    var isMajorVer = exports.isBrotliSupperted();\r\n    if (isMajorVer && typeof zlibObject.brotliDecompressSync === \"function\") {\r\n        return zlibObject.brotliDecompressSync;\r\n    }\r\n    return null;\r\n};\r\nexports.getBrotliDecompressSync = getBrotliDecompressSync;\r\nvar isBufferType = function (buffer, type) {\r\n    var encodingType = type ? type : \"utf8\";\r\n    var result = false;\r\n    if (Buffer.isEncoding(encodingType)) {\r\n        var newBuffer = Buffer.from(buffer.toString(encodingType), encodingType);\r\n        result = newBuffer.toJSON().data.toString() === buffer.toJSON().data.toString();\r\n    }\r\n    return result;\r\n};\r\nexports.isBufferType = isBufferType;\r\nvar findBufferEncodingType = function (buffer) {\r\n    var bufferType = null;\r\n    for (var key in exports.bufferEncodingTypes) {\r\n        var type = exports.bufferEncodingTypes[key];\r\n        if (Buffer.isEncoding(type) && exports.isBufferType(buffer, type)) {\r\n            bufferType = type;\r\n            break;\r\n        }\r\n    }\r\n    return bufferType;\r\n};\r\nexports.findBufferEncodingType = findBufferEncodingType;\r\nvar isSupportedContentEncoding = function (encodingMethod) {\r\n    var encodingType = null;\r\n    switch (encodingMethod) {\r\n        case \"gzip\":\r\n            encodingType = contentEncodingMethod.GZIP;\r\n            break;\r\n        case \"br\":\r\n            encodingType = contentEncodingMethod.BR;\r\n            break;\r\n        case \"deflate\":\r\n            encodingType = contentEncodingMethod.DEFLATE;\r\n            break;\r\n        default:\r\n    }\r\n    return encodingType;\r\n};\r\nexports.isSupportedContentEncoding = isSupportedContentEncoding;\r\n// mutiple content-encoding is not supported\r\n// for mutiple content-encoding, this method will return any empty array\r\nvar getContentEncodingFromHeaders = function (response) {\r\n    var headers = [];\r\n    var contentEncodingHeaders = response.getHeader(\"Content-Encoding\");\r\n    if (!contentEncodingHeaders)\r\n        return null;\r\n    if (typeof contentEncodingHeaders === \"string\") {\r\n        var supportedContentEncoding = exports.isSupportedContentEncoding(contentEncodingHeaders);\r\n        if (supportedContentEncoding) {\r\n            headers.push(supportedContentEncoding);\r\n        }\r\n    }\r\n    return headers;\r\n};\r\nexports.getContentEncodingFromHeaders = getContentEncodingFromHeaders;\r\nvar insertSnippetByIndex = function (index, html, snippet) {\r\n    if (index < 0)\r\n        return null;\r\n    var newHtml = null;\r\n    var subStart = html.substring(0, index);\r\n    var subEnd = html.substring(index);\r\n    newHtml = subStart + '<script type=\"text/javascript\">' + snippet + \"</script>\" + subEnd;\r\n    return newHtml;\r\n};\r\nexports.insertSnippetByIndex = insertSnippetByIndex;\r\nvar isContentTypeHeaderHtml = function (response) {\r\n    var isHtml = false;\r\n    var contentType = response.getHeader(\"Content-Type\");\r\n    if (contentType) {\r\n        if (typeof contentType === \"string\") {\r\n            isHtml = contentType.indexOf(\"html\") >= 0;\r\n        }\r\n        else {\r\n            isHtml = contentType.toString().indexOf(\"html\") >= 0;\r\n        }\r\n    }\r\n    return isHtml;\r\n};\r\nexports.isContentTypeHeaderHtml = isContentTypeHeaderHtml;\r\n//# sourceMappingURL=SnippetInjectionHelper.js.map","\"use strict\";\r\nvar url = require(\"url\");\r\nvar Config = require(\"./Config\");\r\nvar AuthorizationHandler = require(\"./AuthorizationHandler\");\r\nvar Context = require(\"./Context\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Channel = require(\"./Channel\");\r\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\nvar Statsbeat = require(\"../AutoCollection/Statsbeat\");\r\nvar Sender = require(\"./Sender\");\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\r\n/**\r\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\r\n * and manually trigger immediate sending (flushing)\r\n */\r\nvar TelemetryClient = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new client of the client\r\n     * @param setupString the Connection String or Instrumentation Key to use (read from environment variable if not specified)\r\n     */\r\n    function TelemetryClient(setupString) {\r\n        this._telemetryProcessors = [];\r\n        this._enableAzureProperties = false;\r\n        var config = new Config(setupString);\r\n        this.config = config;\r\n        if (!this.config.instrumentationKey || this.config.instrumentationKey == \"\") {\r\n            throw new Error(\"Instrumentation key not found, please provide a connection string before starting Application Insights SDK.\");\r\n        }\r\n        this.context = new Context();\r\n        this.commonProperties = {};\r\n        this.authorizationHandler = null;\r\n        if (!this.config.disableStatsbeat) {\r\n            this._statsbeat = new Statsbeat(this.config, this.context);\r\n            this._statsbeat.enable(true);\r\n        }\r\n        var sender = new Sender(this.config, this.getAuthorizationHandler, null, null, this._statsbeat);\r\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\r\n    }\r\n    /**\r\n     * Log information about availability of an application\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackAvailability = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Availability);\r\n    };\r\n    /**\r\n     * Log a page view\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackPageView = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.PageView);\r\n    };\r\n    /**\r\n     * Log a trace message\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Trace);\r\n    };\r\n    /**\r\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\r\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\r\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Metric);\r\n    };\r\n    /**\r\n     * Log an exception\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackException = function (telemetry) {\r\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\r\n            telemetry.exception = new Error(telemetry.exception.toString());\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Exception);\r\n    };\r\n    /**\r\n     * Log a user action or other occurrence.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Event);\r\n    };\r\n    /**\r\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\r\n     * that aren't automatically captured or if you've disabled automatic request collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Request);\r\n    };\r\n    /**\r\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\r\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking option\r\n     * */\r\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\r\n        if (telemetry && !telemetry.target && telemetry.data) {\r\n            // url.parse().host returns null for non-urls,\r\n            // making this essentially a no-op in those cases\r\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\r\n            // url.parse() is deprecated, update to use WHATWG URL API instead\r\n            try {\r\n                telemetry.target = new url.URL(telemetry.data).host;\r\n            }\r\n            catch (error) {\r\n                // set target as null to be compliant with previous behavior\r\n                telemetry.target = null;\r\n                Logging.warn(TelemetryClient.TAG, \"The URL object is failed to create.\", error);\r\n            }\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\r\n    };\r\n    /**\r\n     * Immediately send all queued telemetry.\r\n     * @param options Flush options, including indicator whether app is crashing and callback\r\n     */\r\n    TelemetryClient.prototype.flush = function (options) {\r\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\r\n    };\r\n    /**\r\n     * Generic track method for all telemetry types\r\n     * @param data the telemetry to send\r\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\r\n     */\r\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\r\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\r\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\r\n            // Set time on the envelope if it was set on the telemetry item\r\n            if (telemetry.time) {\r\n                envelope.time = telemetry.time.toISOString();\r\n            }\r\n            if (this._enableAzureProperties) {\r\n                TelemetryProcessors.azureRoleEnvironmentTelemetryProcessor(envelope, this.context);\r\n            }\r\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\r\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\r\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\r\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\r\n            TelemetryProcessors.preAggregatedMetricsTelemetryProcessor(envelope, this.context);\r\n            if (accepted) {\r\n                TelemetryProcessors.performanceMetricsTelemetryProcessor(envelope, this.quickPulseClient);\r\n                this.channel.send(envelope);\r\n            }\r\n        }\r\n        else {\r\n            Logging.warn(TelemetryClient.TAG, \"track() requires telemetry object and telemetryType to be specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Automatically populate telemetry properties like RoleName when running in Azure\r\n     *\r\n      * @param value if true properties will be populated\r\n     */\r\n    TelemetryClient.prototype.setAutoPopulateAzureProperties = function (value) {\r\n        this._enableAzureProperties = value;\r\n    };\r\n    /**\r\n     * Get Authorization handler\r\n     */\r\n    TelemetryClient.prototype.getAuthorizationHandler = function (config) {\r\n        if (config && config.aadTokenCredential) {\r\n            if (!this.authorizationHandler) {\r\n                Logging.info(TelemetryClient.TAG, \"Adding authorization handler\");\r\n                this.authorizationHandler = new AuthorizationHandler(config.aadTokenCredential);\r\n            }\r\n            return this.authorizationHandler;\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\r\n     * before telemetry item is pushed for sending and in the order they were added.\r\n     *\r\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\r\n     */\r\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\r\n        this._telemetryProcessors.push(telemetryProcessor);\r\n    };\r\n    /*\r\n     * Removes all telemetry processors\r\n     */\r\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\r\n        this._telemetryProcessors = [];\r\n    };\r\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\r\n        var accepted = true;\r\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\r\n        if (telemetryProcessorsCount === 0) {\r\n            return accepted;\r\n        }\r\n        contextObjects = contextObjects || {};\r\n        contextObjects[\"correlationContext\"] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\r\n            try {\r\n                var processor = this._telemetryProcessors[i];\r\n                if (processor) {\r\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\r\n                        accepted = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            catch (error) {\r\n                accepted = true;\r\n                Logging.warn(TelemetryClient.TAG, \"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\r\n            }\r\n        }\r\n        // Sanitize tags and properties after running telemetry processors\r\n        if (accepted) {\r\n            if (envelope && envelope.tags) {\r\n                envelope.tags = Util.validateStringMap(envelope.tags);\r\n            }\r\n            if (envelope && envelope.data && envelope.data.baseData && envelope.data.baseData.properties) {\r\n                envelope.data.baseData.properties = Util.validateStringMap(envelope.data.baseData.properties);\r\n            }\r\n        }\r\n        return accepted;\r\n    };\r\n    /*\r\n     * Get Statsbeat instance\r\n     */\r\n    TelemetryClient.prototype.getStatsbeat = function () {\r\n        return this._statsbeat;\r\n    };\r\n    TelemetryClient.TAG = \"TelemetryClient\";\r\n    return TelemetryClient;\r\n}());\r\nmodule.exports = TelemetryClient;\r\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\r\nvar Util = require(\"./Util\");\r\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\r\n/**\r\n * Helper class to manage parsing and validation of traceparent header. Also handles hierarchical\r\n * back-compatibility headers generated from traceparent. W3C traceparent spec is documented at\r\n * https://www.w3.org/TR/trace-context/#traceparent-field\r\n */\r\nvar Traceparent = /** @class */ (function () {\r\n    function Traceparent(traceparent, parentId) {\r\n        this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\r\n        this.version = Traceparent.DEFAULT_VERSION;\r\n        if (traceparent && typeof traceparent === \"string\") { // traceparent constructor\r\n            // If incoming request contains traceparent: parse it, set operation, parent and telemetry id accordingly. traceparent should be injected into outgoing requests. request-id should be injected in back-compat format |traceId.spanId. so that older SDKs could understand it.\r\n            if (traceparent.split(\",\").length > 1) { // If more than 1 traceparent is present, discard both\r\n                this.traceId = Util.w3cTraceId();\r\n                this.spanId = Util.w3cTraceId().substr(0, 16);\r\n            }\r\n            else {\r\n                var traceparentArr = traceparent.trim().split(\"-\");\r\n                var len = traceparentArr.length;\r\n                if (len >= 4) { // traceparent must contain at least 4 fields\r\n                    this.version = traceparentArr[0];\r\n                    this.traceId = traceparentArr[1];\r\n                    this.spanId = traceparentArr[2];\r\n                    this.traceFlag = traceparentArr[3];\r\n                }\r\n                else { // Discard traceparent if a field is missing\r\n                    this.traceId = Util.w3cTraceId();\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                }\r\n                // Version validation\r\n                if (!this.version.match(/^[0-9a-f]{2}$/g)) {\r\n                    this.version = Traceparent.DEFAULT_VERSION;\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                if (this.version === \"00\" && len !== 4) { // 0x00 (and perhaps future versions) require exactly 4 fields. This strict check will need to be updated on each spec release\r\n                    this.traceId = Util.w3cTraceId();\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                }\r\n                if (this.version === \"ff\") { // 0xff is forbidden, generate new traceparent\r\n                    this.version = Traceparent.DEFAULT_VERSION;\r\n                    this.traceId = Util.w3cTraceId();\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                }\r\n                if (!this.version.match(/^0[0-9a-f]$/g)) {\r\n                    this.version = Traceparent.DEFAULT_VERSION;\r\n                }\r\n                // TraceFlag validation\r\n                if (!this.traceFlag.match(/^[0-9a-f]{2}$/g)) {\r\n                    this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                // Validate TraceId, regenerate new traceid if invalid\r\n                if (!Traceparent.isValidTraceId(this.traceId)) {\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                // Validate Span Id, discard entire traceparent if invalid\r\n                if (!Traceparent.isValidSpanId(this.spanId)) {\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                // Save backCompat parentId\r\n                this.parentId = this.getBackCompatRequestId();\r\n            }\r\n        }\r\n        else if (parentId) { // backcompat constructor\r\n            // If incoming request contains only request-id, new traceid and spanid should be started, request-id value should be used as a parent. Root part of request-id should be stored in custom dimension on the request telemetry if root part is different from traceid. On the outgoing request side, request-id should be emitted in the |traceId.spanId. format.\r\n            this.parentId = parentId.slice(); // copy\r\n            var operationId = CorrelationIdManager.getRootId(parentId);\r\n            if (!Traceparent.isValidTraceId(operationId)) {\r\n                this.legacyRootId = operationId;\r\n                operationId = Util.w3cTraceId();\r\n            }\r\n            if (parentId.indexOf(\"|\") !== -1) {\r\n                parentId = parentId.substring(1 + parentId.substring(0, parentId.length - 1).lastIndexOf(\".\"), parentId.length - 1);\r\n            }\r\n            this.traceId = operationId;\r\n            this.spanId = parentId;\r\n        }\r\n        else {\r\n            // Fallback default constructor\r\n            // if request does not contain any correlation headers, see case p2\r\n            this.traceId = Util.w3cTraceId();\r\n            this.spanId = Util.w3cTraceId().substr(0, 16);\r\n        }\r\n    }\r\n    Traceparent.isValidTraceId = function (id) {\r\n        return id.match(/^[0-9a-f]{32}$/) && id !== \"00000000000000000000000000000000\";\r\n    };\r\n    Traceparent.isValidSpanId = function (id) {\r\n        return id.match(/^[0-9a-f]{16}$/) && id !== \"0000000000000000\";\r\n    };\r\n    Traceparent.formatOpenTelemetryTraceFlags = function (traceFlags) {\r\n        var formattedFlags = (\"0\" + traceFlags.toString(16));\r\n        return formattedFlags.substring(formattedFlags.length - 2);\r\n    };\r\n    Traceparent.prototype.getBackCompatRequestId = function () {\r\n        return \"|\" + this.traceId + \".\" + this.spanId + \".\";\r\n    };\r\n    Traceparent.prototype.toString = function () {\r\n        return this.version + \"-\" + this.traceId + \"-\" + this.spanId + \"-\" + this.traceFlag;\r\n    };\r\n    Traceparent.prototype.updateSpanId = function () {\r\n        this.spanId = Util.w3cTraceId().substr(0, 16);\r\n    };\r\n    Traceparent.DEFAULT_TRACE_FLAG = \"01\";\r\n    Traceparent.DEFAULT_VERSION = \"00\";\r\n    return Traceparent;\r\n}());\r\nmodule.exports = Traceparent;\r\n//# sourceMappingURL=Traceparent.js.map","\"use strict\";\r\n/**\r\n * Helper class to manage parsing and strict-validation of tracestate header. W3C tracestate spec\r\n * is documented at https://www.w3.org/TR/trace-context/#header-value\r\n * @class Tracestate\r\n */\r\nvar Tracestate = /** @class */ (function () {\r\n    // if true, performs strict tracestate header checking, else just passes it along\r\n    function Tracestate(id) {\r\n        this.fieldmap = [];\r\n        if (!id) {\r\n            return;\r\n        }\r\n        this.fieldmap = this.parseHeader(id);\r\n    }\r\n    Tracestate.prototype.toString = function () {\r\n        var fieldarr = this.fieldmap;\r\n        if (!fieldarr || fieldarr.length == 0) {\r\n            return null;\r\n        }\r\n        return fieldarr.join(\", \");\r\n    };\r\n    Tracestate.validateKeyChars = function (key) {\r\n        var keyParts = key.split(\"@\");\r\n        if (keyParts.length == 2) {\r\n            // Parse for tenant@vendor format\r\n            var tenant = keyParts[0].trim();\r\n            var vendor = keyParts[1].trim();\r\n            var tenantValid = Boolean(tenant.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,241}$/));\r\n            var vendorValid = Boolean(vendor.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,14}$/));\r\n            return tenantValid && vendorValid;\r\n        }\r\n        else if (keyParts.length == 1) {\r\n            // Parse for standard key format\r\n            return Boolean(key.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,256}$/));\r\n        }\r\n        return false;\r\n    };\r\n    Tracestate.prototype.parseHeader = function (id) {\r\n        var res = [];\r\n        var keydeduper = {};\r\n        var parts = id.split(\",\");\r\n        if (parts.length > 32)\r\n            return null;\r\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\r\n            var rawPart = parts_1[_i];\r\n            var part = rawPart.trim(); // trim out whitespace\r\n            if (part.length === 0) {\r\n                continue; // Discard empty pairs, but keep the rest of this tracestate\r\n            }\r\n            var pair = part.split(\"=\");\r\n            // pair should contain exactly one \"=\"\r\n            if (pair.length !== 2) {\r\n                return null; // invalid pair: discard entire tracestate\r\n            }\r\n            // Validate length and charset of this key\r\n            if (!Tracestate.validateKeyChars(pair[0])) {\r\n                return null;\r\n            }\r\n            // Assert uniqueness of this key\r\n            if (keydeduper[pair[0]]) {\r\n                return null; // duplicate key: discard entire tracestate\r\n            }\r\n            else {\r\n                keydeduper[pair[0]] = true;\r\n            }\r\n            // All checks passed -- add this part\r\n            res.push(part);\r\n        }\r\n        return res;\r\n    };\r\n    Tracestate.strict = true;\r\n    return Tracestate;\r\n}());\r\nmodule.exports = Tracestate;\r\n//# sourceMappingURL=Tracestate.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar url = require(\"url\");\r\nvar constants = require(\"constants\");\r\nvar Logging = require(\"./Logging\");\r\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\r\nvar JsonConfig_1 = require(\"./JsonConfig\");\r\nvar Util = /** @class */ (function () {\r\n    function Util() {\r\n        Util._addCloseHandler();\r\n    }\r\n    /**\r\n     * helper method to access userId and sessionId cookie\r\n     */\r\n    Util.getCookie = function (name, cookie) {\r\n        var value = \"\";\r\n        if (name && name.length && typeof cookie === \"string\") {\r\n            var cookieName = name + \"=\";\r\n            var cookies = cookie.split(\";\");\r\n            for (var i = 0; i < cookies.length; i++) {\r\n                var cookie = cookies[i];\r\n                cookie = Util.trim(cookie);\r\n                if (cookie && cookie.indexOf(cookieName) === 0) {\r\n                    value = cookie.substring(cookieName.length, cookies[i].length);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\r\n     */\r\n    Util.trim = function (str) {\r\n        if (typeof str === \"string\") {\r\n            return str.replace(/^\\s+|\\s+$/g, \"\");\r\n        }\r\n        else {\r\n            return \"\";\r\n        }\r\n    };\r\n    /**\r\n     * Convert an array of int32 to Base64 (no '==' at the end).\r\n     * MSB first.\r\n     */\r\n    Util.int32ArrayToBase64 = function (array) {\r\n        var toChar = function (v, i) {\r\n            return String.fromCharCode((v >> i) & 0xFF);\r\n        };\r\n        var int32AsString = function (v) {\r\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\r\n        };\r\n        var x = array.map(int32AsString).join(\"\");\r\n        var b = Buffer.from ? Buffer.from(x, \"binary\") : new Buffer(x, \"binary\");\r\n        var s = b.toString(\"base64\");\r\n        return s.substr(0, s.indexOf(\"=\"));\r\n    };\r\n    /**\r\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\r\n     */\r\n    Util.random32 = function () {\r\n        return (0x100000000 * Math.random()) | 0;\r\n    };\r\n    /**\r\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\r\n     */\r\n    Util.randomu32 = function () {\r\n        return Util.random32() + 0x80000000;\r\n    };\r\n    /**\r\n     * generate W3C-compatible trace id\r\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\r\n     */\r\n    Util.w3cTraceId = function () {\r\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n        var oct = \"\", tmp;\r\n        for (var a = 0; a < 4; a++) {\r\n            tmp = Util.random32();\r\n            oct +=\r\n                hexValues[tmp & 0xF] +\r\n                    hexValues[tmp >> 4 & 0xF] +\r\n                    hexValues[tmp >> 8 & 0xF] +\r\n                    hexValues[tmp >> 12 & 0xF] +\r\n                    hexValues[tmp >> 16 & 0xF] +\r\n                    hexValues[tmp >> 20 & 0xF] +\r\n                    hexValues[tmp >> 24 & 0xF] +\r\n                    hexValues[tmp >> 28 & 0xF];\r\n        }\r\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\r\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\r\n    };\r\n    Util.w3cSpanId = function () {\r\n        return Util.w3cTraceId().substring(16);\r\n    };\r\n    Util.isValidW3CId = function (id) {\r\n        return id.length === 32 && id !== \"00000000000000000000000000000000\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Array\r\n     */\r\n    Util.isArray = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Error\r\n     */\r\n    Util.isError = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Error]\";\r\n    };\r\n    Util.isPrimitive = function (input) {\r\n        var propType = typeof input;\r\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Date\r\n     */\r\n    Util.isDate = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\r\n    };\r\n    /**\r\n     * Convert ms to c# time span format\r\n     */\r\n    Util.msToTimeSpan = function (totalms) {\r\n        if (isNaN(totalms) || totalms < 0) {\r\n            totalms = 0;\r\n        }\r\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\r\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\r\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\r\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\r\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\r\n        min = min.length < 2 ? \"0\" + min : min;\r\n        hour = hour.length < 2 ? \"0\" + hour : hour;\r\n        var daysText = days > 0 ? days + \".\" : \"\";\r\n        return daysText + hour + \":\" + min + \":\" + sec;\r\n    };\r\n    /**\r\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\r\n     * Simplify a generic Node Error into a simpler map for customDimensions\r\n     * Custom errors can still implement toJSON to override this functionality\r\n     */\r\n    Util.extractError = function (err) {\r\n        // Error is often subclassed so may have code OR id properties:\r\n        // https://nodejs.org/api/errors.html#errors_error_code\r\n        var looseError = err;\r\n        return {\r\n            message: err.message,\r\n            code: looseError.code || looseError.id || \"\"\r\n        };\r\n    };\r\n    /**\r\n     * Manually call toJSON if available to pre-convert the value.\r\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\r\n     * This avoids double escaping of quotes for Date objects, for example.\r\n     */\r\n    Util.extractObject = function (origProperty) {\r\n        if (origProperty instanceof Error) {\r\n            return Util.extractError(origProperty);\r\n        }\r\n        if (typeof origProperty.toJSON === \"function\") {\r\n            return origProperty.toJSON();\r\n        }\r\n        return origProperty;\r\n    };\r\n    /**\r\n     * Validate that an object is of type { [key: string]: string }\r\n     */\r\n    Util.validateStringMap = function (obj) {\r\n        if (typeof obj !== \"object\") {\r\n            Logging.info(\"Invalid properties dropped from payload\");\r\n            return;\r\n        }\r\n        var map = {};\r\n        for (var field in obj) {\r\n            var property = \"\";\r\n            var origProperty = obj[field];\r\n            var propType = typeof origProperty;\r\n            if (Util.isPrimitive(origProperty)) {\r\n                property = origProperty.toString();\r\n            }\r\n            else if (origProperty === null || propType === \"undefined\") {\r\n                property = \"\";\r\n            }\r\n            else if (propType === \"function\") {\r\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\r\n                continue;\r\n            }\r\n            else {\r\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\r\n                try {\r\n                    if (Util.isPrimitive(stringTarget)) {\r\n                        property = stringTarget;\r\n                    }\r\n                    else {\r\n                        property = JSON.stringify(stringTarget);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\r\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\r\n                }\r\n            }\r\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\r\n        }\r\n        return map;\r\n    };\r\n    /**\r\n     * Checks if a request url is not on a excluded domain list\r\n     * and if it is safe to add correlation headers\r\n     */\r\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\r\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\r\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\r\n            return true;\r\n        }\r\n        for (var i = 0; i < excludedDomains.length; i++) {\r\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\r\n            try {\r\n                if (regex.test(new url.URL(requestUrl).hostname)) {\r\n                    return false;\r\n                }\r\n            }\r\n            catch (ex) {\r\n                // Ignore errors\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Util.getCorrelationContextTarget = function (response, key) {\r\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\r\n        if (contextHeaders) {\r\n            var keyValues = contextHeaders.split(\",\");\r\n            for (var i = 0; i < keyValues.length; ++i) {\r\n                var keyValue = keyValues[i].split(\"=\");\r\n                if (keyValue.length == 2 && keyValue[0] == key) {\r\n                    return keyValue[1];\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate request\r\n     *\r\n     * Proxify the request creation to handle proxy http\r\n     *\r\n     * @param {string} requestUrl url endpoint\r\n     * @param {Object} requestOptions Request option\r\n     * @param {Function} requestCallback callback on request\r\n     * @param {boolean} useProxy Use proxy URL from config\r\n     * @param {boolean} useAgent Set Http Agent in request\r\n     * @returns {http.ClientRequest} request object\r\n     */\r\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback, useProxy, useAgent) {\r\n        if (useProxy === void 0) { useProxy = true; }\r\n        if (useAgent === void 0) { useAgent = true; }\r\n        if (requestUrl && requestUrl.indexOf(\"//\") === 0) {\r\n            requestUrl = \"https:\" + requestUrl;\r\n        }\r\n        var requestUrlParsed = new url.URL(requestUrl);\r\n        var options = __assign(__assign({}, requestOptions), { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\r\n        var proxyUrl = undefined;\r\n        if (useProxy) {\r\n            if (requestUrlParsed.protocol === \"https:\") {\r\n                proxyUrl = config.proxyHttpsUrl || undefined;\r\n            }\r\n            if (requestUrlParsed.protocol === \"http:\") {\r\n                proxyUrl = config.proxyHttpUrl || undefined;\r\n            }\r\n            if (proxyUrl) {\r\n                if (proxyUrl.indexOf(\"//\") === 0) {\r\n                    proxyUrl = \"http:\" + proxyUrl;\r\n                }\r\n                try {\r\n                    var proxyUrlParsed = new url.URL(proxyUrl);\r\n                    // https is not supported at the moment\r\n                    if (proxyUrlParsed.protocol === \"https:\") {\r\n                        Logging.info(\"Proxies that use HTTPS are not supported\");\r\n                        proxyUrl = undefined;\r\n                    }\r\n                    else {\r\n                        options = __assign(__assign({}, options), { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign(__assign({}, options.headers), { Host: requestUrlParsed.hostname }) });\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    Logging.warn(\"Wrong proxy URL provided\");\r\n                }\r\n            }\r\n        }\r\n        var isHttps = requestUrlParsed.protocol === \"https:\" && !proxyUrl;\r\n        if (useAgent) {\r\n            if (isHttps && config.httpsAgent !== undefined) {\r\n                options.agent = config.httpsAgent;\r\n            }\r\n            else if (!isHttps && config.httpAgent !== undefined) {\r\n                options.agent = config.httpAgent;\r\n            }\r\n            else if (isHttps) {\r\n                // HTTPS without a passed in agent. Use one that enforces our TLS rules\r\n                options.agent = Util._useKeepAlive ? Util.keepAliveAgent : Util.tlsRestrictedAgent;\r\n            }\r\n        }\r\n        if (isHttps) {\r\n            return https.request(options, requestCallback);\r\n        }\r\n        else {\r\n            return http.request(options, requestCallback);\r\n        }\r\n    };\r\n    /**\r\n     * Parse standard <string | string[] | number> request-context header\r\n     */\r\n    Util.safeIncludeCorrelationHeader = function (client, request, correlationHeader) {\r\n        var header; // attempt to cast correlationHeader to string\r\n        if (typeof correlationHeader === \"string\") {\r\n            header = correlationHeader;\r\n        }\r\n        else if (correlationHeader instanceof Array) { // string[]\r\n            header = correlationHeader.join(\",\");\r\n        }\r\n        else if (correlationHeader && typeof correlationHeader.toString === \"function\") {\r\n            // best effort attempt: requires well-defined toString\r\n            try {\r\n                header = correlationHeader.toString();\r\n            }\r\n            catch (err) {\r\n                Logging.warn(\"Outgoing request-context header could not be read. Correlation of requests may be lost.\", err, correlationHeader);\r\n            }\r\n        }\r\n        if (header) {\r\n            Util.addCorrelationIdHeaderFromString(client, request, header);\r\n        }\r\n        else {\r\n            request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n        }\r\n    };\r\n    /**\r\n     * Returns string representation of an object suitable for diagnostics logging.\r\n     */\r\n    Util.dumpObj = function (object) {\r\n        if (object) {\r\n            try {\r\n                var objectTypeDump = Object[\"prototype\"].toString.call(object);\r\n                var propertyValueDump = \"\";\r\n                if (objectTypeDump === \"[object Error]\") {\r\n                    propertyValueDump = \"{ stack: '\" + object.stack + \"', message: '\" + object.message + \"', name: '\" + object.name + \"'\";\r\n                }\r\n                else {\r\n                    propertyValueDump = this.stringify(object);\r\n                }\r\n                return objectTypeDump + propertyValueDump;\r\n            }\r\n            catch (ex) {\r\n                return object.toString();\r\n            }\r\n        }\r\n    };\r\n    Util.stringify = function (payload) {\r\n        try {\r\n            return JSON.stringify(payload);\r\n        }\r\n        catch (error) {\r\n            Logging.warn(\"Failed to serialize payload\", error, payload);\r\n        }\r\n    };\r\n    Util.addCorrelationIdHeaderFromString = function (client, response, correlationHeader) {\r\n        var components = correlationHeader.split(\",\");\r\n        var key = RequestResponseHeaders.requestContextSourceKey + \"=\";\r\n        var found = components.some(function (value) { return value.substring(0, key.length) === key; });\r\n        if (!found) {\r\n            response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n        }\r\n    };\r\n    Util._addCloseHandler = function () {\r\n        if (!Util._listenerAttached) {\r\n            process.on(\"exit\", function () {\r\n                Util.isNodeExit = true;\r\n                Util._useKeepAlive = false;\r\n            });\r\n            Util._listenerAttached = true;\r\n        }\r\n    };\r\n    Util._useKeepAlive = !JsonConfig_1.JsonConfig.getInstance().noHttpAgentKeepAlive;\r\n    Util._listenerAttached = false;\r\n    Util.MAX_PROPERTY_LENGTH = 8192;\r\n    Util.keepAliveAgent = new https.Agent({\r\n        keepAlive: true,\r\n        maxSockets: 25,\r\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\r\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\r\n    });\r\n    Util.tlsRestrictedAgent = new https.Agent({\r\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\r\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\r\n    });\r\n    Util.isNodeExit = false;\r\n    return Util;\r\n}());\r\nmodule.exports = Util;\r\n//# sourceMappingURL=Util.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.azureRoleEnvironmentTelemetryProcessor = void 0;\r\n/**\r\n *  A telemetry processor that handles Azure specific variables.\r\n */\r\nfunction azureRoleEnvironmentTelemetryProcessor(envelope, context) {\r\n    if (process.env.WEBSITE_SITE_NAME) { // Azure Web apps and Functions\r\n        envelope.tags[context.keys.cloudRole] = process.env.WEBSITE_SITE_NAME;\r\n    }\r\n    if (process.env.WEBSITE_INSTANCE_ID) {\r\n        envelope.tags[context.keys.cloudRoleInstance] = process.env.WEBSITE_INSTANCE_ID;\r\n    }\r\n}\r\nexports.azureRoleEnvironmentTelemetryProcessor = azureRoleEnvironmentTelemetryProcessor;\r\n//# sourceMappingURL=AzureRoleEnvironmentTelemetryInitializer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.performanceMetricsTelemetryProcessor = void 0;\r\nvar AutoCollectPerformance = require(\"../AutoCollection/Performance\");\r\nvar TelemetryType = require(\"../Declarations/Contracts\");\r\nfunction performanceMetricsTelemetryProcessor(envelope, client) {\r\n    // If live metrics is enabled, forward all telemetry there\r\n    if (client) {\r\n        client.addDocument(envelope);\r\n    }\r\n    // Increment rate counters (for standard metrics and live metrics)\r\n    switch (envelope.data.baseType) {\r\n        case TelemetryType.TelemetryTypeString.Exception:\r\n            AutoCollectPerformance.countException();\r\n            break;\r\n        case TelemetryType.TelemetryTypeString.Request:\r\n            var requestData = envelope.data.baseData;\r\n            AutoCollectPerformance.countRequest(requestData.duration, requestData.success);\r\n            break;\r\n        case TelemetryType.TelemetryTypeString.Dependency:\r\n            var remoteDependencyData = envelope.data.baseData;\r\n            AutoCollectPerformance.countDependency(remoteDependencyData.duration, remoteDependencyData.success);\r\n            break;\r\n    }\r\n    return true;\r\n}\r\nexports.performanceMetricsTelemetryProcessor = performanceMetricsTelemetryProcessor;\r\n//# sourceMappingURL=PerformanceMetricsTelemetryProcessor.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.preAggregatedMetricsTelemetryProcessor = void 0;\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar AutoCollecPreAggregatedMetrics = require(\"../AutoCollection/PreAggregatedMetrics\");\r\nvar TelemetryType = require(\"../Declarations/Contracts\");\r\nfunction preAggregatedMetricsTelemetryProcessor(envelope, context) {\r\n    if (AutoCollecPreAggregatedMetrics.isEnabled()) {\r\n        // Increment rate counters\r\n        switch (envelope.data.baseType) {\r\n            case TelemetryType.TelemetryTypeString.Exception:\r\n                var exceptionData = envelope.data.baseData;\r\n                exceptionData.properties = __assign(__assign({}, exceptionData.properties), { \"_MS.ProcessedByMetricExtractors\": \"(Name:'Exceptions', Ver:'1.1')\" });\r\n                var exceptionDimensions = {\r\n                    cloudRoleInstance: envelope.tags[context.keys.cloudRoleInstance],\r\n                    cloudRoleName: envelope.tags[context.keys.cloudRole]\r\n                };\r\n                AutoCollecPreAggregatedMetrics.countException(exceptionDimensions);\r\n                break;\r\n            case TelemetryType.TelemetryTypeString.Trace:\r\n                var traceData = envelope.data.baseData;\r\n                traceData.properties = __assign(__assign({}, traceData.properties), { \"_MS.ProcessedByMetricExtractors\": \"(Name:'Traces', Ver:'1.1')\" });\r\n                var traceDimensions = {\r\n                    cloudRoleInstance: envelope.tags[context.keys.cloudRoleInstance],\r\n                    cloudRoleName: envelope.tags[context.keys.cloudRole],\r\n                    traceSeverityLevel: Contracts.SeverityLevel[traceData.severity]\r\n                };\r\n                AutoCollecPreAggregatedMetrics.countTrace(traceDimensions);\r\n                break;\r\n            case TelemetryType.TelemetryTypeString.Request:\r\n                var requestData = envelope.data.baseData;\r\n                requestData.properties = __assign(__assign({}, requestData.properties), { \"_MS.ProcessedByMetricExtractors\": \"(Name:'Requests', Ver:'1.1')\" });\r\n                var requestDimensions = {\r\n                    cloudRoleInstance: envelope.tags[context.keys.cloudRoleInstance],\r\n                    cloudRoleName: envelope.tags[context.keys.cloudRole],\r\n                    operationSynthetic: envelope.tags[context.keys.operationSyntheticSource],\r\n                    requestSuccess: requestData.success,\r\n                    requestResultCode: requestData.responseCode\r\n                };\r\n                AutoCollecPreAggregatedMetrics.countRequest(requestData.duration, requestDimensions);\r\n                break;\r\n            case TelemetryType.TelemetryTypeString.Dependency:\r\n                var remoteDependencyData = envelope.data.baseData;\r\n                remoteDependencyData.properties = __assign(__assign({}, remoteDependencyData.properties), { \"_MS.ProcessedByMetricExtractors\": \"(Name:'Dependencies', Ver:'1.1')\" });\r\n                var dependencyDimensions = {\r\n                    cloudRoleInstance: envelope.tags[context.keys.cloudRoleInstance],\r\n                    cloudRoleName: envelope.tags[context.keys.cloudRole],\r\n                    operationSynthetic: envelope.tags[context.keys.operationSyntheticSource],\r\n                    dependencySuccess: remoteDependencyData.success,\r\n                    dependencyType: remoteDependencyData.type,\r\n                    dependencyTarget: remoteDependencyData.target,\r\n                    dependencyResultCode: remoteDependencyData.resultCode\r\n                };\r\n                AutoCollecPreAggregatedMetrics.countDependency(remoteDependencyData.duration, dependencyDimensions);\r\n                break;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexports.preAggregatedMetricsTelemetryProcessor = preAggregatedMetricsTelemetryProcessor;\r\n//# sourceMappingURL=PreAggregatedMetricsTelemetryProcessor.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getSamplingHashCode = exports.samplingTelemetryProcessor = void 0;\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\n/**\r\n *  A telemetry processor that handles sampling.\r\n */\r\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\r\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\r\n    var isSampledIn = false;\r\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\r\n        return true;\r\n    }\r\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\r\n        // Exclude MetricData telemetry from sampling\r\n        return true;\r\n    }\r\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\r\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request\r\n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\r\n    }\r\n    else {\r\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\r\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\r\n    }\r\n    return isSampledIn;\r\n}\r\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\r\n/** Ported from AI .NET SDK */\r\nfunction getSamplingHashCode(input) {\r\n    var csharpMin = -2147483648;\r\n    var csharpMax = 2147483647;\r\n    var hash = 5381;\r\n    if (!input) {\r\n        return 0;\r\n    }\r\n    while (input.length < 8) {\r\n        input = input + input;\r\n    }\r\n    for (var i = 0; i < input.length; i++) {\r\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\r\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\r\n    }\r\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\r\n    return (hash / csharpMax) * 100;\r\n}\r\nexports.getSamplingHashCode = getSamplingHashCode;\r\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./AzureRoleEnvironmentTelemetryInitializer\"), exports);\r\n__exportStar(require(\"./SamplingTelemetryProcessor\"), exports);\r\n__exportStar(require(\"./PerformanceMetricsTelemetryProcessor\"), exports);\r\n__exportStar(require(\"./PreAggregatedMetricsTelemetryProcessor\"), exports);\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.dispose = exports.Configuration = exports.wrapWithCorrelationContext = exports.startOperation = exports.getCorrelationContext = exports.start = exports.setup = exports.liveMetricsClient = exports.defaultClient = exports.DistributedTracingModes = void 0;\r\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\r\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\r\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\r\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\r\nvar AutoCollecPreAggregatedMetrics = require(\"./AutoCollection/PreAggregatedMetrics\");\r\nvar HeartBeat = require(\"./AutoCollection/HeartBeat\");\r\nvar WebSnippet = require(\"./AutoCollection/WebSnippet\");\r\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\r\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\r\nvar CorrelationIdManager = require(\"./Library/CorrelationIdManager\");\r\nvar Logging = require(\"./Library/Logging\");\r\nvar QuickPulseClient = require(\"./Library/QuickPulseStateManager\");\r\nvar NativePerformance_1 = require(\"./AutoCollection/NativePerformance\");\r\n// We export these imports so that SDK users may use these classes directly.\r\n// They're exposed using \"export import\" so that types are passed along as expected\r\nexports.TelemetryClient = require(\"./Library/NodeClient\");\r\nexports.Contracts = require(\"./Declarations/Contracts\");\r\nexports.azureFunctionsTypes = require(\"./Library/Functions\");\r\nvar DistributedTracingModes;\r\n(function (DistributedTracingModes) {\r\n    /**\r\n     * Send Application Insights correlation headers\r\n     */\r\n    DistributedTracingModes[DistributedTracingModes[\"AI\"] = 0] = \"AI\";\r\n    /**\r\n     * (Default) Send both W3C Trace Context headers and back-compatibility Application Insights headers\r\n     */\r\n    DistributedTracingModes[DistributedTracingModes[\"AI_AND_W3C\"] = 1] = \"AI_AND_W3C\";\r\n})(DistributedTracingModes = exports.DistributedTracingModes || (exports.DistributedTracingModes = {}));\r\n// Default autocollection configuration\r\nvar defaultConfig = _getDefaultAutoCollectConfig();\r\nvar _isConsole = defaultConfig.isConsole();\r\nvar _isConsoleLog = defaultConfig.isConsoleLog();\r\nvar _isExceptions = defaultConfig.isExceptions();\r\nvar _isPerformance = defaultConfig.isPerformance();\r\nvar _isPreAggregatedMetrics = defaultConfig.isPreAggregatedMetrics();\r\nvar _isHeartBeat = defaultConfig.isHeartBeat(); // off by default for now\r\nvar _isRequests = defaultConfig.isRequests();\r\nvar _isDependencies = defaultConfig.isDependencies();\r\nvar _isDiskRetry = defaultConfig.isDiskRetry();\r\nvar _isCorrelating = defaultConfig.isCorrelating();\r\nvar _forceClsHooked;\r\nvar _isSendingLiveMetrics = defaultConfig.isSendingLiveMetrics(); // Off by default\r\nvar _isNativePerformance = defaultConfig.isNativePerformance();\r\nvar _disabledExtendedMetrics;\r\nvar _isSnippetInjection = defaultConfig.isSnippetInjection(); // default to false\r\nfunction _getDefaultAutoCollectConfig() {\r\n    return {\r\n        isConsole: function () { return true; },\r\n        isConsoleLog: function () { return false; },\r\n        isExceptions: function () { return true; },\r\n        isPerformance: function () { return true; },\r\n        isPreAggregatedMetrics: function () { return true; },\r\n        isHeartBeat: function () { return false; },\r\n        isRequests: function () { return true; },\r\n        isDependencies: function () { return true; },\r\n        isDiskRetry: function () { return true; },\r\n        isCorrelating: function () { return true; },\r\n        isSendingLiveMetrics: function () { return false; },\r\n        isNativePerformance: function () { return true; },\r\n        isSnippetInjection: function () { return false; }\r\n    };\r\n}\r\nvar _diskRetryInterval = undefined;\r\nvar _diskRetryMaxBytes = undefined;\r\nvar _webSnippetConnectionString = undefined;\r\nvar _console;\r\nvar _exceptions;\r\nvar _performance;\r\nvar _preAggregatedMetrics;\r\nvar _heartbeat;\r\nvar _webSnippet;\r\nvar _nativePerformance;\r\nvar _serverRequests;\r\nvar _clientRequests;\r\nvar _isStarted = false;\r\nvar _performanceLiveMetrics;\r\n/**\r\n * Initializes the default client. Should be called after setting\r\n * configuration options.\r\n *\r\n * @param setupString the Connection String or Instrumentation Key to use. Optional, if\r\n * this is not specified, the value will be read from the environment\r\n * variable APPLICATIONINSIGHTS_CONNECTION_STRING.\r\n * @returns {Configuration} the configuration class to initialize\r\n * and start the SDK.\r\n */\r\nfunction setup(setupString) {\r\n    if (!exports.defaultClient) {\r\n        exports.defaultClient = new exports.TelemetryClient(setupString);\r\n        _initializeConfig();\r\n        _console = new AutoCollectConsole(exports.defaultClient);\r\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\r\n        _performance = new AutoCollectPerformance(exports.defaultClient);\r\n        _preAggregatedMetrics = new AutoCollecPreAggregatedMetrics(exports.defaultClient);\r\n        _heartbeat = new HeartBeat(exports.defaultClient);\r\n        _webSnippet = new WebSnippet(exports.defaultClient);\r\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\r\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\r\n        if (!_nativePerformance) {\r\n            _nativePerformance = new NativePerformance_1.AutoCollectNativePerformance(exports.defaultClient);\r\n        }\r\n    }\r\n    else {\r\n        Logging.info(\"The default client is already setup\");\r\n    }\r\n    if (exports.defaultClient && exports.defaultClient.channel) {\r\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\r\n    }\r\n    return Configuration;\r\n}\r\nexports.setup = setup;\r\n/**\r\n * Starts automatic collection of telemetry. Prior to calling start no\r\n * telemetry will be *automatically* collected, though manual collection\r\n * is enabled.\r\n * @returns {ApplicationInsights} this class\r\n */\r\nfunction start() {\r\n    if (!!exports.defaultClient) {\r\n        _isStarted = true;\r\n        _console.enable(_isConsole, _isConsoleLog);\r\n        _exceptions.enable(_isExceptions);\r\n        _performance.enable(_isPerformance);\r\n        _preAggregatedMetrics.enable(_isPreAggregatedMetrics);\r\n        _heartbeat.enable(_isHeartBeat);\r\n        _nativePerformance.enable(_isNativePerformance, _disabledExtendedMetrics);\r\n        _serverRequests.useAutoCorrelation(_isCorrelating, _forceClsHooked);\r\n        _serverRequests.enable(_isRequests);\r\n        _clientRequests.enable(_isDependencies);\r\n        _webSnippet.enable(_isSnippetInjection, _webSnippetConnectionString);\r\n        if (exports.liveMetricsClient && _isSendingLiveMetrics) {\r\n            exports.liveMetricsClient.enable(_isSendingLiveMetrics);\r\n        }\r\n    }\r\n    else {\r\n        Logging.warn(\"Start cannot be called before setup\");\r\n    }\r\n    return Configuration;\r\n}\r\nexports.start = start;\r\nfunction _initializeConfig() {\r\n    _isConsole = exports.defaultClient.config.enableAutoCollectExternalLoggers !== undefined ? exports.defaultClient.config.enableAutoCollectExternalLoggers : _isConsole;\r\n    _isConsoleLog = exports.defaultClient.config.enableAutoCollectConsole !== undefined ? exports.defaultClient.config.enableAutoCollectConsole : _isConsoleLog;\r\n    _isExceptions = exports.defaultClient.config.enableAutoCollectExceptions !== undefined ? exports.defaultClient.config.enableAutoCollectExceptions : _isExceptions;\r\n    _isPerformance = exports.defaultClient.config.enableAutoCollectPerformance !== undefined ? exports.defaultClient.config.enableAutoCollectPerformance : _isPerformance;\r\n    _isPreAggregatedMetrics = exports.defaultClient.config.enableAutoCollectPreAggregatedMetrics !== undefined ? exports.defaultClient.config.enableAutoCollectPreAggregatedMetrics : _isPreAggregatedMetrics;\r\n    _isHeartBeat = exports.defaultClient.config.enableAutoCollectHeartbeat !== undefined ? exports.defaultClient.config.enableAutoCollectHeartbeat : _isHeartBeat;\r\n    _isRequests = exports.defaultClient.config.enableAutoCollectRequests !== undefined ? exports.defaultClient.config.enableAutoCollectRequests : _isRequests;\r\n    _isDependencies = exports.defaultClient.config.enableAutoDependencyCorrelation !== undefined ? exports.defaultClient.config.enableAutoDependencyCorrelation : _isDependencies;\r\n    _isCorrelating = exports.defaultClient.config.enableAutoDependencyCorrelation !== undefined ? exports.defaultClient.config.enableAutoDependencyCorrelation : _isCorrelating;\r\n    _forceClsHooked = exports.defaultClient.config.enableUseAsyncHooks !== undefined ? exports.defaultClient.config.enableUseAsyncHooks : _forceClsHooked;\r\n    _isSnippetInjection = exports.defaultClient.config.enableWebInstrumentation !== undefined ? exports.defaultClient.config.enableWebInstrumentation : _isSnippetInjection;\r\n    _isSnippetInjection = exports.defaultClient.config.enableAutoWebSnippetInjection === true ? true : _isSnippetInjection;\r\n    var extendedMetricsConfig = NativePerformance_1.AutoCollectNativePerformance.parseEnabled(exports.defaultClient.config.enableAutoCollectExtendedMetrics, exports.defaultClient.config);\r\n    _isNativePerformance = extendedMetricsConfig.isEnabled;\r\n    _disabledExtendedMetrics = extendedMetricsConfig.disabledMetrics;\r\n}\r\n/**\r\n * Returns an object that is shared across all code handling a given request.\r\n * This can be used similarly to thread-local storage in other languages.\r\n * Properties set on this object will be available to telemetry processors.\r\n *\r\n * Do not store sensitive information here.\r\n * Custom properties set on this object can be exposed in a future SDK\r\n * release via outgoing HTTP headers.\r\n * This is to allow for correlating data cross-component.\r\n *\r\n * This method will return null if automatic dependency correlation is disabled.\r\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\r\n */\r\nfunction getCorrelationContext() {\r\n    if (_isCorrelating) {\r\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\r\n    }\r\n    return null;\r\n}\r\nexports.getCorrelationContext = getCorrelationContext;\r\nfunction startOperation(context, request) {\r\n    return CorrelationContextManager.CorrelationContextManager.startOperation(context, request);\r\n}\r\nexports.startOperation = startOperation;\r\n/**\r\n * Returns a function that will get the same correlation context within its\r\n * function body as the code executing this function.\r\n * Use this method if automatic dependency correlation is not propagating\r\n * correctly to an asynchronous callback.\r\n */\r\nfunction wrapWithCorrelationContext(fn, context) {\r\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn, context);\r\n}\r\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\r\n/**\r\n * The active configuration for global SDK behaviors, such as autocollection.\r\n */\r\nvar Configuration = /** @class */ (function () {\r\n    function Configuration() {\r\n    }\r\n    /**\r\n     * Sets the distributed tracing modes. If W3C mode is enabled, W3C trace context\r\n     * headers (traceparent/tracestate) will be parsed in all incoming requests, and included in outgoing\r\n     * requests. In W3C mode, existing back-compatibility AI headers will also be parsed and included.\r\n     * Enabling W3C mode will not break existing correlation with other Application Insights instrumented\r\n     * services. Default=AI\r\n    */\r\n    Configuration.setDistributedTracingMode = function (value) {\r\n        CorrelationIdManager.w3cEnabled = value === DistributedTracingModes.AI_AND_W3C;\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\r\n     * @param value if true logger activity will be sent to Application Insights\r\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\r\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\r\n        _isConsole = value;\r\n        _isConsoleLog = collectConsoleLog;\r\n        if (_isStarted) {\r\n            _console.enable(value, collectConsoleLog);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of exception tracking (enabled by default)\r\n     * @param value if true uncaught exceptions will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectExceptions = function (value) {\r\n        _isExceptions = value;\r\n        if (_isStarted) {\r\n            _exceptions.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of performance tracking (enabled by default)\r\n     * @param value if true performance counters will be collected every second and sent to Application Insights\r\n     * @param collectExtendedMetrics if true, extended metrics counters will be collected every minute and sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectPerformance = function (value, collectExtendedMetrics) {\r\n        if (collectExtendedMetrics === void 0) { collectExtendedMetrics = true; }\r\n        _isPerformance = value;\r\n        var extendedMetricsConfig = NativePerformance_1.AutoCollectNativePerformance.parseEnabled(collectExtendedMetrics, exports.defaultClient.config);\r\n        _isNativePerformance = extendedMetricsConfig.isEnabled;\r\n        _disabledExtendedMetrics = extendedMetricsConfig.disabledMetrics;\r\n        if (_isStarted) {\r\n            _performance.enable(value);\r\n            _nativePerformance.enable(extendedMetricsConfig.isEnabled, extendedMetricsConfig.disabledMetrics);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of pre aggregated metrics tracking (enabled by default)\r\n     * @param value if true pre aggregated metrics will be collected every minute and sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectPreAggregatedMetrics = function (value) {\r\n        _isPreAggregatedMetrics = value;\r\n        if (_isStarted) {\r\n            _preAggregatedMetrics.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of request tracking (enabled by default)\r\n     * @param value if true HeartBeat metric data will be collected every 15 mintues and sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectHeartbeat = function (value) {\r\n        _isHeartBeat = value;\r\n        if (_isStarted) {\r\n            _heartbeat.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of Web snippet injection, this config is NOT exposed in documentation after version 2.3.5\r\n     * @deprecated, please use enableWebInstrumentation instead.\r\n     * @param value if true Web snippet will be tried to be injected in server response\r\n     * @param WebSnippetConnectionString if provided, web snippet injection will use this ConnectionString. Default to use the connectionString in Node.js app initialization\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.enableAutoWebSnippetInjection = function (value, WebSnippetConnectionString) {\r\n        _isSnippetInjection = value;\r\n        _webSnippetConnectionString = WebSnippetConnectionString;\r\n        if (_isStarted) {\r\n            _webSnippet.enable(value, _webSnippetConnectionString);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of Web snippet injection\r\n     * @param value if true Web snippet will be tried to be injected in server response\r\n     * @param WebSnippetConnectionString if provided, web snippet injection will use this ConnectionString. Default to use the connectionString in Node.js app initialization\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.enableWebInstrumentation = function (value, WebSnippetConnectionString) {\r\n        _isSnippetInjection = value;\r\n        _webSnippetConnectionString = WebSnippetConnectionString;\r\n        if (_isStarted) {\r\n            _webSnippet.enable(value, _webSnippetConnectionString);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of request tracking (enabled by default)\r\n     * @param value if true requests will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectRequests = function (value) {\r\n        _isRequests = value;\r\n        if (_isStarted) {\r\n            _serverRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of dependency tracking (enabled by default)\r\n     * @param value if true dependencies will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectDependencies = function (value) {\r\n        _isDependencies = value;\r\n        if (_isStarted) {\r\n            _clientRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of automatic dependency correlation (enabled by default)\r\n     * @param value if true dependencies will be correlated with requests\r\n     * @param useAsyncHooks if true, forces use of experimental async_hooks module to provide correlation. If false, instead uses only patching-based techniques. If left blank, the best option is chosen for you based on your version of Node.js.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoDependencyCorrelation = function (value, useAsyncHooks) {\r\n        _isCorrelating = value;\r\n        _forceClsHooked = useAsyncHooks;\r\n        if (_isStarted) {\r\n            _serverRequests.useAutoCorrelation(value, useAsyncHooks);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\r\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occured while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        _isDiskRetry = value;\r\n        _diskRetryInterval = resendInterval;\r\n        _diskRetryMaxBytes = maxBytesOnDisk;\r\n        if (exports.defaultClient && exports.defaultClient.channel) {\r\n            exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enables debug and warning logging for AppInsights itself.\r\n     * @param enableDebugLogging if true, enables debug logging\r\n     * @param enableWarningLogging if true, enables warning logging\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\r\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\r\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\r\n        Logging.enableDebug = enableDebugLogging;\r\n        Logging.disableWarnings = !enableWarningLogging;\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enables communication with Application Insights Live Metrics.\r\n     * @param enable if true, enables communication with the live metrics service\r\n     */\r\n    Configuration.setSendLiveMetrics = function (enable) {\r\n        if (enable === void 0) { enable = false; }\r\n        if (!exports.defaultClient) {\r\n            // Need a defaultClient so that we can add the QPS telemetry processor to it\r\n            Logging.warn(\"Live metrics client cannot be setup without the default client\");\r\n            return Configuration;\r\n        }\r\n        if (!exports.liveMetricsClient && enable) {\r\n            // No qps client exists. Create one and prepare it to be enabled at .start()\r\n            exports.liveMetricsClient = new QuickPulseClient(exports.defaultClient.config, exports.defaultClient.context, exports.defaultClient.getAuthorizationHandler);\r\n            _performanceLiveMetrics = new AutoCollectPerformance(exports.liveMetricsClient, 1000, true);\r\n            exports.liveMetricsClient.addCollector(_performanceLiveMetrics);\r\n            exports.defaultClient.quickPulseClient = exports.liveMetricsClient; // Need this so we can forward all manual tracks to live metrics via PerformanceMetricsTelemetryProcessor\r\n        }\r\n        else if (exports.liveMetricsClient) {\r\n            // qps client already exists; enable/disable it\r\n            exports.liveMetricsClient.enable(enable);\r\n        }\r\n        _isSendingLiveMetrics = enable;\r\n        return Configuration;\r\n    };\r\n    // Convenience shortcut to ApplicationInsights.start\r\n    Configuration.start = start;\r\n    return Configuration;\r\n}());\r\nexports.Configuration = Configuration;\r\n/**\r\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\r\n*/\r\nfunction dispose() {\r\n    CorrelationIdManager.w3cEnabled = true; // reset to default\r\n    exports.defaultClient = null;\r\n    _isStarted = false;\r\n    if (_console) {\r\n        _console.dispose();\r\n    }\r\n    if (_exceptions) {\r\n        _exceptions.dispose();\r\n    }\r\n    if (_performance) {\r\n        _performance.dispose();\r\n    }\r\n    if (_preAggregatedMetrics) {\r\n        _preAggregatedMetrics.dispose();\r\n    }\r\n    if (_heartbeat) {\r\n        _heartbeat.dispose();\r\n    }\r\n    if (_webSnippet) {\r\n        _webSnippet.dispose();\r\n    }\r\n    if (_nativePerformance) {\r\n        _nativePerformance.dispose();\r\n    }\r\n    if (_serverRequests) {\r\n        _serverRequests.dispose();\r\n    }\r\n    if (_clientRequests) {\r\n        _clientRequests.dispose();\r\n    }\r\n    if (exports.liveMetricsClient) {\r\n        exports.liveMetricsClient.enable(false);\r\n        _isSendingLiveMetrics = false;\r\n        exports.liveMetricsClient = undefined;\r\n    }\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=applicationinsights.js.map","'use strict';\n\nconst asyncWrap = process.binding('async_wrap');\nconst TIMERWRAP = asyncWrap.Providers.TIMERWRAP;\n\nconst patchs = {\n  'nextTick': require('./patches/next-tick.js'),\n  'promise': require('./patches/promise.js'),\n  'timers': require('./patches/timers.js')\n};\n\nconst ignoreUIDs = new Set();\n\nfunction State() {\n  this.enabled = false;\n  this.counter = 0;\n}\n\nfunction Hooks() {\n  const initFns = this.initFns = [];\n  const preFns = this.preFns = [];\n  const postFns = this.postFns = [];\n  const destroyFns = this.destroyFns = [];\n\n  this.init = function (uid, provider, parentUid, parentHandle) {\n    // Ignore TIMERWRAP, since setTimeout etc. is monkey patched\n    if (provider === TIMERWRAP) {\n      ignoreUIDs.add(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of initFns) {\n      hook(uid, this, provider, parentUid, parentHandle);\n    }\n  };\n\n  this.pre = function (uid) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of preFns) {\n      hook(uid, this);\n    }\n  };\n\n  this.post = function (uid, didThrow) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of postFns) {\n      hook(uid, this, didThrow);\n    }\n  };\n\n  this.destroy = function (uid) {\n    // Cleanup the ignore list if this uid should be ignored\n    if (ignoreUIDs.has(uid)) {\n      ignoreUIDs.delete(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of destroyFns) {\n      hook(uid);\n    }\n  };\n}\n\nHooks.prototype.add = function (hooks) {\n  if (hooks.init) this.initFns.push(hooks.init);\n  if (hooks.pre) this.preFns.push(hooks.pre);\n  if (hooks.post) this.postFns.push(hooks.post);\n  if (hooks.destroy) this.destroyFns.push(hooks.destroy);\n};\n\nfunction removeElement(array, item) {\n  const index = array.indexOf(item);\n  if (index === -1) return;\n  array.splice(index, 1);\n}\n\nHooks.prototype.remove = function (hooks) {\n  if (hooks.init) removeElement(this.initFns, hooks.init);\n  if (hooks.pre) removeElement(this.preFns, hooks.pre);\n  if (hooks.post) removeElement(this.postFns, hooks.post);\n  if (hooks.destroy) removeElement(this.destroyFns, hooks.destroy);\n};\n\nfunction AsyncHook() {\n  this._state = new State();\n  this._hooks = new Hooks();\n\n  // expose version for conflict detection\n  this.version = require('./package.json').version;\n\n  // expose the Providers map\n  this.providers = asyncWrap.Providers;\n\n  // apply patches\n  for (const key of Object.keys(patchs)) {\n    patchs[key].call(this);\n  }\n\n  // setup async wrap\n  if (process.env.hasOwnProperty('NODE_ASYNC_HOOK_WARNING')) {\n    console.warn('warning: you are using async-hook-jl which is unstable.');\n  }\n  asyncWrap.setupHooks({\n    init: this._hooks.init,\n    pre: this._hooks.pre,\n    post: this._hooks.post,\n    destroy: this._hooks.destroy\n  });\n}\nmodule.exports = AsyncHook;\n\nAsyncHook.prototype.addHooks = function (hooks) {\n  this._hooks.add(hooks);\n};\n\nAsyncHook.prototype.removeHooks = function (hooks) {\n  this._hooks.remove(hooks);\n};\n\nAsyncHook.prototype.enable = function () {\n  this._state.enabled = true;\n  asyncWrap.enable();\n};\n\nAsyncHook.prototype.disable = function () {\n  this._state.enabled = false;\n  asyncWrap.disable();\n};","'use strict';\n\nconst AsyncHook = require('./async-hook.js');\n\n// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._asyncHook) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._asyncHook.version === require('./package.json').version) {\n    module.exports = global._asyncHook;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of async-hook-jl found');\n  }\n} else {\n  const stackChain = require('stack-chain');\n\n  // Remove callSites from this module. AsyncWrap doesn't have any callSites\n  // and the hooks are expected to be completely transparent.\n  stackChain.filter.attach(function (error, frames) {\n    return frames.filter(function (callSite) {\n      const filename = callSite.getFileName();\n      // filename is not always a string, for example in case of eval it is\n      // undefined. So check if the filename is defined.\n      return !(filename && filename.slice(0, __dirname.length) === __dirname);\n    });\n  });\n\n  module.exports = global._asyncHook = new AsyncHook();\n}","'use strict';\n\nfunction NextTickWrap() {}\n\nmodule.exports = function patch() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const oldNextTick = process.nextTick;\n  process.nextTick = function () {\n    if (!state.enabled) return oldNextTick.apply(process, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback is not a function');\n    }\n\n    const handle = new NextTickWrap();\n    const uid = --state.counter;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if(didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            hooks.post.call(handle, uid, true);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      hooks.destroy.call(null, uid);\n    };\n\n    return oldNextTick.apply(process, args);\n  };\n}\n","'use strict';\n\nfunction PromiseWrap() {}\n\nmodule.exports = function patchPromise() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const Promise = global.Promise;\n\n  /* As per ECMAScript 2015, .catch must be implemented by calling .then, as\n   * such we need needn't patch .catch as well. see:\n   * http://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.catch\n   */\n  const oldThen = Promise.prototype.then;\n  Promise.prototype.then = wrappedThen;\n\n  function makeWrappedHandler(fn, handle, uid, isOnFulfilled) {\n    if ('function' !== typeof fn) {\n      return isOnFulfilled\n        ? makeUnhandledResolutionHandler(uid)\n        : makeUnhandledRejectionHandler(uid);\n    }\n\n    return function wrappedHandler() {\n      hooks.pre.call(handle, uid);\n      try {\n        return fn.apply(this, arguments);\n      } finally {\n        hooks.post.call(handle, uid, false);\n        hooks.destroy.call(null, uid);\n      }\n    };\n  }\n\n  function makeUnhandledResolutionHandler(uid) {\n    return function unhandledResolutionHandler(val) {\n      hooks.destroy.call(null, uid);\n      return val;\n    };\n  }\n\n  function makeUnhandledRejectionHandler(uid) {\n    return function unhandledRejectedHandler(val) {\n      hooks.destroy.call(null, uid);\n      throw val;\n    };\n  }\n\n  function wrappedThen(onFulfilled, onRejected) {\n    if (!state.enabled) return oldThen.call(this, onFulfilled, onRejected);\n\n    const handle = new PromiseWrap();\n    const uid = --state.counter;\n\n    hooks.init.call(handle, uid, 0, null, null);\n\n    return oldThen.call(\n      this,\n      makeWrappedHandler(onFulfilled, handle, uid, true),\n      makeWrappedHandler(onRejected, handle, uid, false)\n    );\n  }\n};\n","'use strict';\n\nconst timers = require('timers');\n\nfunction TimeoutWrap() {}\nfunction IntervalWrap() {}\nfunction ImmediateWrap() {}\n\nconst timeoutMap = new Map();\nconst intervalMap = new Map();\nconst ImmediateMap = new Map();\n\nlet activeCallback = null;\nlet clearedInCallback = false;\n\nmodule.exports = function patch() {\n  patchTimer(this._hooks, this._state, 'setTimeout', 'clearTimeout', TimeoutWrap, timeoutMap, true);\n  patchTimer(this._hooks, this._state, 'setInterval', 'clearInterval', IntervalWrap, intervalMap, false);\n  patchTimer(this._hooks, this._state, 'setImmediate', 'clearImmediate', ImmediateWrap, ImmediateMap, true);\n\n  global.setTimeout = timers.setTimeout;\n  global.setInterval = timers.setInterval;\n  global.setImmediate = timers.setImmediate;\n\n  global.clearTimeout = timers.clearTimeout;\n  global.clearInterval = timers.clearInterval;\n  global.clearImmediate = timers.clearImmediate;\n};\n\nfunction patchTimer(hooks, state, setFn, clearFn, Handle, timerMap, singleCall) {\n  const oldSetFn = timers[setFn];\n  const oldClearFn = timers[clearFn];\n\n  // overwrite set[Timeout]\n  timers[setFn] = function () {\n    if (!state.enabled) return oldSetFn.apply(timers, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('\"callback\" argument must be a function');\n    }\n\n    const handle = new Handle();\n    const uid = --state.counter;\n    let timerId = undefined;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      activeCallback = timerId;\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if (didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            // call the post hook\n            hooks.post.call(handle, uid, true);\n            // setInterval won't continue\n            timerMap.delete(timerId);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      activeCallback = null;\n\n      // call the destroy hook if the callback will only be called once\n      if (singleCall || clearedInCallback) {\n        clearedInCallback = false;\n        timerMap.delete(timerId);\n        hooks.destroy.call(null, uid);\n      }\n    };\n\n    timerId = oldSetFn.apply(timers, args);\n    // Bind the timerId and uid for later use, in case the clear* function is\n    // called.\n    timerMap.set(timerId, uid);\n\n    return timerId;\n  };\n\n  // overwrite clear[Timeout]\n  timers[clearFn] = function (timerId) {\n    // If clear* was called within the timer callback, then delay the destroy\n    // event to after the post event has been called.\n    if (activeCallback === timerId && timerId !== null) {\n      clearedInCallback = true;\n    }\n    // clear should call the destroy hook. Note if timerId doesn't exists\n    // it is because asyncWrap wasn't enabled at the time.\n    else if (timerMap.has(timerId)) {\n      const uid = timerMap.get(timerId);\n      timerMap.delete(timerId);\n      hooks.destroy.call(null, uid);\n    }\n\n    oldClearFn.apply(timers, arguments);\n  };\n}\n","'use strict';\n\nmodule.exports = (Promise, ensureAslWrapper) => {\n  // Updates to this class should also be applied to the the ES3 version\n  // in index.js.\n  return class WrappedPromise extends Promise {\n    constructor(executor) {\n      var context, args;\n      super(wrappedExecutor);\n      var promise = this;\n\n      try {\n        executor.apply(context, args);\n      } catch (err) {\n        args[1](err);\n      }\n\n      return promise;\n      function wrappedExecutor(resolve, reject) {\n        context = this;\n        args = [wrappedResolve, wrappedReject];\n\n        // These wrappers create a function that can be passed a function and an argument to\n        // call as a continuation from the resolve or reject.\n        function wrappedResolve(val) {\n          ensureAslWrapper(promise, false);\n          return resolve(val);\n        }\n\n        function wrappedReject(val) {\n          ensureAslWrapper(promise, false);\n          return reject(val);\n        }\n      }\n    }\n  }\n};\n","var wrap = require('shimmer').wrap;\n\n/*\n *\n * CONSTANTS\n *\n */\nvar HAS_CREATE_AL = 1 << 0;\nvar HAS_BEFORE_AL = 1 << 1;\nvar HAS_AFTER_AL = 1 << 2;\nvar HAS_ERROR_AL = 1 << 3;\n\n/**\n * There is one list of currently active listeners that is mutated in place by\n * addAsyncListener and removeAsyncListener. This complicates error-handling,\n * for reasons that are discussed below.\n */\nvar listeners = [];\n\n/**\n * There can be multiple listeners with the same properties, so disambiguate\n * them by assigning them an ID at creation time.\n */\nvar uid = 0;\n\n/**\n * Ensure that errors coming from within listeners are handed off to domains,\n * process._fatalException, or uncaughtException without being treated like\n * user errors.\n */\nvar inAsyncTick = false;\n\n/**\n * Because asynchronous contexts can be nested, and errors can come from anywhere\n * in the stack, a little extra work is required to keep track of where in the\n * nesting we are. Because JS arrays are frequently mutated in place\n */\nvar listenerStack = [];\n\n/**\n * The error handler on a listener can capture errors thrown during synchronous\n * execution immediately after the listener is added. To capture both\n * synchronous and asynchronous errors, the error handler just uses the\n * \"global\" list of active listeners, and the rest of the code ensures that the\n * listener list is correct by using a stack of listener lists during\n * asynchronous execution.\n */\nvar asyncCatcher;\n\n/**\n * The guts of the system -- called each time an asynchronous event happens\n * while one or more listeners are active.\n */\nvar asyncWrap;\n\n/**\n * Simple helper function that's probably faster than using Array\n * filter methods and can be inlined.\n */\nfunction union(dest, added) {\n  var destLength = dest.length;\n  var addedLength = added.length;\n  var returned = [];\n\n  if (destLength === 0 && addedLength === 0) return returned;\n\n  for (var j  = 0; j < destLength; j++) returned[j] = dest[j];\n\n  if (addedLength === 0) return returned;\n\n  for (var i = 0; i < addedLength; i++) {\n    var missing = true;\n    for (j = 0; j < destLength; j++) {\n      if (dest[j].uid === added[i].uid) {\n        missing = false;\n        break;\n      }\n    }\n    if (missing) returned.push(added[i]);\n  }\n\n  return returned;\n}\n\n/*\n * For performance, split error-handlers and asyncCatcher up into two separate\n * code paths.\n */\n\n// 0.9+\nif (process._fatalException) {\n  /**\n   * Error handlers on listeners can throw, the catcher needs to be able to\n   * discriminate between exceptions thrown by user code, and exceptions coming\n   * from within the catcher itself. Use a global to keep track of which state\n   * the catcher is currently in.\n   */\n  var inErrorTick = false;\n\n  /**\n   * Throwing always happens synchronously. If the current array of values for\n   * the current list of asyncListeners is put in a module-scoped variable right\n   * before a call that can throw, it will always be correct when the error\n   * handlers are run.\n   */\n  var errorValues;\n\n  asyncCatcher = function asyncCatcher(er) {\n    var length = listeners.length;\n    if (inErrorTick || length === 0) return false;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    inErrorTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n\n      var value = errorValues && errorValues[listener.uid];\n      handled = listener.error(value, er) || handled;\n    }\n    inErrorTick = false;\n\n    /* Test whether there are any listener arrays on the stack. In the case of\n     * synchronous throws when the listener is active, there may have been\n     * none pushed yet.\n     */\n    if (listenerStack.length > 0) listeners = listenerStack.pop();\n    errorValues = undefined;\n\n    return handled && !inAsyncTick;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      // put the current values where the catcher can see them\n      errorValues = values;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned = original.apply(this, arguments);\n\n      /*\n       * after handlers (not run if original throws)\n       */\n      inAsyncTick = true;\n      for (i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_AFTER_AL) > 0) {\n          list[i].after(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // back to the previous listener list on the stack\n      listeners = listenerStack.pop();\n      errorValues = undefined;\n\n      return returned;\n    };\n  };\n\n  wrap(process, '_fatalException', function (_fatalException) {\n    return function _asyncFatalException(er) {\n      return asyncCatcher(er) || _fatalException(er);\n    };\n  });\n}\n// 0.8 and below\nelse {\n  /**\n   * If an error handler in asyncWrap throws, the process must die. Under 0.8\n   * and earlier the only way to put a bullet through the head of the process\n   * is to rethrow from inside the exception handler, so rethrow and set\n   * errorThrew to tell the uncaughtHandler what to do.\n   */\n  var errorThrew = false;\n\n  /**\n   * Under Node 0.8, this handler *only* handles synchronously thrown errors.\n   * This simplifies it, which almost but not quite makes up for the hit taken\n   * by putting everything in a try-catch.\n   */\n  asyncCatcher = function uncaughtCatcher(er) {\n    // going down hard\n    if (errorThrew) throw er;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    var length = listeners.length;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n      handled = listener.error(null, er) || handled;\n    }\n\n    /* Rethrow if one of the before / after handlers fire, which will bring the\n     * process down immediately.\n     */\n    if (!handled && inAsyncTick) throw er;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      /*jshint maxdepth:4*/\n\n      // after() handlers don't run if threw\n      var threw = false;\n\n      // ...unless the error is handled\n      var handled = false;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned;\n      try {\n        returned = original.apply(this, arguments);\n      }\n      catch (er) {\n        threw = true;\n        for (var i = 0; i < length; ++i) {\n          if ((listeners[i].flags & HAS_ERROR_AL) == 0) continue;\n          try {\n            handled = listeners[i].error(values[list[i].uid], er) || handled;\n          }\n          catch (x) {\n            errorThrew = true;\n            throw x;\n          }\n        }\n\n        if (!handled) {\n          // having an uncaughtException handler here alters crash semantics\n          process.removeListener('uncaughtException', asyncCatcher);\n          process._originalNextTick(function () {\n            process.addListener('uncaughtException', asyncCatcher);\n          });\n\n          throw er;\n        }\n      }\n      finally {\n        /*\n         * after handlers (not run if original throws)\n         */\n        if (!threw || handled) {\n          inAsyncTick = true;\n          for (i = 0; i < length; ++i) {\n            if ((list[i].flags & HAS_AFTER_AL) > 0) {\n              list[i].after(this, values[list[i].uid]);\n            }\n          }\n          inAsyncTick = false;\n        }\n\n        // back to the previous listener list on the stack\n        listeners = listenerStack.pop();\n      }\n\n\n      return returned;\n    };\n  };\n\n  // will be the first to fire if async-listener is the first module loaded\n  process.addListener('uncaughtException', asyncCatcher);\n}\n\n// for performance in the case where there are no handlers, just the listener\nfunction simpleWrap(original, list, length) {\n  inAsyncTick = true;\n  for (var i = 0; i < length; ++i) {\n    var listener = list[i];\n    if (listener.create) listener.create(listener.data);\n  }\n  inAsyncTick = false;\n\n  // still need to make sure nested async calls are made in the context\n  // of the listeners active at their creation\n  return function () {\n    listenerStack.push(listeners);\n    listeners = union(list, listeners);\n\n    var returned = original.apply(this, arguments);\n\n    listeners = listenerStack.pop();\n\n    return returned;\n  };\n}\n\n/**\n * Called each time an asynchronous function that's been monkeypatched in\n * index.js is called. If there are no listeners, return the function\n * unwrapped.  If there are any asyncListeners and any of them have callbacks,\n * pass them off to asyncWrap for later use, otherwise just call the listener.\n */\nfunction wrapCallback(original) {\n  var length = listeners.length;\n\n  // no context to capture, so avoid closure creation\n  if (length === 0) return original;\n\n  // capture the active listeners as of when the wrapped function was called\n  var list = listeners.slice();\n\n  for (var i = 0; i < length; ++i) {\n    if (list[i].flags > 0) return asyncWrap(original, list, length);\n  }\n\n  return simpleWrap(original, list, length);\n}\n\nfunction AsyncListener(callbacks, data) {\n  if (typeof callbacks.create === 'function') {\n    this.create = callbacks.create;\n    this.flags |= HAS_CREATE_AL;\n  }\n\n  if (typeof callbacks.before === 'function') {\n    this.before = callbacks.before;\n    this.flags |= HAS_BEFORE_AL;\n  }\n\n  if (typeof callbacks.after === 'function') {\n    this.after = callbacks.after;\n    this.flags |= HAS_AFTER_AL;\n  }\n\n  if (typeof callbacks.error === 'function') {\n    this.error = callbacks.error;\n    this.flags |= HAS_ERROR_AL;\n  }\n\n  this.uid = ++uid;\n  this.data = data === undefined ? null : data;\n}\nAsyncListener.prototype.create = undefined;\nAsyncListener.prototype.before = undefined;\nAsyncListener.prototype.after  = undefined;\nAsyncListener.prototype.error  = undefined;\nAsyncListener.prototype.data   = undefined;\nAsyncListener.prototype.uid    = 0;\nAsyncListener.prototype.flags  = 0;\n\nfunction createAsyncListener(callbacks, data) {\n  if (typeof callbacks !== 'object' || !callbacks) {\n    throw new TypeError('callbacks argument must be an object');\n  }\n\n  if (callbacks instanceof AsyncListener) {\n    return callbacks;\n  }\n  else {\n    return new AsyncListener(callbacks, data);\n  }\n}\n\nfunction addAsyncListener(callbacks, data) {\n  var listener;\n  if (!(callbacks instanceof AsyncListener)) {\n    listener = createAsyncListener(callbacks, data);\n  }\n  else {\n    listener = callbacks;\n  }\n\n  // Make sure the listener isn't already in the list.\n  var registered = false;\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      registered = true;\n      break;\n    }\n  }\n\n  if (!registered) listeners.push(listener);\n\n  return listener;\n}\n\nfunction removeAsyncListener(listener) {\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      listeners.splice(i, 1);\n      break;\n    }\n  }\n}\n\nprocess.createAsyncListener = createAsyncListener;\nprocess.addAsyncListener    = addAsyncListener;\nprocess.removeAsyncListener = removeAsyncListener;\n\nmodule.exports = wrapCallback;\n","'use strict';\n\nif (process.addAsyncListener) throw new Error(\"Don't require polyfill unless needed\");\n\nvar shimmer      = require('shimmer')\n  , semver       = require('semver')\n  , wrap         = shimmer.wrap\n  , massWrap     = shimmer.massWrap\n  , wrapCallback = require('./glue.js')\n  , util         = require('util')\n  ;\n\nvar v6plus = semver.gte(process.version, '6.0.0');\nvar v7plus = semver.gte(process.version, '7.0.0');\nvar v8plus = semver.gte(process.version, '8.0.0');\nvar v11plus = semver.gte(process.version, '11.0.0');\n\nvar net = require('net');\n\n// From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\nif (v7plus && !net._normalizeArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2017/03/09\n  net._normalizeArgs = function (args) {\n    if (args.length === 0) {\n      return [{}, null];\n    }\n\n    var arg0 = args[0];\n    var options = {};\n    if (typeof arg0 === 'object' && arg0 !== null) {\n      // (options[...][, cb])\n      options = arg0;\n    } else if (isPipeName(arg0)) {\n      // (path[...][, cb])\n      options.path = arg0;\n    } else {\n      // ([port][, host][...][, cb])\n      options.port = arg0;\n      if (args.length > 1 && typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    if (typeof cb !== 'function')\n      return [options, null];\n    else\n      return [options, cb];\n  }\n} else if (!v7plus && !net._normalizeConnectArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2013/10/30\n  net._normalizeConnectArgs = function (args) {\n    var options = {};\n\n    function toNumber(x) { return (x = Number(x)) >= 0 ? x : false; }\n\n    if (typeof args[0] === 'object' && args[0] !== null) {\n      // connect(options, [cb])\n      options = args[0];\n    }\n    else if (typeof args[0] === 'string' && toNumber(args[0]) === false) {\n      // connect(path, [cb]);\n      options.path = args[0];\n    }\n    else {\n      // connect(port, [host], [cb])\n      options.port = args[0];\n      if (typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    return typeof cb === 'function' ? [options, cb] : [options];\n  };\n}\n\n// In https://github.com/nodejs/node/pull/11796 `_listen2` was renamed\n// `_setUpListenHandle`. It's still aliased as `_listen2`, and currently the\n// Node internals still call the alias - but who knows for how long. So better\n// make sure we use the new name instead if available.\nif ('_setUpListenHandle' in net.Server.prototype) {\n  wrap(net.Server.prototype, '_setUpListenHandle', wrapSetUpListenHandle);\n} else {\n  wrap(net.Server.prototype, '_listen2', wrapSetUpListenHandle);\n}\n\nfunction wrapSetUpListenHandle(original) {\n  return function () {\n    this.on('connection', function (socket) {\n      if (socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n      }\n    });\n\n    try {\n      return original.apply(this, arguments);\n    }\n    finally {\n      // the handle will only not be set in cases where there has been an error\n      if (this._handle && this._handle.onconnection) {\n        this._handle.onconnection = wrapCallback(this._handle.onconnection);\n      }\n    }\n  };\n}\n\nfunction patchOnRead(ctx) {\n  if (ctx && ctx._handle) {\n    var handle = ctx._handle;\n    if (!handle._originalOnread) {\n      handle._originalOnread = handle.onread;\n    }\n    handle.onread = wrapCallback(handle._originalOnread);\n  }\n}\n\nwrap(net.Socket.prototype, 'connect', function (original) {\n  return function () {\n    var args;\n    // Node core uses an internal Symbol here to guard against the edge-case\n    // where the user accidentally passes in an array. As we don't have access\n    // to this Symbol we resort to this hack where we just detect if there is a\n    // symbol or not. Checking for the number of Symbols is by no means a fool\n    // proof solution, but it catches the most basic cases.\n    if (v8plus &&\n        Array.isArray(arguments[0]) &&\n        Object.getOwnPropertySymbols(arguments[0]).length > 0) {\n      // already normalized\n      args = arguments[0];\n    } else {\n      // From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\n      args = v7plus\n        ? net._normalizeArgs(arguments)\n        : net._normalizeConnectArgs(arguments);\n    }\n    if (args[1]) args[1] = wrapCallback(args[1]);\n    var result = original.apply(this, args);\n    patchOnRead(this);\n    return result;\n  };\n});\n\nvar http = require('http');\n\n// NOTE: A rewrite occurred in 0.11 that changed the addRequest signature\n// from (req, host, port, localAddress) to (req, options)\n// Here, I use the longer signature to maintain 0.10 support, even though\n// the rest of the arguments aren't actually used\nwrap(http.Agent.prototype, 'addRequest', function (original) {\n  return function (req) {\n    var onSocket = req.onSocket;\n    req.onSocket = wrapCallback(function (socket) {\n      patchOnRead(socket);\n      return onSocket.apply(this, arguments);\n    });\n    return original.apply(this, arguments);\n  };\n});\n\nvar childProcess = require('child_process');\n\nfunction wrapChildProcess(child) {\n  if (Array.isArray(child.stdio)) {\n    child.stdio.forEach(function (socket) {\n      if (socket && socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n        wrap(socket._handle, 'close', activatorFirst);\n      }\n    });\n  }\n\n  if (child._handle) {\n    child._handle.onexit = wrapCallback(child._handle.onexit);\n  }\n}\n\n// iojs v2.0.0+\nif (childProcess.ChildProcess) {\n  wrap(childProcess.ChildProcess.prototype, 'spawn', function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(this);\n      return result;\n    };\n  });\n} else {\n  massWrap(childProcess, [\n    'execFile', // exec is implemented in terms of execFile\n    'fork',\n    'spawn'\n  ], function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(result);\n      return result;\n    };\n  });\n}\n\n// need unwrapped nextTick for use within < 0.9 async error handling\nif (!process._fatalException) {\n  process._originalNextTick = process.nextTick;\n}\n\nvar processors = [];\nif (process._nextDomainTick) processors.push('_nextDomainTick');\nif (process._tickDomainCallback) processors.push('_tickDomainCallback');\n\nmassWrap(\n  process,\n  processors,\n  activator\n);\nwrap(process, 'nextTick', activatorFirst);\n\nvar asynchronizers = [\n  'setTimeout',\n  'setInterval'\n];\nif (global.setImmediate) asynchronizers.push('setImmediate');\n\nvar timers = require('timers');\nvar patchGlobalTimers = global.setTimeout === timers.setTimeout;\n\nmassWrap(\n  timers,\n  asynchronizers,\n  activatorFirst\n);\n\nif (patchGlobalTimers) {\n  massWrap(\n    global,\n    asynchronizers,\n    activatorFirst\n  );\n}\n\nvar dns = require('dns');\nmassWrap(\n  dns,\n  [\n    'lookup',\n    'resolve',\n    'resolve4',\n    'resolve6',\n    'resolveCname',\n    'resolveMx',\n    'resolveNs',\n    'resolveTxt',\n    'resolveSrv',\n    'reverse'\n  ],\n  activator\n);\n\nif (dns.resolveNaptr) wrap(dns, 'resolveNaptr', activator);\n\nvar fs = require('fs');\nmassWrap(\n  fs,\n  [\n    'watch',\n    'rename',\n    'truncate',\n    'chown',\n    'fchown',\n    'chmod',\n    'fchmod',\n    'stat',\n    'lstat',\n    'fstat',\n    'link',\n    'symlink',\n    'readlink',\n    'realpath',\n    'unlink',\n    'rmdir',\n    'mkdir',\n    'readdir',\n    'close',\n    'open',\n    'utimes',\n    'futimes',\n    'fsync',\n    'write',\n    'read',\n    'readFile',\n    'writeFile',\n    'appendFile',\n    'watchFile',\n    'unwatchFile',\n    \"exists\",\n  ],\n  activator\n);\n\n// only wrap lchown and lchmod on systems that have them.\nif (fs.lchown) wrap(fs, 'lchown', activator);\nif (fs.lchmod) wrap(fs, 'lchmod', activator);\n\n// only wrap ftruncate in versions of node that have it\nif (fs.ftruncate) wrap(fs, 'ftruncate', activator);\n\n// Wrap zlib streams\nvar zlib;\ntry { zlib = require('zlib'); } catch (err) { }\nif (zlib && zlib.Deflate && zlib.Deflate.prototype) {\n  var proto = Object.getPrototypeOf(zlib.Deflate.prototype);\n  if (proto._transform) {\n    // streams2\n    wrap(proto, \"_transform\", activator);\n  }\n  else if (proto.write && proto.flush && proto.end) {\n    // plain ol' streams\n    massWrap(\n      proto,\n      [\n        'write',\n        'flush',\n        'end'\n      ],\n      activator\n    );\n  }\n}\n\n// Wrap Crypto\nvar crypto;\ntry { crypto = require('crypto'); } catch (err) { }\nif (crypto) {\n\n  var toWrap = [\n      'pbkdf2',\n      'randomBytes',\n  ];\n  if (!v11plus) {\n    toWrap.push('pseudoRandomBytes');\n  }\n\n  massWrap(crypto, toWrap, activator);\n}\n\n// It is unlikely that any userspace promise implementations have a native\n// implementation of both Promise and Promise.toString.\nvar instrumentPromise = !!global.Promise &&\n    Promise.toString() === 'function Promise() { [native code] }' &&\n    Promise.toString.toString() === 'function toString() { [native code] }';\n\n// Check that global Promise is native\nif (instrumentPromise) {\n  // shoult not use any methods that have already been wrapped\n  var promiseListener = process.addAsyncListener({\n    create: function create() {\n      instrumentPromise = false;\n    }\n  });\n\n  // should not resolve synchronously\n  global.Promise.resolve(true).then(function notSync() {\n    instrumentPromise = false;\n  });\n\n  process.removeAsyncListener(promiseListener);\n}\n\n/*\n * Native promises use the microtask queue to make all callbacks run\n * asynchronously to avoid Zalgo issues. Since the microtask queue is not\n * exposed externally, promises need to be modified in a fairly invasive and\n * complex way.\n *\n * The async boundary in promises that must be patched is between the\n * fulfillment of the promise and the execution of any callback that is waiting\n * for that fulfillment to happen. This means that we need to trigger a create\n * when resolve or reject is called and trigger before, after and error handlers\n * around the callback execution. There may be multiple callbacks for each\n * fulfilled promise, so handlers will behave similar to setInterval where\n * there may be multiple before after and error calls for each create call.\n *\n * async-listener monkeypatching has one basic entry point: `wrapCallback`.\n * `wrapCallback` should be called when create should be triggered and be\n * passed a function to wrap, which will execute the body of the async work.\n * The resolve and reject calls can be modified fairly easily to call\n * `wrapCallback`, but at the time of resolve and reject all the work to be done\n * on fulfillment may not be defined, since a call to then, chain or fetch can\n * be made even after the promise has been fulfilled. To get around this, we\n * create a placeholder function which will call a function passed into it,\n * since the call to the main work is being made from within the wrapped\n * function, async-listener will work correctly.\n *\n * There is another complication with monkeypatching Promises. Calls to then,\n * chain and catch each create new Promises that are fulfilled internally in\n * different ways depending on the return value of the callback. When the\n * callback return a Promise, the new Promise is resolved asynchronously after\n * the returned Promise has been also been resolved. When something other than\n * a promise is resolved the resolve call for the new Promise is put in the\n * microtask queue and asynchronously resolved.\n *\n * Then must be wrapped so that its returned promise has a wrapper that can be\n * used to invoke further continuations. This wrapper cannot be created until\n * after the callback has run, since the callback may return either a promise\n * or another value. Fortunately we already have a wrapper function around the\n * callback we can use (the wrapper created by resolve or reject).\n *\n * By adding an additional argument to this wrapper, we can pass in the\n * returned promise so it can have its own wrapper appended. the wrapper\n * function can the call the callback, and take action based on the return\n * value. If a promise is returned, the new Promise can proxy the returned\n * Promise's wrapper (this wrapper may not exist yet, but will by the time the\n * wrapper needs to be invoked). Otherwise, a new wrapper can be create the\n * same way as in resolve and reject. Since this wrapper is created\n * synchronously within another wrapper, it will properly appear as a\n * continuation from within the callback.\n */\n\nif (instrumentPromise) {\n  wrapPromise();\n}\n\nfunction wrapPromise() {\n  var Promise = global.Promise;\n\n  // Updates to this class should also be applied to the the ES6 version\n  // in es6-wrapped-promise.js.\n  function wrappedPromise(executor) {\n    if (!(this instanceof wrappedPromise)) {\n      return Promise(executor);\n    }\n\n    if (typeof executor !== 'function') {\n      return new Promise(executor);\n    }\n\n    var context, args;\n    var promise = new Promise(wrappedExecutor);\n    promise.__proto__ = wrappedPromise.prototype;\n\n    try {\n      executor.apply(context, args);\n    } catch (err) {\n      args[1](err);\n    }\n\n    return promise;\n\n    function wrappedExecutor(resolve, reject) {\n      context = this;\n      args = [wrappedResolve, wrappedReject];\n\n      // These wrappers create a function that can be passed a function and an argument to\n      // call as a continuation from the resolve or reject.\n      function wrappedResolve(val) {\n        ensureAslWrapper(promise, false);\n        return resolve(val);\n      }\n\n      function wrappedReject(val) {\n        ensureAslWrapper(promise, false);\n        return reject(val);\n      }\n    }\n  }\n\n  util.inherits(wrappedPromise, Promise);\n\n  wrap(Promise.prototype, 'then', wrapThen);\n  // Node.js <v7 only, alias for .then\n  if (Promise.prototype.chain) {\n    wrap(Promise.prototype, 'chain', wrapThen);\n  }\n\n  if (v6plus) {\n    global.Promise = require('./es6-wrapped-promise.js')(Promise, ensureAslWrapper);\n  } else {\n    var PromiseFunctions = [\n      'all',\n      'race',\n      'reject',\n      'resolve',\n      'accept',  // Node.js <v7 only\n      'defer'    // Node.js <v7 only\n    ];\n\n    PromiseFunctions.forEach(function(key) {\n      // don't break `in` by creating a key for undefined entries\n      if (typeof Promise[key] === 'function') {\n        wrappedPromise[key] = Promise[key];\n      }\n    });\n    global.Promise = wrappedPromise\n  }\n\n  function ensureAslWrapper(promise, overwrite) {\n    if (!promise.__asl_wrapper || overwrite) {\n      promise.__asl_wrapper = wrapCallback(propagateAslWrapper);\n    }\n  }\n\n  function propagateAslWrapper(ctx, fn, result, next) {\n    var nextResult;\n    try {\n      nextResult = fn.call(ctx, result);\n      return {returnVal: nextResult, error: false}\n    } catch (err) {\n      return {errorVal: err, error: true}\n    } finally {\n      // Wrap any resulting futures as continuations.\n      if (nextResult instanceof Promise) {\n        next.__asl_wrapper = function proxyWrapper() {\n          var aslWrapper = nextResult.__asl_wrapper || propagateAslWrapper;\n          return aslWrapper.apply(this, arguments);\n        }\n      } else {\n        ensureAslWrapper(next, true);\n      }\n    }\n  }\n\n  function wrapThen(original) {\n    return function wrappedThen() {\n      var promise = this;\n      var next = original.apply(promise, Array.prototype.map.call(arguments, bind));\n\n      next.__asl_wrapper = function proxyWrapper(ctx, fn, val, last) {\n        if (promise.__asl_wrapper) {\n          promise.__asl_wrapper(ctx, function () {}, null, next);\n          return next.__asl_wrapper(ctx, fn, val, last);\n        }\n        return propagateAslWrapper(ctx, fn, val, last);\n      }\n\n      return next;\n\n      // wrap callbacks (success, error) so that the callbacks will be called as a\n      // continuations of the resolve or reject call using the __asl_wrapper created above.\n      function bind(fn) {\n        if (typeof fn !== 'function') return fn;\n        return wrapCallback(function (val) {\n          var result = (promise.__asl_wrapper || propagateAslWrapper)(this, fn, val, next);\n          if (result.error) {\n            throw result.errorVal\n          } else {\n            return result.returnVal\n          }\n        });\n      }\n    }\n  }\n}\n\n// Shim activator for functions that have callback last\nfunction activator(fn) {\n  var fallback = function () {\n    var args;\n    var cbIdx = arguments.length - 1;\n    if (typeof arguments[cbIdx] === \"function\") {\n      args = Array(arguments.length)\n      for (var i = 0; i < arguments.length - 1; i++) {\n        args[i] = arguments[i];\n      }\n      args[cbIdx] = wrapCallback(arguments[cbIdx]);\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (a, cb) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, cb);\n      };\n    case 3:\n      return function (a, b, cb) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, cb);\n      };\n    case 4:\n      return function (a, b, c, cb) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, cb);\n      };\n    case 5:\n      return function (a, b, c, d, cb) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, cb);\n      };\n    case 6:\n      return function (a, b, c, d, e, cb) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, e, cb);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// Shim activator for functions that have callback first\nfunction activatorFirst(fn) {\n  var fallback = function () {\n    var args;\n    if (typeof arguments[0] === \"function\") {\n      args = Array(arguments.length)\n      args[0] = wrapCallback(arguments[0]);\n      for (var i = 1; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (cb, a) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a);\n      };\n    case 3:\n      return function (cb, a, b) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b);\n      };\n    case 4:\n      return function (cb, a, b, c) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c);\n      };\n    case 5:\n      return function (cb, a, b, c, d) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d);\n      };\n    case 6:\n      return function (cb, a, b, c, d, e) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d, e);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// taken from node master on 2017/03/09\nfunction toNumber(x) {\n  return (x = Number(x)) >= 0 ? x : false;\n}\n\n// taken from node master on 2017/03/09\nfunction isPipeName(s) {\n  return typeof s === 'string' && toNumber(s) === false;\n}\n","module.exports =\n{\n  parallel      : require('./parallel.js'),\n  serial        : require('./serial.js'),\n  serialOrdered : require('./serialOrdered.js')\n};\n","// API\nmodule.exports = abort;\n\n/**\n * Aborts leftover active jobs\n *\n * @param {object} state - current state object\n */\nfunction abort(state)\n{\n  Object.keys(state.jobs).forEach(clean.bind(state));\n\n  // reset leftover jobs\n  state.jobs = {};\n}\n\n/**\n * Cleans up leftover job by invoking abort function for the provided job id\n *\n * @this  state\n * @param {string|number} key - job id to abort\n */\nfunction clean(key)\n{\n  if (typeof this.jobs[key] == 'function')\n  {\n    this.jobs[key]();\n  }\n}\n","var defer = require('./defer.js');\n\n// API\nmodule.exports = async;\n\n/**\n * Runs provided callback asynchronously\n * even if callback itself is not\n *\n * @param   {function} callback - callback to invoke\n * @returns {function} - augmented callback\n */\nfunction async(callback)\n{\n  var isAsync = false;\n\n  // check if async happened\n  defer(function() { isAsync = true; });\n\n  return function async_callback(err, result)\n  {\n    if (isAsync)\n    {\n      callback(err, result);\n    }\n    else\n    {\n      defer(function nextTick_callback()\n      {\n        callback(err, result);\n      });\n    }\n  };\n}\n","module.exports = defer;\n\n/**\n * Runs provided function on next iteration of the event loop\n *\n * @param {function} fn - function to run\n */\nfunction defer(fn)\n{\n  var nextTick = typeof setImmediate == 'function'\n    ? setImmediate\n    : (\n      typeof process == 'object' && typeof process.nextTick == 'function'\n      ? process.nextTick\n      : null\n    );\n\n  if (nextTick)\n  {\n    nextTick(fn);\n  }\n  else\n  {\n    setTimeout(fn, 0);\n  }\n}\n","var async = require('./async.js')\n  , abort = require('./abort.js')\n  ;\n\n// API\nmodule.exports = iterate;\n\n/**\n * Iterates over each job object\n *\n * @param {array|object} list - array or object (named list) to iterate over\n * @param {function} iterator - iterator to run\n * @param {object} state - current job status\n * @param {function} callback - invoked when all elements processed\n */\nfunction iterate(list, iterator, state, callback)\n{\n  // store current index\n  var key = state['keyedList'] ? state['keyedList'][state.index] : state.index;\n\n  state.jobs[key] = runJob(iterator, key, list[key], function(error, output)\n  {\n    // don't repeat yourself\n    // skip secondary callbacks\n    if (!(key in state.jobs))\n    {\n      return;\n    }\n\n    // clean up jobs\n    delete state.jobs[key];\n\n    if (error)\n    {\n      // don't process rest of the results\n      // stop still active jobs\n      // and reset the list\n      abort(state);\n    }\n    else\n    {\n      state.results[key] = output;\n    }\n\n    // return salvaged results\n    callback(error, state.results);\n  });\n}\n\n/**\n * Runs iterator over provided job element\n *\n * @param   {function} iterator - iterator to invoke\n * @param   {string|number} key - key/index of the element in the list of jobs\n * @param   {mixed} item - job description\n * @param   {function} callback - invoked after iterator is done with the job\n * @returns {function|mixed} - job abort function or something else\n */\nfunction runJob(iterator, key, item, callback)\n{\n  var aborter;\n\n  // allow shortcut if iterator expects only two arguments\n  if (iterator.length == 2)\n  {\n    aborter = iterator(item, async(callback));\n  }\n  // otherwise go with full three arguments\n  else\n  {\n    aborter = iterator(item, key, async(callback));\n  }\n\n  return aborter;\n}\n","// API\nmodule.exports = state;\n\n/**\n * Creates initial state object\n * for iteration over list\n *\n * @param   {array|object} list - list to iterate over\n * @param   {function|null} sortMethod - function to use for keys sort,\n *                                     or `null` to keep them as is\n * @returns {object} - initial state object\n */\nfunction state(list, sortMethod)\n{\n  var isNamedList = !Array.isArray(list)\n    , initState =\n    {\n      index    : 0,\n      keyedList: isNamedList || sortMethod ? Object.keys(list) : null,\n      jobs     : {},\n      results  : isNamedList ? {} : [],\n      size     : isNamedList ? Object.keys(list).length : list.length\n    }\n    ;\n\n  if (sortMethod)\n  {\n    // sort array keys based on it's values\n    // sort object's keys just on own merit\n    initState.keyedList.sort(isNamedList ? sortMethod : function(a, b)\n    {\n      return sortMethod(list[a], list[b]);\n    });\n  }\n\n  return initState;\n}\n","var abort = require('./abort.js')\n  , async = require('./async.js')\n  ;\n\n// API\nmodule.exports = terminator;\n\n/**\n * Terminates jobs in the attached state context\n *\n * @this  AsyncKitState#\n * @param {function} callback - final callback to invoke after termination\n */\nfunction terminator(callback)\n{\n  if (!Object.keys(this.jobs).length)\n  {\n    return;\n  }\n\n  // fast forward iteration index\n  this.index = this.size;\n\n  // abort jobs\n  abort(this);\n\n  // send back results we have so far\n  async(callback)(null, this.results);\n}\n","var iterate    = require('./lib/iterate.js')\n  , initState  = require('./lib/state.js')\n  , terminator = require('./lib/terminator.js')\n  ;\n\n// Public API\nmodule.exports = parallel;\n\n/**\n * Runs iterator over provided array elements in parallel\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction parallel(list, iterator, callback)\n{\n  var state = initState(list);\n\n  while (state.index < (state['keyedList'] || list).length)\n  {\n    iterate(list, iterator, state, function(error, result)\n    {\n      if (error)\n      {\n        callback(error, result);\n        return;\n      }\n\n      // looks like it's the last one\n      if (Object.keys(state.jobs).length === 0)\n      {\n        callback(null, state.results);\n        return;\n      }\n    });\n\n    state.index++;\n  }\n\n  return terminator.bind(state, callback);\n}\n","var serialOrdered = require('./serialOrdered.js');\n\n// Public API\nmodule.exports = serial;\n\n/**\n * Runs iterator over provided array elements in series\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction serial(list, iterator, callback)\n{\n  return serialOrdered(list, iterator, null, callback);\n}\n","var iterate    = require('./lib/iterate.js')\n  , initState  = require('./lib/state.js')\n  , terminator = require('./lib/terminator.js')\n  ;\n\n// Public API\nmodule.exports = serialOrdered;\n// sorting helpers\nmodule.exports.ascending  = ascending;\nmodule.exports.descending = descending;\n\n/**\n * Runs iterator over provided sorted array elements in series\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} sortMethod - custom sort function\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction serialOrdered(list, iterator, sortMethod, callback)\n{\n  var state = initState(list, sortMethod);\n\n  iterate(list, iterator, state, function iteratorHandler(error, result)\n  {\n    if (error)\n    {\n      callback(error, result);\n      return;\n    }\n\n    state.index++;\n\n    // are we there yet?\n    if (state.index < (state['keyedList'] || list).length)\n    {\n      iterate(list, iterator, state, iteratorHandler);\n      return;\n    }\n\n    // done here\n    callback(null, state.results);\n  });\n\n  return terminator.bind(state, callback);\n}\n\n/*\n * -- Sort methods\n */\n\n/**\n * sort helper to sort array elements in ascending order\n *\n * @param   {mixed} a - an item to compare\n * @param   {mixed} b - an item to compare\n * @returns {number} - comparison result\n */\nfunction ascending(a, b)\n{\n  return a < b ? -1 : a > b ? 1 : 0;\n}\n\n/**\n * sort helper to sort array elements in descending order\n *\n * @param   {mixed} a - an item to compare\n * @param   {mixed} b - an item to compare\n * @returns {number} - comparison result\n */\nfunction descending(a, b)\n{\n  return -1 * ascending(a, b);\n}\n","'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst asyncHook = require('async-hook-jl');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\n//const trace = [];\n\nconst invertedProviders = [];\nfor (let key in asyncHook.providers) {\n  invertedProviders[asyncHook.providers[key]] = key;\n}\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  //trace: trace,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    SETTING KEY:' + key + '=' + value + ' in ns:' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('    GETTING KEY:' + key + '=undefined' + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n        util.inspect(this.active, true));\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    GETTING KEY:' + key + '=' + this.active[key] + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATING Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' active:' +\n      util.inspect(this.active, true, 2, true));\n  }\n\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATED Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' context:' +\n      util.inspect(context, true, 2, true));\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' BEFORE RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' AFTER RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(' BEFORE runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n      util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  ENTER ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  EXIT ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' +\n      util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CREATING NAMESPACE ' + name);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  asyncHook.addHooks({\n    init(uid, handle, provider, parentUid, parentHandle) {\n      //parentUid = parentUid || currentUid;  // Suggested usage but appears to work better for tracing modules.\n      currentUid = uid;\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      if (parentUid) {\n        namespace._contexts.set(uid, namespace._contexts.get(parentUid));\n        if (DEBUG_CLS_HOOKED) {\n          debug2('PARENTID: ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + provider);\n        }\n      } else {\n        namespace._contexts.set(currentUid, namespace.active);\n      }\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('INIT ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + invertedProviders[provider]\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n    },\n    pre(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.enter(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    post(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.exit(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    destroy(uid) {\n      currentUid = uid;\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('DESTROY ' + name + ' uid:' + uid + ' context:' + util.inspect(namespace._contexts.get(currentUid))\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n      namespace._contexts.delete(uid);\n    }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\nif (asyncHook._state && !asyncHook._state.enabled) {\n  asyncHook.enable();\n}\n\nfunction debug2(msg) {\n  if (process.env.DEBUG) {\n    process._rawDebug(msg);\n  }\n}\n\n\n/*function debug(from, ns) {\n process._rawDebug('DEBUG: ' + util.inspect({\n from: from,\n currentUid: currentUid,\n context: ns ? ns._contexts.get(currentUid) : 'no ns'\n }, true, 2, true));\n }*/\n\n\nfunction getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}\n\n\n// Add back to callstack\nif (DEBUG_CLS_HOOKED) {\n  var stackChain = require('stack-chain');\n  for (var modifier in stackChain.filter._modifiers) {\n    stackChain.filter.deattach(modifier);\n  }\n}\n","/* eslint-disable max-len */\n'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst async_hooks = require('async_hooks');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n  this._indent = 0;\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  this.active[key] = value;\n\n  if (DEBUG_CLS_HOOKED) {\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-SET KEY:' + key + '=' + value + ' in ns:' + this.name + ' currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n  }\n\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      const asyncHooksCurrentId = async_hooks.currentId();\n      const triggerId = async_hooks.triggerAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      //debug2(indentStr + 'CONTEXT-GETTING KEY NO ACTIVE NS:' + key + '=undefined' + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n      debug2(`${indentStr}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${key}=undefined currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length}`);\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-GETTING KEY:' + key + '=' + this.active[key] + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n    debug2(`${indentStr}CONTEXT-GETTING KEY: (${this.name}) ${key}=${this.active[key]} currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} active:${util.inspect(this.active)}`);\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  // Prototype inherit existing context if created a new child context within existing context.\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-CREATED Context: (${this.name}) currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} context:${util.inspect(context, {showHidden:true, depth:2, colors:true})}`);\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} context:${util.inspect(context)}`);\n    }\n    fn(context);\n    return context;\n  } catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  } finally {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN END: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  let value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CONTEXT-runPromise BEFORE: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER then: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER catch: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    } else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    } catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    } finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-ENTER: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-EXIT: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' + util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(`NS-CREATING NAMESPACE (${name})`);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  const hook = async_hooks.createHook({\n    init(asyncId, type, triggerId, resource) {\n      currentUid = async_hooks.executionAsyncId();\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      // let initContext = namespace.active;\n      // if(!initContext && triggerId) {\n      //   let parentContext = namespace._contexts.get(triggerId);\n      //   if (parentContext) {\n      //     namespace.active = parentContext;\n      //     namespace._contexts.set(currentUid, parentContext);\n      //     if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) WITH PARENT CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      //   } else if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) MISSING CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      // }else {\n      //   namespace._contexts.set(currentUid, namespace.active);\n      //   if (DEBUG_CLS_HOOKED) {\n      //     const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //     debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //   }\n      // }\n      if(namespace.active) {\n        namespace._contexts.set(asyncId, namespace.active);\n\n        if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n        }\n      }else if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        const triggerId = async_hooks.triggerAsyncId();\n        const triggerIdContext = namespace._contexts.get(triggerId);\n        if (triggerIdContext) {\n          namespace._contexts.set(asyncId, triggerIdContext);\n          if (DEBUG_CLS_HOOKED) {\n            const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n            debug2(`${indentStr}INIT USING CONTEXT FROM TRIGGERID [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n          }\n        } else if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT MISSING CONTEXT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n        }\n      }\n\n\n      if(DEBUG_CLS_HOOKED && type === 'PROMISE'){\n        debug2(util.inspect(resource, {showHidden: true}));\n        const parentId = resource.parentId;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}INIT RESOURCE-PROMISE [${type}] (${name}) parentId:${parentId} asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n      }\n\n    },\n    before(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context;\n\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}BEFORE (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n          namespace._indent += 2;\n        }\n\n        namespace.enter(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}BEFORE MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} namespace._contexts:${util.inspect(namespace._contexts, {showHidden:true, depth:2, colors:true})}`);\n        namespace._indent += 2;\n      }\n    },\n    after(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context; // = namespace._contexts.get(currentUid);\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          namespace._indent -= 2;\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}AFTER (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n        }\n\n        namespace.exit(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        namespace._indent -= 2;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}AFTER MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n      }\n    },\n    destroy(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}DESTROY (${name}) currentUid:${currentUid} asyncId:${asyncId} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(namespace._contexts.get(currentUid))}`);\n      }\n\n      namespace._contexts.delete(asyncId);\n    }\n  });\n\n  hook.enable();\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\n//const fs = require('fs');\nfunction debug2(...args) {\n  if (DEBUG_CLS_HOOKED) {\n    //fs.writeSync(1, `${util.format(...args)}\\n`);\n    process._rawDebug(`${util.format(...args)}`);\n  }\n}\n\n/*function getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}*/\n\n\n","'use strict';\n\nconst semver = require('semver');\n\n/**\n * In order to increase node version support, this loads the version of context\n * that is appropriate for the version of on nodejs that is running.\n * Node < v8 - uses AsyncWrap and async-hooks-jl\n * Node >= v8 - uses native async-hooks\n */\nif(process && semver.gte(process.versions.node, '8.0.0')){\n  module.exports = require('./context');\n}else{\n  module.exports = require('./context-legacy');\n}\n","var util = require('util');\nvar Stream = require('stream').Stream;\nvar DelayedStream = require('delayed-stream');\n\nmodule.exports = CombinedStream;\nfunction CombinedStream() {\n  this.writable = false;\n  this.readable = true;\n  this.dataSize = 0;\n  this.maxDataSize = 2 * 1024 * 1024;\n  this.pauseStreams = true;\n\n  this._released = false;\n  this._streams = [];\n  this._currentStream = null;\n  this._insideLoop = false;\n  this._pendingNext = false;\n}\nutil.inherits(CombinedStream, Stream);\n\nCombinedStream.create = function(options) {\n  var combinedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    combinedStream[option] = options[option];\n  }\n\n  return combinedStream;\n};\n\nCombinedStream.isStreamLike = function(stream) {\n  return (typeof stream !== 'function')\n    && (typeof stream !== 'string')\n    && (typeof stream !== 'boolean')\n    && (typeof stream !== 'number')\n    && (!Buffer.isBuffer(stream));\n};\n\nCombinedStream.prototype.append = function(stream) {\n  var isStreamLike = CombinedStream.isStreamLike(stream);\n\n  if (isStreamLike) {\n    if (!(stream instanceof DelayedStream)) {\n      var newStream = DelayedStream.create(stream, {\n        maxDataSize: Infinity,\n        pauseStream: this.pauseStreams,\n      });\n      stream.on('data', this._checkDataSize.bind(this));\n      stream = newStream;\n    }\n\n    this._handleErrors(stream);\n\n    if (this.pauseStreams) {\n      stream.pause();\n    }\n  }\n\n  this._streams.push(stream);\n  return this;\n};\n\nCombinedStream.prototype.pipe = function(dest, options) {\n  Stream.prototype.pipe.call(this, dest, options);\n  this.resume();\n  return dest;\n};\n\nCombinedStream.prototype._getNext = function() {\n  this._currentStream = null;\n\n  if (this._insideLoop) {\n    this._pendingNext = true;\n    return; // defer call\n  }\n\n  this._insideLoop = true;\n  try {\n    do {\n      this._pendingNext = false;\n      this._realGetNext();\n    } while (this._pendingNext);\n  } finally {\n    this._insideLoop = false;\n  }\n};\n\nCombinedStream.prototype._realGetNext = function() {\n  var stream = this._streams.shift();\n\n\n  if (typeof stream == 'undefined') {\n    this.end();\n    return;\n  }\n\n  if (typeof stream !== 'function') {\n    this._pipeNext(stream);\n    return;\n  }\n\n  var getStream = stream;\n  getStream(function(stream) {\n    var isStreamLike = CombinedStream.isStreamLike(stream);\n    if (isStreamLike) {\n      stream.on('data', this._checkDataSize.bind(this));\n      this._handleErrors(stream);\n    }\n\n    this._pipeNext(stream);\n  }.bind(this));\n};\n\nCombinedStream.prototype._pipeNext = function(stream) {\n  this._currentStream = stream;\n\n  var isStreamLike = CombinedStream.isStreamLike(stream);\n  if (isStreamLike) {\n    stream.on('end', this._getNext.bind(this));\n    stream.pipe(this, {end: false});\n    return;\n  }\n\n  var value = stream;\n  this.write(value);\n  this._getNext();\n};\n\nCombinedStream.prototype._handleErrors = function(stream) {\n  var self = this;\n  stream.on('error', function(err) {\n    self._emitError(err);\n  });\n};\n\nCombinedStream.prototype.write = function(data) {\n  this.emit('data', data);\n};\n\nCombinedStream.prototype.pause = function() {\n  if (!this.pauseStreams) {\n    return;\n  }\n\n  if(this.pauseStreams && this._currentStream && typeof(this._currentStream.pause) == 'function') this._currentStream.pause();\n  this.emit('pause');\n};\n\nCombinedStream.prototype.resume = function() {\n  if (!this._released) {\n    this._released = true;\n    this.writable = true;\n    this._getNext();\n  }\n\n  if(this.pauseStreams && this._currentStream && typeof(this._currentStream.resume) == 'function') this._currentStream.resume();\n  this.emit('resume');\n};\n\nCombinedStream.prototype.end = function() {\n  this._reset();\n  this.emit('end');\n};\n\nCombinedStream.prototype.destroy = function() {\n  this._reset();\n  this.emit('close');\n};\n\nCombinedStream.prototype._reset = function() {\n  this.writable = false;\n  this._streams = [];\n  this._currentStream = null;\n};\n\nCombinedStream.prototype._checkDataSize = function() {\n  this._updateDataSize();\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.';\n  this._emitError(new Error(message));\n};\n\nCombinedStream.prototype._updateDataSize = function() {\n  this.dataSize = 0;\n\n  var self = this;\n  this._streams.forEach(function(stream) {\n    if (!stream.dataSize) {\n      return;\n    }\n\n    self.dataSize += stream.dataSize;\n  });\n\n  if (this._currentStream && this._currentStream.dataSize) {\n    this.dataSize += this._currentStream.dataSize;\n  }\n};\n\nCombinedStream.prototype._emitError = function(err) {\n  this._reset();\n  this.emit('error', err);\n};\n","'use strict';\n\nvar assert      = require('assert');\nvar wrapEmitter = require('emitter-listener');\n\n/*\n *\n * CONSTANTS\n *\n */\nvar CONTEXTS_SYMBOL = 'cls@contexts';\nvar ERROR_SYMBOL = 'error@context';\n\n// load polyfill if native support is unavailable\nif (!process.addAsyncListener) require('async-listener');\n\nfunction Namespace(name) {\n  this.name   = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set   = [];\n  this.id     = null;\n}\n\nNamespace.prototype.set = function (key, value) {\n  if (!this.active) {\n    throw new Error(\"No context available. ns.run() or ns.bind() must be called first.\");\n  }\n\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function (key) {\n  if (!this.active) return undefined;\n\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function () {\n  return Object.create(this.active);\n};\n\nNamespace.prototype.run = function (fn) {\n  var context = this.createContext();\n  this.enter(context);\n  try {\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function (fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\nNamespace.prototype.bind = function (fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  var self = this;\n  return function () {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function (context) {\n  assert.ok(context, \"context must be provided for entering\");\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function (context) {\n  assert.ok(context, \"context must be provided for exiting\");\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, \"can't remove top context\");\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  var index = this._set.lastIndexOf(context);\n\n  assert.ok(index >= 0, \"context not currently entered; can't exit\");\n  assert.ok(index,      \"can't remove top context\");\n\n  this._set.splice(index, 1);\n};\n\nNamespace.prototype.bindEmitter = function (emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, \"can only bind real EEs\");\n\n  var namespace  = this;\n  var thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) return;\n    if (!listener[CONTEXTS_SYMBOL]) listener[CONTEXTS_SYMBOL] = Object.create(null);\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace : namespace,\n      context   : namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) return unwrapped;\n\n    var wrapped  = unwrapped;\n    var contexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(contexts).forEach(function (name) {\n      var thunk = contexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function (exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction get(name) {\n  return process.namespaces[name];\n}\n\nfunction create(name) {\n  assert.ok(name, \"namespace must be given a name!\");\n\n  var namespace = new Namespace(name);\n  namespace.id = process.addAsyncListener({\n    create : function () { return namespace.active; },\n    before : function (context, storage) { if (storage) namespace.enter(storage); },\n    after  : function (context, storage) { if (storage) namespace.exit(storage); },\n    error  : function (storage) { if (storage) namespace.exit(storage); }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroy(name) {\n  var namespace = get(name);\n\n  assert.ok(namespace,    \"can't delete nonexistent namespace!\");\n  assert.ok(namespace.id, \"don't assign to process.namespaces directly!\");\n\n  process.removeAsyncListener(namespace.id);\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroy(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\nif (!process.namespaces) reset(); // call immediately to set up\n\nmodule.exports = {\n  getNamespace     : get,\n  createNamespace  : create,\n  destroyNamespace : destroy,\n  reset            : reset\n};\n","var Stream = require('stream').Stream;\nvar util = require('util');\n\nmodule.exports = DelayedStream;\nfunction DelayedStream() {\n  this.source = null;\n  this.dataSize = 0;\n  this.maxDataSize = 1024 * 1024;\n  this.pauseStream = true;\n\n  this._maxDataSizeExceeded = false;\n  this._released = false;\n  this._bufferedEvents = [];\n}\nutil.inherits(DelayedStream, Stream);\n\nDelayedStream.create = function(source, options) {\n  var delayedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    delayedStream[option] = options[option];\n  }\n\n  delayedStream.source = source;\n\n  var realEmit = source.emit;\n  source.emit = function() {\n    delayedStream._handleEmit(arguments);\n    return realEmit.apply(source, arguments);\n  };\n\n  source.on('error', function() {});\n  if (delayedStream.pauseStream) {\n    source.pause();\n  }\n\n  return delayedStream;\n};\n\nObject.defineProperty(DelayedStream.prototype, 'readable', {\n  configurable: true,\n  enumerable: true,\n  get: function() {\n    return this.source.readable;\n  }\n});\n\nDelayedStream.prototype.setEncoding = function() {\n  return this.source.setEncoding.apply(this.source, arguments);\n};\n\nDelayedStream.prototype.resume = function() {\n  if (!this._released) {\n    this.release();\n  }\n\n  this.source.resume();\n};\n\nDelayedStream.prototype.pause = function() {\n  this.source.pause();\n};\n\nDelayedStream.prototype.release = function() {\n  this._released = true;\n\n  this._bufferedEvents.forEach(function(args) {\n    this.emit.apply(this, args);\n  }.bind(this));\n  this._bufferedEvents = [];\n};\n\nDelayedStream.prototype.pipe = function() {\n  var r = Stream.prototype.pipe.apply(this, arguments);\n  this.resume();\n  return r;\n};\n\nDelayedStream.prototype._handleEmit = function(args) {\n  if (this._released) {\n    this.emit.apply(this, args);\n    return;\n  }\n\n  if (args[0] === 'data') {\n    this.dataSize += args[1].length;\n    this._checkIfMaxDataSizeExceeded();\n  }\n\n  this._bufferedEvents.push(args);\n};\n\nDelayedStream.prototype._checkIfMaxDataSizeExceeded = function() {\n  if (this._maxDataSizeExceeded) {\n    return;\n  }\n\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  this._maxDataSizeExceeded = true;\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.'\n  this.emit('error', new Error(message));\n};\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.azureCoreTracing = exports.AzureMonitorSymbol = void 0;\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nexports.AzureMonitorSymbol = \"Azure_Monitor_Tracer\";\r\nvar publisherName = \"azure-coretracing\";\r\nvar isPatched = false;\r\n/**\r\n * By default, @azure/core-tracing default tracer is a NoopTracer.\r\n * This patching changes the default tracer to a patched BasicTracer\r\n * which emits ended spans as diag-channel events.\r\n *\r\n * The @opentelemetry/tracing package must be installed to use these patches\r\n * https://www.npmjs.com/package/@opentelemetry/tracing\r\n * @param coreTracing\r\n */\r\nvar azureCoreTracingPatchFunction = function (coreTracing) {\r\n    if (isPatched) {\r\n        // tracer is already cached -- noop\r\n        return coreTracing;\r\n    }\r\n    try {\r\n        var tracing = require(\"@opentelemetry/sdk-trace-base\");\r\n        var api = require(\"@opentelemetry/api\");\r\n        var defaultProvider = new tracing.BasicTracerProvider();\r\n        var defaultTracer = defaultProvider.getTracer(\"applicationinsights tracer\");\r\n        // Patch Azure SDK setTracer, @azure/core-tracing <= 1.0.0-preview.12\r\n        if (coreTracing.setTracer) {\r\n            var setTracerOriginal_1 = coreTracing.setTracer;\r\n            coreTracing.setTracer = function (tracer) {\r\n                // Patch startSpan instead of using spanProcessor.onStart because parentSpan must be\r\n                // set while the span is constructed\r\n                var startSpanOriginal = tracer.startSpan;\r\n                tracer.startSpan = function (name, options, context) {\r\n                    var span = startSpanOriginal.call(this, name, options, context);\r\n                    var originalEnd = span.end;\r\n                    span.end = function () {\r\n                        var result = originalEnd.apply(this, arguments);\r\n                        diagnostic_channel_1.channel.publish(publisherName, span);\r\n                        return result;\r\n                    };\r\n                    return span;\r\n                };\r\n                tracer[exports.AzureMonitorSymbol] = true;\r\n                setTracerOriginal_1.call(this, tracer);\r\n            };\r\n            api.trace.getSpan(api.context.active()); // seed OpenTelemetryScopeManagerWrapper with \"active\" symbol\r\n            coreTracing.setTracer(defaultTracer);\r\n        }\r\n        else { // Patch OpenTelemetry setGlobalTracerProvider  @azure/core-tracing > 1.0.0-preview.13\r\n            var setGlobalTracerProviderOriginal_1 = api.trace.setGlobalTracerProvider;\r\n            api.trace.setGlobalTracerProvider = function (tracerProvider) {\r\n                var getTracerOriginal = tracerProvider.getTracer;\r\n                tracerProvider.getTracer = function (tracerName, version) {\r\n                    var tracer = getTracerOriginal.call(this, tracerName, version);\r\n                    if (!tracer[exports.AzureMonitorSymbol]) { // Avoid patching multiple times\r\n                        var startSpanOriginal_1 = tracer.startSpan;\r\n                        tracer.startSpan = function (spanName, options, context) {\r\n                            var span = startSpanOriginal_1.call(this, spanName, options, context);\r\n                            var originalEnd = span.end;\r\n                            span.end = function () {\r\n                                var result = originalEnd.apply(this, arguments);\r\n                                diagnostic_channel_1.channel.publish(publisherName, span);\r\n                                return result;\r\n                            };\r\n                            return span;\r\n                        };\r\n                        tracer[exports.AzureMonitorSymbol] = true;\r\n                    }\r\n                    return tracer;\r\n                };\r\n                return setGlobalTracerProviderOriginal_1.call(this, tracerProvider);\r\n            };\r\n            defaultProvider.register();\r\n            api.trace.getSpan(api.context.active()); // seed OpenTelemetryScopeManagerWrapper with \"active\" symbol\r\n            // Register Azure SDK instrumentation\r\n            var openTelemetryInstr = require(\"@opentelemetry/instrumentation\");\r\n            var azureSdkInstr = require(\"@azure/opentelemetry-instrumentation-azure-sdk\");\r\n            openTelemetryInstr.registerInstrumentations({\r\n                instrumentations: [\r\n                    azureSdkInstr.createAzureSdkInstrumentation()\r\n                ]\r\n            });\r\n        }\r\n        isPatched = true;\r\n    }\r\n    catch (e) { /* squash errors */ }\r\n    return coreTracing;\r\n};\r\nexports.azureCoreTracing = {\r\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\r\n    patch: azureCoreTracingPatchFunction,\r\n    publisherName: publisherName\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"@azure/core-tracing\", exports.azureCoreTracing);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=azure-coretracing.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.bunyan = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar bunyanPatchFunction = function (originalBunyan) {\r\n    var originalEmit = originalBunyan.prototype._emit;\r\n    originalBunyan.prototype._emit = function (rec, noemit) {\r\n        var ret = originalEmit.apply(this, arguments);\r\n        if (!noemit) {\r\n            var str = ret;\r\n            if (!str) {\r\n                str = originalEmit.call(this, rec, true);\r\n            }\r\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\r\n        }\r\n        return ret;\r\n    };\r\n    return originalBunyan;\r\n};\r\nexports.bunyan = {\r\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\r\n    patch: bunyanPatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=bunyan.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.console = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar stream_1 = require(\"stream\");\r\nvar consolePatchFunction = function (originalConsole) {\r\n    var aiLoggingOutStream = new stream_1.Writable();\r\n    var aiLoggingErrStream = new stream_1.Writable();\r\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\r\n    // We create a version which publishes to the channel and also to stdout/stderr\r\n    aiLoggingOutStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\r\n        return true;\r\n    };\r\n    aiLoggingErrStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\r\n        return true;\r\n    };\r\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\r\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\r\n    var _loop_1 = function (method) {\r\n        var originalMethod = originalConsole[method];\r\n        if (originalMethod) {\r\n            originalConsole[method] = function () {\r\n                if (aiLoggingConsole[method]) {\r\n                    try {\r\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\r\n                    }\r\n                    catch (e) {\r\n                        // Ignore errors; allow the original method to throw if necessary\r\n                    }\r\n                }\r\n                return originalMethod.apply(originalConsole, arguments);\r\n            };\r\n        }\r\n    };\r\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\r\n        var method = consoleMethods_1[_i];\r\n        _loop_1(method);\r\n    }\r\n    return originalConsole;\r\n};\r\nexports.console = {\r\n    versionSpecifier: \">= 4.0.0\",\r\n    patch: consolePatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\r\n    // Force patching of console\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    require(\"console\");\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=console.pub.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.tedious = exports.pgPool = exports.pg = exports.winston = exports.redis = exports.mysql = exports.mongodb = exports.mongodbCore = exports.console = exports.bunyan = exports.azuresdk = void 0;\r\nvar azuresdk = require(\"./azure-coretracing.pub\");\r\nexports.azuresdk = azuresdk;\r\nvar bunyan = require(\"./bunyan.pub\");\r\nexports.bunyan = bunyan;\r\nvar consolePub = require(\"./console.pub\");\r\nexports.console = consolePub;\r\nvar mongodbCore = require(\"./mongodb-core.pub\");\r\nexports.mongodbCore = mongodbCore;\r\nvar mongodb = require(\"./mongodb.pub\");\r\nexports.mongodb = mongodb;\r\nvar mysql = require(\"./mysql.pub\");\r\nexports.mysql = mysql;\r\nvar pgPool = require(\"./pg-pool.pub\");\r\nexports.pgPool = pgPool;\r\nvar pg = require(\"./pg.pub\");\r\nexports.pg = pg;\r\nvar redis = require(\"./redis.pub\");\r\nexports.redis = redis;\r\nvar tedious = require(\"./tedious.pub\");\r\nexports.tedious = tedious;\r\nvar winston = require(\"./winston.pub\");\r\nexports.winston = winston;\r\nfunction enable() {\r\n    bunyan.enable();\r\n    consolePub.enable();\r\n    mongodbCore.enable();\r\n    mongodb.enable();\r\n    mysql.enable();\r\n    pg.enable();\r\n    pgPool.enable();\r\n    redis.enable();\r\n    winston.enable();\r\n    azuresdk.enable();\r\n    tedious.enable();\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.mongoCore = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbcorePatchFunction = function (originalMongoCore) {\r\n    var originalConnect = originalMongoCore.Server.prototype.connect;\r\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\r\n        var ret = originalConnect.apply(this, arguments);\r\n        // Messages sent to mongo progress through a pool\r\n        // This can result in context getting mixed between different responses\r\n        // so we wrap the callbacks to restore appropriate state\r\n        var originalWrite = this.s.pool.write;\r\n        this.s.pool.write = function contextPreservingWrite() {\r\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\r\n            if (typeof arguments[cbidx] === \"function\") {\r\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\r\n            }\r\n            return originalWrite.apply(this, arguments);\r\n        };\r\n        // Logout is a special case, it doesn't call the write function but instead\r\n        // directly calls into connection.write\r\n        var originalLogout = this.s.pool.logout;\r\n        this.s.pool.logout = function contextPreservingLogout() {\r\n            if (typeof arguments[1] === \"function\") {\r\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\r\n            }\r\n            return originalLogout.apply(this, arguments);\r\n        };\r\n        return ret;\r\n    };\r\n    return originalMongoCore;\r\n};\r\nexports.mongoCore = {\r\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\r\n    patch: mongodbcorePatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.mongo330 = exports.mongo3 = exports.mongo2 = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbPatchFunction = function (originalMongo) {\r\n    var listener = originalMongo.instrument({\r\n        operationIdGenerator: {\r\n            next: function () {\r\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\r\n            }\r\n        }\r\n    });\r\n    var eventMap = {};\r\n    listener.on(\"started\", function (event) {\r\n        if (eventMap[event.requestId]) {\r\n            // Note: Mongo can generate 2 completely separate requests\r\n            // which share the same requestId, if a certain race condition is triggered.\r\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\r\n            return;\r\n        }\r\n        eventMap[event.requestId] = __assign(__assign({}, event), { time: new Date() });\r\n    });\r\n    listener.on(\"succeeded\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event.operationId === \"function\") {\r\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\r\n        }\r\n        else {\r\n            // fallback -- correlation will not work here\r\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true });\r\n        }\r\n    });\r\n    listener.on(\"failed\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event.operationId === \"function\") {\r\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\r\n        }\r\n        else {\r\n            // fallback -- correlation will not work here\r\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false });\r\n        }\r\n    });\r\n    return originalMongo;\r\n};\r\nvar mongodb3PatchFunction = function (originalMongo) {\r\n    var listener = originalMongo.instrument();\r\n    var eventMap = {};\r\n    var contextMap = {};\r\n    listener.on(\"started\", function (event) {\r\n        if (eventMap[event.requestId]) {\r\n            // Note: Mongo can generate 2 completely separate requests\r\n            // which share the same requestId, if a certain race condition is triggered.\r\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\r\n            return;\r\n        }\r\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\r\n        eventMap[event.requestId] = __assign(__assign({}, event), { time: new Date() });\r\n    });\r\n    listener.on(\"succeeded\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\r\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\r\n            delete contextMap[event.requestId];\r\n        }\r\n    });\r\n    listener.on(\"failed\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\r\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\r\n            delete contextMap[event.requestId];\r\n        }\r\n    });\r\n    return originalMongo;\r\n};\r\n// In mongodb 3.3.0, mongodb-core was merged into mongodb, so the same patching\r\n// can be used here. this.s.pool was changed to this.s.coreTopology.s.pool\r\nvar mongodbcorePatchFunction = function (originalMongo) {\r\n    var originalConnect = originalMongo.Server.prototype.connect;\r\n    originalMongo.Server.prototype.connect = function contextPreservingConnect() {\r\n        var ret = originalConnect.apply(this, arguments);\r\n        // Messages sent to mongo progress through a pool\r\n        // This can result in context getting mixed between different responses\r\n        // so we wrap the callbacks to restore appropriate state\r\n        var originalWrite = this.s.coreTopology.s.pool.write;\r\n        this.s.coreTopology.s.pool.write = function contextPreservingWrite() {\r\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\r\n            if (typeof arguments[cbidx] === \"function\") {\r\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\r\n            }\r\n            return originalWrite.apply(this, arguments);\r\n        };\r\n        // Logout is a special case, it doesn't call the write function but instead\r\n        // directly calls into connection.write\r\n        var originalLogout = this.s.coreTopology.s.pool.logout;\r\n        this.s.coreTopology.s.pool.logout = function contextPreservingLogout() {\r\n            if (typeof arguments[1] === \"function\") {\r\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\r\n            }\r\n            return originalLogout.apply(this, arguments);\r\n        };\r\n        return ret;\r\n    };\r\n    return originalMongo;\r\n};\r\nvar mongodb330PatchFunction = function (originalMongo) {\r\n    mongodbcorePatchFunction(originalMongo); // apply mongodb-core patches\r\n    var listener = originalMongo.instrument();\r\n    var eventMap = {};\r\n    var contextMap = {};\r\n    listener.on(\"started\", function (event) {\r\n        if (eventMap[event.requestId]) {\r\n            // Note: Mongo can generate 2 completely separate requests\r\n            // which share the same requestId, if a certain race condition is triggered.\r\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\r\n            return;\r\n        }\r\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\r\n        eventMap[event.requestId] = event;\r\n    });\r\n    listener.on(\"succeeded\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\r\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\r\n            delete contextMap[event.requestId];\r\n        }\r\n    });\r\n    listener.on(\"failed\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\r\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\r\n            delete contextMap[event.requestId];\r\n        }\r\n    });\r\n    return originalMongo;\r\n};\r\nexports.mongo2 = {\r\n    versionSpecifier: \">= 2.0.0 <= 3.0.5\",\r\n    patch: mongodbPatchFunction\r\n};\r\nexports.mongo3 = {\r\n    versionSpecifier: \"> 3.0.5 < 3.3.0\",\r\n    patch: mongodb3PatchFunction\r\n};\r\nexports.mongo330 = {\r\n    versionSpecifier: \">= 3.3.0 < 4.0.0\",\r\n    patch: mongodb330PatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo3);\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo330);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.mysql = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar path = require(\"path\");\r\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\r\n    // The `name` passed in here is for debugging purposes,\r\n    // to help distinguish which object is being patched.\r\n    var patchObjectFunction = function (obj, name) {\r\n        return function (func, cbWrapper) {\r\n            var originalFunc = obj[func];\r\n            if (originalFunc) {\r\n                obj[func] = function mysqlContextPreserver() {\r\n                    // Find the callback, if there is one\r\n                    var cbidx = arguments.length - 1;\r\n                    for (var i = arguments.length - 1; i >= 0; --i) {\r\n                        if (typeof arguments[i] === \"function\") {\r\n                            cbidx = i;\r\n                            break;\r\n                        }\r\n                        else if (typeof arguments[i] !== \"undefined\") {\r\n                            break;\r\n                        }\r\n                    }\r\n                    var cb = arguments[cbidx];\r\n                    var resultContainer = { result: null, startTime: null, startDate: null };\r\n                    if (typeof cb === \"function\") {\r\n                        // Preserve context on the callback.\r\n                        // If this is one of the functions that we want to track,\r\n                        // then wrap the callback with the tracking wrapper\r\n                        if (cbWrapper) {\r\n                            resultContainer.startTime = process.hrtime();\r\n                            resultContainer.startDate = new Date();\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\r\n                        }\r\n                        else {\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\r\n                        }\r\n                    }\r\n                    var result = originalFunc.apply(this, arguments);\r\n                    resultContainer.result = result;\r\n                    return result;\r\n                };\r\n            }\r\n        };\r\n    };\r\n    var patchClassMemberFunction = function (classObject, name) {\r\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\r\n    };\r\n    var connectionCallbackFunctions = [\r\n        \"connect\", \"changeUser\",\r\n        \"ping\", \"statistics\", \"end\"\r\n    ];\r\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\r\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\r\n    // Connection.createQuery is a static method\r\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\r\n        return function (err) {\r\n            var hrDuration = process.hrtime(resultContainer.startTime);\r\n            /* tslint:disable-next-line:no-bitwise */\r\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration, time: resultContainer.startDate });\r\n            cb.apply(this, arguments);\r\n        };\r\n    });\r\n    var poolCallbackFunctions = [\r\n        \"_enqueueCallback\"\r\n    ];\r\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\r\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\r\n    return originalMysql;\r\n};\r\nexports.mysql = {\r\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\r\n    patch: mysqlPatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.postgresPool1 = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nfunction postgresPool1PatchFunction(originalPgPool) {\r\n    var originalConnect = originalPgPool.prototype.connect;\r\n    originalPgPool.prototype.connect = function connect(callback) {\r\n        if (callback) {\r\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\r\n        }\r\n        return originalConnect.apply(this, arguments);\r\n    };\r\n    return originalPgPool;\r\n}\r\nexports.postgresPool1 = {\r\n    versionSpecifier: \">= 1.0.0 < 3.0.0\",\r\n    patch: postgresPool1PatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.postgres7 = exports.postgres6 = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar events_1 = require(\"events\");\r\nvar publisherName = \"postgres\";\r\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\r\n    var originalClientQuery = originalPg.Client.prototype.query;\r\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\r\n    // wherever the callback is passed, find it, save it, and remove it from the call\r\n    // to the the original .query() function\r\n    originalPg.Client.prototype.query = function query(config, values, callback) {\r\n        var data = {\r\n            query: {},\r\n            database: {\r\n                host: this.connectionParameters.host,\r\n                port: this.connectionParameters.port\r\n            },\r\n            result: null,\r\n            error: null,\r\n            duration: 0,\r\n            time: new Date()\r\n        };\r\n        var start = process.hrtime();\r\n        var queryResult;\r\n        function patchCallback(cb) {\r\n            if (cb && cb[diagnosticOriginalFunc]) {\r\n                cb = cb[diagnosticOriginalFunc];\r\n            }\r\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\r\n                var end = process.hrtime(start);\r\n                data.result = res && { rowCount: res.rowCount, command: res.command };\r\n                data.error = err;\r\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\r\n                diagnostic_channel_1.channel.publish(publisherName, data);\r\n                // emulate weird internal behavior in pg@6\r\n                // on success, the callback is called *before* query events are emitted\r\n                // on failure, the callback is called *instead of* the query emitting events\r\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\r\n                // since we are always inserting ourselves as a callback, we have to restore the original\r\n                // behavior if the user didn't provide one themselves\r\n                if (err) {\r\n                    if (cb) {\r\n                        return cb.apply(this, arguments);\r\n                    }\r\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\r\n                        queryResult.emit(\"error\", err);\r\n                    }\r\n                }\r\n                else if (cb) {\r\n                    cb.apply(this, arguments);\r\n                }\r\n            });\r\n            try {\r\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\r\n                return trackingCallback;\r\n            }\r\n            catch (e) {\r\n                // this should never happen, but bailout in case it does\r\n                return cb;\r\n            }\r\n        }\r\n        // this function takes too many variations of arguments.\r\n        // this patches any provided callback or creates a new callback if one wasn't provided.\r\n        // since the callback is always called (if provided) in addition to always having a Promisified\r\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\r\n        try {\r\n            if (typeof config === \"string\") {\r\n                if (values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config,\r\n                        args: values\r\n                    };\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else {\r\n                    data.query.text = config;\r\n                    // pg v6 will, for some reason, accept both\r\n                    // client.query(\"...\", undefined, () => {...})\r\n                    // **and**\r\n                    // client.query(\"...\", () => {...});\r\n                    // Internally, precedence is given to the callback argument\r\n                    if (callback) {\r\n                        callback = patchCallback(callback);\r\n                    }\r\n                    else {\r\n                        values = patchCallback(values);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (typeof config.name === \"string\") {\r\n                    data.query.plan = config.name;\r\n                }\r\n                else if (config.values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config.text,\r\n                        args: config.values\r\n                    };\r\n                }\r\n                else {\r\n                    data.query.text = config.text;\r\n                }\r\n                if (callback) {\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else if (values) {\r\n                    values = patchCallback(values);\r\n                }\r\n                else {\r\n                    config.callback = patchCallback(config.callback);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // if our logic here throws, bail out and just let pg do its thing\r\n            return originalClientQuery.apply(this, arguments);\r\n        }\r\n        arguments[0] = config;\r\n        arguments[1] = values;\r\n        arguments[2] = callback;\r\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\r\n        queryResult = originalClientQuery.apply(this, arguments);\r\n        return queryResult;\r\n    };\r\n    return originalPg;\r\n}\r\nfunction postgres7PatchFunction(originalPg, originalPgPath) {\r\n    var originalClientQuery = originalPg.Client.prototype.query;\r\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\r\n    // wherever the callback is passed, find it, save it, and remove it from the call\r\n    // to the the original .query() function\r\n    originalPg.Client.prototype.query = function query(config, values, callback) {\r\n        var _this = this;\r\n        var callbackProvided = !!callback; // Starting in pg@7.x+, Promise is returned only if !callbackProvided\r\n        var data = {\r\n            query: {},\r\n            database: {\r\n                host: this.connectionParameters.host,\r\n                port: this.connectionParameters.port\r\n            },\r\n            result: null,\r\n            error: null,\r\n            duration: 0,\r\n            time: new Date()\r\n        };\r\n        var start = process.hrtime();\r\n        var queryResult;\r\n        function patchCallback(cb) {\r\n            if (cb && cb[diagnosticOriginalFunc]) {\r\n                cb = cb[diagnosticOriginalFunc];\r\n            }\r\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\r\n                var end = process.hrtime(start);\r\n                data.result = res && { rowCount: res.rowCount, command: res.command };\r\n                data.error = err;\r\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\r\n                diagnostic_channel_1.channel.publish(publisherName, data);\r\n                if (err) {\r\n                    if (cb) {\r\n                        return cb.apply(this, arguments);\r\n                    }\r\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\r\n                        queryResult.emit(\"error\", err);\r\n                    }\r\n                }\r\n                else if (cb) {\r\n                    cb.apply(this, arguments);\r\n                }\r\n            });\r\n            try {\r\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\r\n                return trackingCallback;\r\n            }\r\n            catch (e) {\r\n                // this should never happen, but bailout in case it does\r\n                return cb;\r\n            }\r\n        }\r\n        // Only try to wrap the callback if it is a function. We want to keep the same\r\n        // behavior of returning a promise only if no callback is provided. Wrapping\r\n        // a nonfunction makes it a function and pg will interpret it as a callback\r\n        try {\r\n            if (typeof config === \"string\") {\r\n                if (values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config,\r\n                        args: values\r\n                    };\r\n                    callbackProvided = typeof callback === \"function\";\r\n                    callback = callbackProvided ? patchCallback(callback) : callback;\r\n                }\r\n                else {\r\n                    data.query.text = config;\r\n                    if (callback) {\r\n                        callbackProvided = typeof callback === \"function\";\r\n                        callback = callbackProvided ? patchCallback(callback) : callback;\r\n                    }\r\n                    else {\r\n                        callbackProvided = typeof values === \"function\";\r\n                        values = callbackProvided ? patchCallback(values) : values;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (typeof config.name === \"string\") {\r\n                    data.query.plan = config.name;\r\n                }\r\n                else if (config.values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config.text,\r\n                        args: config.values\r\n                    };\r\n                }\r\n                else {\r\n                    data.query.text = config.text;\r\n                }\r\n                if (callback) {\r\n                    callbackProvided = typeof callback === \"function\";\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else if (values) {\r\n                    callbackProvided = typeof values === \"function\";\r\n                    values = callbackProvided ? patchCallback(values) : values;\r\n                }\r\n                else {\r\n                    callbackProvided = typeof config.callback === \"function\";\r\n                    config.callback = callbackProvided ? patchCallback(config.callback) : config.callback;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // if our logic here throws, bail out and just let pg do its thing\r\n            return originalClientQuery.apply(this, arguments);\r\n        }\r\n        arguments[0] = config;\r\n        arguments[1] = values;\r\n        arguments[2] = callback;\r\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\r\n        queryResult = originalClientQuery.apply(this, arguments);\r\n        if (!callbackProvided) {\r\n            // no callback, so create a pass along promise\r\n            return queryResult\r\n                // pass resolved promise after publishing the event\r\n                .then(function (result) {\r\n                patchCallback()(undefined, result);\r\n                return new _this._Promise(function (resolve, reject) {\r\n                    resolve(result);\r\n                });\r\n            })\r\n                // pass along rejected promise after publishing the error\r\n                .catch(function (error) {\r\n                patchCallback()(error, undefined);\r\n                return new _this._Promise(function (resolve, reject) {\r\n                    reject(error);\r\n                });\r\n            });\r\n        }\r\n        return queryResult;\r\n    };\r\n    return originalPg;\r\n}\r\nexports.postgres6 = {\r\n    versionSpecifier: \"6.*\",\r\n    patch: postgres6PatchFunction\r\n};\r\nexports.postgres7 = {\r\n    versionSpecifier: \">=7.* <=8.*\",\r\n    patch: postgres7PatchFunction,\r\n    publisherName: publisherName\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres7);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.redis = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar redisPatchFunction = function (originalRedis) {\r\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\r\n    // Note: This is mixing together both context tracking and dependency tracking\r\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\r\n        if (commandObj) {\r\n            var cb_1 = commandObj.callback;\r\n            if (!cb_1 || !cb_1.pubsubBound) {\r\n                var address_1 = this.address;\r\n                var startTime_1 = process.hrtime();\r\n                var startDate_1 = new Date();\r\n                // Note: augmenting the callback on internal_send_command is correct for context\r\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\r\n                // which higher levels expect in some cases\r\n                // However, the only other option is to intercept every individual command.\r\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\r\n                    var hrDuration = process.hrtime(startTime_1);\r\n                    /* tslint:disable-next-line:no-bitwise */\r\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result, time: startDate_1 });\r\n                    if (typeof cb_1 === \"function\") {\r\n                        cb_1.apply(this, arguments);\r\n                    }\r\n                });\r\n                commandObj.callback.pubsubBound = true;\r\n            }\r\n        }\r\n        return originalSend.call(this, commandObj);\r\n    };\r\n    return originalRedis;\r\n};\r\nexports.redis = {\r\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\r\n    patch: redisPatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.tedious = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar tediousPatchFunction = function (originalTedious) {\r\n    var originalMakeRequest = originalTedious.Connection.prototype.makeRequest;\r\n    originalTedious.Connection.prototype.makeRequest = function makeRequest() {\r\n        function getPatchedCallback(origCallback) {\r\n            var start = process.hrtime();\r\n            var data = {\r\n                query: {},\r\n                database: {\r\n                    host: null,\r\n                    port: null\r\n                },\r\n                result: null,\r\n                error: null,\r\n                duration: 0\r\n            };\r\n            return diagnostic_channel_1.channel.bindToContext(function (err, rowCount, rows) {\r\n                var end = process.hrtime(start);\r\n                data = __assign(__assign({}, data), { database: {\r\n                        host: this.connection.config.server,\r\n                        port: this.connection.config.options.port\r\n                    }, result: !err && { rowCount: rowCount, rows: rows }, query: {\r\n                        text: this.parametersByName.statement.value\r\n                    }, error: err, duration: Math.ceil((end[0] * 1e3) + (end[1] / 1e6)) });\r\n                diagnostic_channel_1.channel.publish(\"tedious\", data);\r\n                origCallback.call(this, err, rowCount, rows);\r\n            });\r\n        }\r\n        var request = arguments[0];\r\n        arguments[0].callback = getPatchedCallback(request.callback);\r\n        originalMakeRequest.apply(this, arguments);\r\n    };\r\n    return originalTedious;\r\n};\r\nexports.tedious = {\r\n    versionSpecifier: \">= 6.0.0 < 9.0.0\",\r\n    patch: tediousPatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"tedious\", exports.tedious);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=tedious.pub.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.winston2 = exports.winston3 = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\n// register a \"filter\" with each logger that publishes the data about to be logged\r\nvar winston2PatchFunction = function (originalWinston) {\r\n    var originalLog = originalWinston.Logger.prototype.log;\r\n    var curLevels;\r\n    var loggingFilter = function (level, message, meta) {\r\n        var levelKind;\r\n        if (curLevels === originalWinston.config.npm.levels) {\r\n            levelKind = \"npm\";\r\n        }\r\n        else if (curLevels === originalWinston.config.syslog.levels) {\r\n            levelKind = \"syslog\";\r\n        }\r\n        else {\r\n            levelKind = \"unknown\";\r\n        }\r\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\r\n        return message;\r\n    };\r\n    // whenever someone logs, ensure our filter comes last\r\n    originalWinston.Logger.prototype.log = function log() {\r\n        curLevels = this.levels;\r\n        if (!this.filters || this.filters.length === 0) {\r\n            this.filters = [loggingFilter];\r\n        }\r\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\r\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\r\n            this.filters.push(loggingFilter);\r\n        }\r\n        return originalLog.apply(this, arguments);\r\n    };\r\n    return originalWinston;\r\n};\r\nvar winston3PatchFunction = function (originalWinston) {\r\n    var mapLevelToKind = function (winston, level) {\r\n        var levelKind;\r\n        if (winston.config.npm.levels[level] != null) {\r\n            levelKind = \"npm\";\r\n        }\r\n        else if (winston.config.syslog.levels[level] != null) {\r\n            levelKind = \"syslog\";\r\n        }\r\n        else {\r\n            levelKind = \"unknown\";\r\n        }\r\n        return levelKind;\r\n    };\r\n    var AppInsightsTransport = /** @class */ (function (_super) {\r\n        __extends(AppInsightsTransport, _super);\r\n        function AppInsightsTransport(winston, opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.winston = winston;\r\n            return _this;\r\n        }\r\n        AppInsightsTransport.prototype.log = function (info, callback) {\r\n            // tslint:disable-next-line:prefer-const - try to obtain level from Symbol(level) afterwards\r\n            var message = info.message, level = info.level, meta = info.meta, splat = __rest(info, [\"message\", \"level\", \"meta\"]);\r\n            level = typeof Symbol[\"for\"] === \"function\" ? info[Symbol[\"for\"](\"level\")] : level; // Symbol(level) is uncolorized, so prefer getting it from here\r\n            message = info instanceof Error ? info : message; // Winston places Errors at info, strings at info.message\r\n            var levelKind = mapLevelToKind(this.winston, level);\r\n            meta = meta || {}; // Winston _somtimes_ puts metadata inside meta, so start from here\r\n            for (var key in splat) {\r\n                if (splat.hasOwnProperty(key)) {\r\n                    meta[key] = splat[key];\r\n                }\r\n            }\r\n            diagnostic_channel_1.channel.publish(\"winston\", { message: message, level: level, levelKind: levelKind, meta: meta });\r\n            callback();\r\n        };\r\n        return AppInsightsTransport;\r\n    }(originalWinston.Transport));\r\n    // Patch this function\r\n    function patchedConfigure() {\r\n        // Grab highest sev logging level in case of custom logging levels\r\n        var levels = originalWinston.config.npm.levels;\r\n        if (arguments && arguments[0] && arguments[0].levels) {\r\n            levels = arguments[0].levels;\r\n        }\r\n        var lastLevel;\r\n        for (var level in levels) {\r\n            if (levels.hasOwnProperty(level)) {\r\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\r\n            }\r\n        }\r\n        this.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\r\n    }\r\n    var origCreate = originalWinston.createLogger;\r\n    originalWinston.createLogger = function patchedCreate() {\r\n        // Grab highest sev logging level in case of custom logging levels\r\n        var levels = originalWinston.config.npm.levels;\r\n        if (arguments && arguments[0] && arguments[0].levels) {\r\n            levels = arguments[0].levels;\r\n        }\r\n        var lastLevel;\r\n        for (var level in levels) {\r\n            if (levels.hasOwnProperty(level)) {\r\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\r\n            }\r\n        }\r\n        // Add custom app insights transport to the end\r\n        // Remark: Configure is not available until after createLogger()\r\n        // and the Logger prototype is not exported in winston 3.x, so\r\n        // patch both createLogger and configure. Could also call configure\r\n        // again after createLogger, but that would cause configure to be called\r\n        // twice per create.\r\n        var result = origCreate.apply(this, arguments);\r\n        result.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\r\n        var origConfigure = result.configure;\r\n        result.configure = function () {\r\n            origConfigure.apply(this, arguments);\r\n            patchedConfigure.apply(this, arguments);\r\n        };\r\n        return result;\r\n    };\r\n    var origRootConfigure = originalWinston.configure;\r\n    originalWinston.configure = function () {\r\n        origRootConfigure.apply(this, arguments);\r\n        patchedConfigure.apply(this, arguments);\r\n    };\r\n    originalWinston.add(new AppInsightsTransport(originalWinston));\r\n    return originalWinston;\r\n};\r\nexports.winston3 = {\r\n    versionSpecifier: \"3.x\",\r\n    patch: winston3PatchFunction\r\n};\r\nexports.winston2 = {\r\n    versionSpecifier: \"2.x\",\r\n    patch: winston2PatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston2);\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston3);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=winston.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 4694;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 420;\nmodule.exports = webpackEmptyContext;","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.channel = exports.ContextPreservingEventEmitter = exports.trueFilter = exports.makePatchingRequire = void 0;\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nObject.defineProperty(exports, \"makePatchingRequire\", { enumerable: true, get: function () { return patchRequire_2.makePatchingRequire; } });\r\nvar trueFilter = function (publishing) { return true; };\r\nexports.trueFilter = trueFilter;\r\nvar ContextPreservingEventEmitter = /** @class */ (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.modulesPatched = [];\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event,\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter, patchCallback) {\r\n        if (filter === void 0) { filter = exports.trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter, patchCallback: patchCallback });\r\n        var patched = this.checkIfModuleIsAlreadyPatched(name);\r\n        if (patched && patchCallback) {\r\n            patchCallback(patched.name, patched.version);\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = exports.trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addPatchedModule = function (name, version) {\r\n        for (var _i = 0, _a = this.modulesPatched; _i < _a.length; _i++) {\r\n            var module_1 = _a[_i];\r\n            if (module_1.name === name) {\r\n                return;\r\n            }\r\n        }\r\n        // If new patch notify listeners\r\n        this.modulesPatched.push({ name: name, version: version });\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            listeners.forEach(function (listener) {\r\n                if (listener.patchCallback) {\r\n                    listener.patchCallback(name, version);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.checkIfModuleIsAlreadyPatched = function (name) {\r\n        for (var _i = 0, _a = this.modulesPatched; _i < _a.length; _i++) {\r\n            var module_2 = _a[_i];\r\n            if (module_2.name === name) {\r\n                return module_2;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nexports.ContextPreservingEventEmitter = ContextPreservingEventEmitter;\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.makePatchingRequire = void 0;\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\nvar channel_1 = require(\"./channel\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                    if (channel_1.channel) {\r\n                        var name_1 = modulePatcher.publisherName || moduleId;\r\n                        channel_1.channel.addPatchedModule(name_1, moduleVersion);\r\n                    }\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","'use strict';\n\nvar shimmer = require('shimmer');\nvar wrap    = shimmer.wrap;\nvar unwrap  = shimmer.unwrap;\n\n// Default to complaining loudly when things don't go according to plan.\n// dunderscores are boring\nvar SYMBOL = 'wrap@before';\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty(obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name);\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  });\n}\n\nfunction _process(self, listeners) {\n  var l = listeners.length;\n  for (var p = 0; p < l; p++) {\n    var listener = listeners[p];\n    // set up the listener so that onEmit can do whatever it needs\n    var before = self[SYMBOL];\n    if (typeof before === 'function') {\n      before(listener);\n    }\n    else if (Array.isArray(before)) {\n      var length = before.length;\n      for (var i = 0; i < length; i++) before[i](listener);\n    }\n  }\n}\n\nfunction _listeners(self, event) {\n  var listeners;\n  listeners = self._events && self._events[event];\n  if (!Array.isArray(listeners)) {\n    if (listeners) {\n      listeners = [listeners];\n    }\n    else {\n      listeners = [];\n    }\n  }\n\n  return listeners;\n}\n\nfunction _findAndProcess(self, event, before) {\n  var after = _listeners(self, event);\n  var unprocessed = after.filter(function(fn) { return before.indexOf(fn) === -1; });\n  if (unprocessed.length > 0) _process(self, unprocessed);\n}\n\nfunction _wrap(unwrapped, visit) {\n  if (!unwrapped) return;\n\n  var wrapped = unwrapped;\n  if (typeof unwrapped === 'function') {\n    wrapped = visit(unwrapped);\n  }\n  else if (Array.isArray(unwrapped)) {\n    wrapped = [];\n    for (var i = 0; i < unwrapped.length; i++) {\n      wrapped[i] = visit(unwrapped[i]);\n    }\n  }\n  return wrapped;\n}\n\nmodule.exports = function wrapEmitter(emitter, onAddListener, onEmit) {\n  if (!emitter || !emitter.on || !emitter.addListener ||\n      !emitter.removeListener || !emitter.emit) {\n    throw new Error(\"can only wrap real EEs\");\n  }\n\n  if (!onAddListener) throw new Error(\"must have function to run on listener addition\");\n  if (!onEmit) throw new Error(\"must have function to wrap listeners when emitting\");\n\n  /* Attach a context to a listener, and make sure that this hook stays\n   * attached to the emitter forevermore.\n   */\n  function adding(on) {\n    return function added(event, listener) {\n      var existing = _listeners(this, event).slice();\n\n      try {\n        var returned = on.call(this, event, listener);\n        _findAndProcess(this, event, existing);\n        return returned;\n      }\n      finally {\n        // old-style streaming overwrites .on and .addListener, so rewrap\n        if (!this.on.__wrapped) wrap(this, 'on', adding);\n        if (!this.addListener.__wrapped) wrap(this, 'addListener', adding);\n      }\n    };\n  }\n\n  function emitting(emit) {\n    return function emitted(event) {\n      if (!this._events || !this._events[event]) return emit.apply(this, arguments);\n\n      var unwrapped = this._events[event];\n\n      /* Ensure that if removeListener gets called, it's working with the\n       * unwrapped listeners.\n       */\n      function remover(removeListener) {\n        return function removed() {\n          this._events[event] = unwrapped;\n          try {\n            return removeListener.apply(this, arguments);\n          }\n          finally {\n            unwrapped = this._events[event];\n            this._events[event] = _wrap(unwrapped, onEmit);\n          }\n        };\n      }\n      wrap(this, 'removeListener', remover);\n\n      try {\n        /* At emit time, ensure that whatever else is going on, removeListener will\n         * still work while at the same time running whatever hooks are necessary to\n         * make sure the listener is run in the correct context.\n         */\n        this._events[event] = _wrap(unwrapped, onEmit);\n        return emit.apply(this, arguments);\n      }\n      finally {\n        /* Ensure that regardless of what happens when preparing and running the\n         * listeners, the status quo ante is restored before continuing.\n         */\n        unwrap(this, 'removeListener');\n        this._events[event] = unwrapped;\n      }\n    };\n  }\n\n  // support multiple onAddListeners\n  if (!emitter[SYMBOL]) {\n    defineProperty(emitter, SYMBOL, onAddListener);\n  }\n  else if (typeof emitter[SYMBOL] === 'function') {\n    defineProperty(emitter, SYMBOL, [emitter[SYMBOL], onAddListener]);\n  }\n  else if (Array.isArray(emitter[SYMBOL])) {\n    emitter[SYMBOL].push(onAddListener);\n  }\n\n  // only wrap the core functions once\n  if (!emitter.__wrapped) {\n    wrap(emitter, 'addListener', adding);\n    wrap(emitter, 'on',          adding);\n    wrap(emitter, 'emit',        emitting);\n\n    defineProperty(emitter, '__unwrap', function () {\n      unwrap(emitter, 'addListener');\n      unwrap(emitter, 'on');\n      unwrap(emitter, 'emit');\n      delete emitter[SYMBOL];\n      delete emitter.__wrapped;\n    });\n    defineProperty(emitter, '__wrapped', true);\n  }\n};\n","/*!\n * mime-db\n * Copyright(c) 2014 Jonathan Ong\n * MIT Licensed\n */\n\n/**\n * Module exports.\n */\n\nmodule.exports = require('./db.json')\n","/*!\n * mime-types\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar db = require('mime-db')\nvar extname = require('path').extname\n\n/**\n * Module variables.\n * @private\n */\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/\nvar TEXT_TYPE_REGEXP = /^text\\//i\n\n/**\n * Module exports.\n * @public\n */\n\nexports.charset = charset\nexports.charsets = { lookup: charset }\nexports.contentType = contentType\nexports.extension = extension\nexports.extensions = Object.create(null)\nexports.lookup = lookup\nexports.types = Object.create(null)\n\n// Populate the extensions/types maps\npopulateMaps(exports.extensions, exports.types)\n\n/**\n * Get the default charset for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction charset (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n  var mime = match && db[match[1].toLowerCase()]\n\n  if (mime && mime.charset) {\n    return mime.charset\n  }\n\n  // default text/* to utf-8\n  if (match && TEXT_TYPE_REGEXP.test(match[1])) {\n    return 'UTF-8'\n  }\n\n  return false\n}\n\n/**\n * Create a full Content-Type header given a MIME type or extension.\n *\n * @param {string} str\n * @return {boolean|string}\n */\n\nfunction contentType (str) {\n  // TODO: should this even be in this module?\n  if (!str || typeof str !== 'string') {\n    return false\n  }\n\n  var mime = str.indexOf('/') === -1\n    ? exports.lookup(str)\n    : str\n\n  if (!mime) {\n    return false\n  }\n\n  // TODO: use content-type or other module\n  if (mime.indexOf('charset') === -1) {\n    var charset = exports.charset(mime)\n    if (charset) mime += '; charset=' + charset.toLowerCase()\n  }\n\n  return mime\n}\n\n/**\n * Get the default extension for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction extension (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n\n  // get extensions\n  var exts = match && exports.extensions[match[1].toLowerCase()]\n\n  if (!exts || !exts.length) {\n    return false\n  }\n\n  return exts[0]\n}\n\n/**\n * Lookup the MIME type for a file path/extension.\n *\n * @param {string} path\n * @return {boolean|string}\n */\n\nfunction lookup (path) {\n  if (!path || typeof path !== 'string') {\n    return false\n  }\n\n  // get the extension (\"ext\" or \".ext\" or full path)\n  var extension = extname('x.' + path)\n    .toLowerCase()\n    .substr(1)\n\n  if (!extension) {\n    return false\n  }\n\n  return exports.types[extension] || false\n}\n\n/**\n * Populate the extensions and types maps.\n * @private\n */\n\nfunction populateMaps (extensions, types) {\n  // source preference (least -> most)\n  var preference = ['nginx', 'apache', undefined, 'iana']\n\n  Object.keys(db).forEach(function forEachMimeType (type) {\n    var mime = db[type]\n    var exts = mime.extensions\n\n    if (!exts || !exts.length) {\n      return\n    }\n\n    // mime -> extensions\n    extensions[type] = exts\n\n    // extension -> mime\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i]\n\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source)\n        var to = preference.indexOf(mime.source)\n\n        if (types[extension] !== 'application/octet-stream' &&\n          (from > to || (from === to && types[extension].substr(0, 12) === 'application/'))) {\n          // skip the remapping\n          continue\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type\n    }\n  })\n}\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport whatwgUrl from 'whatwg-url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","/*eslint no-var:0, prefer-arrow-callback: 0, object-shorthand: 0 */\n'use strict';\n\n\nvar Punycode = require('punycode');\n\n\nvar internals = {};\n\n\n//\n// Read rules from file.\n//\ninternals.rules = require('./data/rules.json').map(function (rule) {\n\n  return {\n    rule: rule,\n    suffix: rule.replace(/^(\\*\\.|\\!)/, ''),\n    punySuffix: -1,\n    wildcard: rule.charAt(0) === '*',\n    exception: rule.charAt(0) === '!'\n  };\n});\n\n\n//\n// Check is given string ends with `suffix`.\n//\ninternals.endsWith = function (str, suffix) {\n\n  return str.indexOf(suffix, str.length - suffix.length) !== -1;\n};\n\n\n//\n// Find rule for a given domain.\n//\ninternals.findRule = function (domain) {\n\n  var punyDomain = Punycode.toASCII(domain);\n  return internals.rules.reduce(function (memo, rule) {\n\n    if (rule.punySuffix === -1){\n      rule.punySuffix = Punycode.toASCII(rule.suffix);\n    }\n    if (!internals.endsWith(punyDomain, '.' + rule.punySuffix) && punyDomain !== rule.punySuffix) {\n      return memo;\n    }\n    // This has been commented out as it never seems to run. This is because\n    // sub tlds always appear after their parents and we never find a shorter\n    // match.\n    //if (memo) {\n    //  var memoSuffix = Punycode.toASCII(memo.suffix);\n    //  if (memoSuffix.length >= punySuffix.length) {\n    //    return memo;\n    //  }\n    //}\n    return rule;\n  }, null);\n};\n\n\n//\n// Error codes and messages.\n//\nexports.errorCodes = {\n  DOMAIN_TOO_SHORT: 'Domain name too short.',\n  DOMAIN_TOO_LONG: 'Domain name too long. It should be no more than 255 chars.',\n  LABEL_STARTS_WITH_DASH: 'Domain name label can not start with a dash.',\n  LABEL_ENDS_WITH_DASH: 'Domain name label can not end with a dash.',\n  LABEL_TOO_LONG: 'Domain name label should be at most 63 chars long.',\n  LABEL_TOO_SHORT: 'Domain name label should be at least 1 character long.',\n  LABEL_INVALID_CHARS: 'Domain name label can only contain alphanumeric characters or dashes.'\n};\n\n\n//\n// Validate domain name and throw if not valid.\n//\n// From wikipedia:\n//\n// Hostnames are composed of series of labels concatenated with dots, as are all\n// domain names. Each label must be between 1 and 63 characters long, and the\n// entire hostname (including the delimiting dots) has a maximum of 255 chars.\n//\n// Allowed chars:\n//\n// * `a-z`\n// * `0-9`\n// * `-` but not as a starting or ending character\n// * `.` as a separator for the textual portions of a domain name\n//\n// * http://en.wikipedia.org/wiki/Domain_name\n// * http://en.wikipedia.org/wiki/Hostname\n//\ninternals.validate = function (input) {\n\n  // Before we can validate we need to take care of IDNs with unicode chars.\n  var ascii = Punycode.toASCII(input);\n\n  if (ascii.length < 1) {\n    return 'DOMAIN_TOO_SHORT';\n  }\n  if (ascii.length > 255) {\n    return 'DOMAIN_TOO_LONG';\n  }\n\n  // Check each part's length and allowed chars.\n  var labels = ascii.split('.');\n  var label;\n\n  for (var i = 0; i < labels.length; ++i) {\n    label = labels[i];\n    if (!label.length) {\n      return 'LABEL_TOO_SHORT';\n    }\n    if (label.length > 63) {\n      return 'LABEL_TOO_LONG';\n    }\n    if (label.charAt(0) === '-') {\n      return 'LABEL_STARTS_WITH_DASH';\n    }\n    if (label.charAt(label.length - 1) === '-') {\n      return 'LABEL_ENDS_WITH_DASH';\n    }\n    if (!/^[a-z0-9\\-]+$/.test(label)) {\n      return 'LABEL_INVALID_CHARS';\n    }\n  }\n};\n\n\n//\n// Public API\n//\n\n\n//\n// Parse domain.\n//\nexports.parse = function (input) {\n\n  if (typeof input !== 'string') {\n    throw new TypeError('Domain name must be a string.');\n  }\n\n  // Force domain to lowercase.\n  var domain = input.slice(0).toLowerCase();\n\n  // Handle FQDN.\n  // TODO: Simply remove trailing dot?\n  if (domain.charAt(domain.length - 1) === '.') {\n    domain = domain.slice(0, domain.length - 1);\n  }\n\n  // Validate and sanitise input.\n  var error = internals.validate(domain);\n  if (error) {\n    return {\n      input: input,\n      error: {\n        message: exports.errorCodes[error],\n        code: error\n      }\n    };\n  }\n\n  var parsed = {\n    input: input,\n    tld: null,\n    sld: null,\n    domain: null,\n    subdomain: null,\n    listed: false\n  };\n\n  var domainParts = domain.split('.');\n\n  // Non-Internet TLD\n  if (domainParts[domainParts.length - 1] === 'local') {\n    return parsed;\n  }\n\n  var handlePunycode = function () {\n\n    if (!/xn--/.test(domain)) {\n      return parsed;\n    }\n    if (parsed.domain) {\n      parsed.domain = Punycode.toASCII(parsed.domain);\n    }\n    if (parsed.subdomain) {\n      parsed.subdomain = Punycode.toASCII(parsed.subdomain);\n    }\n    return parsed;\n  };\n\n  var rule = internals.findRule(domain);\n\n  // Unlisted tld.\n  if (!rule) {\n    if (domainParts.length < 2) {\n      return parsed;\n    }\n    parsed.tld = domainParts.pop();\n    parsed.sld = domainParts.pop();\n    parsed.domain = [parsed.sld, parsed.tld].join('.');\n    if (domainParts.length) {\n      parsed.subdomain = domainParts.pop();\n    }\n    return handlePunycode();\n  }\n\n  // At this point we know the public suffix is listed.\n  parsed.listed = true;\n\n  var tldParts = rule.suffix.split('.');\n  var privateParts = domainParts.slice(0, domainParts.length - tldParts.length);\n\n  if (rule.exception) {\n    privateParts.push(tldParts.shift());\n  }\n\n  parsed.tld = tldParts.join('.');\n\n  if (!privateParts.length) {\n    return handlePunycode();\n  }\n\n  if (rule.wildcard) {\n    tldParts.unshift(privateParts.pop());\n    parsed.tld = tldParts.join('.');\n  }\n\n  if (!privateParts.length) {\n    return handlePunycode();\n  }\n\n  parsed.sld = privateParts.pop();\n  parsed.domain = [parsed.sld,  parsed.tld].join('.');\n\n  if (privateParts.length) {\n    parsed.subdomain = privateParts.join('.');\n  }\n\n  return handlePunycode();\n};\n\n\n//\n// Get domain.\n//\nexports.get = function (domain) {\n\n  if (!domain) {\n    return null;\n  }\n  return exports.parse(domain).domain || null;\n};\n\n\n//\n// Check whether domain belongs to a known public suffix.\n//\nexports.isValid = function (domain) {\n\n  var parsed = exports.parse(domain);\n  return Boolean(parsed.domain && parsed.listed);\n};\n","'use strict';\n\n/** Highest positive signed 32-bit float value */\nconst maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nconst base = 36;\nconst tMin = 1;\nconst tMax = 26;\nconst skew = 38;\nconst damp = 700;\nconst initialBias = 72;\nconst initialN = 128; // 0x80\nconst delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nconst regexPunycode = /^xn--/;\nconst regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nconst regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nconst errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nconst baseMinusTMin = base - tMin;\nconst floor = Math.floor;\nconst stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tconst result = [];\n\tlet length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tconst parts = string.split('@');\n\tlet result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tconst labels = string.split('.');\n\tconst encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tconst output = [];\n\tlet counter = 0;\n\tconst length = string.length;\n\twhile (counter < length) {\n\t\tconst value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tconst extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nconst ucs2encode = array => String.fromCodePoint(...array);\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nconst basicToDigit = function(codePoint) {\n\tif (codePoint - 0x30 < 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 < 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 < 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nconst digitToBasic = function(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nconst adapt = function(delta, numPoints, firstTime) {\n\tlet k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nconst decode = function(input) {\n\t// Don't use UCS-2.\n\tconst output = [];\n\tconst inputLength = input.length;\n\tlet i = 0;\n\tlet n = initialN;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tlet basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (let j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (let index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tlet oldi = i;\n\t\tfor (let w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\n\t\t\tconst digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\n\t\t}\n\n\t\tconst out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\n\t}\n\n\treturn String.fromCodePoint(...output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nconst encode = function(input) {\n\tconst output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tlet inputLength = input.length;\n\n\t// Initialize the state.\n\tlet n = initialN;\n\tlet delta = 0;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points.\n\tfor (const currentValue of input) {\n\t\tif (currentValue < 0x80) {\n\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t}\n\t}\n\n\tlet basicLength = output.length;\n\tlet handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tlet m = maxInt;\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\tm = currentValue;\n\t\t\t}\n\t\t}\n\n\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t// but guard against overflow.\n\t\tconst handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\t\t\tif (currentValue == n) {\n\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\tlet q = delta;\n\t\t\t\tfor (let k = base; /* no condition */; k += base) {\n\t\t\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst qMinusT = q - t;\n\t\t\t\t\tconst baseMinusT = base - t;\n\t\t\t\t\toutput.push(\n\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t);\n\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t}\n\n\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\tdelta = 0;\n\t\t\t\t++handledCPCount;\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nconst toUnicode = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexPunycode.test(string)\n\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t: string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nconst toASCII = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexNonASCII.test(string)\n\t\t\t? 'xn--' + encode(string)\n\t\t\t: string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nconst punycode = {\n\t/**\n\t * A string representing the current Punycode.js version number.\n\t * @memberOf punycode\n\t * @type String\n\t */\n\t'version': '2.1.0',\n\t/**\n\t * An object of methods to convert from JavaScript's internal character\n\t * representation (UCS-2) to Unicode code points, and back.\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode\n\t * @type Object\n\t */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\nexport { ucs2decode, ucs2encode, decode, encode, toASCII, toUnicode };\nexport default punycode;\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n",";(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\n  sax.SAXParser = SAXParser\n  sax.SAXStream = SAXStream\n  sax.createStream = createStream\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ]\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ]\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this\n    clearBuffers(parser)\n    parser.q = parser.c = ''\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n    parser.opt = opt || {}\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'\n    parser.tags = []\n    parser.closed = parser.closedRoot = parser.sawRoot = false\n    parser.tag = parser.error = null\n    parser.strict = !!strict\n    parser.noscript = !!(strict || parser.opt.noscript)\n    parser.state = S.BEGIN\n    parser.strictEntities = parser.opt.strictEntities\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\n    parser.attribList = []\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS)\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0\n    }\n    emit(parser, 'onready')\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o\n      var newf = new F()\n      return newf\n    }\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = []\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n      return a\n    }\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    var maxActual = 0\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser)\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata)\n            parser.cdata = ''\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script)\n            parser.script = ''\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i])\n        }\n      }\n      maxActual = Math.max(maxActual, len)\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual\n    parser.bufferCheckPosition = m + parser.position\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = ''\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser)\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata)\n      parser.cdata = ''\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this) },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this) }\n  }\n\n  var Stream\n  try {\n    Stream = require('stream').Stream\n  } catch (ex) {\n    Stream = function () {}\n  }\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  })\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this)\n\n    this._parser = new SAXParser(strict, opt)\n    this.writable = true\n    this.readable = true\n\n    var me = this\n\n    this._parser.onend = function () {\n      me.emit('end')\n    }\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er)\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null\n    }\n\n    this._decoder = null\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev)\n            me._parser['on' + ev] = h\n            return h\n          }\n          me.on(ev, h)\n        },\n        enumerable: true,\n        configurable: false\n      })\n    })\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  })\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = require('string_decoder').StringDecoder\n        this._decoder = new SD('utf8')\n      }\n      data = this._decoder.write(data)\n    }\n\n    this._parser.write(data.toString())\n    this.emit('data', data)\n    return true\n  }\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk)\n    }\n    this._parser.end()\n    return true\n  }\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)\n        args.splice(0, 0, ev)\n        me.emit.apply(me, args)\n      }\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  }\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  var CDATA = '[CDATA['\n  var DOCTYPE = 'DOCTYPE'\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  function isWhitespace (c) {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t'\n  }\n\n  function isQuote (c) {\n    return c === '\"' || c === '\\''\n  }\n\n  function isAttribEnd (c) {\n    return c === '>' || isWhitespace(c)\n  }\n\n  function isMatch (regex, c) {\n    return regex.test(c)\n  }\n\n  function notMatch (regex, c) {\n    return !isMatch(regex, c)\n  }\n\n  var S = 0\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  }\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  }\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  }\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n  })\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s\n  }\n\n  // shorthand\n  S = sax.STATE\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data)\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser)\n    emit(parser, nodeType, data)\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode)\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode)\n    parser.textNode = ''\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim()\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ')\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser)\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c\n    }\n    er = new Error(er)\n    parser.error = er\n    emit(parser, 'onerror', er)\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end')\n    }\n    closeText(parser)\n    parser.c = ''\n    parser.closed = true\n    emit(parser, 'onend')\n    SAXParser.call(parser, parser.strict, parser.opt)\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message)\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    var tag = parser.tag = { name: parser.tagName, attributes: {} }\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns\n    }\n    parser.attribList.length = 0\n    emitNode(parser, 'onopentagstart', tag)\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':')\n    var qualName = i < 0 ? [ '', name ] : name.split(':')\n    var prefix = qualName[0]\n    var local = qualName[1]\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns'\n      local = ''\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]()\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = ''\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true)\n      var prefix = qn.prefix\n      var local = qn.local\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else {\n          var tag = parser.tag\n          var parent = parser.tags[parser.tags.length - 1] || parser\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns)\n          }\n          tag.ns[local] = parser.attribValue\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue])\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      })\n    }\n\n    parser.attribName = parser.attribValue = ''\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName)\n      tag.prefix = qn.prefix\n      tag.local = qn.local\n      tag.uri = tag.ns[qn.prefix] || ''\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName))\n        tag.uri = qn.prefix\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          })\n        })\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i]\n        var name = nv[0]\n        var value = nv[1]\n        var qualName = qname(name, true)\n        var prefix = qualName.prefix\n        var local = qualName.local\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        }\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix))\n          a.uri = prefix\n        }\n        parser.tag.attributes[name] = a\n        emitNode(parser, 'onattribute', a)\n      }\n      parser.attribList.length = 0\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing\n\n    // process the tag\n    parser.sawRoot = true\n    parser.tags.push(parser.tag)\n    emitNode(parser, 'onopentag', parser.tag)\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT\n      } else {\n        parser.state = S.TEXT\n      }\n      parser.tag = null\n      parser.tagName = ''\n    }\n    parser.attribName = parser.attribValue = ''\n    parser.attribList.length = 0\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.')\n      parser.textNode += '</>'\n      parser.state = S.TEXT\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>'\n        parser.tagName = ''\n        parser.state = S.SCRIPT\n        return\n      }\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length\n    var tagName = parser.tagName\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]()\n    }\n    var closeTo = tagName\n    while (t--) {\n      var close = parser.tags[t]\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag')\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)\n      parser.textNode += '</' + parser.tagName + '>'\n      parser.state = S.TEXT\n      return\n    }\n    parser.tagName = tagName\n    var s = parser.tags.length\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop()\n      parser.tagName = parser.tag.name\n      emitNode(parser, 'onclosetag', parser.tagName)\n\n      var x = {}\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i]\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p]\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })\n        })\n      }\n    }\n    if (t === 0) parser.closedRoot = true\n    parser.tagName = parser.attribValue = parser.attribName = ''\n    parser.attribList.length = 0\n    parser.state = S.TEXT\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity\n    var entityLC = entity.toLowerCase()\n    var num\n    var numStr = ''\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2)\n        num = parseInt(entity, 16)\n        numStr = num.toString(16)\n      } else {\n        entity = entity.slice(1)\n        num = parseInt(entity, 10)\n        numStr = num.toString(10)\n      }\n    }\n    entity = entity.replace(/^0+/, '')\n    if (isNaN(num) || numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity')\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA\n      parser.startTagPosition = parser.position\n    } else if (!isWhitespace(c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.')\n      parser.textNode = c\n      parser.state = S.TEXT\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = ''\n    if (i < chunk.length) {\n      result = chunk.charAt(i)\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString()\n    }\n    var i = 0\n    var c = ''\n    while (true) {\n      c = charAt(chunk, i++)\n      parser.c = c\n\n      if (!c) {\n        break\n      }\n\n      if (parser.trackPosition) {\n        parser.position++\n        if (c === '\\n') {\n          parser.line++\n          parser.column = 0\n        } else {\n          parser.column++\n        }\n      }\n\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++)\n              if (c && parser.trackPosition) {\n                parser.position++\n                if (c === '\\n') {\n                  parser.line++\n                  parser.column = 0\n                } else {\n                  parser.column++\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1)\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA\n            parser.startTagPosition = parser.position\n          } else {\n            if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.')\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY\n            } else {\n              parser.textNode += c\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING\n          } else {\n            parser.script += c\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG\n          } else {\n            parser.script += '<' + c\n            parser.state = S.SCRIPT\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL\n            parser.sgmlDecl = ''\n          } else if (isWhitespace(c)) {\n            // wait for it...\n          } else if (isMatch(nameStart, c)) {\n            parser.state = S.OPEN_TAG\n            parser.tagName = c\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG\n            parser.tagName = ''\n          } else if (c === '?') {\n            parser.state = S.PROC_INST\n            parser.procInstName = parser.procInstBody = ''\n          } else {\n            strictFail(parser, 'Unencoded <')\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition\n              c = new Array(pad).join(' ') + c\n            }\n            parser.textNode += '<' + c\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.SGML_DECL:\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata')\n            parser.state = S.CDATA\n            parser.sgmlDecl = ''\n            parser.cdata = ''\n          } else if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT\n            parser.comment = ''\n            parser.sgmlDecl = ''\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration')\n            }\n            parser.doctype = ''\n            parser.sgmlDecl = ''\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)\n            parser.sgmlDecl = ''\n            parser.state = S.TEXT\n          } else if (isQuote(c)) {\n            parser.state = S.SGML_DECL_QUOTED\n            parser.sgmlDecl += c\n          } else {\n            parser.sgmlDecl += c\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL\n            parser.q = ''\n          }\n          parser.sgmlDecl += c\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT\n            emitNode(parser, 'ondoctype', parser.doctype)\n            parser.doctype = true // just remember that we saw it.\n          } else {\n            parser.doctype += c\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD\n            } else if (isQuote(c)) {\n              parser.state = S.DOCTYPE_QUOTED\n              parser.q = c\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.q = ''\n            parser.state = S.DOCTYPE\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          parser.doctype += c\n          if (c === ']') {\n            parser.state = S.DOCTYPE\n          } else if (isQuote(c)) {\n            parser.state = S.DOCTYPE_DTD_QUOTED\n            parser.q = c\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD\n            parser.q = ''\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING\n          } else {\n            parser.comment += c\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED\n            parser.comment = textopts(parser.opt, parser.comment)\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment)\n            }\n            parser.comment = ''\n          } else {\n            parser.comment += '-' + c\n            parser.state = S.COMMENT\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment')\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c\n            parser.state = S.COMMENT\n          } else {\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING\n          } else {\n            parser.cdata += c\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2\n          } else {\n            parser.cdata += ']' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata)\n            }\n            emitNode(parser, 'onclosecdata')\n            parser.cdata = ''\n            parser.state = S.TEXT\n          } else if (c === ']') {\n            parser.cdata += ']'\n          } else {\n            parser.cdata += ']]' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else if (isWhitespace(c)) {\n            parser.state = S.PROC_INST_BODY\n          } else {\n            parser.procInstName += c\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && isWhitespace(c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else {\n            parser.procInstBody += c\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            })\n            parser.procInstName = parser.procInstBody = ''\n            parser.state = S.TEXT\n          } else {\n            parser.procInstBody += '?' + c\n            parser.state = S.PROC_INST_BODY\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else {\n            newTag(parser)\n            if (c === '>') {\n              openTag(parser)\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH\n            } else {\n              if (!isWhitespace(c)) {\n                strictFail(parser, 'Invalid character in tag name')\n              }\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true)\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >')\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (isWhitespace(c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value')\n            parser.attribValue = parser.attribName\n            attrib(parser)\n            openTag(parser)\n          } else if (isWhitespace(c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE\n          } else if (isMatch(nameBody, c)) {\n            parser.attribName += c\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (isWhitespace(c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value')\n            parser.tag.attributes[parser.attribName] = ''\n            parser.attribValue = ''\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            })\n            parser.attribName = ''\n            if (c === '>') {\n              openTag(parser)\n            } else if (isMatch(nameStart, c)) {\n              parser.attribName = c\n              parser.state = S.ATTRIB_NAME\n            } else {\n              strictFail(parser, 'Invalid attribute name')\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (isWhitespace(c)) {\n            continue\n          } else if (isQuote(c)) {\n            parser.q = c\n            parser.state = S.ATTRIB_VALUE_QUOTED\n          } else {\n            strictFail(parser, 'Unquoted attribute value')\n            parser.state = S.ATTRIB_VALUE_UNQUOTED\n            parser.attribValue = c\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          parser.q = ''\n          parser.state = S.ATTRIB_VALUE_CLOSED\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (isWhitespace(c)) {\n            parser.state = S.ATTRIB\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes')\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (!isAttribEnd(c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          if (c === '>') {\n            openTag(parser)\n          } else {\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (isWhitespace(c)) {\n              continue\n            } else if (notMatch(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c\n                parser.state = S.SCRIPT\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.')\n              }\n            } else {\n              parser.tagName = c\n            }\n          } else if (c === '>') {\n            closeTag(parser)\n          } else if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName\n            parser.tagName = ''\n            parser.state = S.SCRIPT\n          } else {\n            if (!isWhitespace(c)) {\n              strictFail(parser, 'Invalid tagname in closing tag')\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (isWhitespace(c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag')\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState\n          var buffer\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT\n              buffer = 'textNode'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED\n              buffer = 'attribValue'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED\n              buffer = 'attribValue'\n              break\n          }\n\n          if (c === ';') {\n            parser[buffer] += parseEntity(parser)\n            parser.entity = ''\n            parser.state = returnState\n          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c\n          } else {\n            strictFail(parser, 'Invalid character in entity name')\n            parser[buffer] += '&' + parser.entity + c\n            parser.entity = ''\n            parser.state = returnState\n          }\n\n          continue\n\n        default:\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser)\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  /* istanbul ignore next */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode\n      var floor = Math.floor\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000\n        var codeUnits = []\n        var highSurrogate\n        var lowSurrogate\n        var index = -1\n        var length = arguments.length\n        if (!length) {\n          return ''\n        }\n        var result = ''\n        while (++index < length) {\n          var codePoint = Number(arguments[index])\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint)\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000\n            highSurrogate = (codePoint >> 10) + 0xD800\n            lowSurrogate = (codePoint % 0x400) + 0xDC00\n            codeUnits.push(highSurrogate, lowSurrogate)\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits)\n            codeUnits.length = 0\n          }\n        }\n        return result\n      }\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        })\n      } else {\n        String.fromCodePoint = fromCodePoint\n      }\n    }())\n  }\n})(typeof exports === 'undefined' ? this.sax = {} : exports)\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","'use strict'\n\nfunction isFunction (funktion) {\n  return typeof funktion === 'function'\n}\n\n// Default to complaining loudly when things don't go according to plan.\nvar logger = console.error.bind(console)\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty (obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name)\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  })\n}\n\n// Keep initialization idempotent.\nfunction shimmer (options) {\n  if (options && options.logger) {\n    if (!isFunction(options.logger)) logger(\"new logger isn't a function, not replacing\")\n    else logger = options.logger\n  }\n}\n\nfunction wrap (nodule, name, wrapper) {\n  if (!nodule || !nodule[name]) {\n    logger('no original function ' + name + ' to wrap')\n    return\n  }\n\n  if (!wrapper) {\n    logger('no wrapper function')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!isFunction(nodule[name]) || !isFunction(wrapper)) {\n    logger('original object and wrapper must be functions')\n    return\n  }\n\n  var original = nodule[name]\n  var wrapped = wrapper(original, name)\n\n  defineProperty(wrapped, '__original', original)\n  defineProperty(wrapped, '__unwrap', function () {\n    if (nodule[name] === wrapped) defineProperty(nodule, name, original)\n  })\n  defineProperty(wrapped, '__wrapped', true)\n\n  defineProperty(nodule, name, wrapped)\n  return wrapped\n}\n\nfunction massWrap (nodules, names, wrapper) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to wrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      wrap(nodule, name, wrapper)\n    })\n  })\n}\n\nfunction unwrap (nodule, name) {\n  if (!nodule || !nodule[name]) {\n    logger('no function to unwrap.')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!nodule[name].__unwrap) {\n    logger('no original to unwrap to -- has ' + name + ' already been unwrapped?')\n  } else {\n    return nodule[name].__unwrap()\n  }\n}\n\nfunction massUnwrap (nodules, names) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to unwrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      unwrap(nodule, name)\n    })\n  })\n}\n\nshimmer.wrap = wrap\nshimmer.massWrap = massWrap\nshimmer.unwrap = unwrap\nshimmer.massUnwrap = massUnwrap\n\nmodule.exports = shimmer\n","// Copyright 2012 the V8 project authors. All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n//       copyright notice, this list of conditions and the following\n//       disclaimer in the documentation and/or other materials provided\n//       with the distribution.\n//     * Neither the name of Google Inc. nor the names of its\n//       contributors may be used to endorse or promote products derived\n//       from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nfunction FormatErrorString(error) {\n  try {\n    return Error.prototype.toString.call(error);\n  } catch (e) {\n    try {\n      return \"<error: \" + e + \">\";\n    } catch (ee) {\n      return \"<error>\";\n    }\n  }\n}\n\nmodule.exports = function FormatStackTrace(error, frames) {\n  var lines = [];\n  lines.push(FormatErrorString(error));\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n    var line;\n    try {\n      line = frame.toString();\n    } catch (e) {\n      try {\n        line = \"<error: \" + e + \">\";\n      } catch (ee) {\n        // Any code that reaches this point is seriously nasty!\n        line = \"<error>\";\n      }\n    }\n    lines.push(\"    at \" + line);\n  }\n  return lines.join(\"\\n\");\n};\n","// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._stackChain) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._stackChain.version === require('./package.json').version) {\n    module.exports = global._stackChain;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of stack-chain found');\n  }\n}\n// Yay, no other stack-chain copy exists, yet :/\nelse {\n  module.exports = global._stackChain = require('./stack-chain');\n}\n","\n// use a already existing formater or fallback to the default v8 formater\nvar defaultFormater = require('./format.js');\n\n// public define API\nfunction stackChain() {\n  this.extend = new TraceModifier();\n  this.filter = new TraceModifier();\n  this.format = new StackFormater();\n  this.version = require('./package.json').version;\n}\n\n\nvar SHORTCIRCUIT_CALLSITE = false;\nstackChain.prototype.callSite = function collectCallSites(options) {\n  if (!options) options = {};\n\n  // Get CallSites\n  SHORTCIRCUIT_CALLSITE = true;\n  var obj = {};\n  Error.captureStackTrace(obj, collectCallSites);\n  var callSites = obj.stack;\n  SHORTCIRCUIT_CALLSITE = false;\n\n  // Slice\n  callSites = callSites.slice(options.slice || 0);\n\n  // Modify CallSites\n  if (options.extend) callSites = this.extend._modify(obj, callSites);\n  if (options.filter) callSites = this.filter._modify(obj, callSites);\n\n  // Done\n  return callSites;\n};\n\nvar chain = new stackChain();\n\nfunction TraceModifier() {\n  this._modifiers = [];\n}\n\nTraceModifier.prototype._modify = function (error, frames) {\n  for (var i = 0, l = this._modifiers.length; i < l; i++) {\n    frames = this._modifiers[i](error, frames);\n  }\n\n  return frames;\n};\n\nTraceModifier.prototype.attach = function (modifier) {\n  this._modifiers.push(modifier);\n};\n\nTraceModifier.prototype.deattach = function (modifier) {\n  var index = this._modifiers.indexOf(modifier);\n\n  if (index === -1) return false;\n\n  this._modifiers.splice(index, 1);\n  return true;\n};\n\nfunction StackFormater() {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n}\n\nStackFormater.prototype.replace = function (formater) {\n  if (formater) {\n    this._formater = formater;\n  } else {\n    this.restore();\n  }\n};\n\nStackFormater.prototype.restore  = function () {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n};\n\nStackFormater.prototype._backup = function () {\n  this._previous = this._formater;\n};\n\nStackFormater.prototype._roolback = function () {\n  if (this._previous === defaultFormater) {\n    this.replace(undefined);\n  } else {\n    this.replace(this._previous);\n  }\n\n  this._previous = undefined;\n};\n\n\n//\n// Set Error.prepareStackTrace thus allowing stack-chain\n// to take control of the Error().stack formating.\n//\n\n// If there already is a custom stack formater, then set\n// that as the stack-chain formater.\nif (Error.prepareStackTrace) {\n    chain.format.replace(Error.prepareStackTrace);\n}\n\nvar SHORTCIRCUIT_FORMATER = false;\nfunction prepareStackTrace(error, originalFrames) {\n  if (SHORTCIRCUIT_CALLSITE) return originalFrames;\n  if (SHORTCIRCUIT_FORMATER) return defaultFormater(error, originalFrames);\n\n  // Make a loss copy of originalFrames\n  var frames = originalFrames.concat();\n\n  // extend frames\n  frames = chain.extend._modify(error, frames);\n\n  // filter frames\n  frames = chain.filter._modify(error, frames);\n\n  // reduce frames to match Error.stackTraceLimit\n  frames = frames.slice(0, Error.stackTraceLimit);\n\n  // Set the callSite property\n  // But only if it hasn't been explicitly set, otherwise\n  // error.stack would have unintended side effects. Check also for\n  // non-extensible/sealed objects, such as those from Google's Closure Library\n  if (Object.isExtensible(error) &&\n      (Object.getOwnPropertyDescriptor(error, \"callSite\") === undefined)) {\n    error.callSite = {\n      original: originalFrames,\n      mutated: frames\n    };\n  }\n\n  // format frames\n  SHORTCIRCUIT_FORMATER = true;\n  var format = chain.format._formater(error, frames);\n  SHORTCIRCUIT_FORMATER = false;\n\n  return format;\n}\n\n// Replace the v8 stack trace creator\nObject.defineProperty(Error, 'prepareStackTrace', {\n  'get': function () {\n    return prepareStackTrace;\n  },\n\n  'set': function (formater) {\n    // If formater is prepareStackTrace it means that someone ran\n    // var old = Error.prepareStackTrace;\n    // Error.prepareStackTrace = custom\n    // new Error().stack\n    // Error.prepareStackTrace = old;\n    // The effect of this, should be that the old behaviour is restored.\n    if (formater === prepareStackTrace) {\n      chain.format._roolback();\n    }\n    // Error.prepareStackTrace was set, this means that someone is\n    // trying to take control of the Error().stack format. Make\n    // them belive they succeeded by setting them up as the stack-chain\n    // formater.\n    else {\n      chain.format._backup();\n      chain.format.replace(formater);\n    }\n  }\n});\n\n//\n// Manage call site storeage\n//\nfunction callSiteGetter() {\n  // calculate call site object\n  this.stack;\n\n  // return call site object\n  return this.callSite;\n}\n\nObject.defineProperty(Error.prototype, 'callSite', {\n  'get': callSiteGetter,\n\n  'set': function (frames) {\n    // In case callSite was set before [[getter]], just set\n    // the value\n    Object.defineProperty(this, 'callSite', {\n        value: frames,\n        writable: true,\n        configurable: true\n    });\n  },\n\n  configurable: true\n});\n\nmodule.exports = chain;\n","/*!\n * Copyright (c) 2015-2020, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\nconst punycode = require(\"punycode/\");\nconst urlParse = require(\"url-parse\");\nconst pubsuffix = require(\"./pubsuffix-psl\");\nconst Store = require(\"./store\").Store;\nconst MemoryCookieStore = require(\"./memstore\").MemoryCookieStore;\nconst pathMatch = require(\"./pathMatch\").pathMatch;\nconst validators = require(\"./validators.js\");\nconst VERSION = require(\"./version\");\nconst { fromCallback } = require(\"universalify\");\nconst { getCustomInspectSymbol } = require(\"./utilHelper\");\n\n// From RFC6265 S4.1.1\n// note that it excludes \\x3B \";\"\nconst COOKIE_OCTETS = /^[\\x21\\x23-\\x2B\\x2D-\\x3A\\x3C-\\x5B\\x5D-\\x7E]+$/;\n\nconst CONTROL_CHARS = /[\\x00-\\x1F]/;\n\n// From Chromium // '\\r', '\\n' and '\\0' should be treated as a terminator in\n// the \"relaxed\" mode, see:\n// https://github.com/ChromiumWebApps/chromium/blob/b3d3b4da8bb94c1b2e061600df106d590fda3620/net/cookies/parsed_cookie.cc#L60\nconst TERMINATORS = [\"\\n\", \"\\r\", \"\\0\"];\n\n// RFC6265 S4.1.1 defines path value as 'any CHAR except CTLs or \";\"'\n// Note ';' is \\x3B\nconst PATH_VALUE = /[\\x20-\\x3A\\x3C-\\x7E]+/;\n\n// date-time parsing constants (RFC6265 S5.1.1)\n\nconst DATE_DELIM = /[\\x09\\x20-\\x2F\\x3B-\\x40\\x5B-\\x60\\x7B-\\x7E]/;\n\nconst MONTH_TO_NUM = {\n  jan: 0,\n  feb: 1,\n  mar: 2,\n  apr: 3,\n  may: 4,\n  jun: 5,\n  jul: 6,\n  aug: 7,\n  sep: 8,\n  oct: 9,\n  nov: 10,\n  dec: 11\n};\n\nconst MAX_TIME = 2147483647000; // 31-bit max\nconst MIN_TIME = 0; // 31-bit min\nconst SAME_SITE_CONTEXT_VAL_ERR =\n  'Invalid sameSiteContext option for getCookies(); expected one of \"strict\", \"lax\", or \"none\"';\n\nfunction checkSameSiteContext(value) {\n  validators.validate(validators.isNonEmptyString(value), value);\n  const context = String(value).toLowerCase();\n  if (context === \"none\" || context === \"lax\" || context === \"strict\") {\n    return context;\n  } else {\n    return null;\n  }\n}\n\nconst PrefixSecurityEnum = Object.freeze({\n  SILENT: \"silent\",\n  STRICT: \"strict\",\n  DISABLED: \"unsafe-disabled\"\n});\n\n// Dumped from ip-regex@4.0.0, with the following changes:\n// * all capturing groups converted to non-capturing -- \"(?:)\"\n// * support for IPv6 Scoped Literal (\"%eth1\") removed\n// * lowercase hexadecimal only\nconst IP_REGEX_LOWERCASE = /(?:^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$)|(?:^(?:(?:[a-f\\d]{1,4}:){7}(?:[a-f\\d]{1,4}|:)|(?:[a-f\\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|:[a-f\\d]{1,4}|:)|(?:[a-f\\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-f\\d]{1,4}){1,2}|:)|(?:[a-f\\d]{1,4}:){4}(?:(?::[a-f\\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-f\\d]{1,4}){1,3}|:)|(?:[a-f\\d]{1,4}:){3}(?:(?::[a-f\\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-f\\d]{1,4}){1,4}|:)|(?:[a-f\\d]{1,4}:){2}(?:(?::[a-f\\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-f\\d]{1,4}){1,5}|:)|(?:[a-f\\d]{1,4}:){1}(?:(?::[a-f\\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-f\\d]{1,4}){1,6}|:)|(?::(?:(?::[a-f\\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-f\\d]{1,4}){1,7}|:)))$)/;\nconst IP_V6_REGEX = `\n\\\\[?(?:\n(?:[a-fA-F\\\\d]{1,4}:){7}(?:[a-fA-F\\\\d]{1,4}|:)|\n(?:[a-fA-F\\\\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}|:[a-fA-F\\\\d]{1,4}|:)|\n(?:[a-fA-F\\\\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}|(?::[a-fA-F\\\\d]{1,4}){1,2}|:)|\n(?:[a-fA-F\\\\d]{1,4}:){4}(?:(?::[a-fA-F\\\\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}|(?::[a-fA-F\\\\d]{1,4}){1,3}|:)|\n(?:[a-fA-F\\\\d]{1,4}:){3}(?:(?::[a-fA-F\\\\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}|(?::[a-fA-F\\\\d]{1,4}){1,4}|:)|\n(?:[a-fA-F\\\\d]{1,4}:){2}(?:(?::[a-fA-F\\\\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}|(?::[a-fA-F\\\\d]{1,4}){1,5}|:)|\n(?:[a-fA-F\\\\d]{1,4}:){1}(?:(?::[a-fA-F\\\\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}|(?::[a-fA-F\\\\d]{1,4}){1,6}|:)|\n(?::(?:(?::[a-fA-F\\\\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}|(?::[a-fA-F\\\\d]{1,4}){1,7}|:))\n)(?:%[0-9a-zA-Z]{1,})?\\\\]?\n`\n  .replace(/\\s*\\/\\/.*$/gm, \"\")\n  .replace(/\\n/g, \"\")\n  .trim();\nconst IP_V6_REGEX_OBJECT = new RegExp(`^${IP_V6_REGEX}$`);\n\n/*\n * Parses a Natural number (i.e., non-negative integer) with either the\n *    <min>*<max>DIGIT ( non-digit *OCTET )\n * or\n *    <min>*<max>DIGIT\n * grammar (RFC6265 S5.1.1).\n *\n * The \"trailingOK\" boolean controls if the grammar accepts a\n * \"( non-digit *OCTET )\" trailer.\n */\nfunction parseDigits(token, minDigits, maxDigits, trailingOK) {\n  let count = 0;\n  while (count < token.length) {\n    const c = token.charCodeAt(count);\n    // \"non-digit = %x00-2F / %x3A-FF\"\n    if (c <= 0x2f || c >= 0x3a) {\n      break;\n    }\n    count++;\n  }\n\n  // constrain to a minimum and maximum number of digits.\n  if (count < minDigits || count > maxDigits) {\n    return null;\n  }\n\n  if (!trailingOK && count != token.length) {\n    return null;\n  }\n\n  return parseInt(token.substr(0, count), 10);\n}\n\nfunction parseTime(token) {\n  const parts = token.split(\":\");\n  const result = [0, 0, 0];\n\n  /* RF6256 S5.1.1:\n   *      time            = hms-time ( non-digit *OCTET )\n   *      hms-time        = time-field \":\" time-field \":\" time-field\n   *      time-field      = 1*2DIGIT\n   */\n\n  if (parts.length !== 3) {\n    return null;\n  }\n\n  for (let i = 0; i < 3; i++) {\n    // \"time-field\" must be strictly \"1*2DIGIT\", HOWEVER, \"hms-time\" can be\n    // followed by \"( non-digit *OCTET )\" so therefore the last time-field can\n    // have a trailer\n    const trailingOK = i == 2;\n    const num = parseDigits(parts[i], 1, 2, trailingOK);\n    if (num === null) {\n      return null;\n    }\n    result[i] = num;\n  }\n\n  return result;\n}\n\nfunction parseMonth(token) {\n  token = String(token)\n    .substr(0, 3)\n    .toLowerCase();\n  const num = MONTH_TO_NUM[token];\n  return num >= 0 ? num : null;\n}\n\n/*\n * RFC6265 S5.1.1 date parser (see RFC for full grammar)\n */\nfunction parseDate(str) {\n  if (!str) {\n    return;\n  }\n\n  /* RFC6265 S5.1.1:\n   * 2. Process each date-token sequentially in the order the date-tokens\n   * appear in the cookie-date\n   */\n  const tokens = str.split(DATE_DELIM);\n  if (!tokens) {\n    return;\n  }\n\n  let hour = null;\n  let minute = null;\n  let second = null;\n  let dayOfMonth = null;\n  let month = null;\n  let year = null;\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i].trim();\n    if (!token.length) {\n      continue;\n    }\n\n    let result;\n\n    /* 2.1. If the found-time flag is not set and the token matches the time\n     * production, set the found-time flag and set the hour- value,\n     * minute-value, and second-value to the numbers denoted by the digits in\n     * the date-token, respectively.  Skip the remaining sub-steps and continue\n     * to the next date-token.\n     */\n    if (second === null) {\n      result = parseTime(token);\n      if (result) {\n        hour = result[0];\n        minute = result[1];\n        second = result[2];\n        continue;\n      }\n    }\n\n    /* 2.2. If the found-day-of-month flag is not set and the date-token matches\n     * the day-of-month production, set the found-day-of- month flag and set\n     * the day-of-month-value to the number denoted by the date-token.  Skip\n     * the remaining sub-steps and continue to the next date-token.\n     */\n    if (dayOfMonth === null) {\n      // \"day-of-month = 1*2DIGIT ( non-digit *OCTET )\"\n      result = parseDigits(token, 1, 2, true);\n      if (result !== null) {\n        dayOfMonth = result;\n        continue;\n      }\n    }\n\n    /* 2.3. If the found-month flag is not set and the date-token matches the\n     * month production, set the found-month flag and set the month-value to\n     * the month denoted by the date-token.  Skip the remaining sub-steps and\n     * continue to the next date-token.\n     */\n    if (month === null) {\n      result = parseMonth(token);\n      if (result !== null) {\n        month = result;\n        continue;\n      }\n    }\n\n    /* 2.4. If the found-year flag is not set and the date-token matches the\n     * year production, set the found-year flag and set the year-value to the\n     * number denoted by the date-token.  Skip the remaining sub-steps and\n     * continue to the next date-token.\n     */\n    if (year === null) {\n      // \"year = 2*4DIGIT ( non-digit *OCTET )\"\n      result = parseDigits(token, 2, 4, true);\n      if (result !== null) {\n        year = result;\n        /* From S5.1.1:\n         * 3.  If the year-value is greater than or equal to 70 and less\n         * than or equal to 99, increment the year-value by 1900.\n         * 4.  If the year-value is greater than or equal to 0 and less\n         * than or equal to 69, increment the year-value by 2000.\n         */\n        if (year >= 70 && year <= 99) {\n          year += 1900;\n        } else if (year >= 0 && year <= 69) {\n          year += 2000;\n        }\n      }\n    }\n  }\n\n  /* RFC 6265 S5.1.1\n   * \"5. Abort these steps and fail to parse the cookie-date if:\n   *     *  at least one of the found-day-of-month, found-month, found-\n   *        year, or found-time flags is not set,\n   *     *  the day-of-month-value is less than 1 or greater than 31,\n   *     *  the year-value is less than 1601,\n   *     *  the hour-value is greater than 23,\n   *     *  the minute-value is greater than 59, or\n   *     *  the second-value is greater than 59.\n   *     (Note that leap seconds cannot be represented in this syntax.)\"\n   *\n   * So, in order as above:\n   */\n  if (\n    dayOfMonth === null ||\n    month === null ||\n    year === null ||\n    second === null ||\n    dayOfMonth < 1 ||\n    dayOfMonth > 31 ||\n    year < 1601 ||\n    hour > 23 ||\n    minute > 59 ||\n    second > 59\n  ) {\n    return;\n  }\n\n  return new Date(Date.UTC(year, month, dayOfMonth, hour, minute, second));\n}\n\nfunction formatDate(date) {\n  validators.validate(validators.isDate(date), date);\n  return date.toUTCString();\n}\n\n// S5.1.2 Canonicalized Host Names\nfunction canonicalDomain(str) {\n  if (str == null) {\n    return null;\n  }\n  str = str.trim().replace(/^\\./, \"\"); // S4.1.2.3 & S5.2.3: ignore leading .\n\n  if (IP_V6_REGEX_OBJECT.test(str)) {\n    str = str.replace(\"[\", \"\").replace(\"]\", \"\");\n  }\n\n  // convert to IDN if any non-ASCII characters\n  if (punycode && /[^\\u0001-\\u007f]/.test(str)) {\n    str = punycode.toASCII(str);\n  }\n\n  return str.toLowerCase();\n}\n\n// S5.1.3 Domain Matching\nfunction domainMatch(str, domStr, canonicalize) {\n  if (str == null || domStr == null) {\n    return null;\n  }\n  if (canonicalize !== false) {\n    str = canonicalDomain(str);\n    domStr = canonicalDomain(domStr);\n  }\n\n  /*\n   * S5.1.3:\n   * \"A string domain-matches a given domain string if at least one of the\n   * following conditions hold:\"\n   *\n   * \" o The domain string and the string are identical. (Note that both the\n   * domain string and the string will have been canonicalized to lower case at\n   * this point)\"\n   */\n  if (str == domStr) {\n    return true;\n  }\n\n  /* \" o All of the following [three] conditions hold:\" */\n\n  /* \"* The domain string is a suffix of the string\" */\n  const idx = str.lastIndexOf(domStr);\n  if (idx <= 0) {\n    return false; // it's a non-match (-1) or prefix (0)\n  }\n\n  // next, check it's a proper suffix\n  // e.g., \"a.b.c\".indexOf(\"b.c\") === 2\n  // 5 === 3+2\n  if (str.length !== domStr.length + idx) {\n    return false; // it's not a suffix\n  }\n\n  /* \"  * The last character of the string that is not included in the\n   * domain string is a %x2E (\".\") character.\" */\n  if (str.substr(idx - 1, 1) !== \".\") {\n    return false; // doesn't align on \".\"\n  }\n\n  /* \"  * The string is a host name (i.e., not an IP address).\" */\n  if (IP_REGEX_LOWERCASE.test(str)) {\n    return false; // it's an IP address\n  }\n\n  return true;\n}\n\n// RFC6265 S5.1.4 Paths and Path-Match\n\n/*\n * \"The user agent MUST use an algorithm equivalent to the following algorithm\n * to compute the default-path of a cookie:\"\n *\n * Assumption: the path (and not query part or absolute uri) is passed in.\n */\nfunction defaultPath(path) {\n  // \"2. If the uri-path is empty or if the first character of the uri-path is not\n  // a %x2F (\"/\") character, output %x2F (\"/\") and skip the remaining steps.\n  if (!path || path.substr(0, 1) !== \"/\") {\n    return \"/\";\n  }\n\n  // \"3. If the uri-path contains no more than one %x2F (\"/\") character, output\n  // %x2F (\"/\") and skip the remaining step.\"\n  if (path === \"/\") {\n    return path;\n  }\n\n  const rightSlash = path.lastIndexOf(\"/\");\n  if (rightSlash === 0) {\n    return \"/\";\n  }\n\n  // \"4. Output the characters of the uri-path from the first character up to,\n  // but not including, the right-most %x2F (\"/\").\"\n  return path.slice(0, rightSlash);\n}\n\nfunction trimTerminator(str) {\n  if (validators.isEmptyString(str)) return str;\n  for (let t = 0; t < TERMINATORS.length; t++) {\n    const terminatorIdx = str.indexOf(TERMINATORS[t]);\n    if (terminatorIdx !== -1) {\n      str = str.substr(0, terminatorIdx);\n    }\n  }\n\n  return str;\n}\n\nfunction parseCookiePair(cookiePair, looseMode) {\n  cookiePair = trimTerminator(cookiePair);\n  validators.validate(validators.isString(cookiePair), cookiePair);\n\n  let firstEq = cookiePair.indexOf(\"=\");\n  if (looseMode) {\n    if (firstEq === 0) {\n      // '=' is immediately at start\n      cookiePair = cookiePair.substr(1);\n      firstEq = cookiePair.indexOf(\"=\"); // might still need to split on '='\n    }\n  } else {\n    // non-loose mode\n    if (firstEq <= 0) {\n      // no '=' or is at start\n      return; // needs to have non-empty \"cookie-name\"\n    }\n  }\n\n  let cookieName, cookieValue;\n  if (firstEq <= 0) {\n    cookieName = \"\";\n    cookieValue = cookiePair.trim();\n  } else {\n    cookieName = cookiePair.substr(0, firstEq).trim();\n    cookieValue = cookiePair.substr(firstEq + 1).trim();\n  }\n\n  if (CONTROL_CHARS.test(cookieName) || CONTROL_CHARS.test(cookieValue)) {\n    return;\n  }\n\n  const c = new Cookie();\n  c.key = cookieName;\n  c.value = cookieValue;\n  return c;\n}\n\nfunction parse(str, options) {\n  if (!options || typeof options !== \"object\") {\n    options = {};\n  }\n\n  if (validators.isEmptyString(str) || !validators.isString(str)) {\n    return null;\n  }\n\n  str = str.trim();\n\n  // We use a regex to parse the \"name-value-pair\" part of S5.2\n  const firstSemi = str.indexOf(\";\"); // S5.2 step 1\n  const cookiePair = firstSemi === -1 ? str : str.substr(0, firstSemi);\n  const c = parseCookiePair(cookiePair, !!options.loose);\n  if (!c) {\n    return;\n  }\n\n  if (firstSemi === -1) {\n    return c;\n  }\n\n  // S5.2.3 \"unparsed-attributes consist of the remainder of the set-cookie-string\n  // (including the %x3B (\";\") in question).\" plus later on in the same section\n  // \"discard the first \";\" and trim\".\n  const unparsed = str.slice(firstSemi + 1).trim();\n\n  // \"If the unparsed-attributes string is empty, skip the rest of these\n  // steps.\"\n  if (unparsed.length === 0) {\n    return c;\n  }\n\n  /*\n   * S5.2 says that when looping over the items \"[p]rocess the attribute-name\n   * and attribute-value according to the requirements in the following\n   * subsections\" for every item.  Plus, for many of the individual attributes\n   * in S5.3 it says to use the \"attribute-value of the last attribute in the\n   * cookie-attribute-list\".  Therefore, in this implementation, we overwrite\n   * the previous value.\n   */\n  const cookie_avs = unparsed.split(\";\");\n  while (cookie_avs.length) {\n    const av = cookie_avs.shift().trim();\n    if (av.length === 0) {\n      // happens if \";;\" appears\n      continue;\n    }\n    const av_sep = av.indexOf(\"=\");\n    let av_key, av_value;\n\n    if (av_sep === -1) {\n      av_key = av;\n      av_value = null;\n    } else {\n      av_key = av.substr(0, av_sep);\n      av_value = av.substr(av_sep + 1);\n    }\n\n    av_key = av_key.trim().toLowerCase();\n\n    if (av_value) {\n      av_value = av_value.trim();\n    }\n\n    switch (av_key) {\n      case \"expires\": // S5.2.1\n        if (av_value) {\n          const exp = parseDate(av_value);\n          // \"If the attribute-value failed to parse as a cookie date, ignore the\n          // cookie-av.\"\n          if (exp) {\n            // over and underflow not realistically a concern: V8's getTime() seems to\n            // store something larger than a 32-bit time_t (even with 32-bit node)\n            c.expires = exp;\n          }\n        }\n        break;\n\n      case \"max-age\": // S5.2.2\n        if (av_value) {\n          // \"If the first character of the attribute-value is not a DIGIT or a \"-\"\n          // character ...[or]... If the remainder of attribute-value contains a\n          // non-DIGIT character, ignore the cookie-av.\"\n          if (/^-?[0-9]+$/.test(av_value)) {\n            const delta = parseInt(av_value, 10);\n            // \"If delta-seconds is less than or equal to zero (0), let expiry-time\n            // be the earliest representable date and time.\"\n            c.setMaxAge(delta);\n          }\n        }\n        break;\n\n      case \"domain\": // S5.2.3\n        // \"If the attribute-value is empty, the behavior is undefined.  However,\n        // the user agent SHOULD ignore the cookie-av entirely.\"\n        if (av_value) {\n          // S5.2.3 \"Let cookie-domain be the attribute-value without the leading %x2E\n          // (\".\") character.\"\n          const domain = av_value.trim().replace(/^\\./, \"\");\n          if (domain) {\n            // \"Convert the cookie-domain to lower case.\"\n            c.domain = domain.toLowerCase();\n          }\n        }\n        break;\n\n      case \"path\": // S5.2.4\n        /*\n         * \"If the attribute-value is empty or if the first character of the\n         * attribute-value is not %x2F (\"/\"):\n         *   Let cookie-path be the default-path.\n         * Otherwise:\n         *   Let cookie-path be the attribute-value.\"\n         *\n         * We'll represent the default-path as null since it depends on the\n         * context of the parsing.\n         */\n        c.path = av_value && av_value[0] === \"/\" ? av_value : null;\n        break;\n\n      case \"secure\": // S5.2.5\n        /*\n         * \"If the attribute-name case-insensitively matches the string \"Secure\",\n         * the user agent MUST append an attribute to the cookie-attribute-list\n         * with an attribute-name of Secure and an empty attribute-value.\"\n         */\n        c.secure = true;\n        break;\n\n      case \"httponly\": // S5.2.6 -- effectively the same as 'secure'\n        c.httpOnly = true;\n        break;\n\n      case \"samesite\": // RFC6265bis-02 S5.3.7\n        const enforcement = av_value ? av_value.toLowerCase() : \"\";\n        switch (enforcement) {\n          case \"strict\":\n            c.sameSite = \"strict\";\n            break;\n          case \"lax\":\n            c.sameSite = \"lax\";\n            break;\n          case \"none\":\n            c.sameSite = \"none\";\n            break;\n          default:\n            c.sameSite = undefined;\n            break;\n        }\n        break;\n\n      default:\n        c.extensions = c.extensions || [];\n        c.extensions.push(av);\n        break;\n    }\n  }\n\n  return c;\n}\n\n/**\n *  If the cookie-name begins with a case-sensitive match for the\n *  string \"__Secure-\", abort these steps and ignore the cookie\n *  entirely unless the cookie's secure-only-flag is true.\n * @param cookie\n * @returns boolean\n */\nfunction isSecurePrefixConditionMet(cookie) {\n  validators.validate(validators.isObject(cookie), cookie);\n  return !cookie.key.startsWith(\"__Secure-\") || cookie.secure;\n}\n\n/**\n *  If the cookie-name begins with a case-sensitive match for the\n *  string \"__Host-\", abort these steps and ignore the cookie\n *  entirely unless the cookie meets all the following criteria:\n *    1.  The cookie's secure-only-flag is true.\n *    2.  The cookie's host-only-flag is true.\n *    3.  The cookie-attribute-list contains an attribute with an\n *        attribute-name of \"Path\", and the cookie's path is \"/\".\n * @param cookie\n * @returns boolean\n */\nfunction isHostPrefixConditionMet(cookie) {\n  validators.validate(validators.isObject(cookie));\n  return (\n    !cookie.key.startsWith(\"__Host-\") ||\n    (cookie.secure &&\n      cookie.hostOnly &&\n      cookie.path != null &&\n      cookie.path === \"/\")\n  );\n}\n\n// avoid the V8 deoptimization monster!\nfunction jsonParse(str) {\n  let obj;\n  try {\n    obj = JSON.parse(str);\n  } catch (e) {\n    return e;\n  }\n  return obj;\n}\n\nfunction fromJSON(str) {\n  if (!str || validators.isEmptyString(str)) {\n    return null;\n  }\n\n  let obj;\n  if (typeof str === \"string\") {\n    obj = jsonParse(str);\n    if (obj instanceof Error) {\n      return null;\n    }\n  } else {\n    // assume it's an Object\n    obj = str;\n  }\n\n  const c = new Cookie();\n  for (let i = 0; i < Cookie.serializableProperties.length; i++) {\n    const prop = Cookie.serializableProperties[i];\n    if (obj[prop] === undefined || obj[prop] === cookieDefaults[prop]) {\n      continue; // leave as prototype default\n    }\n\n    if (prop === \"expires\" || prop === \"creation\" || prop === \"lastAccessed\") {\n      if (obj[prop] === null) {\n        c[prop] = null;\n      } else {\n        c[prop] = obj[prop] == \"Infinity\" ? \"Infinity\" : new Date(obj[prop]);\n      }\n    } else {\n      c[prop] = obj[prop];\n    }\n  }\n\n  return c;\n}\n\n/* Section 5.4 part 2:\n * \"*  Cookies with longer paths are listed before cookies with\n *     shorter paths.\n *\n *  *  Among cookies that have equal-length path fields, cookies with\n *     earlier creation-times are listed before cookies with later\n *     creation-times.\"\n */\n\nfunction cookieCompare(a, b) {\n  validators.validate(validators.isObject(a), a);\n  validators.validate(validators.isObject(b), b);\n  let cmp = 0;\n\n  // descending for length: b CMP a\n  const aPathLen = a.path ? a.path.length : 0;\n  const bPathLen = b.path ? b.path.length : 0;\n  cmp = bPathLen - aPathLen;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  // ascending for time: a CMP b\n  const aTime = a.creation ? a.creation.getTime() : MAX_TIME;\n  const bTime = b.creation ? b.creation.getTime() : MAX_TIME;\n  cmp = aTime - bTime;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  // break ties for the same millisecond (precision of JavaScript's clock)\n  cmp = a.creationIndex - b.creationIndex;\n\n  return cmp;\n}\n\n// Gives the permutation of all possible pathMatch()es of a given path. The\n// array is in longest-to-shortest order.  Handy for indexing.\nfunction permutePath(path) {\n  validators.validate(validators.isString(path));\n  if (path === \"/\") {\n    return [\"/\"];\n  }\n  const permutations = [path];\n  while (path.length > 1) {\n    const lindex = path.lastIndexOf(\"/\");\n    if (lindex === 0) {\n      break;\n    }\n    path = path.substr(0, lindex);\n    permutations.push(path);\n  }\n  permutations.push(\"/\");\n  return permutations;\n}\n\nfunction getCookieContext(url) {\n  if (url instanceof Object) {\n    return url;\n  }\n  // NOTE: decodeURI will throw on malformed URIs (see GH-32).\n  // Therefore, we will just skip decoding for such URIs.\n  try {\n    url = decodeURI(url);\n  } catch (err) {\n    // Silently swallow error\n  }\n\n  return urlParse(url);\n}\n\nconst cookieDefaults = {\n  // the order in which the RFC has them:\n  key: \"\",\n  value: \"\",\n  expires: \"Infinity\",\n  maxAge: null,\n  domain: null,\n  path: null,\n  secure: false,\n  httpOnly: false,\n  extensions: null,\n  // set by the CookieJar:\n  hostOnly: null,\n  pathIsDefault: null,\n  creation: null,\n  lastAccessed: null,\n  sameSite: undefined\n};\n\nclass Cookie {\n  constructor(options = {}) {\n    const customInspectSymbol = getCustomInspectSymbol();\n    if (customInspectSymbol) {\n      this[customInspectSymbol] = this.inspect;\n    }\n\n    Object.assign(this, cookieDefaults, options);\n    this.creation = this.creation || new Date();\n\n    // used to break creation ties in cookieCompare():\n    Object.defineProperty(this, \"creationIndex\", {\n      configurable: false,\n      enumerable: false, // important for assert.deepEqual checks\n      writable: true,\n      value: ++Cookie.cookiesCreated\n    });\n  }\n\n  inspect() {\n    const now = Date.now();\n    const hostOnly = this.hostOnly != null ? this.hostOnly : \"?\";\n    const createAge = this.creation\n      ? `${now - this.creation.getTime()}ms`\n      : \"?\";\n    const accessAge = this.lastAccessed\n      ? `${now - this.lastAccessed.getTime()}ms`\n      : \"?\";\n    return `Cookie=\"${this.toString()}; hostOnly=${hostOnly}; aAge=${accessAge}; cAge=${createAge}\"`;\n  }\n\n  toJSON() {\n    const obj = {};\n\n    for (const prop of Cookie.serializableProperties) {\n      if (this[prop] === cookieDefaults[prop]) {\n        continue; // leave as prototype default\n      }\n\n      if (\n        prop === \"expires\" ||\n        prop === \"creation\" ||\n        prop === \"lastAccessed\"\n      ) {\n        if (this[prop] === null) {\n          obj[prop] = null;\n        } else {\n          obj[prop] =\n            this[prop] == \"Infinity\" // intentionally not ===\n              ? \"Infinity\"\n              : this[prop].toISOString();\n        }\n      } else if (prop === \"maxAge\") {\n        if (this[prop] !== null) {\n          // again, intentionally not ===\n          obj[prop] =\n            this[prop] == Infinity || this[prop] == -Infinity\n              ? this[prop].toString()\n              : this[prop];\n        }\n      } else {\n        if (this[prop] !== cookieDefaults[prop]) {\n          obj[prop] = this[prop];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  clone() {\n    return fromJSON(this.toJSON());\n  }\n\n  validate() {\n    if (!COOKIE_OCTETS.test(this.value)) {\n      return false;\n    }\n    if (\n      this.expires != Infinity &&\n      !(this.expires instanceof Date) &&\n      !parseDate(this.expires)\n    ) {\n      return false;\n    }\n    if (this.maxAge != null && this.maxAge <= 0) {\n      return false; // \"Max-Age=\" non-zero-digit *DIGIT\n    }\n    if (this.path != null && !PATH_VALUE.test(this.path)) {\n      return false;\n    }\n\n    const cdomain = this.cdomain();\n    if (cdomain) {\n      if (cdomain.match(/\\.$/)) {\n        return false; // S4.1.2.3 suggests that this is bad. domainMatch() tests confirm this\n      }\n      const suffix = pubsuffix.getPublicSuffix(cdomain);\n      if (suffix == null) {\n        // it's a public suffix\n        return false;\n      }\n    }\n    return true;\n  }\n\n  setExpires(exp) {\n    if (exp instanceof Date) {\n      this.expires = exp;\n    } else {\n      this.expires = parseDate(exp) || \"Infinity\";\n    }\n  }\n\n  setMaxAge(age) {\n    if (age === Infinity || age === -Infinity) {\n      this.maxAge = age.toString(); // so JSON.stringify() works\n    } else {\n      this.maxAge = age;\n    }\n  }\n\n  cookieString() {\n    let val = this.value;\n    if (val == null) {\n      val = \"\";\n    }\n    if (this.key === \"\") {\n      return val;\n    }\n    return `${this.key}=${val}`;\n  }\n\n  // gives Set-Cookie header format\n  toString() {\n    let str = this.cookieString();\n\n    if (this.expires != Infinity) {\n      if (this.expires instanceof Date) {\n        str += `; Expires=${formatDate(this.expires)}`;\n      } else {\n        str += `; Expires=${this.expires}`;\n      }\n    }\n\n    if (this.maxAge != null && this.maxAge != Infinity) {\n      str += `; Max-Age=${this.maxAge}`;\n    }\n\n    if (this.domain && !this.hostOnly) {\n      str += `; Domain=${this.domain}`;\n    }\n    if (this.path) {\n      str += `; Path=${this.path}`;\n    }\n\n    if (this.secure) {\n      str += \"; Secure\";\n    }\n    if (this.httpOnly) {\n      str += \"; HttpOnly\";\n    }\n    if (this.sameSite && this.sameSite !== \"none\") {\n      const ssCanon = Cookie.sameSiteCanonical[this.sameSite.toLowerCase()];\n      str += `; SameSite=${ssCanon ? ssCanon : this.sameSite}`;\n    }\n    if (this.extensions) {\n      this.extensions.forEach(ext => {\n        str += `; ${ext}`;\n      });\n    }\n\n    return str;\n  }\n\n  // TTL() partially replaces the \"expiry-time\" parts of S5.3 step 3 (setCookie()\n  // elsewhere)\n  // S5.3 says to give the \"latest representable date\" for which we use Infinity\n  // For \"expired\" we use 0\n  TTL(now) {\n    /* RFC6265 S4.1.2.2 If a cookie has both the Max-Age and the Expires\n     * attribute, the Max-Age attribute has precedence and controls the\n     * expiration date of the cookie.\n     * (Concurs with S5.3 step 3)\n     */\n    if (this.maxAge != null) {\n      return this.maxAge <= 0 ? 0 : this.maxAge * 1000;\n    }\n\n    let expires = this.expires;\n    if (expires != Infinity) {\n      if (!(expires instanceof Date)) {\n        expires = parseDate(expires) || Infinity;\n      }\n\n      if (expires == Infinity) {\n        return Infinity;\n      }\n\n      return expires.getTime() - (now || Date.now());\n    }\n\n    return Infinity;\n  }\n\n  // expiryTime() replaces the \"expiry-time\" parts of S5.3 step 3 (setCookie()\n  // elsewhere)\n  expiryTime(now) {\n    if (this.maxAge != null) {\n      const relativeTo = now || this.creation || new Date();\n      const age = this.maxAge <= 0 ? -Infinity : this.maxAge * 1000;\n      return relativeTo.getTime() + age;\n    }\n\n    if (this.expires == Infinity) {\n      return Infinity;\n    }\n    return this.expires.getTime();\n  }\n\n  // expiryDate() replaces the \"expiry-time\" parts of S5.3 step 3 (setCookie()\n  // elsewhere), except it returns a Date\n  expiryDate(now) {\n    const millisec = this.expiryTime(now);\n    if (millisec == Infinity) {\n      return new Date(MAX_TIME);\n    } else if (millisec == -Infinity) {\n      return new Date(MIN_TIME);\n    } else {\n      return new Date(millisec);\n    }\n  }\n\n  // This replaces the \"persistent-flag\" parts of S5.3 step 3\n  isPersistent() {\n    return this.maxAge != null || this.expires != Infinity;\n  }\n\n  // Mostly S5.1.2 and S5.2.3:\n  canonicalizedDomain() {\n    if (this.domain == null) {\n      return null;\n    }\n    return canonicalDomain(this.domain);\n  }\n\n  cdomain() {\n    return this.canonicalizedDomain();\n  }\n}\n\nCookie.cookiesCreated = 0;\nCookie.parse = parse;\nCookie.fromJSON = fromJSON;\nCookie.serializableProperties = Object.keys(cookieDefaults);\nCookie.sameSiteLevel = {\n  strict: 3,\n  lax: 2,\n  none: 1\n};\n\nCookie.sameSiteCanonical = {\n  strict: \"Strict\",\n  lax: \"Lax\"\n};\n\nfunction getNormalizedPrefixSecurity(prefixSecurity) {\n  if (prefixSecurity != null) {\n    const normalizedPrefixSecurity = prefixSecurity.toLowerCase();\n    /* The three supported options */\n    switch (normalizedPrefixSecurity) {\n      case PrefixSecurityEnum.STRICT:\n      case PrefixSecurityEnum.SILENT:\n      case PrefixSecurityEnum.DISABLED:\n        return normalizedPrefixSecurity;\n    }\n  }\n  /* Default is SILENT */\n  return PrefixSecurityEnum.SILENT;\n}\n\nclass CookieJar {\n  constructor(store, options = { rejectPublicSuffixes: true }) {\n    if (typeof options === \"boolean\") {\n      options = { rejectPublicSuffixes: options };\n    }\n    validators.validate(validators.isObject(options), options);\n    this.rejectPublicSuffixes = options.rejectPublicSuffixes;\n    this.enableLooseMode = !!options.looseMode;\n    this.allowSpecialUseDomain =\n      typeof options.allowSpecialUseDomain === \"boolean\"\n        ? options.allowSpecialUseDomain\n        : true;\n    this.store = store || new MemoryCookieStore();\n    this.prefixSecurity = getNormalizedPrefixSecurity(options.prefixSecurity);\n    this._cloneSync = syncWrap(\"clone\");\n    this._importCookiesSync = syncWrap(\"_importCookies\");\n    this.getCookiesSync = syncWrap(\"getCookies\");\n    this.getCookieStringSync = syncWrap(\"getCookieString\");\n    this.getSetCookieStringsSync = syncWrap(\"getSetCookieStrings\");\n    this.removeAllCookiesSync = syncWrap(\"removeAllCookies\");\n    this.setCookieSync = syncWrap(\"setCookie\");\n    this.serializeSync = syncWrap(\"serialize\");\n  }\n\n  setCookie(cookie, url, options, cb) {\n    validators.validate(validators.isNonEmptyString(url), cb, options);\n    let err;\n\n    if (validators.isFunction(url)) {\n      cb = url;\n      return cb(new Error(\"No URL was specified\"));\n    }\n\n    const context = getCookieContext(url);\n    if (validators.isFunction(options)) {\n      cb = options;\n      options = {};\n    }\n\n    validators.validate(validators.isFunction(cb), cb);\n\n    if (\n      !validators.isNonEmptyString(cookie) &&\n      !validators.isObject(cookie) &&\n      cookie instanceof String &&\n      cookie.length == 0\n    ) {\n      return cb(null);\n    }\n\n    const host = canonicalDomain(context.hostname);\n    const loose = options.loose || this.enableLooseMode;\n\n    let sameSiteContext = null;\n    if (options.sameSiteContext) {\n      sameSiteContext = checkSameSiteContext(options.sameSiteContext);\n      if (!sameSiteContext) {\n        return cb(new Error(SAME_SITE_CONTEXT_VAL_ERR));\n      }\n    }\n\n    // S5.3 step 1\n    if (typeof cookie === \"string\" || cookie instanceof String) {\n      cookie = Cookie.parse(cookie, { loose: loose });\n      if (!cookie) {\n        err = new Error(\"Cookie failed to parse\");\n        return cb(options.ignoreError ? null : err);\n      }\n    } else if (!(cookie instanceof Cookie)) {\n      // If you're seeing this error, and are passing in a Cookie object,\n      // it *might* be a Cookie object from another loaded version of tough-cookie.\n      err = new Error(\n        \"First argument to setCookie must be a Cookie object or string\"\n      );\n      return cb(options.ignoreError ? null : err);\n    }\n\n    // S5.3 step 2\n    const now = options.now || new Date(); // will assign later to save effort in the face of errors\n\n    // S5.3 step 3: NOOP; persistent-flag and expiry-time is handled by getCookie()\n\n    // S5.3 step 4: NOOP; domain is null by default\n\n    // S5.3 step 5: public suffixes\n    if (this.rejectPublicSuffixes && cookie.domain) {\n      const suffix = pubsuffix.getPublicSuffix(cookie.cdomain(), {\n        allowSpecialUseDomain: this.allowSpecialUseDomain,\n        ignoreError: options.ignoreError\n      });\n      if (suffix == null && !IP_V6_REGEX_OBJECT.test(cookie.domain)) {\n        // e.g. \"com\"\n        err = new Error(\"Cookie has domain set to a public suffix\");\n        return cb(options.ignoreError ? null : err);\n      }\n    }\n\n    // S5.3 step 6:\n    if (cookie.domain) {\n      if (!domainMatch(host, cookie.cdomain(), false)) {\n        err = new Error(\n          `Cookie not in this host's domain. Cookie:${cookie.cdomain()} Request:${host}`\n        );\n        return cb(options.ignoreError ? null : err);\n      }\n\n      if (cookie.hostOnly == null) {\n        // don't reset if already set\n        cookie.hostOnly = false;\n      }\n    } else {\n      cookie.hostOnly = true;\n      cookie.domain = host;\n    }\n\n    //S5.2.4 If the attribute-value is empty or if the first character of the\n    //attribute-value is not %x2F (\"/\"):\n    //Let cookie-path be the default-path.\n    if (!cookie.path || cookie.path[0] !== \"/\") {\n      cookie.path = defaultPath(context.pathname);\n      cookie.pathIsDefault = true;\n    }\n\n    // S5.3 step 8: NOOP; secure attribute\n    // S5.3 step 9: NOOP; httpOnly attribute\n\n    // S5.3 step 10\n    if (options.http === false && cookie.httpOnly) {\n      err = new Error(\"Cookie is HttpOnly and this isn't an HTTP API\");\n      return cb(options.ignoreError ? null : err);\n    }\n\n    // 6252bis-02 S5.4 Step 13 & 14:\n    if (\n      cookie.sameSite !== \"none\" &&\n      cookie.sameSite !== undefined &&\n      sameSiteContext\n    ) {\n      // \"If the cookie's \"same-site-flag\" is not \"None\", and the cookie\n      //  is being set from a context whose \"site for cookies\" is not an\n      //  exact match for request-uri's host's registered domain, then\n      //  abort these steps and ignore the newly created cookie entirely.\"\n      if (sameSiteContext === \"none\") {\n        err = new Error(\n          \"Cookie is SameSite but this is a cross-origin request\"\n        );\n        return cb(options.ignoreError ? null : err);\n      }\n    }\n\n    /* 6265bis-02 S5.4 Steps 15 & 16 */\n    const ignoreErrorForPrefixSecurity =\n      this.prefixSecurity === PrefixSecurityEnum.SILENT;\n    const prefixSecurityDisabled =\n      this.prefixSecurity === PrefixSecurityEnum.DISABLED;\n    /* If prefix checking is not disabled ...*/\n    if (!prefixSecurityDisabled) {\n      let errorFound = false;\n      let errorMsg;\n      /* Check secure prefix condition */\n      if (!isSecurePrefixConditionMet(cookie)) {\n        errorFound = true;\n        errorMsg = \"Cookie has __Secure prefix but Secure attribute is not set\";\n      } else if (!isHostPrefixConditionMet(cookie)) {\n        /* Check host prefix condition */\n        errorFound = true;\n        errorMsg =\n          \"Cookie has __Host prefix but either Secure or HostOnly attribute is not set or Path is not '/'\";\n      }\n      if (errorFound) {\n        return cb(\n          options.ignoreError || ignoreErrorForPrefixSecurity\n            ? null\n            : new Error(errorMsg)\n        );\n      }\n    }\n\n    const store = this.store;\n\n    if (!store.updateCookie) {\n      store.updateCookie = function(oldCookie, newCookie, cb) {\n        this.putCookie(newCookie, cb);\n      };\n    }\n\n    function withCookie(err, oldCookie) {\n      if (err) {\n        return cb(err);\n      }\n\n      const next = function(err) {\n        if (err) {\n          return cb(err);\n        } else {\n          cb(null, cookie);\n        }\n      };\n\n      if (oldCookie) {\n        // S5.3 step 11 - \"If the cookie store contains a cookie with the same name,\n        // domain, and path as the newly created cookie:\"\n        if (options.http === false && oldCookie.httpOnly) {\n          // step 11.2\n          err = new Error(\"old Cookie is HttpOnly and this isn't an HTTP API\");\n          return cb(options.ignoreError ? null : err);\n        }\n        cookie.creation = oldCookie.creation; // step 11.3\n        cookie.creationIndex = oldCookie.creationIndex; // preserve tie-breaker\n        cookie.lastAccessed = now;\n        // Step 11.4 (delete cookie) is implied by just setting the new one:\n        store.updateCookie(oldCookie, cookie, next); // step 12\n      } else {\n        cookie.creation = cookie.lastAccessed = now;\n        store.putCookie(cookie, next); // step 12\n      }\n    }\n\n    store.findCookie(cookie.domain, cookie.path, cookie.key, withCookie);\n  }\n\n  // RFC6365 S5.4\n  getCookies(url, options, cb) {\n    validators.validate(validators.isNonEmptyString(url), cb, url);\n    const context = getCookieContext(url);\n    if (validators.isFunction(options)) {\n      cb = options;\n      options = {};\n    }\n    validators.validate(validators.isObject(options), cb, options);\n    validators.validate(validators.isFunction(cb), cb);\n\n    const host = canonicalDomain(context.hostname);\n    const path = context.pathname || \"/\";\n\n    let secure = options.secure;\n    if (\n      secure == null &&\n      context.protocol &&\n      (context.protocol == \"https:\" || context.protocol == \"wss:\")\n    ) {\n      secure = true;\n    }\n\n    let sameSiteLevel = 0;\n    if (options.sameSiteContext) {\n      const sameSiteContext = checkSameSiteContext(options.sameSiteContext);\n      sameSiteLevel = Cookie.sameSiteLevel[sameSiteContext];\n      if (!sameSiteLevel) {\n        return cb(new Error(SAME_SITE_CONTEXT_VAL_ERR));\n      }\n    }\n\n    let http = options.http;\n    if (http == null) {\n      http = true;\n    }\n\n    const now = options.now || Date.now();\n    const expireCheck = options.expire !== false;\n    const allPaths = !!options.allPaths;\n    const store = this.store;\n\n    function matchingCookie(c) {\n      // \"Either:\n      //   The cookie's host-only-flag is true and the canonicalized\n      //   request-host is identical to the cookie's domain.\n      // Or:\n      //   The cookie's host-only-flag is false and the canonicalized\n      //   request-host domain-matches the cookie's domain.\"\n      if (c.hostOnly) {\n        if (c.domain != host) {\n          return false;\n        }\n      } else {\n        if (!domainMatch(host, c.domain, false)) {\n          return false;\n        }\n      }\n\n      // \"The request-uri's path path-matches the cookie's path.\"\n      if (!allPaths && !pathMatch(path, c.path)) {\n        return false;\n      }\n\n      // \"If the cookie's secure-only-flag is true, then the request-uri's\n      // scheme must denote a \"secure\" protocol\"\n      if (c.secure && !secure) {\n        return false;\n      }\n\n      // \"If the cookie's http-only-flag is true, then exclude the cookie if the\n      // cookie-string is being generated for a \"non-HTTP\" API\"\n      if (c.httpOnly && !http) {\n        return false;\n      }\n\n      // RFC6265bis-02 S5.3.7\n      if (sameSiteLevel) {\n        const cookieLevel = Cookie.sameSiteLevel[c.sameSite || \"none\"];\n        if (cookieLevel > sameSiteLevel) {\n          // only allow cookies at or below the request level\n          return false;\n        }\n      }\n\n      // deferred from S5.3\n      // non-RFC: allow retention of expired cookies by choice\n      if (expireCheck && c.expiryTime() <= now) {\n        store.removeCookie(c.domain, c.path, c.key, () => {}); // result ignored\n        return false;\n      }\n\n      return true;\n    }\n\n    store.findCookies(\n      host,\n      allPaths ? null : path,\n      this.allowSpecialUseDomain,\n      (err, cookies) => {\n        if (err) {\n          return cb(err);\n        }\n\n        cookies = cookies.filter(matchingCookie);\n\n        // sorting of S5.4 part 2\n        if (options.sort !== false) {\n          cookies = cookies.sort(cookieCompare);\n        }\n\n        // S5.4 part 3\n        const now = new Date();\n        for (const cookie of cookies) {\n          cookie.lastAccessed = now;\n        }\n        // TODO persist lastAccessed\n\n        cb(null, cookies);\n      }\n    );\n  }\n\n  getCookieString(...args) {\n    const cb = args.pop();\n    validators.validate(validators.isFunction(cb), cb);\n    const next = function(err, cookies) {\n      if (err) {\n        cb(err);\n      } else {\n        cb(\n          null,\n          cookies\n            .sort(cookieCompare)\n            .map(c => c.cookieString())\n            .join(\"; \")\n        );\n      }\n    };\n    args.push(next);\n    this.getCookies.apply(this, args);\n  }\n\n  getSetCookieStrings(...args) {\n    const cb = args.pop();\n    validators.validate(validators.isFunction(cb), cb);\n    const next = function(err, cookies) {\n      if (err) {\n        cb(err);\n      } else {\n        cb(\n          null,\n          cookies.map(c => {\n            return c.toString();\n          })\n        );\n      }\n    };\n    args.push(next);\n    this.getCookies.apply(this, args);\n  }\n\n  serialize(cb) {\n    validators.validate(validators.isFunction(cb), cb);\n    let type = this.store.constructor.name;\n    if (validators.isObject(type)) {\n      type = null;\n    }\n\n    // update README.md \"Serialization Format\" if you change this, please!\n    const serialized = {\n      // The version of tough-cookie that serialized this jar. Generally a good\n      // practice since future versions can make data import decisions based on\n      // known past behavior. When/if this matters, use `semver`.\n      version: `tough-cookie@${VERSION}`,\n\n      // add the store type, to make humans happy:\n      storeType: type,\n\n      // CookieJar configuration:\n      rejectPublicSuffixes: !!this.rejectPublicSuffixes,\n      enableLooseMode: !!this.enableLooseMode,\n      allowSpecialUseDomain: !!this.allowSpecialUseDomain,\n      prefixSecurity: getNormalizedPrefixSecurity(this.prefixSecurity),\n\n      // this gets filled from getAllCookies:\n      cookies: []\n    };\n\n    if (\n      !(\n        this.store.getAllCookies &&\n        typeof this.store.getAllCookies === \"function\"\n      )\n    ) {\n      return cb(\n        new Error(\n          \"store does not support getAllCookies and cannot be serialized\"\n        )\n      );\n    }\n\n    this.store.getAllCookies((err, cookies) => {\n      if (err) {\n        return cb(err);\n      }\n\n      serialized.cookies = cookies.map(cookie => {\n        // convert to serialized 'raw' cookies\n        cookie = cookie instanceof Cookie ? cookie.toJSON() : cookie;\n\n        // Remove the index so new ones get assigned during deserialization\n        delete cookie.creationIndex;\n\n        return cookie;\n      });\n\n      return cb(null, serialized);\n    });\n  }\n\n  toJSON() {\n    return this.serializeSync();\n  }\n\n  // use the class method CookieJar.deserialize instead of calling this directly\n  _importCookies(serialized, cb) {\n    let cookies = serialized.cookies;\n    if (!cookies || !Array.isArray(cookies)) {\n      return cb(new Error(\"serialized jar has no cookies array\"));\n    }\n    cookies = cookies.slice(); // do not modify the original\n\n    const putNext = err => {\n      if (err) {\n        return cb(err);\n      }\n\n      if (!cookies.length) {\n        return cb(err, this);\n      }\n\n      let cookie;\n      try {\n        cookie = fromJSON(cookies.shift());\n      } catch (e) {\n        return cb(e);\n      }\n\n      if (cookie === null) {\n        return putNext(null); // skip this cookie\n      }\n\n      this.store.putCookie(cookie, putNext);\n    };\n\n    putNext();\n  }\n\n  clone(newStore, cb) {\n    if (arguments.length === 1) {\n      cb = newStore;\n      newStore = null;\n    }\n\n    this.serialize((err, serialized) => {\n      if (err) {\n        return cb(err);\n      }\n      CookieJar.deserialize(serialized, newStore, cb);\n    });\n  }\n\n  cloneSync(newStore) {\n    if (arguments.length === 0) {\n      return this._cloneSync();\n    }\n    if (!newStore.synchronous) {\n      throw new Error(\n        \"CookieJar clone destination store is not synchronous; use async API instead.\"\n      );\n    }\n    return this._cloneSync(newStore);\n  }\n\n  removeAllCookies(cb) {\n    validators.validate(validators.isFunction(cb), cb);\n    const store = this.store;\n\n    // Check that the store implements its own removeAllCookies(). The default\n    // implementation in Store will immediately call the callback with a \"not\n    // implemented\" Error.\n    if (\n      typeof store.removeAllCookies === \"function\" &&\n      store.removeAllCookies !== Store.prototype.removeAllCookies\n    ) {\n      return store.removeAllCookies(cb);\n    }\n\n    store.getAllCookies((err, cookies) => {\n      if (err) {\n        return cb(err);\n      }\n\n      if (cookies.length === 0) {\n        return cb(null);\n      }\n\n      let completedCount = 0;\n      const removeErrors = [];\n\n      function removeCookieCb(removeErr) {\n        if (removeErr) {\n          removeErrors.push(removeErr);\n        }\n\n        completedCount++;\n\n        if (completedCount === cookies.length) {\n          return cb(removeErrors.length ? removeErrors[0] : null);\n        }\n      }\n\n      cookies.forEach(cookie => {\n        store.removeCookie(\n          cookie.domain,\n          cookie.path,\n          cookie.key,\n          removeCookieCb\n        );\n      });\n    });\n  }\n\n  static deserialize(strOrObj, store, cb) {\n    if (arguments.length !== 3) {\n      // store is optional\n      cb = store;\n      store = null;\n    }\n    validators.validate(validators.isFunction(cb), cb);\n\n    let serialized;\n    if (typeof strOrObj === \"string\") {\n      serialized = jsonParse(strOrObj);\n      if (serialized instanceof Error) {\n        return cb(serialized);\n      }\n    } else {\n      serialized = strOrObj;\n    }\n\n    const jar = new CookieJar(store, {\n      rejectPublicSuffixes: serialized.rejectPublicSuffixes,\n      looseMode: serialized.enableLooseMode,\n      allowSpecialUseDomain: serialized.allowSpecialUseDomain,\n      prefixSecurity: serialized.prefixSecurity\n    });\n    jar._importCookies(serialized, err => {\n      if (err) {\n        return cb(err);\n      }\n      cb(null, jar);\n    });\n  }\n\n  static deserializeSync(strOrObj, store) {\n    const serialized =\n      typeof strOrObj === \"string\" ? JSON.parse(strOrObj) : strOrObj;\n    const jar = new CookieJar(store, {\n      rejectPublicSuffixes: serialized.rejectPublicSuffixes,\n      looseMode: serialized.enableLooseMode\n    });\n\n    // catch this mistake early:\n    if (!jar.store.synchronous) {\n      throw new Error(\n        \"CookieJar store is not synchronous; use async API instead.\"\n      );\n    }\n\n    jar._importCookiesSync(serialized);\n    return jar;\n  }\n}\nCookieJar.fromJSON = CookieJar.deserializeSync;\n\n[\n  \"_importCookies\",\n  \"clone\",\n  \"getCookies\",\n  \"getCookieString\",\n  \"getSetCookieStrings\",\n  \"removeAllCookies\",\n  \"serialize\",\n  \"setCookie\"\n].forEach(name => {\n  CookieJar.prototype[name] = fromCallback(CookieJar.prototype[name]);\n});\nCookieJar.deserialize = fromCallback(CookieJar.deserialize);\n\n// Use a closure to provide a true imperative API for synchronous stores.\nfunction syncWrap(method) {\n  return function(...args) {\n    if (!this.store.synchronous) {\n      throw new Error(\n        \"CookieJar store is not synchronous; use async API instead.\"\n      );\n    }\n\n    let syncErr, syncResult;\n    this[method](...args, (err, result) => {\n      syncErr = err;\n      syncResult = result;\n    });\n\n    if (syncErr) {\n      throw syncErr;\n    }\n    return syncResult;\n  };\n}\n\nexports.version = VERSION;\nexports.CookieJar = CookieJar;\nexports.Cookie = Cookie;\nexports.Store = Store;\nexports.MemoryCookieStore = MemoryCookieStore;\nexports.parseDate = parseDate;\nexports.formatDate = formatDate;\nexports.parse = parse;\nexports.fromJSON = fromJSON;\nexports.domainMatch = domainMatch;\nexports.defaultPath = defaultPath;\nexports.pathMatch = pathMatch;\nexports.getPublicSuffix = pubsuffix.getPublicSuffix;\nexports.cookieCompare = cookieCompare;\nexports.permuteDomain = require(\"./permuteDomain\").permuteDomain;\nexports.permutePath = permutePath;\nexports.canonicalDomain = canonicalDomain;\nexports.PrefixSecurityEnum = PrefixSecurityEnum;\nexports.ParameterError = validators.ParameterError;\n","/*!\n * Copyright (c) 2015, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\nconst { fromCallback } = require(\"universalify\");\nconst Store = require(\"./store\").Store;\nconst permuteDomain = require(\"./permuteDomain\").permuteDomain;\nconst pathMatch = require(\"./pathMatch\").pathMatch;\nconst { getCustomInspectSymbol, getUtilInspect } = require(\"./utilHelper\");\n\nclass MemoryCookieStore extends Store {\n  constructor() {\n    super();\n    this.synchronous = true;\n    this.idx = {};\n    const customInspectSymbol = getCustomInspectSymbol();\n    if (customInspectSymbol) {\n      this[customInspectSymbol] = this.inspect;\n    }\n  }\n\n  inspect() {\n    const util = { inspect: getUtilInspect(inspectFallback) };\n    return `{ idx: ${util.inspect(this.idx, false, 2)} }`;\n  }\n\n  findCookie(domain, path, key, cb) {\n    if (!this.idx[domain]) {\n      return cb(null, undefined);\n    }\n    if (!this.idx[domain][path]) {\n      return cb(null, undefined);\n    }\n    return cb(null, this.idx[domain][path][key] || null);\n  }\n  findCookies(domain, path, allowSpecialUseDomain, cb) {\n    const results = [];\n    if (typeof allowSpecialUseDomain === \"function\") {\n      cb = allowSpecialUseDomain;\n      allowSpecialUseDomain = true;\n    }\n    if (!domain) {\n      return cb(null, []);\n    }\n\n    let pathMatcher;\n    if (!path) {\n      // null means \"all paths\"\n      pathMatcher = function matchAll(domainIndex) {\n        for (const curPath in domainIndex) {\n          const pathIndex = domainIndex[curPath];\n          for (const key in pathIndex) {\n            results.push(pathIndex[key]);\n          }\n        }\n      };\n    } else {\n      pathMatcher = function matchRFC(domainIndex) {\n        //NOTE: we should use path-match algorithm from S5.1.4 here\n        //(see : https://github.com/ChromiumWebApps/chromium/blob/b3d3b4da8bb94c1b2e061600df106d590fda3620/net/cookies/canonical_cookie.cc#L299)\n        Object.keys(domainIndex).forEach(cookiePath => {\n          if (pathMatch(path, cookiePath)) {\n            const pathIndex = domainIndex[cookiePath];\n            for (const key in pathIndex) {\n              results.push(pathIndex[key]);\n            }\n          }\n        });\n      };\n    }\n\n    const domains = permuteDomain(domain, allowSpecialUseDomain) || [domain];\n    const idx = this.idx;\n    domains.forEach(curDomain => {\n      const domainIndex = idx[curDomain];\n      if (!domainIndex) {\n        return;\n      }\n      pathMatcher(domainIndex);\n    });\n\n    cb(null, results);\n  }\n\n  putCookie(cookie, cb) {\n    if (!this.idx[cookie.domain]) {\n      this.idx[cookie.domain] = {};\n    }\n    if (!this.idx[cookie.domain][cookie.path]) {\n      this.idx[cookie.domain][cookie.path] = {};\n    }\n    this.idx[cookie.domain][cookie.path][cookie.key] = cookie;\n    cb(null);\n  }\n  updateCookie(oldCookie, newCookie, cb) {\n    // updateCookie() may avoid updating cookies that are identical.  For example,\n    // lastAccessed may not be important to some stores and an equality\n    // comparison could exclude that field.\n    this.putCookie(newCookie, cb);\n  }\n  removeCookie(domain, path, key, cb) {\n    if (\n      this.idx[domain] &&\n      this.idx[domain][path] &&\n      this.idx[domain][path][key]\n    ) {\n      delete this.idx[domain][path][key];\n    }\n    cb(null);\n  }\n  removeCookies(domain, path, cb) {\n    if (this.idx[domain]) {\n      if (path) {\n        delete this.idx[domain][path];\n      } else {\n        delete this.idx[domain];\n      }\n    }\n    return cb(null);\n  }\n  removeAllCookies(cb) {\n    this.idx = {};\n    return cb(null);\n  }\n  getAllCookies(cb) {\n    const cookies = [];\n    const idx = this.idx;\n\n    const domains = Object.keys(idx);\n    domains.forEach(domain => {\n      const paths = Object.keys(idx[domain]);\n      paths.forEach(path => {\n        const keys = Object.keys(idx[domain][path]);\n        keys.forEach(key => {\n          if (key !== null) {\n            cookies.push(idx[domain][path][key]);\n          }\n        });\n      });\n    });\n\n    // Sort by creationIndex so deserializing retains the creation order.\n    // When implementing your own store, this SHOULD retain the order too\n    cookies.sort((a, b) => {\n      return (a.creationIndex || 0) - (b.creationIndex || 0);\n    });\n\n    cb(null, cookies);\n  }\n}\n\n[\n  \"findCookie\",\n  \"findCookies\",\n  \"putCookie\",\n  \"updateCookie\",\n  \"removeCookie\",\n  \"removeCookies\",\n  \"removeAllCookies\",\n  \"getAllCookies\"\n].forEach(name => {\n  MemoryCookieStore.prototype[name] = fromCallback(\n    MemoryCookieStore.prototype[name]\n  );\n});\n\nexports.MemoryCookieStore = MemoryCookieStore;\n\nfunction inspectFallback(val) {\n  const domains = Object.keys(val);\n  if (domains.length === 0) {\n    return \"{}\";\n  }\n  let result = \"{\\n\";\n  Object.keys(val).forEach((domain, i) => {\n    result += formatDomain(domain, val[domain]);\n    if (i < domains.length - 1) {\n      result += \",\";\n    }\n    result += \"\\n\";\n  });\n  result += \"}\";\n  return result;\n}\n\nfunction formatDomain(domainName, domainValue) {\n  const indent = \"  \";\n  let result = `${indent}'${domainName}': {\\n`;\n  Object.keys(domainValue).forEach((path, i, paths) => {\n    result += formatPath(path, domainValue[path]);\n    if (i < paths.length - 1) {\n      result += \",\";\n    }\n    result += \"\\n\";\n  });\n  result += `${indent}}`;\n  return result;\n}\n\nfunction formatPath(pathName, pathValue) {\n  const indent = \"    \";\n  let result = `${indent}'${pathName}': {\\n`;\n  Object.keys(pathValue).forEach((cookieName, i, cookieNames) => {\n    const cookie = pathValue[cookieName];\n    result += `      ${cookieName}: ${cookie.inspect()}`;\n    if (i < cookieNames.length - 1) {\n      result += \",\";\n    }\n    result += \"\\n\";\n  });\n  result += `${indent}}`;\n  return result;\n}\n\nexports.inspectFallback = inspectFallback;\n","/*!\n * Copyright (c) 2015, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\n/*\n * \"A request-path path-matches a given cookie-path if at least one of the\n * following conditions holds:\"\n */\nfunction pathMatch(reqPath, cookiePath) {\n  // \"o  The cookie-path and the request-path are identical.\"\n  if (cookiePath === reqPath) {\n    return true;\n  }\n\n  const idx = reqPath.indexOf(cookiePath);\n  if (idx === 0) {\n    // \"o  The cookie-path is a prefix of the request-path, and the last\n    // character of the cookie-path is %x2F (\"/\").\"\n    if (cookiePath.substr(-1) === \"/\") {\n      return true;\n    }\n\n    // \" o  The cookie-path is a prefix of the request-path, and the first\n    // character of the request-path that is not included in the cookie- path\n    // is a %x2F (\"/\") character.\"\n    if (reqPath.substr(cookiePath.length, 1) === \"/\") {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexports.pathMatch = pathMatch;\n","/*!\n * Copyright (c) 2015, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\nconst pubsuffix = require(\"./pubsuffix-psl\");\n\n// Gives the permutation of all possible domainMatch()es of a given domain. The\n// array is in shortest-to-longest order.  Handy for indexing.\n\nfunction permuteDomain(domain, allowSpecialUseDomain) {\n  const pubSuf = pubsuffix.getPublicSuffix(domain, {\n    allowSpecialUseDomain: allowSpecialUseDomain\n  });\n\n  if (!pubSuf) {\n    return null;\n  }\n  if (pubSuf == domain) {\n    return [domain];\n  }\n\n  // Nuke trailing dot\n  if (domain.slice(-1) == \".\") {\n    domain = domain.slice(0, -1);\n  }\n\n  const prefix = domain.slice(0, -(pubSuf.length + 1)); // \".example.com\"\n  const parts = prefix.split(\".\").reverse();\n  let cur = pubSuf;\n  const permutations = [cur];\n  while (parts.length) {\n    cur = `${parts.shift()}.${cur}`;\n    permutations.push(cur);\n  }\n  return permutations;\n}\n\nexports.permuteDomain = permuteDomain;\n","/*!\n * Copyright (c) 2018, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\nconst psl = require(\"psl\");\n\n// RFC 6761\nconst SPECIAL_USE_DOMAINS = [\n  \"local\",\n  \"example\",\n  \"invalid\",\n  \"localhost\",\n  \"test\"\n];\n\nconst SPECIAL_TREATMENT_DOMAINS = [\"localhost\", \"invalid\"];\n\nfunction getPublicSuffix(domain, options = {}) {\n  const domainParts = domain.split(\".\");\n  const topLevelDomain = domainParts[domainParts.length - 1];\n  const allowSpecialUseDomain = !!options.allowSpecialUseDomain;\n  const ignoreError = !!options.ignoreError;\n\n  if (allowSpecialUseDomain && SPECIAL_USE_DOMAINS.includes(topLevelDomain)) {\n    if (domainParts.length > 1) {\n      const secondLevelDomain = domainParts[domainParts.length - 2];\n      // In aforementioned example, the eTLD/pubSuf will be apple.localhost\n      return `${secondLevelDomain}.${topLevelDomain}`;\n    } else if (SPECIAL_TREATMENT_DOMAINS.includes(topLevelDomain)) {\n      // For a single word special use domain, e.g. 'localhost' or 'invalid', per RFC 6761,\n      // \"Application software MAY recognize {localhost/invalid} names as special, or\n      // MAY pass them to name resolution APIs as they would for other domain names.\"\n      return `${topLevelDomain}`;\n    }\n  }\n\n  if (!ignoreError && SPECIAL_USE_DOMAINS.includes(topLevelDomain)) {\n    throw new Error(\n      `Cookie has domain set to the public suffix \"${topLevelDomain}\" which is a special use domain. To allow this, configure your CookieJar with {allowSpecialUseDomain:true, rejectPublicSuffixes: false}.`\n    );\n  }\n\n  return psl.get(domain);\n}\n\nexports.getPublicSuffix = getPublicSuffix;\n","/*!\n * Copyright (c) 2015, Salesforce.com, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of Salesforce.com nor the names of its contributors may\n * be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n\"use strict\";\n/*jshint unused:false */\n\nclass Store {\n  constructor() {\n    this.synchronous = false;\n  }\n\n  findCookie(domain, path, key, cb) {\n    throw new Error(\"findCookie is not implemented\");\n  }\n\n  findCookies(domain, path, allowSpecialUseDomain, cb) {\n    throw new Error(\"findCookies is not implemented\");\n  }\n\n  putCookie(cookie, cb) {\n    throw new Error(\"putCookie is not implemented\");\n  }\n\n  updateCookie(oldCookie, newCookie, cb) {\n    // recommended default implementation:\n    // return this.putCookie(newCookie, cb);\n    throw new Error(\"updateCookie is not implemented\");\n  }\n\n  removeCookie(domain, path, key, cb) {\n    throw new Error(\"removeCookie is not implemented\");\n  }\n\n  removeCookies(domain, path, cb) {\n    throw new Error(\"removeCookies is not implemented\");\n  }\n\n  removeAllCookies(cb) {\n    throw new Error(\"removeAllCookies is not implemented\");\n  }\n\n  getAllCookies(cb) {\n    throw new Error(\n      \"getAllCookies is not implemented (therefore jar cannot be serialized)\"\n    );\n  }\n}\n\nexports.Store = Store;\n","function requireUtil() {\n  try {\n    // eslint-disable-next-line no-restricted-modules\n    return require(\"util\");\n  } catch (e) {\n    return null;\n  }\n}\n\n// for v10.12.0+\nfunction lookupCustomInspectSymbol() {\n  return Symbol.for(\"nodejs.util.inspect.custom\");\n}\n\n// for older node environments\nfunction tryReadingCustomSymbolFromUtilInspect(options) {\n  const _requireUtil = options.requireUtil || requireUtil;\n  const util = _requireUtil();\n  return util ? util.inspect.custom : null;\n}\n\nexports.getUtilInspect = function getUtilInspect(fallback, options = {}) {\n  const _requireUtil = options.requireUtil || requireUtil;\n  const util = _requireUtil();\n  return function inspect(value, showHidden, depth) {\n    return util ? util.inspect(value, showHidden, depth) : fallback(value);\n  };\n};\n\nexports.getCustomInspectSymbol = function getCustomInspectSymbol(options = {}) {\n  const _lookupCustomInspectSymbol =\n    options.lookupCustomInspectSymbol || lookupCustomInspectSymbol;\n\n  // get custom inspect symbol for node environments\n  return (\n    _lookupCustomInspectSymbol() ||\n    tryReadingCustomSymbolFromUtilInspect(options)\n  );\n};\n","/* ************************************************************************************\nExtracted from check-types.js\nhttps://gitlab.com/philbooth/check-types.js\n\nMIT License\n\nCopyright (c) 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019 Phil Booth\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n************************************************************************************ */\n\"use strict\";\n\n/* Validation functions copied from check-types package - https://www.npmjs.com/package/check-types */\nfunction isFunction(data) {\n  return typeof data === \"function\";\n}\n\nfunction isNonEmptyString(data) {\n  return isString(data) && data !== \"\";\n}\n\nfunction isDate(data) {\n  return isInstanceStrict(data, Date) && isInteger(data.getTime());\n}\n\nfunction isEmptyString(data) {\n  return data === \"\" || (data instanceof String && data.toString() === \"\");\n}\n\nfunction isString(data) {\n  return typeof data === \"string\" || data instanceof String;\n}\n\nfunction isObject(data) {\n  return toString.call(data) === \"[object Object]\";\n}\nfunction isInstanceStrict(data, prototype) {\n  try {\n    return data instanceof prototype;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction isInteger(data) {\n  return typeof data === \"number\" && data % 1 === 0;\n}\n/* End validation functions */\n\nfunction validate(bool, cb, options) {\n  if (!isFunction(cb)) {\n    options = cb;\n    cb = null;\n  }\n  if (!isObject(options)) options = { Error: \"Failed Check\" };\n  if (!bool) {\n    if (cb) {\n      cb(new ParameterError(options));\n    } else {\n      throw new ParameterError(options);\n    }\n  }\n}\n\nclass ParameterError extends Error {\n  constructor(...params) {\n    super(...params);\n  }\n}\n\nexports.ParameterError = ParameterError;\nexports.isFunction = isFunction;\nexports.isNonEmptyString = isNonEmptyString;\nexports.isDate = isDate;\nexports.isEmptyString = isEmptyString;\nexports.isString = isString;\nexports.isObject = isObject;\nexports.validate = validate;\n","// generated by genversion\nmodule.exports = '4.1.2'\n","\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n","module.exports = require('./lib/tunnel');\n","'use strict';\n\nvar net = require('net');\nvar tls = require('tls');\nvar http = require('http');\nvar https = require('https');\nvar events = require('events');\nvar assert = require('assert');\nvar util = require('util');\n\n\nexports.httpOverHttp = httpOverHttp;\nexports.httpsOverHttp = httpsOverHttp;\nexports.httpOverHttps = httpOverHttps;\nexports.httpsOverHttps = httpsOverHttps;\n\n\nfunction httpOverHttp(options) {\n  var agent = new TunnelingAgent(options);\n  agent.request = http.request;\n  return agent;\n}\n\nfunction httpsOverHttp(options) {\n  var agent = new TunnelingAgent(options);\n  agent.request = http.request;\n  agent.createSocket = createSecureSocket;\n  agent.defaultPort = 443;\n  return agent;\n}\n\nfunction httpOverHttps(options) {\n  var agent = new TunnelingAgent(options);\n  agent.request = https.request;\n  return agent;\n}\n\nfunction httpsOverHttps(options) {\n  var agent = new TunnelingAgent(options);\n  agent.request = https.request;\n  agent.createSocket = createSecureSocket;\n  agent.defaultPort = 443;\n  return agent;\n}\n\n\nfunction TunnelingAgent(options) {\n  var self = this;\n  self.options = options || {};\n  self.proxyOptions = self.options.proxy || {};\n  self.maxSockets = self.options.maxSockets || http.Agent.defaultMaxSockets;\n  self.requests = [];\n  self.sockets = [];\n\n  self.on('free', function onFree(socket, host, port, localAddress) {\n    var options = toOptions(host, port, localAddress);\n    for (var i = 0, len = self.requests.length; i < len; ++i) {\n      var pending = self.requests[i];\n      if (pending.host === options.host && pending.port === options.port) {\n        // Detect the request to connect same origin server,\n        // reuse the connection.\n        self.requests.splice(i, 1);\n        pending.request.onSocket(socket);\n        return;\n      }\n    }\n    socket.destroy();\n    self.removeSocket(socket);\n  });\n}\nutil.inherits(TunnelingAgent, events.EventEmitter);\n\nTunnelingAgent.prototype.addRequest = function addRequest(req, host, port, localAddress) {\n  var self = this;\n  var options = mergeOptions({request: req}, self.options, toOptions(host, port, localAddress));\n\n  if (self.sockets.length >= this.maxSockets) {\n    // We are over limit so we'll add it to the queue.\n    self.requests.push(options);\n    return;\n  }\n\n  // If we are under maxSockets create a new one.\n  self.createSocket(options, function(socket) {\n    socket.on('free', onFree);\n    socket.on('close', onCloseOrRemove);\n    socket.on('agentRemove', onCloseOrRemove);\n    req.onSocket(socket);\n\n    function onFree() {\n      self.emit('free', socket, options);\n    }\n\n    function onCloseOrRemove(err) {\n      self.removeSocket(socket);\n      socket.removeListener('free', onFree);\n      socket.removeListener('close', onCloseOrRemove);\n      socket.removeListener('agentRemove', onCloseOrRemove);\n    }\n  });\n};\n\nTunnelingAgent.prototype.createSocket = function createSocket(options, cb) {\n  var self = this;\n  var placeholder = {};\n  self.sockets.push(placeholder);\n\n  var connectOptions = mergeOptions({}, self.proxyOptions, {\n    method: 'CONNECT',\n    path: options.host + ':' + options.port,\n    agent: false,\n    headers: {\n      host: options.host + ':' + options.port\n    }\n  });\n  if (options.localAddress) {\n    connectOptions.localAddress = options.localAddress;\n  }\n  if (connectOptions.proxyAuth) {\n    connectOptions.headers = connectOptions.headers || {};\n    connectOptions.headers['Proxy-Authorization'] = 'Basic ' +\n        new Buffer(connectOptions.proxyAuth).toString('base64');\n  }\n\n  debug('making CONNECT request');\n  var connectReq = self.request(connectOptions);\n  connectReq.useChunkedEncodingByDefault = false; // for v0.6\n  connectReq.once('response', onResponse); // for v0.6\n  connectReq.once('upgrade', onUpgrade);   // for v0.6\n  connectReq.once('connect', onConnect);   // for v0.7 or later\n  connectReq.once('error', onError);\n  connectReq.end();\n\n  function onResponse(res) {\n    // Very hacky. This is necessary to avoid http-parser leaks.\n    res.upgrade = true;\n  }\n\n  function onUpgrade(res, socket, head) {\n    // Hacky.\n    process.nextTick(function() {\n      onConnect(res, socket, head);\n    });\n  }\n\n  function onConnect(res, socket, head) {\n    connectReq.removeAllListeners();\n    socket.removeAllListeners();\n\n    if (res.statusCode !== 200) {\n      debug('tunneling socket could not be established, statusCode=%d',\n        res.statusCode);\n      socket.destroy();\n      var error = new Error('tunneling socket could not be established, ' +\n        'statusCode=' + res.statusCode);\n      error.code = 'ECONNRESET';\n      options.request.emit('error', error);\n      self.removeSocket(placeholder);\n      return;\n    }\n    if (head.length > 0) {\n      debug('got illegal response body from proxy');\n      socket.destroy();\n      var error = new Error('got illegal response body from proxy');\n      error.code = 'ECONNRESET';\n      options.request.emit('error', error);\n      self.removeSocket(placeholder);\n      return;\n    }\n    debug('tunneling connection has established');\n    self.sockets[self.sockets.indexOf(placeholder)] = socket;\n    return cb(socket);\n  }\n\n  function onError(cause) {\n    connectReq.removeAllListeners();\n\n    debug('tunneling socket could not be established, cause=%s\\n',\n          cause.message, cause.stack);\n    var error = new Error('tunneling socket could not be established, ' +\n                          'cause=' + cause.message);\n    error.code = 'ECONNRESET';\n    options.request.emit('error', error);\n    self.removeSocket(placeholder);\n  }\n};\n\nTunnelingAgent.prototype.removeSocket = function removeSocket(socket) {\n  var pos = this.sockets.indexOf(socket)\n  if (pos === -1) {\n    return;\n  }\n  this.sockets.splice(pos, 1);\n\n  var pending = this.requests.shift();\n  if (pending) {\n    // If we have pending requests and a socket gets closed a new one\n    // needs to be created to take over in the pool for the one that closed.\n    this.createSocket(pending, function(socket) {\n      pending.request.onSocket(socket);\n    });\n  }\n};\n\nfunction createSecureSocket(options, cb) {\n  var self = this;\n  TunnelingAgent.prototype.createSocket.call(self, options, function(socket) {\n    var hostHeader = options.request.getHeader('host');\n    var tlsOptions = mergeOptions({}, self.options, {\n      socket: socket,\n      servername: hostHeader ? hostHeader.replace(/:.*$/, '') : options.host\n    });\n\n    // 0 is dummy port for v0.6\n    var secureSocket = tls.connect(0, tlsOptions);\n    self.sockets[self.sockets.indexOf(socket)] = secureSocket;\n    cb(secureSocket);\n  });\n}\n\n\nfunction toOptions(host, port, localAddress) {\n  if (typeof host === 'string') { // since v0.10\n    return {\n      host: host,\n      port: port,\n      localAddress: localAddress\n    };\n  }\n  return host; // for v0.11 or later\n}\n\nfunction mergeOptions(target) {\n  for (var i = 1, len = arguments.length; i < len; ++i) {\n    var overrides = arguments[i];\n    if (typeof overrides === 'object') {\n      var keys = Object.keys(overrides);\n      for (var j = 0, keyLen = keys.length; j < keyLen; ++j) {\n        var k = keys[j];\n        if (overrides[k] !== undefined) {\n          target[k] = overrides[k];\n        }\n      }\n    }\n  }\n  return target;\n}\n\n\nvar debug;\nif (process.env.NODE_DEBUG && /\\btunnel\\b/.test(process.env.NODE_DEBUG)) {\n  debug = function() {\n    var args = Array.prototype.slice.call(arguments);\n    if (typeof args[0] === 'string') {\n      args[0] = 'TUNNEL: ' + args[0];\n    } else {\n      args.unshift('TUNNEL:');\n    }\n    console.error.apply(console, args);\n  }\n} else {\n  debug = function() {};\n}\nexports.debug = debug; // for test\n","'use strict'\n\nexports.fromCallback = function (fn) {\n  return Object.defineProperty(function () {\n    if (typeof arguments[arguments.length - 1] === 'function') fn.apply(this, arguments)\n    else {\n      return new Promise((resolve, reject) => {\n        arguments[arguments.length] = (err, res) => {\n          if (err) return reject(err)\n          resolve(res)\n        }\n        arguments.length++\n        fn.apply(this, arguments)\n      })\n    }\n  }, 'name', { value: fn.name })\n}\n\nexports.fromPromise = function (fn) {\n  return Object.defineProperty(function () {\n    const cb = arguments[arguments.length - 1]\n    if (typeof cb !== 'function') return fn.apply(this, arguments)\n    else {\n      delete arguments[arguments.length - 1]\n      arguments.length--\n      fn.apply(this, arguments).then(r => cb(null, r), cb)\n    }\n  }, 'name', { value: fn.name })\n}\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , controlOrWhitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , port = /:\\d+$/\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/;\n\n/**\n * Remove control characters and whitespace from the beginning of a string.\n *\n * @param {Object|String} str String to trim.\n * @returns {String} A new string representing `str` stripped of control\n *     characters and whitespace from its beginning.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(controlOrWhitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (port.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':' || (port.test(url.hostname) && !url.port)) {\n    host += ':';\n  }\n\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n","\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n","\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n","\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  exports.stripBOM = function(str) {\n    if (str[0] === '\\uFEFF') {\n      return str.substring(1);\n    } else {\n      return str;\n    }\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, escapeCDATA, requiresCDATA, wrapCDATA,\n    hasProp = {}.hasOwnProperty;\n\n  builder = require('xmlbuilder');\n\n  defaults = require('./defaults').defaults;\n\n  requiresCDATA = function(entry) {\n    return typeof entry === \"string\" && (entry.indexOf('&') >= 0 || entry.indexOf('>') >= 0 || entry.indexOf('<') >= 0);\n  };\n\n  wrapCDATA = function(entry) {\n    return \"<![CDATA[\" + (escapeCDATA(entry)) + \"]]>\";\n  };\n\n  escapeCDATA = function(entry) {\n    return entry.replace(']]>', ']]]]><![CDATA[>');\n  };\n\n  exports.Builder = (function() {\n    function Builder(opts) {\n      var key, ref, value;\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n    }\n\n    Builder.prototype.buildObject = function(rootObj) {\n      var attrkey, charkey, render, rootElement, rootName;\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      if ((Object.keys(rootObj).length === 1) && (this.options.rootName === defaults['0.2'].rootName)) {\n        rootName = Object.keys(rootObj)[0];\n        rootObj = rootObj[rootName];\n      } else {\n        rootName = this.options.rootName;\n      }\n      render = (function(_this) {\n        return function(element, obj) {\n          var attr, child, entry, index, key, value;\n          if (typeof obj !== 'object') {\n            if (_this.options.cdata && requiresCDATA(obj)) {\n              element.raw(wrapCDATA(obj));\n            } else {\n              element.txt(obj);\n            }\n          } else if (Array.isArray(obj)) {\n            for (index in obj) {\n              if (!hasProp.call(obj, index)) continue;\n              child = obj[index];\n              for (key in child) {\n                entry = child[key];\n                element = render(element.ele(key), entry).up();\n              }\n            }\n          } else {\n            for (key in obj) {\n              if (!hasProp.call(obj, key)) continue;\n              child = obj[key];\n              if (key === attrkey) {\n                if (typeof child === \"object\") {\n                  for (attr in child) {\n                    value = child[attr];\n                    element = element.att(attr, value);\n                  }\n                }\n              } else if (key === charkey) {\n                if (_this.options.cdata && requiresCDATA(child)) {\n                  element = element.raw(wrapCDATA(child));\n                } else {\n                  element = element.txt(child);\n                }\n              } else if (Array.isArray(child)) {\n                for (index in child) {\n                  if (!hasProp.call(child, index)) continue;\n                  entry = child[index];\n                  if (typeof entry === 'string') {\n                    if (_this.options.cdata && requiresCDATA(entry)) {\n                      element = element.ele(key).raw(wrapCDATA(entry)).up();\n                    } else {\n                      element = element.ele(key, entry).up();\n                    }\n                  } else {\n                    element = render(element.ele(key), entry).up();\n                  }\n                }\n              } else if (typeof child === \"object\") {\n                element = render(element.ele(key), child).up();\n              } else {\n                if (typeof child === 'string' && _this.options.cdata && requiresCDATA(child)) {\n                  element = element.ele(key).raw(wrapCDATA(child)).up();\n                } else {\n                  if (child == null) {\n                    child = '';\n                  }\n                  element = element.ele(key, child.toString()).up();\n                }\n              }\n            }\n          }\n          return element;\n        };\n      })(this);\n      rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {\n        headless: this.options.headless,\n        allowSurrogateChars: this.options.allowSurrogateChars\n      });\n      return render(rootElement, rootObj).end(this.options.renderOpts);\n    };\n\n    return Builder;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  exports.defaults = {\n    \"0.1\": {\n      explicitCharkey: false,\n      trim: true,\n      normalize: true,\n      normalizeTags: false,\n      attrkey: \"@\",\n      charkey: \"#\",\n      explicitArray: false,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: false,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      childkey: '@@',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      emptyTag: ''\n    },\n    \"0.2\": {\n      explicitCharkey: false,\n      trim: false,\n      normalize: false,\n      normalizeTags: false,\n      attrkey: \"$\",\n      charkey: \"_\",\n      explicitArray: true,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: true,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      preserveChildrenOrder: false,\n      childkey: '$$',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      rootName: 'root',\n      xmldec: {\n        'version': '1.0',\n        'encoding': 'UTF-8',\n        'standalone': true\n      },\n      doctype: null,\n      renderOpts: {\n        'pretty': true,\n        'indent': '  ',\n        'newline': '\\n'\n      },\n      headless: false,\n      chunkSize: 10000,\n      emptyTag: '',\n      cdata: false\n    }\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var bom, defaults, events, isEmpty, processItem, processors, sax, setImmediate,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  sax = require('sax');\n\n  events = require('events');\n\n  bom = require('./bom');\n\n  processors = require('./processors');\n\n  setImmediate = require('timers').setImmediate;\n\n  defaults = require('./defaults').defaults;\n\n  isEmpty = function(thing) {\n    return typeof thing === \"object\" && (thing != null) && Object.keys(thing).length === 0;\n  };\n\n  processItem = function(processors, item, key) {\n    var i, len, process;\n    for (i = 0, len = processors.length; i < len; i++) {\n      process = processors[i];\n      item = process(item, key);\n    }\n    return item;\n  };\n\n  exports.Parser = (function(superClass) {\n    extend(Parser, superClass);\n\n    function Parser(opts) {\n      this.parseStringPromise = bind(this.parseStringPromise, this);\n      this.parseString = bind(this.parseString, this);\n      this.reset = bind(this.reset, this);\n      this.assignOrPush = bind(this.assignOrPush, this);\n      this.processAsync = bind(this.processAsync, this);\n      var key, ref, value;\n      if (!(this instanceof exports.Parser)) {\n        return new exports.Parser(opts);\n      }\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n      if (this.options.xmlns) {\n        this.options.xmlnskey = this.options.attrkey + \"ns\";\n      }\n      if (this.options.normalizeTags) {\n        if (!this.options.tagNameProcessors) {\n          this.options.tagNameProcessors = [];\n        }\n        this.options.tagNameProcessors.unshift(processors.normalize);\n      }\n      this.reset();\n    }\n\n    Parser.prototype.processAsync = function() {\n      var chunk, err;\n      try {\n        if (this.remaining.length <= this.options.chunkSize) {\n          chunk = this.remaining;\n          this.remaining = '';\n          this.saxParser = this.saxParser.write(chunk);\n          return this.saxParser.close();\n        } else {\n          chunk = this.remaining.substr(0, this.options.chunkSize);\n          this.remaining = this.remaining.substr(this.options.chunkSize, this.remaining.length);\n          this.saxParser = this.saxParser.write(chunk);\n          return setImmediate(this.processAsync);\n        }\n      } catch (error1) {\n        err = error1;\n        if (!this.saxParser.errThrown) {\n          this.saxParser.errThrown = true;\n          return this.emit(err);\n        }\n      }\n    };\n\n    Parser.prototype.assignOrPush = function(obj, key, newValue) {\n      if (!(key in obj)) {\n        if (!this.options.explicitArray) {\n          return obj[key] = newValue;\n        } else {\n          return obj[key] = [newValue];\n        }\n      } else {\n        if (!(obj[key] instanceof Array)) {\n          obj[key] = [obj[key]];\n        }\n        return obj[key].push(newValue);\n      }\n    };\n\n    Parser.prototype.reset = function() {\n      var attrkey, charkey, ontext, stack;\n      this.removeAllListeners();\n      this.saxParser = sax.parser(this.options.strict, {\n        trim: false,\n        normalize: false,\n        xmlns: this.options.xmlns\n      });\n      this.saxParser.errThrown = false;\n      this.saxParser.onerror = (function(_this) {\n        return function(error) {\n          _this.saxParser.resume();\n          if (!_this.saxParser.errThrown) {\n            _this.saxParser.errThrown = true;\n            return _this.emit(\"error\", error);\n          }\n        };\n      })(this);\n      this.saxParser.onend = (function(_this) {\n        return function() {\n          if (!_this.saxParser.ended) {\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      this.saxParser.ended = false;\n      this.EXPLICIT_CHARKEY = this.options.explicitCharkey;\n      this.resultObject = null;\n      stack = [];\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      this.saxParser.onopentag = (function(_this) {\n        return function(node) {\n          var key, newValue, obj, processedKey, ref;\n          obj = {};\n          obj[charkey] = \"\";\n          if (!_this.options.ignoreAttrs) {\n            ref = node.attributes;\n            for (key in ref) {\n              if (!hasProp.call(ref, key)) continue;\n              if (!(attrkey in obj) && !_this.options.mergeAttrs) {\n                obj[attrkey] = {};\n              }\n              newValue = _this.options.attrValueProcessors ? processItem(_this.options.attrValueProcessors, node.attributes[key], key) : node.attributes[key];\n              processedKey = _this.options.attrNameProcessors ? processItem(_this.options.attrNameProcessors, key) : key;\n              if (_this.options.mergeAttrs) {\n                _this.assignOrPush(obj, processedKey, newValue);\n              } else {\n                obj[attrkey][processedKey] = newValue;\n              }\n            }\n          }\n          obj[\"#name\"] = _this.options.tagNameProcessors ? processItem(_this.options.tagNameProcessors, node.name) : node.name;\n          if (_this.options.xmlns) {\n            obj[_this.options.xmlnskey] = {\n              uri: node.uri,\n              local: node.local\n            };\n          }\n          return stack.push(obj);\n        };\n      })(this);\n      this.saxParser.onclosetag = (function(_this) {\n        return function() {\n          var cdata, emptyStr, key, node, nodeName, obj, objClone, old, s, xpath;\n          obj = stack.pop();\n          nodeName = obj[\"#name\"];\n          if (!_this.options.explicitChildren || !_this.options.preserveChildrenOrder) {\n            delete obj[\"#name\"];\n          }\n          if (obj.cdata === true) {\n            cdata = obj.cdata;\n            delete obj.cdata;\n          }\n          s = stack[stack.length - 1];\n          if (obj[charkey].match(/^\\s*$/) && !cdata) {\n            emptyStr = obj[charkey];\n            delete obj[charkey];\n          } else {\n            if (_this.options.trim) {\n              obj[charkey] = obj[charkey].trim();\n            }\n            if (_this.options.normalize) {\n              obj[charkey] = obj[charkey].replace(/\\s{2,}/g, \" \").trim();\n            }\n            obj[charkey] = _this.options.valueProcessors ? processItem(_this.options.valueProcessors, obj[charkey], nodeName) : obj[charkey];\n            if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n              obj = obj[charkey];\n            }\n          }\n          if (isEmpty(obj)) {\n            obj = _this.options.emptyTag !== '' ? _this.options.emptyTag : emptyStr;\n          }\n          if (_this.options.validator != null) {\n            xpath = \"/\" + ((function() {\n              var i, len, results;\n              results = [];\n              for (i = 0, len = stack.length; i < len; i++) {\n                node = stack[i];\n                results.push(node[\"#name\"]);\n              }\n              return results;\n            })()).concat(nodeName).join(\"/\");\n            (function() {\n              var err;\n              try {\n                return obj = _this.options.validator(xpath, s && s[nodeName], obj);\n              } catch (error1) {\n                err = error1;\n                return _this.emit(\"error\", err);\n              }\n            })();\n          }\n          if (_this.options.explicitChildren && !_this.options.mergeAttrs && typeof obj === 'object') {\n            if (!_this.options.preserveChildrenOrder) {\n              node = {};\n              if (_this.options.attrkey in obj) {\n                node[_this.options.attrkey] = obj[_this.options.attrkey];\n                delete obj[_this.options.attrkey];\n              }\n              if (!_this.options.charsAsChildren && _this.options.charkey in obj) {\n                node[_this.options.charkey] = obj[_this.options.charkey];\n                delete obj[_this.options.charkey];\n              }\n              if (Object.getOwnPropertyNames(obj).length > 0) {\n                node[_this.options.childkey] = obj;\n              }\n              obj = node;\n            } else if (s) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              objClone = {};\n              for (key in obj) {\n                if (!hasProp.call(obj, key)) continue;\n                objClone[key] = obj[key];\n              }\n              s[_this.options.childkey].push(objClone);\n              delete obj[\"#name\"];\n              if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n                obj = obj[charkey];\n              }\n            }\n          }\n          if (stack.length > 0) {\n            return _this.assignOrPush(s, nodeName, obj);\n          } else {\n            if (_this.options.explicitRoot) {\n              old = obj;\n              obj = {};\n              obj[nodeName] = old;\n            }\n            _this.resultObject = obj;\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      ontext = (function(_this) {\n        return function(text) {\n          var charChild, s;\n          s = stack[stack.length - 1];\n          if (s) {\n            s[charkey] += text;\n            if (_this.options.explicitChildren && _this.options.preserveChildrenOrder && _this.options.charsAsChildren && (_this.options.includeWhiteChars || text.replace(/\\\\n/g, '').trim() !== '')) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              charChild = {\n                '#name': '__text__'\n              };\n              charChild[charkey] = text;\n              if (_this.options.normalize) {\n                charChild[charkey] = charChild[charkey].replace(/\\s{2,}/g, \" \").trim();\n              }\n              s[_this.options.childkey].push(charChild);\n            }\n            return s;\n          }\n        };\n      })(this);\n      this.saxParser.ontext = ontext;\n      return this.saxParser.oncdata = (function(_this) {\n        return function(text) {\n          var s;\n          s = ontext(text);\n          if (s) {\n            return s.cdata = true;\n          }\n        };\n      })(this);\n    };\n\n    Parser.prototype.parseString = function(str, cb) {\n      var err;\n      if ((cb != null) && typeof cb === \"function\") {\n        this.on(\"end\", function(result) {\n          this.reset();\n          return cb(null, result);\n        });\n        this.on(\"error\", function(err) {\n          this.reset();\n          return cb(err);\n        });\n      }\n      try {\n        str = str.toString();\n        if (str.trim() === '') {\n          this.emit(\"end\", null);\n          return true;\n        }\n        str = bom.stripBOM(str);\n        if (this.options.async) {\n          this.remaining = str;\n          setImmediate(this.processAsync);\n          return this.saxParser;\n        }\n        return this.saxParser.write(str).close();\n      } catch (error1) {\n        err = error1;\n        if (!(this.saxParser.errThrown || this.saxParser.ended)) {\n          this.emit('error', err);\n          return this.saxParser.errThrown = true;\n        } else if (this.saxParser.ended) {\n          throw err;\n        }\n      }\n    };\n\n    Parser.prototype.parseStringPromise = function(str) {\n      return new Promise((function(_this) {\n        return function(resolve, reject) {\n          return _this.parseString(str, function(err, value) {\n            if (err) {\n              return reject(err);\n            } else {\n              return resolve(value);\n            }\n          });\n        };\n      })(this));\n    };\n\n    return Parser;\n\n  })(events);\n\n  exports.parseString = function(str, a, b) {\n    var cb, options, parser;\n    if (b != null) {\n      if (typeof b === 'function') {\n        cb = b;\n      }\n      if (typeof a === 'object') {\n        options = a;\n      }\n    } else {\n      if (typeof a === 'function') {\n        cb = a;\n      }\n      options = {};\n    }\n    parser = new exports.Parser(options);\n    return parser.parseString(str, cb);\n  };\n\n  exports.parseStringPromise = function(str, a) {\n    var options, parser;\n    if (typeof a === 'object') {\n      options = a;\n    }\n    parser = new exports.Parser(options);\n    return parser.parseStringPromise(str);\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var prefixMatch;\n\n  prefixMatch = new RegExp(/(?!xmlns)^.*:/);\n\n  exports.normalize = function(str) {\n    return str.toLowerCase();\n  };\n\n  exports.firstCharLowerCase = function(str) {\n    return str.charAt(0).toLowerCase() + str.slice(1);\n  };\n\n  exports.stripPrefix = function(str) {\n    return str.replace(prefixMatch, '');\n  };\n\n  exports.parseNumbers = function(str) {\n    if (!isNaN(str)) {\n      str = str % 1 === 0 ? parseInt(str, 10) : parseFloat(str);\n    }\n    return str;\n  };\n\n  exports.parseBooleans = function(str) {\n    if (/^(?:true|false)$/i.test(str)) {\n      str = str.toLowerCase() === 'true';\n    }\n    return str;\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, parser, processors,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  defaults = require('./defaults');\n\n  builder = require('./builder');\n\n  parser = require('./parser');\n\n  processors = require('./processors');\n\n  exports.defaults = defaults.defaults;\n\n  exports.processors = processors;\n\n  exports.ValidationError = (function(superClass) {\n    extend(ValidationError, superClass);\n\n    function ValidationError(message) {\n      this.message = message;\n    }\n\n    return ValidationError;\n\n  })(Error);\n\n  exports.Builder = builder.Builder;\n\n  exports.Parser = parser.Parser;\n\n  exports.parseString = parser.parseString;\n\n  exports.parseStringPromise = parser.parseStringPromise;\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    Disconnected: 1,\n    Preceding: 2,\n    Following: 4,\n    Contains: 8,\n    ContainedBy: 16,\n    ImplementationSpecific: 32\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    Element: 1,\n    Attribute: 2,\n    Text: 3,\n    CData: 4,\n    EntityReference: 5,\n    EntityDeclaration: 6,\n    ProcessingInstruction: 7,\n    Comment: 8,\n    Document: 9,\n    DocType: 10,\n    DocumentFragment: 11,\n    NotationDeclaration: 12,\n    Declaration: 201,\n    Raw: 202,\n    AttributeDeclaration: 203,\n    ElementDeclaration: 204,\n    Dummy: 205\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var assign, getValue, isArray, isEmpty, isFunction, isObject, isPlainObject,\n    slice = [].slice,\n    hasProp = {}.hasOwnProperty;\n\n  assign = function() {\n    var i, key, len, source, sources, target;\n    target = arguments[0], sources = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    if (isFunction(Object.assign)) {\n      Object.assign.apply(null, arguments);\n    } else {\n      for (i = 0, len = sources.length; i < len; i++) {\n        source = sources[i];\n        if (source != null) {\n          for (key in source) {\n            if (!hasProp.call(source, key)) continue;\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n    return target;\n  };\n\n  isFunction = function(val) {\n    return !!val && Object.prototype.toString.call(val) === '[object Function]';\n  };\n\n  isObject = function(val) {\n    var ref;\n    return !!val && ((ref = typeof val) === 'function' || ref === 'object');\n  };\n\n  isArray = function(val) {\n    if (isFunction(Array.isArray)) {\n      return Array.isArray(val);\n    } else {\n      return Object.prototype.toString.call(val) === '[object Array]';\n    }\n  };\n\n  isEmpty = function(val) {\n    var key;\n    if (isArray(val)) {\n      return !val.length;\n    } else {\n      for (key in val) {\n        if (!hasProp.call(val, key)) continue;\n        return false;\n      }\n      return true;\n    }\n  };\n\n  isPlainObject = function(val) {\n    var ctor, proto;\n    return isObject(val) && (proto = Object.getPrototypeOf(val)) && (ctor = proto.constructor) && (typeof ctor === 'function') && (ctor instanceof ctor) && (Function.prototype.toString.call(ctor) === Function.prototype.toString.call(Object));\n  };\n\n  getValue = function(obj) {\n    if (isFunction(obj.valueOf)) {\n      return obj.valueOf();\n    } else {\n      return obj;\n    }\n  };\n\n  module.exports.assign = assign;\n\n  module.exports.isFunction = isFunction;\n\n  module.exports.isObject = isObject;\n\n  module.exports.isArray = isArray;\n\n  module.exports.isEmpty = isEmpty;\n\n  module.exports.isPlainObject = isPlainObject;\n\n  module.exports.getValue = getValue;\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    None: 0,\n    OpenTag: 1,\n    InsideTag: 2,\n    CloseTag: 3\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLAttribute, XMLNode;\n\n  NodeType = require('./NodeType');\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLAttribute = (function() {\n    function XMLAttribute(parent, name, value) {\n      this.parent = parent;\n      if (this.parent) {\n        this.options = this.parent.options;\n        this.stringify = this.parent.stringify;\n      }\n      if (name == null) {\n        throw new Error(\"Missing attribute name. \" + this.debugInfo(name));\n      }\n      this.name = this.stringify.name(name);\n      this.value = this.stringify.attValue(value);\n      this.type = NodeType.Attribute;\n      this.isId = false;\n      this.schemaTypeInfo = null;\n    }\n\n    Object.defineProperty(XMLAttribute.prototype, 'nodeType', {\n      get: function() {\n        return this.type;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'ownerElement', {\n      get: function() {\n        return this.parent;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'textContent', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'namespaceURI', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'prefix', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'localName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'specified', {\n      get: function() {\n        return true;\n      }\n    });\n\n    XMLAttribute.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLAttribute.prototype.toString = function(options) {\n      return this.options.writer.attribute(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLAttribute.prototype.debugInfo = function(name) {\n      name = name || this.name;\n      if (name == null) {\n        return \"parent: <\" + this.parent.name + \">\";\n      } else {\n        return \"attribute: {\" + name + \"}, parent: <\" + this.parent.name + \">\";\n      }\n    };\n\n    XMLAttribute.prototype.isEqualNode = function(node) {\n      if (node.namespaceURI !== this.namespaceURI) {\n        return false;\n      }\n      if (node.prefix !== this.prefix) {\n        return false;\n      }\n      if (node.localName !== this.localName) {\n        return false;\n      }\n      if (node.value !== this.value) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLAttribute;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCData, XMLCharacterData,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLCData = (function(superClass) {\n    extend(XMLCData, superClass);\n\n    function XMLCData(parent, text) {\n      XMLCData.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing CDATA text. \" + this.debugInfo());\n      }\n      this.name = \"#cdata-section\";\n      this.type = NodeType.CData;\n      this.value = this.stringify.cdata(text);\n    }\n\n    XMLCData.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLCData.prototype.toString = function(options) {\n      return this.options.writer.cdata(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLCData;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCharacterData, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLCharacterData = (function(superClass) {\n    extend(XMLCharacterData, superClass);\n\n    function XMLCharacterData(parent) {\n      XMLCharacterData.__super__.constructor.call(this, parent);\n      this.value = '';\n    }\n\n    Object.defineProperty(XMLCharacterData.prototype, 'data', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    Object.defineProperty(XMLCharacterData.prototype, 'length', {\n      get: function() {\n        return this.value.length;\n      }\n    });\n\n    Object.defineProperty(XMLCharacterData.prototype, 'textContent', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    XMLCharacterData.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLCharacterData.prototype.substringData = function(offset, count) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.appendData = function(arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.insertData = function(offset, arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.deleteData = function(offset, count) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.replaceData = function(offset, count, arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.isEqualNode = function(node) {\n      if (!XMLCharacterData.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.data !== this.data) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLCharacterData;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLComment,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLComment = (function(superClass) {\n    extend(XMLComment, superClass);\n\n    function XMLComment(parent, text) {\n      XMLComment.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing comment text. \" + this.debugInfo());\n      }\n      this.name = \"#comment\";\n      this.type = NodeType.Comment;\n      this.value = this.stringify.comment(text);\n    }\n\n    XMLComment.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLComment.prototype.toString = function(options) {\n      return this.options.writer.comment(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLComment;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMConfiguration, XMLDOMErrorHandler, XMLDOMStringList;\n\n  XMLDOMErrorHandler = require('./XMLDOMErrorHandler');\n\n  XMLDOMStringList = require('./XMLDOMStringList');\n\n  module.exports = XMLDOMConfiguration = (function() {\n    function XMLDOMConfiguration() {\n      var clonedSelf;\n      this.defaultParams = {\n        \"canonical-form\": false,\n        \"cdata-sections\": false,\n        \"comments\": false,\n        \"datatype-normalization\": false,\n        \"element-content-whitespace\": true,\n        \"entities\": true,\n        \"error-handler\": new XMLDOMErrorHandler(),\n        \"infoset\": true,\n        \"validate-if-schema\": false,\n        \"namespaces\": true,\n        \"namespace-declarations\": true,\n        \"normalize-characters\": false,\n        \"schema-location\": '',\n        \"schema-type\": '',\n        \"split-cdata-sections\": true,\n        \"validate\": false,\n        \"well-formed\": true\n      };\n      this.params = clonedSelf = Object.create(this.defaultParams);\n    }\n\n    Object.defineProperty(XMLDOMConfiguration.prototype, 'parameterNames', {\n      get: function() {\n        return new XMLDOMStringList(Object.keys(this.defaultParams));\n      }\n    });\n\n    XMLDOMConfiguration.prototype.getParameter = function(name) {\n      if (this.params.hasOwnProperty(name)) {\n        return this.params[name];\n      } else {\n        return null;\n      }\n    };\n\n    XMLDOMConfiguration.prototype.canSetParameter = function(name, value) {\n      return true;\n    };\n\n    XMLDOMConfiguration.prototype.setParameter = function(name, value) {\n      if (value != null) {\n        return this.params[name] = value;\n      } else {\n        return delete this.params[name];\n      }\n    };\n\n    return XMLDOMConfiguration;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMErrorHandler;\n\n  module.exports = XMLDOMErrorHandler = (function() {\n    function XMLDOMErrorHandler() {}\n\n    XMLDOMErrorHandler.prototype.handleError = function(error) {\n      throw new Error(error);\n    };\n\n    return XMLDOMErrorHandler;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMImplementation;\n\n  module.exports = XMLDOMImplementation = (function() {\n    function XMLDOMImplementation() {}\n\n    XMLDOMImplementation.prototype.hasFeature = function(feature, version) {\n      return true;\n    };\n\n    XMLDOMImplementation.prototype.createDocumentType = function(qualifiedName, publicId, systemId) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.createDocument = function(namespaceURI, qualifiedName, doctype) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.createHTMLDocument = function(title) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.getFeature = function(feature, version) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    return XMLDOMImplementation;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMStringList;\n\n  module.exports = XMLDOMStringList = (function() {\n    function XMLDOMStringList(arr) {\n      this.arr = arr || [];\n    }\n\n    Object.defineProperty(XMLDOMStringList.prototype, 'length', {\n      get: function() {\n        return this.arr.length;\n      }\n    });\n\n    XMLDOMStringList.prototype.item = function(index) {\n      return this.arr[index] || null;\n    };\n\n    XMLDOMStringList.prototype.contains = function(str) {\n      return this.arr.indexOf(str) !== -1;\n    };\n\n    return XMLDOMStringList;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDAttList, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDAttList = (function(superClass) {\n    extend(XMLDTDAttList, superClass);\n\n    function XMLDTDAttList(parent, elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      XMLDTDAttList.__super__.constructor.call(this, parent);\n      if (elementName == null) {\n        throw new Error(\"Missing DTD element name. \" + this.debugInfo());\n      }\n      if (attributeName == null) {\n        throw new Error(\"Missing DTD attribute name. \" + this.debugInfo(elementName));\n      }\n      if (!attributeType) {\n        throw new Error(\"Missing DTD attribute type. \" + this.debugInfo(elementName));\n      }\n      if (!defaultValueType) {\n        throw new Error(\"Missing DTD attribute default. \" + this.debugInfo(elementName));\n      }\n      if (defaultValueType.indexOf('#') !== 0) {\n        defaultValueType = '#' + defaultValueType;\n      }\n      if (!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. \" + this.debugInfo(elementName));\n      }\n      if (defaultValue && !defaultValueType.match(/^(#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Default value only applies to #FIXED or #DEFAULT. \" + this.debugInfo(elementName));\n      }\n      this.elementName = this.stringify.name(elementName);\n      this.type = NodeType.AttributeDeclaration;\n      this.attributeName = this.stringify.name(attributeName);\n      this.attributeType = this.stringify.dtdAttType(attributeType);\n      if (defaultValue) {\n        this.defaultValue = this.stringify.dtdAttDefault(defaultValue);\n      }\n      this.defaultValueType = defaultValueType;\n    }\n\n    XMLDTDAttList.prototype.toString = function(options) {\n      return this.options.writer.dtdAttList(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDAttList;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDElement, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDElement = (function(superClass) {\n    extend(XMLDTDElement, superClass);\n\n    function XMLDTDElement(parent, name, value) {\n      XMLDTDElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD element name. \" + this.debugInfo());\n      }\n      if (!value) {\n        value = '(#PCDATA)';\n      }\n      if (Array.isArray(value)) {\n        value = '(' + value.join(',') + ')';\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.ElementDeclaration;\n      this.value = this.stringify.dtdElementValue(value);\n    }\n\n    XMLDTDElement.prototype.toString = function(options) {\n      return this.options.writer.dtdElement(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDElement;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDEntity, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDEntity = (function(superClass) {\n    extend(XMLDTDEntity, superClass);\n\n    function XMLDTDEntity(parent, pe, name, value) {\n      XMLDTDEntity.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD entity name. \" + this.debugInfo(name));\n      }\n      if (value == null) {\n        throw new Error(\"Missing DTD entity value. \" + this.debugInfo(name));\n      }\n      this.pe = !!pe;\n      this.name = this.stringify.name(name);\n      this.type = NodeType.EntityDeclaration;\n      if (!isObject(value)) {\n        this.value = this.stringify.dtdEntityValue(value);\n        this.internal = true;\n      } else {\n        if (!value.pubID && !value.sysID) {\n          throw new Error(\"Public and/or system identifiers are required for an external entity. \" + this.debugInfo(name));\n        }\n        if (value.pubID && !value.sysID) {\n          throw new Error(\"System identifier is required for a public external entity. \" + this.debugInfo(name));\n        }\n        this.internal = false;\n        if (value.pubID != null) {\n          this.pubID = this.stringify.dtdPubID(value.pubID);\n        }\n        if (value.sysID != null) {\n          this.sysID = this.stringify.dtdSysID(value.sysID);\n        }\n        if (value.nData != null) {\n          this.nData = this.stringify.dtdNData(value.nData);\n        }\n        if (this.pe && this.nData) {\n          throw new Error(\"Notation declaration is not allowed in a parameter entity. \" + this.debugInfo(name));\n        }\n      }\n    }\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'notationName', {\n      get: function() {\n        return this.nData || null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'inputEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'xmlEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'xmlVersion', {\n      get: function() {\n        return null;\n      }\n    });\n\n    XMLDTDEntity.prototype.toString = function(options) {\n      return this.options.writer.dtdEntity(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDEntity;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDNotation, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDNotation = (function(superClass) {\n    extend(XMLDTDNotation, superClass);\n\n    function XMLDTDNotation(parent, name, value) {\n      XMLDTDNotation.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD notation name. \" + this.debugInfo(name));\n      }\n      if (!value.pubID && !value.sysID) {\n        throw new Error(\"Public or system identifiers are required for an external entity. \" + this.debugInfo(name));\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.NotationDeclaration;\n      if (value.pubID != null) {\n        this.pubID = this.stringify.dtdPubID(value.pubID);\n      }\n      if (value.sysID != null) {\n        this.sysID = this.stringify.dtdSysID(value.sysID);\n      }\n    }\n\n    Object.defineProperty(XMLDTDNotation.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDNotation.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    XMLDTDNotation.prototype.toString = function(options) {\n      return this.options.writer.dtdNotation(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDNotation;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDeclaration, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDeclaration = (function(superClass) {\n    extend(XMLDeclaration, superClass);\n\n    function XMLDeclaration(parent, version, encoding, standalone) {\n      var ref;\n      XMLDeclaration.__super__.constructor.call(this, parent);\n      if (isObject(version)) {\n        ref = version, version = ref.version, encoding = ref.encoding, standalone = ref.standalone;\n      }\n      if (!version) {\n        version = '1.0';\n      }\n      this.type = NodeType.Declaration;\n      this.version = this.stringify.xmlVersion(version);\n      if (encoding != null) {\n        this.encoding = this.stringify.xmlEncoding(encoding);\n      }\n      if (standalone != null) {\n        this.standalone = this.stringify.xmlStandalone(standalone);\n      }\n    }\n\n    XMLDeclaration.prototype.toString = function(options) {\n      return this.options.writer.declaration(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDeclaration;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDocType, XMLNamedNodeMap, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLNamedNodeMap = require('./XMLNamedNodeMap');\n\n  module.exports = XMLDocType = (function(superClass) {\n    extend(XMLDocType, superClass);\n\n    function XMLDocType(parent, pubID, sysID) {\n      var child, i, len, ref, ref1, ref2;\n      XMLDocType.__super__.constructor.call(this, parent);\n      this.type = NodeType.DocType;\n      if (parent.children) {\n        ref = parent.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.Element) {\n            this.name = child.name;\n            break;\n          }\n        }\n      }\n      this.documentObject = parent;\n      if (isObject(pubID)) {\n        ref1 = pubID, pubID = ref1.pubID, sysID = ref1.sysID;\n      }\n      if (sysID == null) {\n        ref2 = [pubID, sysID], sysID = ref2[0], pubID = ref2[1];\n      }\n      if (pubID != null) {\n        this.pubID = this.stringify.dtdPubID(pubID);\n      }\n      if (sysID != null) {\n        this.sysID = this.stringify.dtdSysID(sysID);\n      }\n    }\n\n    Object.defineProperty(XMLDocType.prototype, 'entities', {\n      get: function() {\n        var child, i, len, nodes, ref;\n        nodes = {};\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if ((child.type === NodeType.EntityDeclaration) && !child.pe) {\n            nodes[child.name] = child;\n          }\n        }\n        return new XMLNamedNodeMap(nodes);\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'notations', {\n      get: function() {\n        var child, i, len, nodes, ref;\n        nodes = {};\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.NotationDeclaration) {\n            nodes[child.name] = child;\n          }\n        }\n        return new XMLNamedNodeMap(nodes);\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'internalSubset', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    XMLDocType.prototype.element = function(name, value) {\n      var child;\n      child = new XMLDTDElement(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var child;\n      child = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.entity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, false, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.pEntity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, true, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.notation = function(name, value) {\n      var child;\n      child = new XMLDTDNotation(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.toString = function(options) {\n      return this.options.writer.docType(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLDocType.prototype.ele = function(name, value) {\n      return this.element(name, value);\n    };\n\n    XMLDocType.prototype.att = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      return this.attList(elementName, attributeName, attributeType, defaultValueType, defaultValue);\n    };\n\n    XMLDocType.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocType.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocType.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    XMLDocType.prototype.up = function() {\n      return this.root() || this.documentObject;\n    };\n\n    XMLDocType.prototype.isEqualNode = function(node) {\n      if (!XMLDocType.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.name !== this.name) {\n        return false;\n      }\n      if (node.publicId !== this.publicId) {\n        return false;\n      }\n      if (node.systemId !== this.systemId) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLDocType;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDOMConfiguration, XMLDOMImplementation, XMLDocument, XMLNode, XMLStringWriter, XMLStringifier, isPlainObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isPlainObject = require('./Utility').isPlainObject;\n\n  XMLDOMImplementation = require('./XMLDOMImplementation');\n\n  XMLDOMConfiguration = require('./XMLDOMConfiguration');\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  module.exports = XMLDocument = (function(superClass) {\n    extend(XMLDocument, superClass);\n\n    function XMLDocument(options) {\n      XMLDocument.__super__.constructor.call(this, null);\n      this.name = \"#document\";\n      this.type = NodeType.Document;\n      this.documentURI = null;\n      this.domConfig = new XMLDOMConfiguration();\n      options || (options = {});\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.stringify = new XMLStringifier(options);\n    }\n\n    Object.defineProperty(XMLDocument.prototype, 'implementation', {\n      value: new XMLDOMImplementation()\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'doctype', {\n      get: function() {\n        var child, i, len, ref;\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.DocType) {\n            return child;\n          }\n        }\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'documentElement', {\n      get: function() {\n        return this.rootObject || null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'inputEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'strictErrorChecking', {\n      get: function() {\n        return false;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlEncoding', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].encoding;\n        } else {\n          return null;\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlStandalone', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].standalone === 'yes';\n        } else {\n          return false;\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlVersion', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].version;\n        } else {\n          return \"1.0\";\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'URL', {\n      get: function() {\n        return this.documentURI;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'origin', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'compatMode', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'characterSet', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'contentType', {\n      get: function() {\n        return null;\n      }\n    });\n\n    XMLDocument.prototype.end = function(writer) {\n      var writerOptions;\n      writerOptions = {};\n      if (!writer) {\n        writer = this.options.writer;\n      } else if (isPlainObject(writer)) {\n        writerOptions = writer;\n        writer = this.options.writer;\n      }\n      return writer.document(this, writer.filterOptions(writerOptions));\n    };\n\n    XMLDocument.prototype.toString = function(options) {\n      return this.options.writer.document(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLDocument.prototype.createElement = function(tagName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createDocumentFragment = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createTextNode = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createComment = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createCDATASection = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createProcessingInstruction = function(target, data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createAttribute = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createEntityReference = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByTagName = function(tagname) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.importNode = function(importedNode, deep) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createElementNS = function(namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createAttributeNS = function(namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementById = function(elementId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.adoptNode = function(source) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.normalizeDocument = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.renameNode = function(node, namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByClassName = function(classNames) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createEvent = function(eventInterface) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createRange = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createNodeIterator = function(root, whatToShow, filter) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createTreeWalker = function(root, whatToShow, filter) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    return XMLDocument;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLAttribute, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDocument, XMLDocumentCB, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLStringifier, XMLText, getValue, isFunction, isObject, isPlainObject, ref,\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isPlainObject = ref.isPlainObject, getValue = ref.getValue;\n\n  NodeType = require('./NodeType');\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLElement = require('./XMLElement');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLDocumentCB = (function() {\n    function XMLDocumentCB(options, onData, onEnd) {\n      var writerOptions;\n      this.name = \"?xml\";\n      this.type = NodeType.Document;\n      options || (options = {});\n      writerOptions = {};\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      } else if (isPlainObject(options.writer)) {\n        writerOptions = options.writer;\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.writer = options.writer;\n      this.writerOptions = this.writer.filterOptions(writerOptions);\n      this.stringify = new XMLStringifier(options);\n      this.onDataCallback = onData || function() {};\n      this.onEndCallback = onEnd || function() {};\n      this.currentNode = null;\n      this.currentLevel = -1;\n      this.openTags = {};\n      this.documentStarted = false;\n      this.documentCompleted = false;\n      this.root = null;\n    }\n\n    XMLDocumentCB.prototype.createChildNode = function(node) {\n      var att, attName, attributes, child, i, len, ref1, ref2;\n      switch (node.type) {\n        case NodeType.CData:\n          this.cdata(node.value);\n          break;\n        case NodeType.Comment:\n          this.comment(node.value);\n          break;\n        case NodeType.Element:\n          attributes = {};\n          ref1 = node.attribs;\n          for (attName in ref1) {\n            if (!hasProp.call(ref1, attName)) continue;\n            att = ref1[attName];\n            attributes[attName] = att.value;\n          }\n          this.node(node.name, attributes);\n          break;\n        case NodeType.Dummy:\n          this.dummy();\n          break;\n        case NodeType.Raw:\n          this.raw(node.value);\n          break;\n        case NodeType.Text:\n          this.text(node.value);\n          break;\n        case NodeType.ProcessingInstruction:\n          this.instruction(node.target, node.value);\n          break;\n        default:\n          throw new Error(\"This XML node type is not supported in a JS object: \" + node.constructor.name);\n      }\n      ref2 = node.children;\n      for (i = 0, len = ref2.length; i < len; i++) {\n        child = ref2[i];\n        this.createChildNode(child);\n        if (child.type === NodeType.Element) {\n          this.up();\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dummy = function() {\n      return this;\n    };\n\n    XMLDocumentCB.prototype.node = function(name, attributes, text) {\n      var ref1;\n      if (name == null) {\n        throw new Error(\"Missing node name.\");\n      }\n      if (this.root && this.currentLevel === -1) {\n        throw new Error(\"Document can only have one root node. \" + this.debugInfo(name));\n      }\n      this.openCurrent();\n      name = getValue(name);\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\n      }\n      this.currentNode = new XMLElement(this, name, attributes);\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      if (text != null) {\n        this.text(text);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.element = function(name, attributes, text) {\n      var child, i, len, oldValidationFlag, ref1, root;\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        this.dtdElement.apply(this, arguments);\n      } else {\n        if (Array.isArray(name) || isObject(name) || isFunction(name)) {\n          oldValidationFlag = this.options.noValidation;\n          this.options.noValidation = true;\n          root = new XMLDocument(this.options).element('TEMP_ROOT');\n          root.element(name);\n          this.options.noValidation = oldValidationFlag;\n          ref1 = root.children;\n          for (i = 0, len = ref1.length; i < len; i++) {\n            child = ref1[i];\n            this.createChildNode(child);\n            if (child.type === NodeType.Element) {\n              this.up();\n            }\n          }\n        } else {\n          this.node(name, attributes, text);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (!this.currentNode || this.currentNode.children) {\n        throw new Error(\"att() can only be used immediately after an ele() call in callback mode. \" + this.debugInfo(name));\n      }\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (this.options.keepNullAttributes && (value == null)) {\n          this.currentNode.attribs[name] = new XMLAttribute(this, name, \"\");\n        } else if (value != null) {\n          this.currentNode.attribs[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.text = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLText(this, value);\n      this.onData(this.writer.text(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.cdata = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLCData(this, value);\n      this.onData(this.writer.cdata(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.comment = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLComment(this, value);\n      this.onData(this.writer.comment(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.raw = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLRaw(this, value);\n      this.onData(this.writer.raw(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.instruction = function(target, value) {\n      var i, insTarget, insValue, len, node;\n      this.openCurrent();\n      if (target != null) {\n        target = getValue(target);\n      }\n      if (value != null) {\n        value = getValue(value);\n      }\n      if (Array.isArray(target)) {\n        for (i = 0, len = target.length; i < len; i++) {\n          insTarget = target[i];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        node = new XMLProcessingInstruction(this, target, value);\n        this.onData(this.writer.processingInstruction(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.declaration = function(version, encoding, standalone) {\n      var node;\n      this.openCurrent();\n      if (this.documentStarted) {\n        throw new Error(\"declaration() must be the first node.\");\n      }\n      node = new XMLDeclaration(this, version, encoding, standalone);\n      this.onData(this.writer.declaration(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.doctype = function(root, pubID, sysID) {\n      this.openCurrent();\n      if (root == null) {\n        throw new Error(\"Missing root node name.\");\n      }\n      if (this.root) {\n        throw new Error(\"dtd() must come before the root node.\");\n      }\n      this.currentNode = new XMLDocType(this, pubID, sysID);\n      this.currentNode.rootNodeName = root;\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dtdElement = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDElement(this, name, value);\n      this.onData(this.writer.dtdElement(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.onData(this.writer.dtdAttList(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.entity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, false, name, value);\n      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.pEntity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, true, name, value);\n      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.notation = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDNotation(this, name, value);\n      this.onData(this.writer.dtdNotation(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.up = function() {\n      if (this.currentLevel < 0) {\n        throw new Error(\"The document node has no parent.\");\n      }\n      if (this.currentNode) {\n        if (this.currentNode.children) {\n          this.closeNode(this.currentNode);\n        } else {\n          this.openNode(this.currentNode);\n        }\n        this.currentNode = null;\n      } else {\n        this.closeNode(this.openTags[this.currentLevel]);\n      }\n      delete this.openTags[this.currentLevel];\n      this.currentLevel--;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.end = function() {\n      while (this.currentLevel >= 0) {\n        this.up();\n      }\n      return this.onEnd();\n    };\n\n    XMLDocumentCB.prototype.openCurrent = function() {\n      if (this.currentNode) {\n        this.currentNode.children = true;\n        return this.openNode(this.currentNode);\n      }\n    };\n\n    XMLDocumentCB.prototype.openNode = function(node) {\n      var att, chunk, name, ref1;\n      if (!node.isOpen) {\n        if (!this.root && this.currentLevel === 0 && node.type === NodeType.Element) {\n          this.root = node;\n        }\n        chunk = '';\n        if (node.type === NodeType.Element) {\n          this.writerOptions.state = WriterState.OpenTag;\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<' + node.name;\n          ref1 = node.attribs;\n          for (name in ref1) {\n            if (!hasProp.call(ref1, name)) continue;\n            att = ref1[name];\n            chunk += this.writer.attribute(att, this.writerOptions, this.currentLevel);\n          }\n          chunk += (node.children ? '>' : '/>') + this.writer.endline(node, this.writerOptions, this.currentLevel);\n          this.writerOptions.state = WriterState.InsideTag;\n        } else {\n          this.writerOptions.state = WriterState.OpenTag;\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<!DOCTYPE ' + node.rootNodeName;\n          if (node.pubID && node.sysID) {\n            chunk += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n          } else if (node.sysID) {\n            chunk += ' SYSTEM \"' + node.sysID + '\"';\n          }\n          if (node.children) {\n            chunk += ' [';\n            this.writerOptions.state = WriterState.InsideTag;\n          } else {\n            this.writerOptions.state = WriterState.CloseTag;\n            chunk += '>';\n          }\n          chunk += this.writer.endline(node, this.writerOptions, this.currentLevel);\n        }\n        this.onData(chunk, this.currentLevel);\n        return node.isOpen = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.closeNode = function(node) {\n      var chunk;\n      if (!node.isClosed) {\n        chunk = '';\n        this.writerOptions.state = WriterState.CloseTag;\n        if (node.type === NodeType.Element) {\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '</' + node.name + '>' + this.writer.endline(node, this.writerOptions, this.currentLevel);\n        } else {\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + ']>' + this.writer.endline(node, this.writerOptions, this.currentLevel);\n        }\n        this.writerOptions.state = WriterState.None;\n        this.onData(chunk, this.currentLevel);\n        return node.isClosed = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.onData = function(chunk, level) {\n      this.documentStarted = true;\n      return this.onDataCallback(chunk, level + 1);\n    };\n\n    XMLDocumentCB.prototype.onEnd = function() {\n      this.documentCompleted = true;\n      return this.onEndCallback();\n    };\n\n    XMLDocumentCB.prototype.debugInfo = function(name) {\n      if (name == null) {\n        return \"\";\n      } else {\n        return \"node: <\" + name + \">\";\n      }\n    };\n\n    XMLDocumentCB.prototype.ele = function() {\n      return this.element.apply(this, arguments);\n    };\n\n    XMLDocumentCB.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLDocumentCB.prototype.dtd = function(root, pubID, sysID) {\n      return this.doctype(root, pubID, sysID);\n    };\n\n    XMLDocumentCB.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLDocumentCB.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.att = function() {\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.a = function() {\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocumentCB.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocumentCB.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    return XMLDocumentCB;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDummy, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDummy = (function(superClass) {\n    extend(XMLDummy, superClass);\n\n    function XMLDummy(parent) {\n      XMLDummy.__super__.constructor.call(this, parent);\n      this.type = NodeType.Dummy;\n    }\n\n    XMLDummy.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLDummy.prototype.toString = function(options) {\n      return '';\n    };\n\n    return XMLDummy;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLAttribute, XMLElement, XMLNamedNodeMap, XMLNode, getValue, isFunction, isObject, ref,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, getValue = ref.getValue;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLNamedNodeMap = require('./XMLNamedNodeMap');\n\n  module.exports = XMLElement = (function(superClass) {\n    extend(XMLElement, superClass);\n\n    function XMLElement(parent, name, attributes) {\n      var child, j, len, ref1;\n      XMLElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing element name. \" + this.debugInfo());\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.Element;\n      this.attribs = {};\n      this.schemaTypeInfo = null;\n      if (attributes != null) {\n        this.attribute(attributes);\n      }\n      if (parent.type === NodeType.Document) {\n        this.isRoot = true;\n        this.documentObject = parent;\n        parent.rootObject = this;\n        if (parent.children) {\n          ref1 = parent.children;\n          for (j = 0, len = ref1.length; j < len; j++) {\n            child = ref1[j];\n            if (child.type === NodeType.DocType) {\n              child.name = this.name;\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    Object.defineProperty(XMLElement.prototype, 'tagName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'namespaceURI', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'prefix', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'localName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'id', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'className', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'classList', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'attributes', {\n      get: function() {\n        if (!this.attributeMap || !this.attributeMap.nodes) {\n          this.attributeMap = new XMLNamedNodeMap(this.attribs);\n        }\n        return this.attributeMap;\n      }\n    });\n\n    XMLElement.prototype.clone = function() {\n      var att, attName, clonedSelf, ref1;\n      clonedSelf = Object.create(this);\n      if (clonedSelf.isRoot) {\n        clonedSelf.documentObject = null;\n      }\n      clonedSelf.attribs = {};\n      ref1 = this.attribs;\n      for (attName in ref1) {\n        if (!hasProp.call(ref1, attName)) continue;\n        att = ref1[attName];\n        clonedSelf.attribs[attName] = att.clone();\n      }\n      clonedSelf.children = [];\n      this.children.forEach(function(child) {\n        var clonedChild;\n        clonedChild = child.clone();\n        clonedChild.parent = clonedSelf;\n        return clonedSelf.children.push(clonedChild);\n      });\n      return clonedSelf;\n    };\n\n    XMLElement.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (this.options.keepNullAttributes && (value == null)) {\n          this.attribs[name] = new XMLAttribute(this, name, \"\");\n        } else if (value != null) {\n          this.attribs[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLElement.prototype.removeAttribute = function(name) {\n      var attName, j, len;\n      if (name == null) {\n        throw new Error(\"Missing attribute name. \" + this.debugInfo());\n      }\n      name = getValue(name);\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          attName = name[j];\n          delete this.attribs[attName];\n        }\n      } else {\n        delete this.attribs[name];\n      }\n      return this;\n    };\n\n    XMLElement.prototype.toString = function(options) {\n      return this.options.writer.element(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLElement.prototype.att = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    XMLElement.prototype.a = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    XMLElement.prototype.getAttribute = function(name) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name].value;\n      } else {\n        return null;\n      }\n    };\n\n    XMLElement.prototype.setAttribute = function(name, value) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNode = function(name) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name];\n      } else {\n        return null;\n      }\n    };\n\n    XMLElement.prototype.setAttributeNode = function(newAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.removeAttributeNode = function(oldAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagName = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setAttributeNS = function(namespaceURI, qualifiedName, value) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.removeAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNodeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setAttributeNodeNS = function(newAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.hasAttribute = function(name) {\n      return this.attribs.hasOwnProperty(name);\n    };\n\n    XMLElement.prototype.hasAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setIdAttribute = function(name, isId) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name].isId;\n      } else {\n        return isId;\n      }\n    };\n\n    XMLElement.prototype.setIdAttributeNS = function(namespaceURI, localName, isId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setIdAttributeNode = function(idAttr, isId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagName = function(tagname) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByClassName = function(classNames) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.isEqualNode = function(node) {\n      var i, j, ref1;\n      if (!XMLElement.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.namespaceURI !== this.namespaceURI) {\n        return false;\n      }\n      if (node.prefix !== this.prefix) {\n        return false;\n      }\n      if (node.localName !== this.localName) {\n        return false;\n      }\n      if (node.attribs.length !== this.attribs.length) {\n        return false;\n      }\n      for (i = j = 0, ref1 = this.attribs.length - 1; 0 <= ref1 ? j <= ref1 : j >= ref1; i = 0 <= ref1 ? ++j : --j) {\n        if (!this.attribs[i].isEqualNode(node.attribs[i])) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    return XMLElement;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNamedNodeMap;\n\n  module.exports = XMLNamedNodeMap = (function() {\n    function XMLNamedNodeMap(nodes) {\n      this.nodes = nodes;\n    }\n\n    Object.defineProperty(XMLNamedNodeMap.prototype, 'length', {\n      get: function() {\n        return Object.keys(this.nodes).length || 0;\n      }\n    });\n\n    XMLNamedNodeMap.prototype.clone = function() {\n      return this.nodes = null;\n    };\n\n    XMLNamedNodeMap.prototype.getNamedItem = function(name) {\n      return this.nodes[name];\n    };\n\n    XMLNamedNodeMap.prototype.setNamedItem = function(node) {\n      var oldNode;\n      oldNode = this.nodes[node.nodeName];\n      this.nodes[node.nodeName] = node;\n      return oldNode || null;\n    };\n\n    XMLNamedNodeMap.prototype.removeNamedItem = function(name) {\n      var oldNode;\n      oldNode = this.nodes[name];\n      delete this.nodes[name];\n      return oldNode || null;\n    };\n\n    XMLNamedNodeMap.prototype.item = function(index) {\n      return this.nodes[Object.keys(this.nodes)[index]] || null;\n    };\n\n    XMLNamedNodeMap.prototype.getNamedItemNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLNamedNodeMap.prototype.setNamedItemNS = function(node) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLNamedNodeMap.prototype.removeNamedItemNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    return XMLNamedNodeMap;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var DocumentPosition, NodeType, XMLCData, XMLComment, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLNamedNodeMap, XMLNode, XMLNodeList, XMLProcessingInstruction, XMLRaw, XMLText, getValue, isEmpty, isFunction, isObject, ref1,\n    hasProp = {}.hasOwnProperty;\n\n  ref1 = require('./Utility'), isObject = ref1.isObject, isFunction = ref1.isFunction, isEmpty = ref1.isEmpty, getValue = ref1.getValue;\n\n  XMLElement = null;\n\n  XMLCData = null;\n\n  XMLComment = null;\n\n  XMLDeclaration = null;\n\n  XMLDocType = null;\n\n  XMLRaw = null;\n\n  XMLText = null;\n\n  XMLProcessingInstruction = null;\n\n  XMLDummy = null;\n\n  NodeType = null;\n\n  XMLNodeList = null;\n\n  XMLNamedNodeMap = null;\n\n  DocumentPosition = null;\n\n  module.exports = XMLNode = (function() {\n    function XMLNode(parent1) {\n      this.parent = parent1;\n      if (this.parent) {\n        this.options = this.parent.options;\n        this.stringify = this.parent.stringify;\n      }\n      this.value = null;\n      this.children = [];\n      this.baseURI = null;\n      if (!XMLElement) {\n        XMLElement = require('./XMLElement');\n        XMLCData = require('./XMLCData');\n        XMLComment = require('./XMLComment');\n        XMLDeclaration = require('./XMLDeclaration');\n        XMLDocType = require('./XMLDocType');\n        XMLRaw = require('./XMLRaw');\n        XMLText = require('./XMLText');\n        XMLProcessingInstruction = require('./XMLProcessingInstruction');\n        XMLDummy = require('./XMLDummy');\n        NodeType = require('./NodeType');\n        XMLNodeList = require('./XMLNodeList');\n        XMLNamedNodeMap = require('./XMLNamedNodeMap');\n        DocumentPosition = require('./DocumentPosition');\n      }\n    }\n\n    Object.defineProperty(XMLNode.prototype, 'nodeName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nodeType', {\n      get: function() {\n        return this.type;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nodeValue', {\n      get: function() {\n        return this.value;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'parentNode', {\n      get: function() {\n        return this.parent;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'childNodes', {\n      get: function() {\n        if (!this.childNodeList || !this.childNodeList.nodes) {\n          this.childNodeList = new XMLNodeList(this.children);\n        }\n        return this.childNodeList;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'firstChild', {\n      get: function() {\n        return this.children[0] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'lastChild', {\n      get: function() {\n        return this.children[this.children.length - 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'previousSibling', {\n      get: function() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        return this.parent.children[i - 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nextSibling', {\n      get: function() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        return this.parent.children[i + 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'ownerDocument', {\n      get: function() {\n        return this.document() || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'textContent', {\n      get: function() {\n        var child, j, len, ref2, str;\n        if (this.nodeType === NodeType.Element || this.nodeType === NodeType.DocumentFragment) {\n          str = '';\n          ref2 = this.children;\n          for (j = 0, len = ref2.length; j < len; j++) {\n            child = ref2[j];\n            if (child.textContent) {\n              str += child.textContent;\n            }\n          }\n          return str;\n        } else {\n          return null;\n        }\n      },\n      set: function(value) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    XMLNode.prototype.setParent = function(parent) {\n      var child, j, len, ref2, results;\n      this.parent = parent;\n      if (parent) {\n        this.options = parent.options;\n        this.stringify = parent.stringify;\n      }\n      ref2 = this.children;\n      results = [];\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        results.push(child.setParent(this));\n      }\n      return results;\n    };\n\n    XMLNode.prototype.element = function(name, attributes, text) {\n      var childNode, item, j, k, key, lastChild, len, len1, ref2, ref3, val;\n      lastChild = null;\n      if (attributes === null && (text == null)) {\n        ref2 = [{}, null], attributes = ref2[0], text = ref2[1];\n      }\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref3 = [attributes, text], text = ref3[0], attributes = ref3[1];\n      }\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          item = name[j];\n          lastChild = this.element(item);\n        }\n      } else if (isFunction(name)) {\n        lastChild = this.element(name.apply());\n      } else if (isObject(name)) {\n        for (key in name) {\n          if (!hasProp.call(name, key)) continue;\n          val = name[key];\n          if (isFunction(val)) {\n            val = val.apply();\n          }\n          if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {\n            lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);\n          } else if (!this.options.separateArrayItems && Array.isArray(val) && isEmpty(val)) {\n            lastChild = this.dummy();\n          } else if (isObject(val) && isEmpty(val)) {\n            lastChild = this.element(key);\n          } else if (!this.options.keepNullNodes && (val == null)) {\n            lastChild = this.dummy();\n          } else if (!this.options.separateArrayItems && Array.isArray(val)) {\n            for (k = 0, len1 = val.length; k < len1; k++) {\n              item = val[k];\n              childNode = {};\n              childNode[key] = item;\n              lastChild = this.element(childNode);\n            }\n          } else if (isObject(val)) {\n            if (!this.options.ignoreDecorators && this.stringify.convertTextKey && key.indexOf(this.stringify.convertTextKey) === 0) {\n              lastChild = this.element(val);\n            } else {\n              lastChild = this.element(key);\n              lastChild.element(val);\n            }\n          } else {\n            lastChild = this.element(key, val);\n          }\n        }\n      } else if (!this.options.keepNullNodes && text === null) {\n        lastChild = this.dummy();\n      } else {\n        if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {\n          lastChild = this.text(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {\n          lastChild = this.cdata(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {\n          lastChild = this.comment(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {\n          lastChild = this.raw(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && name.indexOf(this.stringify.convertPIKey) === 0) {\n          lastChild = this.instruction(name.substr(this.stringify.convertPIKey.length), text);\n        } else {\n          lastChild = this.node(name, attributes, text);\n        }\n      }\n      if (lastChild == null) {\n        throw new Error(\"Could not create any elements with: \" + name + \". \" + this.debugInfo());\n      }\n      return lastChild;\n    };\n\n    XMLNode.prototype.insertBefore = function(name, attributes, text) {\n      var child, i, newChild, refChild, removed;\n      if (name != null ? name.type : void 0) {\n        newChild = name;\n        refChild = attributes;\n        newChild.setParent(this);\n        if (refChild) {\n          i = children.indexOf(refChild);\n          removed = children.splice(i);\n          children.push(newChild);\n          Array.prototype.push.apply(children, removed);\n        } else {\n          children.push(newChild);\n        }\n        return newChild;\n      } else {\n        if (this.isRoot) {\n          throw new Error(\"Cannot insert elements at root level. \" + this.debugInfo(name));\n        }\n        i = this.parent.children.indexOf(this);\n        removed = this.parent.children.splice(i);\n        child = this.parent.element(name, attributes, text);\n        Array.prototype.push.apply(this.parent.children, removed);\n        return child;\n      }\n    };\n\n    XMLNode.prototype.insertAfter = function(name, attributes, text) {\n      var child, i, removed;\n      if (this.isRoot) {\n        throw new Error(\"Cannot insert elements at root level. \" + this.debugInfo(name));\n      }\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.element(name, attributes, text);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return child;\n    };\n\n    XMLNode.prototype.remove = function() {\n      var i, ref2;\n      if (this.isRoot) {\n        throw new Error(\"Cannot remove the root element. \" + this.debugInfo());\n      }\n      i = this.parent.children.indexOf(this);\n      [].splice.apply(this.parent.children, [i, i - i + 1].concat(ref2 = [])), ref2;\n      return this.parent;\n    };\n\n    XMLNode.prototype.node = function(name, attributes, text) {\n      var child, ref2;\n      if (name != null) {\n        name = getValue(name);\n      }\n      attributes || (attributes = {});\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref2 = [attributes, text], text = ref2[0], attributes = ref2[1];\n      }\n      child = new XMLElement(this, name, attributes);\n      if (text != null) {\n        child.text(text);\n      }\n      this.children.push(child);\n      return child;\n    };\n\n    XMLNode.prototype.text = function(value) {\n      var child;\n      if (isObject(value)) {\n        this.element(value);\n      }\n      child = new XMLText(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.cdata = function(value) {\n      var child;\n      child = new XMLCData(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.comment = function(value) {\n      var child;\n      child = new XMLComment(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.commentBefore = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.commentAfter = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.raw = function(value) {\n      var child;\n      child = new XMLRaw(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.dummy = function() {\n      var child;\n      child = new XMLDummy(this);\n      return child;\n    };\n\n    XMLNode.prototype.instruction = function(target, value) {\n      var insTarget, insValue, instruction, j, len;\n      if (target != null) {\n        target = getValue(target);\n      }\n      if (value != null) {\n        value = getValue(value);\n      }\n      if (Array.isArray(target)) {\n        for (j = 0, len = target.length; j < len; j++) {\n          insTarget = target[j];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        instruction = new XMLProcessingInstruction(this, target, value);\n        this.children.push(instruction);\n      }\n      return this;\n    };\n\n    XMLNode.prototype.instructionBefore = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.instructionAfter = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.declaration = function(version, encoding, standalone) {\n      var doc, xmldec;\n      doc = this.document();\n      xmldec = new XMLDeclaration(doc, version, encoding, standalone);\n      if (doc.children.length === 0) {\n        doc.children.unshift(xmldec);\n      } else if (doc.children[0].type === NodeType.Declaration) {\n        doc.children[0] = xmldec;\n      } else {\n        doc.children.unshift(xmldec);\n      }\n      return doc.root() || doc;\n    };\n\n    XMLNode.prototype.dtd = function(pubID, sysID) {\n      var child, doc, doctype, i, j, k, len, len1, ref2, ref3;\n      doc = this.document();\n      doctype = new XMLDocType(doc, pubID, sysID);\n      ref2 = doc.children;\n      for (i = j = 0, len = ref2.length; j < len; i = ++j) {\n        child = ref2[i];\n        if (child.type === NodeType.DocType) {\n          doc.children[i] = doctype;\n          return doctype;\n        }\n      }\n      ref3 = doc.children;\n      for (i = k = 0, len1 = ref3.length; k < len1; i = ++k) {\n        child = ref3[i];\n        if (child.isRoot) {\n          doc.children.splice(i, 0, doctype);\n          return doctype;\n        }\n      }\n      doc.children.push(doctype);\n      return doctype;\n    };\n\n    XMLNode.prototype.up = function() {\n      if (this.isRoot) {\n        throw new Error(\"The root node has no parent. Use doc() if you need to get the document object.\");\n      }\n      return this.parent;\n    };\n\n    XMLNode.prototype.root = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.type === NodeType.Document) {\n          return node.rootObject;\n        } else if (node.isRoot) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.document = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.type === NodeType.Document) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.end = function(options) {\n      return this.document().end(options);\n    };\n\n    XMLNode.prototype.prev = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i < 1) {\n        throw new Error(\"Already at the first node. \" + this.debugInfo());\n      }\n      return this.parent.children[i - 1];\n    };\n\n    XMLNode.prototype.next = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i === -1 || i === this.parent.children.length - 1) {\n        throw new Error(\"Already at the last node. \" + this.debugInfo());\n      }\n      return this.parent.children[i + 1];\n    };\n\n    XMLNode.prototype.importDocument = function(doc) {\n      var clonedRoot;\n      clonedRoot = doc.root().clone();\n      clonedRoot.parent = this;\n      clonedRoot.isRoot = false;\n      this.children.push(clonedRoot);\n      return this;\n    };\n\n    XMLNode.prototype.debugInfo = function(name) {\n      var ref2, ref3;\n      name = name || this.name;\n      if ((name == null) && !((ref2 = this.parent) != null ? ref2.name : void 0)) {\n        return \"\";\n      } else if (name == null) {\n        return \"parent: <\" + this.parent.name + \">\";\n      } else if (!((ref3 = this.parent) != null ? ref3.name : void 0)) {\n        return \"node: <\" + name + \">\";\n      } else {\n        return \"node: <\" + name + \">, parent: <\" + this.parent.name + \">\";\n      }\n    };\n\n    XMLNode.prototype.ele = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.doc = function() {\n      return this.document();\n    };\n\n    XMLNode.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLNode.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLNode.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.u = function() {\n      return this.up();\n    };\n\n    XMLNode.prototype.importXMLBuilder = function(doc) {\n      return this.importDocument(doc);\n    };\n\n    XMLNode.prototype.replaceChild = function(newChild, oldChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.removeChild = function(oldChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.appendChild = function(newChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.hasChildNodes = function() {\n      return this.children.length !== 0;\n    };\n\n    XMLNode.prototype.cloneNode = function(deep) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.normalize = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isSupported = function(feature, version) {\n      return true;\n    };\n\n    XMLNode.prototype.hasAttributes = function() {\n      return this.attribs.length !== 0;\n    };\n\n    XMLNode.prototype.compareDocumentPosition = function(other) {\n      var ref, res;\n      ref = this;\n      if (ref === other) {\n        return 0;\n      } else if (this.document() !== other.document()) {\n        res = DocumentPosition.Disconnected | DocumentPosition.ImplementationSpecific;\n        if (Math.random() < 0.5) {\n          res |= DocumentPosition.Preceding;\n        } else {\n          res |= DocumentPosition.Following;\n        }\n        return res;\n      } else if (ref.isAncestor(other)) {\n        return DocumentPosition.Contains | DocumentPosition.Preceding;\n      } else if (ref.isDescendant(other)) {\n        return DocumentPosition.Contains | DocumentPosition.Following;\n      } else if (ref.isPreceding(other)) {\n        return DocumentPosition.Preceding;\n      } else {\n        return DocumentPosition.Following;\n      }\n    };\n\n    XMLNode.prototype.isSameNode = function(other) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.lookupPrefix = function(namespaceURI) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isDefaultNamespace = function(namespaceURI) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.lookupNamespaceURI = function(prefix) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isEqualNode = function(node) {\n      var i, j, ref2;\n      if (node.nodeType !== this.nodeType) {\n        return false;\n      }\n      if (node.children.length !== this.children.length) {\n        return false;\n      }\n      for (i = j = 0, ref2 = this.children.length - 1; 0 <= ref2 ? j <= ref2 : j >= ref2; i = 0 <= ref2 ? ++j : --j) {\n        if (!this.children[i].isEqualNode(node.children[i])) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    XMLNode.prototype.getFeature = function(feature, version) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.setUserData = function(key, data, handler) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.getUserData = function(key) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.contains = function(other) {\n      if (!other) {\n        return false;\n      }\n      return other === this || this.isDescendant(other);\n    };\n\n    XMLNode.prototype.isDescendant = function(node) {\n      var child, isDescendantChild, j, len, ref2;\n      ref2 = this.children;\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        if (node === child) {\n          return true;\n        }\n        isDescendantChild = child.isDescendant(node);\n        if (isDescendantChild) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    XMLNode.prototype.isAncestor = function(node) {\n      return node.isDescendant(this);\n    };\n\n    XMLNode.prototype.isPreceding = function(node) {\n      var nodePos, thisPos;\n      nodePos = this.treePosition(node);\n      thisPos = this.treePosition(this);\n      if (nodePos === -1 || thisPos === -1) {\n        return false;\n      } else {\n        return nodePos < thisPos;\n      }\n    };\n\n    XMLNode.prototype.isFollowing = function(node) {\n      var nodePos, thisPos;\n      nodePos = this.treePosition(node);\n      thisPos = this.treePosition(this);\n      if (nodePos === -1 || thisPos === -1) {\n        return false;\n      } else {\n        return nodePos > thisPos;\n      }\n    };\n\n    XMLNode.prototype.treePosition = function(node) {\n      var found, pos;\n      pos = 0;\n      found = false;\n      this.foreachTreeNode(this.document(), function(childNode) {\n        pos++;\n        if (!found && childNode === node) {\n          return found = true;\n        }\n      });\n      if (found) {\n        return pos;\n      } else {\n        return -1;\n      }\n    };\n\n    XMLNode.prototype.foreachTreeNode = function(node, func) {\n      var child, j, len, ref2, res;\n      node || (node = this.document());\n      ref2 = node.children;\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        if (res = func(child)) {\n          return res;\n        } else {\n          res = this.foreachTreeNode(child, func);\n          if (res) {\n            return res;\n          }\n        }\n      }\n    };\n\n    return XMLNode;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNodeList;\n\n  module.exports = XMLNodeList = (function() {\n    function XMLNodeList(nodes) {\n      this.nodes = nodes;\n    }\n\n    Object.defineProperty(XMLNodeList.prototype, 'length', {\n      get: function() {\n        return this.nodes.length || 0;\n      }\n    });\n\n    XMLNodeList.prototype.clone = function() {\n      return this.nodes = null;\n    };\n\n    XMLNodeList.prototype.item = function(index) {\n      return this.nodes[index] || null;\n    };\n\n    return XMLNodeList;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLProcessingInstruction,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLProcessingInstruction = (function(superClass) {\n    extend(XMLProcessingInstruction, superClass);\n\n    function XMLProcessingInstruction(parent, target, value) {\n      XMLProcessingInstruction.__super__.constructor.call(this, parent);\n      if (target == null) {\n        throw new Error(\"Missing instruction target. \" + this.debugInfo());\n      }\n      this.type = NodeType.ProcessingInstruction;\n      this.target = this.stringify.insTarget(target);\n      this.name = this.target;\n      if (value) {\n        this.value = this.stringify.insValue(value);\n      }\n    }\n\n    XMLProcessingInstruction.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLProcessingInstruction.prototype.toString = function(options) {\n      return this.options.writer.processingInstruction(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLProcessingInstruction.prototype.isEqualNode = function(node) {\n      if (!XMLProcessingInstruction.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.target !== this.target) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLProcessingInstruction;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLNode, XMLRaw,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLRaw = (function(superClass) {\n    extend(XMLRaw, superClass);\n\n    function XMLRaw(parent, text) {\n      XMLRaw.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing raw text. \" + this.debugInfo());\n      }\n      this.type = NodeType.Raw;\n      this.value = this.stringify.raw(text);\n    }\n\n    XMLRaw.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLRaw.prototype.toString = function(options) {\n      return this.options.writer.raw(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLRaw;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLStreamWriter, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLStreamWriter = (function(superClass) {\n    extend(XMLStreamWriter, superClass);\n\n    function XMLStreamWriter(stream, options) {\n      this.stream = stream;\n      XMLStreamWriter.__super__.constructor.call(this, options);\n    }\n\n    XMLStreamWriter.prototype.endline = function(node, options, level) {\n      if (node.isLastRootNode && options.state === WriterState.CloseTag) {\n        return '';\n      } else {\n        return XMLStreamWriter.__super__.endline.call(this, node, options, level);\n      }\n    };\n\n    XMLStreamWriter.prototype.document = function(doc, options) {\n      var child, i, j, k, len, len1, ref, ref1, results;\n      ref = doc.children;\n      for (i = j = 0, len = ref.length; j < len; i = ++j) {\n        child = ref[i];\n        child.isLastRootNode = i === doc.children.length - 1;\n      }\n      options = this.filterOptions(options);\n      ref1 = doc.children;\n      results = [];\n      for (k = 0, len1 = ref1.length; k < len1; k++) {\n        child = ref1[k];\n        results.push(this.writeChildNode(child, options, 0));\n      }\n      return results;\n    };\n\n    XMLStreamWriter.prototype.attribute = function(att, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.attribute.call(this, att, options, level));\n    };\n\n    XMLStreamWriter.prototype.cdata = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.cdata.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.comment = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.comment.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.declaration = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.declaration.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.docType = function(node, options, level) {\n      var child, j, len, ref;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      this.stream.write(this.indent(node, options, level));\n      this.stream.write('<!DOCTYPE ' + node.root().name);\n      if (node.pubID && node.sysID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n      } else if (node.sysID) {\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n      }\n      if (node.children.length > 0) {\n        this.stream.write(' [');\n        this.stream.write(this.endline(node, options, level));\n        options.state = WriterState.InsideTag;\n        ref = node.children;\n        for (j = 0, len = ref.length; j < len; j++) {\n          child = ref[j];\n          this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        this.stream.write(']');\n      }\n      options.state = WriterState.CloseTag;\n      this.stream.write(options.spaceBeforeSlash + '>');\n      this.stream.write(this.endline(node, options, level));\n      options.state = WriterState.None;\n      return this.closeNode(node, options, level);\n    };\n\n    XMLStreamWriter.prototype.element = function(node, options, level) {\n      var att, child, childNodeCount, firstChildNode, j, len, name, prettySuppressed, ref, ref1;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      this.stream.write(this.indent(node, options, level) + '<' + node.name);\n      ref = node.attribs;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        this.attribute(att, options, level);\n      }\n      childNodeCount = node.children.length;\n      firstChildNode = childNodeCount === 0 ? null : node.children[0];\n      if (childNodeCount === 0 || node.children.every(function(e) {\n        return (e.type === NodeType.Text || e.type === NodeType.Raw) && e.value === '';\n      })) {\n        if (options.allowEmpty) {\n          this.stream.write('>');\n          options.state = WriterState.CloseTag;\n          this.stream.write('</' + node.name + '>');\n        } else {\n          options.state = WriterState.CloseTag;\n          this.stream.write(options.spaceBeforeSlash + '/>');\n        }\n      } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw) && (firstChildNode.value != null)) {\n        this.stream.write('>');\n        options.state = WriterState.InsideTag;\n        options.suppressPrettyCount++;\n        prettySuppressed = true;\n        this.writeChildNode(firstChildNode, options, level + 1);\n        options.suppressPrettyCount--;\n        prettySuppressed = false;\n        options.state = WriterState.CloseTag;\n        this.stream.write('</' + node.name + '>');\n      } else {\n        this.stream.write('>' + this.endline(node, options, level));\n        options.state = WriterState.InsideTag;\n        ref1 = node.children;\n        for (j = 0, len = ref1.length; j < len; j++) {\n          child = ref1[j];\n          this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        this.stream.write(this.indent(node, options, level) + '</' + node.name + '>');\n      }\n      this.stream.write(this.endline(node, options, level));\n      options.state = WriterState.None;\n      return this.closeNode(node, options, level);\n    };\n\n    XMLStreamWriter.prototype.processingInstruction = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.processingInstruction.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.raw = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.raw.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.text = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.text.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdAttList = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdAttList.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdElement = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdElement.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdEntity = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdEntity.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdNotation = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdNotation.call(this, node, options, level));\n    };\n\n    return XMLStreamWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLStringWriter, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  module.exports = XMLStringWriter = (function(superClass) {\n    extend(XMLStringWriter, superClass);\n\n    function XMLStringWriter(options) {\n      XMLStringWriter.__super__.constructor.call(this, options);\n    }\n\n    XMLStringWriter.prototype.document = function(doc, options) {\n      var child, i, len, r, ref;\n      options = this.filterOptions(options);\n      r = '';\n      ref = doc.children;\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        r += this.writeChildNode(child, options, 0);\n      }\n      if (options.pretty && r.slice(-options.newline.length) === options.newline) {\n        r = r.slice(0, -options.newline.length);\n      }\n      return r;\n    };\n\n    return XMLStringWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLStringifier,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    hasProp = {}.hasOwnProperty;\n\n  module.exports = XMLStringifier = (function() {\n    function XMLStringifier(options) {\n      this.assertLegalName = bind(this.assertLegalName, this);\n      this.assertLegalChar = bind(this.assertLegalChar, this);\n      var key, ref, value;\n      options || (options = {});\n      this.options = options;\n      if (!this.options.version) {\n        this.options.version = '1.0';\n      }\n      ref = options.stringify || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[key] = value;\n      }\n    }\n\n    XMLStringifier.prototype.name = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalName('' + val || '');\n    };\n\n    XMLStringifier.prototype.text = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar(this.textEscape('' + val || ''));\n    };\n\n    XMLStringifier.prototype.cdata = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      val = val.replace(']]>', ']]]]><![CDATA[>');\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.comment = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (val.match(/--/)) {\n        throw new Error(\"Comment text cannot contain double-hypen: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.raw = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.attValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar(this.attEscape(val = '' + val || ''));\n    };\n\n    XMLStringifier.prototype.insTarget = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.insValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (val.match(/\\?>/)) {\n        throw new Error(\"Invalid processing instruction value: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.xmlVersion = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (!val.match(/1\\.[0-9]+/)) {\n        throw new Error(\"Invalid version number: \" + val);\n      }\n      return val;\n    };\n\n    XMLStringifier.prototype.xmlEncoding = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (!val.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/)) {\n        throw new Error(\"Invalid encoding: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.xmlStandalone = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      if (val) {\n        return \"yes\";\n      } else {\n        return \"no\";\n      }\n    };\n\n    XMLStringifier.prototype.dtdPubID = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdSysID = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdElementValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdAttType = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdAttDefault = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdEntityValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdNData = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.convertAttKey = '@';\n\n    XMLStringifier.prototype.convertPIKey = '?';\n\n    XMLStringifier.prototype.convertTextKey = '#text';\n\n    XMLStringifier.prototype.convertCDataKey = '#cdata';\n\n    XMLStringifier.prototype.convertCommentKey = '#comment';\n\n    XMLStringifier.prototype.convertRawKey = '#raw';\n\n    XMLStringifier.prototype.assertLegalChar = function(str) {\n      var regex, res;\n      if (this.options.noValidation) {\n        return str;\n      }\n      regex = '';\n      if (this.options.version === '1.0') {\n        regex = /[\\0-\\x08\\x0B\\f\\x0E-\\x1F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n        if (res = str.match(regex)) {\n          throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\n        }\n      } else if (this.options.version === '1.1') {\n        regex = /[\\0\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n        if (res = str.match(regex)) {\n          throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\n        }\n      }\n      return str;\n    };\n\n    XMLStringifier.prototype.assertLegalName = function(str) {\n      var regex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      this.assertLegalChar(str);\n      regex = /^([:A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])([\\x2D\\.0-:A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])*$/;\n      if (!str.match(regex)) {\n        throw new Error(\"Invalid character in name\");\n      }\n      return str;\n    };\n\n    XMLStringifier.prototype.textEscape = function(str) {\n      var ampregex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      ampregex = this.options.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r/g, '&#xD;');\n    };\n\n    XMLStringifier.prototype.attEscape = function(str) {\n      var ampregex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      ampregex = this.options.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/\\t/g, '&#x9;').replace(/\\n/g, '&#xA;').replace(/\\r/g, '&#xD;');\n    };\n\n    return XMLStringifier;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLText,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLText = (function(superClass) {\n    extend(XMLText, superClass);\n\n    function XMLText(parent, text) {\n      XMLText.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing element text. \" + this.debugInfo());\n      }\n      this.name = \"#text\";\n      this.type = NodeType.Text;\n      this.value = this.stringify.text(text);\n    }\n\n    Object.defineProperty(XMLText.prototype, 'isElementContentWhitespace', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLText.prototype, 'wholeText', {\n      get: function() {\n        var next, prev, str;\n        str = '';\n        prev = this.previousSibling;\n        while (prev) {\n          str = prev.data + str;\n          prev = prev.previousSibling;\n        }\n        str += this.data;\n        next = this.nextSibling;\n        while (next) {\n          str = str + next.data;\n          next = next.nextSibling;\n        }\n        return str;\n      }\n    });\n\n    XMLText.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLText.prototype.toString = function(options) {\n      return this.options.writer.text(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLText.prototype.splitText = function(offset) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLText.prototype.replaceWholeText = function(content) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    return XMLText;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLProcessingInstruction, XMLRaw, XMLText, XMLWriterBase, assign,\n    hasProp = {}.hasOwnProperty;\n\n  assign = require('./Utility').assign;\n\n  NodeType = require('./NodeType');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLElement = require('./XMLElement');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDummy = require('./XMLDummy');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLWriterBase = (function() {\n    function XMLWriterBase(options) {\n      var key, ref, value;\n      options || (options = {});\n      this.options = options;\n      ref = options.writer || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[\"_\" + key] = this[key];\n        this[key] = value;\n      }\n    }\n\n    XMLWriterBase.prototype.filterOptions = function(options) {\n      var filteredOptions, ref, ref1, ref2, ref3, ref4, ref5, ref6;\n      options || (options = {});\n      options = assign({}, this.options, options);\n      filteredOptions = {\n        writer: this\n      };\n      filteredOptions.pretty = options.pretty || false;\n      filteredOptions.allowEmpty = options.allowEmpty || false;\n      filteredOptions.indent = (ref = options.indent) != null ? ref : '  ';\n      filteredOptions.newline = (ref1 = options.newline) != null ? ref1 : '\\n';\n      filteredOptions.offset = (ref2 = options.offset) != null ? ref2 : 0;\n      filteredOptions.dontPrettyTextNodes = (ref3 = (ref4 = options.dontPrettyTextNodes) != null ? ref4 : options.dontprettytextnodes) != null ? ref3 : 0;\n      filteredOptions.spaceBeforeSlash = (ref5 = (ref6 = options.spaceBeforeSlash) != null ? ref6 : options.spacebeforeslash) != null ? ref5 : '';\n      if (filteredOptions.spaceBeforeSlash === true) {\n        filteredOptions.spaceBeforeSlash = ' ';\n      }\n      filteredOptions.suppressPrettyCount = 0;\n      filteredOptions.user = {};\n      filteredOptions.state = WriterState.None;\n      return filteredOptions;\n    };\n\n    XMLWriterBase.prototype.indent = function(node, options, level) {\n      var indentLevel;\n      if (!options.pretty || options.suppressPrettyCount) {\n        return '';\n      } else if (options.pretty) {\n        indentLevel = (level || 0) + options.offset + 1;\n        if (indentLevel > 0) {\n          return new Array(indentLevel).join(options.indent);\n        }\n      }\n      return '';\n    };\n\n    XMLWriterBase.prototype.endline = function(node, options, level) {\n      if (!options.pretty || options.suppressPrettyCount) {\n        return '';\n      } else {\n        return options.newline;\n      }\n    };\n\n    XMLWriterBase.prototype.attribute = function(att, options, level) {\n      var r;\n      this.openAttribute(att, options, level);\n      r = ' ' + att.name + '=\"' + att.value + '\"';\n      this.closeAttribute(att, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.cdata = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<![CDATA[';\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += ']]>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.comment = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!-- ';\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += ' -->' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.declaration = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<?xml';\n      options.state = WriterState.InsideTag;\n      r += ' version=\"' + node.version + '\"';\n      if (node.encoding != null) {\n        r += ' encoding=\"' + node.encoding + '\"';\n      }\n      if (node.standalone != null) {\n        r += ' standalone=\"' + node.standalone + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '?>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.docType = function(node, options, level) {\n      var child, i, len, r, ref;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      r += '<!DOCTYPE ' + node.root().name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      if (node.children.length > 0) {\n        r += ' [';\n        r += this.endline(node, options, level);\n        options.state = WriterState.InsideTag;\n        ref = node.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          r += this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        r += ']';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.element = function(node, options, level) {\n      var att, child, childNodeCount, firstChildNode, i, j, len, len1, name, prettySuppressed, r, ref, ref1, ref2;\n      level || (level = 0);\n      prettySuppressed = false;\n      r = '';\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r += this.indent(node, options, level) + '<' + node.name;\n      ref = node.attribs;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        r += this.attribute(att, options, level);\n      }\n      childNodeCount = node.children.length;\n      firstChildNode = childNodeCount === 0 ? null : node.children[0];\n      if (childNodeCount === 0 || node.children.every(function(e) {\n        return (e.type === NodeType.Text || e.type === NodeType.Raw) && e.value === '';\n      })) {\n        if (options.allowEmpty) {\n          r += '>';\n          options.state = WriterState.CloseTag;\n          r += '</' + node.name + '>' + this.endline(node, options, level);\n        } else {\n          options.state = WriterState.CloseTag;\n          r += options.spaceBeforeSlash + '/>' + this.endline(node, options, level);\n        }\n      } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw) && (firstChildNode.value != null)) {\n        r += '>';\n        options.state = WriterState.InsideTag;\n        options.suppressPrettyCount++;\n        prettySuppressed = true;\n        r += this.writeChildNode(firstChildNode, options, level + 1);\n        options.suppressPrettyCount--;\n        prettySuppressed = false;\n        options.state = WriterState.CloseTag;\n        r += '</' + node.name + '>' + this.endline(node, options, level);\n      } else {\n        if (options.dontPrettyTextNodes) {\n          ref1 = node.children;\n          for (i = 0, len = ref1.length; i < len; i++) {\n            child = ref1[i];\n            if ((child.type === NodeType.Text || child.type === NodeType.Raw) && (child.value != null)) {\n              options.suppressPrettyCount++;\n              prettySuppressed = true;\n              break;\n            }\n          }\n        }\n        r += '>' + this.endline(node, options, level);\n        options.state = WriterState.InsideTag;\n        ref2 = node.children;\n        for (j = 0, len1 = ref2.length; j < len1; j++) {\n          child = ref2[j];\n          r += this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        r += this.indent(node, options, level) + '</' + node.name + '>';\n        if (prettySuppressed) {\n          options.suppressPrettyCount--;\n        }\n        r += this.endline(node, options, level);\n        options.state = WriterState.None;\n      }\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.writeChildNode = function(node, options, level) {\n      switch (node.type) {\n        case NodeType.CData:\n          return this.cdata(node, options, level);\n        case NodeType.Comment:\n          return this.comment(node, options, level);\n        case NodeType.Element:\n          return this.element(node, options, level);\n        case NodeType.Raw:\n          return this.raw(node, options, level);\n        case NodeType.Text:\n          return this.text(node, options, level);\n        case NodeType.ProcessingInstruction:\n          return this.processingInstruction(node, options, level);\n        case NodeType.Dummy:\n          return '';\n        case NodeType.Declaration:\n          return this.declaration(node, options, level);\n        case NodeType.DocType:\n          return this.docType(node, options, level);\n        case NodeType.AttributeDeclaration:\n          return this.dtdAttList(node, options, level);\n        case NodeType.ElementDeclaration:\n          return this.dtdElement(node, options, level);\n        case NodeType.EntityDeclaration:\n          return this.dtdEntity(node, options, level);\n        case NodeType.NotationDeclaration:\n          return this.dtdNotation(node, options, level);\n        default:\n          throw new Error(\"Unknown XML node type: \" + node.constructor.name);\n      }\n    };\n\n    XMLWriterBase.prototype.processingInstruction = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<?';\n      options.state = WriterState.InsideTag;\n      r += node.target;\n      if (node.value) {\n        r += ' ' + node.value;\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '?>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.raw = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.text = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdAttList = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ATTLIST';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType;\n      if (node.defaultValueType !== '#DEFAULT') {\n        r += ' ' + node.defaultValueType;\n      }\n      if (node.defaultValue) {\n        r += ' \"' + node.defaultValue + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdElement = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ELEMENT';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.name + ' ' + node.value;\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdEntity = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ENTITY';\n      options.state = WriterState.InsideTag;\n      if (node.pe) {\n        r += ' %';\n      }\n      r += ' ' + node.name;\n      if (node.value) {\n        r += ' \"' + node.value + '\"';\n      } else {\n        if (node.pubID && node.sysID) {\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n        } else if (node.sysID) {\n          r += ' SYSTEM \"' + node.sysID + '\"';\n        }\n        if (node.nData) {\n          r += ' NDATA ' + node.nData;\n        }\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdNotation = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!NOTATION';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.pubID) {\n        r += ' PUBLIC \"' + node.pubID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.openNode = function(node, options, level) {};\n\n    XMLWriterBase.prototype.closeNode = function(node, options, level) {};\n\n    XMLWriterBase.prototype.openAttribute = function(att, options, level) {};\n\n    XMLWriterBase.prototype.closeAttribute = function(att, options, level) {};\n\n    return XMLWriterBase;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLDOMImplementation, XMLDocument, XMLDocumentCB, XMLStreamWriter, XMLStringWriter, assign, isFunction, ref;\n\n  ref = require('./Utility'), assign = ref.assign, isFunction = ref.isFunction;\n\n  XMLDOMImplementation = require('./XMLDOMImplementation');\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLDocumentCB = require('./XMLDocumentCB');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  XMLStreamWriter = require('./XMLStreamWriter');\n\n  NodeType = require('./NodeType');\n\n  WriterState = require('./WriterState');\n\n  module.exports.create = function(name, xmldec, doctype, options) {\n    var doc, root;\n    if (name == null) {\n      throw new Error(\"Root element needs a name.\");\n    }\n    options = assign({}, xmldec, doctype, options);\n    doc = new XMLDocument(options);\n    root = doc.element(name);\n    if (!options.headless) {\n      doc.declaration(options);\n      if ((options.pubID != null) || (options.sysID != null)) {\n        doc.dtd(options);\n      }\n    }\n    return root;\n  };\n\n  module.exports.begin = function(options, onData, onEnd) {\n    var ref1;\n    if (isFunction(options)) {\n      ref1 = [options, onData], onData = ref1[0], onEnd = ref1[1];\n      options = {};\n    }\n    if (onData) {\n      return new XMLDocumentCB(options, onData, onEnd);\n    } else {\n      return new XMLDocument(options);\n    }\n  };\n\n  module.exports.stringWriter = function(options) {\n    return new XMLStringWriter(options);\n  };\n\n  module.exports.streamWriter = function(stream, options) {\n    return new XMLStreamWriter(stream, options);\n  };\n\n  module.exports.implementation = new XMLDOMImplementation();\n\n  module.exports.nodeType = NodeType;\n\n  module.exports.writerState = WriterState;\n\n}).call(this);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as querystring from 'querystring';\nimport * as path from 'path';\nimport Logger from './logger';\nimport { isSupportedEnvironment } from './utils';\nimport { generateCodeChallenge, generateCodeVerifier, randomUUID } from './cryptoUtils';\nimport { BetterTokenStorage, IDidChangeInOtherWindowEvent } from './betterSecretStorage';\nimport { LoopbackAuthServer } from './node/authServer';\nimport { base64Decode } from './node/buffer';\nimport { fetching } from './node/fetch';\n\nconst redirectUrl = 'https://vscode.dev/redirect';\nconst loginEndpointUrl = 'https://login.microsoftonline.com/';\nconst DEFAULT_CLIENT_ID = 'aebc6443-996d-45c2-90f0-388ff96faa56';\nconst DEFAULT_TENANT = 'organizations';\n\ninterface IToken {\n\taccessToken?: string; // When unable to refresh due to network problems, the access token becomes undefined\n\tidToken?: string; // depending on the scopes can be either supplied or empty\n\n\texpiresIn?: number; // How long access token is valid, in seconds\n\texpiresAt?: number; // UNIX epoch time at which token will expire\n\trefreshToken: string;\n\n\taccount: {\n\t\tlabel: string;\n\t\tid: string;\n\t};\n\tscope: string;\n\tsessionId: string; // The account id + the scope\n}\n\ninterface IStoredSession {\n\tid: string;\n\trefreshToken: string;\n\tscope: string; // Scopes are alphabetized and joined with a space\n\taccount: {\n\t\tlabel?: string;\n\t\tdisplayName?: string;\n\t\tid: string;\n\t};\n}\n\nexport interface ITokenResponse {\n\taccess_token: string;\n\texpires_in: number;\n\text_expires_in: number;\n\trefresh_token: string;\n\tscope: string;\n\ttoken_type: string;\n\tid_token?: string;\n}\n\nexport interface IMicrosoftTokens {\n\taccessToken: string;\n\tidToken?: string;\n}\n\ninterface IScopeData {\n\tscopes: string[];\n\tscopeStr: string;\n\tscopesToSend: string;\n\tclientId: string;\n\ttenant: string;\n}\n\nexport const onDidChangeSessions = new vscode.EventEmitter<vscode.AuthenticationProviderAuthenticationSessionsChangeEvent>();\n\nexport const REFRESH_NETWORK_FAILURE = 'Network failure';\n\nclass UriEventHandler extends vscode.EventEmitter<vscode.Uri> implements vscode.UriHandler {\n\tpublic handleUri(uri: vscode.Uri) {\n\t\tthis.fire(uri);\n\t}\n}\n\nexport class AzureActiveDirectoryService {\n\t// For details on why this is set to 2/3... see https://github.com/microsoft/vscode/issues/133201#issuecomment-966668197\n\tprivate static a = 1000 * 2 / 3;\n\tprivate static b = 1000 * 60 * 30;\n\tprivate c: IToken[] = [];\n\tprivate d: Map<string, NodeJS.Timeout> = new Map<string, NodeJS.Timeout>();\n\tprivate f: Promise<any> | undefined;\n\tprivate g: UriEventHandler;\n\n\t// Used to keep track of current requests when not using the local server approach.\n\tprivate h = new Map<string, string[]>();\n\tprivate i = new Map<string, Promise<vscode.AuthenticationSession>>();\n\tprivate j = new Map<string, string>();\n\n\tprivate readonly k: BetterTokenStorage<IStoredSession>;\n\n\tconstructor(private l: vscode.ExtensionContext) {\n\t\tthis.k = new BetterTokenStorage('microsoft.login.keylist', l);\n\t\tthis.g = new UriEventHandler();\n\t\tl.subscriptions.push(vscode.window.registerUriHandler(this.g));\n\t\tl.subscriptions.push(this.k.onDidChangeInOtherWindow((e) => this.G(e)));\n\t}\n\n\tpublic async initialize(): Promise<void> {\n\t\tLogger.info('Reading sessions from secret storage...');\n\t\tconst sessions = await this.k.getAll();\n\t\tLogger.info(`Got ${sessions.length} stored sessions`);\n\n\t\tconst refreshes = sessions.map(async session => {\n\t\t\tLogger.trace(`Read the following stored session with scopes: ${session.scope}`);\n\t\t\tconst scopes = session.scope.split(' ');\n\t\t\tconst scopeData: IScopeData = {\n\t\t\t\tscopes,\n\t\t\t\tscopeStr: session.scope,\n\t\t\t\t// filter our special scopes\n\t\t\t\tscopesToSend: scopes.filter(s => !s.startsWith('VSCODE_')).join(' '),\n\t\t\t\tclientId: this.y(scopes),\n\t\t\t\ttenant: this.z(scopes),\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tawait this.w(session.refreshToken, scopeData, session.id);\n\t\t\t} catch (e) {\n\t\t\t\t// If we aren't connected to the internet, then wait and try to refresh again later.\n\t\t\t\tif (e.message === REFRESH_NETWORK_FAILURE) {\n\t\t\t\t\tthis.c.push({\n\t\t\t\t\t\taccessToken: undefined,\n\t\t\t\t\t\trefreshToken: session.refreshToken,\n\t\t\t\t\t\taccount: {\n\t\t\t\t\t\t\tlabel: session.account.label ?? session.account.displayName!,\n\t\t\t\t\t\t\tid: session.account.id\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: session.scope,\n\t\t\t\t\t\tsessionId: session.id\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tvscode.window.showErrorMessage(vscode.l10n.t('You have been signed out because reading stored authentication information failed.'));\n\t\t\t\t\tLogger.error(e);\n\t\t\t\t\tawait this.o({\n\t\t\t\t\t\taccessToken: undefined,\n\t\t\t\t\t\trefreshToken: session.refreshToken,\n\t\t\t\t\t\taccount: {\n\t\t\t\t\t\t\tlabel: session.account.label ?? session.account.displayName!,\n\t\t\t\t\t\t\tid: session.account.id\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: session.scope,\n\t\t\t\t\t\tsessionId: session.id\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst result = await Promise.allSettled(refreshes);\n\t\tfor (const res of result) {\n\t\t\tif (res.status === 'rejected') {\n\t\t\t\tLogger.error(`Failed to initialize stored data: ${res.reason}`);\n\t\t\t\tthis.clearSessions();\n\t\t\t}\n\t\t}\n\t}\n\n\t//#region session operations\n\n\tasync getSessions(scopes?: string[]): Promise<vscode.AuthenticationSession[]> {\n\t\tif (!scopes) {\n\t\t\tLogger.info('Getting sessions for all scopes...');\n\t\t\tconst sessions = this.c.map(token => this.u(token));\n\t\t\tLogger.info(`Got ${sessions.length} sessions for all scopes...`);\n\t\t\treturn sessions;\n\t\t}\n\n\t\tlet modifiedScopes = [...scopes];\n\t\tif (!modifiedScopes.includes('openid')) {\n\t\t\tmodifiedScopes.push('openid');\n\t\t}\n\t\tif (!modifiedScopes.includes('email')) {\n\t\t\tmodifiedScopes.push('email');\n\t\t}\n\t\tif (!modifiedScopes.includes('profile')) {\n\t\t\tmodifiedScopes.push('profile');\n\t\t}\n\t\tif (!modifiedScopes.includes('offline_access')) {\n\t\t\tmodifiedScopes.push('offline_access');\n\t\t}\n\t\tmodifiedScopes = modifiedScopes.sort();\n\n\t\tlet modifiedScopesStr = modifiedScopes.join(' ');\n\t\tLogger.info(`Getting sessions for the following scopes: ${modifiedScopesStr}`);\n\n\t\tif (this.f) {\n\t\t\tLogger.info('Refreshing in progress. Waiting for completion before continuing.');\n\t\t\ttry {\n\t\t\t\tawait this.f;\n\t\t\t} catch (e) {\n\t\t\t\t// this will get logged in the refresh function.\n\t\t\t}\n\t\t}\n\n\t\tlet matchingTokens = this.c.filter(token => token.scope === modifiedScopesStr);\n\n\t\t// The user may still have a token that doesn't have the openid & email scopes so check for that as well.\n\t\t// Eventually, we should remove this and force the user to re-log in so that we don't have any sessions\n\t\t// without an idtoken.\n\t\tif (!matchingTokens.length) {\n\t\t\tconst fallbackOrderedScopes = scopes.sort().join(' ');\n\t\t\tLogger.trace(`No session found with idtoken scopes... Using fallback scope list of: ${fallbackOrderedScopes}`);\n\t\t\tmatchingTokens = this.c.filter(token => token.scope === fallbackOrderedScopes);\n\t\t\tif (matchingTokens.length) {\n\t\t\t\tmodifiedScopesStr = fallbackOrderedScopes;\n\t\t\t}\n\t\t}\n\n\t\t// If we still don't have a matching token try to get a new token from an existing token by using\n\t\t// the refreshToken. This is documented here:\n\t\t// https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token\n\t\t// \"Refresh tokens are valid for all permissions that your client has already received consent for.\"\n\t\tif (!matchingTokens.length) {\n\t\t\tconst clientId = this.y(modifiedScopes);\n\t\t\t// Get a token with the correct client id.\n\t\t\tconst token = clientId === DEFAULT_CLIENT_ID\n\t\t\t\t? this.c.find(t => t.refreshToken && !t.scope.includes('VSCODE_CLIENT_ID'))\n\t\t\t\t: this.c.find(t => t.refreshToken && t.scope.includes(`VSCODE_CLIENT_ID:${clientId}`));\n\n\t\t\tif (token) {\n\t\t\t\tconst scopeData: IScopeData = {\n\t\t\t\t\tclientId,\n\t\t\t\t\tscopes: modifiedScopes,\n\t\t\t\t\tscopeStr: modifiedScopesStr,\n\t\t\t\t\t// filter our special scopes\n\t\t\t\t\tscopesToSend: modifiedScopes.filter(s => !s.startsWith('VSCODE_')).join(' '),\n\t\t\t\t\ttenant: this.z(modifiedScopes),\n\t\t\t\t};\n\n\t\t\t\ttry {\n\t\t\t\t\tconst itoken = await this.w(token.refreshToken, scopeData);\n\t\t\t\t\tmatchingTokens.push(itoken);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tLogger.error(`Attempted to get a new session for scopes '${scopeData.scopeStr}' using the existing session with scopes '${token.scope}' but it failed due to: ${err.message ?? err}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tLogger.info(`Got ${matchingTokens.length} sessions for scopes: ${modifiedScopesStr}`);\n\t\treturn Promise.all(matchingTokens.map(token => this.v(token)));\n\t}\n\n\tpublic createSession(scopes: string[]): Promise<vscode.AuthenticationSession> {\n\t\tif (!scopes.includes('openid')) {\n\t\t\tscopes.push('openid');\n\t\t}\n\t\tif (!scopes.includes('email')) {\n\t\t\tscopes.push('email');\n\t\t}\n\t\tif (!scopes.includes('profile')) {\n\t\t\tscopes.push('profile');\n\t\t}\n\t\tif (!scopes.includes('offline_access')) {\n\t\t\tscopes.push('offline_access');\n\t\t}\n\t\tscopes = scopes.sort();\n\t\tconst scopeData: IScopeData = {\n\t\t\tscopes,\n\t\t\tscopeStr: scopes.join(' '),\n\t\t\t// filter our special scopes\n\t\t\tscopesToSend: scopes.filter(s => !s.startsWith('VSCODE_')).join(' '),\n\t\t\tclientId: this.y(scopes),\n\t\t\ttenant: this.z(scopes),\n\t\t};\n\n\t\tLogger.info(`Logging in for the following scopes: ${scopeData.scopeStr}`);\n\t\tif (!scopeData.scopes.includes('offline_access')) {\n\t\t\tLogger.info('Warning: The \\'offline_access\\' scope was not included, so the generated token will not be able to be refreshed.');\n\t\t}\n\n\t\tconst runsRemote = vscode.env.remoteName !== undefined;\n\t\tconst runsServerless = vscode.env.remoteName === undefined && vscode.env.uiKind === vscode.UIKind.Web;\n\t\tif (runsRemote || runsServerless) {\n\t\t\treturn this.n(scopeData);\n\t\t}\n\n\t\ttry {\n\t\t\treturn this.m(scopeData);\n\t\t} catch (e) {\n\t\t\tLogger.error(`Error creating session for scopes: ${scopeData.scopeStr} Error: ${e}`);\n\n\t\t\t// If the error was about starting the server, try directly hitting the login endpoint instead\n\t\t\tif (e.message === 'Error listening to server' || e.message === 'Closed' || e.message === 'Timeout waiting for port') {\n\t\t\t\treturn this.n(scopeData);\n\t\t\t}\n\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprivate async m(scopeData: IScopeData) {\n\t\tconst codeVerifier = generateCodeVerifier();\n\t\tconst codeChallenge = await generateCodeChallenge(codeVerifier);\n\t\tconst qs = new URLSearchParams({\n\t\t\tresponse_type: 'code',\n\t\t\tresponse_mode: 'query',\n\t\t\tclient_id: scopeData.clientId,\n\t\t\tredirect_uri: redirectUrl,\n\t\t\tscope: scopeData.scopesToSend,\n\t\t\tprompt: 'select_account',\n\t\t\tcode_challenge_method: 'S256',\n\t\t\tcode_challenge: codeChallenge,\n\t\t}).toString();\n\t\tconst loginUrl = `${loginEndpointUrl}${scopeData.tenant}/oauth2/v2.0/authorize?${qs}`;\n\t\tconst server = new LoopbackAuthServer(path.join(__dirname, '../media'), loginUrl);\n\t\tawait server.start();\n\n\t\tlet codeToExchange;\n\t\ttry {\n\t\t\tvscode.env.openExternal(vscode.Uri.parse(`http://127.0.0.1:${server.port}/signin?nonce=${encodeURIComponent(server.nonce)}`));\n\t\t\tconst { code } = await server.waitForOAuthResponse();\n\t\t\tcodeToExchange = code;\n\t\t} finally {\n\t\t\tsetTimeout(() => {\n\t\t\t\tvoid server.stop();\n\t\t\t}, 5000);\n\t\t}\n\n\t\tconst session = await this.C(codeToExchange, codeVerifier, scopeData);\n\t\treturn session;\n\t}\n\n\tprivate async n(scopeData: IScopeData): Promise<vscode.AuthenticationSession> {\n\t\tlet callbackUri = await vscode.env.asExternalUri(vscode.Uri.parse(`${vscode.env.uriScheme}://vscode.microsoft-authentication`));\n\t\tconst nonce = generateCodeVerifier();\n\t\tconst callbackQuery = new URLSearchParams(callbackUri.query);\n\t\tcallbackQuery.set('nonce', encodeURIComponent(nonce));\n\t\tcallbackUri = callbackUri.with({\n\t\t\tquery: callbackQuery.toString()\n\t\t});\n\t\tconst state = encodeURIComponent(callbackUri.toString(true));\n\t\tconst codeVerifier = generateCodeVerifier();\n\t\tconst codeChallenge = await generateCodeChallenge(codeVerifier);\n\t\tconst signInUrl = `${loginEndpointUrl}${scopeData.tenant}/oauth2/v2.0/authorize`;\n\t\tconst oauthStartQuery = new URLSearchParams({\n\t\t\tresponse_type: 'code',\n\t\t\tclient_id: encodeURIComponent(scopeData.clientId),\n\t\t\tresponse_mode: 'query',\n\t\t\tredirect_uri: redirectUrl,\n\t\t\tstate,\n\t\t\tscope: scopeData.scopesToSend,\n\t\t\tprompt: 'select_account',\n\t\t\tcode_challenge_method: 'S256',\n\t\t\tcode_challenge: codeChallenge,\n\t\t});\n\t\tconst uri = vscode.Uri.parse(`${signInUrl}?${oauthStartQuery.toString()}`);\n\t\tvscode.env.openExternal(uri);\n\n\t\tlet inputBox: vscode.InputBox | undefined;\n\t\tconst timeoutPromise = new Promise((_: (value: vscode.AuthenticationSession) => void, reject) => {\n\t\t\tconst wait = setTimeout(() => {\n\t\t\t\tclearTimeout(wait);\n\t\t\t\tinputBox?.dispose();\n\t\t\t\treject('Login timed out.');\n\t\t\t}, 1000 * 60 * 5);\n\t\t});\n\n\t\tconst existingNonces = this.h.get(scopeData.scopeStr) || [];\n\t\tthis.h.set(scopeData.scopeStr, [...existingNonces, nonce]);\n\n\t\t// Register a single listener for the URI callback, in case the user starts the login process multiple times\n\t\t// before completing it.\n\t\tlet existingPromise = this.i.get(scopeData.scopeStr);\n\t\tif (!existingPromise) {\n\t\t\tif (isSupportedEnvironment(callbackUri)) {\n\t\t\t\texistingPromise = this.A(scopeData);\n\t\t\t} else {\n\t\t\t\tinputBox = vscode.window.createInputBox();\n\t\t\t\texistingPromise = this.B(inputBox, codeVerifier, scopeData);\n\t\t\t}\n\t\t\tthis.i.set(scopeData.scopeStr, existingPromise);\n\t\t}\n\n\t\tthis.j.set(nonce, codeVerifier);\n\n\t\treturn Promise.race([existingPromise, timeoutPromise])\n\t\t\t.finally(() => {\n\t\t\t\tthis.h.delete(scopeData.scopeStr);\n\t\t\t\tthis.i.delete(scopeData.scopeStr);\n\t\t\t\tthis.j.delete(nonce);\n\t\t\t});\n\t}\n\n\tpublic removeSessionById(sessionId: string, writeToDisk: boolean = true): Promise<vscode.AuthenticationSession | undefined> {\n\t\tLogger.info(`Logging out of session '${sessionId}'`);\n\t\tconst tokenIndex = this.c.findIndex(token => token.sessionId === sessionId);\n\t\tif (tokenIndex === -1) {\n\t\t\tLogger.info(`Session not found '${sessionId}'`);\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tconst token = this.c.splice(tokenIndex, 1)[0];\n\t\treturn this.o(token, writeToDisk);\n\t}\n\n\tpublic async clearSessions() {\n\t\tLogger.info('Logging out of all sessions');\n\t\tthis.c = [];\n\t\tawait this.k.deleteAll();\n\n\t\tthis.d.forEach(timeout => {\n\t\t\tclearTimeout(timeout);\n\t\t});\n\n\t\tthis.d.clear();\n\t}\n\n\tprivate async o(token: IToken, writeToDisk: boolean = true): Promise<vscode.AuthenticationSession | undefined> {\n\t\tthis.q(token.sessionId);\n\n\t\tif (writeToDisk) {\n\t\t\tawait this.k.delete(token.sessionId);\n\t\t}\n\n\t\tconst tokenIndex = this.c.findIndex(t => t.sessionId === token.sessionId);\n\t\tif (tokenIndex !== -1) {\n\t\t\tthis.c.splice(tokenIndex, 1);\n\t\t}\n\n\t\tconst session = this.u(token);\n\t\tLogger.info(`Sending change event for session that was removed with scopes: ${token.scope}`);\n\t\tonDidChangeSessions.fire({ added: [], removed: [session], changed: [] });\n\t\tLogger.info(`Logged out of session '${token.sessionId}' with scopes: ${token.scope}`);\n\t\treturn session;\n\t}\n\n\t//#endregion\n\n\t//#region timeout\n\n\tprivate p(sessionId: string, refreshToken: string, scopeData: IScopeData, timeout: number) {\n\t\tthis.q(sessionId);\n\t\tthis.d.set(sessionId, setTimeout(async () => {\n\t\t\ttry {\n\t\t\t\tconst refreshedToken = await this.w(refreshToken, scopeData, sessionId);\n\t\t\t\tLogger.info('Triggering change session event...');\n\t\t\t\tonDidChangeSessions.fire({ added: [], removed: [], changed: [this.u(refreshedToken)] });\n\t\t\t} catch (e) {\n\t\t\t\tif (e.message !== REFRESH_NETWORK_FAILURE) {\n\t\t\t\t\tvscode.window.showErrorMessage(vscode.l10n.t('You have been signed out because reading stored authentication information failed.'));\n\t\t\t\t\tawait this.removeSessionById(sessionId);\n\t\t\t\t}\n\t\t\t}\n\t\t}, timeout));\n\t}\n\n\tprivate q(sessionId: string): void {\n\t\tconst timeout = this.d.get(sessionId);\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\tthis.d.delete(sessionId);\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region convert operations\n\n\tprivate r(json: ITokenResponse, scopeData: IScopeData, existingId?: string): IToken {\n\t\tlet claims = undefined;\n\n\t\ttry {\n\t\t\tif (json.id_token) {\n\t\t\t\tclaims = JSON.parse(base64Decode(json.id_token.split('.')[1]));\n\t\t\t} else {\n\t\t\t\tLogger.info('Attempting to parse access_token instead since no id_token was included in the response.');\n\t\t\t\tclaims = JSON.parse(base64Decode(json.access_token.split('.')[1]));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\n\t\tlet label;\n\t\tif (claims.name && claims.email) {\n\t\t\tlabel = `${claims.name} - ${claims.email}`;\n\t\t} else {\n\t\t\tlabel = claims.email ?? claims.unique_name ?? claims.preferred_username ?? 'user@example.com';\n\t\t}\n\n\t\tconst id = `${claims.tid}/${(claims.oid ?? (claims.altsecid ?? '' + claims.ipd ?? ''))}`;\n\t\treturn {\n\t\t\texpiresIn: json.expires_in,\n\t\t\texpiresAt: json.expires_in ? Date.now() + json.expires_in * 1000 : undefined,\n\t\t\taccessToken: json.access_token,\n\t\t\tidToken: json.id_token,\n\t\t\trefreshToken: json.refresh_token,\n\t\t\tscope: scopeData.scopeStr,\n\t\t\tsessionId: existingId || `${id}/${randomUUID()}`,\n\t\t\taccount: {\n\t\t\t\tlabel,\n\t\t\t\tid\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Return a session object without checking for expiry and potentially refreshing.\n\t * @param token The token information.\n\t */\n\tprivate u(token: IToken): vscode.AuthenticationSession {\n\t\treturn {\n\t\t\tid: token.sessionId,\n\t\t\taccessToken: token.accessToken!,\n\t\t\tidToken: token.idToken,\n\t\t\taccount: token.account,\n\t\t\tscopes: token.scope.split(' ')\n\t\t};\n\t}\n\n\tprivate async v(token: IToken): Promise<vscode.AuthenticationSession> {\n\t\tif (token.accessToken && (!token.expiresAt || token.expiresAt > Date.now())) {\n\t\t\ttoken.expiresAt\n\t\t\t\t? Logger.info(`Token available from cache (for scopes ${token.scope}), expires in ${token.expiresAt - Date.now()} milliseconds`)\n\t\t\t\t: Logger.info('Token available from cache (for scopes ${token.scope})');\n\t\t\treturn {\n\t\t\t\tid: token.sessionId,\n\t\t\t\taccessToken: token.accessToken,\n\t\t\t\tidToken: token.idToken,\n\t\t\t\taccount: token.account,\n\t\t\t\tscopes: token.scope.split(' ')\n\t\t\t};\n\t\t}\n\n\t\ttry {\n\t\t\tLogger.info(`Token expired or unavailable (for scopes ${token.scope}), trying refresh`);\n\t\t\tconst scopes = token.scope.split(' ');\n\t\t\tconst scopeData: IScopeData = {\n\t\t\t\tscopes,\n\t\t\t\tscopeStr: token.scope,\n\t\t\t\t// filter our special scopes\n\t\t\t\tscopesToSend: scopes.filter(s => !s.startsWith('VSCODE_')).join(' '),\n\t\t\t\tclientId: this.y(scopes),\n\t\t\t\ttenant: this.z(scopes),\n\t\t\t};\n\t\t\tconst refreshedToken = await this.w(token.refreshToken, scopeData, token.sessionId);\n\t\t\tif (refreshedToken.accessToken) {\n\t\t\t\treturn {\n\t\t\t\t\tid: token.sessionId,\n\t\t\t\t\taccessToken: refreshedToken.accessToken,\n\t\t\t\t\tidToken: refreshedToken.idToken,\n\t\t\t\t\taccount: token.account,\n\t\t\t\t\tscopes: token.scope.split(' ')\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tthrow new Error();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow new Error('Unavailable due to network problems');\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region refresh logic\n\n\tprivate async w(refreshToken: string, scopeData: IScopeData, sessionId?: string): Promise<IToken> {\n\t\tthis.f = this.x(refreshToken, scopeData, sessionId);\n\t\ttry {\n\t\t\tconst result = await this.f;\n\t\t\treturn result;\n\t\t} finally {\n\t\t\tthis.f = undefined;\n\t\t}\n\t}\n\n\tprivate async x(refreshToken: string, scopeData: IScopeData, sessionId?: string): Promise<IToken> {\n\t\tLogger.info(`Refreshing token for scopes: ${scopeData.scopeStr}`);\n\t\tconst postData = querystring.stringify({\n\t\t\trefresh_token: refreshToken,\n\t\t\tclient_id: scopeData.clientId,\n\t\t\tgrant_type: 'refresh_token',\n\t\t\tscope: scopeData.scopesToSend\n\t\t});\n\n\t\tconst proxyEndpoints: { [providerId: string]: string } | undefined = await vscode.commands.executeCommand('workbench.getCodeExchangeProxyEndpoints');\n\t\tconst endpointUrl = proxyEndpoints?.microsoft || loginEndpointUrl;\n\t\tconst endpoint = `${endpointUrl}${scopeData.tenant}/oauth2/v2.0/token`;\n\n\t\ttry {\n\t\t\tconst json = await this.D(endpoint, postData, scopeData);\n\t\t\tconst token = this.r(json, scopeData, sessionId);\n\t\t\tif (token.expiresIn) {\n\t\t\t\tthis.p(token.sessionId, token.refreshToken, scopeData, token.expiresIn * AzureActiveDirectoryService.a);\n\t\t\t}\n\t\t\tthis.E(token, scopeData);\n\t\t\tLogger.info(`Token refresh success for scopes: ${token.scope}`);\n\t\t\treturn token;\n\t\t} catch (e) {\n\t\t\tif (e.message === REFRESH_NETWORK_FAILURE) {\n\t\t\t\t// We were unable to refresh because of a network failure (i.e. the user lost internet access).\n\t\t\t\t// so set up a timeout to try again later. We only do this if we have a session id to reference later.\n\t\t\t\tif (sessionId) {\n\t\t\t\t\tthis.p(sessionId, refreshToken, scopeData, AzureActiveDirectoryService.b);\n\t\t\t\t}\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\tLogger.error(`Refreshing token failed (for scopes: ${scopeData.scopeStr}): ${e.message}`);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region scope parsers\n\n\tprivate y(scopes: string[]) {\n\t\treturn scopes.reduce<string | undefined>((prev, current) => {\n\t\t\tif (current.startsWith('VSCODE_CLIENT_ID:')) {\n\t\t\t\treturn current.split('VSCODE_CLIENT_ID:')[1];\n\t\t\t}\n\t\t\treturn prev;\n\t\t}, undefined) ?? DEFAULT_CLIENT_ID;\n\t}\n\n\tprivate z(scopes: string[]) {\n\t\treturn scopes.reduce<string | undefined>((prev, current) => {\n\t\t\tif (current.startsWith('VSCODE_TENANT:')) {\n\t\t\t\treturn current.split('VSCODE_TENANT:')[1];\n\t\t\t}\n\t\t\treturn prev;\n\t\t}, undefined) ?? DEFAULT_TENANT;\n\t}\n\n\t//#endregion\n\n\t//#region oauth flow\n\n\tprivate async A(scopeData: IScopeData): Promise<vscode.AuthenticationSession> {\n\t\tlet uriEventListener: vscode.Disposable;\n\t\treturn new Promise((resolve: (value: vscode.AuthenticationSession) => void, reject) => {\n\t\t\turiEventListener = this.g.event(async (uri: vscode.Uri) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst query = querystring.parse(uri.query);\n\t\t\t\t\tlet { code, nonce } = query;\n\t\t\t\t\tif (Array.isArray(code)) {\n\t\t\t\t\t\tcode = code[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (!code) {\n\t\t\t\t\t\tthrow new Error('No code included in query');\n\t\t\t\t\t}\n\t\t\t\t\tif (Array.isArray(nonce)) {\n\t\t\t\t\t\tnonce = nonce[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (!nonce) {\n\t\t\t\t\t\tthrow new Error('No nonce included in query');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst acceptedStates = this.h.get(scopeData.scopeStr) || [];\n\t\t\t\t\t// Workaround double encoding issues of state in web\n\t\t\t\t\tif (!acceptedStates.includes(nonce) && !acceptedStates.includes(decodeURIComponent(nonce))) {\n\t\t\t\t\t\tthrow new Error('Nonce does not match.');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst verifier = this.j.get(nonce) ?? this.j.get(decodeURIComponent(nonce));\n\t\t\t\t\tif (!verifier) {\n\t\t\t\t\t\tthrow new Error('No available code verifier');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst session = await this.C(code, verifier, scopeData);\n\t\t\t\t\tresolve(session);\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}).then(result => {\n\t\t\turiEventListener.dispose();\n\t\t\treturn result;\n\t\t}).catch(err => {\n\t\t\turiEventListener.dispose();\n\t\t\tthrow err;\n\t\t});\n\t}\n\n\tprivate async B(inputBox: vscode.InputBox, verifier: string, scopeData: IScopeData): Promise<vscode.AuthenticationSession> {\n\t\tinputBox.ignoreFocusOut = true;\n\t\tinputBox.title = vscode.l10n.t('Microsoft Authentication');\n\t\tinputBox.prompt = vscode.l10n.t('Provide the authorization code to complete the sign in flow.');\n\t\tinputBox.placeholder = vscode.l10n.t('Paste authorization code here...');\n\t\treturn new Promise((resolve: (value: vscode.AuthenticationSession) => void, reject) => {\n\t\t\tinputBox.show();\n\t\t\tinputBox.onDidAccept(async () => {\n\t\t\t\tconst code = inputBox.value;\n\t\t\t\tif (code) {\n\t\t\t\t\tinputBox.dispose();\n\t\t\t\t\tconst session = await this.C(code, verifier, scopeData);\n\t\t\t\t\tresolve(session);\n\t\t\t\t}\n\t\t\t});\n\t\t\tinputBox.onDidHide(() => {\n\t\t\t\tif (!inputBox.value) {\n\t\t\t\t\tinputBox.dispose();\n\t\t\t\t\treject('Cancelled');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate async C(code: string, codeVerifier: string, scopeData: IScopeData): Promise<vscode.AuthenticationSession> {\n\t\tLogger.info(`Exchanging login code for token for scopes: ${scopeData.scopeStr}`);\n\t\tlet token: IToken | undefined;\n\t\ttry {\n\t\t\tconst postData = querystring.stringify({\n\t\t\t\tgrant_type: 'authorization_code',\n\t\t\t\tcode: code,\n\t\t\t\tclient_id: scopeData.clientId,\n\t\t\t\tscope: scopeData.scopesToSend,\n\t\t\t\tcode_verifier: codeVerifier,\n\t\t\t\tredirect_uri: redirectUrl\n\t\t\t});\n\n\t\t\tconst proxyEndpoints: { [providerId: string]: string } | undefined = await vscode.commands.executeCommand('workbench.getCodeExchangeProxyEndpoints');\n\t\t\tconst endpointUrl = proxyEndpoints?.microsoft || loginEndpointUrl;\n\t\t\tconst endpoint = `${endpointUrl}${scopeData.tenant}/oauth2/v2.0/token`;\n\n\t\t\tconst json = await this.D(endpoint, postData, scopeData);\n\t\t\tLogger.info(`Exchanging login code for token (for scopes: ${scopeData.scopeStr}) succeeded!`);\n\t\t\ttoken = this.r(json, scopeData);\n\t\t} catch (e) {\n\t\t\tLogger.error(`Error exchanging code for token (for scopes ${scopeData.scopeStr}): ${e}`);\n\t\t\tthrow e;\n\t\t}\n\n\t\tif (token.expiresIn) {\n\t\t\tthis.p(token.sessionId, token.refreshToken, scopeData, token.expiresIn * AzureActiveDirectoryService.a);\n\t\t}\n\t\tthis.E(token, scopeData);\n\t\tLogger.info(`Login successful for scopes: ${scopeData.scopeStr}`);\n\t\treturn await this.v(token);\n\t}\n\n\tprivate async D(endpoint: string, postData: string, scopeData: IScopeData): Promise<ITokenResponse> {\n\t\tlet attempts = 0;\n\t\twhile (attempts <= 3) {\n\t\t\tattempts++;\n\t\t\tlet result;\n\t\t\tlet errorMessage: string | undefined;\n\t\t\ttry {\n\t\t\t\tresult = await fetching(endpoint, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t'Content-Length': postData.length.toString()\n\t\t\t\t\t},\n\t\t\t\t\tbody: postData\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\terrorMessage = e.message ?? e;\n\t\t\t}\n\n\t\t\tif (!result || result.status > 499) {\n\t\t\t\tif (attempts > 3) {\n\t\t\t\t\tLogger.error(`Fetching token failed for scopes (${scopeData.scopeStr}): ${result ? await result.text() : errorMessage}`);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// Exponential backoff\n\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 5 * attempts * attempts * 1000));\n\t\t\t\tcontinue;\n\t\t\t} else if (!result.ok) {\n\t\t\t\t// For 4XX errors, the user may actually have an expired token or have changed\n\t\t\t\t// their password recently which is throwing a 4XX. For this, we throw an error\n\t\t\t\t// so that the user can be prompted to sign in again.\n\t\t\t\tthrow new Error(await result.text());\n\t\t\t}\n\n\t\t\treturn await result.json() as ITokenResponse;\n\t\t}\n\n\t\tthrow new Error(REFRESH_NETWORK_FAILURE);\n\t}\n\n\t//#endregion\n\n\t//#region storage operations\n\n\tprivate E(token: IToken, scopeData: IScopeData): void {\n\t\tLogger.info(`Setting token for scopes: ${scopeData.scopeStr}`);\n\n\t\tconst existingTokenIndex = this.c.findIndex(t => t.sessionId === token.sessionId);\n\t\tif (existingTokenIndex > -1) {\n\t\t\tthis.c.splice(existingTokenIndex, 1, token);\n\t\t} else {\n\t\t\tthis.c.push(token);\n\t\t}\n\n\t\t// Don't await because setting the token is only useful for any new windows that open.\n\t\tthis.F(token, scopeData);\n\t}\n\n\tprivate async F(token: IToken, scopeData: IScopeData): Promise<void> {\n\t\tif (!vscode.window.state.focused) {\n\t\t\tconst shouldStore = await new Promise((resolve, _) => {\n\t\t\t\t// To handle the case where the window is not focused for a long time. We want to store the token\n\t\t\t\t// at some point so that the next time they _do_ interact with VS Code, they don't have to sign in again.\n\t\t\t\tconst timer = setTimeout(\n\t\t\t\t\t() => resolve(true),\n\t\t\t\t\t// 5 hours + random extra 0-30 seconds so that each window doesn't try to store at the same time\n\t\t\t\t\t(18000000) + Math.floor(Math.random() * 30000)\n\t\t\t\t);\n\t\t\t\tconst dispose = vscode.Disposable.from(\n\t\t\t\t\tvscode.window.onDidChangeWindowState(e => {\n\t\t\t\t\t\tif (e.focused) {\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t\tdispose.dispose();\n\t\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tthis.k.onDidChangeInOtherWindow(e => {\n\t\t\t\t\t\tif (e.updated.includes(token.sessionId)) {\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t\tdispose.dispose();\n\t\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tif (!shouldStore) {\n\t\t\t\tLogger.info(`Not storing token for scopes ${scopeData.scopeStr} because it was added in another window`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tawait this.k.store(token.sessionId, {\n\t\t\tid: token.sessionId,\n\t\t\trefreshToken: token.refreshToken,\n\t\t\tscope: token.scope,\n\t\t\taccount: token.account\n\t\t});\n\t\tLogger.info(`Stored token for scopes: ${scopeData.scopeStr}`);\n\t}\n\n\tprivate async G(e: IDidChangeInOtherWindowEvent<IStoredSession>): Promise<void> {\n\t\tfor (const key of e.added) {\n\t\t\tconst session = await this.k.get(key);\n\t\t\tif (!session) {\n\t\t\t\tLogger.error('session not found that was apparently just added');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst matchesExisting = this.c.some(token => token.scope === session.scope && token.sessionId === session.id);\n\t\t\tif (!matchesExisting && session.refreshToken) {\n\t\t\t\ttry {\n\t\t\t\t\tconst scopes = session.scope.split(' ');\n\t\t\t\t\tconst scopeData: IScopeData = {\n\t\t\t\t\t\tscopes,\n\t\t\t\t\t\tscopeStr: session.scope,\n\t\t\t\t\t\t// filter our special scopes\n\t\t\t\t\t\tscopesToSend: scopes.filter(s => !s.startsWith('VSCODE_')).join(' '),\n\t\t\t\t\t\tclientId: this.y(scopes),\n\t\t\t\t\t\ttenant: this.z(scopes),\n\t\t\t\t\t};\n\t\t\t\t\tLogger.info(`Session added in another window with scopes: ${session.scope}`);\n\t\t\t\t\tconst token = await this.w(session.refreshToken, scopeData, session.id);\n\t\t\t\t\tLogger.info(`Sending change event for session that was added with scopes: ${scopeData.scopeStr}`);\n\t\t\t\t\tonDidChangeSessions.fire({ added: [this.u(token)], removed: [], changed: [] });\n\t\t\t\t\treturn;\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// Network failures will automatically retry on next poll.\n\t\t\t\t\tif (e.message !== REFRESH_NETWORK_FAILURE) {\n\t\t\t\t\t\tvscode.window.showErrorMessage(vscode.l10n.t('You have been signed out because reading stored authentication information failed.'));\n\t\t\t\t\t\tawait this.removeSessionById(session.id);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const { value } of e.removed) {\n\t\t\tLogger.info(`Session removed in another window with scopes: ${value.scope}`);\n\t\t\tawait this.removeSessionById(value.id, false);\n\t\t}\n\n\t\t// NOTE: We don't need to handle changed sessions because all that really would give us is a new refresh token\n\t\t// because access tokens are not stored in Secret Storage due to their short lifespan. This new refresh token\n\t\t// is not useful in this window because we really only care about the lifetime of the _access_ token which we\n\t\t// are already managing (see usages of `setSessionTimeout`).\n\t}\n\n\t//#endregion\n\n\t//#region static methods\n\n\tprivate static H(callbackUri: vscode.Uri): string {\n\t\tif (callbackUri.scheme !== 'https' && callbackUri.scheme !== 'http') {\n\t\t\treturn callbackUri.scheme;\n\t\t}\n\n\t\tswitch (callbackUri.authority) {\n\t\t\tcase 'online.visualstudio.com':\n\t\t\t\treturn 'vso';\n\t\t\tcase 'online-ppe.core.vsengsaas.visualstudio.com':\n\t\t\t\treturn 'vsoppe';\n\t\t\tcase 'online.dev.core.vsengsaas.visualstudio.com':\n\t\t\t\treturn 'vsodev';\n\t\t\tdefault:\n\t\t\t\treturn callbackUri.authority;\n\t\t}\n\t}\n\n\t//#endregion\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport Logger from './logger';\nimport { Event, EventEmitter, ExtensionContext, SecretStorage, SecretStorageChangeEvent } from 'vscode';\n\nexport interface IDidChangeInOtherWindowEvent<T> {\n\tadded: string[];\n\tupdated: string[];\n\tremoved: Array<{ key: string; value: T }>;\n}\n\nexport class BetterTokenStorage<T> {\n\t// set before and after _tokensPromise is set so getTokens can handle multiple operations.\n\tprivate a = false;\n\t// the current state. Don't use this directly and call getTokens() so that you ensure you\n\t// have awaited for all operations.\n\tprivate b: Promise<Map<string, T>> = Promise.resolve(new Map());\n\n\t// The vscode SecretStorage instance for this extension.\n\tprivate readonly c: SecretStorage;\n\n\tprivate d = new EventEmitter<IDidChangeInOtherWindowEvent<T>>();\n\tpublic onDidChangeInOtherWindow: Event<IDidChangeInOtherWindowEvent<T>> = this.d.event;\n\n\t/**\n\t *\n\t * @param f The key in the secret storage that will hold the list of keys associated with this instance of BetterTokenStorage\n\t * @param context the vscode Context used to register disposables and retreive the vscode.SecretStorage for this instance of VS Code\n\t */\n\tconstructor(private f: string, context: ExtensionContext) {\n\t\tthis.c = context.secrets;\n\t\tcontext.subscriptions.push(context.secrets.onDidChange((e) => this.l(e)));\n\t\tthis.g();\n\t}\n\n\tprivate g(): void {\n\t\tthis.a = true;\n\t\tthis.b = new Promise((resolve, _) => {\n\t\t\tthis.c.get(this.f).then(\n\t\t\t\tkeyListStr => {\n\t\t\t\t\tif (!keyListStr) {\n\t\t\t\t\t\tresolve(new Map());\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst keyList: Array<string> = JSON.parse(keyListStr);\n\t\t\t\t\t// Gather promises that contain key value pairs our of secret storage\n\t\t\t\t\tconst promises = keyList.map(key => new Promise<{ key: string; value: string | undefined }>((res, rej) => {\n\t\t\t\t\t\tthis.c.get(key).then((value) => {\n\t\t\t\t\t\t\tres({ key, value });\n\t\t\t\t\t\t}, rej);\n\t\t\t\t\t}));\n\t\t\t\t\tPromise.allSettled(promises).then((results => {\n\t\t\t\t\t\tconst tokens = new Map<string, T>();\n\t\t\t\t\t\tresults.forEach(p => {\n\t\t\t\t\t\t\tif (p.status === 'fulfilled' && p.value.value) {\n\t\t\t\t\t\t\t\tconst secret = this.i(p.value.value);\n\t\t\t\t\t\t\t\ttokens.set(p.value.key, secret);\n\t\t\t\t\t\t\t} else if (p.status === 'rejected') {\n\t\t\t\t\t\t\t\tLogger.error(p.reason);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tLogger.error('Key was not found in SecretStorage.');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(tokens);\n\t\t\t\t\t}));\n\t\t\t\t},\n\t\t\t\terr => {\n\t\t\t\t\tLogger.error(err);\n\t\t\t\t\tresolve(new Map());\n\t\t\t\t});\n\t\t});\n\t\tthis.a = false;\n\t}\n\n\tasync get(key: string): Promise<T | undefined> {\n\t\tconst tokens = await this.k();\n\t\treturn tokens.get(key);\n\t}\n\n\tasync getAll(): Promise<T[]> {\n\t\tconst tokens = await this.k();\n\t\tconst values = new Array<T>();\n\t\tfor (const [_, value] of tokens) {\n\t\t\tvalues.push(value);\n\t\t}\n\t\treturn values;\n\t}\n\n\tasync store(key: string, value: T): Promise<void> {\n\t\tconst tokens = await this.k();\n\n\t\tconst isAddition = !tokens.has(key);\n\t\ttokens.set(key, value);\n\t\tconst valueStr = this.j(value);\n\t\tthis.a = true;\n\t\tthis.b = new Promise((resolve, _) => {\n\t\t\tconst promises = [this.c.store(key, valueStr)];\n\n\t\t\t// if we are adding a secret we need to update the keylist too\n\t\t\tif (isAddition) {\n\t\t\t\tpromises.push(this.h(tokens));\n\t\t\t}\n\n\t\t\tPromise.allSettled(promises).then(results => {\n\t\t\t\tresults.forEach(r => {\n\t\t\t\t\tif (r.status === 'rejected') {\n\t\t\t\t\t\tLogger.error(r.reason);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresolve(tokens);\n\t\t\t});\n\t\t});\n\t\tthis.a = false;\n\t}\n\n\tasync delete(key: string): Promise<void> {\n\t\tconst tokens = await this.k();\n\t\tif (!tokens.has(key)) {\n\t\t\treturn;\n\t\t}\n\t\ttokens.delete(key);\n\n\t\tthis.a = true;\n\t\tthis.b = new Promise((resolve, _) => {\n\t\t\tPromise.allSettled([\n\t\t\t\tthis.c.delete(key),\n\t\t\t\tthis.h(tokens)\n\t\t\t]).then(results => {\n\t\t\t\tresults.forEach(r => {\n\t\t\t\t\tif (r.status === 'rejected') {\n\t\t\t\t\t\tLogger.error(r.reason);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresolve(tokens);\n\t\t\t});\n\t\t});\n\t\tthis.a = false;\n\t}\n\n\tasync deleteAll(): Promise<void> {\n\t\tconst tokens = await this.k();\n\t\tconst promises = [];\n\t\tfor (const [key] of tokens) {\n\t\t\tpromises.push(this.delete(key));\n\t\t}\n\t\tawait Promise.all(promises);\n\t}\n\n\tprivate async h(tokens: Map<string, T>) {\n\t\tconst keyList = [];\n\t\tfor (const [key] of tokens) {\n\t\t\tkeyList.push(key);\n\t\t}\n\n\t\tconst keyListStr = JSON.stringify(keyList);\n\t\tawait this.c.store(this.f, keyListStr);\n\t}\n\n\tprotected i(secret: string): T {\n\t\treturn JSON.parse(secret);\n\t}\n\n\tprotected j(secret: T): string {\n\t\treturn JSON.stringify(secret);\n\t}\n\n\t// This is the one way to get tokens to ensure all other operations that\n\t// came before you have been processed.\n\tprivate async k(): Promise<Map<string, T>> {\n\t\tlet tokens;\n\t\tdo {\n\t\t\ttokens = await this.b;\n\t\t} while (this.a);\n\t\treturn tokens;\n\t}\n\n\t// This is a crucial function that handles whether or not the token has changed in\n\t// a different window of VS Code and sends the necessary event if it has.\n\t// Scenarios this should cover:\n\t// * Added in another window\n\t// * Updated in another window\n\t// * Deleted in another window\n\t// * Added in this window\n\t// * Updated in this window\n\t// * Deleted in this window\n\tprivate async l(e: SecretStorageChangeEvent) {\n\t\tconst key = e.key;\n\n\t\t// The KeyList is only a list of keys to aid initial start up of VS Code to know which\n\t\t// Keys are associated with this handler.\n\t\tif (key === this.f) {\n\t\t\treturn;\n\t\t}\n\t\tconst tokens = await this.k();\n\n\t\tthis.a = true;\n\t\tthis.b = new Promise((resolve, _) => {\n\t\t\tthis.c.get(key).then(\n\t\t\t\tstorageSecretStr => {\n\t\t\t\t\tif (!storageSecretStr) {\n\t\t\t\t\t\t// true -> secret was deleted in another window\n\t\t\t\t\t\t// false -> secret was deleted in this window\n\t\t\t\t\t\tif (tokens.has(key)) {\n\t\t\t\t\t\t\tconst value = tokens.get(key)!;\n\t\t\t\t\t\t\ttokens.delete(key);\n\t\t\t\t\t\t\tthis.d.fire({ added: [], updated: [], removed: [{ key, value }] });\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn tokens;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst storageSecret = this.i(storageSecretStr);\n\t\t\t\t\tconst cachedSecret = tokens.get(key);\n\n\t\t\t\t\tif (!cachedSecret) {\n\t\t\t\t\t\t// token was added in another window\n\t\t\t\t\t\ttokens.set(key, storageSecret);\n\t\t\t\t\t\tthis.d.fire({ added: [key], updated: [], removed: [] });\n\t\t\t\t\t\treturn tokens;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cachedSecretStr = this.j(cachedSecret);\n\t\t\t\t\tif (storageSecretStr !== cachedSecretStr) {\n\t\t\t\t\t\t// token was updated in another window\n\t\t\t\t\t\ttokens.set(key, storageSecret);\n\t\t\t\t\t\tthis.d.fire({ added: [], updated: [key], removed: [] });\n\t\t\t\t\t}\n\n\t\t\t\t\t// what's in our token cache and what's in storage must be the same\n\t\t\t\t\t// which means this should cover the last two scenarios of\n\t\t\t\t\t// Added in this window & Updated in this window.\n\t\t\t\t\treturn tokens;\n\t\t\t\t},\n\t\t\t\terr => {\n\t\t\t\t\tLogger.error(err);\n\t\t\t\t\tresolve(tokens);\n\t\t\t\t}).then(resolve, err => {\n\t\t\t\t\tLogger.error(err);\n\t\t\t\t\tresolve(tokens);\n\t\t\t\t});\n\t\t});\n\t\tthis.a = false;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { base64Encode } from './node/buffer';\nimport { crypto } from './node/crypto';\n\nexport function randomUUID() {\n\treturn crypto.randomUUID();\n}\n\nfunction dec2hex(dec: number): string {\n\treturn ('0' + dec.toString(16)).slice(-2);\n}\n\nexport function generateCodeVerifier(): string {\n\tconst array = new Uint32Array(56 / 2);\n\tcrypto.getRandomValues(array);\n\treturn Array.from(array, dec2hex).join('');\n}\n\nfunction sha256(plain: string | undefined) {\n\tconst encoder = new TextEncoder();\n\tconst data = encoder.encode(plain);\n\treturn crypto.subtle.digest('SHA-256', data);\n}\n\nfunction base64urlencode(a: ArrayBuffer) {\n\tlet str = '';\n\tconst bytes = new Uint8Array(a);\n\tconst len = bytes.byteLength;\n\tfor (let i = 0; i < len; i++) {\n\t\tstr += String.fromCharCode(bytes[i]);\n\t}\n\treturn base64Encode(str)\n\t\t.replace(/\\+/g, '-')\n\t\t.replace(/\\//g, '_')\n\t\t.replace(/=+$/, '');\n}\n\nexport async function generateCodeChallenge(v: string) {\n\tconst hashed = await sha256(v);\n\tconst base64encoded = base64urlencode(hashed);\n\treturn base64encoded;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nconst Logger = vscode.window.createOutputChannel(vscode.l10n.t('Microsoft Authentication'), { log: true });\nexport default Logger;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as http from 'http';\nimport { URL } from 'url';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { randomBytes } from 'crypto';\n\nfunction sendFile(res: http.ServerResponse, filepath: string) {\n\tfs.readFile(filepath, (err, body) => {\n\t\tif (err) {\n\t\t\tconsole.error(err);\n\t\t\tres.writeHead(404);\n\t\t\tres.end();\n\t\t} else {\n\t\t\tres.writeHead(200, {\n\t\t\t\t'content-length': body.length,\n\t\t\t});\n\t\t\tres.end(body);\n\t\t}\n\t});\n}\n\ninterface IOAuthResult {\n\tcode: string;\n\tstate: string;\n}\n\ninterface ILoopbackServer {\n\t/**\n\t * If undefined, the server is not started yet.\n\t */\n\tport: number | undefined;\n\n\t/**\n\t * The nonce used\n\t */\n\tnonce: string;\n\n\t/**\n\t * The state parameter used in the OAuth flow.\n\t */\n\tstate: string | undefined;\n\n\t/**\n\t * Starts the server.\n\t * @returns The port to listen on.\n\t * @throws If the server fails to start.\n\t * @throws If the server is already started.\n\t */\n\tstart(): Promise<number>;\n\t/**\n\t * Stops the server.\n\t * @throws If the server is not started.\n\t * @throws If the server fails to stop.\n\t */\n\tstop(): Promise<void>;\n\t/**\n\t * Returns a promise that resolves to the result of the OAuth flow.\n\t */\n\twaitForOAuthResponse(): Promise<IOAuthResult>;\n}\n\nexport class LoopbackAuthServer implements ILoopbackServer {\n\tprivate readonly a: http.Server;\n\tprivate readonly b: Promise<IOAuthResult>;\n\tprivate c: URL;\n\n\tpublic nonce = randomBytes(16).toString('base64');\n\tpublic port: number | undefined;\n\n\tpublic set state(state: string | undefined) {\n\t\tif (state) {\n\t\t\tthis.c.searchParams.set('state', state);\n\t\t} else {\n\t\t\tthis.c.searchParams.delete('state');\n\t\t}\n\t}\n\tpublic get state(): string | undefined {\n\t\treturn this.c.searchParams.get('state') ?? undefined;\n\t}\n\n\tconstructor(serveRoot: string, startingRedirect: string) {\n\t\tif (!serveRoot) {\n\t\t\tthrow new Error('serveRoot must be defined');\n\t\t}\n\t\tif (!startingRedirect) {\n\t\t\tthrow new Error('startingRedirect must be defined');\n\t\t}\n\t\tthis.c = new URL(startingRedirect);\n\t\tlet deferred: { resolve: (result: IOAuthResult) => void; reject: (reason: any) => void };\n\t\tthis.b = new Promise<IOAuthResult>((resolve, reject) => deferred = { resolve, reject });\n\n\t\tthis.a = http.createServer((req, res) => {\n\t\t\tconst reqUrl = new URL(req.url!, `http://${req.headers.host}`);\n\t\t\tswitch (reqUrl.pathname) {\n\t\t\t\tcase '/signin': {\n\t\t\t\t\tconst receivedNonce = (reqUrl.searchParams.get('nonce') ?? '').replace(/ /g, '+');\n\t\t\t\t\tif (receivedNonce !== this.nonce) {\n\t\t\t\t\t\tres.writeHead(302, { location: `/?error=${encodeURIComponent('Nonce does not match.')}` });\n\t\t\t\t\t\tres.end();\n\t\t\t\t\t}\n\t\t\t\t\tres.writeHead(302, { location: this.c.toString() });\n\t\t\t\t\tres.end();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase '/callback': {\n\t\t\t\t\tconst code = reqUrl.searchParams.get('code') ?? undefined;\n\t\t\t\t\tconst state = reqUrl.searchParams.get('state') ?? undefined;\n\t\t\t\t\tconst nonce = (reqUrl.searchParams.get('nonce') ?? '').replace(/ /g, '+');\n\t\t\t\t\tif (!code || !state || !nonce) {\n\t\t\t\t\t\tres.writeHead(400);\n\t\t\t\t\t\tres.end();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.state !== state) {\n\t\t\t\t\t\tres.writeHead(302, { location: `/?error=${encodeURIComponent('State does not match.')}` });\n\t\t\t\t\t\tres.end();\n\t\t\t\t\t\tthrow new Error('State does not match.');\n\t\t\t\t\t}\n\t\t\t\t\tif (this.nonce !== nonce) {\n\t\t\t\t\t\tres.writeHead(302, { location: `/?error=${encodeURIComponent('Nonce does not match.')}` });\n\t\t\t\t\t\tres.end();\n\t\t\t\t\t\tthrow new Error('Nonce does not match.');\n\t\t\t\t\t}\n\t\t\t\t\tdeferred.resolve({ code, state });\n\t\t\t\t\tres.writeHead(302, { location: '/' });\n\t\t\t\t\tres.end();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// Serve the static files\n\t\t\t\tcase '/':\n\t\t\t\t\tsendFile(res, path.join(serveRoot, 'index.html'));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// substring to get rid of leading '/'\n\t\t\t\t\tsendFile(res, path.join(serveRoot, reqUrl.pathname.substring(1)));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic start(): Promise<number> {\n\t\treturn new Promise<number>((resolve, reject) => {\n\t\t\tif (this.a.listening) {\n\t\t\t\tthrow new Error('Server is already started');\n\t\t\t}\n\t\t\tconst portTimeout = setTimeout(() => {\n\t\t\t\treject(new Error('Timeout waiting for port'));\n\t\t\t}, 5000);\n\t\t\tthis.a.on('listening', () => {\n\t\t\t\tconst address = this.a.address();\n\t\t\t\tif (typeof address === 'string') {\n\t\t\t\t\tthis.port = parseInt(address);\n\t\t\t\t} else if (address instanceof Object) {\n\t\t\t\t\tthis.port = address.port;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('Unable to determine port');\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(portTimeout);\n\n\t\t\t\t// set state which will be used to redirect back to vscode\n\t\t\t\tthis.state = `http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`;\n\n\t\t\t\tresolve(this.port);\n\t\t\t});\n\t\t\tthis.a.on('error', err => {\n\t\t\t\treject(new Error(`Error listening to server: ${err}`));\n\t\t\t});\n\t\t\tthis.a.on('close', () => {\n\t\t\t\treject(new Error('Closed'));\n\t\t\t});\n\t\t\tthis.a.listen(0, '127.0.0.1');\n\t\t});\n\t}\n\n\tpublic stop(): Promise<void> {\n\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\tif (!this.a.listening) {\n\t\t\t\tthrow new Error('Server is not started');\n\t\t\t}\n\t\t\tthis.a.close((err) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic waitForOAuthResponse(): Promise<IOAuthResult> {\n\t\treturn this.b;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function base64Encode(text: string): string {\n\treturn Buffer.from(text, 'binary').toString('base64');\n}\n\nexport function base64Decode(text: string): string {\n\treturn Buffer.from(text, 'base64').toString('utf8');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nodeCrypto from 'crypto';\n\nexport const crypto: Crypto = nodeCrypto.webcrypto as any;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport fetch from 'node-fetch';\n\nexport const fetching = fetch;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { env, UIKind, Uri } from 'vscode';\n\nconst LOCALHOST_ADDRESSES = ['localhost', '127.0.0.1', '0:0:0:0:0:0:0:1', '::1'];\nfunction isLocalhost(uri: Uri): boolean {\n\tif (!/^https?$/i.test(uri.scheme)) {\n\t\treturn false;\n\t}\n\tconst host = uri.authority.split(':')[0];\n\treturn LOCALHOST_ADDRESSES.indexOf(host) >= 0;\n}\n\nexport function isSupportedEnvironment(uri: Uri): boolean {\n\tif (env.uiKind === UIKind.Desktop) {\n\t\treturn true;\n\t}\n\t// local development (localhost:* or 127.0.0.1:*)\n\tif (isLocalhost(uri)) {\n\t\treturn true;\n\t}\n\t// At this point we should only ever see https\n\tif (uri.scheme !== 'https') {\n\t\treturn false;\n\t}\n\n\treturn (\n\t\t// vscode.dev & insiders.vscode.dev\n\t\t/(?:^|\\.)vscode\\.dev$/.test(uri.authority) ||\n\t\t// github.dev & codespaces\n\t\t/(?:^|\\.)github\\.dev$/.test(uri.authority) ||\n\t\t// github.dev/codespaces local setup (github.localhost)\n\t\t/(?:^|\\.)github\\.localhost$/.test(uri.authority)\n\t);\n}\n","module.exports = require(\"@azure/opentelemetry-instrumentation-azure-sdk\");","module.exports = require(\"@opentelemetry/instrumentation\");","module.exports = require(\"applicationinsights-native-metrics\");","module.exports = require(\"assert\");","module.exports = require(\"async_hooks\");","module.exports = require(\"child_process\");","module.exports = require(\"console\");","module.exports = require(\"constants\");","module.exports = require(\"crypto\");","module.exports = require(\"dns\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"module\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"punycode\");","module.exports = require(\"querystring\");","module.exports = require(\"stream\");","module.exports = require(\"string_decoder\");","module.exports = require(\"timers\");","module.exports = require(\"tls\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"vscode\");","module.exports = require(\"zlib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { AzureActiveDirectoryService, onDidChangeSessions } from './AADHelper';\nimport TelemetryReporter from '@vscode/extension-telemetry';\n\nexport async function activate(context: vscode.ExtensionContext) {\n\tconst { name, version, aiKey } = context.extension.packageJSON as { name: string; version: string; aiKey: string };\n\tconst telemetryReporter = new TelemetryReporter(aiKey);\n\n\tconst loginService = new AzureActiveDirectoryService(context);\n\tawait loginService.initialize();\n\n\tcontext.subscriptions.push(vscode.authentication.registerAuthenticationProvider('microsoft', 'Microsoft', {\n\t\tonDidChangeSessions: onDidChangeSessions.event,\n\t\tgetSessions: (scopes: string[]) => loginService.getSessions(scopes),\n\t\tcreateSession: async (scopes: string[]) => {\n\t\t\ttry {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"login\" : {\n\t\t\t\t\t\t\"owner\": \"TylerLeonhardt\",\n\t\t\t\t\t\t\"comment\": \"Used to determine the usage of the Microsoft Auth Provider.\",\n\t\t\t\t\t\t\"scopes\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\", \"comment\": \"Used to determine what scope combinations are being requested.\" }\n\t\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('login', {\n\t\t\t\t\t// Get rid of guids from telemetry.\n\t\t\t\t\tscopes: JSON.stringify(scopes.map(s => s.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i, '{guid}'))),\n\t\t\t\t});\n\n\t\t\t\tconst session = await loginService.createSession(scopes.sort());\n\t\t\t\tonDidChangeSessions.fire({ added: [session], removed: [], changed: [] });\n\t\t\t\treturn session;\n\t\t\t} catch (e) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"loginFailed\" : { \"owner\": \"TylerLeonhardt\", \"comment\": \"Used to determine how often users run into issues with the login flow.\" }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('loginFailed');\n\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t},\n\t\tremoveSession: async (id: string) => {\n\t\t\ttry {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"logout\" : { \"owner\": \"TylerLeonhardt\", \"comment\": \"Used to determine how often users log out.\" }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('logout');\n\n\t\t\t\tconst session = await loginService.removeSessionById(id);\n\t\t\t\tif (session) {\n\t\t\t\t\tonDidChangeSessions.fire({ added: [], removed: [session], changed: [] });\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"logoutFailed\" : { \"owner\": \"TylerLeonhardt\", \"comment\": \"Used to determine how often fail to log out.\" }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('logoutFailed');\n\t\t\t}\n\t\t}\n\t}, { supportsMultipleAccounts: true }));\n\n\treturn;\n}\n\n// this method is called when your extension is deactivated\nexport function deactivate() { }\n"],"sourceRoot":""}